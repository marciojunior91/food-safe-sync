/* ============================================================================
   IPHONE RESPONSIVENESS - Optimizations for iPhone devices
   ============================================================================
   Target: iPhone SE (375px) to iPhone 16 Pro Max (430px)
   Strategy: Maximize screen space, optimize touch targets, perfect scrolling
   
   iPhone Models Covered:
   - iPhone SE (3rd gen): 375x667px
   - iPhone 13/14/15 Mini: 375x812px
   - iPhone 13/14/15: 390x844px
   - iPhone 13/14/15 Plus: 428x926px
   - iPhone 15 Pro: 393x852px
   - iPhone 15 Pro Max: 430x932px
   - iPhone 16: 393x852px
   - iPhone 16 Plus: 430x932px
   - iPhone 16 Pro: 402x874px
   - iPhone 16 Pro Max: 440x956px
============================================================================ */

/* ============================================================================
   BASE MOBILE STYLES - All iPhones
============================================================================ */
@media (max-width: 767px) {
  
  /* =========================================================================
     ROOT & BODY - Prevent zoom and enable smooth scrolling
  ========================================================================= */
  
  html {
    -webkit-text-size-adjust: 100%;
    -webkit-tap-highlight-color: transparent;
    touch-action: manipulation;
  }
  
  body {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    overflow-x: hidden !important;
  }
  
  /* Prevent horizontal scroll from overflowing elements */
  * {
    max-width: 100vw;
  }
  
  /* =========================================================================
     HEADER & NAVIGATION - Compact and efficient
  ========================================================================= */
  
  /* Main header - compact on mobile */
  header {
    padding: 0.75rem 1rem !important;
    position: sticky;
    top: 0;
    z-index: 50;
    background: var(--background);
    border-bottom: 1px solid var(--border);
  }
  
  /* Header content - allow wrapping on small screens */
  header > div,
  header div[class*="flex"] {
    flex-wrap: wrap !important;
    gap: 0.5rem !important;
  }
  
  /* Page title */
  h1 {
    font-size: 1.5rem !important;
    line-height: 1.3 !important;
    word-wrap: break-word !important;
  }
  
  /* Subtitle/description */
  header p,
  header div p {
    font-size: 0.875rem !important;
    line-height: 1.4 !important;
  }
  
  /* Header buttons - compact but touchable */
  header button {
    min-height: 44px !important;
    padding: 0.625rem 1rem !important;
    font-size: 0.875rem !important;
    white-space: nowrap !important;
  }
  
  /* Icon-only header buttons */
  header button[class*="size-"],
  header button svg:only-child {
    min-width: 44px !important;
    min-height: 44px !important;
    padding: 0.5rem !important;
  }
  
  /* =========================================================================
     MAIN CONTENT - Maximize usable space
  ========================================================================= */
  
  main {
    padding: 1rem !important;
    padding-bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
    overflow-x: hidden !important;
  }
  
  /* Content containers */
  main > div {
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
  
  /* Section spacing */
  .space-y-8 > * + * {
    margin-top: 1.5rem !important;
  }
  
  .space-y-6 > * + * {
    margin-top: 1.25rem !important;
  }
  
  .space-y-4 > * + * {
    margin-top: 1rem !important;
  }
  
  /* =========================================================================
     QUICK PRINT GRID - Single column, large cards
  ========================================================================= */
  
  /* Force single column on mobile */
  .quick-print-grid,
  div[class*="grid"] > div[class*="grid"],
  [class*="grid-cols-2"],
  [class*="grid-cols-3"],
  [class*="grid-cols-4"],
  [class*="grid-cols-5"] {
    display: grid !important;
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
    width: 100% !important;
    padding: 0 !important;
  }
  
  /* Product cards - compact and touch-friendly */
  .quick-print-grid button,
  div[class*="grid"] button[class*="min-h"],
  button[class*="flex-col items-center"] {
    min-height: 7.5rem !important;
    height: 7.5rem !important;
    width: 100% !important;
    padding: 0.875rem !important;
    display: flex !important;
    flex-direction: column !important;
    justify-content: center !important;
    align-items: center !important;
    gap: 0.5rem !important;
    position: relative !important;
    border-radius: 0.75rem !important;
  }
  
  /* Product emoji/icon - balanced size */
  .quick-print-grid button div[class*="text-5xl"],
  .quick-print-grid button div[class*="text-6xl"],
  button[class*="flex-col"] div[class*="text-"] {
    font-size: 2.5rem !important;
    line-height: 1 !important;
    margin-bottom: 0.25rem !important;
  }
  
  /* Product names - compact and readable */
  .quick-print-grid button span[class*="text-"],
  .quick-print-grid button span[class*="font-medium"],
  button[class*="flex-col"] span[class*="text-"] {
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    line-height: 1.2 !important;
    text-align: center !important;
    max-width: 100% !important;
    word-wrap: break-word !important;
    hyphens: auto !important;
    display: -webkit-box !important;
    -webkit-line-clamp: 2 !important;
    line-clamp: 2 !important;
    -webkit-box-orient: vertical !important;
    overflow: hidden !important;
  }
  
  /* Quick add button (+) - compact but touchable */
  .quick-print-grid button div[class*="rounded-full"],
  .quick-print-grid button > div > div[class*="h-8 w-8"],
  button div[class*="absolute top-"] div[class*="rounded-full"] {
    width: 2.25rem !important;
    height: 2.25rem !important;
    min-width: 2.25rem !important;
    min-height: 2.25rem !important;
    top: 0.375rem !important;
    right: 0.375rem !important;
  }
  
  .quick-print-grid button div[class*="rounded-full"] svg {
    width: 1.25rem !important;
    height: 1.25rem !important;
  }
  
  /* Expiry badges - small and unobtrusive */
  .quick-print-grid .badge,
  .quick-print-grid [class*="Badge"],
  .quick-print-grid div[class*="absolute"] [class*="Badge"],
  .quick-print-grid div[class*="absolute"] > div,
  button[class*="flex-col"] div[class*="absolute"] [class*="Badge"],
  button[class*="flex-col"] div[class*="absolute"] > div,
  button div[class*="top-2"] [class*="Badge"],
  button div[class*="top-2"] > div {
    padding: 0.25rem 0.5rem !important;
    font-size: 0.625rem !important;
    line-height: 1.2 !important;
    font-weight: 600 !important;
    border-radius: 0.375rem !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
  }
  
  /* =========================================================================
     STATS CARDS - 2 columns on mobile
  ========================================================================= */
  
  .grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-4,
  div[class*="grid-cols-1"][class*="md:grid-cols-2"][class*="lg:grid-cols-4"] {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.75rem !important;
  }
  
  /* Stats card content - compact */
  .stats-card,
  [class*="StatsCard"] {
    padding: 1rem !important;
  }
  
  .stats-card h3,
  [class*="StatsCard"] h3 {
    font-size: 0.75rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  .stats-card .value,
  [class*="StatsCard"] [class*="text-2xl"] {
    font-size: 1.5rem !important;
    line-height: 1.2 !important;
  }
  
  .stats-card .change,
  [class*="StatsCard"] [class*="text-sm"] {
    font-size: 0.75rem !important;
  }
  
  /* =========================================================================
     FORMS & INPUTS - Prevent iOS zoom, optimize touch
  ========================================================================= */
  
  /* All inputs - 16px font prevents iOS zoom */
  input[type="text"],
  input[type="email"],
  input[type="password"],
  input[type="number"],
  input[type="date"],
  input[type="time"],
  input[type="datetime-local"],
  input[type="search"],
  input[type="tel"],
  input[type="url"],
  select,
  textarea {
    font-size: 16px !important;
    min-height: 44px !important;
    padding: 0.75rem 1rem !important;
    border-radius: 0.5rem !important;
    -webkit-appearance: none !important;
    appearance: none !important;
  }
  
  /* Textarea specific */
  textarea {
    min-height: 100px !important;
    resize: vertical !important;
  }
  
  /* Select dropdowns */
  select {
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e") !important;
    background-position: right 0.75rem center !important;
    background-repeat: no-repeat !important;
    background-size: 1.5em 1.5em !important;
    padding-right: 2.5rem !important;
  }
  
  /* Form labels */
  label {
    font-size: 0.875rem !important;
    font-weight: 600 !important;
    margin-bottom: 0.5rem !important;
    display: block !important;
  }
  
  /* Form field spacing */
  .space-y-2 > * + * {
    margin-top: 0.75rem !important;
  }
  
  /* =========================================================================
     BUTTONS - Minimum 44x44px touch target
  ========================================================================= */
  
  /* All standard buttons */
  button:not(.icon-only):not([class*="size-"]) {
    min-height: 44px !important;
    padding: 0.75rem 1.25rem !important;
    font-size: 1rem !important;
    font-weight: 600 !important;
    border-radius: 0.5rem !important;
    display: inline-flex !important;
    align-items: center !important;
    justify-content: center !important;
    gap: 0.5rem !important;
    white-space: nowrap !important;
  }
  
  /* Icon-only buttons */
  button.icon-only,
  button[class*="size-"],
  button[class*="w-8"],
  button[class*="h-8"] {
    min-width: 44px !important;
    min-height: 44px !important;
    padding: 0.5rem !important;
  }
  
  /* Button icons */
  button svg {
    width: 1.25rem !important;
    height: 1.25rem !important;
    flex-shrink: 0 !important;
  }
  
  /* Hero/primary button - prominent */
  button[class*="variant-hero"],
  button[class*="bg-primary"] {
    font-weight: 700 !important;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1) !important;
  }
  
  /* Button groups - wrap on mobile */
  .flex.gap-2,
  .flex.gap-3,
  div[class*="flex gap"] {
    flex-wrap: wrap !important;
  }
  
  /* =========================================================================
     CARDS & CONTAINERS
  ========================================================================= */
  
  /* Card padding */
  .card,
  [class*="Card"],
  div[class*="rounded-lg"][class*="border"] {
    padding: 1rem !important;
    border-radius: 0.75rem !important;
  }
  
  /* Card headers */
  .card-header,
  [class*="CardHeader"] {
    padding: 1rem !important;
    border-bottom: 1px solid var(--border);
    margin-bottom: 1rem !important;
  }
  
  /* Card content */
  .card-content,
  [class*="CardContent"] {
    padding: 0 !important;
  }
  
  /* =========================================================================
     DIALOGS & MODALS - Full screen on mobile
  ========================================================================= */
  
  /* Dialog containers */
  [role="dialog"],
  .dialog,
  .modal,
  div[data-radix-dialog-content] {
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    bottom: 0 !important;
    width: 100vw !important;
    height: 100vh !important;
    max-width: 100vw !important;
    max-height: 100vh !important;
    margin: 0 !important;
    border-radius: 0 !important;
    transform: none !important;
  }
  
  /* Dialog headers - compact */
  [role="dialog"] header,
  .dialog-header,
  .modal-header {
    padding: 1rem !important;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    background: var(--background);
    z-index: 10;
  }
  
  /* Dialog content - scrollable */
  [role="dialog"] main,
  [role="dialog"] > div:not(header),
  .dialog-content,
  .modal-content {
    padding: 1rem !important;
    overflow-y: auto !important;
    max-height: calc(100vh - 120px) !important;
    -webkit-overflow-scrolling: touch !important;
  }
  
  /* Dialog footer - sticky */
  [role="dialog"] footer,
  .dialog-footer,
  .modal-footer {
    padding: 1rem !important;
    border-top: 1px solid var(--border);
    position: sticky;
    bottom: 0;
    background: var(--background);
    z-index: 10;
  }
  
  /* Close button */
  [role="dialog"] button[aria-label*="Close"],
  .dialog button[aria-label*="Close"] {
    min-width: 44px !important;
    min-height: 44px !important;
  }
  
  /* =========================================================================
     TABS - Full width, touch-friendly
  ========================================================================= */
  
  [role="tablist"] {
    display: flex !important;
    gap: 0 !important;
    border-bottom: 2px solid var(--border);
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    scrollbar-width: none !important;
  }
  
  [role="tablist"]::-webkit-scrollbar {
    display: none !important;
  }
  
  [role="tab"] {
    min-height: 48px !important;
    padding: 0.75rem 1.25rem !important;
    font-size: 0.9375rem !important;
    font-weight: 600 !important;
    white-space: nowrap !important;
    flex-shrink: 0 !important;
  }
  
  /* =========================================================================
     SEARCH & FILTERS
  ========================================================================= */
  
  /* Search input - prominent */
  input[type="search"],
  input[placeholder*="Search"],
  input[placeholder*="search"] {
    width: 100% !important;
    max-width: 100% !important;
    font-size: 16px !important;
    min-height: 44px !important;
    padding: 0.75rem 1rem !important;
    padding-left: 2.5rem !important;
  }
  
  /* Search icon */
  .search-icon,
  input[type="search"] ~ svg,
  div:has(> input[placeholder*="Search"]) svg {
    position: absolute !important;
    left: 0.875rem !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    width: 1.25rem !important;
    height: 1.25rem !important;
  }
  
  /* Filter buttons */
  button[class*="filter"],
  .filter-button {
    min-height: 44px !important;
    padding: 0.75rem 1rem !important;
  }
  
  /* =========================================================================
     TABLES - Horizontal scroll on mobile
  ========================================================================= */
  
  .table-container,
  div:has(> table) {
    overflow-x: auto !important;
    -webkit-overflow-scrolling: touch !important;
    margin: 0 -1rem !important;
    padding: 0 1rem !important;
  }
  
  table {
    min-width: 100% !important;
    font-size: 0.875rem !important;
  }
  
  table th,
  table td {
    padding: 0.75rem 0.5rem !important;
    white-space: nowrap !important;
  }
  
  table th {
    font-size: 0.8125rem !important;
    font-weight: 700 !important;
    text-transform: uppercase !important;
    letter-spacing: 0.05em !important;
  }
  
  /* =========================================================================
     LISTS - Recent Labels, etc.
  ========================================================================= */
  
  .space-y-3 > * + * {
    margin-top: 0.75rem !important;
  }
  
  /* Recent label cards */
  .recent-label-card,
  div[class*="rounded-lg"][class*="border"][class*="p-4"] {
    padding: 1rem !important;
  }
  
  .recent-label-card h4,
  div[class*="font-medium"] {
    font-size: 1rem !important;
    margin-bottom: 0.5rem !important;
  }
  
  .recent-label-card p,
  div[class*="text-sm"] {
    font-size: 0.8125rem !important;
    line-height: 1.4 !important;
  }
  
  /* =========================================================================
     BADGES & LABELS
  ========================================================================= */
  
  .badge,
  [class*="Badge"] {
    padding: 0.375rem 0.625rem !important;
    font-size: 0.75rem !important;
    font-weight: 600 !important;
    border-radius: 0.375rem !important;
    display: inline-flex !important;
    align-items: center !important;
    gap: 0.25rem !important;
  }
  
  /* =========================================================================
     PRINT QUEUE - Mobile optimized
  ========================================================================= */
  
  /* Print queue badge - floating button */
  .print-queue-badge {
    position: fixed !important;
    bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
    right: 1rem !important;
    width: 56px !important;
    height: 56px !important;
    border-radius: 50% !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    z-index: 40 !important;
  }
  
  .print-queue-badge svg {
    width: 1.5rem !important;
    height: 1.5rem !important;
  }
  
  /* Print queue badge counter */
  .print-queue-badge .badge {
    position: absolute !important;
    top: -4px !important;
    right: -4px !important;
    min-width: 24px !important;
    min-height: 24px !important;
    padding: 0.25rem !important;
    font-size: 0.75rem !important;
    font-weight: 700 !important;
  }
  
  /* Print queue panel */
  .print-queue-panel {
    position: fixed !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    max-height: 70vh !important;
    background: var(--background) !important;
    border-top-left-radius: 1rem !important;
    border-top-right-radius: 1rem !important;
    box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.15) !important;
    z-index: 50 !important;
  }
  
  /* =========================================================================
     SIDEBAR - Hidden on mobile, replaced by menu
  ========================================================================= */
  
  [data-sidebar="sidebar"] {
    transform: translateX(-100%) !important;
    transition: transform 0.3s ease !important;
  }
  
  [data-sidebar="sidebar"][data-state="open"] {
    transform: translateX(0) !important;
    position: fixed !important;
    top: 0 !important;
    left: 0 !important;
    bottom: 0 !important;
    width: 280px !important;
    z-index: 100 !important;
    box-shadow: 2px 0 8px rgba(0, 0, 0, 0.15) !important;
  }
  
  /* Sidebar overlay */
  [data-sidebar-overlay] {
    position: fixed !important;
    inset: 0 !important;
    background: rgba(0, 0, 0, 0.5) !important;
    z-index: 99 !important;
  }
  
  /* =========================================================================
     ACCESSIBILITY - Enhanced for touch
  ========================================================================= */
  
  /* Focus states - highly visible */
  *:focus-visible {
    outline: 3px solid var(--ring) !important;
    outline-offset: 2px !important;
    border-radius: 0.375rem !important;
  }
  
  /* Active/pressed state */
  button:active,
  a:active {
    transform: scale(0.98) !important;
    opacity: 0.8 !important;
  }
  
  /* Smooth scrolling */
  * {
    scroll-behavior: smooth !important;
  }
  
  /* =========================================================================
     SAFE AREA INSETS - iPhone notch, home indicator
  ========================================================================= */
  
  /* Add padding for iPhone notch */
  body {
    padding-top: env(safe-area-inset-top) !important;
    padding-bottom: env(safe-area-inset-bottom) !important;
  }
  
  /* Main content safe area */
  main {
    padding-bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
  }
  
  /* Fixed elements safe area */
  .print-queue-badge,
  [class*="fixed bottom"],
  [class*="sticky bottom"] {
    bottom: calc(1rem + env(safe-area-inset-bottom)) !important;
  }
}

/* ============================================================================
   IPHONE 16 PRO & PRO MAX - Specific optimizations
   Screen sizes: 402x874px (Pro), 440x956px (Pro Max)
============================================================================ */
@media (min-width: 400px) and (max-width: 767px) {
  
  /* Slightly larger cards for Pro models */
  .quick-print-grid button {
    min-height: 8.5rem !important;
    height: 8.5rem !important;
  }
  
  /* Larger emoji on bigger screens */
  .quick-print-grid button div[class*="text-"] {
    font-size: 3rem !important;
  }
  
  /* Stats cards - still 2 columns but more spacious */
  .grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-4,
  div[class*="grid-cols-1"][class*="md:grid-cols-2"][class*="lg:grid-cols-4"] {
    gap: 1rem !important;
  }
  
  /* More padding for main content */
  main {
    padding: 1.25rem !important;
  }
}

/* ============================================================================
   IPHONE SE & MINI - Extra compact (375px and below)
============================================================================ */
@media (max-width: 375px) {
  
  /* Extra compact cards */
  .quick-print-grid button {
    min-height: 7rem !important;
    height: 7rem !important;
    padding: 0.75rem !important;
  }
  
  /* Smaller emoji */
  .quick-print-grid button div[class*="text-"] {
    font-size: 2.25rem !important;
  }
  
  /* Compact product names */
  .quick-print-grid button span {
    font-size: 0.8125rem !important;
  }
  
  /* Reduce main padding */
  main {
    padding: 0.875rem !important;
  }
  
  /* Compact header */
  header {
    padding: 0.625rem 0.875rem !important;
  }
  
  h1 {
    font-size: 1.375rem !important;
  }
}

/* ============================================================================
   LANDSCAPE MODE - iPhone rotated
============================================================================ */
@media (max-width: 767px) and (orientation: landscape) {
  
  /* 2 columns in landscape */
  .quick-print-grid,
  div[class*="grid"] > div[class*="grid"] {
    grid-template-columns: repeat(2, 1fr) !important;
    gap: 0.875rem !important;
  }
  
  /* Compact cards in landscape */
  .quick-print-grid button {
    min-height: 8rem !important;
    height: 8rem !important;
    padding: 0.875rem !important;
  }
  
  /* Smaller emoji */
  .quick-print-grid button div[class*="text-"] {
    font-size: 2.5rem !important;
  }
  
  /* Compact header */
  header {
    padding: 0.5rem 1rem !important;
  }
  
  h1 {
    font-size: 1.25rem !important;
  }
  
  /* Reduce main padding */
  main {
    padding: 0.75rem !important;
  }
  
  /* Stats cards - 4 columns in landscape if space allows */
  .grid.grid-cols-1.md\\:grid-cols-2.lg\\:grid-cols-4 {
    grid-template-columns: repeat(4, 1fr) !important;
  }
}

/* ============================================================================
   UTILITIES FOR IPHONE
============================================================================ */

/* Hide on iPhone only */
.hide-iphone {
  @media (max-width: 767px) {
    display: none !important;
  }
}

/* Show only on iPhone */
.show-iphone {
  display: none !important;
  
  @media (max-width: 767px) {
    display: block !important;
  }
}

/* Full bleed on mobile (edge to edge) */
.mobile-full-bleed {
  @media (max-width: 767px) {
    margin-left: -1rem !important;
    margin-right: -1rem !important;
    border-radius: 0 !important;
  }
}

/* Touch-friendly scrolling */
.mobile-scroll {
  @media (max-width: 767px) {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none;
  }
  
  @media (max-width: 767px) {
    &::-webkit-scrollbar {
      display: none;
    }
  }
}

/* Prevent text selection on buttons (better UX on touch) */
button,
a[role="button"] {
  @media (max-width: 767px) {
    -webkit-user-select: none !important;
    user-select: none !important;
    -webkit-touch-callout: none !important;
  }
}
