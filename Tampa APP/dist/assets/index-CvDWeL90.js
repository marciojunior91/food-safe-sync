function l8(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const a in n)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(n,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>n[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(a){if(a.ep)return;a.ep=!0;const i=r(a);fetch(a.href,i)}})();var wte=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ax(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ik(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var a=!1;try{a=this instanceof n}catch{}return a?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var a=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,a.get?a:{enumerable:!0,get:function(){return e[n]}})}),r}var wy={exports:{}},Fm={},by={exports:{}},Lr={};var Cj;function c8(){if(Cj)return Lr;Cj=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(re){return re===null||typeof re!="object"?null:(re=p&&re[p]||re["@@iterator"],typeof re=="function"?re:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},N=Object.assign,w={};function j(re,L,q){this.props=re,this.context=L,this.refs=w,this.updater=q||m}j.prototype.isReactComponent={},j.prototype.setState=function(re,L){if(typeof re!="object"&&typeof re!="function"&&re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,re,L,"setState")},j.prototype.forceUpdate=function(re){this.updater.enqueueForceUpdate(this,re,"forceUpdate")};function _(){}_.prototype=j.prototype;function C(re,L,q){this.props=re,this.context=L,this.refs=w,this.updater=q||m}var k=C.prototype=new _;k.constructor=C,N(k,j.prototype),k.isPureReactComponent=!0;var E=Array.isArray,I=Object.prototype.hasOwnProperty,D={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function F(re,L,q){var J,ne={},ue=null,ie=null;if(L!=null)for(J in L.ref!==void 0&&(ie=L.ref),L.key!==void 0&&(ue=""+L.key),L)I.call(L,J)&&!O.hasOwnProperty(J)&&(ne[J]=L[J]);var oe=arguments.length-2;if(oe===1)ne.children=q;else if(1<oe){for(var le=Array(oe),ye=0;ye<oe;ye++)le[ye]=arguments[ye+2];ne.children=le}if(re&&re.defaultProps)for(J in oe=re.defaultProps,oe)ne[J]===void 0&&(ne[J]=oe[J]);return{$$typeof:e,type:re,key:ue,ref:ie,props:ne,_owner:D.current}}function T(re,L){return{$$typeof:e,type:re.type,key:L,ref:re.ref,props:re.props,_owner:re._owner}}function z(re){return typeof re=="object"&&re!==null&&re.$$typeof===e}function U(re){var L={"=":"=0",":":"=2"};return"$"+re.replace(/[=:]/g,function(q){return L[q]})}var B=/\/+/g;function K(re,L){return typeof re=="object"&&re!==null&&re.key!=null?U(""+re.key):L.toString(36)}function V(re,L,q,J,ne){var ue=typeof re;(ue==="undefined"||ue==="boolean")&&(re=null);var ie=!1;if(re===null)ie=!0;else switch(ue){case"string":case"number":ie=!0;break;case"object":switch(re.$$typeof){case e:case t:ie=!0}}if(ie)return ie=re,ne=ne(ie),re=J===""?"."+K(ie,0):J,E(ne)?(q="",re!=null&&(q=re.replace(B,"$&/")+"/"),V(ne,L,q,"",function(ye){return ye})):ne!=null&&(z(ne)&&(ne=T(ne,q+(!ne.key||ie&&ie.key===ne.key?"":(""+ne.key).replace(B,"$&/")+"/")+re)),L.push(ne)),1;if(ie=0,J=J===""?".":J+":",E(re))for(var oe=0;oe<re.length;oe++){ue=re[oe];var le=J+K(ue,oe);ie+=V(ue,L,q,le,ne)}else if(le=v(re),typeof le=="function")for(re=le.call(re),oe=0;!(ue=re.next()).done;)ue=ue.value,le=J+K(ue,oe++),ie+=V(ue,L,q,le,ne);else if(ue==="object")throw L=String(re),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(re).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return ie}function de(re,L,q){if(re==null)return re;var J=[],ne=0;return V(re,J,"","",function(ue){return L.call(q,ue,ne++)}),J}function se(re){if(re._status===-1){var L=re._result;L=L(),L.then(function(q){(re._status===0||re._status===-1)&&(re._status=1,re._result=q)},function(q){(re._status===0||re._status===-1)&&(re._status=2,re._result=q)}),re._status===-1&&(re._status=0,re._result=L)}if(re._status===1)return re._result.default;throw re._result}var Y={current:null},W={transition:null},ee={ReactCurrentDispatcher:Y,ReactCurrentBatchConfig:W,ReactCurrentOwner:D};function ge(){throw Error("act(...) is not supported in production builds of React.")}return Lr.Children={map:de,forEach:function(re,L,q){de(re,function(){L.apply(this,arguments)},q)},count:function(re){var L=0;return de(re,function(){L++}),L},toArray:function(re){return de(re,function(L){return L})||[]},only:function(re){if(!z(re))throw Error("React.Children.only expected to receive a single React element child.");return re}},Lr.Component=j,Lr.Fragment=r,Lr.Profiler=a,Lr.PureComponent=C,Lr.StrictMode=n,Lr.Suspense=u,Lr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Lr.act=ge,Lr.cloneElement=function(re,L,q){if(re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+re+".");var J=N({},re.props),ne=re.key,ue=re.ref,ie=re._owner;if(L!=null){if(L.ref!==void 0&&(ue=L.ref,ie=D.current),L.key!==void 0&&(ne=""+L.key),re.type&&re.type.defaultProps)var oe=re.type.defaultProps;for(le in L)I.call(L,le)&&!O.hasOwnProperty(le)&&(J[le]=L[le]===void 0&&oe!==void 0?oe[le]:L[le])}var le=arguments.length-2;if(le===1)J.children=q;else if(1<le){oe=Array(le);for(var ye=0;ye<le;ye++)oe[ye]=arguments[ye+2];J.children=oe}return{$$typeof:e,type:re.type,key:ne,ref:ue,props:J,_owner:ie}},Lr.createContext=function(re){return re={$$typeof:o,_currentValue:re,_currentValue2:re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},re.Provider={$$typeof:i,_context:re},re.Consumer=re},Lr.createElement=F,Lr.createFactory=function(re){var L=F.bind(null,re);return L.type=re,L},Lr.createRef=function(){return{current:null}},Lr.forwardRef=function(re){return{$$typeof:l,render:re}},Lr.isValidElement=z,Lr.lazy=function(re){return{$$typeof:h,_payload:{_status:-1,_result:re},_init:se}},Lr.memo=function(re,L){return{$$typeof:f,type:re,compare:L===void 0?null:L}},Lr.startTransition=function(re){var L=W.transition;W.transition={};try{re()}finally{W.transition=L}},Lr.unstable_act=ge,Lr.useCallback=function(re,L){return Y.current.useCallback(re,L)},Lr.useContext=function(re){return Y.current.useContext(re)},Lr.useDebugValue=function(){},Lr.useDeferredValue=function(re){return Y.current.useDeferredValue(re)},Lr.useEffect=function(re,L){return Y.current.useEffect(re,L)},Lr.useId=function(){return Y.current.useId()},Lr.useImperativeHandle=function(re,L,q){return Y.current.useImperativeHandle(re,L,q)},Lr.useInsertionEffect=function(re,L){return Y.current.useInsertionEffect(re,L)},Lr.useLayoutEffect=function(re,L){return Y.current.useLayoutEffect(re,L)},Lr.useMemo=function(re,L){return Y.current.useMemo(re,L)},Lr.useReducer=function(re,L,q){return Y.current.useReducer(re,L,q)},Lr.useRef=function(re){return Y.current.useRef(re)},Lr.useState=function(re){return Y.current.useState(re)},Lr.useSyncExternalStore=function(re,L,q){return Y.current.useSyncExternalStore(re,L,q)},Lr.useTransition=function(){return Y.current.useTransition()},Lr.version="18.3.1",Lr}var Ej;function Tx(){return Ej||(Ej=1,by.exports=c8()),by.exports}var Pj;function u8(){if(Pj)return Fm;Pj=1;var e=Tx(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,a=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(l,u,f){var h,p={},v=null,m=null;f!==void 0&&(v=""+f),u.key!==void 0&&(v=""+u.key),u.ref!==void 0&&(m=u.ref);for(h in u)n.call(u,h)&&!i.hasOwnProperty(h)&&(p[h]=u[h]);if(l&&l.defaultProps)for(h in u=l.defaultProps,u)p[h]===void 0&&(p[h]=u[h]);return{$$typeof:t,type:l,key:v,ref:m,props:p,_owner:a.current}}return Fm.Fragment=r,Fm.jsx=o,Fm.jsxs=o,Fm}var Aj;function d8(){return Aj||(Aj=1,wy.exports=u8()),wy.exports}var s=d8(),Kg={},jy={exports:{}},li={},_y={exports:{}},Ny={};var Tj;function f8(){return Tj||(Tj=1,(function(e){function t(W,ee){var ge=W.length;W.push(ee);e:for(;0<ge;){var re=ge-1>>>1,L=W[re];if(0<a(L,ee))W[re]=ee,W[ge]=L,ge=re;else break e}}function r(W){return W.length===0?null:W[0]}function n(W){if(W.length===0)return null;var ee=W[0],ge=W.pop();if(ge!==ee){W[0]=ge;e:for(var re=0,L=W.length,q=L>>>1;re<q;){var J=2*(re+1)-1,ne=W[J],ue=J+1,ie=W[ue];if(0>a(ne,ge))ue<L&&0>a(ie,ne)?(W[re]=ie,W[ue]=ge,re=ue):(W[re]=ne,W[J]=ge,re=J);else if(ue<L&&0>a(ie,ge))W[re]=ie,W[ue]=ge,re=ue;else break e}}return ee}function a(W,ee){var ge=W.sortIndex-ee.sortIndex;return ge!==0?ge:W.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],f=[],h=1,p=null,v=3,m=!1,N=!1,w=!1,j=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,C=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(W){for(var ee=r(f);ee!==null;){if(ee.callback===null)n(f);else if(ee.startTime<=W)n(f),ee.sortIndex=ee.expirationTime,t(u,ee);else break;ee=r(f)}}function E(W){if(w=!1,k(W),!N)if(r(u)!==null)N=!0,se(I);else{var ee=r(f);ee!==null&&Y(E,ee.startTime-W)}}function I(W,ee){N=!1,w&&(w=!1,_(F),F=-1),m=!0;var ge=v;try{for(k(ee),p=r(u);p!==null&&(!(p.expirationTime>ee)||W&&!U());){var re=p.callback;if(typeof re=="function"){p.callback=null,v=p.priorityLevel;var L=re(p.expirationTime<=ee);ee=e.unstable_now(),typeof L=="function"?p.callback=L:p===r(u)&&n(u),k(ee)}else n(u);p=r(u)}if(p!==null)var q=!0;else{var J=r(f);J!==null&&Y(E,J.startTime-ee),q=!1}return q}finally{p=null,v=ge,m=!1}}var D=!1,O=null,F=-1,T=5,z=-1;function U(){return!(e.unstable_now()-z<T)}function B(){if(O!==null){var W=e.unstable_now();z=W;var ee=!0;try{ee=O(!0,W)}finally{ee?K():(D=!1,O=null)}}else D=!1}var K;if(typeof C=="function")K=function(){C(B)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,de=V.port2;V.port1.onmessage=B,K=function(){de.postMessage(null)}}else K=function(){j(B,0)};function se(W){O=W,D||(D=!0,K())}function Y(W,ee){F=j(function(){W(e.unstable_now())},ee)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(W){W.callback=null},e.unstable_continueExecution=function(){N||m||(N=!0,se(I))},e.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<W?Math.floor(1e3/W):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(u)},e.unstable_next=function(W){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var ge=v;v=ee;try{return W()}finally{v=ge}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(W,ee){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ge=v;v=W;try{return ee()}finally{v=ge}},e.unstable_scheduleCallback=function(W,ee,ge){var re=e.unstable_now();switch(typeof ge=="object"&&ge!==null?(ge=ge.delay,ge=typeof ge=="number"&&0<ge?re+ge:re):ge=re,W){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=ge+L,W={id:h++,callback:ee,priorityLevel:W,startTime:ge,expirationTime:L,sortIndex:-1},ge>re?(W.sortIndex=ge,t(f,W),r(u)===null&&W===r(f)&&(w?(_(F),F=-1):w=!0,Y(E,ge-re))):(W.sortIndex=L,t(u,W),N||m||(N=!0,se(I))),W},e.unstable_shouldYield=U,e.unstable_wrapCallback=function(W){var ee=v;return function(){var ge=v;v=ee;try{return W.apply(this,arguments)}finally{v=ge}}}})(Ny)),Ny}var Rj;function h8(){return Rj||(Rj=1,_y.exports=f8()),_y.exports}var Lj;function m8(){if(Lj)return li;Lj=1;var e=Tx(),t=h8();function r(c){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)d+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,a={};function i(c,d){o(c,d),o(c+"Capture",d)}function o(c,d){for(a[c]=d,c=0;c<d.length;c++)n.add(d[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),u=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(c){return u.call(p,c)?!0:u.call(h,c)?!1:f.test(c)?p[c]=!0:(h[c]=!0,!1)}function m(c,d,g,b){if(g!==null&&g.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function N(c,d,g,b){if(d===null||typeof d>"u"||m(c,d,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function w(c,d,g,b,A,M,Q){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=b,this.attributeNamespace=A,this.mustUseProperty=g,this.propertyName=c,this.type=d,this.sanitizeURL=M,this.removeEmptyString=Q}var j={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){j[c]=new w(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var d=c[0];j[d]=new w(d,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){j[c]=new w(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){j[c]=new w(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){j[c]=new w(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){j[c]=new w(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){j[c]=new w(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){j[c]=new w(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){j[c]=new w(c,5,!1,c.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function C(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var d=c.replace(_,C);j[d]=new w(d,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var d=c.replace(_,C);j[d]=new w(d,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var d=c.replace(_,C);j[d]=new w(d,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){j[c]=new w(c,1,!1,c.toLowerCase(),null,!1,!1)}),j.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){j[c]=new w(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,d,g,b){var A=j.hasOwnProperty(d)?j[d]:null;(A!==null?A.type!==0:b||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(N(d,g,A,b)&&(g=null),b||A===null?v(d)&&(g===null?c.removeAttribute(d):c.setAttribute(d,""+g)):A.mustUseProperty?c[A.propertyName]=g===null?A.type===3?!1:"":g:(d=A.attributeName,b=A.attributeNamespace,g===null?c.removeAttribute(d):(A=A.type,g=A===3||A===4&&g===!0?"":""+g,b?c.setAttributeNS(b,d,g):c.setAttribute(d,g))))}var E=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),T=Symbol.for("react.profiler"),z=Symbol.for("react.provider"),U=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),se=Symbol.for("react.lazy"),Y=Symbol.for("react.offscreen"),W=Symbol.iterator;function ee(c){return c===null||typeof c!="object"?null:(c=W&&c[W]||c["@@iterator"],typeof c=="function"?c:null)}var ge=Object.assign,re;function L(c){if(re===void 0)try{throw Error()}catch(g){var d=g.stack.trim().match(/\n( *(at )?)/);re=d&&d[1]||""}return`
`+re+c}var q=!1;function J(c,d){if(!c||q)return"";q=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(Be){var b=Be}Reflect.construct(c,[],d)}else{try{d.call()}catch(Be){b=Be}c.call(d.prototype)}else{try{throw Error()}catch(Be){b=Be}c()}}catch(Be){if(Be&&b&&typeof Be.stack=="string"){for(var A=Be.stack.split(`
`),M=b.stack.split(`
`),Q=A.length-1,ve=M.length-1;1<=Q&&0<=ve&&A[Q]!==M[ve];)ve--;for(;1<=Q&&0<=ve;Q--,ve--)if(A[Q]!==M[ve]){if(Q!==1||ve!==1)do if(Q--,ve--,0>ve||A[Q]!==M[ve]){var Ne=`
`+A[Q].replace(" at new "," at ");return c.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",c.displayName)),Ne}while(1<=Q&&0<=ve);break}}}finally{q=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?L(c):""}function ne(c){switch(c.tag){case 5:return L(c.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return c=J(c.type,!1),c;case 11:return c=J(c.type.render,!1),c;case 1:return c=J(c.type,!0),c;default:return""}}function ue(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case O:return"Fragment";case D:return"Portal";case T:return"Profiler";case F:return"StrictMode";case K:return"Suspense";case V:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case U:return(c.displayName||"Context")+".Consumer";case z:return(c._context.displayName||"Context")+".Provider";case B:var d=c.render;return c=c.displayName,c||(c=d.displayName||d.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case de:return d=c.displayName||null,d!==null?d:ue(c.type)||"Memo";case se:d=c._payload,c=c._init;try{return ue(c(d))}catch{}}return null}function ie(c){var d=c.type;switch(c.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=d.render,c=c.displayName||c.name||"",d.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(d);case 8:return d===F?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function oe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function le(c){var d=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function ye(c){var d=le(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,d),b=""+c[d];if(!c.hasOwnProperty(d)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var A=g.get,M=g.set;return Object.defineProperty(c,d,{configurable:!0,get:function(){return A.call(this)},set:function(Q){b=""+Q,M.call(this,Q)}}),Object.defineProperty(c,d,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(Q){b=""+Q},stopTracking:function(){c._valueTracker=null,delete c[d]}}}}function Pe(c){c._valueTracker||(c._valueTracker=ye(c))}function We(c){if(!c)return!1;var d=c._valueTracker;if(!d)return!0;var g=d.getValue(),b="";return c&&(b=le(c)?c.checked?"true":"false":c.value),c=b,c!==g?(d.setValue(c),!0):!1}function Fe(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function je(c,d){var g=d.checked;return ge({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function te(c,d){var g=d.defaultValue==null?"":d.defaultValue,b=d.checked!=null?d.checked:d.defaultChecked;g=oe(d.value!=null?d.value:g),c._wrapperState={initialChecked:b,initialValue:g,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function Ze(c,d){d=d.checked,d!=null&&k(c,"checked",d,!1)}function Nt(c,d){Ze(c,d);var g=oe(d.value),b=d.type;if(g!=null)b==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(b==="submit"||b==="reset"){c.removeAttribute("value");return}d.hasOwnProperty("value")?Qe(c,d.type,g):d.hasOwnProperty("defaultValue")&&Qe(c,d.type,oe(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(c.defaultChecked=!!d.defaultChecked)}function pt(c,d,g){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var b=d.type;if(!(b!=="submit"&&b!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+c._wrapperState.initialValue,g||d===c.value||(c.value=d),c.defaultValue=d}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function Qe(c,d,g){(d!=="number"||Fe(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var me=Array.isArray;function xe(c,d,g,b){if(c=c.options,d){d={};for(var A=0;A<g.length;A++)d["$"+g[A]]=!0;for(g=0;g<c.length;g++)A=d.hasOwnProperty("$"+c[g].value),c[g].selected!==A&&(c[g].selected=A),A&&b&&(c[g].defaultSelected=!0)}else{for(g=""+oe(g),d=null,A=0;A<c.length;A++){if(c[A].value===g){c[A].selected=!0,b&&(c[A].defaultSelected=!0);return}d!==null||c[A].disabled||(d=c[A])}d!==null&&(d.selected=!0)}}function Ce(c,d){if(d.dangerouslySetInnerHTML!=null)throw Error(r(91));return ge({},d,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function $e(c,d){var g=d.value;if(g==null){if(g=d.children,d=d.defaultValue,g!=null){if(d!=null)throw Error(r(92));if(me(g)){if(1<g.length)throw Error(r(93));g=g[0]}d=g}d==null&&(d=""),g=d}c._wrapperState={initialValue:oe(g)}}function et(c,d){var g=oe(d.value),b=oe(d.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),d.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),b!=null&&(c.defaultValue=""+b)}function Ge(c){var d=c.textContent;d===c._wrapperState.initialValue&&d!==""&&d!==null&&(c.value=d)}function tt(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function gt(c,d){return c==null||c==="http://www.w3.org/1999/xhtml"?tt(d):c==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var _t,yt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,g,b,A){MSApp.execUnsafeLocalFunction(function(){return c(d,g,b,A)})}:c})(function(c,d){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=d;else{for(_t=_t||document.createElement("div"),_t.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=_t.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;d.firstChild;)c.appendChild(d.firstChild)}});function zt(c,d){if(d){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=d;return}}c.textContent=d}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jr=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(c){Jr.forEach(function(d){d=d+c.charAt(0).toUpperCase()+c.substring(1),bt[d]=bt[c]})});function dr(c,d,g){return d==null||typeof d=="boolean"||d===""?"":g||typeof d!="number"||d===0||bt.hasOwnProperty(c)&&bt[c]?(""+d).trim():d+"px"}function Yt(c,d){c=c.style;for(var g in d)if(d.hasOwnProperty(g)){var b=g.indexOf("--")===0,A=dr(g,d[g],b);g==="float"&&(g="cssFloat"),b?c.setProperty(g,A):c[g]=A}}var or=ge({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Pr(c,d){if(d){if(or[c]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(r(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(r(61))}if(d.style!=null&&typeof d.style!="object")throw Error(r(62))}}function Ue(c,d){if(c.indexOf("-")===-1)return typeof d.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ar=null;function Ht(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Xt=null,Fr=null,er=null;function Rt(c){if(c=fu(c)){if(typeof Xt!="function")throw Error(r(280));var d=c.stateNode;d&&(d=Cd(d),Xt(c.stateNode,c.type,d))}}function Ir(c){Fr?er?er.push(c):er=[c]:Fr=c}function Kt(){if(Fr){var c=Fr,d=er;if(er=Fr=null,Rt(c),d)for(c=0;c<d.length;c++)Rt(d[c])}}function ir(c,d){return c(d)}function Ar(){}var un=!1;function At(c,d,g){if(un)return c(d,g);un=!0;try{return ir(c,d,g)}finally{un=!1,(Fr!==null||er!==null)&&(Ar(),Kt())}}function Ee(c,d){var g=c.stateNode;if(g===null)return null;var b=Cd(g);if(b===null)return null;g=b[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,d,typeof g));return g}var at=!1;if(l)try{var wt={};Object.defineProperty(wt,"passive",{get:function(){at=!0}}),window.addEventListener("test",wt,wt),window.removeEventListener("test",wt,wt)}catch{at=!1}function Zt(c,d,g,b,A,M,Q,ve,Ne){var Be=Array.prototype.slice.call(arguments,3);try{d.apply(g,Be)}catch(ot){this.onError(ot)}}var jr=!1,tn=null,Nn=!1,Pa=null,tl={onError:function(c){jr=!0,tn=c}};function gi(c,d,g,b,A,M,Q,ve,Ne){jr=!1,tn=null,Zt.apply(tl,arguments)}function zi(c,d,g,b,A,M,Q,ve,Ne){if(gi.apply(this,arguments),jr){if(jr){var Be=tn;jr=!1,tn=null}else throw Error(r(198));Nn||(Nn=!0,Pa=Be)}}function Ts(c){var d=c,g=c;if(c.alternate)for(;d.return;)d=d.return;else{c=d;do d=c,(d.flags&4098)!==0&&(g=d.return),c=d.return;while(c)}return d.tag===3?g:null}function Ka(c){if(c.tag===13){var d=c.memoizedState;if(d===null&&(c=c.alternate,c!==null&&(d=c.memoizedState)),d!==null)return d.dehydrated}return null}function Aa(c){if(Ts(c)!==c)throw Error(r(188))}function zl(c){var d=c.alternate;if(!d){if(d=Ts(c),d===null)throw Error(r(188));return d!==c?null:c}for(var g=c,b=d;;){var A=g.return;if(A===null)break;var M=A.alternate;if(M===null){if(b=A.return,b!==null){g=b;continue}break}if(A.child===M.child){for(M=A.child;M;){if(M===g)return Aa(A),c;if(M===b)return Aa(A),d;M=M.sibling}throw Error(r(188))}if(g.return!==b.return)g=A,b=M;else{for(var Q=!1,ve=A.child;ve;){if(ve===g){Q=!0,g=A,b=M;break}if(ve===b){Q=!0,b=A,g=M;break}ve=ve.sibling}if(!Q){for(ve=M.child;ve;){if(ve===g){Q=!0,g=M,b=A;break}if(ve===b){Q=!0,b=M,g=A;break}ve=ve.sibling}if(!Q)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:d}function vi(c){return c=zl(c),c!==null?rl(c):null}function rl(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var d=rl(c);if(d!==null)return d;c=c.sibling}return null}var ql=t.unstable_scheduleCallback,Vl=t.unstable_cancelCallback,Vc=t.unstable_shouldYield,dm=t.unstable_requestPaint,mn=t.unstable_now,_f=t.unstable_getCurrentPriorityLevel,Wc=t.unstable_ImmediatePriority,Ta=t.unstable_UserBlockingPriority,nl=t.unstable_NormalPriority,Nf=t.unstable_LowPriority,Hc=t.unstable_IdlePriority,Wl=null,Ra=null;function Sf(c){if(Ra&&typeof Ra.onCommitFiberRoot=="function")try{Ra.onCommitFiberRoot(Wl,c,void 0,(c.current.flags&128)===128)}catch{}}var Hn=Math.clz32?Math.clz32:Gn,Gc=Math.log,fm=Math.LN2;function Gn(c){return c>>>=0,c===0?32:31-(Gc(c)/fm|0)|0}var Hl=64,La=4194304;function qi(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Gl(c,d){var g=c.pendingLanes;if(g===0)return 0;var b=0,A=c.suspendedLanes,M=c.pingedLanes,Q=g&268435455;if(Q!==0){var ve=Q&~A;ve!==0?b=qi(ve):(M&=Q,M!==0&&(b=qi(M)))}else Q=g&~A,Q!==0?b=qi(Q):M!==0&&(b=qi(M));if(b===0)return 0;if(d!==0&&d!==b&&(d&A)===0&&(A=b&-b,M=d&-d,A>=M||A===16&&(M&4194240)!==0))return d;if((b&4)!==0&&(b|=g&16),d=c.entangledLanes,d!==0)for(c=c.entanglements,d&=b;0<d;)g=31-Hn(d),A=1<<g,b|=c[g],d&=~A;return b}function Ya(c,d){switch(c){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function os(c,d){for(var g=c.suspendedLanes,b=c.pingedLanes,A=c.expirationTimes,M=c.pendingLanes;0<M;){var Q=31-Hn(M),ve=1<<Q,Ne=A[Q];Ne===-1?((ve&g)===0||(ve&b)!==0)&&(A[Q]=Ya(ve,d)):Ne<=d&&(c.expiredLanes|=ve),M&=~ve}}function xi(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function cd(){var c=Hl;return Hl<<=1,(Hl&4194240)===0&&(Hl=64),c}function ud(c){for(var d=[],g=0;31>g;g++)d.push(c);return d}function Kl(c,d,g){c.pendingLanes|=d,d!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,d=31-Hn(d),c[d]=g}function Vi(c,d){var g=c.pendingLanes&~d;c.pendingLanes=d,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=d,c.mutableReadLanes&=d,c.entangledLanes&=d,d=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<g;){var A=31-Hn(g),M=1<<A;d[A]=0,b[A]=-1,c[A]=-1,g&=~M}}function Kc(c,d){var g=c.entangledLanes|=d;for(c=c.entanglements;g;){var b=31-Hn(g),A=1<<b;A&d|c[b]&d&&(c[b]|=d),g&=~A}}var $r=0;function Yl(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var sl,dd,kf,Cf,Yc,Qc=!1,la=[],Wi=null,ca=null,Qa=null,Ql=new Map,sr=new Map,Hi=[],hm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Ef(c,d){switch(c){case"focusin":case"focusout":Wi=null;break;case"dragenter":case"dragleave":ca=null;break;case"mouseover":case"mouseout":Qa=null;break;case"pointerover":case"pointerout":Ql.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":sr.delete(d.pointerId)}}function Da(c,d,g,b,A,M){return c===null||c.nativeEvent!==M?(c={blockedOn:d,domEventName:g,eventSystemFlags:b,nativeEvent:M,targetContainers:[A]},d!==null&&(d=fu(d),d!==null&&dd(d)),c):(c.eventSystemFlags|=b,d=c.targetContainers,A!==null&&d.indexOf(A)===-1&&d.push(A),c)}function uo(c,d,g,b,A){switch(d){case"focusin":return Wi=Da(Wi,c,d,g,b,A),!0;case"dragenter":return ca=Da(ca,c,d,g,b,A),!0;case"mouseover":return Qa=Da(Qa,c,d,g,b,A),!0;case"pointerover":var M=A.pointerId;return Ql.set(M,Da(Ql.get(M)||null,c,d,g,b,A)),!0;case"gotpointercapture":return M=A.pointerId,sr.set(M,Da(sr.get(M)||null,c,d,g,b,A)),!0}return!1}function Pf(c){var d=pl(c.target);if(d!==null){var g=Ts(d);if(g!==null){if(d=g.tag,d===13){if(d=Ka(g),d!==null){c.blockedOn=d,Yc(c.priority,function(){kf(g)});return}}else if(d===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Jc(c){if(c.blockedOn!==null)return!1;for(var d=c.targetContainers;0<d.length;){var g=Xl(c.domEventName,c.eventSystemFlags,d[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var b=new g.constructor(g.type,g);ar=b,g.target.dispatchEvent(b),ar=null}else return d=fu(g),d!==null&&dd(d),c.blockedOn=g,!1;d.shift()}return!0}function Jl(c,d,g){Jc(c)&&g.delete(d)}function fd(){Qc=!1,Wi!==null&&Jc(Wi)&&(Wi=null),ca!==null&&Jc(ca)&&(ca=null),Qa!==null&&Jc(Qa)&&(Qa=null),Ql.forEach(Jl),sr.forEach(Jl)}function yi(c,d){c.blockedOn===d&&(c.blockedOn=null,Qc||(Qc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,fd)))}function Zl(c){function d(A){return yi(A,c)}if(0<la.length){yi(la[0],c);for(var g=1;g<la.length;g++){var b=la[g];b.blockedOn===c&&(b.blockedOn=null)}}for(Wi!==null&&yi(Wi,c),ca!==null&&yi(ca,c),Qa!==null&&yi(Qa,c),Ql.forEach(d),sr.forEach(d),g=0;g<Hi.length;g++)b=Hi[g],b.blockedOn===c&&(b.blockedOn=null);for(;0<Hi.length&&(g=Hi[0],g.blockedOn===null);)Pf(g),g.blockedOn===null&&Hi.shift()}var ua=E.ReactCurrentBatchConfig,Zc=!0;function hd(c,d,g,b){var A=$r,M=ua.transition;ua.transition=null;try{$r=1,Xc(c,d,g,b)}finally{$r=A,ua.transition=M}}function md(c,d,g,b){var A=$r,M=ua.transition;ua.transition=null;try{$r=4,Xc(c,d,g,b)}finally{$r=A,ua.transition=M}}function Xc(c,d,g,b){if(Zc){var A=Xl(c,d,g,b);if(A===null)Nd(c,d,b,Ja,g),Ef(c,b);else if(uo(A,c,d,g,b))b.stopPropagation();else if(Ef(c,b),d&4&&-1<hm.indexOf(c)){for(;A!==null;){var M=fu(A);if(M!==null&&sl(M),M=Xl(c,d,g,b),M===null&&Nd(c,d,b,Ja,g),M===A)break;A=M}A!==null&&b.stopPropagation()}else Nd(c,d,b,null,g)}}var Ja=null;function Xl(c,d,g,b){if(Ja=null,c=Ht(b),c=pl(c),c!==null)if(d=Ts(c),d===null)c=null;else if(g=d.tag,g===13){if(c=Ka(d),c!==null)return c;c=null}else if(g===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;c=null}else d!==c&&(c=null);return Ja=c,null}function ec(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(_f()){case Wc:return 1;case Ta:return 4;case nl:case Nf:return 16;case Hc:return 536870912;default:return 16}default:return 16}}var Za=null,fo=null,al=null;function pd(){if(al)return al;var c,d=fo,g=d.length,b,A="value"in Za?Za.value:Za.textContent,M=A.length;for(c=0;c<g&&d[c]===A[c];c++);var Q=g-c;for(b=1;b<=Q&&d[g-b]===A[M-b];b++);return al=A.slice(c,1<b?1-b:void 0)}function tc(c){var d=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&d===13&&(c=13)):c=d,c===10&&(c=13),32<=c||c===13?c:0}function Xa(){return!0}function Gi(){return!1}function Vs(c){function d(g,b,A,M,Q){this._reactName=g,this._targetInst=A,this.type=b,this.nativeEvent=M,this.target=Q,this.currentTarget=null;for(var ve in c)c.hasOwnProperty(ve)&&(g=c[ve],this[ve]=g?g(M):M[ve]);return this.isDefaultPrevented=(M.defaultPrevented!=null?M.defaultPrevented:M.returnValue===!1)?Xa:Gi,this.isPropagationStopped=Gi,this}return ge(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Xa)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Xa)},persist:function(){},isPersistent:Xa}),d}var ei={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},eu=Vs(ei),P=ge({},ei,{view:0,detail:0}),G=Vs(P),pe,be,Te,Ye=ge({},P,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rc,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Te&&(Te&&c.type==="mousemove"?(pe=c.screenX-Te.screenX,be=c.screenY-Te.screenY):be=pe=0,Te=c),pe)},movementY:function(c){return"movementY"in c?c.movementY:be}}),nt=Vs(Ye),Lt=ge({},Ye,{dataTransfer:0}),Bt=Vs(Lt),cr=ge({},P,{relatedTarget:0}),mr=Vs(cr),Br=ge({},ei,{animationName:0,elapsedTime:0,pseudoElement:0}),Sn=Vs(Br),Kn=ge({},ei,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),dn=Vs(Kn),ls=ge({},ei,{data:0}),In=Vs(ls),Rs={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ho={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},wi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function mo(c){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(c):(c=wi[c])?!!d[c]:!1}function rc(){return mo}var tu=ge({},P,{key:function(c){if(c.key){var d=Rs[c.key]||c.key;if(d!=="Unidentified")return d}return c.type==="keypress"?(c=tc(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ho[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rc,charCode:function(c){return c.type==="keypress"?tc(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?tc(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),il=Vs(tu),nc=ge({},Ye,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ol=Vs(nc),ll=ge({},P,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rc}),Ls=Vs(ll),sc=ge({},ei,{propertyName:0,elapsedTime:0,pseudoElement:0}),ac=Vs(sc),gd=ge({},Ye,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),vd=Vs(gd),ta=[9,13,27,32],bi=l&&"CompositionEvent"in window,Ki=null;l&&"documentMode"in document&&(Ki=document.documentMode);var Af=l&&"TextEvent"in window&&!Ki,Ia=l&&(!bi||Ki&&8<Ki&&11>=Ki),cl=" ",ru=!1;function nu(c,d){switch(c){case"keyup":return ta.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function po(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var ti=!1;function Oa(c,d){switch(c){case"compositionend":return po(d);case"keypress":return d.which!==32?null:(ru=!0,cl);case"textInput":return c=d.data,c===cl&&ru?null:c;default:return null}}function Ma(c,d){if(ti)return c==="compositionend"||!bi&&nu(c,d)?(c=pd(),al=fo=Za=null,ti=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return Ia&&d.locale!=="ko"?null:d.data;default:return null}}var ul={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yi(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d==="input"?!!ul[c.type]:d==="textarea"}function go(c,d,g,b){Ir(b),d=If(d,"onChange"),0<d.length&&(g=new eu("onChange","change",null,g,b),c.push({event:g,listeners:d}))}var vo=null,Qi=null;function On(c){jd(c,0)}function ic(c){var d=gc(c);if(We(d))return c}function Ji(c,d){if(c==="change")return d}var ji=!1;if(l){var oc;if(l){var lc="oninput"in document;if(!lc){var su=document.createElement("div");su.setAttribute("oninput","return;"),lc=typeof su.oninput=="function"}oc=lc}else oc=!1;ji=oc&&(!document.documentMode||9<document.documentMode)}function au(){vo&&(vo.detachEvent("onpropertychange",xo),Qi=vo=null)}function xo(c){if(c.propertyName==="value"&&ic(Qi)){var d=[];go(d,Qi,c,Ht(c)),At(On,d)}}function dl(c,d,g){c==="focusin"?(au(),vo=d,Qi=g,vo.attachEvent("onpropertychange",xo)):c==="focusout"&&au()}function fl(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return ic(Qi)}function cc(c,d){if(c==="click")return ic(d)}function hl(c,d){if(c==="input"||c==="change")return ic(d)}function uc(c,d){return c===d&&(c!==0||1/c===1/d)||c!==c&&d!==d}var Pn=typeof Object.is=="function"?Object.is:uc;function da(c,d){if(Pn(c,d))return!0;if(typeof c!="object"||c===null||typeof d!="object"||d===null)return!1;var g=Object.keys(c),b=Object.keys(d);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var A=g[b];if(!u.call(d,A)||!Pn(c[A],d[A]))return!1}return!0}function zr(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Zr(c,d){var g=zr(c);c=0;for(var b;g;){if(g.nodeType===3){if(b=c+g.textContent.length,c<=d&&b>=d)return{node:g,offset:d-c};c=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=zr(g)}}function An(c,d){return c&&d?c===d?!0:c&&c.nodeType===3?!1:d&&d.nodeType===3?An(c,d.parentNode):"contains"in c?c.contains(d):c.compareDocumentPosition?!!(c.compareDocumentPosition(d)&16):!1:!1}function Yn(){for(var c=window,d=Fe();d instanceof c.HTMLIFrameElement;){try{var g=typeof d.contentWindow.location.href=="string"}catch{g=!1}if(g)c=d.contentWindow;else break;d=Fe(c.document)}return d}function _i(c){var d=c&&c.nodeName&&c.nodeName.toLowerCase();return d&&(d==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||d==="textarea"||c.contentEditable==="true")}function xd(c){var d=Yn(),g=c.focusedElem,b=c.selectionRange;if(d!==g&&g&&g.ownerDocument&&An(g.ownerDocument.documentElement,g)){if(b!==null&&_i(g)){if(d=b.start,c=b.end,c===void 0&&(c=d),"selectionStart"in g)g.selectionStart=d,g.selectionEnd=Math.min(c,g.value.length);else if(c=(d=g.ownerDocument||document)&&d.defaultView||window,c.getSelection){c=c.getSelection();var A=g.textContent.length,M=Math.min(b.start,A);b=b.end===void 0?M:Math.min(b.end,A),!c.extend&&M>b&&(A=b,b=M,M=A),A=Zr(g,M);var Q=Zr(g,b);A&&Q&&(c.rangeCount!==1||c.anchorNode!==A.node||c.anchorOffset!==A.offset||c.focusNode!==Q.node||c.focusOffset!==Q.offset)&&(d=d.createRange(),d.setStart(A.node,A.offset),c.removeAllRanges(),M>b?(c.addRange(d),c.extend(Q.node,Q.offset)):(d.setEnd(Q.node,Q.offset),c.addRange(d)))}}for(d=[],c=g;c=c.parentNode;)c.nodeType===1&&d.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<d.length;g++)c=d[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var iu=l&&"documentMode"in document&&11>=document.documentMode,yo=null,Tf=null,ou=null,Rf=!1;function mm(c,d,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;Rf||yo==null||yo!==Fe(b)||(b=yo,"selectionStart"in b&&_i(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),ou&&da(ou,b)||(ou=b,b=If(Tf,"onSelect"),0<b.length&&(d=new eu("onSelect","select",null,d,g),c.push({event:d,listeners:b}),d.target=yo)))}function yd(c,d){var g={};return g[c.toLowerCase()]=d.toLowerCase(),g["Webkit"+c]="webkit"+d,g["Moz"+c]="moz"+d,g}var dc={animationend:yd("Animation","AnimationEnd"),animationiteration:yd("Animation","AnimationIteration"),animationstart:yd("Animation","AnimationStart"),transitionend:yd("Transition","TransitionEnd")},fc={},pm={};l&&(pm=document.createElement("div").style,"AnimationEvent"in window||(delete dc.animationend.animation,delete dc.animationiteration.animation,delete dc.animationstart.animation),"TransitionEvent"in window||delete dc.transitionend.transition);function wd(c){if(fc[c])return fc[c];if(!dc[c])return c;var d=dc[c],g;for(g in d)if(d.hasOwnProperty(g)&&g in pm)return fc[c]=d[g];return c}var gm=wd("animationend"),vm=wd("animationiteration"),xm=wd("animationstart"),ym=wd("transitionend"),wm=new Map,bm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zi(c,d){wm.set(c,d),i(d,[c])}for(var lu=0;lu<bm.length;lu++){var ra=bm[lu],ri=ra.toLowerCase(),Lf=ra[0].toUpperCase()+ra.slice(1);Zi(ri,"on"+Lf)}Zi(gm,"onAnimationEnd"),Zi(vm,"onAnimationIteration"),Zi(xm,"onAnimationStart"),Zi("dblclick","onDoubleClick"),Zi("focusin","onFocus"),Zi("focusout","onBlur"),Zi(ym,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ml="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mg=new Set("cancel close invalid load scroll toggle".split(" ").concat(ml));function bd(c,d,g){var b=c.type||"unknown-event";c.currentTarget=g,zi(b,d,void 0,c),c.currentTarget=null}function jd(c,d){d=(d&4)!==0;for(var g=0;g<c.length;g++){var b=c[g],A=b.event;b=b.listeners;e:{var M=void 0;if(d)for(var Q=b.length-1;0<=Q;Q--){var ve=b[Q],Ne=ve.instance,Be=ve.currentTarget;if(ve=ve.listener,Ne!==M&&A.isPropagationStopped())break e;bd(A,ve,Be),M=Ne}else for(Q=0;Q<b.length;Q++){if(ve=b[Q],Ne=ve.instance,Be=ve.currentTarget,ve=ve.listener,Ne!==M&&A.isPropagationStopped())break e;bd(A,ve,Be),M=Ne}}}if(Nn)throw c=Pa,Nn=!1,Pa=null,c}function rn(c,d){var g=d[ha];g===void 0&&(g=d[ha]=new Set);var b=c+"__bubble";g.has(b)||(_d(d,c,2,!1),g.add(b))}function Df(c,d,g){var b=0;d&&(b|=4),_d(g,c,b,d)}var cu="_reactListening"+Math.random().toString(36).slice(2);function hc(c){if(!c[cu]){c[cu]=!0,n.forEach(function(g){g!=="selectionchange"&&(mg.has(g)||Df(g,!1,c),Df(g,!0,c))});var d=c.nodeType===9?c:c.ownerDocument;d===null||d[cu]||(d[cu]=!0,Df("selectionchange",!1,d))}}function _d(c,d,g,b){switch(ec(d)){case 1:var A=hd;break;case 4:A=md;break;default:A=Xc}g=A.bind(null,d,g,c),A=void 0,!at||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(A=!0),b?A!==void 0?c.addEventListener(d,g,{capture:!0,passive:A}):c.addEventListener(d,g,!0):A!==void 0?c.addEventListener(d,g,{passive:A}):c.addEventListener(d,g,!1)}function Nd(c,d,g,b,A){var M=b;if((d&1)===0&&(d&2)===0&&b!==null)e:for(;;){if(b===null)return;var Q=b.tag;if(Q===3||Q===4){var ve=b.stateNode.containerInfo;if(ve===A||ve.nodeType===8&&ve.parentNode===A)break;if(Q===4)for(Q=b.return;Q!==null;){var Ne=Q.tag;if((Ne===3||Ne===4)&&(Ne=Q.stateNode.containerInfo,Ne===A||Ne.nodeType===8&&Ne.parentNode===A))return;Q=Q.return}for(;ve!==null;){if(Q=pl(ve),Q===null)return;if(Ne=Q.tag,Ne===5||Ne===6){b=M=Q;continue e}ve=ve.parentNode}}b=b.return}At(function(){var Be=M,ot=Ht(g),ct=[];e:{var it=wm.get(c);if(it!==void 0){var kt=eu,It=c;switch(c){case"keypress":if(tc(g)===0)break e;case"keydown":case"keyup":kt=il;break;case"focusin":It="focus",kt=mr;break;case"focusout":It="blur",kt=mr;break;case"beforeblur":case"afterblur":kt=mr;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":kt=nt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":kt=Bt;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":kt=Ls;break;case gm:case vm:case xm:kt=Sn;break;case ym:kt=ac;break;case"scroll":kt=G;break;case"wheel":kt=vd;break;case"copy":case"cut":case"paste":kt=dn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":kt=ol}var Mt=(d&4)!==0,ds=!Mt&&c==="scroll",De=Mt?it!==null?it+"Capture":null:it;Mt=[];for(var ke=Be,Me;ke!==null;){Me=ke;var ht=Me.stateNode;if(Me.tag===5&&ht!==null&&(Me=ht,De!==null&&(ht=Ee(ke,De),ht!=null&&Mt.push(Sd(ke,ht,Me)))),ds)break;ke=ke.return}0<Mt.length&&(it=new kt(it,It,null,g,ot),ct.push({event:it,listeners:Mt}))}}if((d&7)===0){e:{if(it=c==="mouseover"||c==="pointerover",kt=c==="mouseout"||c==="pointerout",it&&g!==ar&&(It=g.relatedTarget||g.fromElement)&&(pl(It)||It[Ws]))break e;if((kt||it)&&(it=ot.window===ot?ot:(it=ot.ownerDocument)?it.defaultView||it.parentWindow:window,kt?(It=g.relatedTarget||g.toElement,kt=Be,It=It?pl(It):null,It!==null&&(ds=Ts(It),It!==ds||It.tag!==5&&It.tag!==6)&&(It=null)):(kt=null,It=Be),kt!==It)){if(Mt=nt,ht="onMouseLeave",De="onMouseEnter",ke="mouse",(c==="pointerout"||c==="pointerover")&&(Mt=ol,ht="onPointerLeave",De="onPointerEnter",ke="pointer"),ds=kt==null?it:gc(kt),Me=It==null?it:gc(It),it=new Mt(ht,ke+"leave",kt,g,ot),it.target=ds,it.relatedTarget=Me,ht=null,pl(ot)===Be&&(Mt=new Mt(De,ke+"enter",It,g,ot),Mt.target=Me,Mt.relatedTarget=ds,ht=Mt),ds=ht,kt&&It)t:{for(Mt=kt,De=It,ke=0,Me=Mt;Me;Me=mc(Me))ke++;for(Me=0,ht=De;ht;ht=mc(ht))Me++;for(;0<ke-Me;)Mt=mc(Mt),ke--;for(;0<Me-ke;)De=mc(De),Me--;for(;ke--;){if(Mt===De||De!==null&&Mt===De.alternate)break t;Mt=mc(Mt),De=mc(De)}Mt=null}else Mt=null;kt!==null&&pg(ct,it,kt,Mt,!1),It!==null&&ds!==null&&pg(ct,ds,It,Mt,!0)}}e:{if(it=Be?gc(Be):window,kt=it.nodeName&&it.nodeName.toLowerCase(),kt==="select"||kt==="input"&&it.type==="file")var qt=Ji;else if(Yi(it))if(ji)qt=hl;else{qt=fl;var tr=dl}else(kt=it.nodeName)&&kt.toLowerCase()==="input"&&(it.type==="checkbox"||it.type==="radio")&&(qt=cc);if(qt&&(qt=qt(c,Be))){go(ct,qt,g,ot);break e}tr&&tr(c,it,Be),c==="focusout"&&(tr=it._wrapperState)&&tr.controlled&&it.type==="number"&&Qe(it,"number",it.value)}switch(tr=Be?gc(Be):window,c){case"focusin":(Yi(tr)||tr.contentEditable==="true")&&(yo=tr,Tf=Be,ou=null);break;case"focusout":ou=Tf=yo=null;break;case"mousedown":Rf=!0;break;case"contextmenu":case"mouseup":case"dragend":Rf=!1,mm(ct,g,ot);break;case"selectionchange":if(iu)break;case"keydown":case"keyup":mm(ct,g,ot)}var rr;if(bi)e:{switch(c){case"compositionstart":var fr="onCompositionStart";break e;case"compositionend":fr="onCompositionEnd";break e;case"compositionupdate":fr="onCompositionUpdate";break e}fr=void 0}else ti?nu(c,g)&&(fr="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(fr="onCompositionStart");fr&&(Ia&&g.locale!=="ko"&&(ti||fr!=="onCompositionStart"?fr==="onCompositionEnd"&&ti&&(rr=pd()):(Za=ot,fo="value"in Za?Za.value:Za.textContent,ti=!0)),tr=If(Be,fr),0<tr.length&&(fr=new In(fr,c,null,g,ot),ct.push({event:fr,listeners:tr}),rr?fr.data=rr:(rr=po(g),rr!==null&&(fr.data=rr)))),(rr=Af?Oa(c,g):Ma(c,g))&&(Be=If(Be,"onBeforeInput"),0<Be.length&&(ot=new In("onBeforeInput","beforeinput",null,g,ot),ct.push({event:ot,listeners:Be}),ot.data=rr))}jd(ct,d)})}function Sd(c,d,g){return{instance:c,listener:d,currentTarget:g}}function If(c,d){for(var g=d+"Capture",b=[];c!==null;){var A=c,M=A.stateNode;A.tag===5&&M!==null&&(A=M,M=Ee(c,g),M!=null&&b.unshift(Sd(c,M,A)),M=Ee(c,d),M!=null&&b.push(Sd(c,M,A))),c=c.return}return b}function mc(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function pg(c,d,g,b,A){for(var M=d._reactName,Q=[];g!==null&&g!==b;){var ve=g,Ne=ve.alternate,Be=ve.stateNode;if(Ne!==null&&Ne===b)break;ve.tag===5&&Be!==null&&(ve=Be,A?(Ne=Ee(g,M),Ne!=null&&Q.unshift(Sd(g,Ne,ve))):A||(Ne=Ee(g,M),Ne!=null&&Q.push(Sd(g,Ne,ve)))),g=g.return}Q.length!==0&&c.push({event:d,listeners:Q})}var D0=/\r\n?/g,I0=/\u0000|\uFFFD/g;function gg(c){return(typeof c=="string"?c:""+c).replace(D0,`
`).replace(I0,"")}function Of(c,d,g){if(d=gg(d),gg(c)!==d&&g)throw Error(r(425))}function uu(){}var kd=null,pc=null;function jm(c,d){return c==="textarea"||c==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var _m=typeof setTimeout=="function"?setTimeout:void 0,vg=typeof clearTimeout=="function"?clearTimeout:void 0,xg=typeof Promise=="function"?Promise:void 0,O0=typeof queueMicrotask=="function"?queueMicrotask:typeof xg<"u"?function(c){return xg.resolve(null).then(c).catch(M0)}:_m;function M0(c){setTimeout(function(){throw c})}function Nm(c,d){var g=d,b=0;do{var A=g.nextSibling;if(c.removeChild(g),A&&A.nodeType===8)if(g=A.data,g==="/$"){if(b===0){c.removeChild(A),Zl(d);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=A}while(g);Zl(d)}function na(c){for(;c!=null;c=c.nextSibling){var d=c.nodeType;if(d===1||d===3)break;if(d===8){if(d=c.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return c}function ni(c){c=c.previousSibling;for(var d=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(d===0)return c;d--}else g==="/$"&&d++}c=c.previousSibling}return null}var fa=Math.random().toString(36).slice(2),Xi="__reactFiber$"+fa,du="__reactProps$"+fa,Ws="__reactContainer$"+fa,ha="__reactEvents$"+fa,F0="__reactListeners$"+fa,B0="__reactHandles$"+fa;function pl(c){var d=c[Xi];if(d)return d;for(var g=c.parentNode;g;){if(d=g[Ws]||g[Xi]){if(g=d.alternate,d.child!==null||g!==null&&g.child!==null)for(c=ni(c);c!==null;){if(g=c[Xi])return g;c=ni(c)}return d}c=g,g=c.parentNode}return null}function fu(c){return c=c[Xi]||c[Ws],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function gc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function Cd(c){return c[du]||null}var Sm=[],wo=-1;function Ni(c){return{current:c}}function Qr(c){0>wo||(c.current=Sm[wo],Sm[wo]=null,wo--)}function Xr(c,d){wo++,Sm[wo]=c.current,c.current=d}var gl={},Ds=Ni(gl),ma=Ni(!1),vc=gl;function hu(c,d){var g=c.type.contextTypes;if(!g)return gl;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===d)return b.__reactInternalMemoizedMaskedChildContext;var A={},M;for(M in g)A[M]=d[M];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=d,c.__reactInternalMemoizedMaskedChildContext=A),A}function pa(c){return c=c.childContextTypes,c!=null}function Mf(){Qr(ma),Qr(Ds)}function yg(c,d,g){if(Ds.current!==gl)throw Error(r(168));Xr(Ds,d),Xr(ma,g)}function km(c,d,g){var b=c.stateNode;if(d=d.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var A in b)if(!(A in d))throw Error(r(108,ie(c)||"Unknown",A));return ge({},g,b)}function xc(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||gl,vc=Ds.current,Xr(Ds,c),Xr(ma,ma.current),!0}function wg(c,d,g){var b=c.stateNode;if(!b)throw Error(r(169));g?(c=km(c,d,vc),b.__reactInternalMemoizedMergedChildContext=c,Qr(ma),Qr(Ds),Xr(Ds,c)):Qr(ma),Xr(ma,g)}var bo=null,Ed=!1,y=!1;function S(c){bo===null?bo=[c]:bo.push(c)}function R(c){Ed=!0,S(c)}function $(){if(!y&&bo!==null){y=!0;var c=0,d=$r;try{var g=bo;for($r=1;c<g.length;c++){var b=g[c];do b=b(!0);while(b!==null)}bo=null,Ed=!1}catch(A){throw bo!==null&&(bo=bo.slice(c+1)),ql(Wc,$),A}finally{$r=d,y=!1}}return null}var H=[],Z=0,X=null,ae=0,ce=[],fe=0,_e=null,Le=1,he="";function Se(c,d){H[Z++]=ae,H[Z++]=X,X=c,ae=d}function Re(c,d,g){ce[fe++]=Le,ce[fe++]=he,ce[fe++]=_e,_e=c;var b=Le;c=he;var A=32-Hn(b)-1;b&=~(1<<A),g+=1;var M=32-Hn(d)+A;if(30<M){var Q=A-A%5;M=(b&(1<<Q)-1).toString(32),b>>=Q,A-=Q,Le=1<<32-Hn(d)+A|g<<A|b,he=M+c}else Le=1<<M|g<<A|b,he=c}function Ke(c){c.return!==null&&(Se(c,1),Re(c,1,0))}function Ie(c){for(;c===X;)X=H[--Z],H[Z]=null,ae=H[--Z],H[Z]=null;for(;c===_e;)_e=ce[--fe],ce[fe]=null,he=ce[--fe],ce[fe]=null,Le=ce[--fe],ce[fe]=null}var ze=null,He=null,Je=!1,Xe=null;function Ut(c,d){var g=so(5,null,null,0);g.elementType="DELETED",g.stateNode=d,g.return=c,d=c.deletions,d===null?(c.deletions=[g],c.flags|=16):d.push(g)}function Et(c,d){switch(c.tag){case 5:var g=c.type;return d=d.nodeType!==1||g.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(c.stateNode=d,ze=c,He=na(d.firstChild),!0):!1;case 6:return d=c.pendingProps===""||d.nodeType!==3?null:d,d!==null?(c.stateNode=d,ze=c,He=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(g=_e!==null?{id:Le,overflow:he}:null,c.memoizedState={dehydrated:d,treeContext:g,retryLane:1073741824},g=so(18,null,null,0),g.stateNode=d,g.return=c,c.child=g,ze=c,He=null,!0):!1;default:return!1}}function pr(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Dt(c){if(Je){var d=He;if(d){var g=d;if(!Et(c,d)){if(pr(c))throw Error(r(418));d=na(g.nextSibling);var b=ze;d&&Et(c,d)?Ut(b,g):(c.flags=c.flags&-4097|2,Je=!1,ze=c)}}else{if(pr(c))throw Error(r(418));c.flags=c.flags&-4097|2,Je=!1,ze=c}}}function Rr(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;ze=c}function Tn(c){if(c!==ze)return!1;if(!Je)return Rr(c),Je=!0,!1;var d;if((d=c.tag!==3)&&!(d=c.tag!==5)&&(d=c.type,d=d!=="head"&&d!=="body"&&!jm(c.type,c.memoizedProps)),d&&(d=He)){if(pr(c))throw gr(),Error(r(418));for(;d;)Ut(c,d),d=na(d.nextSibling)}if(Rr(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,d=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(d===0){He=na(c.nextSibling);break e}d--}else g!=="$"&&g!=="$!"&&g!=="$?"||d++}c=c.nextSibling}He=null}}else He=ze?na(c.stateNode.nextSibling):null;return!0}function gr(){for(var c=He;c;)c=na(c.nextSibling)}function Pt(){He=ze=null,Je=!1}function xt(c){Xe===null?Xe=[c]:Xe.push(c)}var Mn=E.ReactCurrentBatchConfig;function lr(c,d,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var b=g.stateNode}if(!b)throw Error(r(147,c));var A=b,M=""+c;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===M?d.ref:(d=function(Q){var ve=A.refs;Q===null?delete ve[M]:ve[M]=Q},d._stringRef=M,d)}if(typeof c!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,c))}return c}function Tr(c,d){throw c=Object.prototype.toString.call(d),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":c))}function fn(c){var d=c._init;return d(c._payload)}function js(c){function d(De,ke){if(c){var Me=De.deletions;Me===null?(De.deletions=[ke],De.flags|=16):Me.push(ke)}}function g(De,ke){if(!c)return null;for(;ke!==null;)d(De,ke),ke=ke.sibling;return null}function b(De,ke){for(De=new Map;ke!==null;)ke.key!==null?De.set(ke.key,ke):De.set(ke.index,ke),ke=ke.sibling;return De}function A(De,ke){return De=_u(De,ke),De.index=0,De.sibling=null,De}function M(De,ke,Me){return De.index=Me,c?(Me=De.alternate,Me!==null?(Me=Me.index,Me<ke?(De.flags|=2,ke):Me):(De.flags|=2,ke)):(De.flags|=1048576,ke)}function Q(De){return c&&De.alternate===null&&(De.flags|=2),De}function ve(De,ke,Me,ht){return ke===null||ke.tag!==6?(ke=my(Me,De.mode,ht),ke.return=De,ke):(ke=A(ke,Me),ke.return=De,ke)}function Ne(De,ke,Me,ht){var qt=Me.type;return qt===O?ot(De,ke,Me.props.children,ht,Me.key):ke!==null&&(ke.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===se&&fn(qt)===ke.type)?(ht=A(ke,Me.props),ht.ref=lr(De,ke,Me),ht.return=De,ht):(ht=Ug(Me.type,Me.key,Me.props,null,De.mode,ht),ht.ref=lr(De,ke,Me),ht.return=De,ht)}function Be(De,ke,Me,ht){return ke===null||ke.tag!==4||ke.stateNode.containerInfo!==Me.containerInfo||ke.stateNode.implementation!==Me.implementation?(ke=py(Me,De.mode,ht),ke.return=De,ke):(ke=A(ke,Me.children||[]),ke.return=De,ke)}function ot(De,ke,Me,ht,qt){return ke===null||ke.tag!==7?(ke=Od(Me,De.mode,ht,qt),ke.return=De,ke):(ke=A(ke,Me),ke.return=De,ke)}function ct(De,ke,Me){if(typeof ke=="string"&&ke!==""||typeof ke=="number")return ke=my(""+ke,De.mode,Me),ke.return=De,ke;if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case I:return Me=Ug(ke.type,ke.key,ke.props,null,De.mode,Me),Me.ref=lr(De,null,ke),Me.return=De,Me;case D:return ke=py(ke,De.mode,Me),ke.return=De,ke;case se:var ht=ke._init;return ct(De,ht(ke._payload),Me)}if(me(ke)||ee(ke))return ke=Od(ke,De.mode,Me,null),ke.return=De,ke;Tr(De,ke)}return null}function it(De,ke,Me,ht){var qt=ke!==null?ke.key:null;if(typeof Me=="string"&&Me!==""||typeof Me=="number")return qt!==null?null:ve(De,ke,""+Me,ht);if(typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case I:return Me.key===qt?Ne(De,ke,Me,ht):null;case D:return Me.key===qt?Be(De,ke,Me,ht):null;case se:return qt=Me._init,it(De,ke,qt(Me._payload),ht)}if(me(Me)||ee(Me))return qt!==null?null:ot(De,ke,Me,ht,null);Tr(De,Me)}return null}function kt(De,ke,Me,ht,qt){if(typeof ht=="string"&&ht!==""||typeof ht=="number")return De=De.get(Me)||null,ve(ke,De,""+ht,qt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case I:return De=De.get(ht.key===null?Me:ht.key)||null,Ne(ke,De,ht,qt);case D:return De=De.get(ht.key===null?Me:ht.key)||null,Be(ke,De,ht,qt);case se:var tr=ht._init;return kt(De,ke,Me,tr(ht._payload),qt)}if(me(ht)||ee(ht))return De=De.get(Me)||null,ot(ke,De,ht,qt,null);Tr(ke,ht)}return null}function It(De,ke,Me,ht){for(var qt=null,tr=null,rr=ke,fr=ke=0,Qs=null;rr!==null&&fr<Me.length;fr++){rr.index>fr?(Qs=rr,rr=null):Qs=rr.sibling;var Kr=it(De,rr,Me[fr],ht);if(Kr===null){rr===null&&(rr=Qs);break}c&&rr&&Kr.alternate===null&&d(De,rr),ke=M(Kr,ke,fr),tr===null?qt=Kr:tr.sibling=Kr,tr=Kr,rr=Qs}if(fr===Me.length)return g(De,rr),Je&&Se(De,fr),qt;if(rr===null){for(;fr<Me.length;fr++)rr=ct(De,Me[fr],ht),rr!==null&&(ke=M(rr,ke,fr),tr===null?qt=rr:tr.sibling=rr,tr=rr);return Je&&Se(De,fr),qt}for(rr=b(De,rr);fr<Me.length;fr++)Qs=kt(rr,De,fr,Me[fr],ht),Qs!==null&&(c&&Qs.alternate!==null&&rr.delete(Qs.key===null?fr:Qs.key),ke=M(Qs,ke,fr),tr===null?qt=Qs:tr.sibling=Qs,tr=Qs);return c&&rr.forEach(function(Nu){return d(De,Nu)}),Je&&Se(De,fr),qt}function Mt(De,ke,Me,ht){var qt=ee(Me);if(typeof qt!="function")throw Error(r(150));if(Me=qt.call(Me),Me==null)throw Error(r(151));for(var tr=qt=null,rr=ke,fr=ke=0,Qs=null,Kr=Me.next();rr!==null&&!Kr.done;fr++,Kr=Me.next()){rr.index>fr?(Qs=rr,rr=null):Qs=rr.sibling;var Nu=it(De,rr,Kr.value,ht);if(Nu===null){rr===null&&(rr=Qs);break}c&&rr&&Nu.alternate===null&&d(De,rr),ke=M(Nu,ke,fr),tr===null?qt=Nu:tr.sibling=Nu,tr=Nu,rr=Qs}if(Kr.done)return g(De,rr),Je&&Se(De,fr),qt;if(rr===null){for(;!Kr.done;fr++,Kr=Me.next())Kr=ct(De,Kr.value,ht),Kr!==null&&(ke=M(Kr,ke,fr),tr===null?qt=Kr:tr.sibling=Kr,tr=Kr);return Je&&Se(De,fr),qt}for(rr=b(De,rr);!Kr.done;fr++,Kr=Me.next())Kr=kt(rr,De,fr,Kr.value,ht),Kr!==null&&(c&&Kr.alternate!==null&&rr.delete(Kr.key===null?fr:Kr.key),ke=M(Kr,ke,fr),tr===null?qt=Kr:tr.sibling=Kr,tr=Kr);return c&&rr.forEach(function(o8){return d(De,o8)}),Je&&Se(De,fr),qt}function ds(De,ke,Me,ht){if(typeof Me=="object"&&Me!==null&&Me.type===O&&Me.key===null&&(Me=Me.props.children),typeof Me=="object"&&Me!==null){switch(Me.$$typeof){case I:e:{for(var qt=Me.key,tr=ke;tr!==null;){if(tr.key===qt){if(qt=Me.type,qt===O){if(tr.tag===7){g(De,tr.sibling),ke=A(tr,Me.props.children),ke.return=De,De=ke;break e}}else if(tr.elementType===qt||typeof qt=="object"&&qt!==null&&qt.$$typeof===se&&fn(qt)===tr.type){g(De,tr.sibling),ke=A(tr,Me.props),ke.ref=lr(De,tr,Me),ke.return=De,De=ke;break e}g(De,tr);break}else d(De,tr);tr=tr.sibling}Me.type===O?(ke=Od(Me.props.children,De.mode,ht,Me.key),ke.return=De,De=ke):(ht=Ug(Me.type,Me.key,Me.props,null,De.mode,ht),ht.ref=lr(De,ke,Me),ht.return=De,De=ht)}return Q(De);case D:e:{for(tr=Me.key;ke!==null;){if(ke.key===tr)if(ke.tag===4&&ke.stateNode.containerInfo===Me.containerInfo&&ke.stateNode.implementation===Me.implementation){g(De,ke.sibling),ke=A(ke,Me.children||[]),ke.return=De,De=ke;break e}else{g(De,ke);break}else d(De,ke);ke=ke.sibling}ke=py(Me,De.mode,ht),ke.return=De,De=ke}return Q(De);case se:return tr=Me._init,ds(De,ke,tr(Me._payload),ht)}if(me(Me))return It(De,ke,Me,ht);if(ee(Me))return Mt(De,ke,Me,ht);Tr(De,Me)}return typeof Me=="string"&&Me!==""||typeof Me=="number"?(Me=""+Me,ke!==null&&ke.tag===6?(g(De,ke.sibling),ke=A(ke,Me),ke.return=De,De=ke):(g(De,ke),ke=my(Me,De.mode,ht),ke.return=De,De=ke),Q(De)):g(De,ke)}return ds}var Qn=js(!0),kn=js(!1),cs=Ni(null),_s=null,xn=null,Or=null;function qr(){Or=xn=_s=null}function yn(c){var d=cs.current;Qr(cs),c._currentValue=d}function Vr(c,d,g){for(;c!==null;){var b=c.alternate;if((c.childLanes&d)!==d?(c.childLanes|=d,b!==null&&(b.childLanes|=d)):b!==null&&(b.childLanes&d)!==d&&(b.childLanes|=d),c===g)break;c=c.return}}function Rn(c,d){_s=c,Or=xn=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&d)!==0&&(ai=!0),c.firstContext=null)}function Ln(c){var d=c._currentValue;if(Or!==c)if(c={context:c,memoizedValue:d,next:null},xn===null){if(_s===null)throw Error(r(308));xn=c,_s.dependencies={lanes:0,firstContext:c}}else xn=xn.next=c;return d}var nn=null;function Hs(c){nn===null?nn=[c]:nn.push(c)}function en(c,d,g,b){var A=d.interleaved;return A===null?(g.next=g,Hs(d)):(g.next=A.next,A.next=g),d.interleaved=g,sn(c,b)}function sn(c,d){c.lanes|=d;var g=c.alternate;for(g!==null&&(g.lanes|=d),g=c,c=c.return;c!==null;)c.childLanes|=d,g=c.alternate,g!==null&&(g.childLanes|=d),g=c,c=c.return;return g.tag===3?g.stateNode:null}var Jn=!1;function Is(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ga(c,d){c=c.updateQueue,d.updateQueue===c&&(d.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Fn(c,d){return{eventTime:c,lane:d,tag:0,payload:null,callback:null,next:null}}function Bn(c,d,g){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(Wr&2)!==0){var A=b.pending;return A===null?d.next=d:(d.next=A.next,A.next=d),b.pending=d,sn(c,g)}return A=b.interleaved,A===null?(d.next=d,Hs(b)):(d.next=A.next,A.next=d),b.interleaved=d,sn(c,g)}function Gs(c,d,g){if(d=d.updateQueue,d!==null&&(d=d.shared,(g&4194240)!==0)){var b=d.lanes;b&=c.pendingLanes,g|=b,d.lanes=g,Kc(c,g)}}function an(c,d){var g=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var A=null,M=null;if(g=g.firstBaseUpdate,g!==null){do{var Q={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};M===null?A=M=Q:M=M.next=Q,g=g.next}while(g!==null);M===null?A=M=d:M=M.next=d}else A=M=d;g={baseState:b.baseState,firstBaseUpdate:A,lastBaseUpdate:M,shared:b.shared,effects:b.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=d:c.next=d,g.lastBaseUpdate=d}function Ks(c,d,g,b){var A=c.updateQueue;Jn=!1;var M=A.firstBaseUpdate,Q=A.lastBaseUpdate,ve=A.shared.pending;if(ve!==null){A.shared.pending=null;var Ne=ve,Be=Ne.next;Ne.next=null,Q===null?M=Be:Q.next=Be,Q=Ne;var ot=c.alternate;ot!==null&&(ot=ot.updateQueue,ve=ot.lastBaseUpdate,ve!==Q&&(ve===null?ot.firstBaseUpdate=Be:ve.next=Be,ot.lastBaseUpdate=Ne))}if(M!==null){var ct=A.baseState;Q=0,ot=Be=Ne=null,ve=M;do{var it=ve.lane,kt=ve.eventTime;if((b&it)===it){ot!==null&&(ot=ot.next={eventTime:kt,lane:0,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null});e:{var It=c,Mt=ve;switch(it=d,kt=g,Mt.tag){case 1:if(It=Mt.payload,typeof It=="function"){ct=It.call(kt,ct,it);break e}ct=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Mt.payload,it=typeof It=="function"?It.call(kt,ct,it):It,it==null)break e;ct=ge({},ct,it);break e;case 2:Jn=!0}}ve.callback!==null&&ve.lane!==0&&(c.flags|=64,it=A.effects,it===null?A.effects=[ve]:it.push(ve))}else kt={eventTime:kt,lane:it,tag:ve.tag,payload:ve.payload,callback:ve.callback,next:null},ot===null?(Be=ot=kt,Ne=ct):ot=ot.next=kt,Q|=it;if(ve=ve.next,ve===null){if(ve=A.shared.pending,ve===null)break;it=ve,ve=it.next,it.next=null,A.lastBaseUpdate=it,A.shared.pending=null}}while(!0);if(ot===null&&(Ne=ct),A.baseState=Ne,A.firstBaseUpdate=Be,A.lastBaseUpdate=ot,d=A.shared.interleaved,d!==null){A=d;do Q|=A.lane,A=A.next;while(A!==d)}else M===null&&(A.shared.lanes=0);Rd|=Q,c.lanes=Q,c.memoizedState=ct}}function si(c,d,g){if(c=d.effects,d.effects=null,c!==null)for(d=0;d<c.length;d++){var b=c[d],A=b.callback;if(A!==null){if(b.callback=null,b=g,typeof A!="function")throw Error(r(191,A));A.call(b)}}}var Si={},Ns=Ni(Si),Un=Ni(Si),vl=Ni(Si);function jo(c){if(c===Si)throw Error(r(174));return c}function mu(c,d){switch(Xr(vl,d),Xr(Un,c),Xr(Ns,Si),c=d.nodeType,c){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:gt(null,"");break;default:c=c===8?d.parentNode:d,d=c.namespaceURI||null,c=c.tagName,d=gt(d,c)}Qr(Ns),Xr(Ns,d)}function eo(){Qr(Ns),Qr(Un),Qr(vl)}function bg(c){jo(vl.current);var d=jo(Ns.current),g=gt(d,c.type);d!==g&&(Xr(Un,c),Xr(Ns,g))}function Cm(c){Un.current===c&&(Qr(Ns),Qr(Un))}var pn=Ni(0);function ki(c){for(var d=c;d!==null;){if(d.tag===13){var g=d.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if((d.flags&128)!==0)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Em=[];function Pm(){for(var c=0;c<Em.length;c++)Em[c]._workInProgressVersionPrimary=null;Em.length=0}var Ff=E.ReactCurrentDispatcher,Bf=E.ReactCurrentBatchConfig,to=0,wn=null,Zn=null,$n=null,pu=!1,_o=!1,gu=0,U0=0;function us(){throw Error(r(321))}function Uf(c,d){if(d===null)return!1;for(var g=0;g<d.length&&g<c.length;g++)if(!Pn(c[g],d[g]))return!1;return!0}function Pd(c,d,g,b,A,M){if(to=M,wn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,Ff.current=c===null||c.memoizedState===null?LL:DL,c=g(b,A),_o){M=0;do{if(_o=!1,gu=0,25<=M)throw Error(r(301));M+=1,$n=Zn=null,d.updateQueue=null,Ff.current=IL,c=g(b,A)}while(_o)}if(Ff.current=kg,d=Zn!==null&&Zn.next!==null,to=0,$n=Zn=wn=null,pu=!1,d)throw Error(r(300));return c}function ro(){var c=gu!==0;return gu=0,c}function Ci(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return $n===null?wn.memoizedState=$n=c:$n=$n.next=c,$n}function Fa(){if(Zn===null){var c=wn.alternate;c=c!==null?c.memoizedState:null}else c=Zn.next;var d=$n===null?wn.memoizedState:$n.next;if(d!==null)$n=d,Zn=c;else{if(c===null)throw Error(r(310));Zn=c,c={memoizedState:Zn.memoizedState,baseState:Zn.baseState,baseQueue:Zn.baseQueue,queue:Zn.queue,next:null},$n===null?wn.memoizedState=$n=c:$n=$n.next=c}return $n}function Ad(c,d){return typeof d=="function"?d(c):d}function $f(c){var d=Fa(),g=d.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var b=Zn,A=b.baseQueue,M=g.pending;if(M!==null){if(A!==null){var Q=A.next;A.next=M.next,M.next=Q}b.baseQueue=A=M,g.pending=null}if(A!==null){M=A.next,b=b.baseState;var ve=Q=null,Ne=null,Be=M;do{var ot=Be.lane;if((to&ot)===ot)Ne!==null&&(Ne=Ne.next={lane:0,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null}),b=Be.hasEagerState?Be.eagerState:c(b,Be.action);else{var ct={lane:ot,action:Be.action,hasEagerState:Be.hasEagerState,eagerState:Be.eagerState,next:null};Ne===null?(ve=Ne=ct,Q=b):Ne=Ne.next=ct,wn.lanes|=ot,Rd|=ot}Be=Be.next}while(Be!==null&&Be!==M);Ne===null?Q=b:Ne.next=ve,Pn(b,d.memoizedState)||(ai=!0),d.memoizedState=b,d.baseState=Q,d.baseQueue=Ne,g.lastRenderedState=b}if(c=g.interleaved,c!==null){A=c;do M=A.lane,wn.lanes|=M,Rd|=M,A=A.next;while(A!==c)}else A===null&&(g.lanes=0);return[d.memoizedState,g.dispatch]}function xl(c){var d=Fa(),g=d.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var b=g.dispatch,A=g.pending,M=d.memoizedState;if(A!==null){g.pending=null;var Q=A=A.next;do M=c(M,Q.action),Q=Q.next;while(Q!==A);Pn(M,d.memoizedState)||(ai=!0),d.memoizedState=M,d.baseQueue===null&&(d.baseState=M),g.lastRenderedState=M}return[M,b]}function jg(){}function Am(c,d){var g=wn,b=Fa(),A=d(),M=!Pn(b.memoizedState,A);if(M&&(b.memoizedState=A,ai=!0),b=b.queue,Vf(Ng.bind(null,g,b,c),[c]),b.getSnapshot!==d||M||$n!==null&&$n.memoizedState.tag&1){if(g.flags|=2048,Ba(9,Tm.bind(null,g,b,A,d),void 0,null),Ys===null)throw Error(r(349));(to&30)!==0||_g(g,d,A)}return A}function _g(c,d,g){c.flags|=16384,c={getSnapshot:d,value:g},d=wn.updateQueue,d===null?(d={lastEffect:null,stores:null},wn.updateQueue=d,d.stores=[c]):(g=d.stores,g===null?d.stores=[c]:g.push(c))}function Tm(c,d,g,b){d.value=g,d.getSnapshot=b,vu(d)&&zf(c)}function Ng(c,d,g){return g(function(){vu(d)&&zf(c)})}function vu(c){var d=c.getSnapshot;c=c.value;try{var g=d();return!Pn(c,g)}catch{return!0}}function zf(c){var d=sn(c,1);d!==null&&Eo(d,c,1,-1)}function Td(c){var d=Ci();return typeof c=="function"&&(c=c()),d.memoizedState=d.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ad,lastRenderedState:c},d.queue=c,c=c.dispatch=RL.bind(null,wn,c),[d.memoizedState,c]}function Ba(c,d,g,b){return c={tag:c,create:d,destroy:g,deps:b,next:null},d=wn.updateQueue,d===null?(d={lastEffect:null,stores:null},wn.updateQueue=d,d.lastEffect=c.next=c):(g=d.lastEffect,g===null?d.lastEffect=c.next=c:(b=g.next,g.next=c,c.next=b,d.lastEffect=c)),c}function No(){return Fa().memoizedState}function Ei(c,d,g,b){var A=Ci();wn.flags|=c,A.memoizedState=Ba(1|d,g,void 0,b===void 0?null:b)}function yc(c,d,g,b){var A=Fa();b=b===void 0?null:b;var M=void 0;if(Zn!==null){var Q=Zn.memoizedState;if(M=Q.destroy,b!==null&&Uf(b,Q.deps)){A.memoizedState=Ba(d,g,M,b);return}}wn.flags|=c,A.memoizedState=Ba(1|d,g,M,b)}function qf(c,d){return Ei(8390656,8,c,d)}function Vf(c,d){return yc(2048,8,c,d)}function Sg(c,d){return yc(4,2,c,d)}function Wf(c,d){return yc(4,4,c,d)}function Hf(c,d){if(typeof d=="function")return c=c(),d(c),function(){d(null)};if(d!=null)return c=c(),d.current=c,function(){d.current=null}}function S5(c,d,g){return g=g!=null?g.concat([c]):null,yc(4,4,Hf.bind(null,d,c),g)}function $0(){}function k5(c,d){var g=Fa();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&Uf(d,b[1])?b[0]:(g.memoizedState=[c,d],c)}function C5(c,d){var g=Fa();d=d===void 0?null:d;var b=g.memoizedState;return b!==null&&d!==null&&Uf(d,b[1])?b[0]:(c=c(),g.memoizedState=[c,d],c)}function E5(c,d,g){return(to&21)===0?(c.baseState&&(c.baseState=!1,ai=!0),c.memoizedState=g):(Pn(g,d)||(g=cd(),wn.lanes|=g,Rd|=g,c.baseState=!0),d)}function AL(c,d){var g=$r;$r=g!==0&&4>g?g:4,c(!0);var b=Bf.transition;Bf.transition={};try{c(!1),d()}finally{$r=g,Bf.transition=b}}function P5(){return Fa().memoizedState}function TL(c,d,g){var b=bu(c);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},A5(c))T5(d,g);else if(g=en(c,d,g,b),g!==null){var A=$a();Eo(g,c,b,A),R5(g,d,b)}}function RL(c,d,g){var b=bu(c),A={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(A5(c))T5(d,A);else{var M=c.alternate;if(c.lanes===0&&(M===null||M.lanes===0)&&(M=d.lastRenderedReducer,M!==null))try{var Q=d.lastRenderedState,ve=M(Q,g);if(A.hasEagerState=!0,A.eagerState=ve,Pn(ve,Q)){var Ne=d.interleaved;Ne===null?(A.next=A,Hs(d)):(A.next=Ne.next,Ne.next=A),d.interleaved=A;return}}catch{}finally{}g=en(c,d,A,b),g!==null&&(A=$a(),Eo(g,c,b,A),R5(g,d,b))}}function A5(c){var d=c.alternate;return c===wn||d!==null&&d===wn}function T5(c,d){_o=pu=!0;var g=c.pending;g===null?d.next=d:(d.next=g.next,g.next=d),c.pending=d}function R5(c,d,g){if((g&4194240)!==0){var b=d.lanes;b&=c.pendingLanes,g|=b,d.lanes=g,Kc(c,g)}}var kg={readContext:Ln,useCallback:us,useContext:us,useEffect:us,useImperativeHandle:us,useInsertionEffect:us,useLayoutEffect:us,useMemo:us,useReducer:us,useRef:us,useState:us,useDebugValue:us,useDeferredValue:us,useTransition:us,useMutableSource:us,useSyncExternalStore:us,useId:us,unstable_isNewReconciler:!1},LL={readContext:Ln,useCallback:function(c,d){return Ci().memoizedState=[c,d===void 0?null:d],c},useContext:Ln,useEffect:qf,useImperativeHandle:function(c,d,g){return g=g!=null?g.concat([c]):null,Ei(4194308,4,Hf.bind(null,d,c),g)},useLayoutEffect:function(c,d){return Ei(4194308,4,c,d)},useInsertionEffect:function(c,d){return Ei(4,2,c,d)},useMemo:function(c,d){var g=Ci();return d=d===void 0?null:d,c=c(),g.memoizedState=[c,d],c},useReducer:function(c,d,g){var b=Ci();return d=g!==void 0?g(d):d,b.memoizedState=b.baseState=d,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:d},b.queue=c,c=c.dispatch=TL.bind(null,wn,c),[b.memoizedState,c]},useRef:function(c){var d=Ci();return c={current:c},d.memoizedState=c},useState:Td,useDebugValue:$0,useDeferredValue:function(c){return Ci().memoizedState=c},useTransition:function(){var c=Td(!1),d=c[0];return c=AL.bind(null,c[1]),Ci().memoizedState=c,[d,c]},useMutableSource:function(){},useSyncExternalStore:function(c,d,g){var b=wn,A=Ci();if(Je){if(g===void 0)throw Error(r(407));g=g()}else{if(g=d(),Ys===null)throw Error(r(349));(to&30)!==0||_g(b,d,g)}A.memoizedState=g;var M={value:g,getSnapshot:d};return A.queue=M,qf(Ng.bind(null,b,M,c),[c]),b.flags|=2048,Ba(9,Tm.bind(null,b,M,g,d),void 0,null),g},useId:function(){var c=Ci(),d=Ys.identifierPrefix;if(Je){var g=he,b=Le;g=(b&~(1<<32-Hn(b)-1)).toString(32)+g,d=":"+d+"R"+g,g=gu++,0<g&&(d+="H"+g.toString(32)),d+=":"}else g=U0++,d=":"+d+"r"+g.toString(32)+":";return c.memoizedState=d},unstable_isNewReconciler:!1},DL={readContext:Ln,useCallback:k5,useContext:Ln,useEffect:Vf,useImperativeHandle:S5,useInsertionEffect:Sg,useLayoutEffect:Wf,useMemo:C5,useReducer:$f,useRef:No,useState:function(){return $f(Ad)},useDebugValue:$0,useDeferredValue:function(c){var d=Fa();return E5(d,Zn.memoizedState,c)},useTransition:function(){var c=$f(Ad)[0],d=Fa().memoizedState;return[c,d]},useMutableSource:jg,useSyncExternalStore:Am,useId:P5,unstable_isNewReconciler:!1},IL={readContext:Ln,useCallback:k5,useContext:Ln,useEffect:Vf,useImperativeHandle:S5,useInsertionEffect:Sg,useLayoutEffect:Wf,useMemo:C5,useReducer:xl,useRef:No,useState:function(){return xl(Ad)},useDebugValue:$0,useDeferredValue:function(c){var d=Fa();return Zn===null?d.memoizedState=c:E5(d,Zn.memoizedState,c)},useTransition:function(){var c=xl(Ad)[0],d=Fa().memoizedState;return[c,d]},useMutableSource:jg,useSyncExternalStore:Am,useId:P5,unstable_isNewReconciler:!1};function So(c,d){if(c&&c.defaultProps){d=ge({},d),c=c.defaultProps;for(var g in c)d[g]===void 0&&(d[g]=c[g]);return d}return d}function z0(c,d,g,b){d=c.memoizedState,g=g(b,d),g=g==null?d:ge({},d,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var Cg={isMounted:function(c){return(c=c._reactInternals)?Ts(c)===c:!1},enqueueSetState:function(c,d,g){c=c._reactInternals;var b=$a(),A=bu(c),M=Fn(b,A);M.payload=d,g!=null&&(M.callback=g),d=Bn(c,M,A),d!==null&&(Eo(d,c,A,b),Gs(d,c,A))},enqueueReplaceState:function(c,d,g){c=c._reactInternals;var b=$a(),A=bu(c),M=Fn(b,A);M.tag=1,M.payload=d,g!=null&&(M.callback=g),d=Bn(c,M,A),d!==null&&(Eo(d,c,A,b),Gs(d,c,A))},enqueueForceUpdate:function(c,d){c=c._reactInternals;var g=$a(),b=bu(c),A=Fn(g,b);A.tag=2,d!=null&&(A.callback=d),d=Bn(c,A,b),d!==null&&(Eo(d,c,b,g),Gs(d,c,b))}};function L5(c,d,g,b,A,M,Q){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,M,Q):d.prototype&&d.prototype.isPureReactComponent?!da(g,b)||!da(A,M):!0}function D5(c,d,g){var b=!1,A=gl,M=d.contextType;return typeof M=="object"&&M!==null?M=Ln(M):(A=pa(d)?vc:Ds.current,b=d.contextTypes,M=(b=b!=null)?hu(c,A):gl),d=new d(g,M),c.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Cg,c.stateNode=d,d._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=A,c.__reactInternalMemoizedMaskedChildContext=M),d}function I5(c,d,g,b){c=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(g,b),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(g,b),d.state!==c&&Cg.enqueueReplaceState(d,d.state,null)}function q0(c,d,g,b){var A=c.stateNode;A.props=g,A.state=c.memoizedState,A.refs={},Is(c);var M=d.contextType;typeof M=="object"&&M!==null?A.context=Ln(M):(M=pa(d)?vc:Ds.current,A.context=hu(c,M)),A.state=c.memoizedState,M=d.getDerivedStateFromProps,typeof M=="function"&&(z0(c,d,M,g),A.state=c.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(d=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),d!==A.state&&Cg.enqueueReplaceState(A,A.state,null),Ks(c,g,A,b),A.state=c.memoizedState),typeof A.componentDidMount=="function"&&(c.flags|=4194308)}function Gf(c,d){try{var g="",b=d;do g+=ne(b),b=b.return;while(b);var A=g}catch(M){A=`
Error generating stack: `+M.message+`
`+M.stack}return{value:c,source:d,stack:A,digest:null}}function V0(c,d,g){return{value:c,source:null,stack:g??null,digest:d??null}}function W0(c,d){try{console.error(d.value)}catch(g){setTimeout(function(){throw g})}}var OL=typeof WeakMap=="function"?WeakMap:Map;function O5(c,d,g){g=Fn(-1,g),g.tag=3,g.payload={element:null};var b=d.value;return g.callback=function(){Dg||(Dg=!0,iy=b),W0(c,d)},g}function M5(c,d,g){g=Fn(-1,g),g.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var A=d.value;g.payload=function(){return b(A)},g.callback=function(){W0(c,d)}}var M=c.stateNode;return M!==null&&typeof M.componentDidCatch=="function"&&(g.callback=function(){W0(c,d),typeof b!="function"&&(yu===null?yu=new Set([this]):yu.add(this));var Q=d.stack;this.componentDidCatch(d.value,{componentStack:Q!==null?Q:""})}),g}function F5(c,d,g){var b=c.pingCache;if(b===null){b=c.pingCache=new OL;var A=new Set;b.set(d,A)}else A=b.get(d),A===void 0&&(A=new Set,b.set(d,A));A.has(g)||(A.add(g),c=QL.bind(null,c,d,g),d.then(c,c))}function B5(c){do{var d;if((d=c.tag===13)&&(d=c.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return c;c=c.return}while(c!==null);return null}function U5(c,d,g,b,A){return(c.mode&1)===0?(c===d?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(d=Fn(-1,1),d.tag=2,Bn(g,d,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=A,c)}var ML=E.ReactCurrentOwner,ai=!1;function Ua(c,d,g,b){d.child=c===null?kn(d,null,g,b):Qn(d,c.child,g,b)}function $5(c,d,g,b,A){g=g.render;var M=d.ref;return Rn(d,A),b=Pd(c,d,g,b,M,A),g=ro(),c!==null&&!ai?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~A,wc(c,d,A)):(Je&&g&&Ke(d),d.flags|=1,Ua(c,d,b,A),d.child)}function z5(c,d,g,b,A){if(c===null){var M=g.type;return typeof M=="function"&&!hy(M)&&M.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(d.tag=15,d.type=M,q5(c,d,M,b,A)):(c=Ug(g.type,null,b,d,d.mode,A),c.ref=d.ref,c.return=d,d.child=c)}if(M=c.child,(c.lanes&A)===0){var Q=M.memoizedProps;if(g=g.compare,g=g!==null?g:da,g(Q,b)&&c.ref===d.ref)return wc(c,d,A)}return d.flags|=1,c=_u(M,b),c.ref=d.ref,c.return=d,d.child=c}function q5(c,d,g,b,A){if(c!==null){var M=c.memoizedProps;if(da(M,b)&&c.ref===d.ref)if(ai=!1,d.pendingProps=b=M,(c.lanes&A)!==0)(c.flags&131072)!==0&&(ai=!0);else return d.lanes=c.lanes,wc(c,d,A)}return H0(c,d,g,b,A)}function V5(c,d,g){var b=d.pendingProps,A=b.children,M=c!==null?c.memoizedState:null;if(b.mode==="hidden")if((d.mode&1)===0)d.memoizedState={baseLanes:0,cachePool:null,transitions:null},Xr(Yf,Pi),Pi|=g;else{if((g&1073741824)===0)return c=M!==null?M.baseLanes|g:g,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:c,cachePool:null,transitions:null},d.updateQueue=null,Xr(Yf,Pi),Pi|=c,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=M!==null?M.baseLanes:g,Xr(Yf,Pi),Pi|=b}else M!==null?(b=M.baseLanes|g,d.memoizedState=null):b=g,Xr(Yf,Pi),Pi|=b;return Ua(c,d,A,g),d.child}function W5(c,d){var g=d.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(d.flags|=512,d.flags|=2097152)}function H0(c,d,g,b,A){var M=pa(g)?vc:Ds.current;return M=hu(d,M),Rn(d,A),g=Pd(c,d,g,b,M,A),b=ro(),c!==null&&!ai?(d.updateQueue=c.updateQueue,d.flags&=-2053,c.lanes&=~A,wc(c,d,A)):(Je&&b&&Ke(d),d.flags|=1,Ua(c,d,g,A),d.child)}function H5(c,d,g,b,A){if(pa(g)){var M=!0;xc(d)}else M=!1;if(Rn(d,A),d.stateNode===null)Pg(c,d),D5(d,g,b),q0(d,g,b,A),b=!0;else if(c===null){var Q=d.stateNode,ve=d.memoizedProps;Q.props=ve;var Ne=Q.context,Be=g.contextType;typeof Be=="object"&&Be!==null?Be=Ln(Be):(Be=pa(g)?vc:Ds.current,Be=hu(d,Be));var ot=g.getDerivedStateFromProps,ct=typeof ot=="function"||typeof Q.getSnapshotBeforeUpdate=="function";ct||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ve!==b||Ne!==Be)&&I5(d,Q,b,Be),Jn=!1;var it=d.memoizedState;Q.state=it,Ks(d,b,Q,A),Ne=d.memoizedState,ve!==b||it!==Ne||ma.current||Jn?(typeof ot=="function"&&(z0(d,g,ot,b),Ne=d.memoizedState),(ve=Jn||L5(d,g,ve,b,it,Ne,Be))?(ct||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount()),typeof Q.componentDidMount=="function"&&(d.flags|=4194308)):(typeof Q.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=b,d.memoizedState=Ne),Q.props=b,Q.state=Ne,Q.context=Be,b=ve):(typeof Q.componentDidMount=="function"&&(d.flags|=4194308),b=!1)}else{Q=d.stateNode,ga(c,d),ve=d.memoizedProps,Be=d.type===d.elementType?ve:So(d.type,ve),Q.props=Be,ct=d.pendingProps,it=Q.context,Ne=g.contextType,typeof Ne=="object"&&Ne!==null?Ne=Ln(Ne):(Ne=pa(g)?vc:Ds.current,Ne=hu(d,Ne));var kt=g.getDerivedStateFromProps;(ot=typeof kt=="function"||typeof Q.getSnapshotBeforeUpdate=="function")||typeof Q.UNSAFE_componentWillReceiveProps!="function"&&typeof Q.componentWillReceiveProps!="function"||(ve!==ct||it!==Ne)&&I5(d,Q,b,Ne),Jn=!1,it=d.memoizedState,Q.state=it,Ks(d,b,Q,A);var It=d.memoizedState;ve!==ct||it!==It||ma.current||Jn?(typeof kt=="function"&&(z0(d,g,kt,b),It=d.memoizedState),(Be=Jn||L5(d,g,Be,b,it,It,Ne)||!1)?(ot||typeof Q.UNSAFE_componentWillUpdate!="function"&&typeof Q.componentWillUpdate!="function"||(typeof Q.componentWillUpdate=="function"&&Q.componentWillUpdate(b,It,Ne),typeof Q.UNSAFE_componentWillUpdate=="function"&&Q.UNSAFE_componentWillUpdate(b,It,Ne)),typeof Q.componentDidUpdate=="function"&&(d.flags|=4),typeof Q.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof Q.componentDidUpdate!="function"||ve===c.memoizedProps&&it===c.memoizedState||(d.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ve===c.memoizedProps&&it===c.memoizedState||(d.flags|=1024),d.memoizedProps=b,d.memoizedState=It),Q.props=b,Q.state=It,Q.context=Ne,b=Be):(typeof Q.componentDidUpdate!="function"||ve===c.memoizedProps&&it===c.memoizedState||(d.flags|=4),typeof Q.getSnapshotBeforeUpdate!="function"||ve===c.memoizedProps&&it===c.memoizedState||(d.flags|=1024),b=!1)}return G0(c,d,g,b,M,A)}function G0(c,d,g,b,A,M){W5(c,d);var Q=(d.flags&128)!==0;if(!b&&!Q)return A&&wg(d,g,!1),wc(c,d,M);b=d.stateNode,ML.current=d;var ve=Q&&typeof g.getDerivedStateFromError!="function"?null:b.render();return d.flags|=1,c!==null&&Q?(d.child=Qn(d,c.child,null,M),d.child=Qn(d,null,ve,M)):Ua(c,d,ve,M),d.memoizedState=b.state,A&&wg(d,g,!0),d.child}function G5(c){var d=c.stateNode;d.pendingContext?yg(c,d.pendingContext,d.pendingContext!==d.context):d.context&&yg(c,d.context,!1),mu(c,d.containerInfo)}function K5(c,d,g,b,A){return Pt(),xt(A),d.flags|=256,Ua(c,d,g,b),d.child}var K0={dehydrated:null,treeContext:null,retryLane:0};function Y0(c){return{baseLanes:c,cachePool:null,transitions:null}}function Y5(c,d,g){var b=d.pendingProps,A=pn.current,M=!1,Q=(d.flags&128)!==0,ve;if((ve=Q)||(ve=c!==null&&c.memoizedState===null?!1:(A&2)!==0),ve?(M=!0,d.flags&=-129):(c===null||c.memoizedState!==null)&&(A|=1),Xr(pn,A&1),c===null)return Dt(d),c=d.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((d.mode&1)===0?d.lanes=1:c.data==="$!"?d.lanes=8:d.lanes=1073741824,null):(Q=b.children,c=b.fallback,M?(b=d.mode,M=d.child,Q={mode:"hidden",children:Q},(b&1)===0&&M!==null?(M.childLanes=0,M.pendingProps=Q):M=$g(Q,b,0,null),c=Od(c,b,g,null),M.return=d,c.return=d,M.sibling=c,d.child=M,d.child.memoizedState=Y0(g),d.memoizedState=K0,c):Q0(d,Q));if(A=c.memoizedState,A!==null&&(ve=A.dehydrated,ve!==null))return FL(c,d,Q,b,ve,A,g);if(M){M=b.fallback,Q=d.mode,A=c.child,ve=A.sibling;var Ne={mode:"hidden",children:b.children};return(Q&1)===0&&d.child!==A?(b=d.child,b.childLanes=0,b.pendingProps=Ne,d.deletions=null):(b=_u(A,Ne),b.subtreeFlags=A.subtreeFlags&14680064),ve!==null?M=_u(ve,M):(M=Od(M,Q,g,null),M.flags|=2),M.return=d,b.return=d,b.sibling=M,d.child=b,b=M,M=d.child,Q=c.child.memoizedState,Q=Q===null?Y0(g):{baseLanes:Q.baseLanes|g,cachePool:null,transitions:Q.transitions},M.memoizedState=Q,M.childLanes=c.childLanes&~g,d.memoizedState=K0,b}return M=c.child,c=M.sibling,b=_u(M,{mode:"visible",children:b.children}),(d.mode&1)===0&&(b.lanes=g),b.return=d,b.sibling=null,c!==null&&(g=d.deletions,g===null?(d.deletions=[c],d.flags|=16):g.push(c)),d.child=b,d.memoizedState=null,b}function Q0(c,d){return d=$g({mode:"visible",children:d},c.mode,0,null),d.return=c,c.child=d}function Eg(c,d,g,b){return b!==null&&xt(b),Qn(d,c.child,null,g),c=Q0(d,d.pendingProps.children),c.flags|=2,d.memoizedState=null,c}function FL(c,d,g,b,A,M,Q){if(g)return d.flags&256?(d.flags&=-257,b=V0(Error(r(422))),Eg(c,d,Q,b)):d.memoizedState!==null?(d.child=c.child,d.flags|=128,null):(M=b.fallback,A=d.mode,b=$g({mode:"visible",children:b.children},A,0,null),M=Od(M,A,Q,null),M.flags|=2,b.return=d,M.return=d,b.sibling=M,d.child=b,(d.mode&1)!==0&&Qn(d,c.child,null,Q),d.child.memoizedState=Y0(Q),d.memoizedState=K0,M);if((d.mode&1)===0)return Eg(c,d,Q,null);if(A.data==="$!"){if(b=A.nextSibling&&A.nextSibling.dataset,b)var ve=b.dgst;return b=ve,M=Error(r(419)),b=V0(M,b,void 0),Eg(c,d,Q,b)}if(ve=(Q&c.childLanes)!==0,ai||ve){if(b=Ys,b!==null){switch(Q&-Q){case 4:A=2;break;case 16:A=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:A=32;break;case 536870912:A=268435456;break;default:A=0}A=(A&(b.suspendedLanes|Q))!==0?0:A,A!==0&&A!==M.retryLane&&(M.retryLane=A,sn(c,A),Eo(b,c,A,-1))}return fy(),b=V0(Error(r(421))),Eg(c,d,Q,b)}return A.data==="$?"?(d.flags|=128,d.child=c.child,d=JL.bind(null,c),A._reactRetry=d,null):(c=M.treeContext,He=na(A.nextSibling),ze=d,Je=!0,Xe=null,c!==null&&(ce[fe++]=Le,ce[fe++]=he,ce[fe++]=_e,Le=c.id,he=c.overflow,_e=d),d=Q0(d,b.children),d.flags|=4096,d)}function Q5(c,d,g){c.lanes|=d;var b=c.alternate;b!==null&&(b.lanes|=d),Vr(c.return,d,g)}function J0(c,d,g,b,A){var M=c.memoizedState;M===null?c.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:A}:(M.isBackwards=d,M.rendering=null,M.renderingStartTime=0,M.last=b,M.tail=g,M.tailMode=A)}function J5(c,d,g){var b=d.pendingProps,A=b.revealOrder,M=b.tail;if(Ua(c,d,b.children,g),b=pn.current,(b&2)!==0)b=b&1|2,d.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=d.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Q5(c,g,d);else if(c.tag===19)Q5(c,g,d);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===d)break e;for(;c.sibling===null;){if(c.return===null||c.return===d)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(Xr(pn,b),(d.mode&1)===0)d.memoizedState=null;else switch(A){case"forwards":for(g=d.child,A=null;g!==null;)c=g.alternate,c!==null&&ki(c)===null&&(A=g),g=g.sibling;g=A,g===null?(A=d.child,d.child=null):(A=g.sibling,g.sibling=null),J0(d,!1,A,g,M);break;case"backwards":for(g=null,A=d.child,d.child=null;A!==null;){if(c=A.alternate,c!==null&&ki(c)===null){d.child=A;break}c=A.sibling,A.sibling=g,g=A,A=c}J0(d,!0,g,null,M);break;case"together":J0(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Pg(c,d){(d.mode&1)===0&&c!==null&&(c.alternate=null,d.alternate=null,d.flags|=2)}function wc(c,d,g){if(c!==null&&(d.dependencies=c.dependencies),Rd|=d.lanes,(g&d.childLanes)===0)return null;if(c!==null&&d.child!==c.child)throw Error(r(153));if(d.child!==null){for(c=d.child,g=_u(c,c.pendingProps),d.child=g,g.return=d;c.sibling!==null;)c=c.sibling,g=g.sibling=_u(c,c.pendingProps),g.return=d;g.sibling=null}return d.child}function BL(c,d,g){switch(d.tag){case 3:G5(d),Pt();break;case 5:bg(d);break;case 1:pa(d.type)&&xc(d);break;case 4:mu(d,d.stateNode.containerInfo);break;case 10:var b=d.type._context,A=d.memoizedProps.value;Xr(cs,b._currentValue),b._currentValue=A;break;case 13:if(b=d.memoizedState,b!==null)return b.dehydrated!==null?(Xr(pn,pn.current&1),d.flags|=128,null):(g&d.child.childLanes)!==0?Y5(c,d,g):(Xr(pn,pn.current&1),c=wc(c,d,g),c!==null?c.sibling:null);Xr(pn,pn.current&1);break;case 19:if(b=(g&d.childLanes)!==0,(c.flags&128)!==0){if(b)return J5(c,d,g);d.flags|=128}if(A=d.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Xr(pn,pn.current),b)break;return null;case 22:case 23:return d.lanes=0,V5(c,d,g)}return wc(c,d,g)}var Z5,Z0,X5,ej;Z5=function(c,d){for(var g=d.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===d)break;for(;g.sibling===null;){if(g.return===null||g.return===d)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Z0=function(){},X5=function(c,d,g,b){var A=c.memoizedProps;if(A!==b){c=d.stateNode,jo(Ns.current);var M=null;switch(g){case"input":A=je(c,A),b=je(c,b),M=[];break;case"select":A=ge({},A,{value:void 0}),b=ge({},b,{value:void 0}),M=[];break;case"textarea":A=Ce(c,A),b=Ce(c,b),M=[];break;default:typeof A.onClick!="function"&&typeof b.onClick=="function"&&(c.onclick=uu)}Pr(g,b);var Q;g=null;for(Be in A)if(!b.hasOwnProperty(Be)&&A.hasOwnProperty(Be)&&A[Be]!=null)if(Be==="style"){var ve=A[Be];for(Q in ve)ve.hasOwnProperty(Q)&&(g||(g={}),g[Q]="")}else Be!=="dangerouslySetInnerHTML"&&Be!=="children"&&Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&Be!=="autoFocus"&&(a.hasOwnProperty(Be)?M||(M=[]):(M=M||[]).push(Be,null));for(Be in b){var Ne=b[Be];if(ve=A?.[Be],b.hasOwnProperty(Be)&&Ne!==ve&&(Ne!=null||ve!=null))if(Be==="style")if(ve){for(Q in ve)!ve.hasOwnProperty(Q)||Ne&&Ne.hasOwnProperty(Q)||(g||(g={}),g[Q]="");for(Q in Ne)Ne.hasOwnProperty(Q)&&ve[Q]!==Ne[Q]&&(g||(g={}),g[Q]=Ne[Q])}else g||(M||(M=[]),M.push(Be,g)),g=Ne;else Be==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,ve=ve?ve.__html:void 0,Ne!=null&&ve!==Ne&&(M=M||[]).push(Be,Ne)):Be==="children"?typeof Ne!="string"&&typeof Ne!="number"||(M=M||[]).push(Be,""+Ne):Be!=="suppressContentEditableWarning"&&Be!=="suppressHydrationWarning"&&(a.hasOwnProperty(Be)?(Ne!=null&&Be==="onScroll"&&rn("scroll",c),M||ve===Ne||(M=[])):(M=M||[]).push(Be,Ne))}g&&(M=M||[]).push("style",g);var Be=M;(d.updateQueue=Be)&&(d.flags|=4)}},ej=function(c,d,g,b){g!==b&&(d.flags|=4)};function Rm(c,d){if(!Je)switch(c.tailMode){case"hidden":d=c.tail;for(var g=null;d!==null;)d.alternate!==null&&(g=d),d=d.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?d||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function va(c){var d=c.alternate!==null&&c.alternate.child===c.child,g=0,b=0;if(d)for(var A=c.child;A!==null;)g|=A.lanes|A.childLanes,b|=A.subtreeFlags&14680064,b|=A.flags&14680064,A.return=c,A=A.sibling;else for(A=c.child;A!==null;)g|=A.lanes|A.childLanes,b|=A.subtreeFlags,b|=A.flags,A.return=c,A=A.sibling;return c.subtreeFlags|=b,c.childLanes=g,d}function UL(c,d,g){var b=d.pendingProps;switch(Ie(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return va(d),null;case 1:return pa(d.type)&&Mf(),va(d),null;case 3:return b=d.stateNode,eo(),Qr(ma),Qr(Ds),Pm(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Tn(d)?d.flags|=4:c===null||c.memoizedState.isDehydrated&&(d.flags&256)===0||(d.flags|=1024,Xe!==null&&(cy(Xe),Xe=null))),Z0(c,d),va(d),null;case 5:Cm(d);var A=jo(vl.current);if(g=d.type,c!==null&&d.stateNode!=null)X5(c,d,g,b,A),c.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!b){if(d.stateNode===null)throw Error(r(166));return va(d),null}if(c=jo(Ns.current),Tn(d)){b=d.stateNode,g=d.type;var M=d.memoizedProps;switch(b[Xi]=d,b[du]=M,c=(d.mode&1)!==0,g){case"dialog":rn("cancel",b),rn("close",b);break;case"iframe":case"object":case"embed":rn("load",b);break;case"video":case"audio":for(A=0;A<ml.length;A++)rn(ml[A],b);break;case"source":rn("error",b);break;case"img":case"image":case"link":rn("error",b),rn("load",b);break;case"details":rn("toggle",b);break;case"input":te(b,M),rn("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!M.multiple},rn("invalid",b);break;case"textarea":$e(b,M),rn("invalid",b)}Pr(g,M),A=null;for(var Q in M)if(M.hasOwnProperty(Q)){var ve=M[Q];Q==="children"?typeof ve=="string"?b.textContent!==ve&&(M.suppressHydrationWarning!==!0&&Of(b.textContent,ve,c),A=["children",ve]):typeof ve=="number"&&b.textContent!==""+ve&&(M.suppressHydrationWarning!==!0&&Of(b.textContent,ve,c),A=["children",""+ve]):a.hasOwnProperty(Q)&&ve!=null&&Q==="onScroll"&&rn("scroll",b)}switch(g){case"input":Pe(b),pt(b,M,!0);break;case"textarea":Pe(b),Ge(b);break;case"select":case"option":break;default:typeof M.onClick=="function"&&(b.onclick=uu)}b=A,d.updateQueue=b,b!==null&&(d.flags|=4)}else{Q=A.nodeType===9?A:A.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=tt(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=Q.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof b.is=="string"?c=Q.createElement(g,{is:b.is}):(c=Q.createElement(g),g==="select"&&(Q=c,b.multiple?Q.multiple=!0:b.size&&(Q.size=b.size))):c=Q.createElementNS(c,g),c[Xi]=d,c[du]=b,Z5(c,d,!1,!1),d.stateNode=c;e:{switch(Q=Ue(g,b),g){case"dialog":rn("cancel",c),rn("close",c),A=b;break;case"iframe":case"object":case"embed":rn("load",c),A=b;break;case"video":case"audio":for(A=0;A<ml.length;A++)rn(ml[A],c);A=b;break;case"source":rn("error",c),A=b;break;case"img":case"image":case"link":rn("error",c),rn("load",c),A=b;break;case"details":rn("toggle",c),A=b;break;case"input":te(c,b),A=je(c,b),rn("invalid",c);break;case"option":A=b;break;case"select":c._wrapperState={wasMultiple:!!b.multiple},A=ge({},b,{value:void 0}),rn("invalid",c);break;case"textarea":$e(c,b),A=Ce(c,b),rn("invalid",c);break;default:A=b}Pr(g,A),ve=A;for(M in ve)if(ve.hasOwnProperty(M)){var Ne=ve[M];M==="style"?Yt(c,Ne):M==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,Ne!=null&&yt(c,Ne)):M==="children"?typeof Ne=="string"?(g!=="textarea"||Ne!=="")&&zt(c,Ne):typeof Ne=="number"&&zt(c,""+Ne):M!=="suppressContentEditableWarning"&&M!=="suppressHydrationWarning"&&M!=="autoFocus"&&(a.hasOwnProperty(M)?Ne!=null&&M==="onScroll"&&rn("scroll",c):Ne!=null&&k(c,M,Ne,Q))}switch(g){case"input":Pe(c),pt(c,b,!1);break;case"textarea":Pe(c),Ge(c);break;case"option":b.value!=null&&c.setAttribute("value",""+oe(b.value));break;case"select":c.multiple=!!b.multiple,M=b.value,M!=null?xe(c,!!b.multiple,M,!1):b.defaultValue!=null&&xe(c,!!b.multiple,b.defaultValue,!0);break;default:typeof A.onClick=="function"&&(c.onclick=uu)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return va(d),null;case 6:if(c&&d.stateNode!=null)ej(c,d,c.memoizedProps,b);else{if(typeof b!="string"&&d.stateNode===null)throw Error(r(166));if(g=jo(vl.current),jo(Ns.current),Tn(d)){if(b=d.stateNode,g=d.memoizedProps,b[Xi]=d,(M=b.nodeValue!==g)&&(c=ze,c!==null))switch(c.tag){case 3:Of(b.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&Of(b.nodeValue,g,(c.mode&1)!==0)}M&&(d.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[Xi]=d,d.stateNode=b}return va(d),null;case 13:if(Qr(pn),b=d.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Je&&He!==null&&(d.mode&1)!==0&&(d.flags&128)===0)gr(),Pt(),d.flags|=98560,M=!1;else if(M=Tn(d),b!==null&&b.dehydrated!==null){if(c===null){if(!M)throw Error(r(318));if(M=d.memoizedState,M=M!==null?M.dehydrated:null,!M)throw Error(r(317));M[Xi]=d}else Pt(),(d.flags&128)===0&&(d.memoizedState=null),d.flags|=4;va(d),M=!1}else Xe!==null&&(cy(Xe),Xe=null),M=!0;if(!M)return d.flags&65536?d:null}return(d.flags&128)!==0?(d.lanes=g,d):(b=b!==null,b!==(c!==null&&c.memoizedState!==null)&&b&&(d.child.flags|=8192,(d.mode&1)!==0&&(c===null||(pn.current&1)!==0?Os===0&&(Os=3):fy())),d.updateQueue!==null&&(d.flags|=4),va(d),null);case 4:return eo(),Z0(c,d),c===null&&hc(d.stateNode.containerInfo),va(d),null;case 10:return yn(d.type._context),va(d),null;case 17:return pa(d.type)&&Mf(),va(d),null;case 19:if(Qr(pn),M=d.memoizedState,M===null)return va(d),null;if(b=(d.flags&128)!==0,Q=M.rendering,Q===null)if(b)Rm(M,!1);else{if(Os!==0||c!==null&&(c.flags&128)!==0)for(c=d.child;c!==null;){if(Q=ki(c),Q!==null){for(d.flags|=128,Rm(M,!1),b=Q.updateQueue,b!==null&&(d.updateQueue=b,d.flags|=4),d.subtreeFlags=0,b=g,g=d.child;g!==null;)M=g,c=b,M.flags&=14680066,Q=M.alternate,Q===null?(M.childLanes=0,M.lanes=c,M.child=null,M.subtreeFlags=0,M.memoizedProps=null,M.memoizedState=null,M.updateQueue=null,M.dependencies=null,M.stateNode=null):(M.childLanes=Q.childLanes,M.lanes=Q.lanes,M.child=Q.child,M.subtreeFlags=0,M.deletions=null,M.memoizedProps=Q.memoizedProps,M.memoizedState=Q.memoizedState,M.updateQueue=Q.updateQueue,M.type=Q.type,c=Q.dependencies,M.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return Xr(pn,pn.current&1|2),d.child}c=c.sibling}M.tail!==null&&mn()>Qf&&(d.flags|=128,b=!0,Rm(M,!1),d.lanes=4194304)}else{if(!b)if(c=ki(Q),c!==null){if(d.flags|=128,b=!0,g=c.updateQueue,g!==null&&(d.updateQueue=g,d.flags|=4),Rm(M,!0),M.tail===null&&M.tailMode==="hidden"&&!Q.alternate&&!Je)return va(d),null}else 2*mn()-M.renderingStartTime>Qf&&g!==1073741824&&(d.flags|=128,b=!0,Rm(M,!1),d.lanes=4194304);M.isBackwards?(Q.sibling=d.child,d.child=Q):(g=M.last,g!==null?g.sibling=Q:d.child=Q,M.last=Q)}return M.tail!==null?(d=M.tail,M.rendering=d,M.tail=d.sibling,M.renderingStartTime=mn(),d.sibling=null,g=pn.current,Xr(pn,b?g&1|2:g&1),d):(va(d),null);case 22:case 23:return dy(),b=d.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(d.flags|=8192),b&&(d.mode&1)!==0?(Pi&1073741824)!==0&&(va(d),d.subtreeFlags&6&&(d.flags|=8192)):va(d),null;case 24:return null;case 25:return null}throw Error(r(156,d.tag))}function $L(c,d){switch(Ie(d),d.tag){case 1:return pa(d.type)&&Mf(),c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 3:return eo(),Qr(ma),Qr(Ds),Pm(),c=d.flags,(c&65536)!==0&&(c&128)===0?(d.flags=c&-65537|128,d):null;case 5:return Cm(d),null;case 13:if(Qr(pn),c=d.memoizedState,c!==null&&c.dehydrated!==null){if(d.alternate===null)throw Error(r(340));Pt()}return c=d.flags,c&65536?(d.flags=c&-65537|128,d):null;case 19:return Qr(pn),null;case 4:return eo(),null;case 10:return yn(d.type._context),null;case 22:case 23:return dy(),null;case 24:return null;default:return null}}var Ag=!1,xa=!1,zL=typeof WeakSet=="function"?WeakSet:Set,Tt=null;function Kf(c,d){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){Xn(c,d,b)}else g.current=null}function X0(c,d,g){try{g()}catch(b){Xn(c,d,b)}}var tj=!1;function qL(c,d){if(kd=Zc,c=Yn(),_i(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var A=b.anchorOffset,M=b.focusNode;b=b.focusOffset;try{g.nodeType,M.nodeType}catch{g=null;break e}var Q=0,ve=-1,Ne=-1,Be=0,ot=0,ct=c,it=null;t:for(;;){for(var kt;ct!==g||A!==0&&ct.nodeType!==3||(ve=Q+A),ct!==M||b!==0&&ct.nodeType!==3||(Ne=Q+b),ct.nodeType===3&&(Q+=ct.nodeValue.length),(kt=ct.firstChild)!==null;)it=ct,ct=kt;for(;;){if(ct===c)break t;if(it===g&&++Be===A&&(ve=Q),it===M&&++ot===b&&(Ne=Q),(kt=ct.nextSibling)!==null)break;ct=it,it=ct.parentNode}ct=kt}g=ve===-1||Ne===-1?null:{start:ve,end:Ne}}else g=null}g=g||{start:0,end:0}}else g=null;for(pc={focusedElem:c,selectionRange:g},Zc=!1,Tt=d;Tt!==null;)if(d=Tt,c=d.child,(d.subtreeFlags&1028)!==0&&c!==null)c.return=d,Tt=c;else for(;Tt!==null;){d=Tt;try{var It=d.alternate;if((d.flags&1024)!==0)switch(d.tag){case 0:case 11:case 15:break;case 1:if(It!==null){var Mt=It.memoizedProps,ds=It.memoizedState,De=d.stateNode,ke=De.getSnapshotBeforeUpdate(d.elementType===d.type?Mt:So(d.type,Mt),ds);De.__reactInternalSnapshotBeforeUpdate=ke}break;case 3:var Me=d.stateNode.containerInfo;Me.nodeType===1?Me.textContent="":Me.nodeType===9&&Me.documentElement&&Me.removeChild(Me.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ht){Xn(d,d.return,ht)}if(c=d.sibling,c!==null){c.return=d.return,Tt=c;break}Tt=d.return}return It=tj,tj=!1,It}function Lm(c,d,g){var b=d.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var A=b=b.next;do{if((A.tag&c)===c){var M=A.destroy;A.destroy=void 0,M!==void 0&&X0(d,g,M)}A=A.next}while(A!==b)}}function Tg(c,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var g=d=d.next;do{if((g.tag&c)===c){var b=g.create;g.destroy=b()}g=g.next}while(g!==d)}}function ey(c){var d=c.ref;if(d!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof d=="function"?d(c):d.current=c}}function rj(c){var d=c.alternate;d!==null&&(c.alternate=null,rj(d)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(d=c.stateNode,d!==null&&(delete d[Xi],delete d[du],delete d[ha],delete d[F0],delete d[B0])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function nj(c){return c.tag===5||c.tag===3||c.tag===4}function sj(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||nj(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ty(c,d,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?g.nodeType===8?g.parentNode.insertBefore(c,d):g.insertBefore(c,d):(g.nodeType===8?(d=g.parentNode,d.insertBefore(c,g)):(d=g,d.appendChild(c)),g=g._reactRootContainer,g!=null||d.onclick!==null||(d.onclick=uu));else if(b!==4&&(c=c.child,c!==null))for(ty(c,d,g),c=c.sibling;c!==null;)ty(c,d,g),c=c.sibling}function ry(c,d,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,d?g.insertBefore(c,d):g.appendChild(c);else if(b!==4&&(c=c.child,c!==null))for(ry(c,d,g),c=c.sibling;c!==null;)ry(c,d,g),c=c.sibling}var sa=null,ko=!1;function xu(c,d,g){for(g=g.child;g!==null;)aj(c,d,g),g=g.sibling}function aj(c,d,g){if(Ra&&typeof Ra.onCommitFiberUnmount=="function")try{Ra.onCommitFiberUnmount(Wl,g)}catch{}switch(g.tag){case 5:xa||Kf(g,d);case 6:var b=sa,A=ko;sa=null,xu(c,d,g),sa=b,ko=A,sa!==null&&(ko?(c=sa,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):sa.removeChild(g.stateNode));break;case 18:sa!==null&&(ko?(c=sa,g=g.stateNode,c.nodeType===8?Nm(c.parentNode,g):c.nodeType===1&&Nm(c,g),Zl(c)):Nm(sa,g.stateNode));break;case 4:b=sa,A=ko,sa=g.stateNode.containerInfo,ko=!0,xu(c,d,g),sa=b,ko=A;break;case 0:case 11:case 14:case 15:if(!xa&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){A=b=b.next;do{var M=A,Q=M.destroy;M=M.tag,Q!==void 0&&((M&2)!==0||(M&4)!==0)&&X0(g,d,Q),A=A.next}while(A!==b)}xu(c,d,g);break;case 1:if(!xa&&(Kf(g,d),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(ve){Xn(g,d,ve)}xu(c,d,g);break;case 21:xu(c,d,g);break;case 22:g.mode&1?(xa=(b=xa)||g.memoizedState!==null,xu(c,d,g),xa=b):xu(c,d,g);break;default:xu(c,d,g)}}function ij(c){var d=c.updateQueue;if(d!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new zL),d.forEach(function(b){var A=ZL.bind(null,c,b);g.has(b)||(g.add(b),b.then(A,A))})}}function Co(c,d){var g=d.deletions;if(g!==null)for(var b=0;b<g.length;b++){var A=g[b];try{var M=c,Q=d,ve=Q;e:for(;ve!==null;){switch(ve.tag){case 5:sa=ve.stateNode,ko=!1;break e;case 3:sa=ve.stateNode.containerInfo,ko=!0;break e;case 4:sa=ve.stateNode.containerInfo,ko=!0;break e}ve=ve.return}if(sa===null)throw Error(r(160));aj(M,Q,A),sa=null,ko=!1;var Ne=A.alternate;Ne!==null&&(Ne.return=null),A.return=null}catch(Be){Xn(A,d,Be)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)oj(d,c),d=d.sibling}function oj(c,d){var g=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(Co(d,c),yl(c),b&4){try{Lm(3,c,c.return),Tg(3,c)}catch(Mt){Xn(c,c.return,Mt)}try{Lm(5,c,c.return)}catch(Mt){Xn(c,c.return,Mt)}}break;case 1:Co(d,c),yl(c),b&512&&g!==null&&Kf(g,g.return);break;case 5:if(Co(d,c),yl(c),b&512&&g!==null&&Kf(g,g.return),c.flags&32){var A=c.stateNode;try{zt(A,"")}catch(Mt){Xn(c,c.return,Mt)}}if(b&4&&(A=c.stateNode,A!=null)){var M=c.memoizedProps,Q=g!==null?g.memoizedProps:M,ve=c.type,Ne=c.updateQueue;if(c.updateQueue=null,Ne!==null)try{ve==="input"&&M.type==="radio"&&M.name!=null&&Ze(A,M),Ue(ve,Q);var Be=Ue(ve,M);for(Q=0;Q<Ne.length;Q+=2){var ot=Ne[Q],ct=Ne[Q+1];ot==="style"?Yt(A,ct):ot==="dangerouslySetInnerHTML"?yt(A,ct):ot==="children"?zt(A,ct):k(A,ot,ct,Be)}switch(ve){case"input":Nt(A,M);break;case"textarea":et(A,M);break;case"select":var it=A._wrapperState.wasMultiple;A._wrapperState.wasMultiple=!!M.multiple;var kt=M.value;kt!=null?xe(A,!!M.multiple,kt,!1):it!==!!M.multiple&&(M.defaultValue!=null?xe(A,!!M.multiple,M.defaultValue,!0):xe(A,!!M.multiple,M.multiple?[]:"",!1))}A[du]=M}catch(Mt){Xn(c,c.return,Mt)}}break;case 6:if(Co(d,c),yl(c),b&4){if(c.stateNode===null)throw Error(r(162));A=c.stateNode,M=c.memoizedProps;try{A.nodeValue=M}catch(Mt){Xn(c,c.return,Mt)}}break;case 3:if(Co(d,c),yl(c),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Zl(d.containerInfo)}catch(Mt){Xn(c,c.return,Mt)}break;case 4:Co(d,c),yl(c);break;case 13:Co(d,c),yl(c),A=c.child,A.flags&8192&&(M=A.memoizedState!==null,A.stateNode.isHidden=M,!M||A.alternate!==null&&A.alternate.memoizedState!==null||(ay=mn())),b&4&&ij(c);break;case 22:if(ot=g!==null&&g.memoizedState!==null,c.mode&1?(xa=(Be=xa)||ot,Co(d,c),xa=Be):Co(d,c),yl(c),b&8192){if(Be=c.memoizedState!==null,(c.stateNode.isHidden=Be)&&!ot&&(c.mode&1)!==0)for(Tt=c,ot=c.child;ot!==null;){for(ct=Tt=ot;Tt!==null;){switch(it=Tt,kt=it.child,it.tag){case 0:case 11:case 14:case 15:Lm(4,it,it.return);break;case 1:Kf(it,it.return);var It=it.stateNode;if(typeof It.componentWillUnmount=="function"){b=it,g=it.return;try{d=b,It.props=d.memoizedProps,It.state=d.memoizedState,It.componentWillUnmount()}catch(Mt){Xn(b,g,Mt)}}break;case 5:Kf(it,it.return);break;case 22:if(it.memoizedState!==null){uj(ct);continue}}kt!==null?(kt.return=it,Tt=kt):uj(ct)}ot=ot.sibling}e:for(ot=null,ct=c;;){if(ct.tag===5){if(ot===null){ot=ct;try{A=ct.stateNode,Be?(M=A.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none"):(ve=ct.stateNode,Ne=ct.memoizedProps.style,Q=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null,ve.style.display=dr("display",Q))}catch(Mt){Xn(c,c.return,Mt)}}}else if(ct.tag===6){if(ot===null)try{ct.stateNode.nodeValue=Be?"":ct.memoizedProps}catch(Mt){Xn(c,c.return,Mt)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===c)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===c)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===c)break e;ot===ct&&(ot=null),ct=ct.return}ot===ct&&(ot=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:Co(d,c),yl(c),b&4&&ij(c);break;case 21:break;default:Co(d,c),yl(c)}}function yl(c){var d=c.flags;if(d&2){try{e:{for(var g=c.return;g!==null;){if(nj(g)){var b=g;break e}g=g.return}throw Error(r(160))}switch(b.tag){case 5:var A=b.stateNode;b.flags&32&&(zt(A,""),b.flags&=-33);var M=sj(c);ry(c,M,A);break;case 3:case 4:var Q=b.stateNode.containerInfo,ve=sj(c);ty(c,ve,Q);break;default:throw Error(r(161))}}catch(Ne){Xn(c,c.return,Ne)}c.flags&=-3}d&4096&&(c.flags&=-4097)}function VL(c,d,g){Tt=c,lj(c)}function lj(c,d,g){for(var b=(c.mode&1)!==0;Tt!==null;){var A=Tt,M=A.child;if(A.tag===22&&b){var Q=A.memoizedState!==null||Ag;if(!Q){var ve=A.alternate,Ne=ve!==null&&ve.memoizedState!==null||xa;ve=Ag;var Be=xa;if(Ag=Q,(xa=Ne)&&!Be)for(Tt=A;Tt!==null;)Q=Tt,Ne=Q.child,Q.tag===22&&Q.memoizedState!==null?dj(A):Ne!==null?(Ne.return=Q,Tt=Ne):dj(A);for(;M!==null;)Tt=M,lj(M),M=M.sibling;Tt=A,Ag=ve,xa=Be}cj(c)}else(A.subtreeFlags&8772)!==0&&M!==null?(M.return=A,Tt=M):cj(c)}}function cj(c){for(;Tt!==null;){var d=Tt;if((d.flags&8772)!==0){var g=d.alternate;try{if((d.flags&8772)!==0)switch(d.tag){case 0:case 11:case 15:xa||Tg(5,d);break;case 1:var b=d.stateNode;if(d.flags&4&&!xa)if(g===null)b.componentDidMount();else{var A=d.elementType===d.type?g.memoizedProps:So(d.type,g.memoizedProps);b.componentDidUpdate(A,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var M=d.updateQueue;M!==null&&si(d,M,b);break;case 3:var Q=d.updateQueue;if(Q!==null){if(g=null,d.child!==null)switch(d.child.tag){case 5:g=d.child.stateNode;break;case 1:g=d.child.stateNode}si(d,Q,g)}break;case 5:var ve=d.stateNode;if(g===null&&d.flags&4){g=ve;var Ne=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Ne.autoFocus&&g.focus();break;case"img":Ne.src&&(g.src=Ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var Be=d.alternate;if(Be!==null){var ot=Be.memoizedState;if(ot!==null){var ct=ot.dehydrated;ct!==null&&Zl(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}xa||d.flags&512&&ey(d)}catch(it){Xn(d,d.return,it)}}if(d===c){Tt=null;break}if(g=d.sibling,g!==null){g.return=d.return,Tt=g;break}Tt=d.return}}function uj(c){for(;Tt!==null;){var d=Tt;if(d===c){Tt=null;break}var g=d.sibling;if(g!==null){g.return=d.return,Tt=g;break}Tt=d.return}}function dj(c){for(;Tt!==null;){var d=Tt;try{switch(d.tag){case 0:case 11:case 15:var g=d.return;try{Tg(4,d)}catch(Ne){Xn(d,g,Ne)}break;case 1:var b=d.stateNode;if(typeof b.componentDidMount=="function"){var A=d.return;try{b.componentDidMount()}catch(Ne){Xn(d,A,Ne)}}var M=d.return;try{ey(d)}catch(Ne){Xn(d,M,Ne)}break;case 5:var Q=d.return;try{ey(d)}catch(Ne){Xn(d,Q,Ne)}}}catch(Ne){Xn(d,d.return,Ne)}if(d===c){Tt=null;break}var ve=d.sibling;if(ve!==null){ve.return=d.return,Tt=ve;break}Tt=d.return}}var WL=Math.ceil,Rg=E.ReactCurrentDispatcher,ny=E.ReactCurrentOwner,no=E.ReactCurrentBatchConfig,Wr=0,Ys=null,Ss=null,aa=0,Pi=0,Yf=Ni(0),Os=0,Dm=null,Rd=0,Lg=0,sy=0,Im=null,ii=null,ay=0,Qf=1/0,bc=null,Dg=!1,iy=null,yu=null,Ig=!1,wu=null,Og=0,Om=0,oy=null,Mg=-1,Fg=0;function $a(){return(Wr&6)!==0?mn():Mg!==-1?Mg:Mg=mn()}function bu(c){return(c.mode&1)===0?1:(Wr&2)!==0&&aa!==0?aa&-aa:Mn.transition!==null?(Fg===0&&(Fg=cd()),Fg):(c=$r,c!==0||(c=window.event,c=c===void 0?16:ec(c.type)),c)}function Eo(c,d,g,b){if(50<Om)throw Om=0,oy=null,Error(r(185));Kl(c,g,b),((Wr&2)===0||c!==Ys)&&(c===Ys&&((Wr&2)===0&&(Lg|=g),Os===4&&ju(c,aa)),oi(c,b),g===1&&Wr===0&&(d.mode&1)===0&&(Qf=mn()+500,Ed&&$()))}function oi(c,d){var g=c.callbackNode;os(c,d);var b=Gl(c,c===Ys?aa:0);if(b===0)g!==null&&Vl(g),c.callbackNode=null,c.callbackPriority=0;else if(d=b&-b,c.callbackPriority!==d){if(g!=null&&Vl(g),d===1)c.tag===0?R(hj.bind(null,c)):S(hj.bind(null,c)),O0(function(){(Wr&6)===0&&$()}),g=null;else{switch(Yl(b)){case 1:g=Wc;break;case 4:g=Ta;break;case 16:g=nl;break;case 536870912:g=Hc;break;default:g=nl}g=bj(g,fj.bind(null,c))}c.callbackPriority=d,c.callbackNode=g}}function fj(c,d){if(Mg=-1,Fg=0,(Wr&6)!==0)throw Error(r(327));var g=c.callbackNode;if(Jf()&&c.callbackNode!==g)return null;var b=Gl(c,c===Ys?aa:0);if(b===0)return null;if((b&30)!==0||(b&c.expiredLanes)!==0||d)d=Bg(c,b);else{d=b;var A=Wr;Wr|=2;var M=pj();(Ys!==c||aa!==d)&&(bc=null,Qf=mn()+500,Dd(c,d));do try{KL();break}catch(ve){mj(c,ve)}while(!0);qr(),Rg.current=M,Wr=A,Ss!==null?d=0:(Ys=null,aa=0,d=Os)}if(d!==0){if(d===2&&(A=xi(c),A!==0&&(b=A,d=ly(c,A))),d===1)throw g=Dm,Dd(c,0),ju(c,b),oi(c,mn()),g;if(d===6)ju(c,b);else{if(A=c.current.alternate,(b&30)===0&&!HL(A)&&(d=Bg(c,b),d===2&&(M=xi(c),M!==0&&(b=M,d=ly(c,M))),d===1))throw g=Dm,Dd(c,0),ju(c,b),oi(c,mn()),g;switch(c.finishedWork=A,c.finishedLanes=b,d){case 0:case 1:throw Error(r(345));case 2:Id(c,ii,bc);break;case 3:if(ju(c,b),(b&130023424)===b&&(d=ay+500-mn(),10<d)){if(Gl(c,0)!==0)break;if(A=c.suspendedLanes,(A&b)!==b){$a(),c.pingedLanes|=c.suspendedLanes&A;break}c.timeoutHandle=_m(Id.bind(null,c,ii,bc),d);break}Id(c,ii,bc);break;case 4:if(ju(c,b),(b&4194240)===b)break;for(d=c.eventTimes,A=-1;0<b;){var Q=31-Hn(b);M=1<<Q,Q=d[Q],Q>A&&(A=Q),b&=~M}if(b=A,b=mn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*WL(b/1960))-b,10<b){c.timeoutHandle=_m(Id.bind(null,c,ii,bc),b);break}Id(c,ii,bc);break;case 5:Id(c,ii,bc);break;default:throw Error(r(329))}}}return oi(c,mn()),c.callbackNode===g?fj.bind(null,c):null}function ly(c,d){var g=Im;return c.current.memoizedState.isDehydrated&&(Dd(c,d).flags|=256),c=Bg(c,d),c!==2&&(d=ii,ii=g,d!==null&&cy(d)),c}function cy(c){ii===null?ii=c:ii.push.apply(ii,c)}function HL(c){for(var d=c;;){if(d.flags&16384){var g=d.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var A=g[b],M=A.getSnapshot;A=A.value;try{if(!Pn(M(),A))return!1}catch{return!1}}}if(g=d.child,d.subtreeFlags&16384&&g!==null)g.return=d,d=g;else{if(d===c)break;for(;d.sibling===null;){if(d.return===null||d.return===c)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ju(c,d){for(d&=~sy,d&=~Lg,c.suspendedLanes|=d,c.pingedLanes&=~d,c=c.expirationTimes;0<d;){var g=31-Hn(d),b=1<<g;c[g]=-1,d&=~b}}function hj(c){if((Wr&6)!==0)throw Error(r(327));Jf();var d=Gl(c,0);if((d&1)===0)return oi(c,mn()),null;var g=Bg(c,d);if(c.tag!==0&&g===2){var b=xi(c);b!==0&&(d=b,g=ly(c,b))}if(g===1)throw g=Dm,Dd(c,0),ju(c,d),oi(c,mn()),g;if(g===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=d,Id(c,ii,bc),oi(c,mn()),null}function uy(c,d){var g=Wr;Wr|=1;try{return c(d)}finally{Wr=g,Wr===0&&(Qf=mn()+500,Ed&&$())}}function Ld(c){wu!==null&&wu.tag===0&&(Wr&6)===0&&Jf();var d=Wr;Wr|=1;var g=no.transition,b=$r;try{if(no.transition=null,$r=1,c)return c()}finally{$r=b,no.transition=g,Wr=d,(Wr&6)===0&&$()}}function dy(){Pi=Yf.current,Qr(Yf)}function Dd(c,d){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,vg(g)),Ss!==null)for(g=Ss.return;g!==null;){var b=g;switch(Ie(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Mf();break;case 3:eo(),Qr(ma),Qr(Ds),Pm();break;case 5:Cm(b);break;case 4:eo();break;case 13:Qr(pn);break;case 19:Qr(pn);break;case 10:yn(b.type._context);break;case 22:case 23:dy()}g=g.return}if(Ys=c,Ss=c=_u(c.current,null),aa=Pi=d,Os=0,Dm=null,sy=Lg=Rd=0,ii=Im=null,nn!==null){for(d=0;d<nn.length;d++)if(g=nn[d],b=g.interleaved,b!==null){g.interleaved=null;var A=b.next,M=g.pending;if(M!==null){var Q=M.next;M.next=A,b.next=Q}g.pending=b}nn=null}return c}function mj(c,d){do{var g=Ss;try{if(qr(),Ff.current=kg,pu){for(var b=wn.memoizedState;b!==null;){var A=b.queue;A!==null&&(A.pending=null),b=b.next}pu=!1}if(to=0,$n=Zn=wn=null,_o=!1,gu=0,ny.current=null,g===null||g.return===null){Os=1,Dm=d,Ss=null;break}e:{var M=c,Q=g.return,ve=g,Ne=d;if(d=aa,ve.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var Be=Ne,ot=ve,ct=ot.tag;if((ot.mode&1)===0&&(ct===0||ct===11||ct===15)){var it=ot.alternate;it?(ot.updateQueue=it.updateQueue,ot.memoizedState=it.memoizedState,ot.lanes=it.lanes):(ot.updateQueue=null,ot.memoizedState=null)}var kt=B5(Q);if(kt!==null){kt.flags&=-257,U5(kt,Q,ve,M,d),kt.mode&1&&F5(M,Be,d),d=kt,Ne=Be;var It=d.updateQueue;if(It===null){var Mt=new Set;Mt.add(Ne),d.updateQueue=Mt}else It.add(Ne);break e}else{if((d&1)===0){F5(M,Be,d),fy();break e}Ne=Error(r(426))}}else if(Je&&ve.mode&1){var ds=B5(Q);if(ds!==null){(ds.flags&65536)===0&&(ds.flags|=256),U5(ds,Q,ve,M,d),xt(Gf(Ne,ve));break e}}M=Ne=Gf(Ne,ve),Os!==4&&(Os=2),Im===null?Im=[M]:Im.push(M),M=Q;do{switch(M.tag){case 3:M.flags|=65536,d&=-d,M.lanes|=d;var De=O5(M,Ne,d);an(M,De);break e;case 1:ve=Ne;var ke=M.type,Me=M.stateNode;if((M.flags&128)===0&&(typeof ke.getDerivedStateFromError=="function"||Me!==null&&typeof Me.componentDidCatch=="function"&&(yu===null||!yu.has(Me)))){M.flags|=65536,d&=-d,M.lanes|=d;var ht=M5(M,ve,d);an(M,ht);break e}}M=M.return}while(M!==null)}vj(g)}catch(qt){d=qt,Ss===g&&g!==null&&(Ss=g=g.return);continue}break}while(!0)}function pj(){var c=Rg.current;return Rg.current=kg,c===null?kg:c}function fy(){(Os===0||Os===3||Os===2)&&(Os=4),Ys===null||(Rd&268435455)===0&&(Lg&268435455)===0||ju(Ys,aa)}function Bg(c,d){var g=Wr;Wr|=2;var b=pj();(Ys!==c||aa!==d)&&(bc=null,Dd(c,d));do try{GL();break}catch(A){mj(c,A)}while(!0);if(qr(),Wr=g,Rg.current=b,Ss!==null)throw Error(r(261));return Ys=null,aa=0,Os}function GL(){for(;Ss!==null;)gj(Ss)}function KL(){for(;Ss!==null&&!Vc();)gj(Ss)}function gj(c){var d=wj(c.alternate,c,Pi);c.memoizedProps=c.pendingProps,d===null?vj(c):Ss=d,ny.current=null}function vj(c){var d=c;do{var g=d.alternate;if(c=d.return,(d.flags&32768)===0){if(g=UL(g,d,Pi),g!==null){Ss=g;return}}else{if(g=$L(g,d),g!==null){g.flags&=32767,Ss=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{Os=6,Ss=null;return}}if(d=d.sibling,d!==null){Ss=d;return}Ss=d=c}while(d!==null);Os===0&&(Os=5)}function Id(c,d,g){var b=$r,A=no.transition;try{no.transition=null,$r=1,YL(c,d,g,b)}finally{no.transition=A,$r=b}return null}function YL(c,d,g,b){do Jf();while(wu!==null);if((Wr&6)!==0)throw Error(r(327));g=c.finishedWork;var A=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var M=g.lanes|g.childLanes;if(Vi(c,M),c===Ys&&(Ss=Ys=null,aa=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||Ig||(Ig=!0,bj(nl,function(){return Jf(),null})),M=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||M){M=no.transition,no.transition=null;var Q=$r;$r=1;var ve=Wr;Wr|=4,ny.current=null,qL(c,g),oj(g,c),xd(pc),Zc=!!kd,pc=kd=null,c.current=g,VL(g),dm(),Wr=ve,$r=Q,no.transition=M}else c.current=g;if(Ig&&(Ig=!1,wu=c,Og=A),M=c.pendingLanes,M===0&&(yu=null),Sf(g.stateNode),oi(c,mn()),d!==null)for(b=c.onRecoverableError,g=0;g<d.length;g++)A=d[g],b(A.value,{componentStack:A.stack,digest:A.digest});if(Dg)throw Dg=!1,c=iy,iy=null,c;return(Og&1)!==0&&c.tag!==0&&Jf(),M=c.pendingLanes,(M&1)!==0?c===oy?Om++:(Om=0,oy=c):Om=0,$(),null}function Jf(){if(wu!==null){var c=Yl(Og),d=no.transition,g=$r;try{if(no.transition=null,$r=16>c?16:c,wu===null)var b=!1;else{if(c=wu,wu=null,Og=0,(Wr&6)!==0)throw Error(r(331));var A=Wr;for(Wr|=4,Tt=c.current;Tt!==null;){var M=Tt,Q=M.child;if((Tt.flags&16)!==0){var ve=M.deletions;if(ve!==null){for(var Ne=0;Ne<ve.length;Ne++){var Be=ve[Ne];for(Tt=Be;Tt!==null;){var ot=Tt;switch(ot.tag){case 0:case 11:case 15:Lm(8,ot,M)}var ct=ot.child;if(ct!==null)ct.return=ot,Tt=ct;else for(;Tt!==null;){ot=Tt;var it=ot.sibling,kt=ot.return;if(rj(ot),ot===Be){Tt=null;break}if(it!==null){it.return=kt,Tt=it;break}Tt=kt}}}var It=M.alternate;if(It!==null){var Mt=It.child;if(Mt!==null){It.child=null;do{var ds=Mt.sibling;Mt.sibling=null,Mt=ds}while(Mt!==null)}}Tt=M}}if((M.subtreeFlags&2064)!==0&&Q!==null)Q.return=M,Tt=Q;else e:for(;Tt!==null;){if(M=Tt,(M.flags&2048)!==0)switch(M.tag){case 0:case 11:case 15:Lm(9,M,M.return)}var De=M.sibling;if(De!==null){De.return=M.return,Tt=De;break e}Tt=M.return}}var ke=c.current;for(Tt=ke;Tt!==null;){Q=Tt;var Me=Q.child;if((Q.subtreeFlags&2064)!==0&&Me!==null)Me.return=Q,Tt=Me;else e:for(Q=ke;Tt!==null;){if(ve=Tt,(ve.flags&2048)!==0)try{switch(ve.tag){case 0:case 11:case 15:Tg(9,ve)}}catch(qt){Xn(ve,ve.return,qt)}if(ve===Q){Tt=null;break e}var ht=ve.sibling;if(ht!==null){ht.return=ve.return,Tt=ht;break e}Tt=ve.return}}if(Wr=A,$(),Ra&&typeof Ra.onPostCommitFiberRoot=="function")try{Ra.onPostCommitFiberRoot(Wl,c)}catch{}b=!0}return b}finally{$r=g,no.transition=d}}return!1}function xj(c,d,g){d=Gf(g,d),d=O5(c,d,1),c=Bn(c,d,1),d=$a(),c!==null&&(Kl(c,1,d),oi(c,d))}function Xn(c,d,g){if(c.tag===3)xj(c,c,g);else for(;d!==null;){if(d.tag===3){xj(d,c,g);break}else if(d.tag===1){var b=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(yu===null||!yu.has(b))){c=Gf(g,c),c=M5(d,c,1),d=Bn(d,c,1),c=$a(),d!==null&&(Kl(d,1,c),oi(d,c));break}}d=d.return}}function QL(c,d,g){var b=c.pingCache;b!==null&&b.delete(d),d=$a(),c.pingedLanes|=c.suspendedLanes&g,Ys===c&&(aa&g)===g&&(Os===4||Os===3&&(aa&130023424)===aa&&500>mn()-ay?Dd(c,0):sy|=g),oi(c,d)}function yj(c,d){d===0&&((c.mode&1)===0?d=1:(d=La,La<<=1,(La&130023424)===0&&(La=4194304)));var g=$a();c=sn(c,d),c!==null&&(Kl(c,d,g),oi(c,g))}function JL(c){var d=c.memoizedState,g=0;d!==null&&(g=d.retryLane),yj(c,g)}function ZL(c,d){var g=0;switch(c.tag){case 13:var b=c.stateNode,A=c.memoizedState;A!==null&&(g=A.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(r(314))}b!==null&&b.delete(d),yj(c,g)}var wj;wj=function(c,d,g){if(c!==null)if(c.memoizedProps!==d.pendingProps||ma.current)ai=!0;else{if((c.lanes&g)===0&&(d.flags&128)===0)return ai=!1,BL(c,d,g);ai=(c.flags&131072)!==0}else ai=!1,Je&&(d.flags&1048576)!==0&&Re(d,ae,d.index);switch(d.lanes=0,d.tag){case 2:var b=d.type;Pg(c,d),c=d.pendingProps;var A=hu(d,Ds.current);Rn(d,g),A=Pd(null,d,b,c,A,g);var M=ro();return d.flags|=1,typeof A=="object"&&A!==null&&typeof A.render=="function"&&A.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,pa(b)?(M=!0,xc(d)):M=!1,d.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,Is(d),A.updater=Cg,d.stateNode=A,A._reactInternals=d,q0(d,b,c,g),d=G0(null,d,b,!0,M,g)):(d.tag=0,Je&&M&&Ke(d),Ua(null,d,A,g),d=d.child),d;case 16:b=d.elementType;e:{switch(Pg(c,d),c=d.pendingProps,A=b._init,b=A(b._payload),d.type=b,A=d.tag=e8(b),c=So(b,c),A){case 0:d=H0(null,d,b,c,g);break e;case 1:d=H5(null,d,b,c,g);break e;case 11:d=$5(null,d,b,c,g);break e;case 14:d=z5(null,d,b,So(b.type,c),g);break e}throw Error(r(306,b,""))}return d;case 0:return b=d.type,A=d.pendingProps,A=d.elementType===b?A:So(b,A),H0(c,d,b,A,g);case 1:return b=d.type,A=d.pendingProps,A=d.elementType===b?A:So(b,A),H5(c,d,b,A,g);case 3:e:{if(G5(d),c===null)throw Error(r(387));b=d.pendingProps,M=d.memoizedState,A=M.element,ga(c,d),Ks(d,b,null,g);var Q=d.memoizedState;if(b=Q.element,M.isDehydrated)if(M={element:b,isDehydrated:!1,cache:Q.cache,pendingSuspenseBoundaries:Q.pendingSuspenseBoundaries,transitions:Q.transitions},d.updateQueue.baseState=M,d.memoizedState=M,d.flags&256){A=Gf(Error(r(423)),d),d=K5(c,d,b,g,A);break e}else if(b!==A){A=Gf(Error(r(424)),d),d=K5(c,d,b,g,A);break e}else for(He=na(d.stateNode.containerInfo.firstChild),ze=d,Je=!0,Xe=null,g=kn(d,null,b,g),d.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Pt(),b===A){d=wc(c,d,g);break e}Ua(c,d,b,g)}d=d.child}return d;case 5:return bg(d),c===null&&Dt(d),b=d.type,A=d.pendingProps,M=c!==null?c.memoizedProps:null,Q=A.children,jm(b,A)?Q=null:M!==null&&jm(b,M)&&(d.flags|=32),W5(c,d),Ua(c,d,Q,g),d.child;case 6:return c===null&&Dt(d),null;case 13:return Y5(c,d,g);case 4:return mu(d,d.stateNode.containerInfo),b=d.pendingProps,c===null?d.child=Qn(d,null,b,g):Ua(c,d,b,g),d.child;case 11:return b=d.type,A=d.pendingProps,A=d.elementType===b?A:So(b,A),$5(c,d,b,A,g);case 7:return Ua(c,d,d.pendingProps,g),d.child;case 8:return Ua(c,d,d.pendingProps.children,g),d.child;case 12:return Ua(c,d,d.pendingProps.children,g),d.child;case 10:e:{if(b=d.type._context,A=d.pendingProps,M=d.memoizedProps,Q=A.value,Xr(cs,b._currentValue),b._currentValue=Q,M!==null)if(Pn(M.value,Q)){if(M.children===A.children&&!ma.current){d=wc(c,d,g);break e}}else for(M=d.child,M!==null&&(M.return=d);M!==null;){var ve=M.dependencies;if(ve!==null){Q=M.child;for(var Ne=ve.firstContext;Ne!==null;){if(Ne.context===b){if(M.tag===1){Ne=Fn(-1,g&-g),Ne.tag=2;var Be=M.updateQueue;if(Be!==null){Be=Be.shared;var ot=Be.pending;ot===null?Ne.next=Ne:(Ne.next=ot.next,ot.next=Ne),Be.pending=Ne}}M.lanes|=g,Ne=M.alternate,Ne!==null&&(Ne.lanes|=g),Vr(M.return,g,d),ve.lanes|=g;break}Ne=Ne.next}}else if(M.tag===10)Q=M.type===d.type?null:M.child;else if(M.tag===18){if(Q=M.return,Q===null)throw Error(r(341));Q.lanes|=g,ve=Q.alternate,ve!==null&&(ve.lanes|=g),Vr(Q,g,d),Q=M.sibling}else Q=M.child;if(Q!==null)Q.return=M;else for(Q=M;Q!==null;){if(Q===d){Q=null;break}if(M=Q.sibling,M!==null){M.return=Q.return,Q=M;break}Q=Q.return}M=Q}Ua(c,d,A.children,g),d=d.child}return d;case 9:return A=d.type,b=d.pendingProps.children,Rn(d,g),A=Ln(A),b=b(A),d.flags|=1,Ua(c,d,b,g),d.child;case 14:return b=d.type,A=So(b,d.pendingProps),A=So(b.type,A),z5(c,d,b,A,g);case 15:return q5(c,d,d.type,d.pendingProps,g);case 17:return b=d.type,A=d.pendingProps,A=d.elementType===b?A:So(b,A),Pg(c,d),d.tag=1,pa(b)?(c=!0,xc(d)):c=!1,Rn(d,g),D5(d,b,A),q0(d,b,A,g),G0(null,d,b,!0,c,g);case 19:return J5(c,d,g);case 22:return V5(c,d,g)}throw Error(r(156,d.tag))};function bj(c,d){return ql(c,d)}function XL(c,d,g,b){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function so(c,d,g,b){return new XL(c,d,g,b)}function hy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function e8(c){if(typeof c=="function")return hy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===B)return 11;if(c===de)return 14}return 2}function _u(c,d){var g=c.alternate;return g===null?(g=so(c.tag,d,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=d,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,d=c.dependencies,g.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function Ug(c,d,g,b,A,M){var Q=2;if(b=c,typeof c=="function")hy(c)&&(Q=1);else if(typeof c=="string")Q=5;else e:switch(c){case O:return Od(g.children,A,M,d);case F:Q=8,A|=8;break;case T:return c=so(12,g,d,A|2),c.elementType=T,c.lanes=M,c;case K:return c=so(13,g,d,A),c.elementType=K,c.lanes=M,c;case V:return c=so(19,g,d,A),c.elementType=V,c.lanes=M,c;case Y:return $g(g,A,M,d);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case z:Q=10;break e;case U:Q=9;break e;case B:Q=11;break e;case de:Q=14;break e;case se:Q=16,b=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return d=so(Q,g,d,A),d.elementType=c,d.type=b,d.lanes=M,d}function Od(c,d,g,b){return c=so(7,c,b,d),c.lanes=g,c}function $g(c,d,g,b){return c=so(22,c,b,d),c.elementType=Y,c.lanes=g,c.stateNode={isHidden:!1},c}function my(c,d,g){return c=so(6,c,null,d),c.lanes=g,c}function py(c,d,g){return d=so(4,c.children!==null?c.children:[],c.key,d),d.lanes=g,d.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},d}function t8(c,d,g,b,A){this.tag=d,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ud(0),this.expirationTimes=ud(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ud(0),this.identifierPrefix=b,this.onRecoverableError=A,this.mutableSourceEagerHydrationData=null}function gy(c,d,g,b,A,M,Q,ve,Ne){return c=new t8(c,d,g,ve,Ne),d===1?(d=1,M===!0&&(d|=8)):d=0,M=so(3,null,null,d),c.current=M,M.stateNode=c,M.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(M),c}function r8(c,d,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:b==null?null:""+b,children:c,containerInfo:d,implementation:g}}function jj(c){if(!c)return gl;c=c._reactInternals;e:{if(Ts(c)!==c||c.tag!==1)throw Error(r(170));var d=c;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(pa(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(r(171))}if(c.tag===1){var g=c.type;if(pa(g))return km(c,g,d)}return d}function _j(c,d,g,b,A,M,Q,ve,Ne){return c=gy(g,b,!0,c,A,M,Q,ve,Ne),c.context=jj(null),g=c.current,b=$a(),A=bu(g),M=Fn(b,A),M.callback=d??null,Bn(g,M,A),c.current.lanes=A,Kl(c,A,b),oi(c,b),c}function zg(c,d,g,b){var A=d.current,M=$a(),Q=bu(A);return g=jj(g),d.context===null?d.context=g:d.pendingContext=g,d=Fn(M,Q),d.payload={element:c},b=b===void 0?null:b,b!==null&&(d.callback=b),c=Bn(A,d,Q),c!==null&&(Eo(c,A,Q,M),Gs(c,A,Q)),Q}function qg(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function Nj(c,d){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<d?g:d}}function vy(c,d){Nj(c,d),(c=c.alternate)&&Nj(c,d)}function n8(){return null}var Sj=typeof reportError=="function"?reportError:function(c){console.error(c)};function xy(c){this._internalRoot=c}Vg.prototype.render=xy.prototype.render=function(c){var d=this._internalRoot;if(d===null)throw Error(r(409));zg(c,d,null,null)},Vg.prototype.unmount=xy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var d=c.containerInfo;Ld(function(){zg(null,c,null,null)}),d[Ws]=null}};function Vg(c){this._internalRoot=c}Vg.prototype.unstable_scheduleHydration=function(c){if(c){var d=Cf();c={blockedOn:null,target:c,priority:d};for(var g=0;g<Hi.length&&d!==0&&d<Hi[g].priority;g++);Hi.splice(g,0,c),g===0&&Pf(c)}};function yy(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Wg(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function kj(){}function s8(c,d,g,b,A){if(A){if(typeof b=="function"){var M=b;b=function(){var Be=qg(Q);M.call(Be)}}var Q=_j(d,b,c,0,null,!1,!1,"",kj);return c._reactRootContainer=Q,c[Ws]=Q.current,hc(c.nodeType===8?c.parentNode:c),Ld(),Q}for(;A=c.lastChild;)c.removeChild(A);if(typeof b=="function"){var ve=b;b=function(){var Be=qg(Ne);ve.call(Be)}}var Ne=gy(c,0,!1,null,null,!1,!1,"",kj);return c._reactRootContainer=Ne,c[Ws]=Ne.current,hc(c.nodeType===8?c.parentNode:c),Ld(function(){zg(d,Ne,g,b)}),Ne}function Hg(c,d,g,b,A){var M=g._reactRootContainer;if(M){var Q=M;if(typeof A=="function"){var ve=A;A=function(){var Ne=qg(Q);ve.call(Ne)}}zg(d,Q,c,A)}else Q=s8(g,d,c,A,b);return qg(Q)}sl=function(c){switch(c.tag){case 3:var d=c.stateNode;if(d.current.memoizedState.isDehydrated){var g=qi(d.pendingLanes);g!==0&&(Kc(d,g|1),oi(d,mn()),(Wr&6)===0&&(Qf=mn()+500,$()))}break;case 13:Ld(function(){var b=sn(c,1);if(b!==null){var A=$a();Eo(b,c,1,A)}}),vy(c,1)}},dd=function(c){if(c.tag===13){var d=sn(c,134217728);if(d!==null){var g=$a();Eo(d,c,134217728,g)}vy(c,134217728)}},kf=function(c){if(c.tag===13){var d=bu(c),g=sn(c,d);if(g!==null){var b=$a();Eo(g,c,d,b)}vy(c,d)}},Cf=function(){return $r},Yc=function(c,d){var g=$r;try{return $r=c,d()}finally{$r=g}},Xt=function(c,d,g){switch(d){case"input":if(Nt(c,g),d=g.name,g.type==="radio"&&d!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<g.length;d++){var b=g[d];if(b!==c&&b.form===c.form){var A=Cd(b);if(!A)throw Error(r(90));We(b),Nt(b,A)}}}break;case"textarea":et(c,g);break;case"select":d=g.value,d!=null&&xe(c,!!g.multiple,d,!1)}},ir=uy,Ar=Ld;var a8={usingClientEntryPoint:!1,Events:[fu,gc,Cd,Ir,Kt,uy]},Mm={findFiberByHostInstance:pl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i8={bundleType:Mm.bundleType,version:Mm.version,rendererPackageName:Mm.rendererPackageName,rendererConfig:Mm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:E.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=vi(c),c===null?null:c.stateNode},findFiberByHostInstance:Mm.findFiberByHostInstance||n8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gg.isDisabled&&Gg.supportsFiber)try{Wl=Gg.inject(i8),Ra=Gg}catch{}}return li.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=a8,li.createPortal=function(c,d){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yy(d))throw Error(r(200));return r8(c,d,null,g)},li.createRoot=function(c,d){if(!yy(c))throw Error(r(299));var g=!1,b="",A=Sj;return d!=null&&(d.unstable_strictMode===!0&&(g=!0),d.identifierPrefix!==void 0&&(b=d.identifierPrefix),d.onRecoverableError!==void 0&&(A=d.onRecoverableError)),d=gy(c,1,!1,null,null,g,!1,b,A),c[Ws]=d.current,hc(c.nodeType===8?c.parentNode:c),new xy(d)},li.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var d=c._reactInternals;if(d===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=vi(d),c=c===null?null:c.stateNode,c},li.flushSync=function(c){return Ld(c)},li.hydrate=function(c,d,g){if(!Wg(d))throw Error(r(200));return Hg(null,c,d,!0,g)},li.hydrateRoot=function(c,d,g){if(!yy(c))throw Error(r(405));var b=g!=null&&g.hydratedSources||null,A=!1,M="",Q=Sj;if(g!=null&&(g.unstable_strictMode===!0&&(A=!0),g.identifierPrefix!==void 0&&(M=g.identifierPrefix),g.onRecoverableError!==void 0&&(Q=g.onRecoverableError)),d=_j(d,null,c,1,g??null,A,!1,M,Q),c[Ws]=d.current,hc(c),b)for(c=0;c<b.length;c++)g=b[c],A=g._getVersion,A=A(g._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[g,A]:d.mutableSourceEagerHydrationData.push(g,A);return new Vg(d)},li.render=function(c,d,g){if(!Wg(d))throw Error(r(200));return Hg(null,c,d,!1,g)},li.unmountComponentAtNode=function(c){if(!Wg(c))throw Error(r(40));return c._reactRootContainer?(Ld(function(){Hg(null,null,c,!1,function(){c._reactRootContainer=null,c[Ws]=null})}),!0):!1},li.unstable_batchedUpdates=uy,li.unstable_renderSubtreeIntoContainer=function(c,d,g,b){if(!Wg(g))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return Hg(c,d,g,!1,b)},li.version="18.3.1-next-f1338f8080-20240426",li}var Dj;function ok(){if(Dj)return jy.exports;Dj=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),jy.exports=m8(),jy.exports}var Ij;function p8(){if(Ij)return Kg;Ij=1;var e=ok();return Kg.createRoot=e.createRoot,Kg.hydrateRoot=e.hydrateRoot,Kg}var g8=p8(),x=Tx();const Ve=Ax(x),Sb=l8({__proto__:null,default:Ve},[x]),v8=1,x8=1e6;let Sy=0;function y8(){return Sy=(Sy+1)%Number.MAX_SAFE_INTEGER,Sy.toString()}const ky=new Map,Oj=e=>{if(ky.has(e))return;const t=setTimeout(()=>{ky.delete(e),op({type:"REMOVE_TOAST",toastId:e})},x8);ky.set(e,t)},w8=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,v8)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?Oj(r):e.toasts.forEach(n=>{Oj(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},Rv=[];let Lv={toasts:[]};function op(e){Lv=w8(Lv,e),Rv.forEach(t=>{t(Lv)})}function b8({...e}){const t=y8(),r=a=>op({type:"UPDATE_TOAST",toast:{...a,id:t}}),n=()=>op({type:"DISMISS_TOAST",toastId:t});return op({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:a=>{a||n()}}}),{id:t,dismiss:n,update:r}}function Er(){const[e,t]=x.useState(Lv);return x.useEffect(()=>(Rv.push(t),()=>{const r=Rv.indexOf(t);r>-1&&Rv.splice(r,1)}),[e]),{...e,toast:b8,dismiss:r=>op({type:"DISMISS_TOAST",toastId:r})}}var Jh=ok();const lk=Ax(Jh);function lt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(a){if(e?.(a),r===!1||!a.defaultPrevented)return t?.(a)}}function Mj(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Oc(...e){return t=>{let r=!1;const n=e.map(a=>{const i=Mj(a,t);return!r&&typeof i=="function"&&(r=!0),i});if(r)return()=>{for(let a=0;a<n.length;a++){const i=n[a];typeof i=="function"?i():Mj(e[a],null)}}}}function Jt(...e){return x.useCallback(Oc(...e),e)}function j8(e,t){const r=x.createContext(t),n=i=>{const{children:o,...l}=i,u=x.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:u,children:o})};n.displayName=e+"Provider";function a(i){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${i}\` must be used within \`${e}\``)}return[n,a]}function bs(e,t=[]){let r=[];function n(i,o){const l=x.createContext(o),u=r.length;r=[...r,o];const f=p=>{const{scope:v,children:m,...N}=p,w=v?.[e]?.[u]||l,j=x.useMemo(()=>N,Object.values(N));return s.jsx(w.Provider,{value:j,children:m})};f.displayName=i+"Provider";function h(p,v){const m=v?.[e]?.[u]||l,N=x.useContext(m);if(N)return N;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${i}\``)}return[f,h]}const a=()=>{const i=r.map(o=>x.createContext(o));return function(l){const u=l?.[e]||i;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return a.scopeName=e,[n,_8(a,...t)]}function _8(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(i){const o=n.reduce((l,{useScope:u,scopeName:f})=>{const p=u(i)[`__scope${f}`];return{...l,...p}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function zu(e){const t=N8(e),r=x.forwardRef((n,a)=>{const{children:i,...o}=n,l=x.Children.toArray(i),u=l.find(S8);if(u){const f=u.props.children,h=l.map(p=>p===u?x.Children.count(f)>1?x.Children.only(null):x.isValidElement(f)?f.props.children:null:p);return s.jsx(t,{...o,ref:a,children:x.isValidElement(f)?x.cloneElement(f,void 0,h):null})}return s.jsx(t,{...o,ref:a,children:i})});return r.displayName=`${e}.Slot`,r}var ck=zu("Slot");function N8(e){const t=x.forwardRef((r,n)=>{const{children:a,...i}=r;if(x.isValidElement(a)){const o=C8(a),l=k8(i,a.props);return a.type!==x.Fragment&&(l.ref=n?Oc(n,o):o),x.cloneElement(a,l)}return x.Children.count(a)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var uk=Symbol("radix.slottable");function dk(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=uk,t}function S8(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===uk}function k8(e,t){const r={...t};for(const n in t){const a=e[n],i=t[n];/^on[A-Z]/.test(n)?a&&i?r[n]=(...l)=>{const u=i(...l);return a(...l),u}:a&&(r[n]=a):n==="style"?r[n]={...a,...i}:n==="className"&&(r[n]=[a,i].filter(Boolean).join(" "))}return{...e,...r}}function C8(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Wp(e){const t=e+"CollectionProvider",[r,n]=bs(t),[a,i]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:j,children:_}=w,C=Ve.useRef(null),k=Ve.useRef(new Map).current;return s.jsx(a,{scope:j,itemMap:k,collectionRef:C,children:_})};o.displayName=t;const l=e+"CollectionSlot",u=zu(l),f=Ve.forwardRef((w,j)=>{const{scope:_,children:C}=w,k=i(l,_),E=Jt(j,k.collectionRef);return s.jsx(u,{ref:E,children:C})});f.displayName=l;const h=e+"CollectionItemSlot",p="data-radix-collection-item",v=zu(h),m=Ve.forwardRef((w,j)=>{const{scope:_,children:C,...k}=w,E=Ve.useRef(null),I=Jt(j,E),D=i(h,_);return Ve.useEffect(()=>(D.itemMap.set(E,{ref:E,...k}),()=>void D.itemMap.delete(E))),s.jsx(v,{[p]:"",ref:I,children:C})});m.displayName=h;function N(w){const j=i(e+"CollectionConsumer",w);return Ve.useCallback(()=>{const C=j.collectionRef.current;if(!C)return[];const k=Array.from(C.querySelectorAll(`[${p}]`));return Array.from(j.itemMap.values()).sort((D,O)=>k.indexOf(D.ref.current)-k.indexOf(O.ref.current))},[j.collectionRef,j.itemMap])}return[{Provider:o,Slot:f,ItemSlot:m},N,n]}var E8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],vt=E8.reduce((e,t)=>{const r=zu(`Primitive.${t}`),n=x.forwardRef((a,i)=>{const{asChild:o,...l}=a,u=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(u,{...l,ref:i})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function kb(e,t){e&&Jh.flushSync(()=>e.dispatchEvent(t))}function as(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>t.current?.(...r),[])}function P8(e,t=globalThis?.document){const r=as(e);x.useEffect(()=>{const n=a=>{a.key==="Escape"&&r(a)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var A8="DismissableLayer",nw="dismissableLayer.update",T8="dismissableLayer.pointerDownOutside",R8="dismissableLayer.focusOutside",Fj,fk=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),df=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:a,onFocusOutside:i,onInteractOutside:o,onDismiss:l,...u}=e,f=x.useContext(fk),[h,p]=x.useState(null),v=h?.ownerDocument??globalThis?.document,[,m]=x.useState({}),N=Jt(t,O=>p(O)),w=Array.from(f.layers),[j]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),_=w.indexOf(j),C=h?w.indexOf(h):-1,k=f.layersWithOutsidePointerEventsDisabled.size>0,E=C>=_,I=D8(O=>{const F=O.target,T=[...f.branches].some(z=>z.contains(F));!E||T||(a?.(O),o?.(O),O.defaultPrevented||l?.())},v),D=I8(O=>{const F=O.target;[...f.branches].some(z=>z.contains(F))||(i?.(O),o?.(O),O.defaultPrevented||l?.())},v);return P8(O=>{C===f.layers.size-1&&(n?.(O),!O.defaultPrevented&&l&&(O.preventDefault(),l()))},v),x.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(Fj=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),Bj(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Fj)}},[h,v,r,f]),x.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),Bj())},[h,f]),x.useEffect(()=>{const O=()=>m({});return document.addEventListener(nw,O),()=>document.removeEventListener(nw,O)},[]),s.jsx(vt.div,{...u,ref:N,style:{pointerEvents:k?E?"auto":"none":void 0,...e.style},onFocusCapture:lt(e.onFocusCapture,D.onFocusCapture),onBlurCapture:lt(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:lt(e.onPointerDownCapture,I.onPointerDownCapture)})});df.displayName=A8;var L8="DismissableLayerBranch",hk=x.forwardRef((e,t)=>{const r=x.useContext(fk),n=x.useRef(null),a=Jt(t,n);return x.useEffect(()=>{const i=n.current;if(i)return r.branches.add(i),()=>{r.branches.delete(i)}},[r.branches]),s.jsx(vt.div,{...e,ref:a})});hk.displayName=L8;function D8(e,t=globalThis?.document){const r=as(e),n=x.useRef(!1),a=x.useRef(()=>{});return x.useEffect(()=>{const i=l=>{if(l.target&&!n.current){let u=function(){mk(T8,r,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",a.current),a.current=u,t.addEventListener("click",a.current,{once:!0})):u()}else t.removeEventListener("click",a.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",i),t.removeEventListener("click",a.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function I8(e,t=globalThis?.document){const r=as(e),n=x.useRef(!1);return x.useEffect(()=>{const a=i=>{i.target&&!n.current&&mk(R8,r,{originalEvent:i},{discrete:!1})};return t.addEventListener("focusin",a),()=>t.removeEventListener("focusin",a)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function Bj(){const e=new CustomEvent(nw);document.dispatchEvent(e)}function mk(e,t,r,{discrete:n}){const a=r.originalEvent.target,i=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?kb(a,i):a.dispatchEvent(i)}var O8=df,M8=hk,ys=globalThis?.document?x.useLayoutEffect:()=>{},F8="Portal",Zh=x.forwardRef((e,t)=>{const{container:r,...n}=e,[a,i]=x.useState(!1);ys(()=>i(!0),[]);const o=r||a&&globalThis?.document?.body;return o?lk.createPortal(s.jsx(vt.div,{...n,ref:t}),o):null});Zh.displayName=F8;function B8(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var qs=e=>{const{present:t,children:r}=e,n=U8(t),a=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),i=Jt(n.ref,$8(a));return typeof r=="function"||n.isPresent?x.cloneElement(a,{ref:i}):null};qs.displayName="Presence";function U8(e){const[t,r]=x.useState(),n=x.useRef(null),a=x.useRef(e),i=x.useRef("none"),o=e?"mounted":"unmounted",[l,u]=B8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const f=Yg(n.current);i.current=l==="mounted"?f:"none"},[l]),ys(()=>{const f=n.current,h=a.current;if(h!==e){const v=i.current,m=Yg(f);e?u("MOUNT"):m==="none"||f?.display==="none"?u("UNMOUNT"):u(h&&v!==m?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,u]),ys(()=>{if(t){let f;const h=t.ownerDocument.defaultView??window,p=m=>{const w=Yg(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&w&&(u("ANIMATION_END"),!a.current)){const j=t.style.animationFillMode;t.style.animationFillMode="forwards",f=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=j)})}},v=m=>{m.target===t&&(i.current=Yg(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{h.clearTimeout(f),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function Yg(e){return e?.animationName||"none"}function $8(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var z8=Sb[" useInsertionEffect ".trim().toString()]||ys;function Ea({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[a,i,o]=q8({defaultProp:t,onChange:r}),l=e!==void 0,u=l?e:a;{const h=x.useRef(e!==void 0);x.useEffect(()=>{const p=h.current;p!==l&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const f=x.useCallback(h=>{if(l){const p=V8(h)?h(e):h;p!==e&&o.current?.(p)}else i(h)},[l,e,i,o]);return[u,f]}function q8({defaultProp:e,onChange:t}){const[r,n]=x.useState(e),a=x.useRef(r),i=x.useRef(t);return z8(()=>{i.current=t},[t]),x.useEffect(()=>{a.current!==r&&(i.current?.(r),a.current=r)},[r,a]),[r,n,i]}function V8(e){return typeof e=="function"}var pk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),W8="VisuallyHidden",Rx=x.forwardRef((e,t)=>s.jsx(vt.span,{...e,ref:t,style:{...pk,...e.style}}));Rx.displayName=W8;var H8=Rx,Cb="ToastProvider",[Eb,G8,K8]=Wp("Toast"),[gk]=bs("Toast",[K8]),[Y8,Lx]=gk(Cb),vk=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:a="right",swipeThreshold:i=50,children:o}=e,[l,u]=x.useState(null),[f,h]=x.useState(0),p=x.useRef(!1),v=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${Cb}\`. Expected non-empty \`string\`.`),s.jsx(Eb.Provider,{scope:t,children:s.jsx(Y8,{scope:t,label:r,duration:n,swipeDirection:a,swipeThreshold:i,toastCount:f,viewport:l,onViewportChange:u,onToastAdd:x.useCallback(()=>h(m=>m+1),[]),onToastRemove:x.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:o})})};vk.displayName=Cb;var xk="ToastViewport",Q8=["F8"],sw="toast.viewportPause",aw="toast.viewportResume",yk=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=Q8,label:a="Notifications ({hotkey})",...i}=e,o=Lx(xk,r),l=G8(r),u=x.useRef(null),f=x.useRef(null),h=x.useRef(null),p=x.useRef(null),v=Jt(t,p,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),N=o.toastCount>0;x.useEffect(()=>{const j=_=>{n.length!==0&&n.every(k=>_[k]||_.code===k)&&p.current?.focus()};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[n]),x.useEffect(()=>{const j=u.current,_=p.current;if(N&&j&&_){const C=()=>{if(!o.isClosePausedRef.current){const D=new CustomEvent(sw);_.dispatchEvent(D),o.isClosePausedRef.current=!0}},k=()=>{if(o.isClosePausedRef.current){const D=new CustomEvent(aw);_.dispatchEvent(D),o.isClosePausedRef.current=!1}},E=D=>{!j.contains(D.relatedTarget)&&k()},I=()=>{j.contains(document.activeElement)||k()};return j.addEventListener("focusin",C),j.addEventListener("focusout",E),j.addEventListener("pointermove",C),j.addEventListener("pointerleave",I),window.addEventListener("blur",C),window.addEventListener("focus",k),()=>{j.removeEventListener("focusin",C),j.removeEventListener("focusout",E),j.removeEventListener("pointermove",C),j.removeEventListener("pointerleave",I),window.removeEventListener("blur",C),window.removeEventListener("focus",k)}}},[N,o.isClosePausedRef]);const w=x.useCallback(({tabbingDirection:j})=>{const C=l().map(k=>{const E=k.ref.current,I=[E,...cD(E)];return j==="forwards"?I:I.reverse()});return(j==="forwards"?C.reverse():C).flat()},[l]);return x.useEffect(()=>{const j=p.current;if(j){const _=C=>{const k=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!k){const I=document.activeElement,D=C.shiftKey;if(C.target===j&&D){f.current?.focus();return}const T=w({tabbingDirection:D?"backwards":"forwards"}),z=T.findIndex(U=>U===I);Cy(T.slice(z+1))?C.preventDefault():D?f.current?.focus():h.current?.focus()}};return j.addEventListener("keydown",_),()=>j.removeEventListener("keydown",_)}},[l,w]),s.jsxs(M8,{ref:u,role:"region","aria-label":a.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:N?void 0:"none"},children:[N&&s.jsx(iw,{ref:f,onFocusFromOutsideViewport:()=>{const j=w({tabbingDirection:"forwards"});Cy(j)}}),s.jsx(Eb.Slot,{scope:r,children:s.jsx(vt.ol,{tabIndex:-1,...i,ref:v})}),N&&s.jsx(iw,{ref:h,onFocusFromOutsideViewport:()=>{const j=w({tabbingDirection:"backwards"});Cy(j)}})]})});yk.displayName=xk;var wk="ToastFocusProxy",iw=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...a}=e,i=Lx(wk,r);return s.jsx(Rx,{tabIndex:0,...a,ref:t,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!i.viewport?.contains(l)&&n()}})});iw.displayName=wk;var Hp="Toast",J8="toast.swipeStart",Z8="toast.swipeMove",X8="toast.swipeCancel",eD="toast.swipeEnd",bk=x.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:a,onOpenChange:i,...o}=e,[l,u]=Ea({prop:n,defaultProp:a??!0,onChange:i,caller:Hp});return s.jsx(qs,{present:r||l,children:s.jsx(nD,{open:l,...o,ref:t,onClose:()=>u(!1),onPause:as(e.onPause),onResume:as(e.onResume),onSwipeStart:lt(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lt(e.onSwipeMove,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:lt(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lt(e.onSwipeEnd,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),u(!1)})})})});bk.displayName=Hp;var[tD,rD]=gk(Hp,{onClose(){}}),nD=x.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:a,open:i,onClose:o,onEscapeKeyDown:l,onPause:u,onResume:f,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:v,onSwipeEnd:m,...N}=e,w=Lx(Hp,r),[j,_]=x.useState(null),C=Jt(t,V=>_(V)),k=x.useRef(null),E=x.useRef(null),I=a||w.duration,D=x.useRef(0),O=x.useRef(I),F=x.useRef(0),{onToastAdd:T,onToastRemove:z}=w,U=as(()=>{j?.contains(document.activeElement)&&w.viewport?.focus(),o()}),B=x.useCallback(V=>{!V||V===1/0||(window.clearTimeout(F.current),D.current=new Date().getTime(),F.current=window.setTimeout(U,V))},[U]);x.useEffect(()=>{const V=w.viewport;if(V){const de=()=>{B(O.current),f?.()},se=()=>{const Y=new Date().getTime()-D.current;O.current=O.current-Y,window.clearTimeout(F.current),u?.()};return V.addEventListener(sw,se),V.addEventListener(aw,de),()=>{V.removeEventListener(sw,se),V.removeEventListener(aw,de)}}},[w.viewport,I,u,f,B]),x.useEffect(()=>{i&&!w.isClosePausedRef.current&&B(I)},[i,I,w.isClosePausedRef,B]),x.useEffect(()=>(T(),()=>z()),[T,z]);const K=x.useMemo(()=>j?Ek(j):null,[j]);return w.viewport?s.jsxs(s.Fragment,{children:[K&&s.jsx(sD,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:K}),s.jsx(tD,{scope:r,onClose:U,children:Jh.createPortal(s.jsx(Eb.ItemSlot,{scope:r,children:s.jsx(O8,{asChild:!0,onEscapeKeyDown:lt(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||U(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(vt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":w.swipeDirection,...N,ref:C,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:lt(e.onKeyDown,V=>{V.key==="Escape"&&(l?.(V.nativeEvent),V.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,U()))}),onPointerDown:lt(e.onPointerDown,V=>{V.button===0&&(k.current={x:V.clientX,y:V.clientY})}),onPointerMove:lt(e.onPointerMove,V=>{if(!k.current)return;const de=V.clientX-k.current.x,se=V.clientY-k.current.y,Y=!!E.current,W=["left","right"].includes(w.swipeDirection),ee=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,ge=W?ee(0,de):0,re=W?0:ee(0,se),L=V.pointerType==="touch"?10:2,q={x:ge,y:re},J={originalEvent:V,delta:q};Y?(E.current=q,Qg(Z8,p,J,{discrete:!1})):Uj(q,w.swipeDirection,L)?(E.current=q,Qg(J8,h,J,{discrete:!1}),V.target.setPointerCapture(V.pointerId)):(Math.abs(de)>L||Math.abs(se)>L)&&(k.current=null)}),onPointerUp:lt(e.onPointerUp,V=>{const de=E.current,se=V.target;if(se.hasPointerCapture(V.pointerId)&&se.releasePointerCapture(V.pointerId),E.current=null,k.current=null,de){const Y=V.currentTarget,W={originalEvent:V,delta:de};Uj(de,w.swipeDirection,w.swipeThreshold)?Qg(eD,m,W,{discrete:!0}):Qg(X8,v,W,{discrete:!0}),Y.addEventListener("click",ee=>ee.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),sD=e=>{const{__scopeToast:t,children:r,...n}=e,a=Lx(Hp,t),[i,o]=x.useState(!1),[l,u]=x.useState(!1);return oD(()=>o(!0)),x.useEffect(()=>{const f=window.setTimeout(()=>u(!0),1e3);return()=>window.clearTimeout(f)},[]),l?null:s.jsx(Zh,{asChild:!0,children:s.jsx(Rx,{...n,children:i&&s.jsxs(s.Fragment,{children:[a.label," ",r]})})})},aD="ToastTitle",jk=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(vt.div,{...n,ref:t})});jk.displayName=aD;var iD="ToastDescription",_k=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(vt.div,{...n,ref:t})});_k.displayName=iD;var Nk="ToastAction",Sk=x.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(Ck,{altText:r,asChild:!0,children:s.jsx(Pb,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${Nk}\`. Expected non-empty \`string\`.`),null)});Sk.displayName=Nk;var kk="ToastClose",Pb=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,a=rD(kk,r);return s.jsx(Ck,{asChild:!0,children:s.jsx(vt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,a.onClose)})})});Pb.displayName=kk;var Ck=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...a}=e;return s.jsx(vt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...a,ref:t})});function Ek(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),lD(n)){const a=n.ariaHidden||n.hidden||n.style.display==="none",i=n.dataset.radixToastAnnounceExclude==="";if(!a)if(i){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Ek(n))}}),t}function Qg(e,t,r,{discrete:n}){const a=r.originalEvent.currentTarget,i=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&a.addEventListener(e,t,{once:!0}),n?kb(a,i):a.dispatchEvent(i)}var Uj=(e,t,r=0)=>{const n=Math.abs(e.x),a=Math.abs(e.y),i=n>a;return t==="left"||t==="right"?i&&n>r:!i&&a>r};function oD(e=()=>{}){const t=as(e);ys(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function lD(e){return e.nodeType===e.ELEMENT_NODE}function cD(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Cy(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var uD=vk,Pk=yk,Ak=bk,Tk=jk,Rk=_k,Lk=Sk,Dk=Pb;function Ik(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(r=Ik(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ok(){for(var e,t,r=0,n="",a=arguments.length;r<a;r++)(e=arguments[r])&&(t=Ik(e))&&(n&&(n+=" "),n+=t);return n}const $j=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,zj=Ok,Xh=(e,t)=>r=>{var n;if(t?.variants==null)return zj(e,r?.class,r?.className);const{variants:a,defaultVariants:i}=t,o=Object.keys(a).map(f=>{const h=r?.[f],p=i?.[f];if(h===null)return null;const v=$j(h)||$j(p);return a[f][v]}),l=r&&Object.entries(r).reduce((f,h)=>{let[p,v]=h;return v===void 0||(f[p]=v),f},{}),u=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,h)=>{let{class:p,className:v,...m}=h;return Object.entries(m).every(N=>{let[w,j]=N;return Array.isArray(j)?j.includes({...i,...l}[w]):{...i,...l}[w]===j})?[...f,p,v]:f},[]);return zj(e,o,u,r?.class,r?.className)};const dD=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Mk=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();var fD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hD=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:a="",children:i,iconNode:o,...l},u)=>x.createElement("svg",{ref:u,...fD,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:Mk("lucide",a),...l},[...o.map(([f,h])=>x.createElement(f,h)),...Array.isArray(i)?i:[i]]));const dt=(e,t)=>{const r=x.forwardRef(({className:n,...a},i)=>x.createElement(hD,{ref:i,iconNode:t,className:Mk(`lucide-${dD(e)}`,n),...a}));return r.displayName=`${e}`,r};const qj=dt("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const gp=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const Qd=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const mD=dt("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const pD=dt("BellDot",[["path",{d:"M19.4 14.9C20.2 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 .7 0 1.3.1 1.9.3",key:"xcehk"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["circle",{cx:"18",cy:"8",r:"3",key:"1g0gzu"}]]);const Hv=dt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const gD=dt("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const Gv=dt("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const vD=dt("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Va=dt("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const Ab=dt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const vp=dt("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const Na=dt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const Dx=dt("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);const Tb=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const Rb=dt("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const xp=dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const Fk=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Jg=dt("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const Hr=dt("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const Cl=dt("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Js=dt("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const Ix=dt("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const Bk=dt("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const Uk=dt("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const jn=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const $k=dt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);const Ac=dt("Crown",[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]]);const Ox=dt("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const zk=dt("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const xD=dt("ExternalLink",[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]]);const Kv=dt("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Mc=dt("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const Ic=dt("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const yD=dt("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Fc=dt("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const Vj=dt("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const qk=dt("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);const wD=dt("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);const bD=dt("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const Vk=dt("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const jD=dt("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);const _D=dt("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);const ND=dt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);const SD=dt("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const Wk=dt("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const kD=dt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const Lb=dt("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const vs=dt("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const Hk=dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const CD=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const Gk=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const ED=dt("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const Dv=dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const Db=dt("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const PD=dt("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const Ca=dt("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const AD=dt("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const Kk=dt("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const ow=dt("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const vn=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Sa=dt("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);const TD=dt("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const yp=dt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const RD=dt("Repeat",[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]]);const Yk=dt("Rocket",[["path",{d:"M4.5 16.5c-1.5 1.26-2 5-2 5s3.74-.5 5-2c.71-.84.7-2.13-.09-2.91a2.18 2.18 0 0 0-2.91-.09z",key:"m3kijz"}],["path",{d:"m12 15-3-3a22 22 0 0 1 2-3.95A12.88 12.88 0 0 1 22 2c0 2.72-.78 7.5-6 11a22.35 22.35 0 0 1-4 2z",key:"1fmvmk"}],["path",{d:"M9 12H4s.55-3.03 2-4c1.62-1.08 5 0 5 0",key:"1f8sc4"}],["path",{d:"M12 15v5s3.03-.55 4-2c1.08-1.62 0-5 0-5",key:"qeys4"}]]);const Qk=dt("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const LD=dt("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const Ml=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Bc=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ff=dt("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const Rh=dt("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const DD=dt("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const ID=dt("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const OD=dt("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const Jk=dt("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);const Zk=dt("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const lw=dt("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);const Dl=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const Wj=dt("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Lh=dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const is=dt("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const Ib=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const MD=dt("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Hj=dt("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);const Il=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Bi=dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const FD=dt("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const hn=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const Dh=dt("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);const cw=dt("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const BD=dt("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),Ob="-",UD=e=>{const t=zD(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(Ob);return l[0]===""&&l.length!==1&&l.shift(),Xk(l,t)||$D(o)},getConflictingClassGroupIds:(o,l)=>{const u=r[o]||[];return l&&n[o]?[...u,...n[o]]:u}}},Xk=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),a=n?Xk(e.slice(1),n):void 0;if(a)return a;if(t.validators.length===0)return;const i=e.join(Ob);return t.validators.find(({validator:o})=>o(i))?.classGroupId},Gj=/^\[(.+)\]$/,$D=e=>{if(Gj.test(e)){const t=Gj.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},zD=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return VD(Object.entries(e.classGroups),r).forEach(([i,o])=>{uw(o,n,i,t)}),n},uw=(e,t,r,n)=>{e.forEach(a=>{if(typeof a=="string"){const i=a===""?t:Kj(t,a);i.classGroupId=r;return}if(typeof a=="function"){if(qD(a)){uw(a(n),t,r,n);return}t.validators.push({validator:a,classGroupId:r});return}Object.entries(a).forEach(([i,o])=>{uw(o,Kj(t,i),r,n)})})},Kj=(e,t)=>{let r=e;return t.split(Ob).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},qD=e=>e.isThemeGetter,VD=(e,t)=>t?e.map(([r,n])=>{const a=n.map(i=>typeof i=="string"?t+i:typeof i=="object"?Object.fromEntries(Object.entries(i).map(([o,l])=>[t+o,l])):i);return[r,a]}):e,WD=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const a=(i,o)=>{r.set(i,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(i){let o=r.get(i);if(o!==void 0)return o;if((o=n.get(i))!==void 0)return a(i,o),o},set(i,o){r.has(i)?r.set(i,o):a(i,o)}}},eC="!",HD=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,a=t[0],i=t.length,o=l=>{const u=[];let f=0,h=0,p;for(let j=0;j<l.length;j++){let _=l[j];if(f===0){if(_===a&&(n||l.slice(j,j+i)===t)){u.push(l.slice(h,j)),h=j+i;continue}if(_==="/"){p=j;continue}}_==="["?f++:_==="]"&&f--}const v=u.length===0?l:l.substring(h),m=v.startsWith(eC),N=m?v.substring(1):v,w=p&&p>h?p-h:void 0;return{modifiers:u,hasImportantModifier:m,baseClassName:N,maybePostfixModifierPosition:w}};return r?l=>r({className:l,parseClassName:o}):o},GD=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},KD=e=>({cache:WD(e.cacheSize),parseClassName:HD(e),...UD(e)}),YD=/\s+/,QD=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:a}=t,i=[],o=e.trim().split(YD);let l="";for(let u=o.length-1;u>=0;u-=1){const f=o[u],{modifiers:h,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}=r(f);let N=!!m,w=n(N?v.substring(0,m):v);if(!w){if(!N){l=f+(l.length>0?" "+l:l);continue}if(w=n(v),!w){l=f+(l.length>0?" "+l:l);continue}N=!1}const j=GD(h).join(":"),_=p?j+eC:j,C=_+w;if(i.includes(C))continue;i.push(C);const k=a(w,N);for(let E=0;E<k.length;++E){const I=k[E];i.push(_+I)}l=f+(l.length>0?" "+l:l)}return l};function JD(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=tC(t))&&(n&&(n+=" "),n+=r);return n}const tC=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=tC(e[n]))&&(r&&(r+=" "),r+=t);return r};function ZD(e,...t){let r,n,a,i=o;function o(u){const f=t.reduce((h,p)=>p(h),e());return r=KD(f),n=r.cache.get,a=r.cache.set,i=l,l(u)}function l(u){const f=n(u);if(f)return f;const h=QD(u,r);return a(u,h),h}return function(){return i(JD.apply(null,arguments))}}const Cn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},rC=/^\[(?:([a-z-]+):)?(.+)\]$/i,XD=/^\d+\/\d+$/,eI=new Set(["px","full","screen"]),tI=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,rI=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,nI=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,sI=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,aI=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jc=e=>jh(e)||eI.has(e)||XD.test(e),Su=e=>em(e,"length",hI),jh=e=>!!e&&!Number.isNaN(Number(e)),Ey=e=>em(e,"number",jh),Bm=e=>!!e&&Number.isInteger(Number(e)),iI=e=>e.endsWith("%")&&jh(e.slice(0,-1)),kr=e=>rC.test(e),ku=e=>tI.test(e),oI=new Set(["length","size","percentage"]),lI=e=>em(e,oI,nC),cI=e=>em(e,"position",nC),uI=new Set(["image","url"]),dI=e=>em(e,uI,pI),fI=e=>em(e,"",mI),Um=()=>!0,em=(e,t,r)=>{const n=rC.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},hI=e=>rI.test(e)&&!nI.test(e),nC=()=>!1,mI=e=>sI.test(e),pI=e=>aI.test(e),gI=()=>{const e=Cn("colors"),t=Cn("spacing"),r=Cn("blur"),n=Cn("brightness"),a=Cn("borderColor"),i=Cn("borderRadius"),o=Cn("borderSpacing"),l=Cn("borderWidth"),u=Cn("contrast"),f=Cn("grayscale"),h=Cn("hueRotate"),p=Cn("invert"),v=Cn("gap"),m=Cn("gradientColorStops"),N=Cn("gradientColorStopPositions"),w=Cn("inset"),j=Cn("margin"),_=Cn("opacity"),C=Cn("padding"),k=Cn("saturate"),E=Cn("scale"),I=Cn("sepia"),D=Cn("skew"),O=Cn("space"),F=Cn("translate"),T=()=>["auto","contain","none"],z=()=>["auto","hidden","clip","visible","scroll"],U=()=>["auto",kr,t],B=()=>[kr,t],K=()=>["",jc,Su],V=()=>["auto",jh,kr],de=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],se=()=>["solid","dashed","dotted","double","none"],Y=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],W=()=>["start","end","center","between","around","evenly","stretch"],ee=()=>["","0",kr],ge=()=>["auto","avoid","all","avoid-page","page","left","right","column"],re=()=>[jh,kr];return{cacheSize:500,separator:":",theme:{colors:[Um],spacing:[jc,Su],blur:["none","",ku,kr],brightness:re(),borderColor:[e],borderRadius:["none","","full",ku,kr],borderSpacing:B(),borderWidth:K(),contrast:re(),grayscale:ee(),hueRotate:re(),invert:ee(),gap:B(),gradientColorStops:[e],gradientColorStopPositions:[iI,Su],inset:U(),margin:U(),opacity:re(),padding:B(),saturate:re(),scale:re(),sepia:ee(),skew:re(),space:B(),translate:B()},classGroups:{aspect:[{aspect:["auto","square","video",kr]}],container:["container"],columns:[{columns:[ku]}],"break-after":[{"break-after":ge()}],"break-before":[{"break-before":ge()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...de(),kr]}],overflow:[{overflow:z()}],"overflow-x":[{"overflow-x":z()}],"overflow-y":[{"overflow-y":z()}],overscroll:[{overscroll:T()}],"overscroll-x":[{"overscroll-x":T()}],"overscroll-y":[{"overscroll-y":T()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Bm,kr]}],basis:[{basis:U()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",kr]}],grow:[{grow:ee()}],shrink:[{shrink:ee()}],order:[{order:["first","last","none",Bm,kr]}],"grid-cols":[{"grid-cols":[Um]}],"col-start-end":[{col:["auto",{span:["full",Bm,kr]},kr]}],"col-start":[{"col-start":V()}],"col-end":[{"col-end":V()}],"grid-rows":[{"grid-rows":[Um]}],"row-start-end":[{row:["auto",{span:[Bm,kr]},kr]}],"row-start":[{"row-start":V()}],"row-end":[{"row-end":V()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",kr]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",kr]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...W()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...W(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...W(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[C]}],px:[{px:[C]}],py:[{py:[C]}],ps:[{ps:[C]}],pe:[{pe:[C]}],pt:[{pt:[C]}],pr:[{pr:[C]}],pb:[{pb:[C]}],pl:[{pl:[C]}],m:[{m:[j]}],mx:[{mx:[j]}],my:[{my:[j]}],ms:[{ms:[j]}],me:[{me:[j]}],mt:[{mt:[j]}],mr:[{mr:[j]}],mb:[{mb:[j]}],ml:[{ml:[j]}],"space-x":[{"space-x":[O]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[O]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",kr,t]}],"min-w":[{"min-w":[kr,t,"min","max","fit"]}],"max-w":[{"max-w":[kr,t,"none","full","min","max","fit","prose",{screen:[ku]},ku]}],h:[{h:[kr,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[kr,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[kr,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[kr,t,"auto","min","max","fit"]}],"font-size":[{text:["base",ku,Su]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",Ey]}],"font-family":[{font:[Um]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",kr]}],"line-clamp":[{"line-clamp":["none",jh,Ey]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",jc,kr]}],"list-image":[{"list-image":["none",kr]}],"list-style-type":[{list:["none","disc","decimal",kr]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[_]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[_]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...se(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",jc,Su]}],"underline-offset":[{"underline-offset":["auto",jc,kr]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:B()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",kr]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",kr]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[_]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...de(),cI]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",lI]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},dI]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[N]}],"gradient-via-pos":[{via:[N]}],"gradient-to-pos":[{to:[N]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[i]}],"rounded-s":[{"rounded-s":[i]}],"rounded-e":[{"rounded-e":[i]}],"rounded-t":[{"rounded-t":[i]}],"rounded-r":[{"rounded-r":[i]}],"rounded-b":[{"rounded-b":[i]}],"rounded-l":[{"rounded-l":[i]}],"rounded-ss":[{"rounded-ss":[i]}],"rounded-se":[{"rounded-se":[i]}],"rounded-ee":[{"rounded-ee":[i]}],"rounded-es":[{"rounded-es":[i]}],"rounded-tl":[{"rounded-tl":[i]}],"rounded-tr":[{"rounded-tr":[i]}],"rounded-br":[{"rounded-br":[i]}],"rounded-bl":[{"rounded-bl":[i]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[_]}],"border-style":[{border:[...se(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[_]}],"divide-style":[{divide:se()}],"border-color":[{border:[a]}],"border-color-x":[{"border-x":[a]}],"border-color-y":[{"border-y":[a]}],"border-color-s":[{"border-s":[a]}],"border-color-e":[{"border-e":[a]}],"border-color-t":[{"border-t":[a]}],"border-color-r":[{"border-r":[a]}],"border-color-b":[{"border-b":[a]}],"border-color-l":[{"border-l":[a]}],"divide-color":[{divide:[a]}],"outline-style":[{outline:["",...se()]}],"outline-offset":[{"outline-offset":[jc,kr]}],"outline-w":[{outline:[jc,Su]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:K()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[_]}],"ring-offset-w":[{"ring-offset":[jc,Su]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",ku,fI]}],"shadow-color":[{shadow:[Um]}],opacity:[{opacity:[_]}],"mix-blend":[{"mix-blend":[...Y(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":Y()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[u]}],"drop-shadow":[{"drop-shadow":["","none",ku,kr]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[k]}],sepia:[{sepia:[I]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[u]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[_]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[I]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",kr]}],duration:[{duration:re()}],ease:[{ease:["linear","in","out","in-out",kr]}],delay:[{delay:re()}],animate:[{animate:["none","spin","ping","pulse","bounce",kr]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[E]}],"scale-x":[{"scale-x":[E]}],"scale-y":[{"scale-y":[E]}],rotate:[{rotate:[Bm,kr]}],"translate-x":[{"translate-x":[F]}],"translate-y":[{"translate-y":[F]}],"skew-x":[{"skew-x":[D]}],"skew-y":[{"skew-y":[D]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",kr]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",kr]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":B()}],"scroll-mx":[{"scroll-mx":B()}],"scroll-my":[{"scroll-my":B()}],"scroll-ms":[{"scroll-ms":B()}],"scroll-me":[{"scroll-me":B()}],"scroll-mt":[{"scroll-mt":B()}],"scroll-mr":[{"scroll-mr":B()}],"scroll-mb":[{"scroll-mb":B()}],"scroll-ml":[{"scroll-ml":B()}],"scroll-p":[{"scroll-p":B()}],"scroll-px":[{"scroll-px":B()}],"scroll-py":[{"scroll-py":B()}],"scroll-ps":[{"scroll-ps":B()}],"scroll-pe":[{"scroll-pe":B()}],"scroll-pt":[{"scroll-pt":B()}],"scroll-pr":[{"scroll-pr":B()}],"scroll-pb":[{"scroll-pb":B()}],"scroll-pl":[{"scroll-pl":B()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",kr]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[jc,Su,Ey]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},vI=ZD(gI);function Oe(...e){return vI(Ok(e))}const xI=uD,sC=x.forwardRef(({className:e,...t},r)=>s.jsx(Pk,{ref:r,className:Oe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));sC.displayName=Pk.displayName;const yI=Xh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),aC=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(Ak,{ref:n,className:Oe(yI({variant:t}),e),...r}));aC.displayName=Ak.displayName;const wI=x.forwardRef(({className:e,...t},r)=>s.jsx(Lk,{ref:r,className:Oe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));wI.displayName=Lk.displayName;const iC=x.forwardRef(({className:e,...t},r)=>s.jsx(Dk,{ref:r,className:Oe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(hn,{className:"h-4 w-4"})}));iC.displayName=Dk.displayName;const oC=x.forwardRef(({className:e,...t},r)=>s.jsx(Tk,{ref:r,className:Oe("text-sm font-semibold",e),...t}));oC.displayName=Tk.displayName;const lC=x.forwardRef(({className:e,...t},r)=>s.jsx(Rk,{ref:r,className:Oe("text-sm opacity-90",e),...t}));lC.displayName=Rk.displayName;function bI(){const{toasts:e}=Er();return s.jsxs(xI,{children:[e.map(function({id:t,title:r,description:n,action:a,...i}){return s.jsxs(aC,{...i,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(oC,{children:r}),n&&s.jsx(lC,{children:n})]}),a,s.jsx(iC,{})]},t)}),s.jsx(sC,{})]})}var Yj=["light","dark"],jI="(prefers-color-scheme: dark)",_I=x.createContext(void 0),NI={setTheme:e=>{},themes:[]},SI=()=>{var e;return(e=x.useContext(_I))!=null?e:NI};x.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:a,defaultTheme:i,value:o,attrs:l,nonce:u})=>{let f=i==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(N=>`'${N}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,p=a?Yj.includes(i)&&i?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${i}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(N,w=!1,j=!0)=>{let _=o?o[N]:N,C=w?N+"|| ''":`'${_}'`,k="";return a&&j&&!w&&Yj.includes(N)&&(k+=`d.style.colorScheme = '${N}';`),r==="class"?w||_?k+=`c.add(${C})`:k+="null":_&&(k+=`d[s](n,${C})`),k},m=e?`!function(){${h}${v(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${f})){var t='${jI}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}${f?"":"else{"+v(i,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}else{${v(i,!1,!1)};}${p}}catch(t){}}();`;return x.createElement("script",{nonce:u,dangerouslySetInnerHTML:{__html:m}})});var kI=e=>{switch(e){case"success":return PI;case"info":return TI;case"warning":return AI;case"error":return RI;default:return null}},CI=Array(12).fill(0),EI=({visible:e,className:t})=>Ve.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ve.createElement("div",{className:"sonner-spinner"},CI.map((r,n)=>Ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),PI=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),AI=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),TI=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),RI=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),LI=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),DI=()=>{let[e,t]=Ve.useState(document.hidden);return Ve.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},dw=1,II=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...a}=t,i=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:dw++,o=this.toasts.find(u=>u.id===i),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),o?this.toasts=this.toasts.map(u=>u.id===i?(this.publish({...u,...t,id:i,title:n}),{...u,...t,id:i,dismissible:l,title:n}):u):this.addToast({title:n,...a,dismissible:l,id:i}),i},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let a=t instanceof Promise?t:t(),i=n!==void 0,o,l=a.then(async f=>{if(o=["resolve",f],Ve.isValidElement(f))i=!1,this.create({id:n,type:"default",message:f});else if(MI(f)&&!f.ok){i=!1;let h=typeof r.error=="function"?await r.error(`HTTP error! status: ${f.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${f.status}`):r.description;this.create({id:n,type:"error",message:h,description:p})}else if(r.success!==void 0){i=!1;let h=typeof r.success=="function"?await r.success(f):r.success,p=typeof r.description=="function"?await r.description(f):r.description;this.create({id:n,type:"success",message:h,description:p})}}).catch(async f=>{if(o=["reject",f],r.error!==void 0){i=!1;let h=typeof r.error=="function"?await r.error(f):r.error,p=typeof r.description=="function"?await r.description(f):r.description;this.create({id:n,type:"error",message:h,description:p})}}).finally(()=>{var f;i&&(this.dismiss(n),n=void 0),(f=r.finally)==null||f.call(r)}),u=()=>new Promise((f,h)=>l.then(()=>o[0]==="reject"?h(o[1]):f(o[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:u}:Object.assign(n,{unwrap:u})},this.custom=(t,r)=>{let n=r?.id||dw++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},ui=new II,OI=(e,t)=>{let r=t?.id||dw++;return ui.addToast({title:e,...t,id:r}),r},MI=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",FI=OI,BI=()=>ui.toasts,UI=()=>ui.getActiveToasts(),$I=Object.assign(FI,{success:ui.success,info:ui.info,warning:ui.warning,error:ui.error,custom:ui.custom,message:ui.message,promise:ui.promise,dismiss:ui.dismiss,loading:ui.loading},{getHistory:BI,getToasts:UI});function zI(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}zI(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Zg(e){return e.label!==void 0}var qI=3,VI="32px",WI="16px",Qj=4e3,HI=356,GI=14,KI=20,YI=200;function Po(...e){return e.filter(Boolean).join(" ")}function QI(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var JI=e=>{var t,r,n,a,i,o,l,u,f,h,p;let{invert:v,toast:m,unstyled:N,interacting:w,setHeights:j,visibleToasts:_,heights:C,index:k,toasts:E,expanded:I,removeToast:D,defaultRichColors:O,closeButton:F,style:T,cancelButtonStyle:z,actionButtonStyle:U,className:B="",descriptionClassName:K="",duration:V,position:de,gap:se,loadingIcon:Y,expandByDefault:W,classNames:ee,icons:ge,closeButtonAriaLabel:re="Close toast",pauseWhenPageIsHidden:L}=e,[q,J]=Ve.useState(null),[ne,ue]=Ve.useState(null),[ie,oe]=Ve.useState(!1),[le,ye]=Ve.useState(!1),[Pe,We]=Ve.useState(!1),[Fe,je]=Ve.useState(!1),[te,Ze]=Ve.useState(!1),[Nt,pt]=Ve.useState(0),[Qe,me]=Ve.useState(0),xe=Ve.useRef(m.duration||V||Qj),Ce=Ve.useRef(null),$e=Ve.useRef(null),et=k===0,Ge=k+1<=_,tt=m.type,gt=m.dismissible!==!1,_t=m.className||"",yt=m.descriptionClassName||"",zt=Ve.useMemo(()=>C.findIndex(Kt=>Kt.toastId===m.id)||0,[C,m.id]),bt=Ve.useMemo(()=>{var Kt;return(Kt=m.closeButton)!=null?Kt:F},[m.closeButton,F]),Jr=Ve.useMemo(()=>m.duration||V||Qj,[m.duration,V]),dr=Ve.useRef(0),Yt=Ve.useRef(0),or=Ve.useRef(0),Pr=Ve.useRef(null),[Ue,ar]=de.split("-"),Ht=Ve.useMemo(()=>C.reduce((Kt,ir,Ar)=>Ar>=zt?Kt:Kt+ir.height,0),[C,zt]),Xt=DI(),Fr=m.invert||v,er=tt==="loading";Yt.current=Ve.useMemo(()=>zt*se+Ht,[zt,Ht]),Ve.useEffect(()=>{xe.current=Jr},[Jr]),Ve.useEffect(()=>{oe(!0)},[]),Ve.useEffect(()=>{let Kt=$e.current;if(Kt){let ir=Kt.getBoundingClientRect().height;return me(ir),j(Ar=>[{toastId:m.id,height:ir,position:m.position},...Ar]),()=>j(Ar=>Ar.filter(un=>un.toastId!==m.id))}},[j,m.id]),Ve.useLayoutEffect(()=>{if(!ie)return;let Kt=$e.current,ir=Kt.style.height;Kt.style.height="auto";let Ar=Kt.getBoundingClientRect().height;Kt.style.height=ir,me(Ar),j(un=>un.find(At=>At.toastId===m.id)?un.map(At=>At.toastId===m.id?{...At,height:Ar}:At):[{toastId:m.id,height:Ar,position:m.position},...un])},[ie,m.title,m.description,j,m.id]);let Rt=Ve.useCallback(()=>{ye(!0),pt(Yt.current),j(Kt=>Kt.filter(ir=>ir.toastId!==m.id)),setTimeout(()=>{D(m)},YI)},[m,D,j,Yt]);Ve.useEffect(()=>{if(m.promise&&tt==="loading"||m.duration===1/0||m.type==="loading")return;let Kt;return I||w||L&&Xt?(()=>{if(or.current<dr.current){let ir=new Date().getTime()-dr.current;xe.current=xe.current-ir}or.current=new Date().getTime()})():xe.current!==1/0&&(dr.current=new Date().getTime(),Kt=setTimeout(()=>{var ir;(ir=m.onAutoClose)==null||ir.call(m,m),Rt()},xe.current)),()=>clearTimeout(Kt)},[I,w,m,tt,L,Xt,Rt]),Ve.useEffect(()=>{m.delete&&Rt()},[Rt,m.delete]);function Ir(){var Kt,ir,Ar;return ge!=null&&ge.loading?Ve.createElement("div",{className:Po(ee?.loader,(Kt=m?.classNames)==null?void 0:Kt.loader,"sonner-loader"),"data-visible":tt==="loading"},ge.loading):Y?Ve.createElement("div",{className:Po(ee?.loader,(ir=m?.classNames)==null?void 0:ir.loader,"sonner-loader"),"data-visible":tt==="loading"},Y):Ve.createElement(EI,{className:Po(ee?.loader,(Ar=m?.classNames)==null?void 0:Ar.loader),visible:tt==="loading"})}return Ve.createElement("li",{tabIndex:0,ref:$e,className:Po(B,_t,ee?.toast,(t=m?.classNames)==null?void 0:t.toast,ee?.default,ee?.[tt],(r=m?.classNames)==null?void 0:r[tt]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:O,"data-styled":!(m.jsx||m.unstyled||N),"data-mounted":ie,"data-promise":!!m.promise,"data-swiped":te,"data-removed":le,"data-visible":Ge,"data-y-position":Ue,"data-x-position":ar,"data-index":k,"data-front":et,"data-swiping":Pe,"data-dismissible":gt,"data-type":tt,"data-invert":Fr,"data-swipe-out":Fe,"data-swipe-direction":ne,"data-expanded":!!(I||W&&ie),style:{"--index":k,"--toasts-before":k,"--z-index":E.length-k,"--offset":`${le?Nt:Yt.current}px`,"--initial-height":W?"auto":`${Qe}px`,...T,...m.style},onDragEnd:()=>{We(!1),J(null),Pr.current=null},onPointerDown:Kt=>{er||!gt||(Ce.current=new Date,pt(Yt.current),Kt.target.setPointerCapture(Kt.pointerId),Kt.target.tagName!=="BUTTON"&&(We(!0),Pr.current={x:Kt.clientX,y:Kt.clientY}))},onPointerUp:()=>{var Kt,ir,Ar,un;if(Fe||!gt)return;Pr.current=null;let At=Number(((Kt=$e.current)==null?void 0:Kt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ee=Number(((ir=$e.current)==null?void 0:ir.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),at=new Date().getTime()-((Ar=Ce.current)==null?void 0:Ar.getTime()),wt=q==="x"?At:Ee,Zt=Math.abs(wt)/at;if(Math.abs(wt)>=KI||Zt>.11){pt(Yt.current),(un=m.onDismiss)==null||un.call(m,m),ue(q==="x"?At>0?"right":"left":Ee>0?"down":"up"),Rt(),je(!0),Ze(!1);return}We(!1),J(null)},onPointerMove:Kt=>{var ir,Ar,un,At;if(!Pr.current||!gt||((ir=window.getSelection())==null?void 0:ir.toString().length)>0)return;let Ee=Kt.clientY-Pr.current.y,at=Kt.clientX-Pr.current.x,wt=(Ar=e.swipeDirections)!=null?Ar:QI(de);!q&&(Math.abs(at)>1||Math.abs(Ee)>1)&&J(Math.abs(at)>Math.abs(Ee)?"x":"y");let Zt={x:0,y:0};q==="y"?(wt.includes("top")||wt.includes("bottom"))&&(wt.includes("top")&&Ee<0||wt.includes("bottom")&&Ee>0)&&(Zt.y=Ee):q==="x"&&(wt.includes("left")||wt.includes("right"))&&(wt.includes("left")&&at<0||wt.includes("right")&&at>0)&&(Zt.x=at),(Math.abs(Zt.x)>0||Math.abs(Zt.y)>0)&&Ze(!0),(un=$e.current)==null||un.style.setProperty("--swipe-amount-x",`${Zt.x}px`),(At=$e.current)==null||At.style.setProperty("--swipe-amount-y",`${Zt.y}px`)}},bt&&!m.jsx?Ve.createElement("button",{"aria-label":re,"data-disabled":er,"data-close-button":!0,onClick:er||!gt?()=>{}:()=>{var Kt;Rt(),(Kt=m.onDismiss)==null||Kt.call(m,m)},className:Po(ee?.closeButton,(a=m?.classNames)==null?void 0:a.closeButton)},(i=ge?.close)!=null?i:LI):null,m.jsx||x.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Ve.createElement(Ve.Fragment,null,tt||m.icon||m.promise?Ve.createElement("div",{"data-icon":"",className:Po(ee?.icon,(o=m?.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ir():null,m.type!=="loading"?m.icon||ge?.[tt]||kI(tt):null):null,Ve.createElement("div",{"data-content":"",className:Po(ee?.content,(l=m?.classNames)==null?void 0:l.content)},Ve.createElement("div",{"data-title":"",className:Po(ee?.title,(u=m?.classNames)==null?void 0:u.title)},typeof m.title=="function"?m.title():m.title),m.description?Ve.createElement("div",{"data-description":"",className:Po(K,yt,ee?.description,(f=m?.classNames)==null?void 0:f.description)},typeof m.description=="function"?m.description():m.description):null),x.isValidElement(m.cancel)?m.cancel:m.cancel&&Zg(m.cancel)?Ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||z,onClick:Kt=>{var ir,Ar;Zg(m.cancel)&&gt&&((Ar=(ir=m.cancel).onClick)==null||Ar.call(ir,Kt),Rt())},className:Po(ee?.cancelButton,(h=m?.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,x.isValidElement(m.action)?m.action:m.action&&Zg(m.action)?Ve.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||U,onClick:Kt=>{var ir,Ar;Zg(m.action)&&((Ar=(ir=m.action).onClick)==null||Ar.call(ir,Kt),!Kt.defaultPrevented&&Rt())},className:Po(ee?.actionButton,(p=m?.classNames)==null?void 0:p.actionButton)},m.action.label):null))};function Jj(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function ZI(e,t){let r={};return[e,t].forEach((n,a)=>{let i=a===1,o=i?"--mobile-offset":"--offset",l=i?WI:VI;function u(f){["top","right","bottom","left"].forEach(h=>{r[`${o}-${h}`]=typeof f=="number"?`${f}px`:f})}typeof n=="number"||typeof n=="string"?u(n):typeof n=="object"?["top","right","bottom","left"].forEach(f=>{n[f]===void 0?r[`${o}-${f}`]=l:r[`${o}-${f}`]=typeof n[f]=="number"?`${n[f]}px`:n[f]}):u(l)}),r}var XI=x.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:a=["altKey","KeyT"],expand:i,closeButton:o,className:l,offset:u,mobileOffset:f,theme:h="light",richColors:p,duration:v,style:m,visibleToasts:N=qI,toastOptions:w,dir:j=Jj(),gap:_=GI,loadingIcon:C,icons:k,containerAriaLabel:E="Notifications",pauseWhenPageIsHidden:I}=e,[D,O]=Ve.useState([]),F=Ve.useMemo(()=>Array.from(new Set([n].concat(D.filter(L=>L.position).map(L=>L.position)))),[D,n]),[T,z]=Ve.useState([]),[U,B]=Ve.useState(!1),[K,V]=Ve.useState(!1),[de,se]=Ve.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Y=Ve.useRef(null),W=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),ee=Ve.useRef(null),ge=Ve.useRef(!1),re=Ve.useCallback(L=>{O(q=>{var J;return(J=q.find(ne=>ne.id===L.id))!=null&&J.delete||ui.dismiss(L.id),q.filter(({id:ne})=>ne!==L.id)})},[]);return Ve.useEffect(()=>ui.subscribe(L=>{if(L.dismiss){O(q=>q.map(J=>J.id===L.id?{...J,delete:!0}:J));return}setTimeout(()=>{lk.flushSync(()=>{O(q=>{let J=q.findIndex(ne=>ne.id===L.id);return J!==-1?[...q.slice(0,J),{...q[J],...L},...q.slice(J+1)]:[L,...q]})})})}),[]),Ve.useEffect(()=>{if(h!=="system"){se(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?se("dark"):se("light")),typeof window>"u")return;let L=window.matchMedia("(prefers-color-scheme: dark)");try{L.addEventListener("change",({matches:q})=>{se(q?"dark":"light")})}catch{L.addListener(({matches:J})=>{try{se(J?"dark":"light")}catch(ne){console.error(ne)}})}},[h]),Ve.useEffect(()=>{D.length<=1&&B(!1)},[D]),Ve.useEffect(()=>{let L=q=>{var J,ne;a.every(ue=>q[ue]||q.code===ue)&&(B(!0),(J=Y.current)==null||J.focus()),q.code==="Escape"&&(document.activeElement===Y.current||(ne=Y.current)!=null&&ne.contains(document.activeElement))&&B(!1)};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[a]),Ve.useEffect(()=>{if(Y.current)return()=>{ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null,ge.current=!1)}},[Y.current]),Ve.createElement("section",{ref:t,"aria-label":`${E} ${W}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},F.map((L,q)=>{var J;let[ne,ue]=L.split("-");return D.length?Ve.createElement("ol",{key:L,dir:j==="auto"?Jj():j,tabIndex:-1,ref:Y,className:l,"data-sonner-toaster":!0,"data-theme":de,"data-y-position":ne,"data-lifted":U&&D.length>1&&!i,"data-x-position":ue,style:{"--front-toast-height":`${((J=T[0])==null?void 0:J.height)||0}px`,"--width":`${HI}px`,"--gap":`${_}px`,...m,...ZI(u,f)},onBlur:ie=>{ge.current&&!ie.currentTarget.contains(ie.relatedTarget)&&(ge.current=!1,ee.current&&(ee.current.focus({preventScroll:!0}),ee.current=null))},onFocus:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||ge.current||(ge.current=!0,ee.current=ie.relatedTarget)},onMouseEnter:()=>B(!0),onMouseMove:()=>B(!0),onMouseLeave:()=>{K||B(!1)},onDragEnd:()=>B(!1),onPointerDown:ie=>{ie.target instanceof HTMLElement&&ie.target.dataset.dismissible==="false"||V(!0)},onPointerUp:()=>V(!1)},D.filter(ie=>!ie.position&&q===0||ie.position===L).map((ie,oe)=>{var le,ye;return Ve.createElement(JI,{key:ie.id,icons:k,index:oe,toast:ie,defaultRichColors:p,duration:(le=w?.duration)!=null?le:v,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:r,visibleToasts:N,closeButton:(ye=w?.closeButton)!=null?ye:o,interacting:K,position:L,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,removeToast:re,toasts:D.filter(Pe=>Pe.position==ie.position),heights:T.filter(Pe=>Pe.position==ie.position),setHeights:z,expandByDefault:i,gap:_,loadingIcon:C,expanded:U,pauseWhenPageIsHidden:I,swipeDirections:e.swipeDirections})})):null}))});const eO=({...e})=>{const{theme:t="system"}=SI();return s.jsx(XI,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var tO=Sb[" useId ".trim().toString()]||(()=>{}),rO=0;function Xs(e){const[t,r]=x.useState(tO());return ys(()=>{r(n=>n??String(rO++))},[e]),t?`radix-${t}`:""}const nO=["top","right","bottom","left"],qu=Math.min,Li=Math.max,Yv=Math.round,Xg=Math.floor,El=e=>({x:e,y:e}),sO={left:"right",right:"left",bottom:"top",top:"bottom"},aO={start:"end",end:"start"};function fw(e,t,r){return Li(e,qu(t,r))}function Uc(e,t){return typeof e=="function"?e(t):e}function $c(e){return e.split("-")[0]}function tm(e){return e.split("-")[1]}function Mb(e){return e==="x"?"y":"x"}function Fb(e){return e==="y"?"height":"width"}const iO=new Set(["top","bottom"]);function _l(e){return iO.has($c(e))?"y":"x"}function Bb(e){return Mb(_l(e))}function oO(e,t,r){r===void 0&&(r=!1);const n=tm(e),a=Bb(e),i=Fb(a);let o=a==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[i]>t.floating[i]&&(o=Qv(o)),[o,Qv(o)]}function lO(e){const t=Qv(e);return[hw(e),t,hw(t)]}function hw(e){return e.replace(/start|end/g,t=>aO[t])}const Zj=["left","right"],Xj=["right","left"],cO=["top","bottom"],uO=["bottom","top"];function dO(e,t,r){switch(e){case"top":case"bottom":return r?t?Xj:Zj:t?Zj:Xj;case"left":case"right":return t?cO:uO;default:return[]}}function fO(e,t,r,n){const a=tm(e);let i=dO($c(e),r==="start",n);return a&&(i=i.map(o=>o+"-"+a),t&&(i=i.concat(i.map(hw)))),i}function Qv(e){return e.replace(/left|right|bottom|top/g,t=>sO[t])}function hO(e){return{top:0,right:0,bottom:0,left:0,...e}}function cC(e){return typeof e!="number"?hO(e):{top:e,right:e,bottom:e,left:e}}function Jv(e){const{x:t,y:r,width:n,height:a}=e;return{width:n,height:a,top:r,left:t,right:t+n,bottom:r+a,x:t,y:r}}function e_(e,t,r){let{reference:n,floating:a}=e;const i=_l(t),o=Bb(t),l=Fb(o),u=$c(t),f=i==="y",h=n.x+n.width/2-a.width/2,p=n.y+n.height/2-a.height/2,v=n[l]/2-a[l]/2;let m;switch(u){case"top":m={x:h,y:n.y-a.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-a.width,y:p};break;default:m={x:n.x,y:n.y}}switch(tm(t)){case"start":m[o]-=v*(r&&f?-1:1);break;case"end":m[o]+=v*(r&&f?-1:1);break}return m}const mO=async(e,t,r)=>{const{placement:n="bottom",strategy:a="absolute",middleware:i=[],platform:o}=r,l=i.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:a}),{x:h,y:p}=e_(f,n,u),v=n,m={},N=0;for(let w=0;w<l.length;w++){const{name:j,fn:_}=l[w],{x:C,y:k,data:E,reset:I}=await _({x:h,y:p,initialPlacement:n,placement:v,strategy:a,middlewareData:m,rects:f,platform:o,elements:{reference:e,floating:t}});h=C??h,p=k??p,m={...m,[j]:{...m[j],...E}},I&&N<=50&&(N++,typeof I=="object"&&(I.placement&&(v=I.placement),I.rects&&(f=I.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:a}):I.rects),{x:h,y:p}=e_(f,v,u)),w=-1)}return{x:h,y:p,placement:v,strategy:a,middlewareData:m}};async function wp(e,t){var r;t===void 0&&(t={});const{x:n,y:a,platform:i,rects:o,elements:l,strategy:u}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:m=0}=Uc(t,e),N=cC(m),j=l[v?p==="floating"?"reference":"floating":p],_=Jv(await i.getClippingRect({element:(r=await(i.isElement==null?void 0:i.isElement(j)))==null||r?j:j.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(l.floating)),boundary:f,rootBoundary:h,strategy:u})),C=p==="floating"?{x:n,y:a,width:o.floating.width,height:o.floating.height}:o.reference,k=await(i.getOffsetParent==null?void 0:i.getOffsetParent(l.floating)),E=await(i.isElement==null?void 0:i.isElement(k))?await(i.getScale==null?void 0:i.getScale(k))||{x:1,y:1}:{x:1,y:1},I=Jv(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:C,offsetParent:k,strategy:u}):C);return{top:(_.top-I.top+N.top)/E.y,bottom:(I.bottom-_.bottom+N.bottom)/E.y,left:(_.left-I.left+N.left)/E.x,right:(I.right-_.right+N.right)/E.x}}const pO=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:a,rects:i,platform:o,elements:l,middlewareData:u}=t,{element:f,padding:h=0}=Uc(e,t)||{};if(f==null)return{};const p=cC(h),v={x:r,y:n},m=Bb(a),N=Fb(m),w=await o.getDimensions(f),j=m==="y",_=j?"top":"left",C=j?"bottom":"right",k=j?"clientHeight":"clientWidth",E=i.reference[N]+i.reference[m]-v[m]-i.floating[N],I=v[m]-i.reference[m],D=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let O=D?D[k]:0;(!O||!await(o.isElement==null?void 0:o.isElement(D)))&&(O=l.floating[k]||i.floating[N]);const F=E/2-I/2,T=O/2-w[N]/2-1,z=qu(p[_],T),U=qu(p[C],T),B=z,K=O-w[N]-U,V=O/2-w[N]/2+F,de=fw(B,V,K),se=!u.arrow&&tm(a)!=null&&V!==de&&i.reference[N]/2-(V<B?z:U)-w[N]/2<0,Y=se?V<B?V-B:V-K:0;return{[m]:v[m]+Y,data:{[m]:de,centerOffset:V-de-Y,...se&&{alignmentOffset:Y}},reset:se}}}),gO=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:a,middlewareData:i,rects:o,initialPlacement:l,platform:u,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:N="none",flipAlignment:w=!0,...j}=Uc(e,t);if((r=i.arrow)!=null&&r.alignmentOffset)return{};const _=$c(a),C=_l(l),k=$c(l)===l,E=await(u.isRTL==null?void 0:u.isRTL(f.floating)),I=v||(k||!w?[Qv(l)]:lO(l)),D=N!=="none";!v&&D&&I.push(...fO(l,w,N,E));const O=[l,...I],F=await wp(t,j),T=[];let z=((n=i.flip)==null?void 0:n.overflows)||[];if(h&&T.push(F[_]),p){const V=oO(a,o,E);T.push(F[V[0]],F[V[1]])}if(z=[...z,{placement:a,overflows:T}],!T.every(V=>V<=0)){var U,B;const V=(((U=i.flip)==null?void 0:U.index)||0)+1,de=O[V];if(de&&(!(p==="alignment"?C!==_l(de):!1)||z.every(W=>_l(W.placement)===C?W.overflows[0]>0:!0)))return{data:{index:V,overflows:z},reset:{placement:de}};let se=(B=z.filter(Y=>Y.overflows[0]<=0).sort((Y,W)=>Y.overflows[1]-W.overflows[1])[0])==null?void 0:B.placement;if(!se)switch(m){case"bestFit":{var K;const Y=(K=z.filter(W=>{if(D){const ee=_l(W.placement);return ee===C||ee==="y"}return!0}).map(W=>[W.placement,W.overflows.filter(ee=>ee>0).reduce((ee,ge)=>ee+ge,0)]).sort((W,ee)=>W[1]-ee[1])[0])==null?void 0:K[0];Y&&(se=Y);break}case"initialPlacement":se=l;break}if(a!==se)return{reset:{placement:se}}}return{}}}};function t_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function r_(e){return nO.some(t=>e[t]>=0)}const vO=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...a}=Uc(e,t);switch(n){case"referenceHidden":{const i=await wp(t,{...a,elementContext:"reference"}),o=t_(i,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:r_(o)}}}case"escaped":{const i=await wp(t,{...a,altBoundary:!0}),o=t_(i,r.floating);return{data:{escapedOffsets:o,escaped:r_(o)}}}default:return{}}}}},uC=new Set(["left","top"]);async function xO(e,t){const{placement:r,platform:n,elements:a}=e,i=await(n.isRTL==null?void 0:n.isRTL(a.floating)),o=$c(r),l=tm(r),u=_l(r)==="y",f=uC.has(o)?-1:1,h=i&&u?-1:1,p=Uc(t,e);let{mainAxis:v,crossAxis:m,alignmentAxis:N}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof N=="number"&&(m=l==="end"?N*-1:N),u?{x:m*h,y:v*f}:{x:v*f,y:m*h}}const yO=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:a,y:i,placement:o,middlewareData:l}=t,u=await xO(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:a+u.x,y:i+u.y,data:{...u,placement:o}}}}},wO=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:a}=t,{mainAxis:i=!0,crossAxis:o=!1,limiter:l={fn:j=>{let{x:_,y:C}=j;return{x:_,y:C}}},...u}=Uc(e,t),f={x:r,y:n},h=await wp(t,u),p=_l($c(a)),v=Mb(p);let m=f[v],N=f[p];if(i){const j=v==="y"?"top":"left",_=v==="y"?"bottom":"right",C=m+h[j],k=m-h[_];m=fw(C,m,k)}if(o){const j=p==="y"?"top":"left",_=p==="y"?"bottom":"right",C=N+h[j],k=N-h[_];N=fw(C,N,k)}const w=l.fn({...t,[v]:m,[p]:N});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[v]:i,[p]:o}}}}}},bO=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:a,rects:i,middlewareData:o}=t,{offset:l=0,mainAxis:u=!0,crossAxis:f=!0}=Uc(e,t),h={x:r,y:n},p=_l(a),v=Mb(p);let m=h[v],N=h[p];const w=Uc(l,t),j=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(u){const k=v==="y"?"height":"width",E=i.reference[v]-i.floating[k]+j.mainAxis,I=i.reference[v]+i.reference[k]-j.mainAxis;m<E?m=E:m>I&&(m=I)}if(f){var _,C;const k=v==="y"?"width":"height",E=uC.has($c(a)),I=i.reference[p]-i.floating[k]+(E&&((_=o.offset)==null?void 0:_[p])||0)+(E?0:j.crossAxis),D=i.reference[p]+i.reference[k]+(E?0:((C=o.offset)==null?void 0:C[p])||0)-(E?j.crossAxis:0);N<I?N=I:N>D&&(N=D)}return{[v]:m,[p]:N}}}},jO=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:a,rects:i,platform:o,elements:l}=t,{apply:u=()=>{},...f}=Uc(e,t),h=await wp(t,f),p=$c(a),v=tm(a),m=_l(a)==="y",{width:N,height:w}=i.floating;let j,_;p==="top"||p==="bottom"?(j=p,_=v===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(_=p,j=v==="end"?"top":"bottom");const C=w-h.top-h.bottom,k=N-h.left-h.right,E=qu(w-h[j],C),I=qu(N-h[_],k),D=!t.middlewareData.shift;let O=E,F=I;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(F=k),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(O=C),D&&!v){const z=Li(h.left,0),U=Li(h.right,0),B=Li(h.top,0),K=Li(h.bottom,0);m?F=N-2*(z!==0||U!==0?z+U:Li(h.left,h.right)):O=w-2*(B!==0||K!==0?B+K:Li(h.top,h.bottom))}await u({...t,availableWidth:F,availableHeight:O});const T=await o.getDimensions(l.floating);return N!==T.width||w!==T.height?{reset:{rects:!0}}:{}}}};function Mx(){return typeof window<"u"}function rm(e){return dC(e)?(e.nodeName||"").toLowerCase():"#document"}function Fi(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Fl(e){var t;return(t=(dC(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function dC(e){return Mx()?e instanceof Node||e instanceof Fi(e).Node:!1}function Ho(e){return Mx()?e instanceof Element||e instanceof Fi(e).Element:!1}function Ol(e){return Mx()?e instanceof HTMLElement||e instanceof Fi(e).HTMLElement:!1}function n_(e){return!Mx()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Fi(e).ShadowRoot}const _O=new Set(["inline","contents"]);function Gp(e){const{overflow:t,overflowX:r,overflowY:n,display:a}=Go(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!_O.has(a)}const NO=new Set(["table","td","th"]);function SO(e){return NO.has(rm(e))}const kO=[":popover-open",":modal"];function Fx(e){return kO.some(t=>{try{return e.matches(t)}catch{return!1}})}const CO=["transform","translate","scale","rotate","perspective"],EO=["transform","translate","scale","rotate","perspective","filter"],PO=["paint","layout","strict","content"];function Ub(e){const t=$b(),r=Ho(e)?Go(e):e;return CO.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||EO.some(n=>(r.willChange||"").includes(n))||PO.some(n=>(r.contain||"").includes(n))}function AO(e){let t=Vu(e);for(;Ol(t)&&!Ih(t);){if(Ub(t))return t;if(Fx(t))return null;t=Vu(t)}return null}function $b(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const TO=new Set(["html","body","#document"]);function Ih(e){return TO.has(rm(e))}function Go(e){return Fi(e).getComputedStyle(e)}function Bx(e){return Ho(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vu(e){if(rm(e)==="html")return e;const t=e.assignedSlot||e.parentNode||n_(e)&&e.host||Fl(e);return n_(t)?t.host:t}function fC(e){const t=Vu(e);return Ih(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ol(t)&&Gp(t)?t:fC(t)}function bp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const a=fC(e),i=a===((n=e.ownerDocument)==null?void 0:n.body),o=Fi(a);if(i){const l=mw(o);return t.concat(o,o.visualViewport||[],Gp(a)?a:[],l&&r?bp(l):[])}return t.concat(a,bp(a,[],r))}function mw(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function hC(e){const t=Go(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const a=Ol(e),i=a?e.offsetWidth:r,o=a?e.offsetHeight:n,l=Yv(r)!==i||Yv(n)!==o;return l&&(r=i,n=o),{width:r,height:n,$:l}}function zb(e){return Ho(e)?e:e.contextElement}function _h(e){const t=zb(e);if(!Ol(t))return El(1);const r=t.getBoundingClientRect(),{width:n,height:a,$:i}=hC(t);let o=(i?Yv(r.width):r.width)/n,l=(i?Yv(r.height):r.height)/a;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const RO=El(0);function mC(e){const t=Fi(e);return!$b()||!t.visualViewport?RO:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function LO(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==Fi(e)?!1:t}function Zd(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const a=e.getBoundingClientRect(),i=zb(e);let o=El(1);t&&(n?Ho(n)&&(o=_h(n)):o=_h(e));const l=LO(i,r,n)?mC(i):El(0);let u=(a.left+l.x)/o.x,f=(a.top+l.y)/o.y,h=a.width/o.x,p=a.height/o.y;if(i){const v=Fi(i),m=n&&Ho(n)?Fi(n):n;let N=v,w=mw(N);for(;w&&n&&m!==N;){const j=_h(w),_=w.getBoundingClientRect(),C=Go(w),k=_.left+(w.clientLeft+parseFloat(C.paddingLeft))*j.x,E=_.top+(w.clientTop+parseFloat(C.paddingTop))*j.y;u*=j.x,f*=j.y,h*=j.x,p*=j.y,u+=k,f+=E,N=Fi(w),w=mw(N)}}return Jv({width:h,height:p,x:u,y:f})}function Ux(e,t){const r=Bx(e).scrollLeft;return t?t.left+r:Zd(Fl(e)).left+r}function pC(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-Ux(e,r),a=r.top+t.scrollTop;return{x:n,y:a}}function DO(e){let{elements:t,rect:r,offsetParent:n,strategy:a}=e;const i=a==="fixed",o=Fl(n),l=t?Fx(t.floating):!1;if(n===o||l&&i)return r;let u={scrollLeft:0,scrollTop:0},f=El(1);const h=El(0),p=Ol(n);if((p||!p&&!i)&&((rm(n)!=="body"||Gp(o))&&(u=Bx(n)),Ol(n))){const m=Zd(n);f=_h(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const v=o&&!p&&!i?pC(o,u):El(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-u.scrollLeft*f.x+h.x+v.x,y:r.y*f.y-u.scrollTop*f.y+h.y+v.y}}function IO(e){return Array.from(e.getClientRects())}function OO(e){const t=Fl(e),r=Bx(e),n=e.ownerDocument.body,a=Li(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),i=Li(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+Ux(e);const l=-r.scrollTop;return Go(n).direction==="rtl"&&(o+=Li(t.clientWidth,n.clientWidth)-a),{width:a,height:i,x:o,y:l}}const s_=25;function MO(e,t){const r=Fi(e),n=Fl(e),a=r.visualViewport;let i=n.clientWidth,o=n.clientHeight,l=0,u=0;if(a){i=a.width,o=a.height;const h=$b();(!h||h&&t==="fixed")&&(l=a.offsetLeft,u=a.offsetTop)}const f=Ux(n);if(f<=0){const h=n.ownerDocument,p=h.body,v=getComputedStyle(p),m=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,N=Math.abs(n.clientWidth-p.clientWidth-m);N<=s_&&(i-=N)}else f<=s_&&(i+=f);return{width:i,height:o,x:l,y:u}}const FO=new Set(["absolute","fixed"]);function BO(e,t){const r=Zd(e,!0,t==="fixed"),n=r.top+e.clientTop,a=r.left+e.clientLeft,i=Ol(e)?_h(e):El(1),o=e.clientWidth*i.x,l=e.clientHeight*i.y,u=a*i.x,f=n*i.y;return{width:o,height:l,x:u,y:f}}function a_(e,t,r){let n;if(t==="viewport")n=MO(e,r);else if(t==="document")n=OO(Fl(e));else if(Ho(t))n=BO(t,r);else{const a=mC(e);n={x:t.x-a.x,y:t.y-a.y,width:t.width,height:t.height}}return Jv(n)}function gC(e,t){const r=Vu(e);return r===t||!Ho(r)||Ih(r)?!1:Go(r).position==="fixed"||gC(r,t)}function UO(e,t){const r=t.get(e);if(r)return r;let n=bp(e,[],!1).filter(l=>Ho(l)&&rm(l)!=="body"),a=null;const i=Go(e).position==="fixed";let o=i?Vu(e):e;for(;Ho(o)&&!Ih(o);){const l=Go(o),u=Ub(o);!u&&l.position==="fixed"&&(a=null),(i?!u&&!a:!u&&l.position==="static"&&!!a&&FO.has(a.position)||Gp(o)&&!u&&gC(e,o))?n=n.filter(h=>h!==o):a=l,o=Vu(o)}return t.set(e,n),n}function $O(e){let{element:t,boundary:r,rootBoundary:n,strategy:a}=e;const o=[...r==="clippingAncestors"?Fx(t)?[]:UO(t,this._c):[].concat(r),n],l=o[0],u=o.reduce((f,h)=>{const p=a_(t,h,a);return f.top=Li(p.top,f.top),f.right=qu(p.right,f.right),f.bottom=qu(p.bottom,f.bottom),f.left=Li(p.left,f.left),f},a_(t,l,a));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function zO(e){const{width:t,height:r}=hC(e);return{width:t,height:r}}function qO(e,t,r){const n=Ol(t),a=Fl(t),i=r==="fixed",o=Zd(e,!0,i,t);let l={scrollLeft:0,scrollTop:0};const u=El(0);function f(){u.x=Ux(a)}if(n||!n&&!i)if((rm(t)!=="body"||Gp(a))&&(l=Bx(t)),n){const m=Zd(t,!0,i,t);u.x=m.x+t.clientLeft,u.y=m.y+t.clientTop}else a&&f();i&&!n&&a&&f();const h=a&&!n&&!i?pC(a,l):El(0),p=o.left+l.scrollLeft-u.x-h.x,v=o.top+l.scrollTop-u.y-h.y;return{x:p,y:v,width:o.width,height:o.height}}function Py(e){return Go(e).position==="static"}function i_(e,t){if(!Ol(e)||Go(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Fl(e)===r&&(r=r.ownerDocument.body),r}function vC(e,t){const r=Fi(e);if(Fx(e))return r;if(!Ol(e)){let a=Vu(e);for(;a&&!Ih(a);){if(Ho(a)&&!Py(a))return a;a=Vu(a)}return r}let n=i_(e,t);for(;n&&SO(n)&&Py(n);)n=i_(n,t);return n&&Ih(n)&&Py(n)&&!Ub(n)?r:n||AO(e)||r}const VO=async function(e){const t=this.getOffsetParent||vC,r=this.getDimensions,n=await r(e.floating);return{reference:qO(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function WO(e){return Go(e).direction==="rtl"}const HO={convertOffsetParentRelativeRectToViewportRelativeRect:DO,getDocumentElement:Fl,getClippingRect:$O,getOffsetParent:vC,getElementRects:VO,getClientRects:IO,getDimensions:zO,getScale:_h,isElement:Ho,isRTL:WO};function xC(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function GO(e,t){let r=null,n;const a=Fl(e);function i(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,u){l===void 0&&(l=!1),u===void 0&&(u=1),i();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:m}=f;if(l||t(),!v||!m)return;const N=Xg(p),w=Xg(a.clientWidth-(h+v)),j=Xg(a.clientHeight-(p+m)),_=Xg(h),k={rootMargin:-N+"px "+-w+"px "+-j+"px "+-_+"px",threshold:Li(0,qu(1,u))||1};let E=!0;function I(D){const O=D[0].intersectionRatio;if(O!==u){if(!E)return o();O?o(!1,O):n=setTimeout(()=>{o(!1,1e-7)},1e3)}O===1&&!xC(f,e.getBoundingClientRect())&&o(),E=!1}try{r=new IntersectionObserver(I,{...k,root:a.ownerDocument})}catch{r=new IntersectionObserver(I,k)}r.observe(e)}return o(!0),i}function KO(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:a=!0,ancestorResize:i=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:u=!1}=n,f=zb(e),h=a||i?[...f?bp(f):[],...bp(t)]:[];h.forEach(_=>{a&&_.addEventListener("scroll",r,{passive:!0}),i&&_.addEventListener("resize",r)});const p=f&&l?GO(f,r):null;let v=-1,m=null;o&&(m=new ResizeObserver(_=>{let[C]=_;C&&C.target===f&&m&&(m.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var k;(k=m)==null||k.observe(t)})),r()}),f&&!u&&m.observe(f),m.observe(t));let N,w=u?Zd(e):null;u&&j();function j(){const _=Zd(e);w&&!xC(w,_)&&r(),w=_,N=requestAnimationFrame(j)}return r(),()=>{var _;h.forEach(C=>{a&&C.removeEventListener("scroll",r),i&&C.removeEventListener("resize",r)}),p?.(),(_=m)==null||_.disconnect(),m=null,u&&cancelAnimationFrame(N)}}const YO=yO,QO=wO,JO=gO,ZO=jO,XO=vO,o_=pO,eM=bO,tM=(e,t,r)=>{const n=new Map,a={platform:HO,...r},i={...a.platform,_c:n};return mO(e,t,{...a,platform:i})};var rM=typeof document<"u",nM=function(){},Iv=rM?x.useLayoutEffect:nM;function Zv(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,a;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Zv(e[n],t[n]))return!1;return!0}if(a=Object.keys(e),r=a.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,a[n]))return!1;for(n=r;n--!==0;){const i=a[n];if(!(i==="_owner"&&e.$$typeof)&&!Zv(e[i],t[i]))return!1}return!0}return e!==e&&t!==t}function yC(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function l_(e,t){const r=yC(e);return Math.round(t*r)/r}function Ay(e){const t=x.useRef(e);return Iv(()=>{t.current=e}),t}function sM(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:a,elements:{reference:i,floating:o}={},transform:l=!0,whileElementsMounted:u,open:f}=e,[h,p]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[v,m]=x.useState(n);Zv(v,n)||m(n);const[N,w]=x.useState(null),[j,_]=x.useState(null),C=x.useCallback(W=>{W!==D.current&&(D.current=W,w(W))},[]),k=x.useCallback(W=>{W!==O.current&&(O.current=W,_(W))},[]),E=i||N,I=o||j,D=x.useRef(null),O=x.useRef(null),F=x.useRef(h),T=u!=null,z=Ay(u),U=Ay(a),B=Ay(f),K=x.useCallback(()=>{if(!D.current||!O.current)return;const W={placement:t,strategy:r,middleware:v};U.current&&(W.platform=U.current),tM(D.current,O.current,W).then(ee=>{const ge={...ee,isPositioned:B.current!==!1};V.current&&!Zv(F.current,ge)&&(F.current=ge,Jh.flushSync(()=>{p(ge)}))})},[v,t,r,U,B]);Iv(()=>{f===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,p(W=>({...W,isPositioned:!1})))},[f]);const V=x.useRef(!1);Iv(()=>(V.current=!0,()=>{V.current=!1}),[]),Iv(()=>{if(E&&(D.current=E),I&&(O.current=I),E&&I){if(z.current)return z.current(E,I,K);K()}},[E,I,K,z,T]);const de=x.useMemo(()=>({reference:D,floating:O,setReference:C,setFloating:k}),[C,k]),se=x.useMemo(()=>({reference:E,floating:I}),[E,I]),Y=x.useMemo(()=>{const W={position:r,left:0,top:0};if(!se.floating)return W;const ee=l_(se.floating,h.x),ge=l_(se.floating,h.y);return l?{...W,transform:"translate("+ee+"px, "+ge+"px)",...yC(se.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:ee,top:ge}},[r,l,se.floating,h.x,h.y]);return x.useMemo(()=>({...h,update:K,refs:de,elements:se,floatingStyles:Y}),[h,K,de,se,Y])}const aM=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:a}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?o_({element:n.current,padding:a}).fn(r):{}:n?o_({element:n,padding:a}).fn(r):{}}}},iM=(e,t)=>({...YO(e),options:[e,t]}),oM=(e,t)=>({...QO(e),options:[e,t]}),lM=(e,t)=>({...eM(e),options:[e,t]}),cM=(e,t)=>({...JO(e),options:[e,t]}),uM=(e,t)=>({...ZO(e),options:[e,t]}),dM=(e,t)=>({...XO(e),options:[e,t]}),fM=(e,t)=>({...aM(e),options:[e,t]});var hM="Arrow",wC=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:a=5,...i}=e;return s.jsx(vt.svg,{...i,ref:t,width:n,height:a,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});wC.displayName=hM;var mM=wC;function Kp(e){const[t,r]=x.useState(void 0);return ys(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(a=>{if(!Array.isArray(a)||!a.length)return;const i=a[0];let o,l;if("borderBoxSize"in i){const u=i.borderBoxSize,f=Array.isArray(u)?u[0]:u;o=f.inlineSize,l=f.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var qb="Popper",[bC,Qu]=bs(qb),[pM,jC]=bC(qb),_C=e=>{const{__scopePopper:t,children:r}=e,[n,a]=x.useState(null);return s.jsx(pM,{scope:t,anchor:n,onAnchorChange:a,children:r})};_C.displayName=qb;var NC="PopperAnchor",SC=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...a}=e,i=jC(NC,r),o=x.useRef(null),l=Jt(t,o),u=x.useRef(null);return x.useEffect(()=>{const f=u.current;u.current=n?.current||o.current,f!==u.current&&i.onAnchorChange(u.current)}),n?null:s.jsx(vt.div,{...a,ref:l})});SC.displayName=NC;var Vb="PopperContent",[gM,vM]=bC(Vb),kC=x.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:a=0,align:i="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:u=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:m="optimized",onPlaced:N,...w}=e,j=jC(Vb,r),[_,C]=x.useState(null),k=Jt(t,ie=>C(ie)),[E,I]=x.useState(null),D=Kp(E),O=D?.width??0,F=D?.height??0,T=n+(i!=="center"?"-"+i:""),z=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},U=Array.isArray(f)?f:[f],B=U.length>0,K={padding:z,boundary:U.filter(yM),altBoundary:B},{refs:V,floatingStyles:de,placement:se,isPositioned:Y,middlewareData:W}=sM({strategy:"fixed",placement:T,whileElementsMounted:(...ie)=>KO(...ie,{animationFrame:m==="always"}),elements:{reference:j.anchor},middleware:[iM({mainAxis:a+F,alignmentAxis:o}),u&&oM({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?lM():void 0,...K}),u&&cM({...K}),uM({...K,apply:({elements:ie,rects:oe,availableWidth:le,availableHeight:ye})=>{const{width:Pe,height:We}=oe.reference,Fe=ie.floating.style;Fe.setProperty("--radix-popper-available-width",`${le}px`),Fe.setProperty("--radix-popper-available-height",`${ye}px`),Fe.setProperty("--radix-popper-anchor-width",`${Pe}px`),Fe.setProperty("--radix-popper-anchor-height",`${We}px`)}}),E&&fM({element:E,padding:l}),wM({arrowWidth:O,arrowHeight:F}),v&&dM({strategy:"referenceHidden",...K})]}),[ee,ge]=PC(se),re=as(N);ys(()=>{Y&&re?.()},[Y,re]);const L=W.arrow?.x,q=W.arrow?.y,J=W.arrow?.centerOffset!==0,[ne,ue]=x.useState();return ys(()=>{_&&ue(window.getComputedStyle(_).zIndex)},[_]),s.jsx("div",{ref:V.setFloating,"data-radix-popper-content-wrapper":"",style:{...de,transform:Y?de.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ne,"--radix-popper-transform-origin":[W.transformOrigin?.x,W.transformOrigin?.y].join(" "),...W.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(gM,{scope:r,placedSide:ee,onArrowChange:I,arrowX:L,arrowY:q,shouldHideArrow:J,children:s.jsx(vt.div,{"data-side":ee,"data-align":ge,...w,ref:k,style:{...w.style,animation:Y?void 0:"none"}})})})});kC.displayName=Vb;var CC="PopperArrow",xM={top:"bottom",right:"left",bottom:"top",left:"right"},EC=x.forwardRef(function(t,r){const{__scopePopper:n,...a}=t,i=vM(CC,n),o=xM[i.placedSide];return s.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:s.jsx(mM,{...a,ref:r,style:{...a.style,display:"block"}})})});EC.displayName=CC;function yM(e){return e!==null}var wM=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:a}=t,o=a.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,u=o?0:e.arrowHeight,[f,h]=PC(r),p={start:"0%",center:"50%",end:"100%"}[h],v=(a.arrow?.x??0)+l/2,m=(a.arrow?.y??0)+u/2;let N="",w="";return f==="bottom"?(N=o?p:`${v}px`,w=`${-u}px`):f==="top"?(N=o?p:`${v}px`,w=`${n.floating.height+u}px`):f==="right"?(N=`${-u}px`,w=o?p:`${m}px`):f==="left"&&(N=`${n.floating.width+u}px`,w=o?p:`${m}px`),{data:{x:N,y:w}}}});function PC(e){const[t,r="center"]=e.split("-");return[t,r]}var $x=_C,Yp=SC,zx=kC,qx=EC,[Vx]=bs("Tooltip",[Qu]),Wx=Qu(),AC="TooltipProvider",bM=700,pw="tooltip.open",[jM,Wb]=Vx(AC),TC=e=>{const{__scopeTooltip:t,delayDuration:r=bM,skipDelayDuration:n=300,disableHoverableContent:a=!1,children:i}=e,o=x.useRef(!0),l=x.useRef(!1),u=x.useRef(0);return x.useEffect(()=>{const f=u.current;return()=>window.clearTimeout(f)},[]),s.jsx(jM,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(u.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(u.current),u.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(f=>{l.current=f},[]),disableHoverableContent:a,children:i})};TC.displayName=AC;var jp="Tooltip",[_M,Hx]=Vx(jp),RC=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:a,onOpenChange:i,disableHoverableContent:o,delayDuration:l}=e,u=Wb(jp,e.__scopeTooltip),f=Wx(t),[h,p]=x.useState(null),v=Xs(),m=x.useRef(0),N=o??u.disableHoverableContent,w=l??u.delayDuration,j=x.useRef(!1),[_,C]=Ea({prop:n,defaultProp:a??!1,onChange:O=>{O?(u.onOpen(),document.dispatchEvent(new CustomEvent(pw))):u.onClose(),i?.(O)},caller:jp}),k=x.useMemo(()=>_?j.current?"delayed-open":"instant-open":"closed",[_]),E=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,j.current=!1,C(!0)},[C]),I=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,C(!1)},[C]),D=x.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{j.current=!0,C(!0),m.current=0},w)},[w,C]);return x.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx($x,{...f,children:s.jsx(_M,{scope:t,contentId:v,open:_,stateAttribute:k,trigger:h,onTriggerChange:p,onTriggerEnter:x.useCallback(()=>{u.isOpenDelayedRef.current?D():E()},[u.isOpenDelayedRef,D,E]),onTriggerLeave:x.useCallback(()=>{N?I():(window.clearTimeout(m.current),m.current=0)},[I,N]),onOpen:E,onClose:I,disableHoverableContent:N,children:r})})};RC.displayName=jp;var gw="TooltipTrigger",LC=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Hx(gw,r),i=Wb(gw,r),o=Wx(r),l=x.useRef(null),u=Jt(t,l,a.onTriggerChange),f=x.useRef(!1),h=x.useRef(!1),p=x.useCallback(()=>f.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),s.jsx(Yp,{asChild:!0,...o,children:s.jsx(vt.button,{"aria-describedby":a.open?a.contentId:void 0,"data-state":a.stateAttribute,...n,ref:u,onPointerMove:lt(e.onPointerMove,v=>{v.pointerType!=="touch"&&!h.current&&!i.isPointerInTransitRef.current&&(a.onTriggerEnter(),h.current=!0)}),onPointerLeave:lt(e.onPointerLeave,()=>{a.onTriggerLeave(),h.current=!1}),onPointerDown:lt(e.onPointerDown,()=>{a.open&&a.onClose(),f.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:lt(e.onFocus,()=>{f.current||a.onOpen()}),onBlur:lt(e.onBlur,a.onClose),onClick:lt(e.onClick,a.onClose)})})});LC.displayName=gw;var NM="TooltipPortal",[jte,SM]=Vx(NM,{forceMount:void 0}),Oh="TooltipContent",DC=x.forwardRef((e,t)=>{const r=SM(Oh,e.__scopeTooltip),{forceMount:n=r.forceMount,side:a="top",...i}=e,o=Hx(Oh,e.__scopeTooltip);return s.jsx(qs,{present:n||o.open,children:o.disableHoverableContent?s.jsx(IC,{side:a,...i,ref:t}):s.jsx(kM,{side:a,...i,ref:t})})}),kM=x.forwardRef((e,t)=>{const r=Hx(Oh,e.__scopeTooltip),n=Wb(Oh,e.__scopeTooltip),a=x.useRef(null),i=Jt(t,a),[o,l]=x.useState(null),{trigger:u,onClose:f}=r,h=a.current,{onPointerInTransitChange:p}=n,v=x.useCallback(()=>{l(null),p(!1)},[p]),m=x.useCallback((N,w)=>{const j=N.currentTarget,_={x:N.clientX,y:N.clientY},C=TM(_,j.getBoundingClientRect()),k=RM(_,C),E=LM(w.getBoundingClientRect()),I=IM([...k,...E]);l(I),p(!0)},[p]);return x.useEffect(()=>()=>v(),[v]),x.useEffect(()=>{if(u&&h){const N=j=>m(j,h),w=j=>m(j,u);return u.addEventListener("pointerleave",N),h.addEventListener("pointerleave",w),()=>{u.removeEventListener("pointerleave",N),h.removeEventListener("pointerleave",w)}}},[u,h,m,v]),x.useEffect(()=>{if(o){const N=w=>{const j=w.target,_={x:w.clientX,y:w.clientY},C=u?.contains(j)||h?.contains(j),k=!DM(_,o);C?v():k&&(v(),f())};return document.addEventListener("pointermove",N),()=>document.removeEventListener("pointermove",N)}},[u,h,o,f,v]),s.jsx(IC,{...e,ref:i})}),[CM,EM]=Vx(jp,{isInside:!1}),PM=dk("TooltipContent"),IC=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":a,onEscapeKeyDown:i,onPointerDownOutside:o,...l}=e,u=Hx(Oh,r),f=Wx(r),{onClose:h}=u;return x.useEffect(()=>(document.addEventListener(pw,h),()=>document.removeEventListener(pw,h)),[h]),x.useEffect(()=>{if(u.trigger){const p=v=>{v.target?.contains(u.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[u.trigger,h]),s.jsx(df,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:s.jsxs(zx,{"data-state":u.stateAttribute,...f,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(PM,{children:n}),s.jsx(CM,{scope:r,isInside:!0,children:s.jsx(H8,{id:u.contentId,role:"tooltip",children:a||n})})]})})});DC.displayName=Oh;var OC="TooltipArrow",AM=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,a=Wx(r);return EM(OC,r).isInside?null:s.jsx(qx,{...a,...n,ref:t})});AM.displayName=OC;function TM(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),a=Math.abs(t.right-e.x),i=Math.abs(t.left-e.x);switch(Math.min(r,n,a,i)){case i:return"left";case a:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function RM(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function LM(e){const{top:t,right:r,bottom:n,left:a}=e;return[{x:a,y:t},{x:r,y:t},{x:r,y:n},{x:a,y:n}]}function DM(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],u=t[o],f=l.x,h=l.y,p=u.x,v=u.y;h>n!=v>n&&r<(p-f)*(n-h)/(v-h)+f&&(a=!a)}return a}function IM(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),OM(t)}function OM(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const a=e[n];for(;t.length>=2;){const i=t[t.length-1],o=t[t.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))t.pop();else break}t.push(a)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const a=e[n];for(;r.length>=2;){const i=r[r.length-1],o=r[r.length-2];if((i.x-o.x)*(a.y-o.y)>=(i.y-o.y)*(a.x-o.x))r.pop();else break}r.push(a)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var MM=TC,FM=RC,BM=LC,MC=DC;const FC=MM,UM=FM,$M=BM,BC=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(MC,{ref:n,sideOffset:t,className:Oe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));BC.displayName=MC.displayName;var Gx=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},zM={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},qM=class{#e=zM;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},vw=new qM;function VM(e){setTimeout(e,0)}var Kx=typeof window>"u"||"Deno"in globalThis;function Lo(){}function WM(e,t){return typeof e=="function"?e(t):e}function HM(e){return typeof e=="number"&&e>=0&&e!==1/0}function GM(e,t){return Math.max(e+(t||0)-Date.now(),0)}function xw(e,t){return typeof e=="function"?e(t):e}function KM(e,t){return typeof e=="function"?e(t):e}function c_(e,t){const{type:r="all",exact:n,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==Hb(o,t.options))return!1}else if(!Np(t.queryKey,o))return!1}if(r!=="all"){const u=t.isActive();if(r==="active"&&!u||r==="inactive"&&u)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function u_(e,t){const{exact:r,status:n,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(r){if(_p(t.options.mutationKey)!==_p(i))return!1}else if(!Np(t.options.mutationKey,i))return!1}return!(n&&t.state.status!==n||a&&!a(t))}function Hb(e,t){return(t?.queryKeyHashFn||_p)(e)}function _p(e){return JSON.stringify(e,(t,r)=>yw(r)?Object.keys(r).sort().reduce((n,a)=>(n[a]=r[a],n),{}):r)}function Np(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>Np(e[r],t[r])):!1}var YM=Object.prototype.hasOwnProperty;function UC(e,t){if(e===t)return e;const r=d_(e)&&d_(t);if(!r&&!(yw(e)&&yw(t)))return t;const a=(r?e:Object.keys(e)).length,i=r?t:Object.keys(t),o=i.length,l=r?new Array(o):{};let u=0;for(let f=0;f<o;f++){const h=r?f:i[f],p=e[h],v=t[h];if(p===v){l[h]=p,(r?f<a:YM.call(e,h))&&u++;continue}if(p===null||v===null||typeof p!="object"||typeof v!="object"){l[h]=v;continue}const m=UC(p,v);l[h]=m,m===p&&u++}return a===o&&u===a?e:l}function d_(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function yw(e){if(!f_(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!f_(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function f_(e){return Object.prototype.toString.call(e)==="[object Object]"}function QM(e){return new Promise(t=>{vw.setTimeout(t,e)})}function JM(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?UC(e,t):t}function ZM(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function XM(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var Gb=Symbol();function $C(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Gb?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var e7=class extends Gx{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Kx&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},zC=new e7;function t7(){let e,t;const r=new Promise((a,i)=>{e=a,t=i});r.status="pending",r.catch(()=>{});function n(a){Object.assign(r,a),delete r.resolve,delete r.reject}return r.resolve=a=>{n({status:"fulfilled",value:a}),e(a)},r.reject=a=>{n({status:"rejected",reason:a}),t(a)},r}var r7=VM;function n7(){let e=[],t=0,r=l=>{l()},n=l=>{l()},a=r7;const i=l=>{t?e.push(l):a(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{n(()=>{l.forEach(u=>{r(u)})})})};return{batch:l=>{let u;t++;try{u=l()}finally{t--,t||o()}return u},batchCalls:l=>(...u)=>{i(()=>{l(...u)})},schedule:i,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{a=l}}}var qa=n7(),s7=class extends Gx{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Kx&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Xv=new s7;function a7(e){return Math.min(1e3*2**e,3e4)}function qC(e){return(e??"online")==="online"?Xv.isOnline():!0}var ww=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function VC(e){let t=!1,r=0,n;const a=t7(),i=()=>a.status!=="pending",o=w=>{if(!i()){const j=new ww(w);v(j),e.onCancel?.(j)}},l=()=>{t=!0},u=()=>{t=!1},f=()=>zC.isFocused()&&(e.networkMode==="always"||Xv.isOnline())&&e.canRun(),h=()=>qC(e.networkMode)&&e.canRun(),p=w=>{i()||(n?.(),a.resolve(w))},v=w=>{i()||(n?.(),a.reject(w))},m=()=>new Promise(w=>{n=j=>{(i()||f())&&w(j)},e.onPause?.()}).then(()=>{n=void 0,i()||e.onContinue?.()}),N=()=>{if(i())return;let w;const j=r===0?e.initialPromise:void 0;try{w=j??e.fn()}catch(_){w=Promise.reject(_)}Promise.resolve(w).then(p).catch(_=>{if(i())return;const C=e.retry??(Kx?0:3),k=e.retryDelay??a7,E=typeof k=="function"?k(r,_):k,I=C===!0||typeof C=="number"&&r<C||typeof C=="function"&&C(r,_);if(t||!I){v(_);return}r++,e.onFail?.(r,_),QM(E).then(()=>f()?void 0:m()).then(()=>{t?v(_):N()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(n?.(),a),cancelRetry:l,continueRetry:u,canStart:h,start:()=>(h()?N():m().then(N),a)}}var WC=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),HM(this.gcTime)&&(this.#e=vw.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Kx?1/0:300*1e3))}clearGcTimeout(){this.#e&&(vw.clearTimeout(this.#e),this.#e=void 0)}},i7=class extends WC{#e;#t;#r;#s;#n;#i;#o;constructor(e){super(),this.#o=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=h_(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=h_(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=JM(this.state.data,e,this.options);return this.#a({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#a({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(Lo).catch(Lo):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>KM(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===Gb||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>xw(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!GM(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#a({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(u=>u.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},a=()=>{const l=$C(this.options,t),f=(()=>{const h={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(h),h})();return this.#o=!1,this.options.persister?this.options.persister(l,f,this):l(f)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:a};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#a({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=VC({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof ww&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,u)=>{this.#a({type:"failed",failureCount:l,error:u})},onPause:()=>{this.#a({type:"pause"})},onContinue:()=>{this.#a({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof ww){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#a({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#a(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...o7(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const a=e.error;return{...r,error:a,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:a,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),qa.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function o7(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:qC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function h_(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function m_(e){return{onFetch:(t,r)=>{const n=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},u=0;const f=async()=>{let h=!1;const p=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},v=$C(t.options,t.fetchOptions),m=async(N,w,j)=>{if(h)return Promise.reject();if(w==null&&N.pages.length)return Promise.resolve(N);const C=(()=>{const D={client:t.client,queryKey:t.queryKey,pageParam:w,direction:j?"backward":"forward",meta:t.options.meta};return p(D),D})(),k=await v(C),{maxPages:E}=t.options,I=j?XM:ZM;return{pages:I(N.pages,k,E),pageParams:I(N.pageParams,w,E)}};if(a&&i.length){const N=a==="backward",w=N?l7:p_,j={pages:i,pageParams:o},_=w(n,j);l=await m(j,_,N)}else{const N=e??i.length;do{const w=u===0?o[0]??n.initialPageParam:p_(n,l);if(u>0&&w==null)break;l=await m(l,w),u++}while(u<N)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=f}}}function p_(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function l7(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var c7=class extends WC{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||u7(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=VC({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(i,o)=>{this.#n({type:"failed",failureCount:i,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",a=!this.#s.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:a}),await this.#r.config.onMutate?.(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:a})}const i=await this.#s.start();return await this.#r.config.onSuccess?.(i,e,this.state.context,this,r),await this.options.onSuccess?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(i,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(i,null,e,this.state.context,r),this.#n({type:"success",data:i}),i}catch(i){try{throw await this.#r.config.onError?.(i,e,this.state.context,this,r),await this.options.onError?.(i,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,i,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,i,e,this.state.context,r),i}finally{this.#n({type:"error",error:i})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),qa.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function u7(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var d7=class extends Gx{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new c7({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=ev(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=ev(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=ev(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(a=>a.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=ev(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){qa.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>u_(t,r))}findAll(e={}){return this.getAll().filter(t=>u_(e,t))}notify(e){qa.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return qa.batch(()=>Promise.all(e.map(t=>t.continue().catch(Lo))))}};function ev(e){return e.options.scope?.id}var f7=class extends Gx{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,a=t.queryHash??Hb(n,t);let i=this.get(a);return i||(i=new i7({client:e,queryKey:n,queryHash:a,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(i)),i}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){qa.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>c_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>c_(e,r)):t}notify(e){qa.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){qa.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){qa.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},h7=class{#e;#t;#r;#s;#n;#i;#o;#a;constructor(e={}){this.#e=e.queryCache||new f7,this.#t=e.mutationCache||new d7,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#o=zC.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#a=Xv.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#o?.(),this.#o=void 0,this.#a?.(),this.#a=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(xw(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),i=this.#e.get(n.queryHash)?.state.data,o=WM(t,i);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return qa.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;qa.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return qa.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=qa.batch(()=>this.#e.findAll(e).map(a=>a.cancel(r)));return Promise.all(n).then(Lo).catch(Lo)}invalidateQueries(e,t={}){return qa.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=qa.batch(()=>this.#e.findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,r);return r.throwOnError||(i=i.catch(Lo)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(n).then(Lo)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(xw(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Lo).catch(Lo)}fetchInfiniteQuery(e){return e.behavior=m_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Lo).catch(Lo)}ensureInfiniteQueryData(e){return e.behavior=m_(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Xv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(_p(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{Np(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(_p(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{Np(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=Hb(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===Gb&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},m7=x.createContext(void 0),p7=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(m7.Provider,{value:e,children:t}));function Sp(){return Sp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Sp.apply(this,arguments)}var Ou;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Ou||(Ou={}));const g_="popstate";function g7(e){e===void 0&&(e={});function t(n,a){let{pathname:i,search:o,hash:l}=n.location;return bw("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function r(n,a){return typeof a=="string"?a:ex(a)}return x7(t,r,null,e)}function xs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kb(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function v7(){return Math.random().toString(36).substr(2,8)}function v_(e,t){return{usr:e.state,key:e.key,idx:t}}function bw(e,t,r,n){return r===void 0&&(r=null),Sp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?nm(t):t,{state:r,key:t&&t.key||n||v7()})}function ex(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function nm(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function x7(e,t,r,n){n===void 0&&(n={});let{window:a=document.defaultView,v5Compat:i=!1}=n,o=a.history,l=Ou.Pop,u=null,f=h();f==null&&(f=0,o.replaceState(Sp({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Ou.Pop;let j=h(),_=j==null?null:j-f;f=j,u&&u({action:l,location:w.location,delta:_})}function v(j,_){l=Ou.Push;let C=bw(w.location,j,_);f=h()+1;let k=v_(C,f),E=w.createHref(C);try{o.pushState(k,"",E)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;a.location.assign(E)}i&&u&&u({action:l,location:w.location,delta:1})}function m(j,_){l=Ou.Replace;let C=bw(w.location,j,_);f=h();let k=v_(C,f),E=w.createHref(C);o.replaceState(k,"",E),i&&u&&u({action:l,location:w.location,delta:0})}function N(j){let _=a.location.origin!=="null"?a.location.origin:a.location.href,C=typeof j=="string"?j:ex(j);return C=C.replace(/ $/,"%20"),xs(_,"No window.location.(origin|href) available to create URL for href: "+C),new URL(C,_)}let w={get action(){return l},get location(){return e(a,o)},listen(j){if(u)throw new Error("A history only accepts one active listener");return a.addEventListener(g_,p),u=j,()=>{a.removeEventListener(g_,p),u=null}},createHref(j){return t(a,j)},createURL:N,encodeLocation(j){let _=N(j);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:v,replace:m,go(j){return o.go(j)}};return w}var x_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(x_||(x_={}));function y7(e,t,r){return r===void 0&&(r="/"),w7(e,t,r)}function w7(e,t,r,n){let a=typeof t=="string"?nm(t):t,i=Yb(a.pathname||"/",r);if(i==null)return null;let o=HC(e);b7(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let f=L7(i);l=A7(o[u],f)}return l}function HC(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let a=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(xs(u.relativePath.startsWith(n),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(n.length));let f=Bu([n,u.relativePath]),h=r.concat(u);i.children&&i.children.length>0&&(xs(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),HC(i.children,t,h,f)),!(i.path==null&&!i.index)&&t.push({path:f,score:E7(f,i.index),routesMeta:h})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let u of GC(i.path))a(i,o,u)}),t}function GC(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,a=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return a?[i,""]:[i];let o=GC(n.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),a&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function b7(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:P7(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const j7=/^:[\w-]+$/,_7=3,N7=2,S7=1,k7=10,C7=-2,y_=e=>e==="*";function E7(e,t){let r=e.split("/"),n=r.length;return r.some(y_)&&(n+=C7),t&&(n+=N7),r.filter(a=>!y_(a)).reduce((a,i)=>a+(j7.test(i)?_7:i===""?S7:k7),n)}function P7(e,t){return e.length===t.length&&e.slice(0,-1).every((n,a)=>n===t[a])?e[e.length-1]-t[t.length-1]:0}function A7(e,t,r){let{routesMeta:n}=e,a={},i="/",o=[];for(let l=0;l<n.length;++l){let u=n[l],f=l===n.length-1,h=i==="/"?t:t.slice(i.length)||"/",p=T7({path:u.relativePath,caseSensitive:u.caseSensitive,end:f},h),v=u.route;if(!p)return null;Object.assign(a,p.params),o.push({params:a,pathname:Bu([i,p.pathname]),pathnameBase:F7(Bu([i,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(i=Bu([i,p.pathnameBase]))}return o}function T7(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=R7(e.path,e.caseSensitive,e.end),a=t.match(r);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:n.reduce((f,h,p)=>{let{paramName:v,isOptional:m}=h;if(v==="*"){let w=l[p]||"";o=i.slice(0,i.length-w.length).replace(/(.)\/+$/,"$1")}const N=l[p];return m&&!N?f[v]=void 0:f[v]=(N||"").replace(/%2F/g,"/"),f},{}),pathname:i,pathnameBase:o,pattern:e}}function R7(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),Kb(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(n.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),n]}function L7(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Kb(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Yb(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}const D7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,I7=e=>D7.test(e);function O7(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:a=""}=typeof e=="string"?nm(e):e,i;if(r)if(I7(r))i=r;else{if(r.includes("//")){let o=r;r=r.replace(/\/\/+/g,"/"),Kb(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+r))}r.startsWith("/")?i=w_(r.substring(1),"/"):i=w_(r,t)}else i=t;return{pathname:i,search:B7(n),hash:U7(a)}}function w_(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?r.length>1&&r.pop():a!=="."&&r.push(a)}),r.length>1?r.join("/"):"/"}function Ty(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function M7(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Qb(e,t){let r=M7(e);return t?r.map((n,a)=>a===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function Jb(e,t,r,n){n===void 0&&(n=!1);let a;typeof e=="string"?a=nm(e):(a=Sp({},e),xs(!a.pathname||!a.pathname.includes("?"),Ty("?","pathname","search",a)),xs(!a.pathname||!a.pathname.includes("#"),Ty("#","pathname","hash",a)),xs(!a.search||!a.search.includes("#"),Ty("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=r;else{let p=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;a.pathname=v.join("/")}l=p>=0?t[p]:"/"}let u=O7(a,l),f=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&r.endsWith("/");return!u.pathname.endsWith("/")&&(f||h)&&(u.pathname+="/"),u}const Bu=e=>e.join("/").replace(/\/\/+/g,"/"),F7=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B7=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,U7=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function $7(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const KC=["post","put","patch","delete"];new Set(KC);const z7=["get",...KC];new Set(z7);function kp(){return kp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},kp.apply(this,arguments)}const Zb=x.createContext(null),q7=x.createContext(null),Ju=x.createContext(null),Yx=x.createContext(null),Bl=x.createContext({outlet:null,matches:[],isDataRoute:!1}),YC=x.createContext(null);function V7(e,t){let{relative:r}=t===void 0?{}:t;sm()||xs(!1);let{basename:n,navigator:a}=x.useContext(Ju),{hash:i,pathname:o,search:l}=JC(e,{relative:r}),u=o;return n!=="/"&&(u=o==="/"?n:Bu([n,o])),a.createHref({pathname:u,search:l,hash:i})}function sm(){return x.useContext(Yx)!=null}function hf(){return sm()||xs(!1),x.useContext(Yx).location}function QC(e){x.useContext(Ju).static||x.useLayoutEffect(e)}function mf(){let{isDataRoute:e}=x.useContext(Bl);return e?iF():W7()}function W7(){sm()||xs(!1);let e=x.useContext(Zb),{basename:t,future:r,navigator:n}=x.useContext(Ju),{matches:a}=x.useContext(Bl),{pathname:i}=hf(),o=JSON.stringify(Qb(a,r.v7_relativeSplatPath)),l=x.useRef(!1);return QC(()=>{l.current=!0}),x.useCallback(function(f,h){if(h===void 0&&(h={}),!l.current)return;if(typeof f=="number"){n.go(f);return}let p=Jb(f,JSON.parse(o),i,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Bu([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,o,i,e])}const H7=x.createContext(null);function G7(e){let t=x.useContext(Bl).outlet;return t&&x.createElement(H7.Provider,{value:e},t)}function K7(){let{matches:e}=x.useContext(Bl),t=e[e.length-1];return t?t.params:{}}function JC(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(Ju),{matches:a}=x.useContext(Bl),{pathname:i}=hf(),o=JSON.stringify(Qb(a,n.v7_relativeSplatPath));return x.useMemo(()=>Jb(e,JSON.parse(o),i,r==="path"),[e,o,i,r])}function Y7(e,t){return Q7(e,t)}function Q7(e,t,r,n){sm()||xs(!1);let{navigator:a}=x.useContext(Ju),{matches:i}=x.useContext(Bl),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let f=hf(),h;if(t){var p;let j=typeof t=="string"?nm(t):t;u==="/"||(p=j.pathname)!=null&&p.startsWith(u)||xs(!1),h=j}else h=f;let v=h.pathname||"/",m=v;if(u!=="/"){let j=u.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(j.length).join("/")}let N=y7(e,{pathname:m}),w=tF(N&&N.map(j=>Object.assign({},j,{params:Object.assign({},l,j.params),pathname:Bu([u,a.encodeLocation?a.encodeLocation(j.pathname).pathname:j.pathname]),pathnameBase:j.pathnameBase==="/"?u:Bu([u,a.encodeLocation?a.encodeLocation(j.pathnameBase).pathname:j.pathnameBase])})),i,r,n);return t&&w?x.createElement(Yx.Provider,{value:{location:kp({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Ou.Pop}},w):w}function J7(){let e=aF(),t=$7(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:a},r):null,null)}const Z7=x.createElement(J7,null);class X7 extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(Bl.Provider,{value:this.props.routeContext},x.createElement(YC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function eF(e){let{routeContext:t,match:r,children:n}=e,a=x.useContext(Zb);return a&&a.static&&a.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(Bl.Provider,{value:t},n)}function tF(e,t,r,n){var a;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var i;if(!r)return null;if(r.errors)e=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(a=r)==null?void 0:a.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||xs(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,f=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:m}=r,N=p.route.loader&&v[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||N){u=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,p,v)=>{let m,N=!1,w=null,j=null;r&&(m=l&&p.route.id?l[p.route.id]:void 0,w=p.route.errorElement||Z7,u&&(f<0&&v===0?(oF("route-fallback"),N=!0,j=null):f===v&&(N=!0,j=p.route.hydrateFallbackElement||null)));let _=t.concat(o.slice(0,v+1)),C=()=>{let k;return m?k=w:N?k=j:p.route.Component?k=x.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,x.createElement(eF,{match:p,routeContext:{outlet:h,matches:_,isDataRoute:r!=null},children:k})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?x.createElement(X7,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:C(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):C()},null)}var ZC=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(ZC||{}),XC=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(XC||{});function rF(e){let t=x.useContext(Zb);return t||xs(!1),t}function nF(e){let t=x.useContext(q7);return t||xs(!1),t}function sF(e){let t=x.useContext(Bl);return t||xs(!1),t}function e3(e){let t=sF(),r=t.matches[t.matches.length-1];return r.route.id||xs(!1),r.route.id}function aF(){var e;let t=x.useContext(YC),r=nF(),n=e3();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function iF(){let{router:e}=rF(ZC.UseNavigateStable),t=e3(XC.UseNavigateStable),r=x.useRef(!1);return QC(()=>{r.current=!0}),x.useCallback(function(a,i){i===void 0&&(i={}),r.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,kp({fromRouteId:t},i)))},[e,t])}const b_={};function oF(e,t,r){b_[e]||(b_[e]=!0)}function lF(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function t3(e){let{to:t,replace:r,state:n,relative:a}=e;sm()||xs(!1);let{future:i,static:o}=x.useContext(Ju),{matches:l}=x.useContext(Bl),{pathname:u}=hf(),f=mf(),h=Jb(t,Qb(l,i.v7_relativeSplatPath),u,a==="path"),p=JSON.stringify(h);return x.useEffect(()=>f(JSON.parse(p),{replace:r,state:n,relative:a}),[f,p,a,r,n]),null}function cF(e){return G7(e.context)}function fs(e){xs(!1)}function uF(e){let{basename:t="/",children:r=null,location:n,navigationType:a=Ou.Pop,navigator:i,static:o=!1,future:l}=e;sm()&&xs(!1);let u=t.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:u,navigator:i,static:o,future:kp({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof n=="string"&&(n=nm(n));let{pathname:h="/",search:p="",hash:v="",state:m=null,key:N="default"}=n,w=x.useMemo(()=>{let j=Yb(h,u);return j==null?null:{location:{pathname:j,search:p,hash:v,state:m,key:N},navigationType:a}},[u,h,p,v,m,N,a]);return w==null?null:x.createElement(Ju.Provider,{value:f},x.createElement(Yx.Provider,{children:r,value:w}))}function dF(e){let{children:t,location:r}=e;return Y7(jw(t),r)}new Promise(()=>{});function jw(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,a)=>{if(!x.isValidElement(n))return;let i=[...t,a];if(n.type===x.Fragment){r.push.apply(r,jw(n.props.children,i));return}n.type!==fs&&xs(!1),!n.props.index||!n.props.children||xs(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=jw(n.props.children,i)),r.push(o)}),r}function _w(){return _w=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},_w.apply(this,arguments)}function fF(e,t){if(e==null)return{};var r={},n=Object.keys(e),a,i;for(i=0;i<n.length;i++)a=n[i],!(t.indexOf(a)>=0)&&(r[a]=e[a]);return r}function hF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function mF(e,t){return e.button===0&&(!t||t==="_self")&&!hF(e)}const pF=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],gF="6";try{window.__reactRouterVersion=gF}catch{}const vF="startTransition",j_=Sb[vF];function xF(e){let{basename:t,children:r,future:n,window:a}=e,i=x.useRef();i.current==null&&(i.current=g7({window:a,v5Compat:!0}));let o=i.current,[l,u]=x.useState({action:o.action,location:o.location}),{v7_startTransition:f}=n||{},h=x.useCallback(p=>{f&&j_?j_(()=>u(p)):u(p)},[u,f]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.useEffect(()=>lF(n),[n]),x.createElement(uF,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const yF=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",wF=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Nw=x.forwardRef(function(t,r){let{onClick:n,relative:a,reloadDocument:i,replace:o,state:l,target:u,to:f,preventScrollReset:h,viewTransition:p}=t,v=fF(t,pF),{basename:m}=x.useContext(Ju),N,w=!1;if(typeof f=="string"&&wF.test(f)&&(N=f,yF))try{let k=new URL(window.location.href),E=f.startsWith("//")?new URL(k.protocol+f):new URL(f),I=Yb(E.pathname,m);E.origin===k.origin&&I!=null?f=I+E.search+E.hash:w=!0}catch{}let j=V7(f,{relative:a}),_=bF(f,{replace:o,state:l,target:u,preventScrollReset:h,relative:a,viewTransition:p});function C(k){n&&n(k),k.defaultPrevented||_(k)}return x.createElement("a",_w({},v,{href:N||j,onClick:w||i?n:C,ref:r,target:u}))});var __;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(__||(__={}));var N_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(N_||(N_={}));function bF(e,t){let{target:r,replace:n,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,u=mf(),f=hf(),h=JC(e,{relative:o});return x.useCallback(p=>{if(mF(p,r)){p.preventDefault();let v=n!==void 0?n:ex(f)===ex(h);u(e,{replace:v,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[f,u,h,n,a,r,e,i,o,l])}const Cp=Xh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-light shadow-card hover:shadow-card-hover",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-light shadow-card hover:shadow-card-hover",warning:"bg-warning text-warning-foreground hover:bg-warning-light shadow-card hover:shadow-card-hover",success:"bg-success text-success-foreground hover:bg-success/90 shadow-card hover:shadow-card-hover",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-card hover:shadow-card-hover",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-hero text-primary-foreground hover:opacity-90 shadow-card-hover font-semibold",gradient:"bg-gradient-primary text-primary-foreground hover:opacity-90 shadow-card hover:shadow-card-hover"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),we=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...a},i)=>{const o=n?ck:"button";return s.jsx(o,{className:Oe(Cp({variant:t,size:r,className:e})),ref:i,...a})});we.displayName="Button";var jF=x.createContext(void 0);function Zu(e){const t=x.useContext(jF);return e||t||"ltr"}var Ry=0;function Qx(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??S_()),document.body.insertAdjacentElement("beforeend",e[1]??S_()),Ry++,()=>{Ry===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),Ry--}},[])}function S_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ly="focusScope.autoFocusOnMount",Dy="focusScope.autoFocusOnUnmount",k_={bubbles:!1,cancelable:!0},_F="FocusScope",Qp=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:a,onUnmountAutoFocus:i,...o}=e,[l,u]=x.useState(null),f=as(a),h=as(i),p=x.useRef(null),v=Jt(t,w=>u(w)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let w=function(k){if(m.paused||!l)return;const E=k.target;l.contains(E)?p.current=E:Ru(p.current,{select:!0})},j=function(k){if(m.paused||!l)return;const E=k.relatedTarget;E!==null&&(l.contains(E)||Ru(p.current,{select:!0}))},_=function(k){if(document.activeElement===document.body)for(const I of k)I.removedNodes.length>0&&Ru(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",j);const C=new MutationObserver(_);return l&&C.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",j),C.disconnect()}}},[n,l,m.paused]),x.useEffect(()=>{if(l){E_.add(m);const w=document.activeElement;if(!l.contains(w)){const _=new CustomEvent(Ly,k_);l.addEventListener(Ly,f),l.dispatchEvent(_),_.defaultPrevented||(NF(PF(r3(l)),{select:!0}),document.activeElement===w&&Ru(l))}return()=>{l.removeEventListener(Ly,f),setTimeout(()=>{const _=new CustomEvent(Dy,k_);l.addEventListener(Dy,h),l.dispatchEvent(_),_.defaultPrevented||Ru(w??document.body,{select:!0}),l.removeEventListener(Dy,h),E_.remove(m)},0)}}},[l,f,h,m]);const N=x.useCallback(w=>{if(!r&&!n||m.paused)return;const j=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,_=document.activeElement;if(j&&_){const C=w.currentTarget,[k,E]=SF(C);k&&E?!w.shiftKey&&_===E?(w.preventDefault(),r&&Ru(k,{select:!0})):w.shiftKey&&_===k&&(w.preventDefault(),r&&Ru(E,{select:!0})):_===C&&w.preventDefault()}},[r,n,m.paused]);return s.jsx(vt.div,{tabIndex:-1,...o,ref:v,onKeyDown:N})});Qp.displayName=_F;function NF(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(Ru(n,{select:t}),document.activeElement!==r)return}function SF(e){const t=r3(e),r=C_(t,e),n=C_(t.reverse(),e);return[r,n]}function r3(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const a=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||a?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function C_(e,t){for(const r of e)if(!kF(r,{upTo:t}))return r}function kF(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function CF(e){return e instanceof HTMLInputElement&&"select"in e}function Ru(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&CF(e)&&t&&e.select()}}var E_=EF();function EF(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=P_(e,t),e.unshift(t)},remove(t){e=P_(e,t),e[0]?.resume()}}}function P_(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function PF(e){return e.filter(t=>t.tagName!=="A")}var Iy="rovingFocusGroup.onEntryFocus",AF={bubbles:!1,cancelable:!0},Jp="RovingFocusGroup",[Sw,n3,TF]=Wp(Jp),[RF,Xu]=bs(Jp,[TF]),[LF,DF]=RF(Jp),s3=x.forwardRef((e,t)=>s.jsx(Sw.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(Sw.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(IF,{...e,ref:t})})}));s3.displayName=Jp;var IF=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:a=!1,dir:i,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:u,onEntryFocus:f,preventScrollOnEntryFocus:h=!1,...p}=e,v=x.useRef(null),m=Jt(t,v),N=Zu(i),[w,j]=Ea({prop:o,defaultProp:l??null,onChange:u,caller:Jp}),[_,C]=x.useState(!1),k=as(f),E=n3(r),I=x.useRef(!1),[D,O]=x.useState(0);return x.useEffect(()=>{const F=v.current;if(F)return F.addEventListener(Iy,k),()=>F.removeEventListener(Iy,k)},[k]),s.jsx(LF,{scope:r,orientation:n,dir:N,loop:a,currentTabStopId:w,onItemFocus:x.useCallback(F=>j(F),[j]),onItemShiftTab:x.useCallback(()=>C(!0),[]),onFocusableItemAdd:x.useCallback(()=>O(F=>F+1),[]),onFocusableItemRemove:x.useCallback(()=>O(F=>F-1),[]),children:s.jsx(vt.div,{tabIndex:_||D===0?-1:0,"data-orientation":n,...p,ref:m,style:{outline:"none",...e.style},onMouseDown:lt(e.onMouseDown,()=>{I.current=!0}),onFocus:lt(e.onFocus,F=>{const T=!I.current;if(F.target===F.currentTarget&&T&&!_){const z=new CustomEvent(Iy,AF);if(F.currentTarget.dispatchEvent(z),!z.defaultPrevented){const U=E().filter(se=>se.focusable),B=U.find(se=>se.active),K=U.find(se=>se.id===w),de=[B,K,...U].filter(Boolean).map(se=>se.ref.current);o3(de,h)}}I.current=!1}),onBlur:lt(e.onBlur,()=>C(!1))})})}),a3="RovingFocusGroupItem",i3=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:a=!1,tabStopId:i,children:o,...l}=e,u=Xs(),f=i||u,h=DF(a3,r),p=h.currentTabStopId===f,v=n3(r),{onFocusableItemAdd:m,onFocusableItemRemove:N,currentTabStopId:w}=h;return x.useEffect(()=>{if(n)return m(),()=>N()},[n,m,N]),s.jsx(Sw.ItemSlot,{scope:r,id:f,focusable:n,active:a,children:s.jsx(vt.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:lt(e.onMouseDown,j=>{n?h.onItemFocus(f):j.preventDefault()}),onFocus:lt(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:lt(e.onKeyDown,j=>{if(j.key==="Tab"&&j.shiftKey){h.onItemShiftTab();return}if(j.target!==j.currentTarget)return;const _=FF(j,h.orientation,h.dir);if(_!==void 0){if(j.metaKey||j.ctrlKey||j.altKey||j.shiftKey)return;j.preventDefault();let k=v().filter(E=>E.focusable).map(E=>E.ref.current);if(_==="last")k.reverse();else if(_==="prev"||_==="next"){_==="prev"&&k.reverse();const E=k.indexOf(j.currentTarget);k=h.loop?BF(k,E+1):k.slice(E+1)}setTimeout(()=>o3(k))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:w!=null}):o})})});i3.displayName=a3;var OF={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function MF(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function FF(e,t,r){const n=MF(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return OF[n]}function o3(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function BF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Jx=s3,Zx=i3,UF=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Zf=new WeakMap,tv=new WeakMap,rv={},Oy=0,l3=function(e){return e&&(e.host||l3(e.parentNode))},$F=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=l3(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},zF=function(e,t,r,n){var a=$F(t,Array.isArray(e)?e:[e]);rv[r]||(rv[r]=new WeakMap);var i=rv[r],o=[],l=new Set,u=new Set(a),f=function(p){!p||l.has(p)||(l.add(p),f(p.parentNode))};a.forEach(f);var h=function(p){!p||u.has(p)||Array.prototype.forEach.call(p.children,function(v){if(l.has(v))h(v);else try{var m=v.getAttribute(n),N=m!==null&&m!=="false",w=(Zf.get(v)||0)+1,j=(i.get(v)||0)+1;Zf.set(v,w),i.set(v,j),o.push(v),w===1&&N&&tv.set(v,!0),j===1&&v.setAttribute(r,"true"),N||v.setAttribute(n,"true")}catch(_){console.error("aria-hidden: cannot operate on ",v,_)}})};return h(t),l.clear(),Oy++,function(){o.forEach(function(p){var v=Zf.get(p)-1,m=i.get(p)-1;Zf.set(p,v),i.set(p,m),v||(tv.has(p)||p.removeAttribute(n),tv.delete(p)),m||p.removeAttribute(r)}),Oy--,Oy||(Zf=new WeakMap,Zf=new WeakMap,tv=new WeakMap,rv={})}},Xx=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),a=UF(e);return a?(n.push.apply(n,Array.from(a.querySelectorAll("[aria-live], script"))),zF(n,a,r,"aria-hidden")):function(){return null}},kw=function(e,t){return kw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(r[a]=n[a])},kw(e,t)};function c3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");kw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var ao=function(){return ao=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ao.apply(this,arguments)};function ed(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function u3(e,t,r,n){var a=arguments.length,i=a<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(i=(a<3?o(i):a>3?o(t,r,i):o(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function d3(e,t){return function(r,n){t(r,n,e)}}function f3(e,t,r,n,a,i){function o(_){if(_!==void 0&&typeof _!="function")throw new TypeError("Function expected");return _}for(var l=n.kind,u=l==="getter"?"get":l==="setter"?"set":"value",f=!t&&e?n.static?e:e.prototype:null,h=t||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),p,v=!1,m=r.length-1;m>=0;m--){var N={};for(var w in n)N[w]=w==="access"?{}:n[w];for(var w in n.access)N.access[w]=n.access[w];N.addInitializer=function(_){if(v)throw new TypeError("Cannot add initializers after decoration has completed");i.push(o(_||null))};var j=(0,r[m])(l==="accessor"?{get:h.get,set:h.set}:h[u],N);if(l==="accessor"){if(j===void 0)continue;if(j===null||typeof j!="object")throw new TypeError("Object expected");(p=o(j.get))&&(h.get=p),(p=o(j.set))&&(h.set=p),(p=o(j.init))&&a.unshift(p)}else(p=o(j))&&(l==="field"?a.unshift(p):h[u]=p)}f&&Object.defineProperty(f,n.name,h),v=!0}function h3(e,t,r){for(var n=arguments.length>2,a=0;a<t.length;a++)r=n?t[a].call(e,r):t[a].call(e);return n?r:void 0}function m3(e){return typeof e=="symbol"?e:"".concat(e)}function p3(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function g3(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function $t(e,t,r,n){function a(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function l(h){try{f(n.next(h))}catch(p){o(p)}}function u(h){try{f(n.throw(h))}catch(p){o(p)}}function f(h){h.done?i(h.value):a(h.value).then(l,u)}f((n=n.apply(e,t||[])).next())})}function v3(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,a,i,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(h){return u([f,h])}}function u(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(r=0)),r;)try{if(n=1,a&&(i=f[0]&2?a.return:f[0]?a.throw||((i=a.return)&&i.call(a),0):a.next)&&!(i=i.call(a,f[1])).done)return i;switch(a=0,i&&(f=[f[0]&2,i.value]),f[0]){case 0:case 1:i=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,a=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!i||f[1]>i[0]&&f[1]<i[3])){r.label=f[1];break}if(f[0]===6&&r.label<i[1]){r.label=i[1],i=f;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(f);break}i[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],a=0}finally{n=i=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var e0=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function x3(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&e0(t,e,r)}function tx(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xb(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),a,i=[],o;try{for(;(t===void 0||t-- >0)&&!(a=n.next()).done;)i.push(a.value)}catch(l){o={error:l}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function y3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Xb(arguments[t]));return e}function w3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),a=0,t=0;t<r;t++)for(var i=arguments[t],o=0,l=i.length;o<l;o++,a++)n[a]=i[o];return n}function e2(e,t,r){if(r||arguments.length===2)for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function Mh(e){return this instanceof Mh?(this.v=e,this):new Mh(e)}function b3(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),a,i=[];return a=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),a[Symbol.asyncIterator]=function(){return this},a;function o(m){return function(N){return Promise.resolve(N).then(m,p)}}function l(m,N){n[m]&&(a[m]=function(w){return new Promise(function(j,_){i.push([m,w,j,_])>1||u(m,w)})},N&&(a[m]=N(a[m])))}function u(m,N){try{f(n[m](N))}catch(w){v(i[0][3],w)}}function f(m){m.value instanceof Mh?Promise.resolve(m.value.v).then(h,p):v(i[0][2],m)}function h(m){u("next",m)}function p(m){u("throw",m)}function v(m,N){m(N),i.shift(),i.length&&u(i[0][0],i[0][1])}}function j3(e){var t,r;return t={},n("next"),n("throw",function(a){throw a}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(a,i){t[a]=e[a]?function(o){return(r=!r)?{value:Mh(e[a](o)),done:!1}:i?i(o):o}:i}}function _3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof tx=="function"?tx(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(l,u){o=e[i](o),a(l,u,o.done,o.value)})}}function a(i,o,l,u){Promise.resolve(u).then(function(f){i({value:f,done:l})},o)}}function N3(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var qF=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},Cw=function(e){return Cw=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},Cw(e)};function S3(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=Cw(e),n=0;n<r.length;n++)r[n]!=="default"&&e0(t,e,r[n]);return qF(t,e),t}function k3(e){return e&&e.__esModule?e:{default:e}}function C3(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function E3(e,t,r,n,a){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!a)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!a:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?a.call(e,r):a?a.value=r:t.set(e,r),r}function P3(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function A3(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,a;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(a=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");a&&(n=function(){try{a.call(this)}catch(i){return Promise.reject(i)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var VF=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function T3(e){function t(i){e.error=e.hasError?new VF(i,e.error,"An error was suppressed during disposal."):i,e.hasError=!0}var r,n=0;function a(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(a);if(r.dispose){var i=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(i).then(a,function(o){return t(o),a()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return a()}function R3(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,a,i,o){return n?t?".jsx":".js":a&&(!i||!o)?r:a+i+"."+o.toLowerCase()+"js"}):e}const WF={__extends:c3,__assign:ao,__rest:ed,__decorate:u3,__param:d3,__esDecorate:f3,__runInitializers:h3,__propKey:m3,__setFunctionName:p3,__metadata:g3,__awaiter:$t,__generator:v3,__createBinding:e0,__exportStar:x3,__values:tx,__read:Xb,__spread:y3,__spreadArrays:w3,__spreadArray:e2,__await:Mh,__asyncGenerator:b3,__asyncDelegator:j3,__asyncValues:_3,__makeTemplateObject:N3,__importStar:S3,__importDefault:k3,__classPrivateFieldGet:C3,__classPrivateFieldSet:E3,__classPrivateFieldIn:P3,__addDisposableResource:A3,__disposeResources:T3,__rewriteRelativeImportExtension:R3},HF=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:A3,get __assign(){return ao},__asyncDelegator:j3,__asyncGenerator:b3,__asyncValues:_3,__await:Mh,__awaiter:$t,__classPrivateFieldGet:C3,__classPrivateFieldIn:P3,__classPrivateFieldSet:E3,__createBinding:e0,__decorate:u3,__disposeResources:T3,__esDecorate:f3,__exportStar:x3,__extends:c3,__generator:v3,__importDefault:k3,__importStar:S3,__makeTemplateObject:N3,__metadata:g3,__param:d3,__propKey:m3,__read:Xb,__rest:ed,__rewriteRelativeImportExtension:R3,__runInitializers:h3,__setFunctionName:p3,__spread:y3,__spreadArray:e2,__spreadArrays:w3,__values:tx,default:WF},Symbol.toStringTag,{value:"Module"}));var Ov="right-scroll-bar-position",Mv="width-before-scroll-bar",GF="with-scroll-bars-hidden",KF="--removed-body-scroll-bar-size";function My(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function YF(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var a=r.value;a!==n&&(r.value=n,r.callback(n,a))}}}})[0];return r.callback=t,r.facade}var QF=typeof window<"u"?x.useLayoutEffect:x.useEffect,A_=new WeakMap;function JF(e,t){var r=YF(null,function(n){return e.forEach(function(a){return My(a,n)})});return QF(function(){var n=A_.get(r);if(n){var a=new Set(n),i=new Set(e),o=r.current;a.forEach(function(l){i.has(l)||My(l,null)}),i.forEach(function(l){a.has(l)||My(l,o)})}A_.set(r,e)},[e]),r}function ZF(e){return e}function XF(e,t){t===void 0&&(t=ZF);var r=[],n=!1,a={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(i){var o=t(i,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(i){for(n=!0;r.length;){var o=r;r=[],o.forEach(i)}r={push:function(l){return i(l)},filter:function(){return r}}},assignMedium:function(i){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(i),o=r}var u=function(){var h=o;o=[],h.forEach(i)},f=function(){return Promise.resolve().then(u)};f(),r={push:function(h){o.push(h),f()},filter:function(h){return o=o.filter(h),r}}}};return a}function e9(e){e===void 0&&(e={});var t=XF(null);return t.options=ao({async:!0,ssr:!1},e),t}var L3=function(e){var t=e.sideCar,r=ed(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,ao({},r))};L3.isSideCarExport=!0;function t9(e,t){return e.useMedium(t),L3}var D3=e9(),Fy=function(){},t0=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:Fy,onWheelCapture:Fy,onTouchMoveCapture:Fy}),a=n[0],i=n[1],o=e.forwardProps,l=e.children,u=e.className,f=e.removeScrollBar,h=e.enabled,p=e.shards,v=e.sideCar,m=e.noRelative,N=e.noIsolation,w=e.inert,j=e.allowPinchZoom,_=e.as,C=_===void 0?"div":_,k=e.gapMode,E=ed(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=v,D=JF([r,t]),O=ao(ao({},E),a);return x.createElement(x.Fragment,null,h&&x.createElement(I,{sideCar:D3,removeScrollBar:f,shards:p,noRelative:m,noIsolation:N,inert:w,setCallbacks:i,allowPinchZoom:!!j,lockRef:r,gapMode:k}),o?x.cloneElement(x.Children.only(l),ao(ao({},O),{ref:D})):x.createElement(C,ao({},O,{className:u,ref:D}),l))});t0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};t0.classNames={fullWidth:Mv,zeroRight:Ov};var r9=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function n9(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=r9();return t&&e.setAttribute("nonce",t),e}function s9(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function a9(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var i9=function(){var e=0,t=null;return{add:function(r){e==0&&(t=n9())&&(s9(t,r),a9(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},o9=function(){var e=i9();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},I3=function(){var e=o9(),t=function(r){var n=r.styles,a=r.dynamic;return e(n,a),null};return t},l9={left:0,top:0,right:0,gap:0},By=function(e){return parseInt(e||"",10)||0},c9=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],a=t[e==="padding"?"paddingRight":"marginRight"];return[By(r),By(n),By(a)]},u9=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return l9;var t=c9(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},d9=I3(),Nh="data-scroll-locked",f9=function(e,t,r,n){var a=e.left,i=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(GF,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(Nh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(i,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ov,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Mv,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(Ov," .").concat(Ov,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(Mv," .").concat(Mv,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(Nh,`] {
    `).concat(KF,": ").concat(l,`px;
  }
`)},T_=function(){var e=parseInt(document.body.getAttribute(Nh)||"0",10);return isFinite(e)?e:0},h9=function(){x.useEffect(function(){return document.body.setAttribute(Nh,(T_()+1).toString()),function(){var e=T_()-1;e<=0?document.body.removeAttribute(Nh):document.body.setAttribute(Nh,e.toString())}},[])},m9=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,a=n===void 0?"margin":n;h9();var i=x.useMemo(function(){return u9(a)},[a]);return x.createElement(d9,{styles:f9(i,!t,a,r?"":"!important")})},Ew=!1;if(typeof window<"u")try{var nv=Object.defineProperty({},"passive",{get:function(){return Ew=!0,!0}});window.addEventListener("test",nv,nv),window.removeEventListener("test",nv,nv)}catch{Ew=!1}var Xf=Ew?{passive:!1}:!1,p9=function(e){return e.tagName==="TEXTAREA"},O3=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!p9(e)&&r[t]==="visible")},g9=function(e){return O3(e,"overflowY")},v9=function(e){return O3(e,"overflowX")},R_=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var a=M3(e,n);if(a){var i=F3(e,n),o=i[1],l=i[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},x9=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},y9=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},M3=function(e,t){return e==="v"?g9(t):v9(t)},F3=function(e,t){return e==="v"?x9(t):y9(t)},w9=function(e,t){return e==="h"&&t==="rtl"?-1:1},b9=function(e,t,r,n,a){var i=w9(e,window.getComputedStyle(t).direction),o=i*n,l=r.target,u=t.contains(l),f=!1,h=o>0,p=0,v=0;do{if(!l)break;var m=F3(e,l),N=m[0],w=m[1],j=m[2],_=w-j-i*N;(N||_)&&M3(e,l)&&(p+=_,v+=N);var C=l.parentNode;l=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!u&&l!==document.body||u&&(t.contains(l)||t===l));return(h&&Math.abs(p)<1||!h&&Math.abs(v)<1)&&(f=!0),f},sv=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},L_=function(e){return[e.deltaX,e.deltaY]},D_=function(e){return e&&"current"in e?e.current:e},j9=function(e,t){return e[0]===t[0]&&e[1]===t[1]},_9=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},N9=0,eh=[];function S9(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),a=x.useState(N9++)[0],i=x.useState(I3)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var w=e2([e.lockRef.current],(e.shards||[]).map(D_),!0).filter(Boolean);return w.forEach(function(j){return j.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),w.forEach(function(j){return j.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(w,j){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var _=sv(w),C=r.current,k="deltaX"in w?w.deltaX:C[0]-_[0],E="deltaY"in w?w.deltaY:C[1]-_[1],I,D=w.target,O=Math.abs(k)>Math.abs(E)?"h":"v";if("touches"in w&&O==="h"&&D.type==="range")return!1;var F=R_(O,D);if(!F)return!0;if(F?I=O:(I=O==="v"?"h":"v",F=R_(O,D)),!F)return!1;if(!n.current&&"changedTouches"in w&&(k||E)&&(n.current=I),!I)return!0;var T=n.current||I;return b9(T,j,w,T==="h"?k:E)},[]),u=x.useCallback(function(w){var j=w;if(!(!eh.length||eh[eh.length-1]!==i)){var _="deltaY"in j?L_(j):sv(j),C=t.current.filter(function(I){return I.name===j.type&&(I.target===j.target||j.target===I.shadowParent)&&j9(I.delta,_)})[0];if(C&&C.should){j.cancelable&&j.preventDefault();return}if(!C){var k=(o.current.shards||[]).map(D_).filter(Boolean).filter(function(I){return I.contains(j.target)}),E=k.length>0?l(j,k[0]):!o.current.noIsolation;E&&j.cancelable&&j.preventDefault()}}},[]),f=x.useCallback(function(w,j,_,C){var k={name:w,delta:j,target:_,should:C,shadowParent:k9(_)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(E){return E!==k})},1)},[]),h=x.useCallback(function(w){r.current=sv(w),n.current=void 0},[]),p=x.useCallback(function(w){f(w.type,L_(w),w.target,l(w,e.lockRef.current))},[]),v=x.useCallback(function(w){f(w.type,sv(w),w.target,l(w,e.lockRef.current))},[]);x.useEffect(function(){return eh.push(i),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",u,Xf),document.addEventListener("touchmove",u,Xf),document.addEventListener("touchstart",h,Xf),function(){eh=eh.filter(function(w){return w!==i}),document.removeEventListener("wheel",u,Xf),document.removeEventListener("touchmove",u,Xf),document.removeEventListener("touchstart",h,Xf)}},[]);var m=e.removeScrollBar,N=e.inert;return x.createElement(x.Fragment,null,N?x.createElement(i,{styles:_9(a)}):null,m?x.createElement(m9,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function k9(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const C9=t9(D3,S9);var Zp=x.forwardRef(function(e,t){return x.createElement(t0,ao({},e,{ref:t,sideCar:C9}))});Zp.classNames=t0.classNames;var Pw=["Enter"," "],E9=["ArrowDown","PageUp","Home"],B3=["ArrowUp","PageDown","End"],P9=[...E9,...B3],A9={ltr:[...Pw,"ArrowRight"],rtl:[...Pw,"ArrowLeft"]},T9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Xp="Menu",[Ep,R9,L9]=Wp(Xp),[pf,U3]=bs(Xp,[L9,Qu,Xu]),r0=Qu(),$3=Xu(),[D9,gf]=pf(Xp),[I9,eg]=pf(Xp),z3=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:a,onOpenChange:i,modal:o=!0}=e,l=r0(t),[u,f]=x.useState(null),h=x.useRef(!1),p=as(i),v=Zu(a);return x.useEffect(()=>{const m=()=>{h.current=!0,document.addEventListener("pointerdown",N,{capture:!0,once:!0}),document.addEventListener("pointermove",N,{capture:!0,once:!0})},N=()=>h.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",N,{capture:!0}),document.removeEventListener("pointermove",N,{capture:!0})}},[]),s.jsx($x,{...l,children:s.jsx(D9,{scope:t,open:r,onOpenChange:p,content:u,onContentChange:f,children:s.jsx(I9,{scope:t,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:v,modal:o,children:n})})})};z3.displayName=Xp;var O9="MenuAnchor",t2=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=r0(r);return s.jsx(Yp,{...a,...n,ref:t})});t2.displayName=O9;var r2="MenuPortal",[M9,q3]=pf(r2,{forceMount:void 0}),V3=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:a}=e,i=gf(r2,t);return s.jsx(M9,{scope:t,forceMount:r,children:s.jsx(qs,{present:r||i.open,children:s.jsx(Zh,{asChild:!0,container:a,children:n})})})};V3.displayName=r2;var io="MenuContent",[F9,n2]=pf(io),W3=x.forwardRef((e,t)=>{const r=q3(io,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=gf(io,e.__scopeMenu),o=eg(io,e.__scopeMenu);return s.jsx(Ep.Provider,{scope:e.__scopeMenu,children:s.jsx(qs,{present:n||i.open,children:s.jsx(Ep.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(B9,{...a,ref:t}):s.jsx(U9,{...a,ref:t})})})})}),B9=x.forwardRef((e,t)=>{const r=gf(io,e.__scopeMenu),n=x.useRef(null),a=Jt(t,n);return x.useEffect(()=>{const i=n.current;if(i)return Xx(i)},[]),s.jsx(s2,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:lt(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),U9=x.forwardRef((e,t)=>{const r=gf(io,e.__scopeMenu);return s.jsx(s2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),$9=zu("MenuContent.ScrollLock"),s2=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:a,onOpenAutoFocus:i,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:u,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:m,disableOutsideScroll:N,...w}=e,j=gf(io,r),_=eg(io,r),C=r0(r),k=$3(r),E=R9(r),[I,D]=x.useState(null),O=x.useRef(null),F=Jt(t,O,j.onContentChange),T=x.useRef(0),z=x.useRef(""),U=x.useRef(0),B=x.useRef(null),K=x.useRef("right"),V=x.useRef(0),de=N?Zp:x.Fragment,se=N?{as:$9,allowPinchZoom:!0}:void 0,Y=ee=>{const ge=z.current+ee,re=E().filter(ie=>!ie.disabled),L=document.activeElement,q=re.find(ie=>ie.ref.current===L)?.textValue,J=re.map(ie=>ie.textValue),ne=X9(J,ge,q),ue=re.find(ie=>ie.textValue===ne)?.ref.current;(function ie(oe){z.current=oe,window.clearTimeout(T.current),oe!==""&&(T.current=window.setTimeout(()=>ie(""),1e3))})(ge),ue&&setTimeout(()=>ue.focus())};x.useEffect(()=>()=>window.clearTimeout(T.current),[]),Qx();const W=x.useCallback(ee=>K.current===B.current?.side&&tB(ee,B.current?.area),[]);return s.jsx(F9,{scope:r,searchRef:z,onItemEnter:x.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),onItemLeave:x.useCallback(ee=>{W(ee)||(O.current?.focus(),D(null))},[W]),onTriggerLeave:x.useCallback(ee=>{W(ee)&&ee.preventDefault()},[W]),pointerGraceTimerRef:U,onPointerGraceIntentChange:x.useCallback(ee=>{B.current=ee},[]),children:s.jsx(de,{...se,children:s.jsx(Qp,{asChild:!0,trapped:a,onMountAutoFocus:lt(i,ee=>{ee.preventDefault(),O.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(df,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:m,children:s.jsx(Jx,{asChild:!0,...k,dir:_.dir,orientation:"vertical",loop:n,currentTabStopId:I,onCurrentTabStopIdChange:D,onEntryFocus:lt(u,ee=>{_.isUsingKeyboardRef.current||ee.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(zx,{role:"menu","aria-orientation":"vertical","data-state":oE(j.open),"data-radix-menu-content":"",dir:_.dir,...C,...w,ref:F,style:{outline:"none",...w.style},onKeyDown:lt(w.onKeyDown,ee=>{const re=ee.target.closest("[data-radix-menu-content]")===ee.currentTarget,L=ee.ctrlKey||ee.altKey||ee.metaKey,q=ee.key.length===1;re&&(ee.key==="Tab"&&ee.preventDefault(),!L&&q&&Y(ee.key));const J=O.current;if(ee.target!==J||!P9.includes(ee.key))return;ee.preventDefault();const ue=E().filter(ie=>!ie.disabled).map(ie=>ie.ref.current);B3.includes(ee.key)&&ue.reverse(),J9(ue)}),onBlur:lt(e.onBlur,ee=>{ee.currentTarget.contains(ee.target)||(window.clearTimeout(T.current),z.current="")}),onPointerMove:lt(e.onPointerMove,Pp(ee=>{const ge=ee.target,re=V.current!==ee.clientX;if(ee.currentTarget.contains(ge)&&re){const L=ee.clientX>V.current?"right":"left";K.current=L,V.current=ee.clientX}}))})})})})})})});W3.displayName=io;var z9="MenuGroup",a2=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(vt.div,{role:"group",...n,ref:t})});a2.displayName=z9;var q9="MenuLabel",H3=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(vt.div,{...n,ref:t})});H3.displayName=q9;var rx="MenuItem",I_="menu.itemSelect",n0=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...a}=e,i=x.useRef(null),o=eg(rx,e.__scopeMenu),l=n2(rx,e.__scopeMenu),u=Jt(t,i),f=x.useRef(!1),h=()=>{const p=i.current;if(!r&&p){const v=new CustomEvent(I_,{bubbles:!0,cancelable:!0});p.addEventListener(I_,m=>n?.(m),{once:!0}),kb(p,v),v.defaultPrevented?f.current=!1:o.onClose()}};return s.jsx(G3,{...a,ref:u,disabled:r,onClick:lt(e.onClick,h),onPointerDown:p=>{e.onPointerDown?.(p),f.current=!0},onPointerUp:lt(e.onPointerUp,p=>{f.current||p.currentTarget?.click()}),onKeyDown:lt(e.onKeyDown,p=>{const v=l.searchRef.current!=="";r||v&&p.key===" "||Pw.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});n0.displayName=rx;var G3=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:a,...i}=e,o=n2(rx,r),l=$3(r),u=x.useRef(null),f=Jt(t,u),[h,p]=x.useState(!1),[v,m]=x.useState("");return x.useEffect(()=>{const N=u.current;N&&m((N.textContent??"").trim())},[i.children]),s.jsx(Ep.ItemSlot,{scope:r,disabled:n,textValue:a??v,children:s.jsx(Zx,{asChild:!0,...l,focusable:!n,children:s.jsx(vt.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...i,ref:f,onPointerMove:lt(e.onPointerMove,Pp(N=>{n?o.onItemLeave(N):(o.onItemEnter(N),N.defaultPrevented||N.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:lt(e.onPointerLeave,Pp(N=>o.onItemLeave(N))),onFocus:lt(e.onFocus,()=>p(!0)),onBlur:lt(e.onBlur,()=>p(!1))})})})}),V9="MenuCheckboxItem",K3=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...a}=e;return s.jsx(X3,{scope:e.__scopeMenu,checked:r,children:s.jsx(n0,{role:"menuitemcheckbox","aria-checked":nx(r)?"mixed":r,...a,ref:t,"data-state":o2(r),onSelect:lt(a.onSelect,()=>n?.(nx(r)?!0:!r),{checkForDefaultPrevented:!1})})})});K3.displayName=V9;var Y3="MenuRadioGroup",[W9,H9]=pf(Y3,{value:void 0,onValueChange:()=>{}}),Q3=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...a}=e,i=as(n);return s.jsx(W9,{scope:e.__scopeMenu,value:r,onValueChange:i,children:s.jsx(a2,{...a,ref:t})})});Q3.displayName=Y3;var J3="MenuRadioItem",Z3=x.forwardRef((e,t)=>{const{value:r,...n}=e,a=H9(J3,e.__scopeMenu),i=r===a.value;return s.jsx(X3,{scope:e.__scopeMenu,checked:i,children:s.jsx(n0,{role:"menuitemradio","aria-checked":i,...n,ref:t,"data-state":o2(i),onSelect:lt(n.onSelect,()=>a.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});Z3.displayName=J3;var i2="MenuItemIndicator",[X3,G9]=pf(i2,{checked:!1}),eE=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...a}=e,i=G9(i2,r);return s.jsx(qs,{present:n||nx(i.checked)||i.checked===!0,children:s.jsx(vt.span,{...a,ref:t,"data-state":o2(i.checked)})})});eE.displayName=i2;var K9="MenuSeparator",tE=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(vt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});tE.displayName=K9;var Y9="MenuArrow",rE=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,a=r0(r);return s.jsx(qx,{...a,...n,ref:t})});rE.displayName=Y9;var Q9="MenuSub",[_te,nE]=pf(Q9),Jm="MenuSubTrigger",sE=x.forwardRef((e,t)=>{const r=gf(Jm,e.__scopeMenu),n=eg(Jm,e.__scopeMenu),a=nE(Jm,e.__scopeMenu),i=n2(Jm,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:u}=i,f={__scopeMenu:e.__scopeMenu},h=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>h,[h]),x.useEffect(()=>{const p=l.current;return()=>{window.clearTimeout(p),u(null)}},[l,u]),s.jsx(t2,{asChild:!0,...f,children:s.jsx(G3,{id:a.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":a.contentId,"data-state":oE(r.open),...e,ref:Oc(t,a.onTriggerChange),onClick:p=>{e.onClick?.(p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:lt(e.onPointerMove,Pp(p=>{i.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(i.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:lt(e.onPointerLeave,Pp(p=>{h();const v=r.content?.getBoundingClientRect();if(v){const m=r.content?.dataset.side,N=m==="right",w=N?-5:5,j=v[N?"left":"right"],_=v[N?"right":"left"];i.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:j,y:v.top},{x:_,y:v.top},{x:_,y:v.bottom},{x:j,y:v.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(p),p.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:lt(e.onKeyDown,p=>{const v=i.searchRef.current!=="";e.disabled||v&&p.key===" "||A9[n.dir].includes(p.key)&&(r.onOpenChange(!0),r.content?.focus(),p.preventDefault())})})})});sE.displayName=Jm;var aE="MenuSubContent",iE=x.forwardRef((e,t)=>{const r=q3(io,e.__scopeMenu),{forceMount:n=r.forceMount,...a}=e,i=gf(io,e.__scopeMenu),o=eg(io,e.__scopeMenu),l=nE(aE,e.__scopeMenu),u=x.useRef(null),f=Jt(t,u);return s.jsx(Ep.Provider,{scope:e.__scopeMenu,children:s.jsx(qs,{present:n||i.open,children:s.jsx(Ep.Slot,{scope:e.__scopeMenu,children:s.jsx(s2,{id:l.contentId,"aria-labelledby":l.triggerId,...a,ref:f,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{o.isUsingKeyboardRef.current&&u.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:lt(e.onFocusOutside,h=>{h.target!==l.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:lt(e.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:lt(e.onKeyDown,h=>{const p=h.currentTarget.contains(h.target),v=T9[o.dir].includes(h.key);p&&v&&(i.onOpenChange(!1),l.trigger?.focus(),h.preventDefault())})})})})})});iE.displayName=aE;function oE(e){return e?"open":"closed"}function nx(e){return e==="indeterminate"}function o2(e){return nx(e)?"indeterminate":e?"checked":"unchecked"}function J9(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function Z9(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function X9(e,t,r){const a=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=Z9(e,Math.max(i,0));a.length===1&&(o=o.filter(f=>f!==r));const u=o.find(f=>f.toLowerCase().startsWith(a.toLowerCase()));return u!==r?u:void 0}function eB(e,t){const{x:r,y:n}=e;let a=!1;for(let i=0,o=t.length-1;i<t.length;o=i++){const l=t[i],u=t[o],f=l.x,h=l.y,p=u.x,v=u.y;h>n!=v>n&&r<(p-f)*(n-h)/(v-h)+f&&(a=!a)}return a}function tB(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return eB(r,t)}function Pp(e){return t=>t.pointerType==="mouse"?e(t):void 0}var rB=z3,nB=t2,sB=V3,aB=W3,iB=a2,oB=H3,lB=n0,cB=K3,uB=Q3,dB=Z3,fB=eE,hB=tE,mB=rE,pB=sE,gB=iE,s0="DropdownMenu",[vB]=bs(s0,[U3]),Ha=U3(),[xB,lE]=vB(s0),cE=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:a,defaultOpen:i,onOpenChange:o,modal:l=!0}=e,u=Ha(t),f=x.useRef(null),[h,p]=Ea({prop:a,defaultProp:i??!1,onChange:o,caller:s0});return s.jsx(xB,{scope:t,triggerId:Xs(),triggerRef:f,contentId:Xs(),open:h,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(v=>!v),[p]),modal:l,children:s.jsx(rB,{...u,open:h,onOpenChange:p,dir:n,modal:l,children:r})})};cE.displayName=s0;var uE="DropdownMenuTrigger",dE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...a}=e,i=lE(uE,r),o=Ha(r);return s.jsx(nB,{asChild:!0,...o,children:s.jsx(vt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...a,ref:Oc(t,i.triggerRef),onPointerDown:lt(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(i.onOpenToggle(),i.open||l.preventDefault())}),onKeyDown:lt(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&i.onOpenToggle(),l.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});dE.displayName=uE;var yB="DropdownMenuPortal",fE=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ha(t);return s.jsx(sB,{...n,...r})};fE.displayName=yB;var hE="DropdownMenuContent",mE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=lE(hE,r),i=Ha(r),o=x.useRef(!1);return s.jsx(aB,{id:a.contentId,"aria-labelledby":a.triggerId,...i,...n,ref:t,onCloseAutoFocus:lt(e.onCloseAutoFocus,l=>{o.current||a.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:lt(e.onInteractOutside,l=>{const u=l.detail.originalEvent,f=u.button===0&&u.ctrlKey===!0,h=u.button===2||f;(!a.modal||h)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});mE.displayName=hE;var wB="DropdownMenuGroup",bB=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(iB,{...a,...n,ref:t})});bB.displayName=wB;var jB="DropdownMenuLabel",pE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(oB,{...a,...n,ref:t})});pE.displayName=jB;var _B="DropdownMenuItem",gE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(lB,{...a,...n,ref:t})});gE.displayName=_B;var NB="DropdownMenuCheckboxItem",vE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(cB,{...a,...n,ref:t})});vE.displayName=NB;var SB="DropdownMenuRadioGroup",kB=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(uB,{...a,...n,ref:t})});kB.displayName=SB;var CB="DropdownMenuRadioItem",xE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(dB,{...a,...n,ref:t})});xE.displayName=CB;var EB="DropdownMenuItemIndicator",yE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(fB,{...a,...n,ref:t})});yE.displayName=EB;var PB="DropdownMenuSeparator",wE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(hB,{...a,...n,ref:t})});wE.displayName=PB;var AB="DropdownMenuArrow",TB=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(mB,{...a,...n,ref:t})});TB.displayName=AB;var RB="DropdownMenuSubTrigger",bE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(pB,{...a,...n,ref:t})});bE.displayName=RB;var LB="DropdownMenuSubContent",jE=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,a=Ha(r);return s.jsx(gB,{...a,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});jE.displayName=LB;var DB=cE,IB=dE,OB=fE,_E=mE,NE=pE,SE=gE,kE=vE,CE=xE,EE=yE,PE=wE,AE=bE,TE=jE;const l2=DB,c2=IB,MB=x.forwardRef(({className:e,inset:t,children:r,...n},a)=>s.jsxs(AE,{ref:a,className:Oe("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(xp,{className:"ml-auto h-4 w-4"})]}));MB.displayName=AE.displayName;const FB=x.forwardRef(({className:e,...t},r)=>s.jsx(TE,{ref:r,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));FB.displayName=TE.displayName;const a0=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(OB,{children:s.jsx(_E,{ref:n,sideOffset:t,className:Oe("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));a0.displayName=_E.displayName;const Pl=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(SE,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));Pl.displayName=SE.displayName;const BB=x.forwardRef(({className:e,children:t,checked:r,...n},a)=>s.jsxs(kE,{ref:a,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(EE,{children:s.jsx(Na,{className:"h-4 w-4"})})}),t]}));BB.displayName=kE.displayName;const UB=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(CE,{ref:n,className:Oe("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(EE,{children:s.jsx(Bk,{className:"h-2 w-2 fill-current"})})}),t]}));UB.displayName=CE.displayName;const RE=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(NE,{ref:n,className:Oe("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));RE.displayName=NE.displayName;const Aw=x.forwardRef(({className:e,...t},r)=>s.jsx(PE,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",e),...t}));Aw.displayName=PE.displayName;const $B="modulepreload",zB=function(e){return"/"+e},O_={},Al=function(t,r,n){let a=Promise.resolve();if(r&&r.length>0){let u=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");a=u(r.map(f=>{if(f=zB(f),f in O_)return;O_[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":$B,h||(v.as="script"),v.crossOrigin="",v.href=f,l&&v.setAttribute("nonce",l),document.head.appendChild(v),h)return new Promise((m,N)=>{v.addEventListener("load",m),v.addEventListener("error",()=>N(new Error(`Unable to preload CSS for ${f}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return t().catch(i)})},qB=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Al(async()=>{const{default:n}=await Promise.resolve().then(()=>vf);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class u2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class M_ extends u2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class F_ extends u2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class B_ extends u2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var Tw;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(Tw||(Tw={}));class VB{constructor(t,{headers:r={},customFetch:n,region:a=Tw.Any}={}){this.url=t,this.headers=r,this.region=a,this.fetch=qB(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return $t(this,arguments,void 0,function*(r,n={}){var a;try{const{headers:i,method:o,body:l,signal:u}=n;let f={},{region:h}=n;h||(h=this.region);const p=new URL(`${this.url}/${r}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;l&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(f["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(f["Content-Type"]="application/json",v=JSON.stringify(l)):v=l;const m=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),i),body:v,signal:u}).catch(_=>{throw _.name==="AbortError"?_:new M_(_)}),N=m.headers.get("x-relay-error");if(N&&N==="true")throw new F_(m);if(!m.ok)throw new B_(m);let w=((a=m.headers.get("Content-Type"))!==null&&a!==void 0?a:"text/plain").split(";")[0].trim(),j;return w==="application/json"?j=yield m.json():w==="application/octet-stream"||w==="application/pdf"?j=yield m.blob():w==="text/event-stream"?j=m:w==="multipart/form-data"?j=yield m.formData():j=yield m.text(),{data:j,error:null,response:m}}catch(i){return i instanceof Error&&i.name==="AbortError"?{data:null,error:new M_(i)}:{data:null,error:i,response:i instanceof B_||i instanceof F_?i.context:void 0}}})}}var ya={};const am=ik(HF);var av={},iv={},ov={},lv={},cv={},WB=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Fh=WB();const HB=Fh.fetch,LE=Fh.fetch.bind(Fh),DE=Fh.Headers,GB=Fh.Request,KB=Fh.Response,vf=Object.freeze(Object.defineProperty({__proto__:null,Headers:DE,Request:GB,Response:KB,default:LE,fetch:HB},Symbol.toStringTag,{value:"Module"})),YB=ik(vf);var uv={},U_;function IE(){if(U_)return uv;U_=1,Object.defineProperty(uv,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return uv.default=e,uv}var $_;function OE(){if($_)return cv;$_=1,Object.defineProperty(cv,"__esModule",{value:!0});const e=am,t=e.__importDefault(YB),r=e.__importDefault(IE());class n{constructor(i){var o,l;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(l=i.isMaybeSingle)!==null&&l!==void 0?l:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let u=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,m;let N=null,w=null,j=null,_=f.status,C=f.statusText;if(f.ok){if(this.method!=="HEAD"){const D=await f.text();D===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?w=D:w=JSON.parse(D))}const E=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),I=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");E&&I&&I.length>1&&(j=parseInt(I[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(N={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,j=null,_=406,C="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const E=await f.text();try{N=JSON.parse(E),Array.isArray(N)&&f.status===404&&(w=[],N=null,_=200,C="OK")}catch{f.status===404&&E===""?(_=204,C="No Content"):N={message:E}}if(N&&this.isMaybeSingle&&(!((m=N?.details)===null||m===void 0)&&m.includes("0 rows"))&&(N=null,_=200,C="OK"),N&&this.shouldThrowOnError)throw new r.default(N)}return{error:N,data:w,count:j,status:_,statusText:C}});return this.shouldThrowOnError||(u=u.catch(f=>{var h,p,v;return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:`${(p=f?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),u.then(i,o)}returns(){return this}overrideTypes(){return this}}return cv.default=n,cv}var z_;function ME(){if(z_)return lv;z_=1,Object.defineProperty(lv,"__esModule",{value:!0});const t=am.__importDefault(OE());class r extends t.default{select(a){let i=!1;const o=(a??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(a,{ascending:i=!0,nullsFirst:o,foreignTable:l,referencedTable:u=l}={}){const f=u?`${u}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${a}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(a,{foreignTable:i,referencedTable:o=i}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${a}`),this}range(a,i,{foreignTable:o,referencedTable:l=o}={}){const u=typeof l>"u"?"offset":`${l}.offset`,f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(u,`${a}`),this.url.searchParams.set(f,`${i-a+1}`),this}abortSignal(a){return this.signal=a,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:a=!1,verbose:i=!1,settings:o=!1,buffers:l=!1,wal:u=!1,format:f="text"}={}){var h;const p=[a?"analyze":null,i?"verbose":null,o?"settings":null,l?"buffers":null,u?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(a){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${a}`),this}}return lv.default=r,lv}var q_;function d2(){if(q_)return ov;q_=1,Object.defineProperty(ov,"__esModule",{value:!0});const t=am.__importDefault(ME());class r extends t.default{eq(a,i){return this.url.searchParams.append(a,`eq.${i}`),this}neq(a,i){return this.url.searchParams.append(a,`neq.${i}`),this}gt(a,i){return this.url.searchParams.append(a,`gt.${i}`),this}gte(a,i){return this.url.searchParams.append(a,`gte.${i}`),this}lt(a,i){return this.url.searchParams.append(a,`lt.${i}`),this}lte(a,i){return this.url.searchParams.append(a,`lte.${i}`),this}like(a,i){return this.url.searchParams.append(a,`like.${i}`),this}likeAllOf(a,i){return this.url.searchParams.append(a,`like(all).{${i.join(",")}}`),this}likeAnyOf(a,i){return this.url.searchParams.append(a,`like(any).{${i.join(",")}}`),this}ilike(a,i){return this.url.searchParams.append(a,`ilike.${i}`),this}ilikeAllOf(a,i){return this.url.searchParams.append(a,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(a,i){return this.url.searchParams.append(a,`ilike(any).{${i.join(",")}}`),this}is(a,i){return this.url.searchParams.append(a,`is.${i}`),this}in(a,i){const o=Array.from(new Set(i)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(a,`in.(${o})`),this}contains(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cs.{${i.join(",")}}`):this.url.searchParams.append(a,`cs.${JSON.stringify(i)}`),this}containedBy(a,i){return typeof i=="string"?this.url.searchParams.append(a,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(a,`cd.{${i.join(",")}}`):this.url.searchParams.append(a,`cd.${JSON.stringify(i)}`),this}rangeGt(a,i){return this.url.searchParams.append(a,`sr.${i}`),this}rangeGte(a,i){return this.url.searchParams.append(a,`nxl.${i}`),this}rangeLt(a,i){return this.url.searchParams.append(a,`sl.${i}`),this}rangeLte(a,i){return this.url.searchParams.append(a,`nxr.${i}`),this}rangeAdjacent(a,i){return this.url.searchParams.append(a,`adj.${i}`),this}overlaps(a,i){return typeof i=="string"?this.url.searchParams.append(a,`ov.${i}`):this.url.searchParams.append(a,`ov.{${i.join(",")}}`),this}textSearch(a,i,{config:o,type:l}={}){let u="";l==="plain"?u="pl":l==="phrase"?u="ph":l==="websearch"&&(u="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(a,`${u}fts${f}.${i}`),this}match(a){return Object.entries(a).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(a,i,o){return this.url.searchParams.append(a,`not.${i}.${o}`),this}or(a,{foreignTable:i,referencedTable:o=i}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${a})`),this}filter(a,i,o){return this.url.searchParams.append(a,`${i}.${o}`),this}}return ov.default=r,ov}var V_;function FE(){if(V_)return iv;V_=1,Object.defineProperty(iv,"__esModule",{value:!0});const t=am.__importDefault(d2());class r{constructor(a,{headers:i={},schema:o,fetch:l}){this.url=a,this.headers=new Headers(i),this.schema=o,this.fetch=l}select(a,i){const{head:o=!1,count:l}=i??{},u=o?"HEAD":"GET";let f=!1;const h=(a??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(a,{count:i,defaultToNull:o=!0}={}){var l;const u="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const f=a.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(a,{onConflict:i,ignoreDuplicates:o=!1,count:l,defaultToNull:u=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),l&&this.headers.append("Prefer",`count=${l}`),u||this.headers.append("Prefer","missing=default"),Array.isArray(a)){const p=a.reduce((v,m)=>v.concat(Object.keys(m)),[]);if(p.length>0){const v=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(a,{count:i}={}){var o;const l="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:a}={}){var i;const o="DELETE";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return iv.default=r,iv}var W_;function QB(){if(W_)return av;W_=1,Object.defineProperty(av,"__esModule",{value:!0});const e=am,t=e.__importDefault(FE()),r=e.__importDefault(d2());class n{constructor(i,{headers:o={},schema:l,fetch:u}={}){this.url=i,this.headers=new Headers(o),this.schemaName=l,this.fetch=u}from(i){const o=new URL(`${this.url}/${i}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:l=!1,get:u=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${i}`);let m;l||u?(p=l?"HEAD":"GET",Object.entries(o).filter(([w,j])=>j!==void 0).map(([w,j])=>[w,Array.isArray(j)?`{${j.join(",")}}`:`${j}`]).forEach(([w,j])=>{v.searchParams.append(w,j)})):(p="POST",m=o);const N=new Headers(this.headers);return f&&N.set("Prefer",`count=${f}`),new r.default({method:p,url:v,headers:N,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return av.default=n,av}var H_;function JB(){if(H_)return ya;H_=1,Object.defineProperty(ya,"__esModule",{value:!0}),ya.PostgrestError=ya.PostgrestBuilder=ya.PostgrestTransformBuilder=ya.PostgrestFilterBuilder=ya.PostgrestQueryBuilder=ya.PostgrestClient=void 0;const e=am,t=e.__importDefault(QB());ya.PostgrestClient=t.default;const r=e.__importDefault(FE());ya.PostgrestQueryBuilder=r.default;const n=e.__importDefault(d2());ya.PostgrestFilterBuilder=n.default;const a=e.__importDefault(ME());ya.PostgrestTransformBuilder=a.default;const i=e.__importDefault(OE());ya.PostgrestBuilder=i.default;const o=e.__importDefault(IE());return ya.PostgrestError=o.default,ya.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:a.default,PostgrestBuilder:i.default,PostgrestError:o.default},ya}var ZB=JB();const XB=Ax(ZB),{PostgrestClient:eU,PostgrestQueryBuilder:Nte,PostgrestFilterBuilder:Ste,PostgrestTransformBuilder:kte,PostgrestBuilder:Cte,PostgrestError:Ete}=XB;class tU{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,a=parseInt(n.replace(/^v/,"").split(".")[0]);return a>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${a} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${a} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const rU="2.76.1",nU=`realtime-js/${rU}`,sU="1.0.0",Rw=1e4,aU=1e3,iU=100;var lp;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(lp||(lp={}));var Ms;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Ms||(Ms={}));var Io;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(Io||(Io={}));var Lw;(function(e){e.websocket="websocket"})(Lw||(Lw={}));var Vd;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Vd||(Vd={}));class oU{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const a=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+a));o=o+a;const u=n.decode(t.slice(o,o+i));o=o+i;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:u,payload:f}}}class BE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var bn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(bn||(bn={}));const G_=(e,t,r={})=>{var n;const a=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((i,o)=>(i[o]=lU(o,e,t,a),i),{}):{}},lU=(e,t,r,n)=>{const a=t.find(l=>l.name===e),i=a?.type,o=r[e];return i&&!n.includes(i)?UE(i,o):Dw(o)},UE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return fU(t,r)}switch(e){case bn.bool:return cU(t);case bn.float4:case bn.float8:case bn.int2:case bn.int4:case bn.int8:case bn.numeric:case bn.oid:return uU(t);case bn.json:case bn.jsonb:return dU(t);case bn.timestamp:return hU(t);case bn.abstime:case bn.date:case bn.daterange:case bn.int4range:case bn.int8range:case bn.money:case bn.reltime:case bn.text:case bn.time:case bn.timestamptz:case bn.timetz:case bn.tsrange:case bn.tstzrange:return Dw(t);default:return Dw(t)}},Dw=e=>e,cU=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},uU=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},dU=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},fU=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let i;const o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>UE(t,l))}return e},hU=e=>typeof e=="string"?e.replace(" ","T"):e,$E=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Uy{constructor(t,r,n={},a=Rw){this.channel=t,this.event=r,this.payload=n,this.timeout=a,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var K_;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(K_||(K_={}));class cp{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=cp.syncState(this.state,a,i,o),this.pendingDiffs.forEach(u=>{this.state=cp.syncDiff(this.state,u,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},a=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(a):(this.state=cp.syncDiff(this.state,a,i,o),l())}),this.onJoin((a,i,o)=>{this.channel._trigger("presence",{event:"join",key:a,currentPresences:i,newPresences:o})}),this.onLeave((a,i,o)=>{this.channel._trigger("presence",{event:"leave",key:a,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,a){const i=this.cloneDeep(t),o=this.transformState(r),l={},u={};return this.map(i,(f,h)=>{o[f]||(u[f]=h)}),this.map(o,(f,h)=>{const p=i[f];if(p){const v=h.map(j=>j.presence_ref),m=p.map(j=>j.presence_ref),N=h.filter(j=>m.indexOf(j.presence_ref)<0),w=p.filter(j=>v.indexOf(j.presence_ref)<0);N.length>0&&(l[f]=N),w.length>0&&(u[f]=w)}else l[f]=h}),this.syncDiff(i,{joins:l,leaves:u},n,a)}static syncDiff(t,r,n,a){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),a||(a=()=>{}),this.map(i,(l,u)=>{var f;const h=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(u),h.length>0){const p=t[l].map(m=>m.presence_ref),v=h.filter(m=>p.indexOf(m.presence_ref)<0);t[l].unshift(...v)}n(l,h,u)}),this.map(o,(l,u)=>{let f=t[l];if(!f)return;const h=u.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[l]=f,a(l,f,u),f.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const a=t[n];return"metas"in a?r[n]=a.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=a,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Y_;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(Y_||(Y_={}));var up;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(up||(up={}));var Ec;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(Ec||(Ec={}));class f2{constructor(t,r={config:{}},n){var a,i;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Ms.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Uy(this,Io.join,this.params,this.timeout),this.rejoinTimer=new BE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ms.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ms.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ms.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ms.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Ms.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Io.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new cp(this),this.broadcastEndpointURL=$E(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((i=(a=this.params.config)===null||a===void 0?void 0:a.broadcast)===null||i===void 0)&&i.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,a,i;if(this.socket.isConnected()||this.socket.connect(),this.state==Ms.closed){const{config:{broadcast:o,presence:l,private:u}}=this.params,f=(a=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&a!==void 0?a:[],h=!!this.bindings[up.PRESENCE]&&this.bindings[up.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,p={},v={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:f,private:u};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(m=>t?.(Ec.CHANNEL_ERROR,m)),this._onClose(()=>t?.(Ec.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var N;if(this.socket.setAuth(),m===void 0){t?.(Ec.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,j=(N=w?.length)!==null&&N!==void 0?N:0,_=[];for(let C=0;C<j;C++){const k=w[C],{filter:{event:E,schema:I,table:D,filter:O}}=k,F=m&&m[C];if(F&&F.event===E&&F.schema===I&&F.table===D&&F.filter===O)_.push(Object.assign(Object.assign({},k),{id:F.id}));else{this.unsubscribe(),this.state=Ms.errored,t?.(Ec.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=_,t&&t(Ec.SUBSCRIBED);return}}).receive("error",m=>{this.state=Ms.errored,t?.(Ec.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t?.(Ec.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Ms.joined&&t===up.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var a;const i=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:i,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(a=n.timeout)!==null&&a!==void 0?a:this.timeout);if(l.status===202)return{success:!0};let u=l.statusText;try{const f=await l.json();u=f.error||f.message||u}catch{}return Promise.reject(new Error(u))}async send(t,r={}){var n,a;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:i,payload:o}=t,u={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,u,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((a=f.body)===null||a===void 0?void 0:a.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,u;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((u=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||u===void 0)&&u.ack)&&i("ok"),f.receive("ok",()=>i("ok")),f.receive("error",()=>i("error")),f.receive("timeout",()=>i("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ms.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Io.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(a=>{n=new Uy(this,Io.leave,{},t),n.receive("ok",()=>{r(),a("ok")}).receive("timeout",()=>{r(),a("timed out")}).receive("error",()=>{a("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ms.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const a=new AbortController,i=setTimeout(()=>a.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:a.signal}));return clearTimeout(i),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let a=new Uy(this,t,r,n);return this._canPush()?a.send():this._addToPushBuffer(a),a}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>iU){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var a,i;const o=t.toLocaleLowerCase(),{close:l,error:u,leave:f,join:h}=Io;if(n&&[l,u,f,h].indexOf(o)>=0&&n!==this._joinRef())return;let v=this._onMessage(o,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(a=this.bindings.postgres_changes)===null||a===void 0||a.filter(m=>{var N,w,j;return((N=m.filter)===null||N===void 0?void 0:N.event)==="*"||((j=(w=m.filter)===null||w===void 0?void 0:w.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===o}).map(m=>m.callback(v,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var N,w,j,_,C,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const E=m.id,I=(N=m.filter)===null||N===void 0?void 0:N.event;return E&&((w=r.ids)===null||w===void 0?void 0:w.includes(E))&&(I==="*"||I?.toLocaleLowerCase()===((j=r.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const E=(C=(_=m?.filter)===null||_===void 0?void 0:_.event)===null||C===void 0?void 0:C.toLocaleLowerCase();return E==="*"||E===((k=r?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof v=="object"&&"ids"in v){const N=v.data,{schema:w,table:j,commit_timestamp:_,type:C,errors:k}=N;v=Object.assign(Object.assign({},{schema:w,table:j,commit_timestamp:_,eventType:C,new:{},old:{},errors:k}),this._getPayloadRecords(N))}m.callback(v,n)})}_isClosed(){return this.state===Ms.closed}_isJoined(){return this.state===Ms.joined}_isJoining(){return this.state===Ms.joining}_isLeaving(){return this.state===Ms.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const a=t.toLocaleLowerCase(),i={type:a,filter:r,callback:n};return this.bindings[a]?this.bindings[a].push(i):this.bindings[a]=[i],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(a=>{var i;return!(((i=a.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&f2.isEqual(a.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Io.close,{},t)}_onError(t){this._on(Io.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ms.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=G_(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=G_(t.columns,t.old_record)),r}}const $y=()=>{},dv={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},mU=[1e3,2e3,5e3,1e4],pU=1e4,gU=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vU{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Rw,this.transport=null,this.heartbeatIntervalMs=dv.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$y,this.ref=0,this.reconnectTimer=null,this.logger=$y,this.conn=null,this.sendBuffer=[],this.serializer=new oU,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=a=>{let i;return a?i=a:typeof fetch>"u"?i=(...o)=>Al(async()=>{const{default:l}=await Promise.resolve().then(()=>vf);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${Lw.websocket}`,this.httpEndpoint=$E(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=tU.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:sU}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case lp.connecting:return Vd.Connecting;case lp.open:return Vd.Open;case lp.closing:return Vd.Closing;default:return Vd.Closed}}isConnected(){return this.connectionState()===Vd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,a=this.getChannels().find(i=>i.topic===n);if(a)return a;{const i=new f2(`realtime:${t}`,r,this);return this.channels.push(i),i}}push(t){const{topic:r,event:n,payload:a,ref:i}=t,o=()=>{this.encode(t,l=>{var u;(u=this.conn)===null||u===void 0||u.send(l)})};this.log("push",`${r} ${n} (${i})`,a),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(aU,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},dv.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:a,payload:i,ref:o}=r,l=o?`(${o})`:"",u=i.status||"";this.log("receive",`${u} ${n} ${a} ${l}`.trim(),i),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(a,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Io.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",a=new URLSearchParams(r);return`${t}${n}${a}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([gU],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const a={access_token:r,version:nU};r&&n.updateJoinPayload(a),n.joinedOnce&&n._isJoined()&&n._push(Io.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(a){this.log("error",`error in ${t} callback`,a)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new BE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},dv.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,a,i,o,l,u,f,h;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:Rw,this.heartbeatIntervalMs=(a=t?.heartbeatIntervalMs)!==null&&a!==void 0?a:dv.HEARTBEAT_INTERVAL,this.worker=(i=t?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:$y,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(u=t?.reconnectAfterMs)!==null&&u!==void 0?u:(p=>mU[p-1]||pU),this.encode=(f=t?.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class h2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function zn(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class xU extends h2{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class Iw extends h2{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const m2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Al(async()=>{const{default:n}=await Promise.resolve().then(()=>vf);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},yU=()=>$t(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Al(()=>Promise.resolve().then(()=>vf),void 0)).Response:Response}),Ow=e=>{if(Array.isArray(e))return e.map(r=>Ow(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const a=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));t[a]=Ow(n)}),t},wU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},zy=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),bU=(e,t,r)=>$t(void 0,void 0,void 0,function*(){const n=yield yU();e instanceof n&&!r?.noResolveJson?e.json().then(a=>{const i=e.status||500,o=a?.statusCode||i+"";t(new xU(zy(a),i,o))}).catch(a=>{t(new Iw(zy(a),a))}):t(new Iw(zy(e),e))}),jU=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"||!n?a:(wU(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,t?.duplex&&(a.duplex=t.duplex),Object.assign(Object.assign({},a),r))};function tg(e,t,r,n,a,i){return $t(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,jU(t,n,a,i)).then(u=>{if(!u.ok)throw u;return n?.noResolveJson?u:u.json()}).then(u=>o(u)).catch(u=>bU(u,l,n))})})}function Ap(e,t,r,n){return $t(this,void 0,void 0,function*(){return tg(e,"GET",t,r,n)})}function Do(e,t,r,n,a){return $t(this,void 0,void 0,function*(){return tg(e,"POST",t,n,a,r)})}function Mw(e,t,r,n,a){return $t(this,void 0,void 0,function*(){return tg(e,"PUT",t,n,a,r)})}function _U(e,t,r,n){return $t(this,void 0,void 0,function*(){return tg(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function p2(e,t,r,n,a){return $t(this,void 0,void 0,function*(){return tg(e,"DELETE",t,n,a,r)})}class NU{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return $t(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}}var zE;class SU{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[zE]="BlobDownloadBuilder",this.promise=null}asStream(){return new NU(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return $t(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}}zE=Symbol.toStringTag;const kU={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Q_={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class CU{constructor(t,r={},n,a){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=m2(a)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,a){return $t(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Q_),a);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const u=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),u&&i.append("metadata",this.encodeMetadata(u))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,u&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(u)))),a?.headers&&(l=Object.assign(Object.assign({},l),a.headers));const f=this._removeEmptyFolders(r),h=this._getFinalPath(f),p=yield(t=="PUT"?Mw:Do)(this.fetch,`${this.url}/object/${h}`,i,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(zn(i))return{data:null,error:i};throw i}})}upload(t,r,n){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,a){return $t(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(t),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let u;const f=Object.assign({upsert:Q_.upsert},a),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(u=new FormData,u.append("cacheControl",f.cacheControl),u.append("",n)):typeof FormData<"u"&&n instanceof FormData?(u=n,u.append("cacheControl",f.cacheControl)):(u=n,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield Mw(this.fetch,l.toString(),u,{headers:h});return{data:{path:i,fullPath:p.Key},error:null}}catch(u){if(this.shouldThrowOnError)throw u;if(zn(u))return{data:null,error:u};throw u}})}createSignedUploadUrl(t,r){return $t(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const a=Object.assign({},this.headers);r?.upsert&&(a["x-upsert"]="true");const i=yield Do(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:a}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new h2("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}update(t,r,n){return $t(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return $t(this,void 0,void 0,function*(){try{return{data:yield Do(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zn(a))return{data:null,error:a};throw a}})}copy(t,r,n){return $t(this,void 0,void 0,function*(){try{return{data:{path:(yield Do(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zn(a))return{data:null,error:a};throw a}})}createSignedUrl(t,r,n){return $t(this,void 0,void 0,function*(){try{let a=this._getFinalPath(t),i=yield Do(this.fetch,`${this.url}/object/sign/${a}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zn(a))return{data:null,error:a};throw a}})}createSignedUrls(t,r,n){return $t(this,void 0,void 0,function*(){try{const a=yield Do(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),i=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:a.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zn(a))return{data:null,error:a};throw a}})}download(t,r){const a=typeof r?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(r?.transform||{}),o=i?`?${i}`:"",l=this._getFinalPath(t),u=()=>Ap(this.fetch,`${this.url}/${a}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new SU(u,this.shouldThrowOnError)}info(t){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield Ap(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Ow(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}exists(t){return $t(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield _U(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n)&&n instanceof Iw){const a=n.originalError;if([400,404].includes(a?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),a=[],i=r?.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&a.push(i);const l=typeof r?.transform<"u"?"render/image":"object",u=this.transformOptsToQueryString(r?.transform||{});u!==""&&a.push(u);let f=a.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${f}`)}}}remove(t){return $t(this,void 0,void 0,function*(){try{return{data:yield p2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}list(t,r,n){return $t(this,void 0,void 0,function*(){try{const a=Object.assign(Object.assign(Object.assign({},kU),r),{prefix:t||""});return{data:yield Do(this.fetch,`${this.url}/object/list/${this.bucketId}`,a,{headers:this.headers},n),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zn(a))return{data:null,error:a};throw a}})}listV2(t,r){return $t(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield Do(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const qE="2.76.1",VE={"X-Client-Info":`storage-js/${qE}`};class EU{constructor(t,r={},n,a){this.shouldThrowOnError=!1;const i=new URL(t);a?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},VE),r),this.fetch=m2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return $t(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(zn(t))return{data:null,error:t};throw t}})}getBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ap(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}createBucket(t){return $t(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield Do(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(zn(a))return{data:null,error:a};throw a}})}updateBucket(t,r){return $t(this,void 0,void 0,function*(){try{return{data:yield Mw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(zn(n))return{data:null,error:n};throw n}})}emptyBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Do(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield p2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}}class PU{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},VE),r),this.fetch=m2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Do(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}listBuckets(t){return $t(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),a=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,i=yield Ap(this.fetch,a,{headers:this.headers});return{data:Array.isArray(i)?i.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield p2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(zn(r))return{data:null,error:r};throw r}})}}const g2={"X-Client-Info":`storage-js/${qE}`,"Content-Type":"application/json"};class WE extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Di(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class qy extends WE{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class AU extends WE{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var J_;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(J_||(J_={}));const v2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Al(async()=>{const{default:n}=await Promise.resolve().then(()=>vf);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},TU=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Z_=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),RU=(e,t,r)=>$t(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const a=e.status||500,i=e;if(typeof i.json=="function")i.json().then(o=>{const l=o?.statusCode||o?.code||a+"";t(new qy(Z_(o),a,l))}).catch(()=>{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new qy(l,a,o))});else{const o=a+"",l=i.statusText||`HTTP ${a} error`;t(new qy(l,a,o))}}else t(new AU(Z_(e),e))}),LU=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return n?(TU(n)?(a.headers=Object.assign({"Content-Type":"application/json"},t?.headers),a.body=JSON.stringify(n)):a.body=n,Object.assign(Object.assign({},a),r)):a};function DU(e,t,r,n,a,i){return $t(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,LU(t,n,a,i)).then(u=>{if(!u.ok)throw u;if(n?.noResolveJson)return u;const f=u.headers.get("content-type");return!f||!f.includes("application/json")?{}:u.json()}).then(u=>o(u)).catch(u=>RU(u,l,n))})})}function Ii(e,t,r,n,a){return $t(this,void 0,void 0,function*(){return DU(e,"POST",t,n,a,r)})}class IU{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},g2),r),this.fetch=v2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}getIndex(t,r){return $t(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Di(n))return{data:null,error:n};throw n}})}listIndexes(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Di(n))return{data:null,error:n};throw n}})}}class OU{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},g2),r),this.fetch=v2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return $t(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}getVectors(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}listVectors(t){return $t(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield Ii(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}queryVectors(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}deleteVectors(t){return $t(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}}class MU{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},g2),r),this.fetch=v2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}getBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:yield Ii(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}listBuckets(){return $t(this,arguments,void 0,function*(t={}){try{return{data:yield Ii(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}deleteBucket(t){return $t(this,void 0,void 0,function*(){try{return{data:(yield Ii(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Di(r))return{data:null,error:r};throw r}})}}class FU extends MU{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new BU(this.url,this.headers,t,this.fetch)}}class BU extends IU{constructor(t,r,n,a){super(t,r,a),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return $t(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return $t(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return $t(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return $t(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new UU(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class UU extends OU{constructor(t,r,n,a,i){super(t,r,i),this.vectorBucketName=n,this.indexName=a}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return $t(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return $t(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return $t(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return $t(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return $t(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class $U extends EU{constructor(t,r={},n,a){super(t,r,n,a)}from(t){return new CU(this.url,this.headers,t,this.fetch)}get vectors(){return new FU(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new PU(this.url+"/iceberg",this.headers,this.fetch)}}const zU="2.76.1";let Zm="";typeof Deno<"u"?Zm="deno":typeof document<"u"?Zm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Zm="react-native":Zm="node";const qU={"X-Client-Info":`supabase-js-${Zm}/${zU}`},VU={headers:qU},WU={schema:"public"},HU={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},GU={},KU=e=>{let t;return e?t=e:typeof fetch>"u"?t=LE:t=fetch,(...r)=>t(...r)},YU=()=>typeof Headers>"u"?DE:Headers,QU=(e,t,r)=>{const n=KU(r),a=YU();return async(i,o)=>{var l;const u=(l=await t())!==null&&l!==void 0?l:e;let f=new a(o?.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${u}`),n(i,Object.assign(Object.assign({},o),{headers:f}))}};function JU(e){return e.endsWith("/")?e:e+"/"}function ZU(e,t){var r,n;const{db:a,auth:i,realtime:o,global:l}=e,{db:u,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},u),a),auth:Object.assign(Object.assign({},f),i),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(r=p?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function XU(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(JU(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const HE="2.76.1",fh=30*1e3,Fw=3,Vy=Fw*fh,e$="http://localhost:9999",t$="supabase.auth.token",r$={"X-Client-Info":`gotrue-js/${HE}`},Bw="X-Supabase-Api-Version",GE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},n$=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,s$=600*1e3;class Tp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function nr(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class a$ extends Tp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function i$(e){return nr(e)&&e.name==="AuthApiError"}class Wd extends Tp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class td extends Tp{constructor(t,r,n,a){super(t,n,a),this.name=r,this.status=n}}class Lu extends td{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function o$(e){return nr(e)&&e.name==="AuthSessionMissingError"}class th extends td{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class fv extends td{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class hv extends td{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function l$(e){return nr(e)&&e.name==="AuthImplicitGrantRedirectError"}class X_ extends td{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Uw extends td{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Wy(e){return nr(e)&&e.name==="AuthRetryableFetchError"}class eN extends td{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class $w extends td{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const sx="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tN=` 	
\r=`.split(""),c$=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<tN.length;t+=1)e[tN[t].charCodeAt(0)]=-2;for(let t=0;t<sx.length;t+=1)e[sx[t].charCodeAt(0)]=t;return e})();function rN(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sx[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(sx[n]),t.queuedBits-=6}}function KE(e,t,r){const n=c$[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function nN(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},a={queue:0,queuedBits:0},i=o=>{f$(o,n,r)};for(let o=0;o<e.length;o+=1)KE(e.charCodeAt(o),a,i);return t.join("")}function u$(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function d$(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const a=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|a)+65536,r+=1}u$(n,t)}}function f$(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Sh(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};for(let a=0;a<e.length;a+=1)KE(e.charCodeAt(a),r,n);return new Uint8Array(t)}function h$(e){const t=[];return d$(e,r=>t.push(r)),new Uint8Array(t)}function Gd(e){const t=[],r={queue:0,queuedBits:0},n=a=>{t.push(a)};return e.forEach(a=>rN(a,r,n)),rN(null,r,n),t.join("")}function m$(e){return Math.round(Date.now()/1e3)+e}function p$(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const Ti=()=>typeof window<"u"&&typeof document<"u",Md={tested:!1,writable:!1},YE=()=>{if(!Ti())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Md.tested)return Md.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Md.tested=!0,Md.writable=!0}catch{Md.tested=!0,Md.writable=!1}return Md.writable};function g$(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((a,i)=>{t[i]=a})}catch{}return r.searchParams.forEach((n,a)=>{t[a]=n}),t}const QE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>Al(async()=>{const{default:n}=await Promise.resolve().then(()=>vf);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},v$=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",hh=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Fd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Cu=async(e,t)=>{await e.removeItem(t)};class i0{constructor(){this.promise=new i0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}i0.promiseConstructor=Promise;function Hy(e){const t=e.split(".");if(t.length!==3)throw new $w("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!n$.test(t[n]))throw new $w("JWT not in base64url format");return{header:JSON.parse(nN(t[0])),payload:JSON.parse(nN(t[1])),signature:Sh(t[2]),raw:{header:t[0],payload:t[1]}}}async function x$(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function y$(e,t){return new Promise((n,a)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await e(i);if(!t(i,null,o)){n(o);return}}catch(o){if(!t(i,o)){a(o);return}}})()})}function w$(e){return("0"+e.toString(16)).substr(-2)}function b$(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let a="";for(let i=0;i<56;i++)a+=r.charAt(Math.floor(Math.random()*n));return a}return crypto.getRandomValues(t),Array.from(t,w$).join("")}async function j$(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),a=new Uint8Array(n);return Array.from(a).map(i=>String.fromCharCode(i)).join("")}async function _$(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await j$(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function rh(e,t,r=!1){const n=b$();let a=n;r&&(a+="/PASSWORD_RECOVERY"),await hh(e,`${t}-code-verifier`,a);const i=await _$(n);return[i,n===i?"plain":"s256"]}const N$=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function S$(e){const t=e.headers.get(Bw);if(!t||!t.match(N$))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function k$(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function C$(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const E$=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function nh(e){if(!E$.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Gy(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function sN(e){return JSON.parse(JSON.stringify(e))}const Bd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),P$=[502,503,504];async function aN(e){var t;if(!v$(e))throw new Uw(Bd(e),0);if(P$.includes(e.status))throw new Uw(Bd(e),e.status);let r;try{r=await e.json()}catch(i){throw new Wd(Bd(i),i)}let n;const a=S$(e);if(a&&a.getTime()>=GE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new eN(Bd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new Lu}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new eN(Bd(r),e.status,r.weak_password.reasons);throw new a$(Bd(r),e.status||500,n)}const A$=(e,t,r,n)=>{const a={method:e,headers:t?.headers||{}};return e==="GET"?a:(a.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),a.body=JSON.stringify(n),Object.assign(Object.assign({},a),r))};async function xr(e,t,r,n){var a;const i=Object.assign({},n?.headers);i[Bw]||(i[Bw]=GE["2024-01-01"].name),n?.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(a=n?.query)!==null&&a!==void 0?a:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",u=await T$(e,t,r+l,{headers:i,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(u):{data:Object.assign({},u),error:null}}async function T$(e,t,r,n,a,i){const o=A$(t,n,a,i);let l;try{l=await e(r,Object.assign({},o))}catch(u){throw console.error(u),new Uw(Bd(u),0)}if(l.ok||await aN(l),n?.noResolveJson)return l;try{return await l.json()}catch(u){await aN(u)}}function To(e){var t;let r=null;D$(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=m$(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function iN(e){const t=To(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Iu(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function R$(e){return{data:e,error:null}}function L$(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i}=e,o=ed(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:a,verification_type:i},u=Object.assign({},o);return{data:{properties:l,user:u},error:null}}function oN(e){return e}function D$(e){return e.access_token&&e.refresh_token&&e.expires_in}const Ky=["global","local","others"];class I${constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=QE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Ky[0]){if(Ky.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Ky.join(", ")}`);try{return await xr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await xr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Iu})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=ed(t,["options"]),a=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(a.new_email=n?.newEmail,delete a.newEmail),await xr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:a,headers:this.headers,xform:L$,redirectTo:r?.redirectTo})}catch(r){if(nr(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await xr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Iu})}catch(r){if(nr(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,a,i,o,l,u;try{const f={nextPage:null,lastPage:0,total:0},h=await xr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:oN});if(h.error)throw h.error;const p=await h.json(),v=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(N.split(";")[1].split("=")[1]);f[`${j}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(nr(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){nh(t);try{return await xr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Iu})}catch(r){if(nr(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){nh(t);try{return await xr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Iu})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){nh(t);try{return await xr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Iu})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){nh(t.userId);try{const{data:r,error:n}=await xr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:a=>({data:{factors:a},error:null})});return{data:r,error:n}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _deleteFactor(t){nh(t.userId),nh(t.id);try{return{data:await xr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,a,i,o,l,u;try{const f={nextPage:null,lastPage:0,total:0},h=await xr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(a=t?.perPage)===null||a===void 0?void 0:a.toString())!==null&&i!==void 0?i:""},xform:oN});if(h.error)throw h.error;const p=await h.json(),v=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(u=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&u!==void 0?u:[];return m.length>0&&(m.forEach(N=>{const w=parseInt(N.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(N.split(";")[1].split("=")[1]);f[`${j}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(nr(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await xr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await xr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await xr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await xr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}}function lN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const sh={debug:!!(globalThis&&YE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class JE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class O$ extends JE{}async function M$(e,t,r){sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),sh.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async a=>{if(a){sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,a.name);try{return await r()}finally{sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,a.name)}}else{if(t===0)throw sh.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new O$(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(sh.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function F$(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function ZE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function B$(e){return parseInt(e,16)}function U$(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function $$(e){var t;const{chainId:r,domain:n,expirationTime:a,issuedAt:i=new Date,nonce:o,notBefore:l,requestId:u,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=ZE(e.address),N=h?`${h}://${n}`:n,w=e.statement?`${e.statement}
`:"",j=`${N} wants you to sign in with your Ethereum account:
${m}

${w}`;let _=`URI: ${p}
Version: ${v}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${i.toISOString()}`;if(a&&(_+=`
Expiration Time: ${a.toISOString()}`),l&&(_+=`
Not Before: ${l.toISOString()}`),u&&(_+=`
Request ID: ${u}`),f){let C=`
Resources:`;for(const k of f){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);C+=`
- ${k}`}_+=C}return`${j}
${_}`}class Cs extends Error{constructor({message:t,code:r,cause:n,name:a}){var i;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(i=a??(n instanceof Error?n.name:void 0))!==null&&i!==void 0?i:"Unknown Error",this.code=r}}class ax extends Cs{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function z$({error:e,options:t}){var r,n,a;const{publicKey:i}=t;if(!i)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Cs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=i.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new Cs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=i.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new Cs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((a=i.authenticatorSelection)===null||a===void 0?void 0:a.userVerification)==="required")return new Cs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new Cs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new Cs({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return i.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new Cs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new Cs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(XE(o)){if(i.rp.id!==o)return new Cs({message:`The RP ID "${i.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Cs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(i.user.id.byteLength<1||i.user.id.byteLength>64)return new Cs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new Cs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function q$({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new Cs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new Cs({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(XE(n)){if(r.rpId!==n)return new Cs({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new Cs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new Cs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new Cs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class V${createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const W$=new V$;function H$(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,a=ed(e,["challenge","user","excludeCredentials"]),i=Sh(t).buffer,o=Object.assign(Object.assign({},r),{id:Sh(r.id).buffer}),l=Object.assign(Object.assign({},a),{challenge:i,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let u=0;u<n.length;u++){const f=n[u];l.excludeCredentials[u]=Object.assign(Object.assign({},f),{id:Sh(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function G$(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ed(e,["challenge","allowCredentials"]),a=Sh(t).buffer,i=Object.assign(Object.assign({},n),{challenge:a});if(r&&r.length>0){i.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];i.allowCredentials[o]=Object.assign(Object.assign({},l),{id:Sh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return i}function K$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Gd(new Uint8Array(e.response.attestationObject)),clientDataJSON:Gd(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function Y$(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),a=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Gd(new Uint8Array(a.authenticatorData)),clientDataJSON:Gd(new Uint8Array(a.clientDataJSON)),signature:Gd(new Uint8Array(a.signature)),userHandle:a.userHandle?Gd(new Uint8Array(a.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function XE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function cN(){var e,t;return!!(Ti()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function Q$(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ax("Browser returned unexpected credential type",t)}:{data:null,error:new ax("Empty credential response",t)}}catch(t){return{data:null,error:z$({error:t,options:e})}}}async function J$(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ax("Browser returned unexpected credential type",t)}:{data:null,error:new ax("Empty credential response",t)}}catch(t){return{data:null,error:q$({error:t,options:e})}}}const Z$={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},X$={userVerification:"preferred",hints:["security-key"]};function ix(...e){const t=a=>a!==null&&typeof a=="object"&&!Array.isArray(a),r=a=>a instanceof ArrayBuffer||ArrayBuffer.isView(a),n={};for(const a of e)if(a)for(const i in a){const o=a[i];if(o!==void 0)if(Array.isArray(o))n[i]=o;else if(r(o))n[i]=o;else if(t(o)){const l=n[i];t(l)?n[i]=ix(l,o):n[i]=ix(o)}else n[i]=o}return n}function ez(e,t){return ix(Z$,e,t||{})}function tz(e,t){return ix(X$,e,t||{})}class rz{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:a},i){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const u=a??W$.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:f}=o.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(o.webauthn.type){case"create":{const f=ez(o.webauthn.credential_options.publicKey,i?.create),{data:h,error:p}=await Q$({publicKey:f,signal:u});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=tz(o.webauthn.credential_options.publicKey,i?.request),{data:h,error:p}=await J$(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:f,signal:u}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(o){return nr(o)?{data:null,error:o}:{data:null,error:new Wd("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a}},i){if(!r)return{data:null,error:new Tp("rpId is required for WebAuthn authentication")};try{if(!cN())return{data:null,error:new Wd("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:a},{request:i});if(!o)return{data:null,error:l};const{webauthn:u}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:u.type,rpId:r,rpOrigins:n,credential_response:u.credential_response}})}catch(o){return nr(o)?{data:null,error:o}:{data:null,error:new Wd("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:a},i){if(!r)return{data:null,error:new Tp("rpId is required for WebAuthn registration")};try{if(!cN())return{data:null,error:new Wd("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:u,error:f}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:a},{create:i});return u?this._verify({factorId:o.id,challengeId:u.challengeId,webauthn:{rpId:r,rpOrigins:n,type:u.webauthn.type,credential_response:u.webauthn.credential_response}}):{data:null,error:f}}catch(o){return nr(o)?{data:null,error:o}:{data:null,error:new Wd("Unexpected error in register",o)}}}}F$();const nz={url:e$,storageKey:t$,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:r$,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function uN(e,t,r){return await r()}const ah={};class Rp{get jwks(){var t,r;return(r=(t=ah[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){ah[this.storageKey]=Object.assign(Object.assign({},ah[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=ah[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){ah[this.storageKey]=Object.assign(Object.assign({},ah[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Rp.nextInstanceID,Rp.nextInstanceID+=1,this.instanceID>0&&Ti()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const a=Object.assign(Object.assign({},nz),t);if(this.logDebugMessages=!!a.debug,typeof a.debug=="function"&&(this.logger=a.debug),this.persistSession=a.persistSession,this.storageKey=a.storageKey,this.autoRefreshToken=a.autoRefreshToken,this.admin=new I$({url:a.url,headers:a.headers,fetch:a.fetch}),this.url=a.url,this.headers=a.headers,this.fetch=QE(a.fetch),this.lock=a.lock||uN,this.detectSessionInUrl=a.detectSessionInUrl,this.flowType=a.flowType,this.hasCustomAuthorizationHeader=a.hasCustomAuthorizationHeader,a.lock?this.lock=a.lock:Ti()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=M$:this.lock=uN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new rz(this)},this.persistSession?(a.storage?this.storage=a.storage:YE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lN(this.memoryStorage)),a.userStorage&&(this.userStorage=a.userStorage)):(this.memoryStorage={},this.storage=lN(this.memoryStorage)),Ti()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${HE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=g$(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),Ti()&&this.detectSessionInUrl&&n!=="none"){const{data:a,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),l$(i)){const u=(t=i.details)===null||t===void 0?void 0:t.code;if(u==="identity_already_exists"||u==="identity_not_found"||u==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=a;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return nr(r)?{error:r}:{error:new Wd("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,a;try{const i=await xr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(a=t?.options)===null||a===void 0?void 0:a.captchaToken}},xform:To}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:f,session:u},error:null}}catch(i){if(nr(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(t){var r,n,a;try{let i;if("email"in t){const{email:h,password:p,options:v}=t;let m=null,N=null;this.flowType==="pkce"&&([m,N]=await rh(this.storage,this.storageKey)),i=await xr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:h,password:p,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:m,code_challenge_method:N},xform:To})}else if("phone"in t){const{phone:h,password:p,options:v}=t;i=await xr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(n=v?.data)!==null&&n!==void 0?n:{},channel:(a=v?.channel)!==null&&a!==void 0?a:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:To})}else throw new fv("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const u=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",u)),{data:{user:f,session:u},error:null}}catch(i){if(nr(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(t){try{let r;if("email"in t){const{email:i,password:o,options:l}=t;r=await xr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:iN})}else if("phone"in t){const{phone:i,password:o,options:l}=t;r=await xr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:iN})}else throw new fv("You must provide either an email or phone number and a password");const{data:n,error:a}=r;return a?{data:{user:null,session:null},error:a}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new th}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:a})}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,a,i;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(a=t.options)===null||a===void 0?void 0:a.queryParams,skipBrowserRedirect:(i=t.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,a,i,o,l,u,f,h,p,v;let m,N;if("message"in t)m=t.message,N=t.signature;else{const{chain:w,wallet:j,statement:_,options:C}=t;let k;if(Ti())if(typeof j=="object")k=j;else{const T=window;if("ethereum"in T&&typeof T.ethereum=="object"&&"request"in T.ethereum&&typeof T.ethereum.request=="function")k=T.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof j!="object"||!C?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=j}const E=new URL((r=C?.url)!==null&&r!==void 0?r:window.location.href),I=await k.request({method:"eth_requestAccounts"}).then(T=>T).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!I||I.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const D=ZE(I[0]);let O=(n=C?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!O){const T=await k.request({method:"eth_chainId"});O=B$(T)}const F={domain:E.host,address:D,statement:_,uri:E.href,version:"1",chainId:O,nonce:(a=C?.signInWithEthereum)===null||a===void 0?void 0:a.nonce,issuedAt:(o=(i=C?.signInWithEthereum)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=C?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(u=C?.signInWithEthereum)===null||u===void 0?void 0:u.notBefore,requestId:(f=C?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=C?.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=$$(F),N=await k.request({method:"personal_sign",params:[U$(m),D]})}try{const{data:w,error:j}=await xr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:N},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:To});if(j)throw j;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new th}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:j})}catch(w){if(nr(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var r,n,a,i,o,l,u,f,h,p,v,m;let N,w;if("message"in t)N=t.message,w=t.signature;else{const{chain:j,wallet:_,statement:C,options:k}=t;let E;if(Ti())if(typeof _=="object")E=_;else{const D=window;if("solana"in D&&typeof D.solana=="object"&&("signIn"in D.solana&&typeof D.solana.signIn=="function"||"signMessage"in D.solana&&typeof D.solana.signMessage=="function"))E=D.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");E=_}const I=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in E&&E.signIn){const D=await E.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:I.host,uri:I.href}),C?{statement:C}:null));let O;if(Array.isArray(D)&&D[0]&&typeof D[0]=="object")O=D[0];else if(D&&typeof D=="object"&&"signedMessage"in D&&"signature"in D)O=D;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in O&&"signature"in O&&(typeof O.signedMessage=="string"||O.signedMessage instanceof Uint8Array)&&O.signature instanceof Uint8Array)N=typeof O.signedMessage=="string"?O.signedMessage:new TextDecoder().decode(O.signedMessage),w=O.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in E)||typeof E.signMessage!="function"||!("publicKey"in E)||typeof E!="object"||!E.publicKey||!("toBase58"in E.publicKey)||typeof E.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");N=[`${I.host} wants you to sign in with your Solana account:`,E.publicKey.toBase58(),...C?["",C,""]:[""],"Version: 1",`URI: ${I.href}`,`Issued At: ${(a=(n=k?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&a!==void 0?a:new Date().toISOString()}`,...!((i=k?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((u=k?.signInWithSolana)===null||u===void 0)&&u.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((p=(h=k?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...k.signInWithSolana.resources.map(O=>`- ${O}`)]:[]].join(`
`);const D=await E.signMessage(new TextEncoder().encode(N),"utf8");if(!D||!(D instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=D}}try{const{data:j,error:_}=await xr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:N,signature:Gd(w)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:To});if(_)throw _;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new th}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:_})}catch(j){if(nr(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(t){const r=await Fd(this.storage,`${this.storageKey}-code-verifier`),[n,a]=(r??"").split("/");try{const{data:i,error:o}=await xr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:To});if(await Cu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new th}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:a??null}),error:o})}catch(i){if(nr(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(t){try{const{options:r,provider:n,token:a,access_token:i,nonce:o}=t,l=await xr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:a,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:To}),{data:u,error:f}=l;return f?{data:{user:null,session:null},error:f}:!u||!u.session||!u.user?{data:{user:null,session:null},error:new th}:(u.session&&(await this._saveSession(u.session),await this._notifyAllSubscribers("SIGNED_IN",u.session)),{data:u,error:f})}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,a,i,o;try{if("email"in t){const{email:l,options:u}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await rh(this.storage,this.storageKey));const{error:p}=await xr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=u?.data)!==null&&r!==void 0?r:{},create_user:(n=u?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:u?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:l,options:u}=t,{data:f,error:h}=await xr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(a=u?.data)!==null&&a!==void 0?a:{},create_user:(i=u?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:u?.captchaToken},channel:(o=u?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:h}}throw new fv("You must provide either an email or phone number.")}catch(l){if(nr(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let a,i;"options"in t&&(a=(r=t.options)===null||r===void 0?void 0:r.redirectTo,i=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await xr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:i}}),redirectTo:a,xform:To});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const u=o.session,f=o.user;return u?.access_token&&(await this._saveSession(u),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",u)),{data:{user:f,session:u},error:null}}catch(a){if(nr(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithSSO(t){var r,n,a;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await rh(this.storage,this.storageKey)),await xr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((a=t?.options)===null||a===void 0)&&a.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:R$})}catch(i){if(nr(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new Lu;const{error:a}=await xr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:a}})}catch(t){if(nr(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:a,options:i}=t,{error:o}=await xr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:a,options:i}=t,{data:o,error:l}=await xr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:a,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new fv("You must provide either an email or phone number and a type")}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),a=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await a}catch{}})()),a}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const a=[...this.pendingInLock];await Promise.all(a),this.pendingInLock.splice(0,a.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await Fd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<Vy:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await Fd(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=Gy()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(u,f,h)=>(!o&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(u,f,h))})}return{data:{session:t},error:null}}const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{session:null},error:i}:{data:{session:a},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await xr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Iu}):await this._useSession(async r=>{var n,a,i;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Lu}:await xr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(a=o.session)===null||a===void 0?void 0:a.access_token)!==null&&i!==void 0?i:void 0,xform:Iu})})}catch(r){if(nr(r))return o$(r)&&(await this._removeSession(),await Cu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:a,error:i}=n;if(i)throw i;if(!a.session)throw new Lu;const o=a.session;let l=null,u=null;this.flowType==="pkce"&&t.email!=null&&([l,u]=await rh(this.storage,this.storageKey));const{data:f,error:h}=await xr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:u}),jwt:o.access_token,xform:Iu});if(h)throw h;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(nr(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Lu;const r=Date.now()/1e3;let n=r,a=!0,i=null;const{payload:o}=Hy(t.access_token);if(o.exp&&(n=o.exp,a=n<=r),a){const{data:l,error:u}=await this._callRefreshToken(t.refresh_token);if(u)return{data:{user:null,session:null},error:u};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:u}=await this._getUser(t.access_token);if(u)throw u;i={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(nr(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new Lu;const{data:a,error:i}=await this._callRefreshToken(t.refresh_token);return i?{data:{user:null,session:null},error:i}:a?{data:{user:a.user,session:a},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(nr(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!Ti())throw new hv("No browser detected.");if(t.error||t.error_description||t.error_code)throw new hv(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new X_("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new hv("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new X_("No code detected.");const{data:C,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const E=new URL(window.location.href);return E.searchParams.delete("code"),window.history.replaceState(window.history.state,"",E.toString()),{data:{session:C.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:a,access_token:i,refresh_token:o,expires_in:l,expires_at:u,token_type:f}=t;if(!i||!l||!o||!f)throw new hv("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let v=h+p;u&&(v=parseInt(u));const m=v-h;m*1e3<=fh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${p}s`);const N=v-p;h-N>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",N,v,h):h-N<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",N,v,h);const{data:w,error:j}=await this._getUser(i);if(j)throw j;const _={provider_token:n,provider_refresh_token:a,access_token:i,expires_in:p,expires_at:v,refresh_token:o,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:_,redirectType:t.type},error:null}}catch(n){if(nr(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await Fd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{error:i};const o=(n=a.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(i$(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await Cu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=p$(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,a;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",t,"session",i)}catch(i){await((a=this.stateChangeEmitters.get(t))===null||a===void 0?void 0:a.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",i),console.error(i)}})}async resetPasswordForEmail(t,r={}){let n=null,a=null;this.flowType==="pkce"&&([n,a]=await rh(this.storage,this.storageKey,!0));try{return await xr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:a,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(nr(i))return{data:null,error:i};throw i}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(nr(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:a}=await this._useSession(async i=>{var o,l,u,f,h;const{data:p,error:v}=i;if(v)throw v;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(u=t.options)===null||u===void 0?void 0:u.queryParams,skipBrowserRedirect:!0});return await xr(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(a)throw a;return Ti()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(nr(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:a,data:{session:i}}=r;if(a)throw a;const{options:o,provider:l,token:u,access_token:f,nonce:h}=t,p=await xr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=i?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:u,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:To}),{data:v,error:m}=p;return m?{data:{user:null,session:null},error:m}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new th}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:m})}catch(a){if(nr(a))return{data:{user:null,session:null},error:a};throw a}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)throw o;return await xr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(a=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&a!==void 0?a:void 0})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await y$(async a=>(a>0&&await x$(200*Math.pow(2,a-1)),this._debug(r,"refreshing attempt",a),await xr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:To})),(a,i)=>{const o=200*Math.pow(2,a);return i&&Wy(i)&&Date.now()+o-n<fh})}catch(n){if(this._debug(r,"error",n),nr(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),Ti()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const a=await Fd(this.storage,this.storageKey);if(a&&this.userStorage){let o=await Fd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:a.user},await hh(this.userStorage,this.storageKey+"-user",o)),a.user=(t=o?.user)!==null&&t!==void 0?t:Gy()}else if(a&&!a.user&&!a.user){const o=await Fd(this.storage,this.storageKey+"-user");o&&o?.user?(a.user=o.user,await Cu(this.storage,this.storageKey+"-user"),await hh(this.storage,this.storageKey,a)):a.user=Gy()}if(this._debug(n,"session from storage",a),!this._isValidSession(a)){this._debug(n,"session is not valid"),a!==null&&await this._removeSession();return}const i=((r=a.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Vy;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Vy}s`),i){if(this.autoRefreshToken&&a.refresh_token){const{error:o}=await this._callRefreshToken(a.refresh_token);o&&(console.error(o),Wy(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(a.user&&a.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(a.access_token);!l&&o?.user?(a.user=o.user,await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",a)}catch(a){this._debug(n,"error",a),console.error(a);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new Lu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const a=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(a,"begin");try{this.refreshingDeferred=new i0;const{data:i,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!i.session)throw new Lu;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={data:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(a,"error",i),nr(i)){const o={data:null,error:i};return Wy(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(a,"end")}}async _notifyAllSubscribers(t,r,n=!0){const a=`#_notifyAllSubscribers(${t})`;this._debug(a,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(u){i.push(u)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(a,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await hh(this.userStorage,this.storageKey+"-user",{user:r.user});const a=Object.assign({},r);delete a.user;const i=sN(a);await hh(this.storage,this.storageKey,i)}else{const a=sN(r);await hh(this.storage,this.storageKey,a)}}async _removeSession(){this._debug("#_removeSession()"),await Cu(this.storage,this.storageKey),await Cu(this.storage,this.storageKey+"-code-verifier"),await Cu(this.storage,this.storageKey+"-user"),this.userStorage&&await Cu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&Ti()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),fh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const a=Math.floor((n.expires_at*1e3-t)/fh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${a} ticks, a tick lasts ${fh}ms, refresh threshold is ${Fw} ticks`),a<=Fw&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof JE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ti()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const a=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&a.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&a.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await rh(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});a.push(l.toString())}if(n?.queryParams){const i=new URLSearchParams(n.queryParams);a.push(i.toString())}return n?.skipBrowserRedirect&&a.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${a.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;return i?{data:null,error:i}:await xr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,a;const{data:i,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:u,error:f}=await xr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&u.type==="totp"&&(!((a=u?.totp)===null||a===void 0)&&a.qr_code)&&(u.totp.qr_code=`data:image/svg+xml;utf-8,${u.totp.qr_code}`),{data:u,error:null})})}catch(r){if(nr(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?K$(t.webauthn.credential_response):Y$(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:u}=await xr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return u?{data:null,error:u}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:u})})}catch(r){if(nr(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:a,error:i}=r;if(i)return{data:null,error:i};const o=await xr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:H$(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:G$(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(nr(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const a={all:[],phone:[],totp:[],webauthn:[]};for(const i of(t=r?.factors)!==null&&t!==void 0?t:[])a.all.push(i),i.status==="verified"&&a[i.factor_type].push(i);return{data:a,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:a},error:i}=t;if(i)return{data:null,error:i};if(!a)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Hy(a.access_token);let l=null;o.aal&&(l=o.aal);let u=l;((n=(r=a.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(u="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:u,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const a=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+s$>a)return n;const{data:i,error:o}=await xr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=a,n=i.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:N}=await this.getSession();if(N||!m.session)return{data:null,error:N};n=m.session.access_token}const{header:a,payload:i,signature:o,raw:{header:l,payload:u}}=Hy(n);r?.allowExpired||k$(i.exp);const f=!a.alg||a.alg.startsWith("HS")||!a.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(a.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:a,signature:o},error:null}}const h=C$(a.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,h$(`${l}.${u}`)))throw new $w("Invalid JWT signature");return{data:{claims:i,header:a,signature:o},error:null}}catch(n){if(nr(n))return{data:null,error:n};throw n}}}Rp.nextInstanceID=0;const sz=Rp;class az extends sz{constructor(t){super(t)}}class iz{constructor(t,r,n){var a,i,o;this.supabaseUrl=t,this.supabaseKey=r;const l=XU(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const u=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:WU,realtime:GU,auth:Object.assign(Object.assign({},HU),{storageKey:u}),global:VU},h=ZU(n??{},f);this.storageKey=(a=h.auth.storageKey)!==null&&a!==void 0?a:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=QU(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new eU(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new $U(this.storageUrl.href,this.headers,this.fetch,n?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new VB(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,storageKey:o,flowType:l,lock:u,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new az({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:a,userStorage:i,flowType:l,lock:u,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new vU(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const oz=(e,t,r)=>new iz(e,t,r);function lz(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}lz()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const cz="https://imnecvcvhypnlvujajpn.supabase.co",uz="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbmVjdmN2aHlwbmx2dWphanBuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2OTI4NzMsImV4cCI6MjA3MTI2ODg3M30.NEeQADbjV6kTF2mZfESk2rbpyoFPa3aQzWZ4rgddUoI",Ae=oz(cz,uz,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),dz=Object.freeze(Object.defineProperty({__proto__:null,supabase:Ae},Symbol.toStringTag,{value:"Module"})),eP=x.createContext(void 0),fz=({children:e})=>{const[t,r]=x.useState(null),[n,a]=x.useState(null),[i,o]=x.useState(!0),[l,u]=x.useState(()=>{const _=sessionStorage.getItem("selected_team_member");return _?JSON.parse(_):null}),[f,h]=x.useState(!1);x.useEffect(()=>{const{data:{subscription:_}}=Ae.auth.onAuthStateChange((C,k)=>{if(a(k),r(k?.user??null),k?.user?.email){const E=k.user.email.toLowerCase();h(["cook@","barista@","manager@","chef@"].some(D=>E.startsWith(D)))}else h(!1);o(!1),C==="SIGNED_OUT"&&(u(null),sessionStorage.removeItem("selected_team_member"))});return Ae.auth.getSession().then(({data:{session:C}})=>{if(a(C),r(C?.user??null),C?.user?.email){const k=C.user.email.toLowerCase();h(["cook@","barista@","manager@","chef@"].some(I=>k.startsWith(I)))}else h(!1);o(!1)}),()=>_.unsubscribe()},[]);const j={user:t,session:n,loading:i,signUp:async(_,C,k)=>{const E=`${window.location.origin}/`,{error:I}=await Ae.auth.signUp({email:_,password:C,options:{emailRedirectTo:E,data:k?{display_name:k}:void 0}});return{error:I}},signIn:async(_,C)=>{const{error:k}=await Ae.auth.signInWithPassword({email:_,password:C});return{error:k}},signOut:async()=>{u(null),sessionStorage.removeItem("selected_team_member"),await Ae.auth.signOut()},selectedTeamMember:l,selectTeamMember:_=>{u(_),sessionStorage.setItem("selected_team_member",JSON.stringify(_))},clearTeamMember:()=>{u(null),sessionStorage.removeItem("selected_team_member")},isSharedAccount:f};return s.jsx(eP.Provider,{value:j,children:e})},Ga=()=>{const e=x.useContext(eP);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function hz(){const[e,t]=x.useState("light");x.useEffect(()=>{const n=localStorage.getItem("theme"),a=window.matchMedia("(prefers-color-scheme: dark)").matches,i=n||(a?"dark":"light");t(i),document.documentElement.classList.toggle("dark",i==="dark")},[]);const r=()=>{const n=e==="light"?"dark":"light";t(n),localStorage.setItem("theme",n),document.documentElement.classList.toggle("dark",n==="dark")};return s.jsx(we,{variant:"ghost",size:"icon",onClick:r,className:"w-9 h-9",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?s.jsx(PD,{className:"h-4 w-4"}):s.jsx(ID,{className:"h-4 w-4"})})}const rd=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(!0),[a,i]=x.useState(null),{toast:o}=Er(),l=async()=>{try{n(!0),i(null);const{data:{user:N},error:w}=await Ae.auth.getUser();if(w)throw new Error(`Authentication failed: ${w.message}`);if(!N)throw new Error("No authenticated user");console.log("[useUserRole] Fetching role for user:",N.id);const{data:j,error:_}=await Ae.from("user_roles").select("role").eq("user_id",N.id).order("role",{ascending:!0}).limit(1).maybeSingle();if(_)throw new Error(`Failed to fetch user role: ${_.message}`);if(!j){console.warn("[useUserRole] No role found for user. Defaulting to staff."),t("staff");return}console.log("[useUserRole] User role:",j.role),t(j.role)}catch(N){const w=N;console.error("[useUserRole] Error fetching user role:",w),i(w),o({title:"Error loading user role",description:w.message,variant:"destructive"})}finally{n(!1)}};return x.useEffect(()=>{l()},[]),x.useEffect(()=>{const{data:{subscription:N}}=Ae.auth.onAuthStateChange((w,j)=>{j?.user?l():t(null)});return()=>{N.unsubscribe()}},[]),{role:e,loading:r,error:a,isAdmin:e==="admin",isManager:e==="manager",isLeaderChef:e==="leader_chef",isStaff:e==="staff",canManageTeamMembers:e==="admin"||e==="manager"||e==="leader_chef",canEditWithoutPIN:e==="admin"||e==="manager",refetch:l}};function nd(){const[e,t]=x.useState(null),[r,n]=x.useState(null),[a,i]=x.useState(null),[o,l]=x.useState(!0),[u,f]=x.useState(null);x.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0),f(null);const{data:{user:v}}=await Ae.auth.getUser();if(!v)throw new Error("No authenticated user");const{data:m,error:N}=await Ae.rpc("get_current_user_context");if(N)throw N;if(m&&Array.isArray(m)&&m.length>0){const w=m[0];if(t(w),w.organization_id){const{data:j,error:_}=await Ae.from("organizations").select("*").eq("id",w.organization_id).single();!_&&j&&n(j)}if(w.department_id){const{data:j,error:_}=await Ae.from("departments").select("*").eq("id",w.department_id).single();!_&&j&&i(j)}}}catch(v){console.error("Error fetching user context:",v),f(v)}finally{l(!1)}};return{context:e,organization:r,department:a,loading:o,error:u,refresh:()=>{h()}}}function mz(){const[e,t]=x.useState(null),[r,n]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const{data:{user:i}}=await Ae.auth.getUser();if(i){const{data:o}=await Ae.from("profiles").select("organization_id").eq("user_id",i.id).single();o?.organization_id&&t(o.organization_id)}}catch(i){console.error("Error fetching organization ID:",i)}finally{n(!1)}})()},[]),{organizationId:e,loading:r}}const Lp=({className:e="w-5 h-5",removeBackground:t=!1})=>t?s.jsx("img",{src:"/tampa-logo.png",alt:"Tampa APP",className:e,style:{objectFit:"contain"}}):s.jsx("div",{className:"bg-white rounded-lg flex items-center justify-center p-1",children:s.jsx("img",{src:"/tampa-logo.png",alt:"Tampa APP",className:e,style:{objectFit:"contain"}})}),dN=[{name:"Dashboard",href:"/",icon:vp},{name:"Recipes",href:"/recipes",icon:Uk},{name:"Labeling",href:"/labeling",icon:Jk},{name:"Drafts",href:"/drafts",icon:Ic},{name:"Inventory",href:"/inventory",icon:Ca},{name:"Routine Tasks",href:"/routine-tasks",icon:Va},{name:"Training",href:"/training",icon:bD},{name:"People",href:"/people",icon:Bi},{name:"Feed",href:"/feed",icon:Hv},{name:"Product Traffic Light",href:"/traffic-light",icon:kD},{name:"Analytics",href:"/analytics",icon:vp},{name:"Settings",href:"/settings",icon:Bc}];function pz(){const[e,t]=x.useState(!1),r=hf(),{signOut:n,user:a}=Ga(),{toast:i}=Er(),{role:o,loading:l}=rd(),{organization:u,department:f,loading:h}=nd(),p=async()=>{await n(),i({title:"Signed out",description:"You have been successfully signed out."})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-muted/40",children:[s.jsxs("div",{className:Oe("fixed inset-0 z-50 lg:hidden",e?"block":"hidden"),children:[s.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm",onClick:()=>t(!1)}),s.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-card border-r shadow-modal",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lp,{className:"w-8 h-8"}),s.jsx("h1",{className:"font-bold text-lg",children:"Tampa APP"})]}),s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:s.jsx(hn,{className:"w-5 h-5"})})]}),s.jsx("nav",{className:"p-4 space-y-2",children:dN.map(v=>{const m=r.pathname===v.href;return s.jsxs("a",{href:v.href,className:Oe("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",m?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[s.jsx(v.icon,{className:"w-5 h-5"}),v.name]},v.name)})})]})]}),s.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:w-64 lg:flex lg:flex-col",children:s.jsxs("div",{className:"flex flex-col flex-1 bg-card border-r shadow-card",children:[s.jsxs("div",{className:"flex items-center gap-2 p-6 border-b",children:[s.jsx(Lp,{className:"w-8 h-8"}),s.jsx("h1",{className:"font-bold text-lg",children:"Tampa APP"})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2",children:dN.map(v=>{const m=r.pathname===v.href;return s.jsxs("a",{href:v.href,className:Oe("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",m?"bg-primary text-primary-foreground shadow-card":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[s.jsx(v.icon,{className:"w-5 h-5"}),v.name]},v.name)})})]})}),s.jsxs("div",{className:"lg:pl-64",children:[s.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b bg-card/80 backdrop-blur-sm px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[s.jsx(we,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>t(!0),children:s.jsx(ED,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[!h&&s.jsxs(s.Fragment,{children:[u&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Organization:"}),s.jsx("span",{className:"font-medium",children:u.name})]}),f&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Department:"}),s.jsx("span",{className:"font-medium",children:f.name})]})]}),h&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(hz,{}),s.jsxs(l2,{children:[s.jsx(c2,{asChild:!0,children:s.jsxs(we,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(Il,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:a?.email?.split("@")[0]||"User"})]})}),s.jsxs(a0,{align:"end",className:"w-56",children:[s.jsx(RE,{children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:a?.email}),!l&&o&&s.jsx("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:o.replace("_"," ")})]})}),s.jsx(Aw,{}),s.jsx(Pl,{asChild:!0,children:s.jsxs(Nw,{to:"/people",className:"flex items-center cursor-pointer",children:[s.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Team Members"]})}),s.jsx(Pl,{asChild:!0,children:s.jsxs(Nw,{to:"/settings",className:"flex items-center cursor-pointer",children:[s.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Settings"]})}),s.jsx(Aw,{}),s.jsxs(Pl,{onClick:p,className:"text-red-600 focus:text-red-600 cursor-pointer",children:[s.jsx(CD,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]})})]}),s.jsx("main",{className:"py-8",children:s.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:s.jsx(cF,{})})})]})]})}const mv="tampa_print_queue",fN="1.0",tP=x.createContext(void 0);function gz({children:e}){const{toast:t}=Er(),[r,n]=x.useState(!1),[a,i]=x.useState([]);x.useEffect(()=>{try{const f=localStorage.getItem(mv);if(f){const h=JSON.parse(f);if(h.version!==fN){console.warn("Queue version mismatch, clearing old queue"),localStorage.removeItem(mv);return}const p=new Date,v=h.items.filter(m=>{const N=new Date(m.addedAt);return(p.getTime()-N.getTime())/(1e3*60*60*24)<7});v.length!==h.items.length&&console.log(`Removed ${h.items.length-v.length} expired items`),console.log("PrintQueueProvider: Loading items from storage:",v.length),i(v)}}catch(f){console.error("Failed to load print queue:",f),t({title:"Queue Load Error",description:"Failed to restore print queue. Starting fresh.",variant:"destructive"}),localStorage.removeItem(mv)}},[t]),x.useEffect(()=>{try{const f={version:fN,lastUpdated:new Date().toISOString(),items:a};console.log("PrintQueueProvider: Saving items to storage:",a.length),localStorage.setItem(mv,JSON.stringify(f))}catch(f){console.error("Failed to save print queue:",f)}},[a]);const o=x.useCallback(()=>{n(!0)},[]),l=x.useCallback(()=>{n(!1)},[]),u=x.useCallback(()=>{n(f=>!f)},[]);return s.jsx(tP.Provider,{value:{isOpen:r,items:a,openQueue:o,closeQueue:l,toggleQueue:u,setItems:i},children:e})}function vz(){const e=x.useContext(tP);if(e===void 0)throw new Error("usePrintQueueContext must be used within a PrintQueueProvider");return e}const xz=({children:e})=>{const{user:t,loading:r}=Ga();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-muted/20 to-muted/40",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?s.jsx(s.Fragment,{children:e}):s.jsx(t3,{to:"/auth",replace:!0})},yz=Xh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ut({className:e,variant:t,...r}){return s.jsx("div",{className:Oe(yz({variant:t}),e),...r})}const hN=e=>{let t;const r=new Set,n=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(m=>m(t,v))}},a=()=>t,l={setState:n,getState:a,getInitialState:()=>u,subscribe:f=>(r.add(f),()=>r.delete(f))},u=t=e(n,a,l);return l},wz=(e=>e?hN(e):hN),bz=e=>e;function jz(e,t=bz){const r=Ve.useSyncExternalStore(e.subscribe,Ve.useCallback(()=>t(e.getState()),[e,t]),Ve.useCallback(()=>t(e.getInitialState()),[e,t]));return Ve.useDebugValue(r),r}const _z=e=>{const t=wz(e),r=n=>jz(t,n);return Object.assign(r,t),r},Nz=(e=>_z);function Sz(e,t){let r;try{r=e()}catch{return}return{getItem:a=>{var i;const o=u=>u===null?null:JSON.parse(u,void 0),l=(i=r.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>r.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>r.removeItem(a)}}const zw=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return zw(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return zw(n)(r)}}}},kz=(e,t)=>(r,n,a)=>{let i={storage:Sz(()=>localStorage),partialize:w=>w,version:0,merge:(w,j)=>({...j,...w}),...t},o=!1;const l=new Set,u=new Set;let f=i.storage;if(!f)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),r(...w)},n,a);const h=()=>{const w=i.partialize({...n()});return f.setItem(i.name,{state:w,version:i.version})},p=a.setState;a.setState=(w,j)=>(p(w,j),h());const v=e((...w)=>(r(...w),h()),n,a);a.getInitialState=()=>v;let m;const N=()=>{var w,j;if(!f)return;o=!1,l.forEach(C=>{var k;return C((k=n())!=null?k:v)});const _=((j=i.onRehydrateStorage)==null?void 0:j.call(i,(w=n())!=null?w:v))||void 0;return zw(f.getItem.bind(f))(i.name).then(C=>{if(C)if(typeof C.version=="number"&&C.version!==i.version){if(i.migrate){const k=i.migrate(C.state,C.version);return k instanceof Promise?k.then(E=>[!0,E]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,C.state];return[!1,void 0]}).then(C=>{var k;const[E,I]=C;if(m=i.merge(I,(k=n())!=null?k:v),r(m,!0),E)return h()}).then(()=>{_?.(m,void 0),m=n(),o=!0,u.forEach(C=>C(m))}).catch(C=>{_?.(void 0,C)})};return a.persist={setOptions:w=>{i={...i,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>N(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(u.add(w),()=>{u.delete(w)})},i.skipHydration||N(),m||v},Cz=kz,x2=Nz()(Cz((e,t)=>({timers:[],addTimer:r=>{const n=crypto.randomUUID(),a={...r,id:n,elapsedTime:0};return e(i=>({timers:[...i.timers,a]})),n},pauseTimer:r=>{e(n=>({timers:n.timers.map(a=>a.id===r?{...a,isRunning:!1}:a)}))},resumeTimer:r=>{e(n=>({timers:n.timers.map(a=>a.id===r?{...a,isRunning:!0,startTime:Date.now()-a.elapsedTime}:a)}))},updateTimer:(r,n)=>{e(a=>({timers:a.timers.map(i=>i.id===r?{...i,elapsedTime:n}:i)}))},removeTimer:r=>{e(n=>({timers:n.timers.filter(a=>a.id!==r)}))},getActiveTimers:()=>t().timers.filter(r=>r.isRunning),getTimerById:r=>t().timers.find(n=>n.id===r)}),{name:"timer-storage"}));function Ez(){const{getActiveTimers:e}=x2(),t=e();if(t.length===0)return null;const r=n=>{const a=Math.floor(n/1e3),i=Math.floor(a/3600),o=Math.floor(a%3600/60),l=a%60;return`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};return s.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>s.jsxs(ut,{variant:"secondary",className:"px-3 py-2 text-sm animate-pulse",children:[s.jsx(lw,{className:"w-4 h-4 mr-2"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:n.recipeName}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.staffName," - ",r(n.elapsedTime)]})]})]},n.id))})}function Pz(){const{timers:e,updateTimer:t}=x2();return x.useEffect(()=>{const r=setInterval(()=>{e.forEach(n=>{if(n.isRunning){const a=Date.now()-n.startTime;t(n.id,a)}})},1e3);return()=>clearInterval(r)},[e,t]),null}function fi({title:e,value:t,change:r,changeType:n="neutral",icon:a,className:i,flags:o}){return s.jsx("div",{className:Oe("bg-card rounded-lg border shadow-card hover:shadow-card-hover transition-shadow p-6",i),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("p",{className:"text-2xl font-bold text-foreground mt-2",children:t}),r&&s.jsx("p",{className:Oe("text-sm mt-2 font-medium",n==="positive"&&"text-success",n==="negative"&&"text-destructive",n==="neutral"&&"text-muted-foreground"),children:r}),o&&s.jsxs("div",{className:"flex gap-3 mt-2",children:[o.yellow!==void 0&&o.yellow>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vj,{className:"w-4 h-4 text-yellow-500",fill:"currentColor"}),s.jsx("span",{className:"text-xs font-medium text-yellow-600 dark:text-yellow-400",children:o.yellow})]}),o.green!==void 0&&o.green>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Vj,{className:"w-4 h-4 text-green-500",fill:"currentColor"}),s.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:o.green})]})]})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx(a,{className:"w-6 h-6 text-primary"})})})]})})}const rt=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Oe("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));rt.displayName="Card";const Wt=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Oe("flex flex-col space-y-1.5 p-6",e),...t}));Wt.displayName="CardHeader";const Qt=x.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Oe("text-2xl font-semibold leading-none tracking-tight",e),...t}));Qt.displayName="CardTitle";const Bs=x.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Oe("text-sm text-muted-foreground",e),...t}));Bs.displayName="CardDescription";const st=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Oe("p-6 pt-0",e),...t}));st.displayName="CardContent";const rP=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Oe("flex items-center p-6 pt-0",e),...t}));rP.displayName="CardFooter";const y2=6048e5,Az=864e5,nP=6e4,sP=36e5,pv=43200,mN=1440,pN=Symbol.for("constructDateFrom");function ws(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&pN in e?e[pN](t):e instanceof Date?new e.constructor(t):new Date(t)}function Mr(e,t){return ws(t||e,e)}function hs(e,t,r){const n=Mr(e,r?.in);return isNaN(t)?ws(r?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Ui(e,t,r){const n=Mr(e,r?.in);if(isNaN(t))return ws(r?.in||e,NaN);if(!t)return n;const a=n.getDate(),i=ws(r?.in||e,n.getTime());i.setMonth(n.getMonth()+t+1,0);const o=i.getDate();return a>=o?i:(n.setFullYear(i.getFullYear(),i.getMonth(),a),n)}let Tz={};function im(){return Tz}function Ko(e,t){const r=im(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Mr(e,t?.in),i=a.getDay(),o=(i<n?7:0)+i-n;return a.setDate(a.getDate()-o),a.setHours(0,0,0,0),a}function Xd(e,t){return Ko(e,{...t,weekStartsOn:1})}function aP(e,t){const r=Mr(e,t?.in),n=r.getFullYear(),a=ws(r,0);a.setFullYear(n+1,0,4),a.setHours(0,0,0,0);const i=Xd(a),o=ws(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=Xd(o);return r.getTime()>=i.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Bh(e){const t=Mr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function sd(e,...t){const r=ws.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function ef(e,t){const r=Mr(e,t?.in);return r.setHours(0,0,0,0),r}function Nl(e,t,r){const[n,a]=sd(r?.in,e,t),i=ef(n),o=ef(a),l=+i-Bh(i),u=+o-Bh(o);return Math.round((l-u)/Az)}function Rz(e,t){const r=aP(e,t),n=ws(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),Xd(n)}function Dp(e,t,r){return hs(e,t*7,r)}function Lz(e,t,r){return Ui(e,t*12,r)}function Dz(e,t){let r,n=t?.in;return e.forEach(a=>{!n&&typeof a=="object"&&(n=ws.bind(null,a));const i=Mr(a,n);(!r||r<i||isNaN(+i))&&(r=i)}),ws(n,r||NaN)}function Iz(e,t){let r,n=t?.in;return e.forEach(a=>{!n&&typeof a=="object"&&(n=ws.bind(null,a));const i=Mr(a,n);(!r||r>i||isNaN(+i))&&(r=i)}),ws(n,r||NaN)}function Fv(e,t){const r=+Mr(e)-+Mr(t);return r<0?-1:r>0?1:r}function w2(e){return ws(e,Date.now())}function ka(e,t,r){const[n,a]=sd(r?.in,e,t);return+ef(n)==+ef(a)}function b2(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Oz(e){return!(!b2(e)&&typeof e!="number"||isNaN(+Mr(e)))}function Uh(e,t,r){const[n,a]=sd(r?.in,e,t),i=n.getFullYear()-a.getFullYear(),o=n.getMonth()-a.getMonth();return i*12+o}function Mz(e,t,r){const[n,a]=sd(r?.in,e,t),i=Ko(n,r),o=Ko(a,r),l=+i-Bh(i),u=+o-Bh(o);return Math.round((l-u)/y2)}function Fz(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function Bz(e,t){return+Mr(e)-+Mr(t)}function Uz(e,t){const r=Mr(e,t?.in);return r.setHours(23,59,59,999),r}function o0(e,t){const r=Mr(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function $z(e,t){const r=Mr(e,t?.in);return+Uz(r,t)==+o0(r,t)}function zz(e,t,r){const[n,a,i]=sd(r?.in,e,e,t),o=Fv(a,i),l=Math.abs(Uh(a,i));if(l<1)return 0;a.getMonth()===1&&a.getDate()>27&&a.setDate(30),a.setMonth(a.getMonth()-o*l);let u=Fv(a,i)===-o;$z(n)&&l===1&&Fv(n,i)===1&&(u=!1);const f=o*(l-+u);return f===0?0:f}function qz(e,t,r){const n=Bz(e,t)/1e3;return Fz(r?.roundingMethod)(n)}function hi(e,t){const r=Mr(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function iP(e,t){const r=Mr(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function l0(e,t){const r=im(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,a=Mr(e,t?.in),i=a.getDay(),o=(i<n?-7:0)+6-(i-n);return a.setDate(a.getDate()+o),a.setHours(23,59,59,999),a}function oP(e,t){return l0(e,{...t,weekStartsOn:1})}const Vz={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Wz=(e,t,r)=>{let n;const a=Vz[e];return typeof a=="string"?n=a:t===1?n=a.one:n=a.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Yy(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Hz={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Gz={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kz={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Yz={date:Yy({formats:Hz,defaultWidth:"full"}),time:Yy({formats:Gz,defaultWidth:"full"}),dateTime:Yy({formats:Kz,defaultWidth:"full"})},Qz={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Jz=(e,t,r,n)=>Qz[e];function $m(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let a;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;a=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;a=e.values[l]||e.values[o]}const i=e.argumentCallback?e.argumentCallback(t):t;return a[i]}}const Zz={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xz={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},eq={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},tq={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},rq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nq={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},sq=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},aq={ordinalNumber:sq,era:$m({values:Zz,defaultWidth:"wide"}),quarter:$m({values:Xz,defaultWidth:"wide",argumentCallback:e=>e-1}),month:$m({values:eq,defaultWidth:"wide"}),day:$m({values:tq,defaultWidth:"wide"}),dayPeriod:$m({values:rq,defaultWidth:"wide",formattingValues:nq,defaultFormattingWidth:"wide"})};function zm(e){return(t,r={})=>{const n=r.width,a=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],i=t.match(a);if(!i)return null;const o=i[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],u=Array.isArray(l)?oq(l,p=>p.test(o)):iq(l,p=>p.test(o));let f;f=e.valueCallback?e.valueCallback(u):u,f=r.valueCallback?r.valueCallback(f):f;const h=t.slice(o.length);return{value:f,rest:h}}}function iq(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function oq(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function lq(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const a=n[0],i=t.match(e.parsePattern);if(!i)return null;let o=e.valueCallback?e.valueCallback(i[0]):i[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(a.length);return{value:o,rest:l}}}const cq=/^(\d+)(th|st|nd|rd)?/i,uq=/\d+/i,dq={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fq={any:[/^b/i,/^(a|c)/i]},hq={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},mq={any:[/1/i,/2/i,/3/i,/4/i]},pq={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},gq={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},vq={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xq={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},yq={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},wq={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},bq={ordinalNumber:lq({matchPattern:cq,parsePattern:uq,valueCallback:e=>parseInt(e,10)}),era:zm({matchPatterns:dq,defaultMatchWidth:"wide",parsePatterns:fq,defaultParseWidth:"any"}),quarter:zm({matchPatterns:hq,defaultMatchWidth:"wide",parsePatterns:mq,defaultParseWidth:"any",valueCallback:e=>e+1}),month:zm({matchPatterns:pq,defaultMatchWidth:"wide",parsePatterns:gq,defaultParseWidth:"any"}),day:zm({matchPatterns:vq,defaultMatchWidth:"wide",parsePatterns:xq,defaultParseWidth:"any"}),dayPeriod:zm({matchPatterns:yq,defaultMatchWidth:"any",parsePatterns:wq,defaultParseWidth:"any"})},j2={code:"en-US",formatDistance:Wz,formatLong:Yz,formatRelative:Jz,localize:aq,match:bq,options:{weekStartsOn:0,firstWeekContainsDate:1}};function jq(e,t){const r=Mr(e,t?.in);return Nl(r,iP(r))+1}function lP(e,t){const r=Mr(e,t?.in),n=+Xd(r)-+Rz(r);return Math.round(n/y2)+1}function cP(e,t){const r=Mr(e,t?.in),n=r.getFullYear(),a=im(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=ws(t?.in||e,0);o.setFullYear(n+1,0,i),o.setHours(0,0,0,0);const l=Ko(o,t),u=ws(t?.in||e,0);u.setFullYear(n,0,i),u.setHours(0,0,0,0);const f=Ko(u,t);return+r>=+l?n+1:+r>=+f?n:n-1}function _q(e,t){const r=im(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=cP(e,t),i=ws(t?.in||e,0);return i.setFullYear(a,0,n),i.setHours(0,0,0,0),Ko(i,t)}function uP(e,t){const r=Mr(e,t?.in),n=+Ko(r,t)-+_q(r,t);return Math.round(n/y2)+1}function ln(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Eu={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return ln(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):ln(r+1,2)},d(e,t){return ln(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return ln(e.getHours()%12||12,t.length)},H(e,t){return ln(e.getHours(),t.length)},m(e,t){return ln(e.getMinutes(),t.length)},s(e,t){return ln(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),a=Math.trunc(n*Math.pow(10,r-3));return ln(a,t.length)}},ih={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},gN={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),a=n>0?n:1-n;return r.ordinalNumber(a,{unit:"year"})}return Eu.y(e,t)},Y:function(e,t,r,n){const a=cP(e,n),i=a>0?a:1-a;if(t==="YY"){const o=i%100;return ln(o,2)}return t==="Yo"?r.ordinalNumber(i,{unit:"year"}):ln(i,t.length)},R:function(e,t){const r=aP(e);return ln(r,t.length)},u:function(e,t){const r=e.getFullYear();return ln(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return ln(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return ln(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Eu.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return ln(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const a=uP(e,n);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):ln(a,t.length)},I:function(e,t,r){const n=lP(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):ln(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Eu.d(e,t)},D:function(e,t,r){const n=jq(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):ln(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ln(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const a=e.getDay(),i=(a-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ln(i,t.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),a=n===0?7:n;switch(t){case"i":return String(a);case"ii":return ln(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let a;switch(n===12?a=ih.noon:n===0?a=ih.midnight:a=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let a;switch(n>=17?a=ih.evening:n>=12?a=ih.afternoon:n>=4?a=ih.morning:a=ih.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Eu.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Eu.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):ln(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):ln(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Eu.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Eu.s(e,t)},S:function(e,t){return Eu.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return xN(n);case"XXXX":case"XX":return Ud(n);case"XXXXX":case"XXX":default:return Ud(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return xN(n);case"xxxx":case"xx":return Ud(n);case"xxxxx":case"xxx":default:return Ud(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+vN(n,":");case"OOOO":default:return"GMT"+Ud(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+vN(n,":");case"zzzz":default:return"GMT"+Ud(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return ln(n,t.length)},T:function(e,t,r){return ln(+e,t.length)}};function vN(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=Math.trunc(n/60),i=n%60;return i===0?r+String(a):r+String(a)+t+ln(i,2)}function xN(e,t){return e%60===0?(e>0?"-":"+")+ln(Math.abs(e)/60,2):Ud(e,t)}function Ud(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),a=ln(Math.trunc(n/60),2),i=ln(n%60,2);return r+a+t+i}const yN=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},dP=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Nq=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],a=r[2];if(!a)return yN(e,t);let i;switch(n){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;case"PPPP":default:i=t.dateTime({width:"full"});break}return i.replace("{{date}}",yN(n,t)).replace("{{time}}",dP(a,t))},Sq={p:dP,P:Nq},kq=/^D+$/,Cq=/^Y+$/,Eq=["D","DD","YY","YYYY"];function Pq(e){return kq.test(e)}function Aq(e){return Cq.test(e)}function Tq(e,t,r){const n=Rq(e,t,r);if(console.warn(n),Eq.includes(e))throw new RangeError(n)}function Rq(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Lq=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Dq=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Iq=/^'([^]*?)'?$/,Oq=/''/g,Mq=/[a-zA-Z]/;function wr(e,t,r){const n=im(),a=r?.locale??n.locale??j2,i=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Mr(e,r?.in);if(!Oz(l))throw new RangeError("Invalid time value");let u=t.match(Dq).map(h=>{const p=h[0];if(p==="p"||p==="P"){const v=Sq[p];return v(h,a.formatLong)}return h}).join("").match(Lq).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:Fq(h)};if(gN[p])return{isToken:!0,value:h};if(p.match(Mq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});a.localize.preprocessor&&(u=a.localize.preprocessor(l,u));const f={firstWeekContainsDate:i,weekStartsOn:o,locale:a};return u.map(h=>{if(!h.isToken)return h.value;const p=h.value;(!r?.useAdditionalWeekYearTokens&&Aq(p)||!r?.useAdditionalDayOfYearTokens&&Pq(p))&&Tq(p,t,String(e));const v=gN[p[0]];return v(l,p,a.localize,f)}).join("")}function Fq(e){const t=e.match(Iq);return t?t[1].replace(Oq,"'"):e}function Bq(e,t,r){const n=im(),a=r?.locale??n.locale??j2,i=2520,o=Fv(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:o}),[u,f]=sd(r?.in,...o>0?[t,e]:[e,t]),h=qz(f,u),p=(Bh(f)-Bh(u))/1e3,v=Math.round((h-p)/60);let m;if(v<2)return r?.includeSeconds?h<5?a.formatDistance("lessThanXSeconds",5,l):h<10?a.formatDistance("lessThanXSeconds",10,l):h<20?a.formatDistance("lessThanXSeconds",20,l):h<40?a.formatDistance("halfAMinute",0,l):h<60?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",1,l):v===0?a.formatDistance("lessThanXMinutes",1,l):a.formatDistance("xMinutes",v,l);if(v<45)return a.formatDistance("xMinutes",v,l);if(v<90)return a.formatDistance("aboutXHours",1,l);if(v<mN){const N=Math.round(v/60);return a.formatDistance("aboutXHours",N,l)}else{if(v<i)return a.formatDistance("xDays",1,l);if(v<pv){const N=Math.round(v/mN);return a.formatDistance("xDays",N,l)}else if(v<pv*2)return m=Math.round(v/pv),a.formatDistance("aboutXMonths",m,l)}if(m=zz(f,u),m<12){const N=Math.round(v/pv);return a.formatDistance("xMonths",N,l)}else{const N=m%12,w=Math.trunc(m/12);return N<3?a.formatDistance("aboutXYears",w,l):N<9?a.formatDistance("overXYears",w,l):a.formatDistance("almostXYears",w+1,l)}}function Ip(e,t){return Bq(e,w2(e),t)}function Uq(e,t){const r=Mr(e,t?.in),n=r.getFullYear(),a=r.getMonth(),i=ws(r,0);return i.setFullYear(n,a+1,0),i.setHours(0,0,0,0),i.getDate()}function $q(e){return Math.trunc(+Mr(e)/1e3)}function zq(e,t){const r=Mr(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(0,0,0,0),Mr(r,t?.in)}function qq(e,t){const r=Mr(e,t?.in);return Mz(zq(r,t),hi(r,t),t)+1}function Op(e,t){return+Mr(e)>+Mr(t)}function Rc(e,t){return+Mr(e)<+Mr(t)}function _2(e,t,r){const[n,a]=sd(r?.in,e,t);return n.getFullYear()===a.getFullYear()&&n.getMonth()===a.getMonth()}function Vq(e,t,r){const[n,a]=sd(r?.in,e,t);return n.getFullYear()===a.getFullYear()}function Wq(e,t){return ka(ws(e,e),w2(e))}function Hq(e,t){return ka(e,hs(w2(e),1),t)}function Qy(e,t,r){return hs(e,-t,r)}function qw(e,t){const r=()=>ws(t?.in,NaN),a=Qq(e);let i;if(a.date){const f=Jq(a.date,2);i=Zq(f.restDateString,f.year)}if(!i||isNaN(+i))return r();const o=+i;let l=0,u;if(a.time&&(l=Xq(a.time),isNaN(l)))return r();if(a.timezone){if(u=eV(a.timezone),isNaN(u))return r()}else{const f=new Date(o+l),h=Mr(0,t?.in);return h.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),h.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),h}return Mr(o+l+u,t?.in)}const gv={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Gq=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Kq=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Yq=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Qq(e){const t={},r=e.split(gv.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],gv.timeZoneDelimiter.test(t.date)&&(t.date=e.split(gv.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const a=gv.timezone.exec(n);a?(t.time=n.replace(a[1],""),t.timezone=a[1]):t.time=n}return t}function Jq(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const a=n[1]?parseInt(n[1]):null,i=n[2]?parseInt(n[2]):null;return{year:i===null?a:i*100,restDateString:e.slice((n[1]||n[2]).length)}}function Zq(e,t){if(t===null)return new Date(NaN);const r=e.match(Gq);if(!r)return new Date(NaN);const n=!!r[4],a=qm(r[1]),i=qm(r[2])-1,o=qm(r[3]),l=qm(r[4]),u=qm(r[5])-1;if(n)return aV(t,l,u)?tV(t,l,u):new Date(NaN);{const f=new Date(0);return!nV(t,i,o)||!sV(t,a)?new Date(NaN):(f.setUTCFullYear(t,i,Math.max(a,o)),f)}}function qm(e){return e?parseInt(e):1}function Xq(e){const t=e.match(Kq);if(!t)return NaN;const r=Jy(t[1]),n=Jy(t[2]),a=Jy(t[3]);return iV(r,n,a)?r*sP+n*nP+a*1e3:NaN}function Jy(e){return e&&parseFloat(e.replace(",","."))||0}function eV(e){if(e==="Z")return 0;const t=e.match(Yq);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),a=t[3]&&parseInt(t[3])||0;return oV(n,a)?r*(n*sP+a*nP):NaN}function tV(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const a=n.getUTCDay()||7,i=(t-1)*7+r+1-a;return n.setUTCDate(n.getUTCDate()+i),n}const rV=[31,null,31,30,31,30,31,31,30,31,30,31];function fP(e){return e%400===0||e%4===0&&e%100!==0}function nV(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(rV[t]||(fP(e)?29:28))}function sV(e,t){return t>=1&&t<=(fP(e)?366:365)}function aV(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function iV(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function oV(e,t){return t>=0&&t<=59}function Zy(e,t,r){const n=Mr(e,r?.in),a=n.getFullYear(),i=n.getDate(),o=ws(e,0);o.setFullYear(a,t,15),o.setHours(0,0,0,0);const l=Uq(o);return n.setMonth(t,Math.min(i,l)),n}function wN(e,t,r){const n=Mr(e,r?.in);return isNaN(+n)?ws(e,NaN):(n.setFullYear(t),n)}function lV({items:e}){const t=ef(new Date),r=e.filter(i=>{const o=new Date(i.expiry_date);return Rc(o,t)}).reduce((i,o)=>i+(o.label_count||1),0),n=e.filter(i=>Wq(new Date(i.expiry_date))).reduce((i,o)=>i+(o.label_count||1),0),a=e.filter(i=>Hq(new Date(i.expiry_date))).reduce((i,o)=>i+(o.label_count||1),0);return s.jsxs(rt,{className:"shadow-card hover:shadow-card-hover transition-shadow",children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx(is,{className:"w-4 h-4 text-primary"})}),s.jsx(Qt,{className:"text-lg",children:"Active Alerts"})]})}),s.jsx(st,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-destructive/5 dark:bg-destructive/20 rounded-lg border border-destructive/10 dark:border-destructive/30 backdrop-blur-sm hover:bg-destructive/10 dark:hover:bg-destructive/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ut,{variant:"destructive",className:"text-xs",children:"Yesterday"}),s.jsx("span",{className:"text-sm font-medium",children:"Expired"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-destructive",children:r}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"labels"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-warning/5 dark:bg-warning/20 rounded-lg border border-warning/10 dark:border-warning/30 backdrop-blur-sm hover:bg-warning/10 dark:hover:bg-warning/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ut,{variant:"default",className:"text-xs bg-warning text-warning-foreground",children:"Today"}),s.jsx("span",{className:"text-sm font-medium",children:"About to expire"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-warning",children:n}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"labels"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-success/10 rounded-lg border border-success/20 backdrop-blur-sm hover:bg-success/20 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ut,{variant:"secondary",className:"text-xs",children:"Tomorrow"}),s.jsx("span",{className:"text-sm font-medium",children:"Will expire"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:a}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"labels"})]})]})]})})]})}const vv=e=>{const t=new Date,r=new Date(e),n=Math.floor((r.getTime()-t.getTime())/(1e3*60*60));return n<0?{status:"expired",hoursUntilExpiry:n,message:`Expired ${Math.abs(n)} hours ago`}:n<=24?{status:"warning",hoursUntilExpiry:n,message:`Expires in ${n} hours`}:n<=72?{status:"good",hoursUntilExpiry:n,message:`Expires in ${Math.floor(n/24)} days`}:{status:"good",hoursUntilExpiry:n,message:`Fresh for ${Math.floor(n/24)} days`}};function hP(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=Er(),i=async()=>{try{const{data:l,error:u}=await Ae.from("prepared_items").select(`
          *,
          recipes (
            name,
            allergens
          )
        `).order("expires_at",{ascending:!0});if(u){console.error("Error fetching prepared items:",u),a({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"});return}t(l||[])}catch(l){console.error("Error:",l),a({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"})}finally{n(!1)}};x.useEffect(()=>{i()},[]);const o=e.filter(l=>vv(l.expires_at).hoursUntilExpiry<=72);if(o.filter(l=>vv(l.expires_at).status==="expired").length,o.filter(l=>vv(l.expires_at).status==="warning").length,o.filter(l=>{const u=vv(l.expires_at);return u.status==="good"&&u.hoursUntilExpiry<=72}).length,r)return s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-5 h-5"}),"Expiry Alerts"]})}),s.jsx(st,{children:s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})})]})}var c0="Dialog",[mP,pP]=bs(c0),[cV,Jo]=mP(c0),gP=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!0}=e,l=x.useRef(null),u=x.useRef(null),[f,h]=Ea({prop:n,defaultProp:a??!1,onChange:i,caller:c0});return s.jsx(cV,{scope:t,triggerRef:l,contentRef:u,contentId:Xs(),titleId:Xs(),descriptionId:Xs(),open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),modal:o,children:r})};gP.displayName=c0;var vP="DialogTrigger",xP=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jo(vP,r),i=Jt(t,a.triggerRef);return s.jsx(vt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":k2(a.open),...n,ref:i,onClick:lt(e.onClick,a.onOpenToggle)})});xP.displayName=vP;var N2="DialogPortal",[uV,yP]=mP(N2,{forceMount:void 0}),wP=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:a}=e,i=Jo(N2,t);return s.jsx(uV,{scope:t,forceMount:r,children:x.Children.map(n,o=>s.jsx(qs,{present:r||i.open,children:s.jsx(Zh,{asChild:!0,container:a,children:o})}))})};wP.displayName=N2;var ox="DialogOverlay",bP=x.forwardRef((e,t)=>{const r=yP(ox,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Jo(ox,e.__scopeDialog);return i.modal?s.jsx(qs,{present:n||i.open,children:s.jsx(fV,{...a,ref:t})}):null});bP.displayName=ox;var dV=zu("DialogOverlay.RemoveScroll"),fV=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jo(ox,r);return s.jsx(Zp,{as:dV,allowPinchZoom:!0,shards:[a.contentRef],children:s.jsx(vt.div,{"data-state":k2(a.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),tf="DialogContent",jP=x.forwardRef((e,t)=>{const r=yP(tf,e.__scopeDialog),{forceMount:n=r.forceMount,...a}=e,i=Jo(tf,e.__scopeDialog);return s.jsx(qs,{present:n||i.open,children:i.modal?s.jsx(hV,{...a,ref:t}):s.jsx(mV,{...a,ref:t})})});jP.displayName=tf;var hV=x.forwardRef((e,t)=>{const r=Jo(tf,e.__scopeDialog),n=x.useRef(null),a=Jt(t,r.contentRef,n);return x.useEffect(()=>{const i=n.current;if(i)return Xx(i)},[]),s.jsx(_P,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(e.onCloseAutoFocus,i=>{i.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:lt(e.onPointerDownOutside,i=>{const o=i.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&i.preventDefault()}),onFocusOutside:lt(e.onFocusOutside,i=>i.preventDefault())})}),mV=x.forwardRef((e,t)=>{const r=Jo(tf,e.__scopeDialog),n=x.useRef(!1),a=x.useRef(!1);return s.jsx(_P,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),_P=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,...o}=e,l=Jo(tf,r),u=x.useRef(null),f=Jt(t,u);return Qx(),s.jsxs(s.Fragment,{children:[s.jsx(Qp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(df,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":k2(l.open),...o,ref:f,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(gV,{titleId:l.titleId}),s.jsx(xV,{contentRef:u,descriptionId:l.descriptionId})]})]})}),S2="DialogTitle",NP=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jo(S2,r);return s.jsx(vt.h2,{id:a.titleId,...n,ref:t})});NP.displayName=S2;var SP="DialogDescription",kP=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jo(SP,r);return s.jsx(vt.p,{id:a.descriptionId,...n,ref:t})});kP.displayName=SP;var CP="DialogClose",EP=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,a=Jo(CP,r);return s.jsx(vt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,()=>a.onOpenChange(!1))})});EP.displayName=CP;function k2(e){return e?"open":"closed"}var PP="DialogTitleWarning",[pV,AP]=j8(PP,{contentName:tf,titleName:S2,docsSlug:"dialog"}),gV=({titleId:e})=>{const t=AP(PP),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},vV="DialogDescriptionWarning",xV=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${AP(vV).contentName}}.`;return x.useEffect(()=>{const a=e.current?.getAttribute("aria-describedby");t&&a&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},C2=gP,yV=xP,E2=wP,u0=bP,d0=jP,P2=NP,A2=kP,T2=EP;const ea=C2,wV=E2,TP=x.forwardRef(({className:e,...t},r)=>s.jsx(u0,{ref:r,className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));TP.displayName=u0.displayName;const Us=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(wV,{children:[s.jsx(TP,{}),s.jsxs(d0,{ref:n,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(T2,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(hn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Us.displayName=d0.displayName;const $s=({className:e,...t})=>s.jsx("div",{className:Oe("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});$s.displayName="DialogHeader";const Zo=({className:e,...t})=>s.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zo.displayName="DialogFooter";const zs=x.forwardRef(({className:e,...t},r)=>s.jsx(P2,{ref:r,className:Oe("text-lg font-semibold leading-none tracking-tight",e),...t}));zs.displayName=P2.displayName;const Wa=x.forwardRef(({className:e,...t},r)=>s.jsx(A2,{ref:r,className:Oe("text-sm text-muted-foreground",e),...t}));Wa.displayName=A2.displayName;const St=x.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Oe("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));St.displayName="Input";var bV="Label",RP=x.forwardRef((e,t)=>s.jsx(vt.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));RP.displayName=bV;var LP=RP;const jV=Xh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ft=x.forwardRef(({className:e,...t},r)=>s.jsx(LP,{ref:r,className:Oe(jV(),e),...t}));ft.displayName=LP.displayName;function Mp(e,[t,r]){return Math.min(r,Math.max(t,e))}function rg(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var _V=[" ","Enter","ArrowUp","ArrowDown"],NV=[" ","Enter"],rf="Select",[f0,h0,SV]=Wp(rf),[om]=bs(rf,[SV,Qu]),m0=Qu(),[kV,ad]=om(rf),[CV,EV]=om(rf),DP=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:a,onOpenChange:i,value:o,defaultValue:l,onValueChange:u,dir:f,name:h,autoComplete:p,disabled:v,required:m,form:N}=e,w=m0(t),[j,_]=x.useState(null),[C,k]=x.useState(null),[E,I]=x.useState(!1),D=Zu(f),[O,F]=Ea({prop:n,defaultProp:a??!1,onChange:i,caller:rf}),[T,z]=Ea({prop:o,defaultProp:l,onChange:u,caller:rf}),U=x.useRef(null),B=j?N||!!j.closest("form"):!0,[K,V]=x.useState(new Set),de=Array.from(K).map(se=>se.props.value).join(";");return s.jsx($x,{...w,children:s.jsxs(kV,{required:m,scope:t,trigger:j,onTriggerChange:_,valueNode:C,onValueNodeChange:k,valueNodeHasChildren:E,onValueNodeHasChildrenChange:I,contentId:Xs(),value:T,onValueChange:z,open:O,onOpenChange:F,dir:D,triggerPointerDownPosRef:U,disabled:v,children:[s.jsx(f0.Provider,{scope:t,children:s.jsx(CV,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(se=>{V(Y=>new Set(Y).add(se))},[]),onNativeOptionRemove:x.useCallback(se=>{V(Y=>{const W=new Set(Y);return W.delete(se),W})},[]),children:r})}),B?s.jsxs(sA,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:p,value:T,onChange:se=>z(se.target.value),disabled:v,form:N,children:[T===void 0?s.jsx("option",{value:""}):null,Array.from(K)]},de):null]})})};DP.displayName=rf;var IP="SelectTrigger",OP=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...a}=e,i=m0(r),o=ad(IP,r),l=o.disabled||n,u=Jt(t,o.onTriggerChange),f=h0(r),h=x.useRef("touch"),[p,v,m]=iA(w=>{const j=f().filter(k=>!k.disabled),_=j.find(k=>k.value===o.value),C=oA(j,w,_);C!==void 0&&o.onValueChange(C.value)}),N=w=>{l||(o.onOpenChange(!0),m()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return s.jsx(Yp,{asChild:!0,...i,children:s.jsx(vt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":aA(o.value)?"":void 0,...a,ref:u,onClick:lt(a.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&N(w)}),onPointerDown:lt(a.onPointerDown,w=>{h.current=w.pointerType;const j=w.target;j.hasPointerCapture(w.pointerId)&&j.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(N(w),w.preventDefault())}),onKeyDown:lt(a.onKeyDown,w=>{const j=p.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&v(w.key),!(j&&w.key===" ")&&_V.includes(w.key)&&(N(),w.preventDefault())})})})});OP.displayName=IP;var MP="SelectValue",FP=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,children:i,placeholder:o="",...l}=e,u=ad(MP,r),{onValueNodeHasChildrenChange:f}=u,h=i!==void 0,p=Jt(t,u.onValueNodeChange);return ys(()=>{f(h)},[f,h]),s.jsx(vt.span,{...l,ref:p,style:{pointerEvents:"none"},children:aA(u.value)?s.jsx(s.Fragment,{children:o}):i})});FP.displayName=MP;var PV="SelectIcon",BP=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...a}=e;return s.jsx(vt.span,{"aria-hidden":!0,...a,ref:t,children:n||""})});BP.displayName=PV;var AV="SelectPortal",UP=e=>s.jsx(Zh,{asChild:!0,...e});UP.displayName=AV;var nf="SelectContent",$P=x.forwardRef((e,t)=>{const r=ad(nf,e.__scopeSelect),[n,a]=x.useState();if(ys(()=>{a(new DocumentFragment)},[]),!r.open){const i=n;return i?Jh.createPortal(s.jsx(zP,{scope:e.__scopeSelect,children:s.jsx(f0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),i):null}return s.jsx(qP,{...e,ref:t})});$P.displayName=nf;var Ro=10,[zP,id]=om(nf),TV="SelectContentImpl",RV=zu("SelectContent.RemoveScroll"),qP=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:a,onEscapeKeyDown:i,onPointerDownOutside:o,side:l,sideOffset:u,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:v,collisionPadding:m,sticky:N,hideWhenDetached:w,avoidCollisions:j,..._}=e,C=ad(nf,r),[k,E]=x.useState(null),[I,D]=x.useState(null),O=Jt(t,ie=>E(ie)),[F,T]=x.useState(null),[z,U]=x.useState(null),B=h0(r),[K,V]=x.useState(!1),de=x.useRef(!1);x.useEffect(()=>{if(k)return Xx(k)},[k]),Qx();const se=x.useCallback(ie=>{const[oe,...le]=B().map(We=>We.ref.current),[ye]=le.slice(-1),Pe=document.activeElement;for(const We of ie)if(We===Pe||(We?.scrollIntoView({block:"nearest"}),We===oe&&I&&(I.scrollTop=0),We===ye&&I&&(I.scrollTop=I.scrollHeight),We?.focus(),document.activeElement!==Pe))return},[B,I]),Y=x.useCallback(()=>se([F,k]),[se,F,k]);x.useEffect(()=>{K&&Y()},[K,Y]);const{onOpenChange:W,triggerPointerDownPosRef:ee}=C;x.useEffect(()=>{if(k){let ie={x:0,y:0};const oe=ye=>{ie={x:Math.abs(Math.round(ye.pageX)-(ee.current?.x??0)),y:Math.abs(Math.round(ye.pageY)-(ee.current?.y??0))}},le=ye=>{ie.x<=10&&ie.y<=10?ye.preventDefault():k.contains(ye.target)||W(!1),document.removeEventListener("pointermove",oe),ee.current=null};return ee.current!==null&&(document.addEventListener("pointermove",oe),document.addEventListener("pointerup",le,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",oe),document.removeEventListener("pointerup",le,{capture:!0})}}},[k,W,ee]),x.useEffect(()=>{const ie=()=>W(!1);return window.addEventListener("blur",ie),window.addEventListener("resize",ie),()=>{window.removeEventListener("blur",ie),window.removeEventListener("resize",ie)}},[W]);const[ge,re]=iA(ie=>{const oe=B().filter(Pe=>!Pe.disabled),le=oe.find(Pe=>Pe.ref.current===document.activeElement),ye=oA(oe,ie,le);ye&&setTimeout(()=>ye.ref.current.focus())}),L=x.useCallback((ie,oe,le)=>{const ye=!de.current&&!le;(C.value!==void 0&&C.value===oe||ye)&&(T(ie),ye&&(de.current=!0))},[C.value]),q=x.useCallback(()=>k?.focus(),[k]),J=x.useCallback((ie,oe,le)=>{const ye=!de.current&&!le;(C.value!==void 0&&C.value===oe||ye)&&U(ie)},[C.value]),ne=n==="popper"?Vw:VP,ue=ne===Vw?{side:l,sideOffset:u,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:v,collisionPadding:m,sticky:N,hideWhenDetached:w,avoidCollisions:j}:{};return s.jsx(zP,{scope:r,content:k,viewport:I,onViewportChange:D,itemRefCallback:L,selectedItem:F,onItemLeave:q,itemTextRefCallback:J,focusSelectedItem:Y,selectedItemText:z,position:n,isPositioned:K,searchRef:ge,children:s.jsx(Zp,{as:RV,allowPinchZoom:!0,children:s.jsx(Qp,{asChild:!0,trapped:C.open,onMountAutoFocus:ie=>{ie.preventDefault()},onUnmountAutoFocus:lt(a,ie=>{C.trigger?.focus({preventScroll:!0}),ie.preventDefault()}),children:s.jsx(df,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:ie=>ie.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:s.jsx(ne,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ie=>ie.preventDefault(),..._,...ue,onPlaced:()=>V(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",..._.style},onKeyDown:lt(_.onKeyDown,ie=>{const oe=ie.ctrlKey||ie.altKey||ie.metaKey;if(ie.key==="Tab"&&ie.preventDefault(),!oe&&ie.key.length===1&&re(ie.key),["ArrowUp","ArrowDown","Home","End"].includes(ie.key)){let ye=B().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(ie.key)&&(ye=ye.slice().reverse()),["ArrowUp","ArrowDown"].includes(ie.key)){const Pe=ie.target,We=ye.indexOf(Pe);ye=ye.slice(We+1)}setTimeout(()=>se(ye)),ie.preventDefault()}})})})})})})});qP.displayName=TV;var LV="SelectItemAlignedPosition",VP=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...a}=e,i=ad(nf,r),o=id(nf,r),[l,u]=x.useState(null),[f,h]=x.useState(null),p=Jt(t,O=>h(O)),v=h0(r),m=x.useRef(!1),N=x.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:_,focusSelectedItem:C}=o,k=x.useCallback(()=>{if(i.trigger&&i.valueNode&&l&&f&&w&&j&&_){const O=i.trigger.getBoundingClientRect(),F=f.getBoundingClientRect(),T=i.valueNode.getBoundingClientRect(),z=_.getBoundingClientRect();if(i.dir!=="rtl"){const Pe=z.left-F.left,We=T.left-Pe,Fe=O.left-We,je=O.width+Fe,te=Math.max(je,F.width),Ze=window.innerWidth-Ro,Nt=Mp(We,[Ro,Math.max(Ro,Ze-te)]);l.style.minWidth=je+"px",l.style.left=Nt+"px"}else{const Pe=F.right-z.right,We=window.innerWidth-T.right-Pe,Fe=window.innerWidth-O.right-We,je=O.width+Fe,te=Math.max(je,F.width),Ze=window.innerWidth-Ro,Nt=Mp(We,[Ro,Math.max(Ro,Ze-te)]);l.style.minWidth=je+"px",l.style.right=Nt+"px"}const U=v(),B=window.innerHeight-Ro*2,K=w.scrollHeight,V=window.getComputedStyle(f),de=parseInt(V.borderTopWidth,10),se=parseInt(V.paddingTop,10),Y=parseInt(V.borderBottomWidth,10),W=parseInt(V.paddingBottom,10),ee=de+se+K+W+Y,ge=Math.min(j.offsetHeight*5,ee),re=window.getComputedStyle(w),L=parseInt(re.paddingTop,10),q=parseInt(re.paddingBottom,10),J=O.top+O.height/2-Ro,ne=B-J,ue=j.offsetHeight/2,ie=j.offsetTop+ue,oe=de+se+ie,le=ee-oe;if(oe<=J){const Pe=U.length>0&&j===U[U.length-1].ref.current;l.style.bottom="0px";const We=f.clientHeight-w.offsetTop-w.offsetHeight,Fe=Math.max(ne,ue+(Pe?q:0)+We+Y),je=oe+Fe;l.style.height=je+"px"}else{const Pe=U.length>0&&j===U[0].ref.current;l.style.top="0px";const Fe=Math.max(J,de+w.offsetTop+(Pe?L:0)+ue)+le;l.style.height=Fe+"px",w.scrollTop=oe-J+w.offsetTop}l.style.margin=`${Ro}px 0`,l.style.minHeight=ge+"px",l.style.maxHeight=B+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[v,i.trigger,i.valueNode,l,f,w,j,_,i.dir,n]);ys(()=>k(),[k]);const[E,I]=x.useState();ys(()=>{f&&I(window.getComputedStyle(f).zIndex)},[f]);const D=x.useCallback(O=>{O&&N.current===!0&&(k(),C?.(),N.current=!1)},[k,C]);return s.jsx(IV,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:D,children:s.jsx("div",{ref:u,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:E},children:s.jsx(vt.div,{...a,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...a.style}})})})});VP.displayName=LV;var DV="SelectPopperPosition",Vw=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:a=Ro,...i}=e,o=m0(r);return s.jsx(zx,{...o,...i,ref:t,align:n,collisionPadding:a,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Vw.displayName=DV;var[IV,R2]=om(nf,{}),Ww="SelectViewport",WP=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...a}=e,i=id(Ww,r),o=R2(Ww,r),l=Jt(t,i.onViewportChange),u=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(f0.Slot,{scope:r,children:s.jsx(vt.div,{"data-radix-select-viewport":"",role:"presentation",...a,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...a.style},onScroll:lt(a.onScroll,f=>{const h=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=o;if(v?.current&&p){const m=Math.abs(u.current-h.scrollTop);if(m>0){const N=window.innerHeight-Ro*2,w=parseFloat(p.style.minHeight),j=parseFloat(p.style.height),_=Math.max(w,j);if(_<N){const C=_+m,k=Math.min(N,C),E=C-k;p.style.height=k+"px",p.style.bottom==="0px"&&(h.scrollTop=E>0?E:0,p.style.justifyContent="flex-end")}}}u.current=h.scrollTop})})})]})});WP.displayName=Ww;var HP="SelectGroup",[OV,MV]=om(HP),FV=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=Xs();return s.jsx(OV,{scope:r,id:a,children:s.jsx(vt.div,{role:"group","aria-labelledby":a,...n,ref:t})})});FV.displayName=HP;var GP="SelectLabel",KP=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=MV(GP,r);return s.jsx(vt.div,{id:a.id,...n,ref:t})});KP.displayName=GP;var lx="SelectItem",[BV,YP]=om(lx),QP=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:a=!1,textValue:i,...o}=e,l=ad(lx,r),u=id(lx,r),f=l.value===n,[h,p]=x.useState(i??""),[v,m]=x.useState(!1),N=Jt(t,C=>u.itemRefCallback?.(C,n,a)),w=Xs(),j=x.useRef("touch"),_=()=>{a||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(BV,{scope:r,value:n,disabled:a,textId:w,isSelected:f,onItemTextChange:x.useCallback(C=>{p(k=>k||(C?.textContent??"").trim())},[]),children:s.jsx(f0.ItemSlot,{scope:r,value:n,disabled:a,textValue:h,children:s.jsx(vt.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":a||void 0,"data-disabled":a?"":void 0,tabIndex:a?void 0:-1,...o,ref:N,onFocus:lt(o.onFocus,()=>m(!0)),onBlur:lt(o.onBlur,()=>m(!1)),onClick:lt(o.onClick,()=>{j.current!=="mouse"&&_()}),onPointerUp:lt(o.onPointerUp,()=>{j.current==="mouse"&&_()}),onPointerDown:lt(o.onPointerDown,C=>{j.current=C.pointerType}),onPointerMove:lt(o.onPointerMove,C=>{j.current=C.pointerType,a?u.onItemLeave?.():j.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lt(o.onPointerLeave,C=>{C.currentTarget===document.activeElement&&u.onItemLeave?.()}),onKeyDown:lt(o.onKeyDown,C=>{u.searchRef?.current!==""&&C.key===" "||(NV.includes(C.key)&&_(),C.key===" "&&C.preventDefault())})})})})});QP.displayName=lx;var Xm="SelectItemText",JP=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:a,...i}=e,o=ad(Xm,r),l=id(Xm,r),u=YP(Xm,r),f=EV(Xm,r),[h,p]=x.useState(null),v=Jt(t,_=>p(_),u.onItemTextChange,_=>l.itemTextRefCallback?.(_,u.value,u.disabled)),m=h?.textContent,N=x.useMemo(()=>s.jsx("option",{value:u.value,disabled:u.disabled,children:m},u.value),[u.disabled,u.value,m]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=f;return ys(()=>(w(N),()=>j(N)),[w,j,N]),s.jsxs(s.Fragment,{children:[s.jsx(vt.span,{id:u.textId,...i,ref:v}),u.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Jh.createPortal(i.children,o.valueNode):null]})});JP.displayName=Xm;var ZP="SelectItemIndicator",XP=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return YP(ZP,r).isSelected?s.jsx(vt.span,{"aria-hidden":!0,...n,ref:t}):null});XP.displayName=ZP;var Hw="SelectScrollUpButton",eA=x.forwardRef((e,t)=>{const r=id(Hw,e.__scopeSelect),n=R2(Hw,e.__scopeSelect),[a,i]=x.useState(!1),o=Jt(t,n.onScrollButtonChange);return ys(()=>{if(r.viewport&&r.isPositioned){let l=function(){const f=u.scrollTop>0;i(f)};const u=r.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(rA,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=r;l&&u&&(l.scrollTop=l.scrollTop-u.offsetHeight)}}):null});eA.displayName=Hw;var Gw="SelectScrollDownButton",tA=x.forwardRef((e,t)=>{const r=id(Gw,e.__scopeSelect),n=R2(Gw,e.__scopeSelect),[a,i]=x.useState(!1),o=Jt(t,n.onScrollButtonChange);return ys(()=>{if(r.viewport&&r.isPositioned){let l=function(){const f=u.scrollHeight-u.clientHeight,h=Math.ceil(u.scrollTop)<f;i(h)};const u=r.viewport;return l(),u.addEventListener("scroll",l),()=>u.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),a?s.jsx(rA,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:u}=r;l&&u&&(l.scrollTop=l.scrollTop+u.offsetHeight)}}):null});tA.displayName=Gw;var rA=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...a}=e,i=id("SelectScrollButton",r),o=x.useRef(null),l=h0(r),u=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>u(),[u]),ys(()=>{l().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(vt.div,{"aria-hidden":!0,...a,ref:t,style:{flexShrink:0,...a.style},onPointerDown:lt(a.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:lt(a.onPointerMove,()=>{i.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:lt(a.onPointerLeave,()=>{u()})})}),UV="SelectSeparator",nA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(vt.div,{"aria-hidden":!0,...n,ref:t})});nA.displayName=UV;var Kw="SelectArrow",$V=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,a=m0(r),i=ad(Kw,r),o=id(Kw,r);return i.open&&o.position==="popper"?s.jsx(qx,{...a,...n,ref:t}):null});$V.displayName=Kw;var zV="SelectBubbleInput",sA=x.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const a=x.useRef(null),i=Jt(n,a),o=rg(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const u=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&h){const p=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(p)}},[o,t]),s.jsx(vt.select,{...r,style:{...pk,...r.style},ref:i,defaultValue:t})});sA.displayName=zV;function aA(e){return e===""||e===void 0}function iA(e){const t=as(e),r=x.useRef(""),n=x.useRef(0),a=x.useCallback(o=>{const l=r.current+o;t(l),(function u(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>u(""),1e3))})(l)},[t]),i=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,a,i]}function oA(e,t,r){const a=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,i=r?e.indexOf(r):-1;let o=qV(e,Math.max(i,0));a.length===1&&(o=o.filter(f=>f!==r));const u=o.find(f=>f.textValue.toLowerCase().startsWith(a.toLowerCase()));return u!==r?u:void 0}function qV(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var VV=DP,lA=OP,WV=FP,HV=BP,GV=UP,cA=$P,KV=WP,uA=KP,dA=QP,YV=JP,QV=XP,fA=eA,hA=tA,mA=nA;const Nr=VV,Sr=WV,_r=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(lA,{ref:n,className:Oe("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(HV,{asChild:!0,children:s.jsx(Tb,{className:"h-4 w-4 opacity-50"})})]}));_r.displayName=lA.displayName;const pA=x.forwardRef(({className:e,...t},r)=>s.jsx(fA,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Fk,{className:"h-4 w-4"})}));pA.displayName=fA.displayName;const gA=x.forwardRef(({className:e,...t},r)=>s.jsx(hA,{ref:r,className:Oe("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(Tb,{className:"h-4 w-4"})}));gA.displayName=hA.displayName;const Cr=x.forwardRef(({className:e,children:t,position:r="popper",...n},a)=>s.jsx(GV,{children:s.jsxs(cA,{ref:a,className:Oe("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(pA,{}),s.jsx(KV,{className:Oe("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(gA,{})]})}));Cr.displayName=cA.displayName;const JV=x.forwardRef(({className:e,...t},r)=>s.jsx(uA,{ref:r,className:Oe("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));JV.displayName=uA.displayName;const qe=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(dA,{ref:n,className:Oe("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(QV,{children:s.jsx(Na,{className:"h-4 w-4"})})}),s.jsx(YV,{children:t})]}));qe.displayName=dA.displayName;const ZV=x.forwardRef(({className:e,...t},r)=>s.jsx(mA,{ref:r,className:Oe("-mx-1 my-1 h-px bg-muted",e),...t}));ZV.displayName=mA.displayName;const XV=["Kitchen Staff","Prep Cook","Line Cook","Sous Chef","Head Chef","Kitchen Manager"];function eW(){const[e,t]=x.useState([]),[r,n]=x.useState(!1),[a,i]=x.useState({name:"",role:"Kitchen Staff"}),[o,l]=x.useState(!1),{user:u}=Ga(),{isAdmin:f,isManager:h}=rd(),{toast:p}=Er();x.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:w,error:j}=await Ae.from("staff").select("*").order("name");if(j)throw j;t(w||[])}catch(w){console.error("Error fetching staff:",w),p({title:"Error",description:"Failed to fetch staff list",variant:"destructive"})}},m=async w=>{if(w.preventDefault(),!(!u||!a.name.trim())){l(!0);try{const{data:j}=await Ae.from("profiles").select("organization_id").eq("user_id",u.id).single(),{error:_}=await Ae.from("staff").insert({name:a.name.trim(),role:a.role,organization_id:j?.organization_id,is_active:!0});if(_)throw _;p({title:"Success",description:"Staff member added successfully"}),i({name:"",role:"Kitchen Staff"}),n(!1),v()}catch(j){console.error("Error adding staff:",j),p({title:"Error",description:"Failed to add staff member",variant:"destructive"})}finally{l(!1)}}},N=async(w,j)=>{try{const{error:_}=await Ae.from("staff").update({is_active:!j}).eq("id",w);if(_)throw _;p({title:"Success",description:`Staff member ${j?"deactivated":"activated"}`}),v()}catch(_){console.error("Error updating staff status:",_),p({title:"Error",description:"Failed to update staff status",variant:"destructive"})}};return!f&&!h?null:s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(Bi,{className:"w-5 h-5"}),"Staff Management"]}),s.jsxs(we,{onClick:()=>n(!0),children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add Staff Member"]})]})}),s.jsx(st,{children:s.jsx("div",{className:"space-y-4",children:e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Bi,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No staff members found"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your first staff member to get started"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(w=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:w.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:w.role})]}),s.jsx(ut,{variant:w.is_active?"default":"secondary",children:w.is_active?"Active":"Inactive"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(we,{size:"sm",variant:w.is_active?"outline":"default",onClick:()=>N(w.id,w.is_active),children:w.is_active?"Deactivate":"Activate"})})]},w.id))})})}),s.jsx(ea,{open:r,onOpenChange:n,children:s.jsxs(Us,{className:"max-w-md",children:[s.jsx($s,{children:s.jsx(zs,{children:"Add New Staff Member"})}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"staffName",children:"Staff Name *"}),s.jsx(St,{id:"staffName",value:a.name,onChange:w=>i({...a,name:w.target.value}),placeholder:"Enter staff member's name",required:!0})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"staffRole",children:"Role"}),s.jsxs(Nr,{value:a.role,onValueChange:w=>i({...a,role:w}),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsx(Cr,{className:"bg-background opacity-100",children:XV.map(w=>s.jsx(qe,{value:w,className:"bg-background opacity-100",children:w},w))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(we,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:o,children:"Cancel"}),s.jsx(we,{type:"submit",disabled:o||!a.name.trim(),children:o?"Adding...":"Add Staff Member"})]})]})]})})]})}function tW(){const[e,t]=x.useState(null),[r,n]=x.useState(!0),{user:a}=Ga(),{roles:i,highestRole:o,loading:l,isAdmin:u}=rd(),{toast:f}=Er();x.useEffect(()=>{h()},[a]);const h=async()=>{if(a)try{const{data:p,error:v}=await Ae.from("profiles").select("organization_id, display_name, phone, position").eq("user_id",a.id).single();if(v)throw v;t(p)}catch(p){console.error("Error fetching user profile:",p),f({title:"Error",description:"Failed to fetch user profile",variant:"destructive"})}finally{n(!1)}};if(!(r||l))return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(Bc,{className:"w-5 h-5"}),"User Profile & Roles"]})}),s.jsx(st,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Display Name"}),s.jsx("p",{className:"font-medium",children:e?.display_name||"Not set"})]}),e?.position&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Position"}),s.jsx("p",{className:"font-medium",children:e.position})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Assigned Roles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:i&&i.length>0?i.map(p=>s.jsxs(ut,{variant:p==="admin"?"default":"secondary",className:"flex items-center gap-1",children:[s.jsx(ff,{className:"w-3 h-3"}),p]},p)):s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Hr,{className:"w-4 h-4"}),"No roles assigned"]})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Role"}),s.jsx("p",{className:"font-medium",children:o||"None"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"User ID"}),s.jsx("p",{className:"font-mono text-xs",children:a?.id})]})]}),u&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:" You have admin access - Staff management is available below"})}),(!i||!i.length)&&s.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-amber-800 text-sm",children:[s.jsx("strong",{children:"Note:"})," You don't have any roles assigned yet. Contact an administrator to assign you a role."]})})]})})]}),u&&s.jsx(eW,{})]})}function rW(){const[e,t]=x.useState([]),[r,n]=x.useState(""),[a,i]=x.useState(""),[o,l]=x.useState("kg"),[u,f]=x.useState("spoilage"),[h,p]=x.useState(""),{toast:v}=Er();x.useEffect(()=>{m()},[]);const m=async()=>{const{data:j,error:_}=await Ae.from("waste_logs").select("*").order("logged_at",{ascending:!1}).limit(10);!_&&j&&t(j)},N=async()=>{if(!r||!a){v({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const{data:{user:j}}=await Ae.auth.getUser();if(!j)return;const{data:_}=await Ae.from("profiles").select("organization_id").eq("user_id",j.id).single(),{error:C}=await Ae.from("waste_logs").insert({organization_id:_?.organization_id,logged_by:j.id,item_name:r,quantity:parseFloat(a),unit:o,reason:u,estimated_cost:h?parseFloat(h):null});C?v({title:"Error",description:"Failed to log waste",variant:"destructive"}):(v({title:"Success",description:"Waste logged successfully"}),n(""),i(""),p(""),m())},w=e.reduce((j,_)=>j+(_.estimated_cost||0),0);return s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(Dl,{className:"w-5 h-5"}),"Waste Tracker"]})}),s.jsxs(st,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(St,{placeholder:"Item name",value:r,onChange:j=>n(j.target.value)}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{type:"number",placeholder:"Quantity",value:a,onChange:j=>i(j.target.value)}),s.jsxs(Nr,{value:o,onValueChange:l,children:[s.jsx(_r,{className:"w-24",children:s.jsx(Sr,{})}),s.jsxs(Cr,{className:"bg-background opacity-100",children:[s.jsx(qe,{value:"kg",className:"bg-background opacity-100",children:"kg"}),s.jsx(qe,{value:"l",className:"bg-background opacity-100",children:"L"}),s.jsx(qe,{value:"pcs",className:"bg-background opacity-100",children:"pcs"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(Nr,{value:u,onValueChange:f,children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{className:"bg-background opacity-100",children:[s.jsx(qe,{value:"spoilage",className:"bg-background opacity-100",children:"Spoilage"}),s.jsx(qe,{value:"overcooking",className:"bg-background opacity-100",children:"Overcooking"}),s.jsx(qe,{value:"expired",className:"bg-background opacity-100",children:"Expired"}),s.jsx(qe,{value:"contamination",className:"bg-background opacity-100",children:"Contamination"})]})]}),s.jsx(St,{type:"number",placeholder:"Estimated cost (optional)",value:h,onChange:j=>p(j.target.value)})]}),s.jsx(we,{onClick:N,className:"w-full",children:"Log Waste"}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Cost (Recent)"}),s.jsxs("span",{className:"text-lg font-bold text-destructive",children:["$",w.toFixed(2)]})]}),s.jsx("div",{className:"space-y-2",children:e.slice(0,3).map(j=>s.jsxs("div",{className:"text-sm flex justify-between",children:[s.jsxs("span",{className:"text-muted-foreground",children:[j.item_name," (",j.quantity," ",j.unit,")"]}),s.jsxs("span",{className:"text-destructive",children:["$",(j.estimated_cost||0).toFixed(2)]})]},j.id))})]})]})]})}function nW(){const[e,t]=x.useState([]),[r,n]=x.useState(null);x.useEffect(()=>{a()},[]);const a=async()=>{const{data:l}=await Ae.from("compliance_checks").select("*").order("checked_at",{ascending:!1}).limit(5);if(l){t(l);const u=l.length,f=l.filter(v=>v.status==="passed").length,h=l.filter(v=>v.status==="failed").length,p=l.filter(v=>v.status==="needs_attention").length;n({total_checks:u,passed_count:f,failed_count:h,needs_attention_count:p})}},i=l=>{switch(l){case"passed":return s.jsx(Js,{className:"h-4 w-4 text-green-500"});case"failed":return s.jsx(Ix,{className:"h-4 w-4 text-red-500"});case"needs_attention":return s.jsx(Hr,{className:"h-4 w-4 text-yellow-500"});default:return s.jsx(Hr,{className:"h-4 w-4 text-gray-500"})}},o=l=>{const u={passed:"default",failed:"destructive",needs_attention:"secondary"};return s.jsx(ut,{variant:u[l]||"default",children:l.replace("_"," ")})};return s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(ff,{className:"h-5 w-5"}),"Compliance Reports"]})}),s.jsx(st,{children:r&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Checks"}),s.jsx("p",{className:"text-2xl font-bold",children:r.total_checks})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Passed"}),s.jsx("p",{className:"text-2xl font-bold text-success",children:r.passed_count})]})]}),s.jsx("div",{className:"space-y-2",children:e.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[i(l.status),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:l.check_type}),s.jsx("p",{className:"text-xs text-muted-foreground",children:l.area})]})]}),o(l.status)]},l.id))})]})})]})}var L2="Progress",D2=100,[sW]=bs(L2),[aW,iW]=sW(L2),vA=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:a,getValueLabel:i=oW,...o}=e;(a||a===0)&&!bN(a)&&console.error(lW(`${a}`,"Progress"));const l=bN(a)?a:D2;n!==null&&!jN(n,l)&&console.error(cW(`${n}`,"Progress"));const u=jN(n,l)?n:null,f=cx(u)?i(u,l):void 0;return s.jsx(aW,{scope:r,value:u,max:l,children:s.jsx(vt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":cx(u)?u:void 0,"aria-valuetext":f,role:"progressbar","data-state":wA(u,l),"data-value":u??void 0,"data-max":l,...o,ref:t})})});vA.displayName=L2;var xA="ProgressIndicator",yA=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,a=iW(xA,r);return s.jsx(vt.div,{"data-state":wA(a.value,a.max),"data-value":a.value??void 0,"data-max":a.max,...n,ref:t})});yA.displayName=xA;function oW(e,t){return`${Math.round(e/t*100)}%`}function wA(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function cx(e){return typeof e=="number"}function bN(e){return cx(e)&&!isNaN(e)&&e>0}function jN(e,t){return cx(e)&&!isNaN(e)&&e<=t&&e>=0}function lW(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${D2}\`.`}function cW(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${D2} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var bA=vA,uW=yA;const ux=x.forwardRef(({className:e,value:t,...r},n)=>s.jsx(bA,{ref:n,className:Oe("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(uW,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));ux.displayName=bA.displayName;function dW(){const[e,t]=x.useState([]),[r,n]=x.useState(!0);x.useEffect(()=>{a()},[]);const a=async()=>{const{data:l,error:u}=await Ae.from("efficiency_analytics").select("*").limit(5);!u&&l&&t(l),n(!1)},i=l=>l<=1.1?"text-green-500":l<=1.3?"text-yellow-500":"text-red-500",o=l=>l<=1.1?"Excellent":l<=1.3?"Good":"Needs Improvement";return r?s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(Lh,{className:"h-5 w-5"}),"Efficiency Metrics"]})}),s.jsx(st,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})})]}):s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(Lh,{className:"h-5 w-5"}),"Production Efficiency"]})}),s.jsx(st,{children:e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No production data yet"}):s.jsx("div",{className:"space-y-4",children:e.map((l,u)=>{const f=l.time_efficiency_ratio||1,h=(l.avg_quality||0)/5*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm",children:l.recipe_name}),s.jsx("span",{className:`text-xs font-medium ${i(f)}`,children:o(f)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("div",{className:"flex-1",children:s.jsx(ux,{value:Math.min(1/f*100,100)})}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[(f*100).toFixed(0),"% of planned time"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(DD,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("div",{className:"flex-1",children:s.jsx(ux,{value:h})}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[l.avg_quality?.toFixed(1),"/5.0"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.production_count," batches  ",l.total_produced," units produced"]})]},u)})})})]})}function I2(){const{user:e}=Ga(),[t,r]=x.useState(null),[n,a]=x.useState(null),[i,o]=x.useState(!0),[l,u]=x.useState(null),f=async()=>{if(!e?.id){o(!1);return}try{o(!0),u(null);const{data:E,error:I}=await Ae.rpc("get_user_subscription",{p_user_id:e.id}).maybeSingle(),D=E;if(I&&I.code!=="PGRST116")throw I;const{data:O,error:F}=await Ae.rpc("get_user_plan_limits",{p_user_id:e.id}).single(),T=O;F?(console.warn("Failed to fetch plan limits:",F),a({planType:"free",maxTeamMembers:1,maxRecipes:10,maxProducts:20,maxSuppliers:10,hasAllergenManagement:!1,hasNutritionalCalculator:!1,hasCostControl:!1,hasApiAccess:!1,hasPrioritySupport:!1})):T&&a({planType:T.plan_type,maxTeamMembers:T.max_team_members,maxRecipes:T.max_recipes,maxProducts:T.max_products,maxSuppliers:T.max_suppliers,hasAllergenManagement:T.has_allergen_management,hasNutritionalCalculator:T.has_nutritional_calculator,hasCostControl:T.has_cost_control,hasApiAccess:T.has_api_access,hasPrioritySupport:T.has_priority_support}),r(D?{id:D.id,planType:D.plan_type,status:D.status,trialEnd:D.trial_end,currentPeriodEnd:D.current_period_end,organizationId:D.organization_id,hasOrganization:D.has_organization}:null)}catch(E){console.error("Error fetching subscription:",E),u(E.message||"Failed to fetch subscription")}finally{o(!1)}};x.useEffect(()=>{f()},[e?.id]);const h=t?.status==="active"||t?.status==="trialing",p=t?.status==="trialing",v=!t||n?.planType==="free",m=p&&t?.trialEnd?Math.max(0,Math.ceil((new Date(t.trialEnd).getTime()-Date.now())/(1e3*60*60*24))):null,N=h&&t?.currentPeriodEnd?Math.max(0,Math.ceil((new Date(t.currentPeriodEnd).getTime()-Date.now())/(1e3*60*60*24))):null;return{subscription:t,planLimits:n,loading:i,error:l,isActive:h,isTrialing:p,isFree:v,trialDaysRemaining:m,daysUntilRenewal:N,refetch:f,hasFeature:E=>{if(!n)return!1;const I=n[E];return typeof I=="boolean"?I:!1},canAddTeamMember:E=>n?n.maxTeamMembers===-1||E<n.maxTeamMembers:!1,canAddRecipe:E=>n?n.maxRecipes===-1||E<n.maxRecipes:!1,canAddProduct:E=>n?n.maxProducts===-1||E<n.maxProducts:!1,canAddSupplier:E=>n?n.maxSuppliers===-1||E<n.maxSuppliers:!1}}function fW(){const{subscription:e,planLimits:t,loading:r,isActive:n,isTrialing:a,isFree:i,trialDaysRemaining:o,daysUntilRenewal:l}=I2(),u=mf();if(r)return s.jsxs(rt,{className:"animate-pulse",children:[s.jsx(Wt,{children:s.jsx("div",{className:"h-6 w-32 bg-muted rounded"})}),s.jsx(st,{children:s.jsx("div",{className:"h-4 w-48 bg-muted rounded"})})]});const f=()=>{switch(t?.planType){case"starter":return s.jsx(Dh,{className:"h-5 w-5 text-blue-500"});case"professional":return s.jsx(Ac,{className:"h-5 w-5 text-purple-500"});case"enterprise":return s.jsx(Yk,{className:"h-5 w-5 text-orange-500"});default:return null}},h=()=>{switch(t?.planType){case"starter":return"bg-blue-500/10 text-blue-700 border-blue-500/20";case"professional":return"bg-purple-500/10 text-purple-700 border-purple-500/20";case"enterprise":return"bg-orange-500/10 text-orange-700 border-orange-500/20";default:return"bg-gray-500/10 text-gray-700 border-gray-500/20"}},p=()=>a?s.jsx(ut,{variant:"outline",className:"bg-green-500/10 text-green-700 border-green-500/20",children:"Trial Active"}):n?s.jsx(ut,{variant:"outline",className:"bg-green-500/10 text-green-700 border-green-500/20",children:"Active"}):e?.status==="past_due"?s.jsx(ut,{variant:"outline",className:"bg-red-500/10 text-red-700 border-red-500/20",children:"Past Due"}):null;return s.jsxs(rt,{className:`border-2 ${h()}`,children:[s.jsxs(Wt,{className:"pb-3",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[f(),s.jsxs(Qt,{className:"text-lg capitalize",children:[t?.planType||"Free"," Plan"]})]}),p()]}),s.jsxs(Bs,{children:[i&&"Upgrade to unlock more features",a&&`${o} days left in trial`,n&&!a&&`Renews in ${l} days`]})]}),s.jsxs(st,{className:"space-y-3",children:[a&&o!==null&&o<=3&&s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[s.jsx(Hr,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-amber-900",children:"Trial ending soon"}),s.jsxs("p",{className:"text-xs text-amber-700 mt-1",children:["Your trial ends in ",o," days. Add payment method to continue."]})]})]}),t&&s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Team Members"}),s.jsx("p",{className:"font-medium",children:t.maxTeamMembers===-1?"Unlimited":t.maxTeamMembers})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Recipes"}),s.jsx("p",{className:"font-medium",children:t.maxRecipes===-1?"Unlimited":t.maxRecipes})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Products"}),s.jsx("p",{className:"font-medium",children:t.maxProducts===-1?"Unlimited":t.maxProducts})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-muted-foreground",children:"Suppliers"}),s.jsx("p",{className:"font-medium",children:t.maxSuppliers===-1?"Unlimited":t.maxSuppliers})]})]}),s.jsx("div",{className:"flex gap-2 pt-2",children:i?s.jsxs(we,{onClick:()=>u("/pricing"),className:"w-full",size:"sm",children:[s.jsx(Ac,{className:"h-4 w-4 mr-2"}),"Upgrade Plan"]}):s.jsxs(we,{onClick:()=>u("/billing"),variant:"outline",className:"w-full",size:"sm",children:[s.jsx($k,{className:"h-4 w-4 mr-2"}),"Manage Billing"]})})]})]})}function hW(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[a,i]=x.useState(0),{user:o}=Ga(),{toast:l}=Er();x.useEffect(()=>{u(),f()},[]);const u=async()=>{try{n(!0),t([])}catch(h){console.error("Error fetching recent activity:",h),l({title:"Error",description:"Failed to fetch recent activity",variant:"destructive"})}finally{n(!1)}},f=async()=>{try{i(0)}catch(h){console.error("Error fetching waste total:",h)}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Kitchen Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Monitor your kitchen operations and food safety"})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx(we,{variant:"hero",children:"Generate Report"})})]}),s.jsx("div",{className:"max-w-md",children:s.jsx(fW,{})}),s.jsx(lV,{items:e}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(fi,{title:"Compliance Score",value:"98.5%",change:"+0.3% this week",changeType:"positive",icon:Cl}),s.jsx(fi,{title:"Total Waste Cost",value:`$${a.toFixed(2)}`,icon:Lh})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-secondary/10 rounded-lg flex items-center justify-center",children:s.jsx(Zk,{className:"w-4 h-4 text-secondary"})}),s.jsx("h3",{className:"font-semibold",children:"Temperature Alerts"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-success/10 rounded-lg border border-success/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Walk-in Cooler"}),s.jsx("span",{className:"text-sm text-success",children:"3C"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Normal range"})]}),s.jsxs("div",{className:"p-3 bg-warning/10 rounded-lg border border-warning/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Freezer Unit 2"}),s.jsx("span",{className:"text-sm text-warning",children:"-17C"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Slightly high"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-accent/50 rounded-lg flex items-center justify-center",children:s.jsx(Va,{className:"w-4 h-4 text-accent-foreground"})}),s.jsx("h3",{className:"font-semibold",children:"Daily Routine"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Opening Checklist"}),s.jsx("span",{className:"text-sm text-success font-medium",children:"Complete"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Temperature Logs"}),s.jsx("span",{className:"text-sm text-warning font-medium",children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsx("span",{className:"text-sm",children:"Cleaning Tasks"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled"})]})]})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx(jn,{className:"w-4 h-4 text-primary"})}),s.jsx("h3",{className:"font-semibold",children:"Today's Schedule"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Morning Prep"}),s.jsx("span",{className:"text-sm text-success font-medium",children:"Complete"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Lunch Service"}),s.jsx("span",{className:"text-sm text-warning font-medium",children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsx("span",{className:"text-sm",children:"Evening Prep"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-accent/50 rounded-lg flex items-center justify-center",children:s.jsx(Dx,{className:"w-4 h-4 text-accent-foreground"})}),s.jsx("h3",{className:"font-semibold",children:"Recent Preparations"})]}),s.jsx("div",{className:"space-y-3",children:r?s.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading activity..."}):e.length===0?s.jsx("div",{className:"text-sm text-muted-foreground",children:"No recent activity"}):e.slice(0,3).map((h,p)=>s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium",children:h.recipe_name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"text-muted-foreground",children:["Expires: ",wr(new Date(h.expiry_date),"dd/MM HH:mm")]}),s.jsx(ut,{variant:h.status==="expired"?"destructive":h.status==="expiring"?"default":"secondary",className:"text-xs",children:h.status==="expired"?"Expired":h.status==="expiring"?"Expiring":"Fresh"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:wr(new Date(h.prepared_at),"MMM dd, HH:mm")})]},p))})]})}),s.jsx(tW,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx(rW,{}),s.jsx(nW,{}),s.jsx(dW,{})]}),s.jsx(hP,{})]})}function p0(){const{planLimits:e,hasFeature:t,canAddTeamMember:r,canAddRecipe:n,canAddProduct:a,canAddSupplier:i}=I2(),[o,l]=x.useState({open:!1,limitType:"teamMembers"});return{checkTeamMemberLimit:m=>{const N=r(m);return N||l({open:!0,limitType:"teamMembers"}),N},checkRecipeLimit:m=>{const N=n(m);return N||l({open:!0,limitType:"recipes"}),N},checkProductLimit:m=>{const N=a(m);return N||l({open:!0,limitType:"products"}),N},checkSupplierLimit:m=>{const N=i(m);return N||l({open:!0,limitType:"suppliers"}),N},checkFeature:(m,N)=>{const w=t(m);return w||l({open:!0,limitType:"feature",featureName:N}),w},upgradeModalProps:{open:o.open,onOpenChange:m=>l({...o,open:m}),limitType:o.limitType,currentPlan:e?.planType||"free",currentLimit:o.limitType==="teamMembers"?e?.maxTeamMembers||1:o.limitType==="recipes"?e?.maxRecipes||10:o.limitType==="products"?e?.maxProducts||20:e?.maxSuppliers||10,featureName:o.featureName}}}const ng=x.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Oe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));ng.displayName="Textarea";var g0="Checkbox",[mW]=bs(g0),[pW,O2]=mW(g0);function gW(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:a,disabled:i,form:o,name:l,onCheckedChange:u,required:f,value:h="on",internal_do_not_use_render:p}=e,[v,m]=Ea({prop:r,defaultProp:a??!1,onChange:u,caller:g0}),[N,w]=x.useState(null),[j,_]=x.useState(null),C=x.useRef(!1),k=N?!!o||!!N.closest("form"):!0,E={checked:v,disabled:i,setChecked:m,control:N,setControl:w,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:C,required:f,defaultChecked:Uu(a)?!1:a,isFormControl:k,bubbleInput:j,setBubbleInput:_};return s.jsx(pW,{scope:t,...E,children:vW(p)?p(E):n})}var jA="CheckboxTrigger",_A=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},a)=>{const{control:i,value:o,disabled:l,checked:u,required:f,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:v,isFormControl:m,bubbleInput:N}=O2(jA,e),w=Jt(a,h),j=x.useRef(u);return x.useEffect(()=>{const _=i?.form;if(_){const C=()=>p(j.current);return _.addEventListener("reset",C),()=>_.removeEventListener("reset",C)}},[i,p]),s.jsx(vt.button,{type:"button",role:"checkbox","aria-checked":Uu(u)?"mixed":u,"aria-required":f,"data-state":EA(u),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:w,onKeyDown:lt(t,_=>{_.key==="Enter"&&_.preventDefault()}),onClick:lt(r,_=>{p(C=>Uu(C)?!0:!C),N&&m&&(v.current=_.isPropagationStopped(),v.current||_.stopPropagation())})})});_A.displayName=jA;var M2=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:u,onCheckedChange:f,form:h,...p}=e;return s.jsx(gW,{__scopeCheckbox:r,checked:a,defaultChecked:i,disabled:l,required:o,onCheckedChange:f,name:n,form:h,value:u,internal_do_not_use_render:({isFormControl:v})=>s.jsxs(s.Fragment,{children:[s.jsx(_A,{...p,ref:t,__scopeCheckbox:r}),v&&s.jsx(CA,{__scopeCheckbox:r})]})})});M2.displayName=g0;var NA="CheckboxIndicator",SA=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...a}=e,i=O2(NA,r);return s.jsx(qs,{present:n||Uu(i.checked)||i.checked===!0,children:s.jsx(vt.span,{"data-state":EA(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t,style:{pointerEvents:"none",...e.style}})})});SA.displayName=NA;var kA="CheckboxBubbleInput",CA=x.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:a,checked:i,defaultChecked:o,required:l,disabled:u,name:f,value:h,form:p,bubbleInput:v,setBubbleInput:m}=O2(kA,e),N=Jt(r,m),w=rg(i),j=Kp(n);x.useEffect(()=>{const C=v;if(!C)return;const k=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(k,"checked").set,D=!a.current;if(w!==i&&I){const O=new Event("click",{bubbles:D});C.indeterminate=Uu(i),I.call(C,Uu(i)?!1:i),C.dispatchEvent(O)}},[v,w,i,a]);const _=x.useRef(Uu(i)?!1:i);return s.jsx(vt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??_.current,required:l,disabled:u,name:f,value:h,form:p,...t,tabIndex:-1,ref:N,style:{...t.style,...j,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CA.displayName=kA;function vW(e){return typeof e=="function"}function Uu(e){return e==="indeterminate"}function EA(e){return Uu(e)?"indeterminate":e?"checked":"unchecked"}const F2=x.forwardRef(({className:e,...t},r)=>s.jsx(M2,{ref:r,className:Oe("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(SA,{className:Oe("flex items-center justify-center text-current"),children:s.jsx(Na,{className:"h-4 w-4"})})}));F2.displayName=M2.displayName;const xW=["Dairy","Eggs","Fish","Shellfish","Tree Nuts","Peanuts","Wheat","Gluten","Soybeans","Sesame","Lupin","Sulphites","Mustard","Celery"],yW=["Vegan","Vegetarian","Halal","Kosher","Gluten-Free","Dairy-Free","Nut-Free"],wW=["Entrees","Mains","Desserts","Sides","Sauces","Beverages","Bakery","Other"];function bW({open:e,onOpenChange:t,onSuccess:r,recipeToEdit:n}){const[a,i]=x.useState({name:"",yieldAmount:"",yieldUnit:"servings",holdTimeDays:"3",category:"Mains",estimatedPrepMinutes:"30",serviceGapMinutes:"0"}),[o,l]=x.useState([]),[u,f]=x.useState(""),[h,p]=x.useState([]),[v,m]=x.useState(""),[N,w]=x.useState([]),[j,_]=x.useState(""),[C,k]=x.useState([]),[E,I]=x.useState(!1),{user:D}=Ga(),{toast:O}=Er();x.useEffect(()=>{n?(i({name:n.name||"",yieldAmount:n.yield_amount?.toString()||"",yieldUnit:n.yield_unit||"servings",holdTimeDays:n.hold_time_days?.toString()||"3",category:n.category||"Mains",estimatedPrepMinutes:n.estimated_prep_minutes?.toString()||"30",serviceGapMinutes:n.service_gap_minutes?.toString()||"0"}),l(n.ingredients||[]),p(n.prep_steps||[]),w(n.allergens||[]),k(n.dietary_requirements||[])):F()},[n,e]);const F=()=>{i({name:"",yieldAmount:"",yieldUnit:"servings",holdTimeDays:"3",category:"Mains",estimatedPrepMinutes:"30",serviceGapMinutes:"0"}),l([]),f(""),p([]),m(""),w([]),_(""),k([])},T=()=>{u.trim()&&(l([...o,u.trim()]),f(""))},z=se=>{l(o.filter((Y,W)=>W!==se))},U=()=>{v.trim()&&(p([...h,v.trim()]),m(""))},B=se=>{p(h.filter((Y,W)=>W!==se))},K=se=>{w(Y=>Y.includes(se)?Y.filter(W=>W!==se):[...Y,se])},V=()=>{j.trim()&&!N.includes(j.trim())&&(w([...N,j.trim()]),_(""))},de=async se=>{if(se.preventDefault(),!!D){if(!a.name.trim()||o.length===0||h.length===0){O({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}I(!0);try{const{data:Y}=await Ae.from("profiles").select("organization_id").eq("user_id",D.id).single(),W={name:a.name.trim(),ingredients:o,prep_steps:h,allergens:N,dietary_requirements:C,yield_amount:parseInt(a.yieldAmount)||1,yield_unit:a.yieldUnit,hold_time_days:parseInt(a.holdTimeDays)||3,category:a.category,estimated_prep_minutes:parseInt(a.estimatedPrepMinutes)||30,service_gap_minutes:parseInt(a.serviceGapMinutes)||0};let ee;if(n?ee=(await Ae.from("recipes").update(W).eq("id",n.id)).error:ee=(await Ae.from("recipes").insert({...W,created_by:D.id,organization_id:Y?.organization_id})).error,ee)throw ee;O({title:"Success",description:n?"Recipe updated successfully":"Recipe created successfully"}),F(),t(!1),r()}catch(Y){console.error("Error creating recipe:",Y),O({title:"Error",description:"Failed to create recipe",variant:"destructive"})}finally{I(!1)}}};return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx($s,{children:s.jsx(zs,{children:n?"Edit Recipe":"Create New Recipe"})}),s.jsxs("form",{onSubmit:de,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(ft,{htmlFor:"name",children:"Recipe Name *"}),s.jsx(St,{id:"name",value:a.name,onChange:se=>i({...a,name:se.target.value}),placeholder:"Enter recipe name",required:!0})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"category",children:"Category"}),s.jsxs(Nr,{value:a.category,onValueChange:se=>i({...a,category:se}),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsx(Cr,{className:"bg-background opacity-100",children:wW.map(se=>s.jsx(qe,{value:se,className:"bg-background opacity-100",children:se},se))})]})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"holdTime",children:"Hold Time (days) *"}),s.jsx(St,{id:"holdTime",type:"number",value:a.holdTimeDays,onChange:se=>i({...a,holdTimeDays:se.target.value}),placeholder:"3",min:"1",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"yield",children:"Yield *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{id:"yield",type:"number",value:a.yieldAmount,onChange:se=>i({...a,yieldAmount:se.target.value}),placeholder:"Amount",min:"1",required:!0}),s.jsxs(Nr,{value:a.yieldUnit,onValueChange:se=>i({...a,yieldUnit:se}),children:[s.jsx(_r,{className:"w-32",children:s.jsx(Sr,{})}),s.jsxs(Cr,{className:"bg-background opacity-100",children:[s.jsx(qe,{value:"servings",className:"bg-background opacity-100",children:"servings"}),s.jsx(qe,{value:"portions",className:"bg-background opacity-100",children:"portions"}),s.jsx(qe,{value:"litres",className:"bg-background opacity-100",children:"litres"}),s.jsx(qe,{value:"kg",className:"bg-background opacity-100",children:"kg"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"prepTime",children:"Est. Prep Time (minutes)"}),s.jsx(St,{id:"prepTime",type:"number",value:a.estimatedPrepMinutes,onChange:se=>i({...a,estimatedPrepMinutes:se.target.value}),placeholder:"30",min:"1"})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"serviceGap",children:"Service Gap (minutes)"}),s.jsx(St,{id:"serviceGap",type:"number",value:a.serviceGapMinutes,onChange:se=>i({...a,serviceGapMinutes:se.target.value}),placeholder:"0",min:"0"})]})]}),s.jsxs("div",{children:[s.jsx(ft,{children:"Ingredients *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(St,{value:u,onChange:se=>f(se.target.value),placeholder:"Add ingredient",onKeyPress:se=>se.key==="Enter"&&(se.preventDefault(),T())}),s.jsx(we,{type:"button",onClick:T,size:"sm",children:s.jsx(vn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((se,Y)=>s.jsxs(ut,{variant:"secondary",className:"gap-1",children:[se,s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>z(Y)})]},Y))})]}),s.jsxs("div",{children:[s.jsx(ft,{children:"Preparation Steps *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(ng,{value:v,onChange:se=>m(se.target.value),placeholder:"Add preparation step",className:"min-h-[60px]"}),s.jsx(we,{type:"button",onClick:U,size:"sm",children:s.jsx(vn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"space-y-2",children:h.map((se,Y)=>s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[s.jsxs("span",{className:"font-medium text-sm text-muted-foreground",children:[Y+1,"."]}),s.jsx("span",{className:"flex-1 text-sm",children:se}),s.jsx(hn,{className:"w-4 h-4 cursor-pointer text-muted-foreground hover:text-destructive",onClick:()=>B(Y)})]},Y))})]}),s.jsxs("div",{children:[s.jsx(ft,{children:"Allergens"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-4",children:xW.map(se=>s.jsx(we,{type:"button",variant:N.includes(se)?"default":"outline",size:"sm",onClick:()=>K(se),children:se},se))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{value:j,onChange:se=>_(se.target.value),placeholder:"Add custom allergen",onKeyPress:se=>se.key==="Enter"&&(se.preventDefault(),V())}),s.jsx(we,{type:"button",onClick:V,size:"sm",variant:"outline",children:s.jsx(vn,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(ft,{children:"Dietary Requirements"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:yW.map(se=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(F2,{id:se,checked:C.includes(se),onCheckedChange:Y=>{k(Y?[...C,se]:C.filter(W=>W!==se))}}),s.jsx(ft,{htmlFor:se,className:"text-sm font-normal",children:se})]},se))})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(we,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:E,children:"Cancel"}),s.jsx(we,{type:"submit",disabled:E,children:E?n?"Updating...":"Creating...":n?"Update Recipe":"Create Recipe"})]})]})]})})}var PA="AlertDialog",[jW]=bs(PA,[pP]),qc=pP(),AA=e=>{const{__scopeAlertDialog:t,...r}=e,n=qc(t);return s.jsx(C2,{...n,...r,modal:!0})};AA.displayName=PA;var _W="AlertDialogTrigger",NW=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=qc(r);return s.jsx(yV,{...a,...n,ref:t})});NW.displayName=_W;var SW="AlertDialogPortal",TA=e=>{const{__scopeAlertDialog:t,...r}=e,n=qc(t);return s.jsx(E2,{...n,...r})};TA.displayName=SW;var kW="AlertDialogOverlay",RA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=qc(r);return s.jsx(u0,{...a,...n,ref:t})});RA.displayName=kW;var kh="AlertDialogContent",[CW,EW]=jW(kh),PW=dk("AlertDialogContent"),LA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...a}=e,i=qc(r),o=x.useRef(null),l=Jt(t,o),u=x.useRef(null);return s.jsx(pV,{contentName:kh,titleName:DA,docsSlug:"alert-dialog",children:s.jsx(CW,{scope:r,cancelRef:u,children:s.jsxs(d0,{role:"alertdialog",...i,...a,ref:l,onOpenAutoFocus:lt(a.onOpenAutoFocus,f=>{f.preventDefault(),u.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[s.jsx(PW,{children:n}),s.jsx(TW,{contentRef:o})]})})})});LA.displayName=kh;var DA="AlertDialogTitle",IA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=qc(r);return s.jsx(P2,{...a,...n,ref:t})});IA.displayName=DA;var OA="AlertDialogDescription",MA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=qc(r);return s.jsx(A2,{...a,...n,ref:t})});MA.displayName=OA;var AW="AlertDialogAction",FA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,a=qc(r);return s.jsx(T2,{...a,...n,ref:t})});FA.displayName=AW;var BA="AlertDialogCancel",UA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:a}=EW(BA,r),i=qc(r),o=Jt(t,a);return s.jsx(T2,{...i,...n,ref:o})});UA.displayName=BA;var TW=({contentRef:e})=>{const t=`\`${kh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${kh}\` by passing a \`${OA}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${kh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},RW=AA,LW=TA,$A=RA,zA=LA,qA=FA,VA=UA,WA=IA,HA=MA;const Tl=RW,DW=LW,GA=x.forwardRef(({className:e,...t},r)=>s.jsx($A,{className:Oe("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));GA.displayName=$A.displayName;const Uo=x.forwardRef(({className:e,...t},r)=>s.jsxs(DW,{children:[s.jsx(GA,{}),s.jsx(zA,{ref:r,className:Oe("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));Uo.displayName=zA.displayName;const $o=({className:e,...t})=>s.jsx("div",{className:Oe("flex flex-col space-y-2 text-center sm:text-left",e),...t});$o.displayName="AlertDialogHeader";const zo=({className:e,...t})=>s.jsx("div",{className:Oe("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});zo.displayName="AlertDialogFooter";const qo=x.forwardRef(({className:e,...t},r)=>s.jsx(WA,{ref:r,className:Oe("text-lg font-semibold",e),...t}));qo.displayName=WA.displayName;const Rl=x.forwardRef(({className:e,...t},r)=>s.jsx(HA,{ref:r,className:Oe("text-sm text-muted-foreground",e),...t}));Rl.displayName=HA.displayName;const Vo=x.forwardRef(({className:e,...t},r)=>s.jsx(qA,{ref:r,className:Oe(Cp(),e),...t}));Vo.displayName=qA.displayName;const Wo=x.forwardRef(({className:e,...t},r)=>s.jsx(VA,{ref:r,className:Oe(Cp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));Wo.displayName=VA.displayName;var oh={},Xy,_N;function IW(){return _N||(_N=1,Xy=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Xy}var e1={},Pu={},NN;function xf(){if(NN)return Pu;NN=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return Pu.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},Pu.getSymbolTotalCodewords=function(n){return t[n]},Pu.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},Pu.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');e=n},Pu.isKanjiModeEnabled=function(){return typeof e<"u"},Pu.toSJIS=function(n){return e(n)},Pu}var t1={},SN;function B2(){return SN||(SN=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,a){if(e.isValid(n))return n;try{return t(n)}catch{return a}}})(t1)),t1}var r1,kN;function OW(){if(kN)return r1;kN=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let n=0;n<r;n++)this.putBit((t>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},r1=e,r1}var n1,CN;function MW(){if(CN)return n1;CN=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,r,n,a){const i=t*this.size+r;this.data[i]=n,a&&(this.reservedBit[i]=!0)},e.prototype.get=function(t,r){return this.data[t*this.size+r]},e.prototype.xor=function(t,r,n){this.data[t*this.size+r]^=n},e.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]},n1=e,n1}var s1={},EN;function FW(){return EN||(EN=1,(function(e){const t=xf().getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const a=Math.floor(n/7)+2,i=t(n),o=i===145?26:Math.ceil((i-13)/(2*a-2))*2,l=[i-7];for(let u=1;u<a-1;u++)l[u]=l[u-1]-o;return l.push(6),l.reverse()},e.getPositions=function(n){const a=[],i=e.getRowColCoords(n),o=i.length;for(let l=0;l<o;l++)for(let u=0;u<o;u++)l===0&&u===0||l===0&&u===o-1||l===o-1&&u===0||a.push([i[l],i[u]]);return a}})(s1)),s1}var a1={},PN;function BW(){if(PN)return a1;PN=1;const e=xf().getSymbolSize,t=7;return a1.getPositions=function(n){const a=e(n);return[[0,0],[a-t,0],[0,a-t]]},a1}var i1={},AN;function UW(){return AN||(AN=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(a){return a!=null&&a!==""&&!isNaN(a)&&a>=0&&a<=7},e.from=function(a){return e.isValid(a)?parseInt(a,10):void 0},e.getPenaltyN1=function(a){const i=a.size;let o=0,l=0,u=0,f=null,h=null;for(let p=0;p<i;p++){l=u=0,f=h=null;for(let v=0;v<i;v++){let m=a.get(p,v);m===f?l++:(l>=5&&(o+=t.N1+(l-5)),f=m,l=1),m=a.get(v,p),m===h?u++:(u>=5&&(o+=t.N1+(u-5)),h=m,u=1)}l>=5&&(o+=t.N1+(l-5)),u>=5&&(o+=t.N1+(u-5))}return o},e.getPenaltyN2=function(a){const i=a.size;let o=0;for(let l=0;l<i-1;l++)for(let u=0;u<i-1;u++){const f=a.get(l,u)+a.get(l,u+1)+a.get(l+1,u)+a.get(l+1,u+1);(f===4||f===0)&&o++}return o*t.N2},e.getPenaltyN3=function(a){const i=a.size;let o=0,l=0,u=0;for(let f=0;f<i;f++){l=u=0;for(let h=0;h<i;h++)l=l<<1&2047|a.get(f,h),h>=10&&(l===1488||l===93)&&o++,u=u<<1&2047|a.get(h,f),h>=10&&(u===1488||u===93)&&o++}return o*t.N3},e.getPenaltyN4=function(a){let i=0;const o=a.data.length;for(let u=0;u<o;u++)i+=a.data[u];return Math.abs(Math.ceil(i*100/o/5)-10)*t.N4};function r(n,a,i){switch(n){case e.Patterns.PATTERN000:return(a+i)%2===0;case e.Patterns.PATTERN001:return a%2===0;case e.Patterns.PATTERN010:return i%3===0;case e.Patterns.PATTERN011:return(a+i)%3===0;case e.Patterns.PATTERN100:return(Math.floor(a/2)+Math.floor(i/3))%2===0;case e.Patterns.PATTERN101:return a*i%2+a*i%3===0;case e.Patterns.PATTERN110:return(a*i%2+a*i%3)%2===0;case e.Patterns.PATTERN111:return(a*i%3+(a+i)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(a,i){const o=i.size;for(let l=0;l<o;l++)for(let u=0;u<o;u++)i.isReserved(u,l)||i.xor(u,l,r(a,u,l))},e.getBestMask=function(a,i){const o=Object.keys(e.Patterns).length;let l=0,u=1/0;for(let f=0;f<o;f++){i(f),e.applyMask(f,a);const h=e.getPenaltyN1(a)+e.getPenaltyN2(a)+e.getPenaltyN3(a)+e.getPenaltyN4(a);e.applyMask(f,a),h<u&&(u=h,l=f)}return l}})(i1)),i1}var xv={},TN;function KA(){if(TN)return xv;TN=1;const e=B2(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return xv.getBlocksCount=function(a,i){switch(i){case e.L:return t[(a-1)*4+0];case e.M:return t[(a-1)*4+1];case e.Q:return t[(a-1)*4+2];case e.H:return t[(a-1)*4+3];default:return}},xv.getTotalCodewordsCount=function(a,i){switch(i){case e.L:return r[(a-1)*4+0];case e.M:return r[(a-1)*4+1];case e.Q:return r[(a-1)*4+2];case e.H:return r[(a-1)*4+3];default:return}},xv}var o1={},Vm={},RN;function $W(){if(RN)return Vm;RN=1;const e=new Uint8Array(512),t=new Uint8Array(256);return(function(){let n=1;for(let a=0;a<255;a++)e[a]=n,t[n]=a,n<<=1,n&256&&(n^=285);for(let a=255;a<512;a++)e[a]=e[a-255]})(),Vm.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},Vm.exp=function(n){return e[n]},Vm.mul=function(n,a){return n===0||a===0?0:e[t[n]+t[a]]},Vm}var LN;function zW(){return LN||(LN=1,(function(e){const t=$W();e.mul=function(n,a){const i=new Uint8Array(n.length+a.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<a.length;l++)i[o+l]^=t.mul(n[o],a[l]);return i},e.mod=function(n,a){let i=new Uint8Array(n);for(;i.length-a.length>=0;){const o=i[0];for(let u=0;u<a.length;u++)i[u]^=t.mul(a[u],o);let l=0;for(;l<i.length&&i[l]===0;)l++;i=i.slice(l)}return i},e.generateECPolynomial=function(n){let a=new Uint8Array([1]);for(let i=0;i<n;i++)a=e.mul(a,new Uint8Array([1,t.exp(i)]));return a}})(o1)),o1}var l1,DN;function qW(){if(DN)return l1;DN=1;const e=zW();function t(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const a=new Uint8Array(n.length+this.degree);a.set(n);const i=e.mod(a,this.genPoly),o=this.degree-i.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(i,o),l}return i},l1=t,l1}var c1={},u1={},d1={},IN;function YA(){return IN||(IN=1,d1.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),d1}var wl={},ON;function QA(){if(ON)return wl;ON=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;wl.KANJI=new RegExp(r,"g"),wl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),wl.BYTE=new RegExp(n,"g"),wl.NUMERIC=new RegExp(e,"g"),wl.ALPHANUMERIC=new RegExp(t,"g");const a=new RegExp("^"+r+"$"),i=new RegExp("^"+e+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return wl.testKanji=function(u){return a.test(u)},wl.testNumeric=function(u){return i.test(u)},wl.testAlphanumeric=function(u){return o.test(u)},wl}var MN;function yf(){return MN||(MN=1,(function(e){const t=YA(),r=QA();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(i,o){if(!i.ccBits)throw new Error("Invalid mode: "+i);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?i.ccBits[0]:o<27?i.ccBits[1]:i.ccBits[2]},e.getBestModeForData=function(i){return r.testNumeric(i)?e.NUMERIC:r.testAlphanumeric(i)?e.ALPHANUMERIC:r.testKanji(i)?e.KANJI:e.BYTE},e.toString=function(i){if(i&&i.id)return i.id;throw new Error("Invalid mode")},e.isValid=function(i){return i&&i.bit&&i.ccBits};function n(a){if(typeof a!="string")throw new Error("Param is not a string");switch(a.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+a)}}e.from=function(i,o){if(e.isValid(i))return i;try{return n(i)}catch{return o}}})(u1)),u1}var FN;function VW(){return FN||(FN=1,(function(e){const t=xf(),r=KA(),n=B2(),a=yf(),i=YA(),o=7973,l=t.getBCHDigit(o);function u(v,m,N){for(let w=1;w<=40;w++)if(m<=e.getCapacity(w,N,v))return w}function f(v,m){return a.getCharCountIndicator(v,m)+4}function h(v,m){let N=0;return v.forEach(function(w){const j=f(w.mode,m);N+=j+w.getBitsLength()}),N}function p(v,m){for(let N=1;N<=40;N++)if(h(v,N)<=e.getCapacity(N,m,a.MIXED))return N}e.from=function(m,N){return i.isValid(m)?parseInt(m,10):N},e.getCapacity=function(m,N,w){if(!i.isValid(m))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=a.BYTE);const j=t.getSymbolTotalCodewords(m),_=r.getTotalCodewordsCount(m,N),C=(j-_)*8;if(w===a.MIXED)return C;const k=C-f(w,m);switch(w){case a.NUMERIC:return Math.floor(k/10*3);case a.ALPHANUMERIC:return Math.floor(k/11*2);case a.KANJI:return Math.floor(k/13);case a.BYTE:default:return Math.floor(k/8)}},e.getBestVersionForData=function(m,N){let w;const j=n.from(N,n.M);if(Array.isArray(m)){if(m.length>1)return p(m,j);if(m.length===0)return 1;w=m[0]}else w=m;return u(w.mode,w.getLength(),j)},e.getEncodedBits=function(m){if(!i.isValid(m)||m<7)throw new Error("Invalid QR Code version");let N=m<<12;for(;t.getBCHDigit(N)-l>=0;)N^=o<<t.getBCHDigit(N)-l;return m<<12|N}})(c1)),c1}var f1={},BN;function WW(){if(BN)return f1;BN=1;const e=xf(),t=1335,r=21522,n=e.getBCHDigit(t);return f1.getEncodedBits=function(i,o){const l=i.bit<<3|o;let u=l<<10;for(;e.getBCHDigit(u)-n>=0;)u^=t<<e.getBCHDigit(u)-n;return(l<<10|u)^r},f1}var h1={},m1,UN;function HW(){if(UN)return m1;UN=1;const e=yf();function t(r){this.mode=e.NUMERIC,this.data=r.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let a,i,o;for(a=0;a+3<=this.data.length;a+=3)i=this.data.substr(a,3),o=parseInt(i,10),n.put(o,10);const l=this.data.length-a;l>0&&(i=this.data.substr(a),o=parseInt(i,10),n.put(o,l*3+1))},m1=t,m1}var p1,$N;function GW(){if($N)return p1;$N=1;const e=yf(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=e.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(a){return 11*Math.floor(a/2)+6*(a%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(a){let i;for(i=0;i+2<=this.data.length;i+=2){let o=t.indexOf(this.data[i])*45;o+=t.indexOf(this.data[i+1]),a.put(o,11)}this.data.length%2&&a.put(t.indexOf(this.data[i]),6)},p1=r,p1}var g1,zN;function KW(){if(zN)return g1;zN=1;const e=yf();function t(r){this.mode=e.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){for(let n=0,a=this.data.length;n<a;n++)r.put(this.data[n],8)},g1=t,g1}var v1,qN;function YW(){if(qN)return v1;qN=1;const e=yf(),t=xf();function r(n){this.mode=e.KANJI,this.data=n}return r.getBitsLength=function(a){return a*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let a;for(a=0;a<this.data.length;a++){let i=t.toSJIS(this.data[a]);if(i>=33088&&i<=40956)i-=33088;else if(i>=57408&&i<=60351)i-=49472;else throw new Error("Invalid SJIS character: "+this.data[a]+`
Make sure your charset is UTF-8`);i=(i>>>8&255)*192+(i&255),n.put(i,13)}},v1=r,v1}var x1={exports:{}},VN;function QW(){return VN||(VN=1,(function(e){var t={single_source_shortest_paths:function(r,n,a){var i={},o={};o[n]=0;var l=t.PriorityQueue.make();l.push(n,0);for(var u,f,h,p,v,m,N,w,j;!l.empty();){u=l.pop(),f=u.value,p=u.cost,v=r[f]||{};for(h in v)v.hasOwnProperty(h)&&(m=v[h],N=p+m,w=o[h],j=typeof o[h]>"u",(j||w>N)&&(o[h]=N,l.push(h,N),i[h]=f))}if(typeof a<"u"&&typeof o[a]>"u"){var _=["Could not find a path from ",n," to ",a,"."].join("");throw new Error(_)}return i},extract_shortest_path_from_predecessor_list:function(r,n){for(var a=[],i=n;i;)a.push(i),r[i],i=r[i];return a.reverse(),a},find_path:function(r,n,a){var i=t.single_source_shortest_paths(r,n,a);return t.extract_shortest_path_from_predecessor_list(i,a)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,a={},i;r=r||{};for(i in n)n.hasOwnProperty(i)&&(a[i]=n[i]);return a.queue=[],a.sorter=r.sorter||n.default_sorter,a},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var a={value:r,cost:n};this.queue.push(a),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(x1)),x1.exports}var WN;function JW(){return WN||(WN=1,(function(e){const t=yf(),r=HW(),n=GW(),a=KW(),i=YW(),o=QA(),l=xf(),u=QW();function f(_){return unescape(encodeURIComponent(_)).length}function h(_,C,k){const E=[];let I;for(;(I=_.exec(k))!==null;)E.push({data:I[0],index:I.index,mode:C,length:I[0].length});return E}function p(_){const C=h(o.NUMERIC,t.NUMERIC,_),k=h(o.ALPHANUMERIC,t.ALPHANUMERIC,_);let E,I;return l.isKanjiModeEnabled()?(E=h(o.BYTE,t.BYTE,_),I=h(o.KANJI,t.KANJI,_)):(E=h(o.BYTE_KANJI,t.BYTE,_),I=[]),C.concat(k,E,I).sort(function(O,F){return O.index-F.index}).map(function(O){return{data:O.data,mode:O.mode,length:O.length}})}function v(_,C){switch(C){case t.NUMERIC:return r.getBitsLength(_);case t.ALPHANUMERIC:return n.getBitsLength(_);case t.KANJI:return i.getBitsLength(_);case t.BYTE:return a.getBitsLength(_)}}function m(_){return _.reduce(function(C,k){const E=C.length-1>=0?C[C.length-1]:null;return E&&E.mode===k.mode?(C[C.length-1].data+=k.data,C):(C.push(k),C)},[])}function N(_){const C=[];for(let k=0;k<_.length;k++){const E=_[k];switch(E.mode){case t.NUMERIC:C.push([E,{data:E.data,mode:t.ALPHANUMERIC,length:E.length},{data:E.data,mode:t.BYTE,length:E.length}]);break;case t.ALPHANUMERIC:C.push([E,{data:E.data,mode:t.BYTE,length:E.length}]);break;case t.KANJI:C.push([E,{data:E.data,mode:t.BYTE,length:f(E.data)}]);break;case t.BYTE:C.push([{data:E.data,mode:t.BYTE,length:f(E.data)}])}}return C}function w(_,C){const k={},E={start:{}};let I=["start"];for(let D=0;D<_.length;D++){const O=_[D],F=[];for(let T=0;T<O.length;T++){const z=O[T],U=""+D+T;F.push(U),k[U]={node:z,lastCount:0},E[U]={};for(let B=0;B<I.length;B++){const K=I[B];k[K]&&k[K].node.mode===z.mode?(E[K][U]=v(k[K].lastCount+z.length,z.mode)-v(k[K].lastCount,z.mode),k[K].lastCount+=z.length):(k[K]&&(k[K].lastCount=z.length),E[K][U]=v(z.length,z.mode)+4+t.getCharCountIndicator(z.mode,C))}}I=F}for(let D=0;D<I.length;D++)E[I[D]].end=0;return{map:E,table:k}}function j(_,C){let k;const E=t.getBestModeForData(_);if(k=t.from(C,E),k!==t.BYTE&&k.bit<E.bit)throw new Error('"'+_+'" cannot be encoded with mode '+t.toString(k)+`.
 Suggested mode is: `+t.toString(E));switch(k===t.KANJI&&!l.isKanjiModeEnabled()&&(k=t.BYTE),k){case t.NUMERIC:return new r(_);case t.ALPHANUMERIC:return new n(_);case t.KANJI:return new i(_);case t.BYTE:return new a(_)}}e.fromArray=function(C){return C.reduce(function(k,E){return typeof E=="string"?k.push(j(E,null)):E.data&&k.push(j(E.data,E.mode)),k},[])},e.fromString=function(C,k){const E=p(C,l.isKanjiModeEnabled()),I=N(E),D=w(I,k),O=u.find_path(D.map,"start","end"),F=[];for(let T=1;T<O.length-1;T++)F.push(D.table[O[T]].node);return e.fromArray(m(F))},e.rawSplit=function(C){return e.fromArray(p(C,l.isKanjiModeEnabled()))}})(h1)),h1}var HN;function ZW(){if(HN)return e1;HN=1;const e=xf(),t=B2(),r=OW(),n=MW(),a=FW(),i=BW(),o=UW(),l=KA(),u=qW(),f=VW(),h=WW(),p=yf(),v=JW();function m(D,O){const F=D.size,T=i.getPositions(O);for(let z=0;z<T.length;z++){const U=T[z][0],B=T[z][1];for(let K=-1;K<=7;K++)if(!(U+K<=-1||F<=U+K))for(let V=-1;V<=7;V++)B+V<=-1||F<=B+V||(K>=0&&K<=6&&(V===0||V===6)||V>=0&&V<=6&&(K===0||K===6)||K>=2&&K<=4&&V>=2&&V<=4?D.set(U+K,B+V,!0,!0):D.set(U+K,B+V,!1,!0))}}function N(D){const O=D.size;for(let F=8;F<O-8;F++){const T=F%2===0;D.set(F,6,T,!0),D.set(6,F,T,!0)}}function w(D,O){const F=a.getPositions(O);for(let T=0;T<F.length;T++){const z=F[T][0],U=F[T][1];for(let B=-2;B<=2;B++)for(let K=-2;K<=2;K++)B===-2||B===2||K===-2||K===2||B===0&&K===0?D.set(z+B,U+K,!0,!0):D.set(z+B,U+K,!1,!0)}}function j(D,O){const F=D.size,T=f.getEncodedBits(O);let z,U,B;for(let K=0;K<18;K++)z=Math.floor(K/3),U=K%3+F-8-3,B=(T>>K&1)===1,D.set(z,U,B,!0),D.set(U,z,B,!0)}function _(D,O,F){const T=D.size,z=h.getEncodedBits(O,F);let U,B;for(U=0;U<15;U++)B=(z>>U&1)===1,U<6?D.set(U,8,B,!0):U<8?D.set(U+1,8,B,!0):D.set(T-15+U,8,B,!0),U<8?D.set(8,T-U-1,B,!0):U<9?D.set(8,15-U-1+1,B,!0):D.set(8,15-U-1,B,!0);D.set(T-8,8,1,!0)}function C(D,O){const F=D.size;let T=-1,z=F-1,U=7,B=0;for(let K=F-1;K>0;K-=2)for(K===6&&K--;;){for(let V=0;V<2;V++)if(!D.isReserved(z,K-V)){let de=!1;B<O.length&&(de=(O[B]>>>U&1)===1),D.set(z,K-V,de),U--,U===-1&&(B++,U=7)}if(z+=T,z<0||F<=z){z-=T,T=-T;break}}}function k(D,O,F){const T=new r;F.forEach(function(V){T.put(V.mode.bit,4),T.put(V.getLength(),p.getCharCountIndicator(V.mode,D)),V.write(T)});const z=e.getSymbolTotalCodewords(D),U=l.getTotalCodewordsCount(D,O),B=(z-U)*8;for(T.getLengthInBits()+4<=B&&T.put(0,4);T.getLengthInBits()%8!==0;)T.putBit(0);const K=(B-T.getLengthInBits())/8;for(let V=0;V<K;V++)T.put(V%2?17:236,8);return E(T,D,O)}function E(D,O,F){const T=e.getSymbolTotalCodewords(O),z=l.getTotalCodewordsCount(O,F),U=T-z,B=l.getBlocksCount(O,F),K=T%B,V=B-K,de=Math.floor(T/B),se=Math.floor(U/B),Y=se+1,W=de-se,ee=new u(W);let ge=0;const re=new Array(B),L=new Array(B);let q=0;const J=new Uint8Array(D.buffer);for(let le=0;le<B;le++){const ye=le<V?se:Y;re[le]=J.slice(ge,ge+ye),L[le]=ee.encode(re[le]),ge+=ye,q=Math.max(q,ye)}const ne=new Uint8Array(T);let ue=0,ie,oe;for(ie=0;ie<q;ie++)for(oe=0;oe<B;oe++)ie<re[oe].length&&(ne[ue++]=re[oe][ie]);for(ie=0;ie<W;ie++)for(oe=0;oe<B;oe++)ne[ue++]=L[oe][ie];return ne}function I(D,O,F,T){let z;if(Array.isArray(D))z=v.fromArray(D);else if(typeof D=="string"){let de=O;if(!de){const se=v.rawSplit(D);de=f.getBestVersionForData(se,F)}z=v.fromString(D,de||40)}else throw new Error("Invalid data");const U=f.getBestVersionForData(z,F);if(!U)throw new Error("The amount of data is too big to be stored in a QR Code");if(!O)O=U;else if(O<U)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+U+`.
`);const B=k(O,F,z),K=e.getSymbolSize(O),V=new n(K);return m(V,O),N(V),w(V,O),_(V,F,0),O>=7&&j(V,O),C(V,B),isNaN(T)&&(T=o.getBestMask(V,_.bind(null,V,F))),o.applyMask(T,V),_(V,F,T),{modules:V,version:O,errorCorrectionLevel:F,maskPattern:T,segments:z}}return e1.create=function(O,F){if(typeof O>"u"||O==="")throw new Error("No input text");let T=t.M,z,U;return typeof F<"u"&&(T=t.from(F.errorCorrectionLevel,t.M),z=f.from(F.version),U=o.from(F.maskPattern),F.toSJISFunc&&e.setToSJISFunction(F.toSJISFunc)),I(O,z,T,U)},e1}var y1={},w1={},GN;function JA(){return GN||(GN=1,(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(i){return[i,i]}))),n.length===6&&n.push("F","F");const a=parseInt(n.join(""),16);return{r:a>>24&255,g:a>>16&255,b:a>>8&255,a:a&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const a=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,i=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:i,scale:i?4:o,margin:a,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,a){return a.width&&a.width>=n+a.margin*2?a.width/(n+a.margin*2):a.scale},e.getImageWidth=function(n,a){const i=e.getScale(n,a);return Math.floor((n+a.margin*2)*i)},e.qrToImageData=function(n,a,i){const o=a.modules.size,l=a.modules.data,u=e.getScale(o,i),f=Math.floor((o+i.margin*2)*u),h=i.margin*u,p=[i.color.light,i.color.dark];for(let v=0;v<f;v++)for(let m=0;m<f;m++){let N=(v*f+m)*4,w=i.color.light;if(v>=h&&m>=h&&v<f-h&&m<f-h){const j=Math.floor((v-h)/u),_=Math.floor((m-h)/u);w=p[l[j*o+_]?1:0]}n[N++]=w.r,n[N++]=w.g,n[N++]=w.b,n[N]=w.a}}})(w1)),w1}var KN;function XW(){return KN||(KN=1,(function(e){const t=JA();function r(a,i,o){a.clearRect(0,0,i.width,i.height),i.style||(i.style={}),i.height=o,i.width=o,i.style.height=o+"px",i.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(i,o,l){let u=l,f=o;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),o||(f=n()),u=t.getOptions(u);const h=t.getImageWidth(i.modules.size,u),p=f.getContext("2d"),v=p.createImageData(h,h);return t.qrToImageData(v.data,i,u),r(p,f,h),p.putImageData(v,0,0),f},e.renderToDataURL=function(i,o,l){let u=l;typeof u>"u"&&(!o||!o.getContext)&&(u=o,o=void 0),u||(u={});const f=e.render(i,o,u),h=u.type||"image/png",p=u.rendererOpts||{};return f.toDataURL(h,p.quality)}})(y1)),y1}var b1={},YN;function eH(){if(YN)return b1;YN=1;const e=JA();function t(a,i){const o=a.a/255,l=i+'="'+a.hex+'"';return o<1?l+" "+i+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function r(a,i,o){let l=a+i;return typeof o<"u"&&(l+=" "+o),l}function n(a,i,o){let l="",u=0,f=!1,h=0;for(let p=0;p<a.length;p++){const v=Math.floor(p%i),m=Math.floor(p/i);!v&&!f&&(f=!0),a[p]?(h++,p>0&&v>0&&a[p-1]||(l+=f?r("M",v+o,.5+m+o):r("m",u,0),u=0,f=!1),v+1<i&&a[p+1]||(l+=r("h",h),h=0)):u++}return l}return b1.render=function(i,o,l){const u=e.getOptions(o),f=i.modules.size,h=i.modules.data,p=f+u.margin*2,v=u.color.light.a?"<path "+t(u.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",m="<path "+t(u.color.dark,"stroke")+' d="'+n(h,f,u.margin)+'"/>',N='viewBox="0 0 '+p+" "+p+'"',j='<svg xmlns="http://www.w3.org/2000/svg" '+(u.width?'width="'+u.width+'" height="'+u.width+'" ':"")+N+' shape-rendering="crispEdges">'+v+m+`</svg>
`;return typeof l=="function"&&l(null,j),j},b1}var QN;function tH(){if(QN)return oh;QN=1;const e=IW(),t=ZW(),r=XW(),n=eH();function a(i,o,l,u,f){const h=[].slice.call(arguments,1),p=h.length,v=typeof h[p-1]=="function";if(!v&&!e())throw new Error("Callback required as last argument");if(v){if(p<2)throw new Error("Too few arguments provided");p===2?(f=l,l=o,o=u=void 0):p===3&&(o.getContext&&typeof f>"u"?(f=u,u=void 0):(f=u,u=l,l=o,o=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(l=o,o=u=void 0):p===2&&!o.getContext&&(u=l,l=o,o=void 0),new Promise(function(m,N){try{const w=t.create(l,u);m(i(w,o,u))}catch(w){N(w)}})}try{const m=t.create(l,u);f(null,i(m,o,u))}catch(m){f(m)}}return oh.create=t.create,oh.toCanvas=a.bind(null,r.render),oh.toDataURL=a.bind(null,r.renderToDataURL),oh.toString=a.bind(null,function(i,o,l){return n.render(i,l)}),oh}var rH=tH();const ZA=Ax(rH),nH=async(e,t=1)=>{const r=JSON.stringify({recipeId:e.recipeId,recipeName:e.recipeName,batchSize:e.batchSize,calculatedYield:e.calculatedYield,yieldUnit:e.yieldUnit,expiryDate:e.expiryDate,allergens:e.allergens,dietaryRequirements:e.dietaryRequirements}),n=await ZA.toDataURL(r,{width:120,margin:1}),a=l=>new Date(l).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}),i=`
    <div style="
      width: 4in;
      height: 3in;
      border: 2px solid #000;
      padding: 12px;
      font-family: Arial, sans-serif;
      font-size: 12px;
      line-height: 1.3;
      box-sizing: border-box;
      page-break-after: always;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    ">
      <!-- Header with Recipe Name and QR Code -->
      <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
        <div style="flex: 1; margin-right: 10px;">
          <h2 style="margin: 0; font-size: 16px; font-weight: bold; text-transform: uppercase;">
            ${e.recipeName}
          </h2>
          <div style="font-size: 11px; color: #666; margin-top: 2px;">
            Batch: ${e.batchSize} ${e.batchUnit}
          </div>
        </div>
        <img src="${n}" alt="QR Code" style="width: 60px; height: 60px;" />
      </div>

      <!-- Yield Information -->
      <div style="margin-bottom: 8px;">
        <div style="font-weight: bold; font-size: 14px;">
          YIELD: ${e.calculatedYield} ${e.yieldUnit}
        </div>
      </div>

      <!-- Date Information -->
      <div style="margin-bottom: 8px;">
        <div style="display: flex; justify-content: space-between;">
          <span><strong>Prepared:</strong> ${a(e.preparedDate)}</span>
          <span><strong>Use By:</strong> ${a(e.expiryDate)}</span>
        </div>
      </div>

      <!-- Allergens Section -->
      ${e.allergens.length>0?`
        <div style="margin-bottom: 8px;">
          <div style="font-weight: bold; color: #d32f2f; margin-bottom: 4px;">
             ALLERGENS:
          </div>
          <div style="background: #ffebee; padding: 4px 6px; border-radius: 4px; font-weight: bold; color: #d32f2f;">
            ${e.allergens.join(", ").toUpperCase()}
          </div>
        </div>
      `:""}

      <!-- Dietary Requirements -->
      ${e.dietaryRequirements.length>0?`
        <div style="margin-bottom: 8px;">
          <div style="font-weight: bold; color: #2e7d32; margin-bottom: 4px;">
             DIETARY:
          </div>
          <div style="background: #e8f5e8; padding: 4px 6px; border-radius: 4px; color: #2e7d32;">
            ${e.dietaryRequirements.join(", ")}
          </div>
        </div>
      `:""}

      <!-- Footer -->
      <div style="font-size: 10px; color: #666; text-align: center; border-top: 1px solid #ddd; padding-top: 4px;">
        Prepared by: ${e.staffName}
      </div>
    </div>
  `;return`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Food Safety Labels</title>
      <style>
        @page {
          margin: 0.5in;
          size: letter;
        }
        body {
          margin: 0;
          padding: 0;
          font-family: Arial, sans-serif;
        }
        @media print {
          .no-print {
            display: none;
          }
        }
      </style>
    </head>
    <body>
      ${Array(t).fill(i).join(`
`)}
    </body>
    </html>
  `};function sH({open:e,onOpenChange:t,recipe:r}){const[n,a]=x.useState("details"),[i,o]=x.useState(1),[l,u]=x.useState("batch"),[f,h]=x.useState(""),[p,v]=x.useState([]),[m,N]=x.useState(""),[w,j]=x.useState(!1),[_,C]=x.useState(""),[k,E]=x.useState(null),[I,D]=x.useState(1),{user:O}=Ga(),{toast:F}=Er(),{addTimer:T,pauseTimer:z,resumeTimer:U,removeTimer:B,getTimerById:K}=x2();x.useEffect(()=>{e&&(a("details"),o(1),u("batch"),h(""),N(""),C(""),E(null),D(1),V())},[e]);const V=x.useCallback(async()=>{try{const{data:q}=await Ae.from("profiles").select("organization_id").eq("user_id",O?.id).single(),{data:J,error:ne}=await Ae.from("staff").select("id, name, role").eq("is_active",!0).eq("organization_id",q?.organization_id);if(ne)throw ne;v(J||[])}catch(q){console.error("Error fetching staff:",q)}},[O?.id]),de=m?K(m):null,se=de?.isRunning||!1,Y=de?.elapsedTime||0,W=async()=>{if(!(!f||!r))try{const{data:q}=await Ae.from("profiles").select("organization_id").eq("user_id",O?.id).single(),J=p.find(oe=>oe.id===f);if(!J)return;const{data:ne,error:ue}=await Ae.from("prep_sessions").insert({recipe_id:r.id,staff_id:f,batch_size:i,organization_id:q?.organization_id,started_at:new Date().toISOString()}).select().single();if(ue)throw ue;const ie=T({recipeId:r.id,recipeName:r.name,staffId:f,staffName:J.name,startTime:Date.now(),isRunning:!0,batchSize:i,batchUnit:l,sessionId:ne.id});C(ne.id),N(ie),a("timer"),F({title:"Preparation Started",description:`${r.name} preparation timer started`})}catch(q){console.error("Error starting prep:",q),F({title:"Error",description:"Failed to start preparation",variant:"destructive"})}},ee=async()=>{if(!(!r||!_||!m))try{const q=new Date,J=new Date(q);J.setDate(J.getDate()+(r.hold_time_days||3));const{data:ne}=await Ae.from("profiles").select("organization_id").eq("user_id",O?.id).single();await Ae.from("prep_sessions").update({completed_at:new Date().toISOString(),actual_prep_minutes:Math.round(Y/6e4)}).eq("id",_);const{data:ue,error:ie}=await Ae.from("prepared_items").insert({recipe_id:r.id,batch_size:i,expires_at:J.toISOString(),prep_session_id:_,staff_id:f,prepared_by:O?.id||"",organization_id:ne?.organization_id,label_count:I,prepared_at:q.toISOString()}).select().single();if(ie)throw ie;E(ue),B(m),N(""),a("label"),F({title:"Preparation Completed",description:"Recipe preparation finished successfully"})}catch(q){console.error("Error completing prep:",q),F({title:"Error",description:"Failed to complete preparation",variant:"destructive"})}},ge=async()=>{if(!r||!k)return;const q=new Date(k.expires_at),J=new Date(k.prepared_at),ne=p.find(oe=>oe.id===f),ue=r.yield_amount*i,ie={recipeName:r.name,batchSize:i,batchUnit:l,calculatedYield:ue,yieldUnit:r.yield_unit,expiryDate:q.toISOString(),preparedDate:J.toISOString(),allergens:r.allergens||[],dietaryRequirements:r.dietary_requirements||[],staffName:ne?.name||"Unknown",recipeId:r.id};try{const oe=await nH(ie,I),le=window.open("","_blank");le&&(le.document.write(oe),le.document.close(),le.focus(),le.print()),F({title:"Labels Generated",description:`${I} label(s) ready for printing with QR codes`})}catch(oe){console.error("Error generating labels:",oe),F({title:"Error",description:"Failed to generate labels",variant:"destructive"})}},re=()=>{m&&se?j(!0):t(!1)},L=q=>{const J=Math.floor(q/1e3),ne=Math.floor(J/3600),ue=Math.floor(J%3600/60),ie=J%60;return`${ne.toString().padStart(2,"0")}:${ue.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}`};return r?s.jsxs(s.Fragment,{children:[s.jsx(ea,{open:e,onOpenChange:re,children:s.jsxs(Us,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx($s,{children:s.jsxs(zs,{className:"flex items-center gap-2",children:[n==="details"&&s.jsxs(s.Fragment,{children:[s.jsx(Ca,{className:"w-5 h-5"}),"Prepare Recipe: ",r.name]}),n==="timer"&&s.jsxs(s.Fragment,{children:[s.jsx(lw,{className:"w-5 h-5"}),"Preparation Timer"]}),n==="label"&&s.jsxs(s.Fragment,{children:[s.jsx(Cl,{className:"w-5 h-5 text-green-600"}),"Generate Labels"]})]})}),n==="details"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsx(Qt,{className:"text-lg",children:r.name})}),s.jsxs(st,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Est. Prep: ",r.estimated_prep_minutes," min"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(lw,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Hold Time: ",r.hold_time_days," days"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ca,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Yield: ",r.yield_amount," ",r.yield_unit]})]})]}),r.allergens&&r.allergens.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2 text-amber-600",children:"Allergens:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:r.allergens.map(q=>s.jsx(ut,{variant:"destructive",className:"text-xs",children:q},q))})]}),r.dietary_requirements&&r.dietary_requirements.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2 text-green-600",children:"Dietary Requirements:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:r.dietary_requirements.map(q=>s.jsx(ut,{variant:"secondary",className:"text-xs",children:q},q))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"staff",children:"Staff Member *"}),s.jsxs(Nr,{value:f,onValueChange:h,children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select staff member"})}),s.jsx(Cr,{className:"bg-background opacity-100",children:p.map(q=>s.jsx(qe,{value:q.id,className:"bg-background opacity-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bi,{className:"w-4 h-4"}),s.jsx("span",{children:q.name}),s.jsx(ut,{variant:"outline",className:"text-xs",children:q.role})]})},q.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"batchSize",children:"Batch Size"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{id:"batchSize",type:"number",min:"0.1",step:"0.1",value:i,onChange:q=>o(parseFloat(q.target.value)||1),placeholder:"1"}),s.jsxs(Nr,{value:l,onValueChange:u,children:[s.jsx(_r,{className:"w-32",children:s.jsx(Sr,{})}),s.jsxs(Cr,{className:"bg-background opacity-100",children:[s.jsx(qe,{value:"batch",className:"bg-background opacity-100",children:"batch"}),s.jsx(qe,{value:"half",className:"bg-background opacity-100",children:"half"}),s.jsx(qe,{value:"double",className:"bg-background opacity-100",children:"double"})]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Calculated yield: ",(r.yield_amount*i).toFixed(1)," ",r.yield_unit]})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"labelCount",children:"Number of Labels"}),s.jsx(St,{id:"labelCount",type:"number",min:"1",max:"20",value:I,onChange:q=>D(parseInt(q.target.value)||1),placeholder:"1"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(we,{variant:"outline",onClick:re,children:"Cancel"}),s.jsxs(we,{onClick:W,disabled:!f,children:[s.jsx(ow,{className:"w-4 h-4 mr-2"}),"Start Preparation"]})]})]}),n==="timer"&&s.jsxs("div",{className:"space-y-6 text-center",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-6xl font-mono font-bold text-primary",children:L(Y)}),s.jsxs("div",{className:"text-lg text-muted-foreground",children:["Preparing ",r.name]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Batch: ",i," ",l,"  Yield: ",(r.yield_amount*i).toFixed(1)," ",r.yield_unit]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{variant:se?"outline":"default",onClick:()=>{m&&(se?z(m):U(m))},className:"flex-1",children:se?s.jsxs(s.Fragment,{children:[s.jsx(AD,{className:"w-4 h-4 mr-2"}),"Pause"]}):s.jsxs(s.Fragment,{children:[s.jsx(ow,{className:"w-4 h-4 mr-2"}),Y>0?"Resume":"Start"]})}),s.jsxs(we,{onClick:ee,variant:"default",className:"flex-1",children:[s.jsx(Cl,{className:"w-4 h-4 mr-2"}),"Complete"]})]})]}),n==="label"&&k&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg mb-4",children:[s.jsx(Cl,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Preparation Complete!"})]})}),s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsx(Qt,{className:"text-lg",children:r.name})}),s.jsx(st,{className:"space-y-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Staff:"})," ",p.find(q=>q.id===f)?.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Batch Size:"})," ",i," ",l]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Calculated Yield:"})," ",(r.yield_amount*i).toFixed(1)," ",r.yield_unit]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prep Time:"})," ",L(Y)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prepared:"})," ",new Date(k.prepared_at).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-red-600",children:"Expires:"})," ",new Date(k.expires_at).toLocaleDateString()]})]})})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"labelCount",children:"Number of Labels to Print"}),s.jsx(St,{id:"labelCount",type:"number",min:"1",max:"20",value:I,onChange:q=>D(parseInt(q.target.value)||1),placeholder:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Each label will include QR code, allergens, dietary info, and calculated yield"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(we,{variant:"outline",onClick:re,children:"Close"}),s.jsxs(we,{onClick:ge,children:[s.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Print ",I," Label",I>1?"s":""]})]})]})]})}),s.jsx(Tl,{open:w,onOpenChange:j,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Timer is Running"}),s.jsx(Rl,{children:"The preparation timer is currently running. The timer will continue in the background when you close this dialog. You can return to monitor the timer later."})]}),s.jsxs(zo,{children:[s.jsx(Wo,{onClick:()=>j(!1),children:"Cancel"}),s.jsx(Vo,{onClick:()=>{j(!1),t(!1)},children:"Continue"})]})]})})]}):null}async function U2(e,t,r,n){console.log(" PDF Renderer - Received data.organizationDetails:",t.organizationDetails),console.log(" PDF Renderer - Full data object keys:",Object.keys(t)),e.clearRect(0,0,r,n),e.fillStyle="#ffffff",e.fillRect(0,0,r,n);const a=40,i=r-a*2,o=780,l=a+50;e.strokeStyle="#e9ecef",e.lineWidth=1,e.strokeRect(0,0,r,n),e.strokeStyle="#212529",e.lineWidth=3,e.strokeRect(a,l,i,o);const u=20;let f=l+u;const h=a+u,p=i-u*2;e.strokeStyle="#212529",e.lineWidth=2,e.strokeRect(h,f,p,60),e.fillStyle="#212529",e.font='bold 28px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.textAlign="left";const v=t.productName||"Product Name";if(e.fillText(v,h+10,f+40),t.quantity&&t.unit&&(e.font='bold 24px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.textAlign="right",e.fillText(`${t.quantity} ${t.unit}`,h+p-10,f+40),e.textAlign="left"),f+=65,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=25,e.fillStyle="#212529",e.font='bold 22px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.condition?.toUpperCase()||"N/A",h,f),f+=35,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=25,e.fillStyle="#212529",e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Manufacturing Date:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.prepDate||"N/A",h+210,f),f+=30,e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Expiry Date:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.expiryDate||"N/A",h+210,f),f+=30,t.batchNumber&&t.batchNumber.trim()!==""&&(e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Batch:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.batchNumber,h+210,f),f+=30),t.categoryName&&t.categoryName!=="Quick Print"&&(e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Category:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.categoryName,h+210,f),f+=30),t.organizationDetails?.foodSafetyRegistration&&(e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Food Safety Reg:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.organizationDetails.foodSafetyRegistration,h+210,f),f+=30),e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=20,t.allergens&&t.allergens.length>0){const j=t.allergens.map(E=>E.name).join(", ");e.fillStyle="#212529",e.font='bold 16px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Allergens:",h,f),f+=25,e.font='14px "Century Gothic", "Trebuchet MS", "Arial", sans-serif';const _=p-150,C=j.split(" ");let k="";for(let E=0;E<C.length;E++){const I=k+C[E]+" ";e.measureText(I).width>_&&E>0?(e.fillText(k,h,f),k=C[E]+" ",f+=22):k=I}e.fillText(k,h,f),f+=30,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=20}if(e.fillStyle="#212529",e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(`Prepared By: ${(t.preparedByName||"Unknown").toUpperCase()}`,h,f),f+=35,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=20,t.organizationDetails){if(e.fillStyle="#212529",e.font='bold 16px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.organizationDetails.name.toUpperCase(),h,f),f+=24,t.organizationDetails.phone&&(e.font='13px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(`Tel: ${t.organizationDetails.phone}`,h,f),f+=20),t.organizationDetails.address){let j=[];try{const _=typeof t.organizationDetails.address=="string"?JSON.parse(t.organizationDetails.address):t.organizationDetails.address,C=`${_.street||""}, ${_.number||""}`.trim(),k=`${_.city||""} - ${_.state||""}, ${_.postalCode||""}`.trim();j=[C,k].filter(E=>E.length>3)}catch{j=[String(t.organizationDetails.address)]}e.font='12px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',j.forEach(_=>{e.fillText(_,h,f),f+=18})}t.organizationDetails.foodSafetyRegistration&&(e.font='13px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(`Food Safety Reg: ${t.organizationDetails.foodSafetyRegistration}`,h,f),f+=20)}const m=110,N=a+i-u-m,w=l+o-u-m-10;try{const j=JSON.stringify({labelId:t.labelId||null,product:t.productName,prep:t.prepDate,exp:t.expiryDate,batch:t.batchNumber,by:t.preparedByName}),_=await ZA.toDataURL(j,{width:m,margin:1,color:{dark:"#000000",light:"#ffffff"}}),C=new Image;C.src=_,await new Promise(k=>{C.onload=()=>{e.drawImage(C,N,w,m,m),k()},C.onerror=()=>{JN(e,N,w,m),k()}})}catch{JN(e,N,w,m)}if(t.labelId){const j=l+o-u-5;e.fillStyle="#495057",e.font='bold 11px "Courier New", monospace',e.textAlign="left";const _=t.labelId.substring(0,8).toUpperCase();e.fillText(`#${_}`,h,j)}e.fillStyle="#adb5bd",e.font='10px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.textAlign="center",e.fillText("Page 1 of 1",r/2,n-10),e.textAlign="left"}function JN(e,t,r,n){e.strokeStyle="#dee2e6",e.lineWidth=2,e.strokeRect(t,r,n,n),e.fillStyle="#adb5bd",e.font="12px Arial";const a=e.textAlign;e.textAlign="center",e.fillText("QR CODE",t+n/2,r+n/2),e.textAlign=a}async function aH(e,t,r,n){await U2(e,t,r,n)}const iH=e=>{const{labelId:t,productName:r,categoryName:n,condition:a,prepDate:i,expiryDate:o,preparedByName:l,quantity:u,unit:f,allergens:h,organizationDetails:p}=e,v=JSON.stringify({labelId:t||null,product:r,prep:i,exp:o,batch:e.batchNumber,by:l}),m=h&&h.length>0?h.map(j=>j.name).join(", "):"";let N="";if(p?.address)try{const j=typeof p.address=="string"?JSON.parse(p.address):p.address;N=`${j.street||""}, ${j.number||""}
${j.city||""} - ${j.state||""}, ${j.postalCode||""}`}catch{N=String(p.address)}return`
^XA
^CF0,30
~TA000
~JSN
^LT0
^MNW
^MTT
^PON
^PMN
^LH0,0
^JMA
^PR4,4
~SD15
^JUS
^LRN
^CI27
^PA0,1,1,0
^XZ

^XA
^MMT
^PW394  // 5cm = 394 dots at 203 DPI
^LL394  // 5cm = 394 dots at 203 DPI
^LS0

// Product Name Header (scaled from 560x60 to 354x40)
^FO15,15^GB364,40,2^FS
^FO20,18^A0N,30,30^FD${r}^FS

^FO15,60^GB364,1,1^FS

// Condition & Quantity (scaled font from 24 to 18)
^FO20,65^A0N,18,18^FD${a.toUpperCase()}${u?` / ${u} ${f||""}`:""}^FS

^FO15,88^GB364,1,1^FS

// Manufacturing & Expiry Dates (scaled font from 20 to 15)
^FO20,93^A0N,15,15^FDMfg Date:^FS
^FO150,93^A0N,15,15^FD${i}^FS

^FO20,110^A0N,15,15^FDExpiry:^FS
^FO150,110^A0N,15,15^FD${o}^FS

${e.batchNumber?`
^FO20,127^A0N,14,14^FDBatch:^FS
^FO100,127^A0N,14,14^FD${e.batchNumber}^FS
`:""}

${n&&n!=="Quick Print"?`
^FO20,${e.batchNumber?"144":"127"}^A0N,14,14^FDCategory:^FS
^FO100,${e.batchNumber?"144":"127"}^A0N,14,14^FD${n}^FS
`:""}

^FO15,${n&&n!=="Quick Print"?e.batchNumber?"162":"145":e.batchNumber?"145":"127"}^GB364,1,1^FS

${h&&h.length>0?`
^FO20,${n&&n!=="Quick Print"?e.batchNumber?"167":"150":e.batchNumber?"150":"132"}^A0N,13,13^FDAllergens:^FS
^FO20,${n&&n!=="Quick Print"?e.batchNumber?"182":"165":e.batchNumber?"165":"147"}^A0N,12,12^FD${m.length>35?m.substring(0,35)+"...":m}^FS
^FO15,${n&&n!=="Quick Print"?e.batchNumber?"198":"181":e.batchNumber?"181":"163"}^GB364,1,1^FS
`:""}

// Prepared By (scaled font from 20 to 15)
^FO20,${h&&h.length>0?n&&n!=="Quick Print"?e.batchNumber?"203":"186":e.batchNumber?"186":"168":n&&n!=="Quick Print"?e.batchNumber?"167":"150":e.batchNumber?"150":"132"}^A0N,15,15^FDPrepared By: ${l.toUpperCase()}^FS

^FO15,${h&&h.length>0?n&&n!=="Quick Print"?e.batchNumber?"220":"203":e.batchNumber?"203":"185":n&&n!=="Quick Print"?e.batchNumber?"184":"167":e.batchNumber?"167":"149"}^GB364,1,1^FS

${t?`^FO20,${h&&h.length>0?n&&n!=="Quick Print"?e.batchNumber?"225":"208":e.batchNumber?"208":"190":n&&n!=="Quick Print"?e.batchNumber?"189":"172":e.batchNumber?"172":"154"}^A0N,10,10^FD#${t.substring(0,8).toUpperCase()}^FS`:""}

// QR Code (scaled from size 4 to size 3, moved to bottom right)
^FO300,${h&&h.length>0?n&&n!=="Quick Print"?e.batchNumber?"250":"233":e.batchNumber?"233":"215":n&&n!=="Quick Print"?e.batchNumber?"214":"197":e.batchNumber?"197":"179"}^BQN,2,3^FDQA,${v}^FS

^XZ
`},Wu=async e=>{try{if(!e.preparedBy||e.preparedBy.trim()===""){const o=new Error("VALIDATION ERROR: prepared_by is a required field. Every label must identify who prepared it for food safety compliance and audit trail.");throw console.error(o.message,e),o}if(!e.organizationId||e.organizationId.trim()===""){const o=new Error("VALIDATION ERROR: organizationId is required for Row Level Security.");throw console.error(o.message,e),o}const t=e.allergens?.map(o=>o.name)||[],r=e.productId&&e.productId.trim()!==""?e.productId:null,n=e.categoryId&&e.categoryId.trim()!==""?e.categoryId:null,{data:a,error:i}=await Ae.from("printed_labels").insert({product_id:r,product_name:e.productName,category_id:n,category_name:e.categoryName,prepared_by:e.preparedBy,prepared_by_name:e.preparedByName,prep_date:e.prepDate,expiry_date:e.expiryDate,condition:e.condition,quantity:e.quantity||null,unit:e.unit||null,organization_id:e.organizationId,allergens:t.length>0?t:null}).select().single();if(i)throw console.error("Error saving label to database:",i),i;return console.log("Label saved to database:",a),a?.id||null}catch(t){throw console.error("Failed to save label:",t),t}},oH=async(e,t=1)=>new Promise((r,n)=>{try{const a=new WebSocket("ws://127.0.0.1:9100/");a.onopen=()=>{console.log("Connected to printer");const i=e.replace("^XZ",`^PQ${t}^XZ`);a.send(i),console.log("Label sent to printer")},a.onmessage=()=>{console.log("Printer acknowledged"),a.close(),r()},a.onclose=()=>{console.log("Printer connection closed"),r()},a.onerror=i=>{console.error("Printer WebSocket Error:",i),a.close(),n(new Error("Failed to connect to printer. Make sure Zebra Browser Print is running."))},setTimeout(()=>{a.readyState!==WebSocket.CLOSED&&(a.close(),n(new Error("Printer connection timeout")))},5e3)}catch(a){console.error("Error setting up printer connection:",a),n(a)}}),lH=async e=>{try{const t=await Wu(e),r={...e,labelId:t||void 0},n=iH(r),a=e.quantity?parseInt(e.quantity):1;return await oH(n,a),{success:!0,labelId:t||void 0}}catch(t){return console.error("Error printing label:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}};class cH{type="generic";name;capabilities;settings;constructor(t="Browser Print",r){this.name=t,this.settings={type:"generic",name:t,paperWidth:50,paperHeight:50,defaultQuantity:1,...r},this.capabilities={supportsZPL:!1,supportsPDF:!1,supportsColor:!0,maxWidth:1e3,maxHeight:1500}}async connect(){return!0}async disconnect(){}isConnected(){return!0}async print(t){try{const r=window.open("","_blank");if(!r)throw new Error("Popup blocked - please allow popups for printing");const n=await this.generateHTML(t);return r.document.write(n),r.document.close(),r.onload=()=>{r.print(),setTimeout(()=>r.close(),100)},!0}catch(r){return console.error("Browser print error:",r),!1}}async printBatch(t){try{const r=window.open("","_blank");if(!r)throw new Error("Popup blocked - please allow popups for printing");const n=await Promise.all(t.map(async(i,o)=>await this.generateHTML(i,!0)+(o<t.length-1?'<div class="page-break"></div>':""))),a=`
        <!DOCTYPE html>
        <html>
          <head>
            <style>
              @page { size: ${this.settings.paperWidth}mm ${this.settings.paperHeight}mm; margin: 0; }
              body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
              .page-break { page-break-after: always; }
            </style>
          </head>
          <body>${n.join("")}</body>
        </html>
      `;return r.document.write(a),r.document.close(),r.onload=()=>{r.print(),setTimeout(()=>r.close(),100)},!0}catch(r){return console.error("Browser batch print error:",r),!1}}getSettings(){return{...this.settings}}async updateSettings(t){this.settings={...this.settings,...t}}async getStatus(){return{isReady:!0,paperOut:!1}}async generateHTML(t,r=!1){try{const n=await this.convertToLabelPrintData(t),a=await Wu(n),i={labelId:a||void 0,categoryId:n.categoryId||"",categoryName:n.categoryName,subcategoryId:void 0,subcategoryName:t.subcategoryName,productId:n.productId,productName:n.productName,condition:n.condition,preparedBy:n.preparedBy,preparedByName:n.preparedByName,prepDate:n.prepDate,expiryDate:n.expiryDate,quantity:n.quantity||"",unit:n.unit||"",batchNumber:n.batchNumber,allergens:n.allergens},o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Failed to get canvas context");const u=600,f=1e3;o.width=u,o.height=f,await aH(l,i,u,f);const h=o.toDataURL("image/png"),{paperWidth:p,paperHeight:v}=this.settings,m=r?"":`
        <!DOCTYPE html>
        <html>
          <head>
            <style>
              @page { size: ${p}mm ${v}mm; margin: 0; }
              body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
              img { 
                width: 100%; 
                height: auto; 
                display: block;
                max-width: 100%;
              }
              .label-container {
                width: ${p}mm;
                min-height: ${v}mm;
                page-break-after: always;
              }
            </style>
          </head>
          <body>
      `,N=r?"":`
          </body>
        </html>
      `;return console.log(`Generic label rendered successfully. LabelId: ${a}`),`
        ${m}
        <div class="label-container">
          <img src="${h}" alt="Label: ${i.productName}" />
        </div>
        ${N}
      `}catch(n){throw console.error("Error generating HTML for generic printer:",n),n}}async convertToLabelPrintData(t){const{data:{user:r}}=await Ae.auth.getUser();let n=t.organizationId,a=t.preparedBy,i=t.preparedByName;if(r&&(!n||!a)){const{data:u}=await Ae.from("profiles").select("organization_id, display_name").eq("user_id",r.id).single();u&&(n=n||u.organization_id,a=a||r.id,i=i||u.display_name||"Unknown")}if(!n)throw new Error("Organization ID is required for printing");if(!a||!i)throw new Error("Prepared by information is required for printing");const o=t.condition||t.storageInstructions||"Refrigerate";return{productId:t.productId||null,productName:t.productName,categoryId:t.categoryId||null,categoryName:t.categoryName||"General",preparedBy:a,preparedByName:i,prepDate:t.preparedDate,expiryDate:t.useByDate,condition:o,organizationId:n,quantity:t.quantity,unit:t.unit,batchNumber:t.barcode||"",allergens:t.allergens?.map(u=>({id:"",name:typeof u=="string"?u:u.name||"",icon:null,severity:"low"}))}}}function cn(e){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cn(e)}var Yo=Uint8Array,Mi=Uint16Array,$2=Int32Array,z2=new Yo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),q2=new Yo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),ZN=new Yo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),XA=function(e,t){for(var r=new Mi(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var a=new $2(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)a[i]=i-r[n]<<5|n;return{b:r,r:a}},e6=XA(z2,2),uH=e6.b,Yw=e6.r;uH[28]=258,Yw[258]=28;var dH=XA(q2,0),XN=dH.r,Qw=new Mi(32768);for(var En=0;En<32768;++En){var Au=(En&43690)>>1|(En&21845)<<1;Au=(Au&52428)>>2|(Au&13107)<<2,Au=(Au&61680)>>4|(Au&3855)<<4,Qw[En]=((Au&65280)>>8|(Au&255)<<8)>>1}var dp=(function(e,t,r){for(var n=e.length,a=0,i=new Mi(t);a<n;++a)e[a]&&++i[e[a]-1];var o=new Mi(t);for(a=1;a<t;++a)o[a]=o[a-1]+i[a-1]<<1;var l;if(r){l=new Mi(1<<t);var u=15-t;for(a=0;a<n;++a)if(e[a])for(var f=a<<4|e[a],h=t-e[a],p=o[e[a]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)l[Qw[p]>>u]=f}else for(l=new Mi(n),a=0;a<n;++a)e[a]&&(l[a]=Qw[o[e[a]-1]++]>>15-e[a]);return l}),sf=new Yo(288);for(var En=0;En<144;++En)sf[En]=8;for(var En=144;En<256;++En)sf[En]=9;for(var En=256;En<280;++En)sf[En]=7;for(var En=280;En<288;++En)sf[En]=8;var dx=new Yo(32);for(var En=0;En<32;++En)dx[En]=5;var fH=dp(sf,9,0),hH=dp(dx,5,0),t6=function(e){return(e+7)/8|0},mH=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Yo(e.subarray(t,r))},_c=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Wm=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},j1=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var a=r.length,i=r.slice();if(!a)return{t:n6,l:0};if(a==1){var o=new Yo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(I,D){return I.f-D.f}),r.push({s:-1,f:25001});var l=r[0],u=r[1],f=0,h=1,p=2;for(r[0]={s:-1,f:l.f+u.f,l,r:u};h!=a-1;)l=r[r[f].f<r[p].f?f++:p++],u=r[f!=h&&r[f].f<r[p].f?f++:p++],r[h++]={s:-1,f:l.f+u.f,l,r:u};for(var v=i[0].s,n=1;n<a;++n)i[n].s>v&&(v=i[n].s);var m=new Mi(v+1),N=Jw(r[h-1],m,0);if(N>t){var n=0,w=0,j=N-t,_=1<<j;for(i.sort(function(D,O){return m[O.s]-m[D.s]||D.f-O.f});n<a;++n){var C=i[n].s;if(m[C]>t)w+=_-(1<<N-m[C]),m[C]=t;else break}for(w>>=j;w>0;){var k=i[n].s;m[k]<t?w-=1<<t-m[k]++-1:++n}for(;n>=0&&w;--n){var E=i[n].s;m[E]==t&&(--m[E],++w)}N=t}return{t:new Yo(m),l:N}},Jw=function(e,t,r){return e.s==-1?Math.max(Jw(e.l,t,r+1),Jw(e.r,t,r+1)):t[e.s]=r},eS=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Mi(++t),n=0,a=e[0],i=1,o=function(u){r[n++]=u},l=1;l<=t;++l)if(e[l]==a&&l!=t)++i;else{if(!a&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(a),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(a);i=1,a=e[l]}return{c:r.subarray(0,n),n:t}},Hm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},r6=function(e,t,r){var n=r.length,a=t6(t+2);e[a]=n&255,e[a+1]=n>>8,e[a+2]=e[a]^255,e[a+3]=e[a+1]^255;for(var i=0;i<n;++i)e[a+i+4]=r[i];return(a+4+n)*8},tS=function(e,t,r,n,a,i,o,l,u,f,h){_c(t,h++,r),++a[256];for(var p=j1(a,15),v=p.t,m=p.l,N=j1(i,15),w=N.t,j=N.l,_=eS(v),C=_.c,k=_.n,E=eS(w),I=E.c,D=E.n,O=new Mi(19),F=0;F<C.length;++F)++O[C[F]&31];for(var F=0;F<I.length;++F)++O[I[F]&31];for(var T=j1(O,7),z=T.t,U=T.l,B=19;B>4&&!z[ZN[B-1]];--B);var K=f+5<<3,V=Hm(a,sf)+Hm(i,dx)+o,de=Hm(a,v)+Hm(i,w)+o+14+3*B+Hm(O,z)+2*O[16]+3*O[17]+7*O[18];if(u>=0&&K<=V&&K<=de)return r6(t,h,e.subarray(u,u+f));var se,Y,W,ee;if(_c(t,h,1+(de<V)),h+=2,de<V){se=dp(v,m,0),Y=v,W=dp(w,j,0),ee=w;var ge=dp(z,U,0);_c(t,h,k-257),_c(t,h+5,D-1),_c(t,h+10,B-4),h+=14;for(var F=0;F<B;++F)_c(t,h+3*F,z[ZN[F]]);h+=3*B;for(var re=[C,I],L=0;L<2;++L)for(var q=re[L],F=0;F<q.length;++F){var J=q[F]&31;_c(t,h,ge[J]),h+=z[J],J>15&&(_c(t,h,q[F]>>5&127),h+=q[F]>>12)}}else se=fH,Y=sf,W=hH,ee=dx;for(var F=0;F<l;++F){var ne=n[F];if(ne>255){var J=ne>>18&31;Wm(t,h,se[J+257]),h+=Y[J+257],J>7&&(_c(t,h,ne>>23&31),h+=z2[J]);var ue=ne&31;Wm(t,h,W[ue]),h+=ee[ue],ue>3&&(Wm(t,h,ne>>5&8191),h+=q2[ue])}else Wm(t,h,se[ne]),h+=Y[ne]}return Wm(t,h,se[256]),h+Y[256]},pH=new $2([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),n6=new Yo(0),gH=function(e,t,r,n,a,i){var o=i.z||e.length,l=new Yo(n+o+5*(1+Math.ceil(o/7e3))+a),u=l.subarray(n,l.length-a),f=i.l,h=(i.r||0)&7;if(t){h&&(u[0]=i.r>>3);for(var p=pH[t-1],v=p>>13,m=p&8191,N=(1<<r)-1,w=i.p||new Mi(32768),j=i.h||new Mi(N+1),_=Math.ceil(r/3),C=2*_,k=function(je){return(e[je]^e[je+1]<<_^e[je+2]<<C)&N},E=new $2(25e3),I=new Mi(288),D=new Mi(32),O=0,F=0,T=i.i||0,z=0,U=i.w||0,B=0;T+2<o;++T){var K=k(T),V=T&32767,de=j[K];if(w[V]=de,j[K]=V,U<=T){var se=o-T;if((O>7e3||z>24576)&&(se>423||!f)){h=tS(e,u,0,E,I,D,F,z,B,T-B,h),z=O=F=0,B=T;for(var Y=0;Y<286;++Y)I[Y]=0;for(var Y=0;Y<30;++Y)D[Y]=0}var W=2,ee=0,ge=m,re=V-de&32767;if(se>2&&K==k(T-re))for(var L=Math.min(v,se)-1,q=Math.min(32767,T),J=Math.min(258,se);re<=q&&--ge&&V!=de;){if(e[T+W]==e[T+W-re]){for(var ne=0;ne<J&&e[T+ne]==e[T+ne-re];++ne);if(ne>W){if(W=ne,ee=re,ne>L)break;for(var ue=Math.min(re,ne-2),ie=0,Y=0;Y<ue;++Y){var oe=T-re+Y&32767,le=w[oe],ye=oe-le&32767;ye>ie&&(ie=ye,de=oe)}}}V=de,de=w[V],re+=V-de&32767}if(ee){E[z++]=268435456|Yw[W]<<18|XN[ee];var Pe=Yw[W]&31,We=XN[ee]&31;F+=z2[Pe]+q2[We],++I[257+Pe],++D[We],U=T+W,++O}else E[z++]=e[T],++I[e[T]]}}for(T=Math.max(T,U);T<o;++T)E[z++]=e[T],++I[e[T]];h=tS(e,u,f,E,I,D,F,z,B,T-B,h),f||(i.r=h&7|u[h/8|0]<<3,h-=7,i.h=j,i.p=w,i.i=T,i.w=U)}else{for(var T=i.w||0;T<o+f;T+=65535){var Fe=T+65535;Fe>=o&&(u[h/8|0]=f,Fe=o),h=r6(u,h+1,e.subarray(T,Fe))}i.i=o}return mH(l,0,n+t6(h)+a)},s6=function(){var e=1,t=0;return{p:function(r){for(var n=e,a=t,i=r.length|0,o=0;o!=i;){for(var l=Math.min(o+2655,i);o<l;++o)a+=n+=r[o];n=(n&65535)+15*(n>>16),a=(a&65535)+15*(a>>16)}e=n,t=a},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},vH=function(e,t,r,n,a){if(!a&&(a={l:1},t.dictionary)){var i=t.dictionary.subarray(-32768),o=new Yo(i.length+e.length);o.set(i),o.set(e,i.length),e=o,a.w=i.length}return gH(e,t.level==null?6:t.level,t.mem==null?a.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,a)},a6=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},xH=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var a=s6();a.p(t.dictionary),a6(e,2,a.d())}};function Zw(e,t){t||(t={});var r=s6();r.p(e);var n=vH(e,t,t.dictionary?6:2,4);return xH(n,t),a6(n,n.length-4,r.d()),n}var yH=typeof TextDecoder<"u"&&new TextDecoder,wH=0;try{yH.decode(n6,{stream:!0}),wH=1}catch{}function bH(e){if(Array.isArray(e))return e}function jH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,a,i,o,l=[],u=!0,f=!1;try{if(i=(r=r.call(e)).next,t!==0)for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(h){f=!0,a=h}finally{try{if(!u&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw a}}return l}}function rS(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _H(e,t){if(e){if(typeof e=="string")return rS(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?rS(e,t):void 0}}function NH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nS(e,t){return bH(e)||jH(e,t)||_H(e,t)||NH()}function sS(e,t="utf8"){return new TextDecoder(t).decode(e)}const SH=new TextEncoder;function kH(e){return SH.encode(e)}const CH=1024*8,EH=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),_1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class V2{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=CH,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const a=r.offset?r.offset>>>0:0,i=t.byteLength-a;let o=a;(ArrayBuffer.isView(t)||t instanceof V2)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+a),t=t.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=t,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,a=new Uint8Array(n);a.set(new Uint8Array(this.buffer)),this.buffer=a.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=_1[r].BYTES_PER_ELEMENT*t,a=this.byteOffset+this.offset,i=this.buffer.slice(a,a+n);if(this.littleEndian===EH&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(a,a+n));l.reverse();const u=new _1[r](l.buffer);return this.offset+=n,u.reverse(),u}const o=new _1[r](i);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return sS(this.readBytes(t))}decodeText(t=1,r="utf8"){return sS(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(kH(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function lm(e){let t=e.length;for(;--t>=0;)e[t]=0}const PH=3,AH=258,i6=29,TH=256,RH=TH+1+i6,o6=30,LH=512,DH=new Array((RH+2)*2);lm(DH);const IH=new Array(o6*2);lm(IH);const OH=new Array(LH);lm(OH);const MH=new Array(AH-PH+1);lm(MH);const FH=new Array(i6);lm(FH);const BH=new Array(o6);lm(BH);const UH=(e,t,r,n)=>{let a=e&65535|0,i=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do a=a+t[n++]|0,i=i+a|0;while(--o);a%=65521,i%=65521}return a|i<<16|0};var Xw=UH;const $H=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},zH=new Uint32Array($H()),qH=(e,t,r,n)=>{const a=zH,i=n+r;e^=-1;for(let o=n;o<i;o++)e=e>>>8^a[(e^t[o])&255];return e^-1};var bl=qH,eb={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},l6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const VH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var WH=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)VH(r,n)&&(e[n]=r[n])}}return e},HH=e=>{let t=0;for(let n=0,a=e.length;n<a;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,a=0,i=e.length;n<i;n++){let o=e[n];r.set(o,a),a+=o.length}return r},c6={assign:WH,flattenChunks:HH};let u6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{u6=!1}const Fp=new Uint8Array(256);for(let e=0;e<256;e++)Fp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Fp[254]=Fp[254]=1;var GH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,o=e.length,l=0;for(a=0;a<o;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),i=0,a=0;i<l;a++)r=e.charCodeAt(a),(r&64512)===55296&&a+1<o&&(n=e.charCodeAt(a+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),a++)),r<128?t[i++]=r:r<2048?(t[i++]=192|r>>>6,t[i++]=128|r&63):r<65536?(t[i++]=224|r>>>12,t[i++]=128|r>>>6&63,t[i++]=128|r&63):(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63,t[i++]=128|r>>>6&63,t[i++]=128|r&63);return t};const KH=(e,t)=>{if(t<65534&&e.subarray&&u6)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var YH=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,a;const i=new Array(r*2);for(a=0,n=0;n<r;){let o=e[n++];if(o<128){i[a++]=o;continue}let l=Fp[o];if(l>4){i[a++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){i[a++]=65533;continue}o<65536?i[a++]=o:(o-=65536,i[a++]=55296|o>>10&1023,i[a++]=56320|o&1023)}return KH(i,a)},QH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+Fp[e[r]]>t?r:t},tb={string2buf:GH,buf2string:YH,utf8border:QH};function JH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var ZH=JH;const yv=16209,XH=16191;var eG=function(t,r){let n,a,i,o,l,u,f,h,p,v,m,N,w,j,_,C,k,E,I,D,O,F,T,z;const U=t.state;n=t.next_in,T=t.input,a=n+(t.avail_in-5),i=t.next_out,z=t.output,o=i-(r-t.avail_out),l=i+(t.avail_out-257),u=U.dmax,f=U.wsize,h=U.whave,p=U.wnext,v=U.window,m=U.hold,N=U.bits,w=U.lencode,j=U.distcode,_=(1<<U.lenbits)-1,C=(1<<U.distbits)-1;e:do{N<15&&(m+=T[n++]<<N,N+=8,m+=T[n++]<<N,N+=8),k=w[m&_];t:for(;;){if(E=k>>>24,m>>>=E,N-=E,E=k>>>16&255,E===0)z[i++]=k&65535;else if(E&16){I=k&65535,E&=15,E&&(N<E&&(m+=T[n++]<<N,N+=8),I+=m&(1<<E)-1,m>>>=E,N-=E),N<15&&(m+=T[n++]<<N,N+=8,m+=T[n++]<<N,N+=8),k=j[m&C];r:for(;;){if(E=k>>>24,m>>>=E,N-=E,E=k>>>16&255,E&16){if(D=k&65535,E&=15,N<E&&(m+=T[n++]<<N,N+=8,N<E&&(m+=T[n++]<<N,N+=8)),D+=m&(1<<E)-1,D>u){t.msg="invalid distance too far back",U.mode=yv;break e}if(m>>>=E,N-=E,E=i-o,D>E){if(E=D-E,E>h&&U.sane){t.msg="invalid distance too far back",U.mode=yv;break e}if(O=0,F=v,p===0){if(O+=f-E,E<I){I-=E;do z[i++]=v[O++];while(--E);O=i-D,F=z}}else if(p<E){if(O+=f+p-E,E-=p,E<I){I-=E;do z[i++]=v[O++];while(--E);if(O=0,p<I){E=p,I-=E;do z[i++]=v[O++];while(--E);O=i-D,F=z}}}else if(O+=p-E,E<I){I-=E;do z[i++]=v[O++];while(--E);O=i-D,F=z}for(;I>2;)z[i++]=F[O++],z[i++]=F[O++],z[i++]=F[O++],I-=3;I&&(z[i++]=F[O++],I>1&&(z[i++]=F[O++]))}else{O=i-D;do z[i++]=z[O++],z[i++]=z[O++],z[i++]=z[O++],I-=3;while(I>2);I&&(z[i++]=z[O++],I>1&&(z[i++]=z[O++]))}}else if((E&64)===0){k=j[(k&65535)+(m&(1<<E)-1)];continue r}else{t.msg="invalid distance code",U.mode=yv;break e}break}}else if((E&64)===0){k=w[(k&65535)+(m&(1<<E)-1)];continue t}else if(E&32){U.mode=XH;break e}else{t.msg="invalid literal/length code",U.mode=yv;break e}break}}while(n<a&&i<l);I=N>>3,n-=I,N-=I<<3,m&=(1<<N)-1,t.next_in=n,t.next_out=i,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=i<l?257+(l-i):257-(i-l),U.hold=m,U.bits=N};const lh=15,aS=852,iS=592,oS=0,N1=1,lS=2,tG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),rG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),sG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),aG=(e,t,r,n,a,i,o,l)=>{const u=l.bits;let f=0,h=0,p=0,v=0,m=0,N=0,w=0,j=0,_=0,C=0,k,E,I,D,O,F=null,T;const z=new Uint16Array(lh+1),U=new Uint16Array(lh+1);let B=null,K,V,de;for(f=0;f<=lh;f++)z[f]=0;for(h=0;h<n;h++)z[t[r+h]]++;for(m=u,v=lh;v>=1&&z[v]===0;v--);if(m>v&&(m=v),v===0)return a[i++]=1<<24|64<<16|0,a[i++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<v&&z[p]===0;p++);for(m<p&&(m=p),j=1,f=1;f<=lh;f++)if(j<<=1,j-=z[f],j<0)return-1;if(j>0&&(e===oS||v!==1))return-1;for(U[1]=0,f=1;f<lh;f++)U[f+1]=U[f]+z[f];for(h=0;h<n;h++)t[r+h]!==0&&(o[U[t[r+h]]++]=h);if(e===oS?(F=B=o,T=20):e===N1?(F=tG,B=rG,T=257):(F=nG,B=sG,T=0),C=0,h=0,f=p,O=i,N=m,w=0,I=-1,_=1<<m,D=_-1,e===N1&&_>aS||e===lS&&_>iS)return 1;for(;;){K=f-w,o[h]+1<T?(V=0,de=o[h]):o[h]>=T?(V=B[o[h]-T],de=F[o[h]-T]):(V=96,de=0),k=1<<f-w,E=1<<N,p=E;do E-=k,a[O+(C>>w)+E]=K<<24|V<<16|de|0;while(E!==0);for(k=1<<f-1;C&k;)k>>=1;if(k!==0?(C&=k-1,C+=k):C=0,h++,--z[f]===0){if(f===v)break;f=t[r+o[h]]}if(f>m&&(C&D)!==I){for(w===0&&(w=m),O+=p,N=f-w,j=1<<N;N+w<v&&(j-=z[N+w],!(j<=0));)N++,j<<=1;if(_+=1<<N,e===N1&&_>aS||e===lS&&_>iS)return 1;I=C&D,a[I]=m<<24|N<<16|O-i|0}}return C!==0&&(a[O+C]=f-w<<24|64<<16|0),l.bits=m,0};var fp=aG;const iG=0,d6=1,f6=2,{Z_FINISH:cS,Z_BLOCK:oG,Z_TREES:wv,Z_OK:af,Z_STREAM_END:lG,Z_NEED_DICT:cG,Z_STREAM_ERROR:oo,Z_DATA_ERROR:h6,Z_MEM_ERROR:m6,Z_BUF_ERROR:uG,Z_DEFLATED:uS}=l6,v0=16180,dS=16181,fS=16182,hS=16183,mS=16184,pS=16185,gS=16186,vS=16187,xS=16188,yS=16189,fx=16190,Nc=16191,S1=16192,wS=16193,k1=16194,bS=16195,jS=16196,_S=16197,NS=16198,bv=16199,jv=16200,SS=16201,kS=16202,CS=16203,ES=16204,PS=16205,C1=16206,AS=16207,TS=16208,Dn=16209,p6=16210,g6=16211,dG=852,fG=592,hG=15,mG=hG,RS=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function pG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const wf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<v0||t.mode>g6?1:0},v6=e=>{if(wf(e))return oo;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=v0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(dG),t.distcode=t.distdyn=new Int32Array(fG),t.sane=1,t.back=-1,af},x6=e=>{if(wf(e))return oo;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,v6(e)},y6=(e,t)=>{let r;if(wf(e))return oo;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?oo:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,x6(e))},w6=(e,t)=>{if(!e)return oo;const r=new pG;e.state=r,r.strm=e,r.window=null,r.mode=v0;const n=y6(e,t);return n!==af&&(e.state=null),n},gG=e=>w6(e,mG);let LS=!0,E1,P1;const vG=e=>{if(LS){E1=new Int32Array(512),P1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(fp(d6,e.lens,0,288,E1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;fp(f6,e.lens,0,32,P1,0,e.work,{bits:5}),LS=!1}e.lencode=E1,e.lenbits=9,e.distcode=P1,e.distbits=5},b6=(e,t,r,n)=>{let a;const i=e.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(a=i.wsize-i.wnext,a>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),n-=a,n?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0},xG=(e,t)=>{let r,n,a,i,o,l,u,f,h,p,v,m,N,w,j=0,_,C,k,E,I,D,O,F;const T=new Uint8Array(4);let z,U;const B=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(wf(e)||!e.output||!e.input&&e.avail_in!==0)return oo;r=e.state,r.mode===Nc&&(r.mode=S1),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,f=r.hold,h=r.bits,p=l,v=u,F=af;e:for(;;)switch(r.mode){case v0:if(r.wrap===0){r.mode=S1;break}for(;h<16;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,T[0]=f&255,T[1]=f>>>8&255,r.check=bl(r.check,T,2,0),f=0,h=0,r.mode=dS;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=Dn;break}if((f&15)!==uS){e.msg="unknown compression method",r.mode=Dn;break}if(f>>>=4,h-=4,O=(f&15)+8,r.wbits===0&&(r.wbits=O),O>15||O>r.wbits){e.msg="invalid window size",r.mode=Dn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=f&512?yS:Nc,f=0,h=0;break;case dS:for(;h<16;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(r.flags=f,(r.flags&255)!==uS){e.msg="unknown compression method",r.mode=Dn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Dn;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,r.check=bl(r.check,T,2,0)),f=0,h=0,r.mode=fS;case fS:for(;h<32;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,T[2]=f>>>16&255,T[3]=f>>>24&255,r.check=bl(r.check,T,4,0)),f=0,h=0,r.mode=hS;case hS:for(;h<16;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,r.check=bl(r.check,T,2,0)),f=0,h=0,r.mode=mS;case mS:if(r.flags&1024){for(;h<16;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(T[0]=f&255,T[1]=f>>>8&255,r.check=bl(r.check,T,2,0)),f=0,h=0}else r.head&&(r.head.extra=null);r.mode=pS;case pS:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(O=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+m),O)),r.flags&512&&r.wrap&4&&(r.check=bl(r.check,n,m,i)),l-=m,i+=m,r.length-=m),r.length))break e;r.length=0,r.mode=gS;case gS:if(r.flags&2048){if(l===0)break e;m=0;do O=n[i+m++],r.head&&O&&r.length<65536&&(r.head.name+=String.fromCharCode(O));while(O&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=bl(r.check,n,m,i)),l-=m,i+=m,O)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=vS;case vS:if(r.flags&4096){if(l===0)break e;m=0;do O=n[i+m++],r.head&&O&&r.length<65536&&(r.head.comment+=String.fromCharCode(O));while(O&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=bl(r.check,n,m,i)),l-=m,i+=m,O)break e}else r.head&&(r.head.comment=null);r.mode=xS;case xS:if(r.flags&512){for(;h<16;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(r.wrap&4&&f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Dn;break}f=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Nc;break;case yS:for(;h<32;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}e.adler=r.check=RS(f),f=0,h=0,r.mode=fx;case fx:if(r.havedict===0)return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=l,r.hold=f,r.bits=h,cG;e.adler=r.check=1,r.mode=Nc;case Nc:if(t===oG||t===wv)break e;case S1:if(r.last){f>>>=h&7,h-=h&7,r.mode=C1;break}for(;h<3;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}switch(r.last=f&1,f>>>=1,h-=1,f&3){case 0:r.mode=wS;break;case 1:if(vG(r),r.mode=bv,t===wv){f>>>=2,h-=2;break e}break;case 2:r.mode=jS;break;case 3:e.msg="invalid block type",r.mode=Dn}f>>>=2,h-=2;break;case wS:for(f>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Dn;break}if(r.length=f&65535,f=0,h=0,r.mode=k1,t===wv)break e;case k1:r.mode=bS;case bS:if(m=r.length,m){if(m>l&&(m=l),m>u&&(m=u),m===0)break e;a.set(n.subarray(i,i+m),o),l-=m,i+=m,u-=m,o+=m,r.length-=m;break}r.mode=Nc;break;case jS:for(;h<14;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(r.nlen=(f&31)+257,f>>>=5,h-=5,r.ndist=(f&31)+1,f>>>=5,h-=5,r.ncode=(f&15)+4,f>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Dn;break}r.have=0,r.mode=_S;case _S:for(;r.have<r.ncode;){for(;h<3;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}r.lens[B[r.have++]]=f&7,f>>>=3,h-=3}for(;r.have<19;)r.lens[B[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},F=fp(iG,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,F){e.msg="invalid code lengths set",r.mode=Dn;break}r.have=0,r.mode=NS;case NS:for(;r.have<r.nlen+r.ndist;){for(;j=r.lencode[f&(1<<r.lenbits)-1],_=j>>>24,C=j>>>16&255,k=j&65535,!(_<=h);){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(k<16)f>>>=_,h-=_,r.lens[r.have++]=k;else{if(k===16){for(U=_+2;h<U;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(f>>>=_,h-=_,r.have===0){e.msg="invalid bit length repeat",r.mode=Dn;break}O=r.lens[r.have-1],m=3+(f&3),f>>>=2,h-=2}else if(k===17){for(U=_+3;h<U;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}f>>>=_,h-=_,O=0,m=3+(f&7),f>>>=3,h-=3}else{for(U=_+7;h<U;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}f>>>=_,h-=_,O=0,m=11+(f&127),f>>>=7,h-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Dn;break}for(;m--;)r.lens[r.have++]=O}}if(r.mode===Dn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Dn;break}if(r.lenbits=9,z={bits:r.lenbits},F=fp(d6,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,F){e.msg="invalid literal/lengths set",r.mode=Dn;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},F=fp(f6,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,F){e.msg="invalid distances set",r.mode=Dn;break}if(r.mode=bv,t===wv)break e;case bv:r.mode=jv;case jv:if(l>=6&&u>=258){e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=l,r.hold=f,r.bits=h,eG(e,v),o=e.next_out,a=e.output,u=e.avail_out,i=e.next_in,n=e.input,l=e.avail_in,f=r.hold,h=r.bits,r.mode===Nc&&(r.back=-1);break}for(r.back=0;j=r.lencode[f&(1<<r.lenbits)-1],_=j>>>24,C=j>>>16&255,k=j&65535,!(_<=h);){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(C&&(C&240)===0){for(E=_,I=C,D=k;j=r.lencode[D+((f&(1<<E+I)-1)>>E)],_=j>>>24,C=j>>>16&255,k=j&65535,!(E+_<=h);){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}f>>>=E,h-=E,r.back+=E}if(f>>>=_,h-=_,r.back+=_,r.length=k,C===0){r.mode=PS;break}if(C&32){r.back=-1,r.mode=Nc;break}if(C&64){e.msg="invalid literal/length code",r.mode=Dn;break}r.extra=C&15,r.mode=SS;case SS:if(r.extra){for(U=r.extra;h<U;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=kS;case kS:for(;j=r.distcode[f&(1<<r.distbits)-1],_=j>>>24,C=j>>>16&255,k=j&65535,!(_<=h);){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if((C&240)===0){for(E=_,I=C,D=k;j=r.distcode[D+((f&(1<<E+I)-1)>>E)],_=j>>>24,C=j>>>16&255,k=j&65535,!(E+_<=h);){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}f>>>=E,h-=E,r.back+=E}if(f>>>=_,h-=_,r.back+=_,C&64){e.msg="invalid distance code",r.mode=Dn;break}r.offset=k,r.extra=C&15,r.mode=CS;case CS:if(r.extra){for(U=r.extra;h<U;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Dn;break}r.mode=ES;case ES:if(u===0)break e;if(m=v-u,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Dn;break}m>r.wnext?(m-=r.wnext,N=r.wsize-m):N=r.wnext-m,m>r.length&&(m=r.length),w=r.window}else w=a,N=o-r.offset,m=r.length;m>u&&(m=u),u-=m,r.length-=m;do a[o++]=w[N++];while(--m);r.length===0&&(r.mode=jv);break;case PS:if(u===0)break e;a[o++]=r.length,u--,r.mode=jv;break;case C1:if(r.wrap){for(;h<32;){if(l===0)break e;l--,f|=n[i++]<<h,h+=8}if(v-=u,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?bl(r.check,a,v,o-v):Xw(r.check,a,v,o-v)),v=u,r.wrap&4&&(r.flags?f:RS(f))!==r.check){e.msg="incorrect data check",r.mode=Dn;break}f=0,h=0}r.mode=AS;case AS:if(r.wrap&&r.flags){for(;h<32;){if(l===0)break e;l--,f+=n[i++]<<h,h+=8}if(r.wrap&4&&f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Dn;break}f=0,h=0}r.mode=TS;case TS:F=lG;break e;case Dn:F=h6;break e;case p6:return m6;case g6:default:return oo}return e.next_out=o,e.avail_out=u,e.next_in=i,e.avail_in=l,r.hold=f,r.bits=h,(r.wsize||v!==e.avail_out&&r.mode<Dn&&(r.mode<C1||t!==cS))&&b6(e,e.output,e.next_out,v-e.avail_out),p-=e.avail_in,v-=e.avail_out,e.total_in+=p,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?bl(r.check,a,v,e.next_out-v):Xw(r.check,a,v,e.next_out-v)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Nc?128:0)+(r.mode===bv||r.mode===k1?256:0),(p===0&&v===0||t===cS)&&F===af&&(F=uG),F},yG=e=>{if(wf(e))return oo;let t=e.state;return t.window&&(t.window=null),e.state=null,af},wG=(e,t)=>{if(wf(e))return oo;const r=e.state;return(r.wrap&2)===0?oo:(r.head=t,t.done=!1,af)},bG=(e,t)=>{const r=t.length;let n,a,i;return wf(e)||(n=e.state,n.wrap!==0&&n.mode!==fx)?oo:n.mode===fx&&(a=1,a=Xw(a,t,r,0),a!==n.check)?h6:(i=b6(e,t,r,r),i?(n.mode=p6,m6):(n.havedict=1,af))};var jG=x6,_G=y6,NG=v6,SG=gG,kG=w6,CG=xG,EG=yG,PG=wG,AG=bG,TG="pako inflate (from Nodeca project)",Pc={inflateReset:jG,inflateReset2:_G,inflateResetKeep:NG,inflateInit:SG,inflateInit2:kG,inflate:CG,inflateEnd:EG,inflateGetHeader:PG,inflateSetDictionary:AG,inflateInfo:TG};function RG(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var LG=RG;const j6=Object.prototype.toString,{Z_NO_FLUSH:DG,Z_FINISH:IG,Z_OK:Bp,Z_STREAM_END:A1,Z_NEED_DICT:T1,Z_STREAM_ERROR:OG,Z_DATA_ERROR:DS,Z_MEM_ERROR:MG}=l6;function sg(e){this.options=c6.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new ZH,this.strm.avail_out=0;let r=Pc.inflateInit2(this.strm,t.windowBits);if(r!==Bp)throw new Error(eb[r]);if(this.header=new LG,Pc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=tb.string2buf(t.dictionary):j6.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Pc.inflateSetDictionary(this.strm,t.dictionary),r!==Bp)))throw new Error(eb[r])}sg.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,a=this.options.dictionary;let i,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?IG:DG,j6.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=Pc.inflate(r,o),i===T1&&a&&(i=Pc.inflateSetDictionary(r,a),i===Bp?i=Pc.inflate(r,o):i===DS&&(i=T1));r.avail_in>0&&i===A1&&r.state.wrap>0&&e[r.next_in]!==0;)Pc.inflateReset(r),i=Pc.inflate(r,o);switch(i){case OG:case DS:case T1:case MG:return this.onEnd(i),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||i===A1))if(this.options.to==="string"){let u=tb.utf8border(r.output,r.next_out),f=r.next_out-u,h=tb.buf2string(r.output,u);r.next_out=f,r.avail_out=n-f,f&&r.output.set(r.output.subarray(u,u+f),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===Bp&&l===0)){if(i===A1)return i=Pc.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};sg.prototype.onData=function(e){this.chunks.push(e)};sg.prototype.onEnd=function(e){e===Bp&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=c6.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function FG(e,t){const r=new sg(t);if(r.push(e),r.err)throw r.msg||eb[r.err];return r.result}var BG=sg,UG=FG,$G={Inflate:BG,inflate:UG};const{Inflate:zG,inflate:qG}=$G;var IS=zG,VG=qG;const _6=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;_6[e]=t}const OS=4294967295;function WG(e,t,r){let n=e;for(let a=0;a<r;a++)n=_6[(n^t[a])&255]^n>>>8;return n}function HG(e,t){return(WG(OS,e,t)^OS)>>>0}function MS(e,t,r){const n=e.readUint32(),a=HG(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(a!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${a}`)}function N6(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function S6(e,t,r,n){let a=0;for(;a<n;a++)t[a]=e[a];for(;a<r;a++)t[a]=e[a]+t[a-n]&255}function k6(e,t,r,n){let a=0;if(r.length===0)for(;a<n;a++)t[a]=e[a];else for(;a<n;a++)t[a]=e[a]+r[a]&255}function C6(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+(t[i-a]>>1)&255}else{for(;i<a;i++)t[i]=e[i]+(r[i]>>1)&255;for(;i<n;i++)t[i]=e[i]+(t[i-a]+r[i]>>1)&255}}function E6(e,t,r,n,a){let i=0;if(r.length===0){for(;i<a;i++)t[i]=e[i];for(;i<n;i++)t[i]=e[i]+t[i-a]&255}else{for(;i<a;i++)t[i]=e[i]+r[i]&255;for(;i<n;i++)t[i]=e[i]+GG(t[i-a],r[i],r[i-a])&255}}function GG(e,t,r){const n=e+t-r,a=Math.abs(n-e),i=Math.abs(n-t),o=Math.abs(n-r);return a<=i&&a<=o?e:i<=o?t:r}function KG(e,t,r,n,a,i){switch(e){case 0:N6(t,r,a);break;case 1:S6(t,r,a,i);break;case 2:k6(t,r,n,a);break;case 3:C6(t,r,n,a,i);break;case 4:E6(t,r,n,a,i);break;default:throw new Error(`Unsupported filter: ${e}`)}}const YG=new Uint16Array([255]),QG=new Uint8Array(YG.buffer),JG=QG[0]===255;function ZG(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(i/8)*a,u=new Uint8Array(n*r*l);let f=0;for(let h=0;h<7;h++){const p=o[h],v=Math.ceil((r-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(v<=0||m<=0)continue;const N=v*l,w=new Uint8Array(N);for(let j=0;j<m;j++){const _=t[f++],C=t.subarray(f,f+N);f+=N;const k=new Uint8Array(N);KG(_,C,k,w,N,l),w.set(k);for(let E=0;E<v;E++){const I=p.x+E*p.xStep,D=p.y+j*p.yStep;if(!(I>=r||D>=n))for(let O=0;O<l;O++)u[(D*r+I)*l+O]=k[E*l+O]}}}if(i===16){const h=new Uint16Array(u.buffer);if(JG)for(let p=0;p<h.length;p++)h[p]=XG(h[p]);return h}else return u}function XG(e){return(e&255)<<8|e>>8&255}const eK=new Uint16Array([255]),tK=new Uint8Array(eK.buffer),rK=tK[0]===255,nK=new Uint8Array(0);function FS(e){const{data:t,width:r,height:n,channels:a,depth:i}=e,o=Math.ceil(i/8)*a,l=Math.ceil(i/8*a*r),u=new Uint8Array(n*l);let f=nK,h=0,p,v;for(let m=0;m<n;m++){switch(p=t.subarray(h+1,h+1+l),v=u.subarray(m*l,(m+1)*l),t[h]){case 0:N6(p,v,l);break;case 1:S6(p,v,l,o);break;case 2:k6(p,v,f,l);break;case 3:C6(p,v,f,l,o);break;case 4:E6(p,v,f,l,o);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}f=v,h+=l+1}if(i===16){const m=new Uint16Array(u.buffer);if(rK)for(let N=0;N<m.length;N++)m[N]=sK(m[N]);return m}else return u}function sK(e){return(e&255)<<8|e>>8&255}const Bv=Uint8Array.of(137,80,78,71,13,10,26,10);function BS(e){if(!aK(e.readBytes(Bv.length)))throw new Error("wrong PNG signature")}function aK(e){if(e.length<Bv.length)return!1;for(let t=0;t<Bv.length;t++)if(e[t]!==Bv[t])return!1;return!0}const iK="tEXt",oK=0,P6=new TextDecoder("latin1");function lK(e){if(uK(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const cK=/^[\u0000-\u00FF]*$/;function uK(e){if(!cK.test(e))throw new Error("invalid latin1 text")}function dK(e,t,r){const n=A6(t);e[n]=fK(t,r-n.length-1)}function A6(e){for(e.mark();e.readByte()!==oK;);const t=e.offset;e.reset();const r=P6.decode(e.readBytes(t-e.offset-1));return e.skip(1),lK(r),r}function fK(e,t){return P6.decode(e.readBytes(t))}const Ai={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},R1={UNKNOWN:-1,DEFLATE:0},US={UNKNOWN:-1,ADAPTIVE:0},L1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},_v={NONE:0,BACKGROUND:1,PREVIOUS:2},D1={SOURCE:0,OVER:1};class hK extends V2{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new IS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=R1.UNKNOWN,this._filterMethod=US.UNKNOWN,this._interlaceMethod=L1.UNKNOWN,this._colorType=Ai.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(BS(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(BS(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case iK:dK(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?MS(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?MS(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=mK(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case Ai.GREYSCALE:n=1;break;case Ai.TRUECOLOUR:n=3;break;case Ai.INDEXED_COLOUR:n=1;break;case Ai.GREYSCALE_ALPHA:n=2;break;case Ai.TRUECOLOUR_ALPHA:n=4;break;case Ai.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==R1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let a=0;a<r;a++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case Ai.GREYSCALE:case Ai.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case Ai.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case Ai.UNKNOWN:case Ai.GREYSCALE_ALPHA:case Ai.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=A6(this),n=this.readUint8();if(n!==R1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const a=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:VG(a)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=FS({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const a=this._apng.frames.at(t-1);this.disposeFrame(n,a,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case _v.NONE:break;case _v.BACKGROUND:for(let a=0;a<this._png.height;a++)for(let i=0;i<this._png.width;i++){const o=(a*t.width+i)*this._png.channels;for(let l=0;l<this._png.channels;l++)n.data[o+l]=0}break;case _v.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,a=(i,o)=>{const l=((i+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,u=(i*r.width+o)*this._png.channels;return{index:l,frameIndex:u}};switch(r.blendOp){case D1.SOURCE:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(i,o);for(let f=0;f<this._png.channels;f++)t.data[l+f]=r.data[u+f]}break;case D1.OVER:for(let i=0;i<r.height;i++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:u}=a(i,o);for(let f=0;f<this._png.channels;f++){const h=r.data[u+this._png.channels-1]/n,p=f%(this._png.channels-1)===0?1:r.data[u+f],v=Math.floor(h*p+(1-h)*t.data[l+f]);t.data[l+f]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==US.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===L1.NO_INTERLACE)this._png.data=FS({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===L1.ADAM7)this._png.data=ZG({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:_v.NONE,blendOp:D1.SOURCE,data:t}),this._inflator=new IS,this._writingDataChunks=!1}}function mK(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var $S;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})($S||($S={}));function pK(e,t){return new hK(e,t).decode()}var hr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function I1(){hr.console&&typeof hr.console.log=="function"&&hr.console.log.apply(hr.console,arguments)}var gn={log:I1,warn:function(e){hr.console&&(typeof hr.console.warn=="function"?hr.console.warn.apply(hr.console,arguments):I1.call(null,arguments))},error:function(e){hr.console&&(typeof hr.console.error=="function"?hr.console.error.apply(hr.console,arguments):I1(e))}};function O1(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){$d(n.response,t,r)},n.onerror=function(){gn.error("could not download file")},n.send()}function zS(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function Nv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var $d=hr.saveAs||((typeof window>"u"?"undefined":cn(window))!=="object"||window!==hr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=hr.URL||hr.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener",typeof e=="string"?(a.href=e,a.origin!==location.origin?zS(a.href)?O1(e,t,r):Nv(a,a.target="_blank"):Nv(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){Nv(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(zS(e))O1(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){Nv(n)})}else navigator.msSaveOrOpenBlob((function(a,i){return i===void 0?i={autoBom:!1}:cn(i)!=="object"&&(gn.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return O1(e,t,r);var a=e.type==="application/octet-stream",i=/constructor/i.test(hr.HTMLElement)||hr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||a&&i)&&(typeof FileReader>"u"?"undefined":cn(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},l.readAsDataURL(e)}else{var u=hr.URL||hr.webkitURL,f=u.createObjectURL(e);n?n.location=f:location.href=f,n=null,setTimeout(function(){u.revokeObjectURL(f)},4e4)}});function T6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var a=r[n].re,i=r[n].process,o=a.exec(e);o&&(t=i(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),u=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),f.length==1&&(f="0"+f),"#"+l+u+f}}var Uv=hr.atob.bind(hr),qS=hr.btoa.bind(hr);function M1(e,t){var r=e[0],n=e[1],a=e[2],i=e[3];r=wa(r,n,a,i,t[0],7,-680876936),i=wa(i,r,n,a,t[1],12,-389564586),a=wa(a,i,r,n,t[2],17,606105819),n=wa(n,a,i,r,t[3],22,-1044525330),r=wa(r,n,a,i,t[4],7,-176418897),i=wa(i,r,n,a,t[5],12,1200080426),a=wa(a,i,r,n,t[6],17,-1473231341),n=wa(n,a,i,r,t[7],22,-45705983),r=wa(r,n,a,i,t[8],7,1770035416),i=wa(i,r,n,a,t[9],12,-1958414417),a=wa(a,i,r,n,t[10],17,-42063),n=wa(n,a,i,r,t[11],22,-1990404162),r=wa(r,n,a,i,t[12],7,1804603682),i=wa(i,r,n,a,t[13],12,-40341101),a=wa(a,i,r,n,t[14],17,-1502002290),r=ba(r,n=wa(n,a,i,r,t[15],22,1236535329),a,i,t[1],5,-165796510),i=ba(i,r,n,a,t[6],9,-1069501632),a=ba(a,i,r,n,t[11],14,643717713),n=ba(n,a,i,r,t[0],20,-373897302),r=ba(r,n,a,i,t[5],5,-701558691),i=ba(i,r,n,a,t[10],9,38016083),a=ba(a,i,r,n,t[15],14,-660478335),n=ba(n,a,i,r,t[4],20,-405537848),r=ba(r,n,a,i,t[9],5,568446438),i=ba(i,r,n,a,t[14],9,-1019803690),a=ba(a,i,r,n,t[3],14,-187363961),n=ba(n,a,i,r,t[8],20,1163531501),r=ba(r,n,a,i,t[13],5,-1444681467),i=ba(i,r,n,a,t[2],9,-51403784),a=ba(a,i,r,n,t[7],14,1735328473),r=ja(r,n=ba(n,a,i,r,t[12],20,-1926607734),a,i,t[5],4,-378558),i=ja(i,r,n,a,t[8],11,-2022574463),a=ja(a,i,r,n,t[11],16,1839030562),n=ja(n,a,i,r,t[14],23,-35309556),r=ja(r,n,a,i,t[1],4,-1530992060),i=ja(i,r,n,a,t[4],11,1272893353),a=ja(a,i,r,n,t[7],16,-155497632),n=ja(n,a,i,r,t[10],23,-1094730640),r=ja(r,n,a,i,t[13],4,681279174),i=ja(i,r,n,a,t[0],11,-358537222),a=ja(a,i,r,n,t[3],16,-722521979),n=ja(n,a,i,r,t[6],23,76029189),r=ja(r,n,a,i,t[9],4,-640364487),i=ja(i,r,n,a,t[12],11,-421815835),a=ja(a,i,r,n,t[15],16,530742520),r=_a(r,n=ja(n,a,i,r,t[2],23,-995338651),a,i,t[0],6,-198630844),i=_a(i,r,n,a,t[7],10,1126891415),a=_a(a,i,r,n,t[14],15,-1416354905),n=_a(n,a,i,r,t[5],21,-57434055),r=_a(r,n,a,i,t[12],6,1700485571),i=_a(i,r,n,a,t[3],10,-1894986606),a=_a(a,i,r,n,t[10],15,-1051523),n=_a(n,a,i,r,t[1],21,-2054922799),r=_a(r,n,a,i,t[8],6,1873313359),i=_a(i,r,n,a,t[15],10,-30611744),a=_a(a,i,r,n,t[6],15,-1560198380),n=_a(n,a,i,r,t[13],21,1309151649),r=_a(r,n,a,i,t[4],6,-145523070),i=_a(i,r,n,a,t[11],10,-1120210379),a=_a(a,i,r,n,t[2],15,718787259),n=_a(n,a,i,r,t[9],21,-343485551),e[0]=Mu(r,e[0]),e[1]=Mu(n,e[1]),e[2]=Mu(a,e[2]),e[3]=Mu(i,e[3])}function x0(e,t,r,n,a,i){return t=Mu(Mu(t,e),Mu(n,i)),Mu(t<<a|t>>>32-a,r)}function wa(e,t,r,n,a,i,o){return x0(t&r|~t&n,e,t,a,i,o)}function ba(e,t,r,n,a,i,o){return x0(t&n|r&~n,e,t,a,i,o)}function ja(e,t,r,n,a,i,o){return x0(t^r^n,e,t,a,i,o)}function _a(e,t,r,n,a,i,o){return x0(r^(t|~n),e,t,a,i,o)}function R6(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)M1(n,gK(e.substring(t-64,t)));e=e.substring(t-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)a[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(a[t>>2]|=128<<(t%4<<3),t>55)for(M1(n,a),t=0;t<16;t++)a[t]=0;return a[14]=8*r,M1(n,a),n}function gK(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var VS="0123456789abcdef".split("");function vK(e){for(var t="",r=0;r<4;r++)t+=VS[e>>8*r+4&15]+VS[e>>8*r&15];return t}function xK(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function rb(e){return R6(e).map(xK).join("")}var yK=(function(e){for(var t=0;t<e.length;t++)e[t]=vK(e[t]);return e.join("")})(R6("hello"))!="5d41402abc4b2a76b9719d911017c592";function Mu(e,t){if(yK){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function nb(e,t){var r,n,a,i;if(e!==r){for(var o=(a=e,i=1+(256/e.length|0),new Array(i+1).join(a)),l=[],u=0;u<256;u++)l[u]=u;var f=0;for(u=0;u<256;u++){var h=l[u];f=(f+h+o.charCodeAt(u))%256,l[u]=l[f],l[f]=h}r=e,n=l}else l=n;var p=t.length,v=0,m=0,N="";for(u=0;u<p;u++)m=(m+(h=l[v=(v+1)%256]))%256,l[v]=l[m],l[m]=h,o=l[(l[v]+l[m])%256],N+=String.fromCharCode(t.charCodeAt(u)^o);return N}var WS={print:4,modify:8,copy:16,"annot-forms":32};function mh(e,t,r,n){this.v=1,this.r=2;var a=192;e.forEach(function(l){if(WS.perm!==void 0)throw new Error("Invalid permission: "+l);a+=WS[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^a)),this.encryptionKey=rb(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=nb(this.encryptionKey,this.padding)}function ph(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var a=e.charCodeAt(n);t+=a<33||a===35||a===37||a===40||a===41||a===47||a===60||a===62||a===91||a===93||a===123||a===125||a>126?"#"+("0"+a.toString(16)).slice(-2):e[n]}return t}function HS(e){if(cn(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,a){if(a=a||!1,typeof r!="string"||typeof n!="function"||typeof a!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var i=Math.random().toString(35);return t[r][i]=[n,!!a],i},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),a=[];for(var i in t[r]){var o=t[r][i];try{o[0].apply(e,n)}catch(l){hr.console&&gn.error("jsPDF PubSub Error",l.message,l)}o[1]&&a.push(i)}a.length&&a.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function hx(e){if(!(this instanceof hx))return new hx(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function L6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Hd(e,t,r,n,a){if(!(this instanceof Hd))return new Hd(e,t,r,n,a);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,L6.call(this,n,a)}function bh(e,t,r,n,a){if(!(this instanceof bh))return new bh(e,t,r,n,a);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,L6.call(this,n,a)}function Gt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],a=arguments[2],i=arguments[3],o=[],l=1,u=16,f="S",h=null;cn(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,a=e.format||a,i=e.compress||e.compressPdf||i,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(u=e.floatPrecision),f=e.defaultPathOperation||"S"),o=e.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=HS;var N="1.3",w=m.__private__.getPdfVersion=function(){return N};m.__private__.setPdfVersion=function(P){N=P};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return j};var _=m.__private__.getPageFormat=function(P){return j[P]};a=a||"a4";var C="compat",k="advanced",E=C;function I(){this.saveGraphicsState(),te(new At(zt,0,0,-zt,0,ei()*zt).toString()+" cm"),this.setFontSize(this.getFontSize()/zt),f="n",E=k}function D(){this.restoreGraphicsState(),f="S",E=C}var O=m.__private__.combineFontStyleAndFontWeight=function(P,G){if(P=="bold"&&G=="normal"||P=="bold"&&G==400||P=="normal"&&G=="italic"||P=="bold"&&G=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return G&&(P=G==400||G==="normal"?P==="italic"?"italic":"normal":G!=700&&G!=="bold"||P!=="normal"?(G==700?"bold":G)+""+P:"bold"),P};m.advancedAPI=function(P){var G=E===C;return G&&I.call(this),typeof P!="function"||(P(this),G&&D.call(this)),this},m.compatAPI=function(P){var G=E===k;return G&&D.call(this),typeof P!="function"||(P(this),G&&I.call(this)),this},m.isAdvancedAPI=function(){return E===k};var F,T=function(P){if(E!==k)throw new Error(P+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},z=m.roundToPrecision=m.__private__.roundToPrecision=function(P,G){var pe=t||G;if(isNaN(P)||isNaN(pe))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return P.toFixed(pe).replace(/0+$/,"")};F=m.hpf=m.__private__.hpf=typeof u=="number"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return z(P,u)}:u==="smart"?function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return z(P,P>-1&&P<1?16:5)}:function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.hpf");return z(P,16)};var U=m.f2=m.__private__.f2=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f2");return z(P,2)},B=m.__private__.f3=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.f3");return z(P,3)},K=m.scale=m.__private__.scale=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.scale");return E===C?P*zt:E===k?P:void 0},V=function(P){return K((function(G){return E===C?ei()-G:E===k?G:void 0})(P))};m.__private__.setPrecision=m.setPrecision=function(P){typeof parseInt(P,10)=="number"&&(t=parseInt(P,10))};var de,se="00000000000000000000000000000000",Y=m.__private__.getFileId=function(){return se},W=m.__private__.setFileId=function(P){return se=P!==void 0&&/^[a-fA-F0-9]{32}$/.test(P)?P.toUpperCase():se.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(os=new mh(h.userPermissions,h.userPassword,h.ownerPassword,se)),se};m.setFileId=function(P){return W(P),this},m.getFileId=function(){return Y()};var ee=m.__private__.convertDateToPDFDate=function(P){var G=P.getTimezoneOffset(),pe=G<0?"+":"-",be=Math.floor(Math.abs(G/60)),Te=Math.abs(G%60),Ye=[pe,J(be),"'",J(Te),"'"].join("");return["D:",P.getFullYear(),J(P.getMonth()+1),J(P.getDate()),J(P.getHours()),J(P.getMinutes()),J(P.getSeconds()),Ye].join("")},ge=m.__private__.convertPDFDateToDate=function(P){var G=parseInt(P.substr(2,4),10),pe=parseInt(P.substr(6,2),10)-1,be=parseInt(P.substr(8,2),10),Te=parseInt(P.substr(10,2),10),Ye=parseInt(P.substr(12,2),10),nt=parseInt(P.substr(14,2),10);return new Date(G,pe,be,Te,Ye,nt,0)},re=m.__private__.setCreationDate=function(P){var G;if(P===void 0&&(P=new Date),P instanceof Date)G=ee(P);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(P))throw new Error("Invalid argument passed to jsPDF.setCreationDate");G=P}return de=G},L=m.__private__.getCreationDate=function(P){var G=de;return P==="jsDate"&&(G=ge(de)),G};m.setCreationDate=function(P){return re(P),this},m.getCreationDate=function(P){return L(P)};var q,J=m.__private__.padd2=function(P){return("0"+parseInt(P)).slice(-2)},ne=m.__private__.padd2Hex=function(P){return("00"+(P=P.toString())).substr(P.length)},ue=0,ie=[],oe=[],le=0,ye=[],Pe=[],We=!1,Fe=oe;m.__private__.setCustomOutputDestination=function(P){We=!0,Fe=P};var je=function(P){We||(Fe=P)};m.__private__.resetCustomOutputDestination=function(){We=!1,Fe=oe};var te=m.__private__.out=function(P){return P=P.toString(),le+=P.length+1,Fe.push(P),Fe},Ze=m.__private__.write=function(P){return te(arguments.length===1?P.toString():Array.prototype.join.call(arguments," "))},Nt=m.__private__.getArrayBuffer=function(P){for(var G=P.length,pe=new ArrayBuffer(G),be=new Uint8Array(pe);G--;)be[G]=P.charCodeAt(G);return pe},pt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return pt};var Qe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(P){return Qe=E===k?P/zt:P,this};var me,xe=m.__private__.getFontSize=m.getFontSize=function(){return E===C?Qe:Qe*zt},Ce=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(P){return Ce=P,this},m.__private__.getR2L=m.getR2L=function(){return Ce};var $e,et=m.__private__.setZoomMode=function(P){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(P))me=P;else if(isNaN(P)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(P)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+P+'" is not recognized.');me=P}else me=parseInt(P,10)};m.__private__.getZoomMode=function(){return me};var Ge,tt=m.__private__.setPageMode=function(P){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(P)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+P+'" is not recognized.');$e=P};m.__private__.getPageMode=function(){return $e};var gt=m.__private__.setLayoutMode=function(P){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(P)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+P+'" is not recognized.');Ge=P};m.__private__.getLayoutMode=function(){return Ge},m.__private__.setDisplayMode=m.setDisplayMode=function(P,G,pe){return et(P),gt(G),tt(pe),this};var _t={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(P){if(Object.keys(_t).indexOf(P)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return _t[P]},m.__private__.getDocumentProperties=function(){return _t},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(P){for(var G in _t)_t.hasOwnProperty(G)&&P[G]&&(_t[G]=P[G]);return this},m.__private__.setDocumentProperty=function(P,G){if(Object.keys(_t).indexOf(P)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return _t[P]=G};var yt,zt,bt,Jr,dr,Yt={},or={},Pr=[],Ue={},ar={},Ht={},Xt={},Fr=null,er=0,Rt=[],Ir=new HS(m),Kt=e.hotfixes||[],ir={},Ar={},un=[],At=function P(G,pe,be,Te,Ye,nt){if(!(this instanceof P))return new P(G,pe,be,Te,Ye,nt);isNaN(G)&&(G=1),isNaN(pe)&&(pe=0),isNaN(be)&&(be=0),isNaN(Te)&&(Te=1),isNaN(Ye)&&(Ye=0),isNaN(nt)&&(nt=0),this._matrix=[G,pe,be,Te,Ye,nt]};Object.defineProperty(At.prototype,"sx",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(At.prototype,"shy",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(At.prototype,"shx",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(At.prototype,"sy",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(At.prototype,"tx",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(At.prototype,"ty",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(At.prototype,"a",{get:function(){return this._matrix[0]},set:function(P){this._matrix[0]=P}}),Object.defineProperty(At.prototype,"b",{get:function(){return this._matrix[1]},set:function(P){this._matrix[1]=P}}),Object.defineProperty(At.prototype,"c",{get:function(){return this._matrix[2]},set:function(P){this._matrix[2]=P}}),Object.defineProperty(At.prototype,"d",{get:function(){return this._matrix[3]},set:function(P){this._matrix[3]=P}}),Object.defineProperty(At.prototype,"e",{get:function(){return this._matrix[4]},set:function(P){this._matrix[4]=P}}),Object.defineProperty(At.prototype,"f",{get:function(){return this._matrix[5]},set:function(P){this._matrix[5]=P}}),Object.defineProperty(At.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(At.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(At.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(At.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),At.prototype.join=function(P){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(F).join(P)},At.prototype.multiply=function(P){var G=P.sx*this.sx+P.shy*this.shx,pe=P.sx*this.shy+P.shy*this.sy,be=P.shx*this.sx+P.sy*this.shx,Te=P.shx*this.shy+P.sy*this.sy,Ye=P.tx*this.sx+P.ty*this.shx+this.tx,nt=P.tx*this.shy+P.ty*this.sy+this.ty;return new At(G,pe,be,Te,Ye,nt)},At.prototype.decompose=function(){var P=this.sx,G=this.shy,pe=this.shx,be=this.sy,Te=this.tx,Ye=this.ty,nt=Math.sqrt(P*P+G*G),Lt=(P/=nt)*pe+(G/=nt)*be;pe-=P*Lt,be-=G*Lt;var Bt=Math.sqrt(pe*pe+be*be);return Lt/=Bt,P*(be/=Bt)<G*(pe/=Bt)&&(P=-P,G=-G,Lt=-Lt,nt=-nt),{scale:new At(nt,0,0,Bt,0,0),translate:new At(1,0,0,1,Te,Ye),rotate:new At(P,G,-G,P,0,0),skew:new At(1,0,Lt,1,0,0)}},At.prototype.toString=function(P){return this.join(" ")},At.prototype.inversed=function(){var P=this.sx,G=this.shy,pe=this.shx,be=this.sy,Te=this.tx,Ye=this.ty,nt=1/(P*be-G*pe),Lt=be*nt,Bt=-G*nt,cr=-pe*nt,mr=P*nt;return new At(Lt,Bt,cr,mr,-Lt*Te-cr*Ye,-Bt*Te-mr*Ye)},At.prototype.applyToPoint=function(P){var G=P.x*this.sx+P.y*this.shx+this.tx,pe=P.x*this.shy+P.y*this.sy+this.ty;return new Ja(G,pe)},At.prototype.applyToRectangle=function(P){var G=this.applyToPoint(P),pe=this.applyToPoint(new Ja(P.x+P.w,P.y+P.h));return new Xl(G.x,G.y,pe.x-G.x,pe.y-G.y)},At.prototype.clone=function(){var P=this.sx,G=this.shy,pe=this.shx,be=this.sy,Te=this.tx,Ye=this.ty;return new At(P,G,pe,be,Te,Ye)},m.Matrix=At;var Ee=m.matrixMult=function(P,G){return G.multiply(P)},at=new At(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=at;var wt=function(P,G){if(!ar[P]){var pe=(G instanceof Hd?"Sh":"P")+(Object.keys(Ue).length+1).toString(10);G.id=pe,ar[P]=pe,Ue[pe]=G,Ir.publish("addPattern",G)}};m.ShadingPattern=Hd,m.TilingPattern=bh,m.addShadingPattern=function(P,G){return T("addShadingPattern()"),wt(P,G),this},m.beginTilingPattern=function(P){T("beginTilingPattern()"),Za(P.boundingBox[0],P.boundingBox[1],P.boundingBox[2]-P.boundingBox[0],P.boundingBox[3]-P.boundingBox[1],P.matrix)},m.endTilingPattern=function(P,G){T("endTilingPattern()"),G.stream=Pe[q].join(`
`),wt(P,G),Ir.publish("endTilingPattern",G),un.pop().restore()};var Zt,jr=m.__private__.newObject=function(){var P=tn();return Nn(P,!0),P},tn=m.__private__.newObjectDeferred=function(){return ue++,ie[ue]=function(){return le},ue},Nn=function(P,G){return G=typeof G=="boolean"&&G,ie[P]=le,G&&te(P+" 0 obj"),P},Pa=m.__private__.newAdditionalObject=function(){var P={objId:tn(),content:""};return ye.push(P),P},tl=tn(),gi=tn(),zi=m.__private__.decodeColorString=function(P){var G=P.split(" ");if(G.length!==2||G[1]!=="g"&&G[1]!=="G")G.length!==5||G[4]!=="k"&&G[4]!=="K"||(G=[(1-G[0])*(1-G[3]),(1-G[1])*(1-G[3]),(1-G[2])*(1-G[3]),"r"]);else{var pe=parseFloat(G[0]);G=[pe,pe,pe,"r"]}for(var be="#",Te=0;Te<3;Te++)be+=("0"+Math.floor(255*parseFloat(G[Te])).toString(16)).slice(-2);return be},Ts=m.__private__.encodeColorString=function(P){var G;typeof P=="string"&&(P={ch1:P});var pe=P.ch1,be=P.ch2,Te=P.ch3,Ye=P.ch4,nt=P.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof pe=="string"&&pe.charAt(0)!=="#"){var Lt=new T6(pe);if(Lt.ok)pe=Lt.toHex();else if(!/^\d*\.?\d*$/.test(pe))throw new Error('Invalid color "'+pe+'" passed to jsPDF.encodeColorString.')}if(typeof pe=="string"&&/^#[0-9A-Fa-f]{3}$/.test(pe)&&(pe="#"+pe[1]+pe[1]+pe[2]+pe[2]+pe[3]+pe[3]),typeof pe=="string"&&/^#[0-9A-Fa-f]{6}$/.test(pe)){var Bt=parseInt(pe.substr(1),16);pe=Bt>>16&255,be=Bt>>8&255,Te=255&Bt}if(be===void 0||Ye===void 0&&pe===be&&be===Te)G=typeof pe=="string"?pe+" "+nt[0]:P.precision===2?U(pe/255)+" "+nt[0]:B(pe/255)+" "+nt[0];else if(Ye===void 0||cn(Ye)==="object"){if(Ye&&!isNaN(Ye.a)&&Ye.a===0)return["1.","1.","1.",nt[1]].join(" ");G=typeof pe=="string"?[pe,be,Te,nt[1]].join(" "):P.precision===2?[U(pe/255),U(be/255),U(Te/255),nt[1]].join(" "):[B(pe/255),B(be/255),B(Te/255),nt[1]].join(" ")}else G=typeof pe=="string"?[pe,be,Te,Ye,nt[2]].join(" "):P.precision===2?[U(pe),U(be),U(Te),U(Ye),nt[2]].join(" "):[B(pe),B(be),B(Te),B(Ye),nt[2]].join(" ");return G},Ka=m.__private__.getFilters=function(){return o},Aa=m.__private__.putStream=function(P){var G=(P=P||{}).data||"",pe=P.filters||Ka(),be=P.alreadyAppliedFilters||[],Te=P.addLength1||!1,Ye=G.length,nt=P.objectId,Lt=function(ls){return ls};if(h!==null&&nt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Lt=os.encryptor(nt,0));var Bt={};pe===!0&&(pe=["FlateEncode"]);var cr=P.additionalKeyValues||[],mr=(Bt=Gt.API.processDataByFilters!==void 0?Gt.API.processDataByFilters(G,pe):{data:G,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Bt.data.length!==0&&(cr.push({key:"Length",value:Bt.data.length}),Te===!0&&cr.push({key:"Length1",value:Ye})),mr.length!=0)if(mr.split("/").length-1==1)cr.push({key:"Filter",value:mr});else{cr.push({key:"Filter",value:"["+mr+"]"});for(var Br=0;Br<cr.length;Br+=1)if(cr[Br].key==="DecodeParms"){for(var Sn=[],Kn=0;Kn<Bt.reverseChain.split("/").length-1;Kn+=1)Sn.push("null");Sn.push(cr[Br].value),cr[Br].value="["+Sn.join(" ")+"]"}}te("<<");for(var dn=0;dn<cr.length;dn++)te("/"+cr[dn].key+" "+cr[dn].value);te(">>"),Bt.data.length!==0&&(te("stream"),te(Lt(Bt.data)),te("endstream"))},zl=m.__private__.putPage=function(P){var G=P.number,pe=P.data,be=P.objId,Te=P.contentsObjId;Nn(be,!0),te("<</Type /Page"),te("/Parent "+P.rootDictionaryObjId+" 0 R"),te("/Resources "+P.resourceDictionaryObjId+" 0 R"),te("/MediaBox ["+parseFloat(F(P.mediaBox.bottomLeftX))+" "+parseFloat(F(P.mediaBox.bottomLeftY))+" "+F(P.mediaBox.topRightX)+" "+F(P.mediaBox.topRightY)+"]"),P.cropBox!==null&&te("/CropBox ["+F(P.cropBox.bottomLeftX)+" "+F(P.cropBox.bottomLeftY)+" "+F(P.cropBox.topRightX)+" "+F(P.cropBox.topRightY)+"]"),P.bleedBox!==null&&te("/BleedBox ["+F(P.bleedBox.bottomLeftX)+" "+F(P.bleedBox.bottomLeftY)+" "+F(P.bleedBox.topRightX)+" "+F(P.bleedBox.topRightY)+"]"),P.trimBox!==null&&te("/TrimBox ["+F(P.trimBox.bottomLeftX)+" "+F(P.trimBox.bottomLeftY)+" "+F(P.trimBox.topRightX)+" "+F(P.trimBox.topRightY)+"]"),P.artBox!==null&&te("/ArtBox ["+F(P.artBox.bottomLeftX)+" "+F(P.artBox.bottomLeftY)+" "+F(P.artBox.topRightX)+" "+F(P.artBox.topRightY)+"]"),typeof P.userUnit=="number"&&P.userUnit!==1&&te("/UserUnit "+P.userUnit),Ir.publish("putPage",{objId:be,pageContext:Rt[G],pageNumber:G,page:pe}),te("/Contents "+Te+" 0 R"),te(">>"),te("endobj");var Ye=pe.join(`
`);return E===k&&(Ye+=`
Q`),Nn(Te,!0),Aa({data:Ye,filters:Ka(),objectId:Te}),te("endobj"),be},vi=m.__private__.putPages=function(){var P,G,pe=[];for(P=1;P<=er;P++)Rt[P].objId=tn(),Rt[P].contentsObjId=tn();for(P=1;P<=er;P++)pe.push(zl({number:P,data:Pe[P],objId:Rt[P].objId,contentsObjId:Rt[P].contentsObjId,mediaBox:Rt[P].mediaBox,cropBox:Rt[P].cropBox,bleedBox:Rt[P].bleedBox,trimBox:Rt[P].trimBox,artBox:Rt[P].artBox,userUnit:Rt[P].userUnit,rootDictionaryObjId:tl,resourceDictionaryObjId:gi}));Nn(tl,!0),te("<</Type /Pages");var be="/Kids [";for(G=0;G<er;G++)be+=pe[G]+" 0 R ";te(be+"]"),te("/Count "+er),te(">>"),te("endobj"),Ir.publish("postPutPages")},rl=function(P){Ir.publish("putFont",{font:P,out:te,newObject:jr,putStream:Aa}),P.isAlreadyPutted!==!0&&(P.objectNumber=jr(),te("<<"),te("/Type /Font"),te("/BaseFont /"+ph(P.postScriptName)),te("/Subtype /Type1"),typeof P.encoding=="string"&&te("/Encoding /"+P.encoding),te("/FirstChar 32"),te("/LastChar 255"),te(">>"),te("endobj"))},ql=function(P){P.objectNumber=jr();var G=[];G.push({key:"Type",value:"/XObject"}),G.push({key:"Subtype",value:"/Form"}),G.push({key:"BBox",value:"["+[F(P.x),F(P.y),F(P.x+P.width),F(P.y+P.height)].join(" ")+"]"}),G.push({key:"Matrix",value:"["+P.matrix.toString()+"]"});var pe=P.pages[1].join(`
`);Aa({data:pe,additionalKeyValues:G,objectId:P.objectNumber}),te("endobj")},Vl=function(P,G){G||(G=21);var pe=jr(),be=(function(nt,Lt){var Bt,cr=[],mr=1/(Lt-1);for(Bt=0;Bt<1;Bt+=mr)cr.push(Bt);if(cr.push(1),nt[0].offset!=0){var Br={offset:0,color:nt[0].color};nt.unshift(Br)}if(nt[nt.length-1].offset!=1){var Sn={offset:1,color:nt[nt.length-1].color};nt.push(Sn)}for(var Kn="",dn=0,ls=0;ls<cr.length;ls++){for(Bt=cr[ls];Bt>nt[dn+1].offset;)dn++;var In=nt[dn].offset,Rs=(Bt-In)/(nt[dn+1].offset-In),ho=nt[dn].color,wi=nt[dn+1].color;Kn+=ne(Math.round((1-Rs)*ho[0]+Rs*wi[0]).toString(16))+ne(Math.round((1-Rs)*ho[1]+Rs*wi[1]).toString(16))+ne(Math.round((1-Rs)*ho[2]+Rs*wi[2]).toString(16))}return Kn.trim()})(P.colors,G),Te=[];Te.push({key:"FunctionType",value:"0"}),Te.push({key:"Domain",value:"[0.0 1.0]"}),Te.push({key:"Size",value:"["+G+"]"}),Te.push({key:"BitsPerSample",value:"8"}),Te.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Te.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Aa({data:be,additionalKeyValues:Te,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:pe}),te("endobj"),P.objectNumber=jr(),te("<< /ShadingType "+P.type),te("/ColorSpace /DeviceRGB");var Ye="/Coords ["+F(parseFloat(P.coords[0]))+" "+F(parseFloat(P.coords[1]))+" ";P.type===2?Ye+=F(parseFloat(P.coords[2]))+" "+F(parseFloat(P.coords[3])):Ye+=F(parseFloat(P.coords[2]))+" "+F(parseFloat(P.coords[3]))+" "+F(parseFloat(P.coords[4]))+" "+F(parseFloat(P.coords[5])),te(Ye+="]"),P.matrix&&te("/Matrix ["+P.matrix.toString()+"]"),te("/Function "+pe+" 0 R"),te("/Extend [true true]"),te(">>"),te("endobj")},Vc=function(P,G){var pe=tn(),be=jr();G.push({resourcesOid:pe,objectOid:be}),P.objectNumber=be;var Te=[];Te.push({key:"Type",value:"/Pattern"}),Te.push({key:"PatternType",value:"1"}),Te.push({key:"PaintType",value:"1"}),Te.push({key:"TilingType",value:"1"}),Te.push({key:"BBox",value:"["+P.boundingBox.map(F).join(" ")+"]"}),Te.push({key:"XStep",value:F(P.xStep)}),Te.push({key:"YStep",value:F(P.yStep)}),Te.push({key:"Resources",value:pe+" 0 R"}),P.matrix&&Te.push({key:"Matrix",value:"["+P.matrix.toString()+"]"}),Aa({data:P.stream,additionalKeyValues:Te,objectId:P.objectNumber}),te("endobj")},dm=function(P){for(var G in P.objectNumber=jr(),te("<<"),P)switch(G){case"opacity":te("/ca "+U(P[G]));break;case"stroke-opacity":te("/CA "+U(P[G]))}te(">>"),te("endobj")},mn=function(P){Nn(P.resourcesOid,!0),te("<<"),te("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var G in te("/Font <<"),Yt)Yt.hasOwnProperty(G)&&(p===!1||p===!0&&v.hasOwnProperty(G))&&te("/"+G+" "+Yt[G].objectNumber+" 0 R");te(">>")})(),(function(){if(Object.keys(Ue).length>0){for(var G in te("/Shading <<"),Ue)Ue.hasOwnProperty(G)&&Ue[G]instanceof Hd&&Ue[G].objectNumber>=0&&te("/"+G+" "+Ue[G].objectNumber+" 0 R");Ir.publish("putShadingPatternDict"),te(">>")}})(),(function(G){if(Object.keys(Ue).length>0){for(var pe in te("/Pattern <<"),Ue)Ue.hasOwnProperty(pe)&&Ue[pe]instanceof m.TilingPattern&&Ue[pe].objectNumber>=0&&Ue[pe].objectNumber<G&&te("/"+pe+" "+Ue[pe].objectNumber+" 0 R");Ir.publish("putTilingPatternDict"),te(">>")}})(P.objectOid),(function(){if(Object.keys(Ht).length>0){var G;for(G in te("/ExtGState <<"),Ht)Ht.hasOwnProperty(G)&&Ht[G].objectNumber>=0&&te("/"+G+" "+Ht[G].objectNumber+" 0 R");Ir.publish("putGStateDict"),te(">>")}})(),(function(){for(var G in te("/XObject <<"),ir)ir.hasOwnProperty(G)&&ir[G].objectNumber>=0&&te("/"+G+" "+ir[G].objectNumber+" 0 R");Ir.publish("putXobjectDict"),te(">>")})(),te(">>"),te("endobj")},_f=function(P){or[P.fontName]=or[P.fontName]||{},or[P.fontName][P.fontStyle]=P.id},Wc=function(P,G,pe,be,Te){var Ye={id:"F"+(Object.keys(Yt).length+1).toString(10),postScriptName:P,fontName:G,fontStyle:pe,encoding:be,isStandardFont:Te||!1,metadata:{}};return Ir.publish("addFont",{font:Ye,instance:this}),Yt[Ye.id]=Ye,_f(Ye),Ye.id},Ta=m.__private__.pdfEscape=m.pdfEscape=function(P,G){return(function(pe,be){var Te,Ye,nt,Lt,Bt,cr,mr,Br,Sn;if(nt=(be=be||{}).sourceEncoding||"Unicode",Bt=be.outputEncoding,(be.autoencode||Bt)&&Yt[yt].metadata&&Yt[yt].metadata[nt]&&Yt[yt].metadata[nt].encoding&&(Lt=Yt[yt].metadata[nt].encoding,!Bt&&Yt[yt].encoding&&(Bt=Yt[yt].encoding),!Bt&&Lt.codePages&&(Bt=Lt.codePages[0]),typeof Bt=="string"&&(Bt=Lt[Bt]),Bt)){for(mr=!1,cr=[],Te=0,Ye=pe.length;Te<Ye;Te++)(Br=Bt[pe.charCodeAt(Te)])?cr.push(String.fromCharCode(Br)):cr.push(pe[Te]),cr[Te].charCodeAt(0)>>8&&(mr=!0);pe=cr.join("")}for(Te=pe.length;mr===void 0&&Te!==0;)pe.charCodeAt(Te-1)>>8&&(mr=!0),Te--;if(!mr)return pe;for(cr=be.noBOM?[]:[254,255],Te=0,Ye=pe.length;Te<Ye;Te++){if((Sn=(Br=pe.charCodeAt(Te))>>8)>>8)throw new Error("Character at position "+Te+" of string '"+pe+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");cr.push(Sn),cr.push(Br-(Sn<<8))}return String.fromCharCode.apply(void 0,cr)})(P,G).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nl=m.__private__.beginPage=function(P){Pe[++er]=[],Rt[er]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(P[0]),topRightY:Number(P[1])}},Wl(er),je(Pe[q])},Nf=function(P,G){var pe,be,Te;switch(r=G||r,typeof P=="string"&&(pe=_(P.toLowerCase()),Array.isArray(pe)&&(be=pe[0],Te=pe[1])),Array.isArray(P)&&(be=P[0]*zt,Te=P[1]*zt),isNaN(be)&&(be=a[0],Te=a[1]),(be>14400||Te>14400)&&(gn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Te=Math.min(14400,Te)),a=[be,Te],r.substr(0,1)){case"l":Te>be&&(a=[Te,be]);break;case"p":be>Te&&(a=[Te,be])}nl(a),sr(Qa),te(Jl),hd!==0&&te(hd+" J"),md!==0&&te(md+" j"),Ir.publish("addPage",{pageNumber:er})},Hc=function(P){P>0&&P<=er&&(Pe.splice(P,1),Rt.splice(P,1),er--,q>er&&(q=er),this.setPage(q))},Wl=function(P){P>0&&P<=er&&(q=P)},Ra=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Pe.length-1},Sf=function(P,G,pe){var be,Te=void 0;return pe=pe||{},P=P!==void 0?P:Yt[yt].fontName,G=G!==void 0?G:Yt[yt].fontStyle,be=P.toLowerCase(),or[be]!==void 0&&or[be][G]!==void 0?Te=or[be][G]:or[P]!==void 0&&or[P][G]!==void 0?Te=or[P][G]:pe.disableWarning===!1&&gn.warn("Unable to look up font label for font '"+P+"', '"+G+"'. Refer to getFontList() for available fonts."),Te||pe.noFallback||(Te=or.times[G])==null&&(Te=or.times.normal),Te},Hn=m.__private__.putInfo=function(){var P=jr(),G=function(be){return be};for(var pe in h!==null&&(G=os.encryptor(P,0)),te("<<"),te("/Producer ("+Ta(G("jsPDF "+Gt.version))+")"),_t)_t.hasOwnProperty(pe)&&_t[pe]&&te("/"+pe.substr(0,1).toUpperCase()+pe.substr(1)+" ("+Ta(G(_t[pe]))+")");te("/CreationDate ("+Ta(G(de))+")"),te(">>"),te("endobj")},Gc=m.__private__.putCatalog=function(P){var G=(P=P||{}).rootDictionaryObjId||tl;switch(jr(),te("<<"),te("/Type /Catalog"),te("/Pages "+G+" 0 R"),me||(me="fullwidth"),me){case"fullwidth":te("/OpenAction [3 0 R /FitH null]");break;case"fullheight":te("/OpenAction [3 0 R /FitV null]");break;case"fullpage":te("/OpenAction [3 0 R /Fit]");break;case"original":te("/OpenAction [3 0 R /XYZ null null 1]");break;default:var pe=""+me;pe.substr(pe.length-1)==="%"&&(me=parseInt(me)/100),typeof me=="number"&&te("/OpenAction [3 0 R /XYZ null null "+U(me)+"]")}switch(Ge||(Ge="continuous"),Ge){case"continuous":te("/PageLayout /OneColumn");break;case"single":te("/PageLayout /SinglePage");break;case"two":case"twoleft":te("/PageLayout /TwoColumnLeft");break;case"tworight":te("/PageLayout /TwoColumnRight")}$e&&te("/PageMode /"+$e),Ir.publish("putCatalog"),te(">>"),te("endobj")},fm=m.__private__.putTrailer=function(){te("trailer"),te("<<"),te("/Size "+(ue+1)),te("/Root "+ue+" 0 R"),te("/Info "+(ue-1)+" 0 R"),h!==null&&te("/Encrypt "+os.oid+" 0 R"),te("/ID [ <"+se+"> <"+se+"> ]"),te(">>")},Gn=m.__private__.putHeader=function(){te("%PDF-"+N),te("%")},Hl=m.__private__.putXRef=function(){var P="0000000000";te("xref"),te("0 "+(ue+1)),te("0000000000 65535 f ");for(var G=1;G<=ue;G++)typeof ie[G]=="function"?te((P+ie[G]()).slice(-10)+" 00000 n "):ie[G]!==void 0?te((P+ie[G]).slice(-10)+" 00000 n "):te("0000000000 00000 n ")},La=m.__private__.buildDocument=function(){var P;ue=0,le=0,oe=[],ie=[],ye=[],tl=tn(),gi=tn(),je(oe),Ir.publish("buildDocument"),Gn(),vi(),(function(){Ir.publish("putAdditionalObjects");for(var pe=0;pe<ye.length;pe++){var be=ye[pe];Nn(be.objId,!0),te(be.content),te("endobj")}Ir.publish("postPutAdditionalObjects")})(),P=[],(function(){for(var pe in Yt)Yt.hasOwnProperty(pe)&&(p===!1||p===!0&&v.hasOwnProperty(pe))&&rl(Yt[pe])})(),(function(){var pe;for(pe in Ht)Ht.hasOwnProperty(pe)&&dm(Ht[pe])})(),(function(){for(var pe in ir)ir.hasOwnProperty(pe)&&ql(ir[pe])})(),(function(pe){var be;for(be in Ue)Ue.hasOwnProperty(be)&&(Ue[be]instanceof Hd?Vl(Ue[be]):Ue[be]instanceof bh&&Vc(Ue[be],pe))})(P),Ir.publish("putResources"),P.forEach(mn),mn({resourcesOid:gi,objectOid:Number.MAX_SAFE_INTEGER}),Ir.publish("postPutResources"),h!==null&&(os.oid=jr(),te("<<"),te("/Filter /Standard"),te("/V "+os.v),te("/R "+os.r),te("/U <"+os.toHexString(os.U)+">"),te("/O <"+os.toHexString(os.O)+">"),te("/P "+os.P),te(">>"),te("endobj")),Hn(),Gc();var G=le;return Hl(),fm(),te("startxref"),te(""+G),te("%%EOF"),je(Pe[q]),oe.join(`
`)},qi=m.__private__.getBlob=function(P){return new Blob([Nt(P)],{type:"application/pdf"})},Gl=m.output=m.__private__.output=(Zt=function(P,G){switch(typeof(G=G||{})=="string"?G={filename:G}:G.filename=G.filename||"generated.pdf",P){case void 0:return La();case"save":m.save(G.filename);break;case"arraybuffer":return Nt(La());case"blob":return qi(La());case"bloburi":case"bloburl":if(hr.URL!==void 0&&typeof hr.URL.createObjectURL=="function")return hr.URL&&hr.URL.createObjectURL(qi(La()))||void 0;gn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var pe="",be=La();try{pe=qS(be)}catch{pe=qS(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+G.filename+";base64,"+pe;case"pdfobjectnewwindow":if(Object.prototype.toString.call(hr)==="[object Window]"){var Te="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';G.pdfObjectUrl&&(Te=G.pdfObjectUrl,Ye="");var nt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Te+'"'+Ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(G)+");<\/script></body></html>",Lt=hr.open();return Lt!==null&&Lt.document.write(nt),Lt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(hr)==="[object Window]"){var Bt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(G.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+G.filename+'" width="500px" height="400px" /></body></html>',cr=hr.open();if(cr!==null){cr.document.write(Bt);var mr=this;cr.document.documentElement.querySelector("#pdfViewer").onload=function(){cr.document.title=G.filename,cr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(mr.output("bloburl"))}}return cr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(hr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Br='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",G)+'"></iframe></body></html>',Sn=hr.open();if(Sn!==null&&(Sn.document.write(Br),Sn.document.title=G.filename),Sn||typeof safari>"u")return Sn;break;case"datauri":case"dataurl":return hr.document.location.href=this.output("datauristring",G);default:return null}},Zt.foo=function(){try{return Zt.apply(this,arguments)}catch(pe){var P=pe.stack||"";~P.indexOf(" at ")&&(P=P.split(" at ")[1]);var G="Error in function "+P.split(`
`)[0].split("<")[0]+": "+pe.message;if(!hr.console)throw new Error(G);hr.console.error(G,pe),hr.alert&&alert(G)}},Zt.foo.bar=Zt,Zt.foo),Ya=function(P){return Array.isArray(Kt)===!0&&Kt.indexOf(P)>-1};switch(n){case"pt":zt=1;break;case"mm":zt=72/25.4;break;case"cm":zt=72/2.54;break;case"in":zt=72;break;case"px":zt=Ya("px_scaling")==1?.75:96/72;break;case"pc":case"em":zt=12;break;case"ex":zt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);zt=n}var os=null;re(),W();var xi=m.__private__.getPageInfo=m.getPageInfo=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Rt[P].objId,pageNumber:P,pageContext:Rt[P]}},cd=m.__private__.getPageInfoByObjId=function(P){if(isNaN(P)||P%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var G in Rt)if(Rt[G].objId===P)break;return xi(G)},ud=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Rt[q].objId,pageNumber:q,pageContext:Rt[q]}};m.addPage=function(){return Nf.apply(this,arguments),this},m.setPage=function(){return Wl.apply(this,arguments),je.call(this,Pe[q]),this},m.insertPage=function(P){return this.addPage(),this.movePage(q,P),this},m.movePage=function(P,G){var pe,be;if(P>G){pe=Pe[P],be=Rt[P];for(var Te=P;Te>G;Te--)Pe[Te]=Pe[Te-1],Rt[Te]=Rt[Te-1];Pe[G]=pe,Rt[G]=be,this.setPage(G)}else if(P<G){pe=Pe[P],be=Rt[P];for(var Ye=P;Ye<G;Ye++)Pe[Ye]=Pe[Ye+1],Rt[Ye]=Rt[Ye+1];Pe[G]=pe,Rt[G]=be,this.setPage(G)}return this},m.deletePage=function(){return Hc.apply(this,arguments),this},m.__private__.text=m.text=function(P,G,pe,be,Te){var Ye,nt,Lt,Bt,cr,mr,Br,Sn,Kn,dn=(be=be||{}).scope||this;if(typeof P=="number"&&typeof G=="number"&&(typeof pe=="string"||Array.isArray(pe))){var ls=pe;pe=G,G=P,P=ls}if(arguments[3]instanceof At==0?(Lt=arguments[4],Bt=arguments[5],cn(Br=arguments[3])==="object"&&Br!==null||(typeof Lt=="string"&&(Bt=Lt,Lt=null),typeof Br=="string"&&(Bt=Br,Br=null),typeof Br=="number"&&(Lt=Br,Br=null),be={flags:Br,angle:Lt,align:Bt})):(T("The transform parameter of text() with a Matrix value"),Kn=Te),isNaN(G)||isNaN(pe)||P==null)throw new Error("Invalid arguments passed to jsPDF.text");if(P.length===0)return dn;var In,Rs="",ho=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:ca,wi=dn.internal.scaleFactor;function mo(zr){return zr=zr.split("	").join(Array(be.TabLen||9).join(" ")),Ta(zr,Br)}function rc(zr){for(var Zr,An=zr.concat(),Yn=[],_i=An.length;_i--;)typeof(Zr=An.shift())=="string"?Yn.push(Zr):Array.isArray(zr)&&(Zr.length===1||Zr[1]===void 0&&Zr[2]===void 0)?Yn.push(Zr[0]):Yn.push([Zr[0],Zr[1],Zr[2]]);return Yn}function tu(zr,Zr){var An;if(typeof zr=="string")An=Zr(zr)[0];else if(Array.isArray(zr)){for(var Yn,_i,xd=zr.concat(),iu=[],yo=xd.length;yo--;)typeof(Yn=xd.shift())=="string"?iu.push(Zr(Yn)[0]):Array.isArray(Yn)&&typeof Yn[0]=="string"&&(_i=Zr(Yn[0],Yn[1],Yn[2]),iu.push([_i[0],_i[1],_i[2]]));An=iu}return An}var il=!1,nc=!0;if(typeof P=="string")il=!0;else if(Array.isArray(P)){var ol=P.concat();nt=[];for(var ll,Ls=ol.length;Ls--;)(typeof(ll=ol.shift())!="string"||Array.isArray(ll)&&typeof ll[0]!="string")&&(nc=!1);il=nc}if(il===!1)throw new Error('Type of text must be string or Array. "'+P+'" is not recognized.');typeof P=="string"&&(P=P.match(/[\r?\n]/)?P.split(/\r\n|\r|\n/g):[P]);var sc=Qe/dn.internal.scaleFactor,ac=sc*(ho-1);switch(be.baseline){case"bottom":pe-=ac;break;case"top":pe+=sc-ac;break;case"hanging":pe+=sc-2*ac;break;case"middle":pe+=sc/2-ac}if((mr=be.maxWidth||0)>0&&(typeof P=="string"?P=dn.splitTextToSize(P,mr):Object.prototype.toString.call(P)==="[object Array]"&&(P=P.reduce(function(zr,Zr){return zr.concat(dn.splitTextToSize(Zr,mr))},[]))),Ye={text:P,x:G,y:pe,options:be,mutex:{pdfEscape:Ta,activeFontKey:yt,fonts:Yt,activeFontSize:Qe}},Ir.publish("preProcessText",Ye),P=Ye.text,Lt=(be=Ye.options).angle,Kn instanceof At==0&&Lt&&typeof Lt=="number"){Lt*=Math.PI/180,be.rotationDirection===0&&(Lt=-Lt),E===k&&(Lt=-Lt);var gd=Math.cos(Lt),vd=Math.sin(Lt);Kn=new At(gd,vd,-vd,gd,0,0)}else Lt&&Lt instanceof At&&(Kn=Lt);E!==k||Kn||(Kn=at),(cr=be.charSpace||ua)!==void 0&&(Rs+=F(K(cr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Sn=be.horizontalScale)!==void 0&&(Rs+=F(100*Sn)+` Tz
`),be.lang;var ta=-1,bi=be.renderingMode!==void 0?be.renderingMode:be.stroke,Ki=dn.internal.getCurrentPageInfo().pageContext;switch(bi){case 0:case!1:case"fill":ta=0;break;case 1:case!0:case"stroke":ta=1;break;case 2:case"fillThenStroke":ta=2;break;case 3:case"invisible":ta=3;break;case 4:case"fillAndAddForClipping":ta=4;break;case 5:case"strokeAndAddPathForClipping":ta=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":ta=6;break;case 7:case"addToPathForClipping":ta=7}var Af=Ki.usedRenderingMode!==void 0?Ki.usedRenderingMode:-1;ta!==-1?Rs+=ta+` Tr
`:Af!==-1&&(Rs+=`0 Tr
`),ta!==-1&&(Ki.usedRenderingMode=ta),Bt=be.align||"left";var Ia,cl=Qe*ho,ru=dn.internal.pageSize.getWidth(),nu=Yt[yt];cr=be.charSpace||ua,mr=be.maxWidth||0,Br=Object.assign({autoencode:!0,noBOM:!0},be.flags);var po=[],ti=function(zr){return dn.getStringUnitWidth(zr,{font:nu,charSpace:cr,fontSize:Qe,doKerning:!1})*Qe/wi};if(Object.prototype.toString.call(P)==="[object Array]"){var Oa;nt=rc(P),Bt!=="left"&&(Ia=nt.map(ti));var Ma,ul=0;if(Bt==="right"){G-=Ia[0],P=[],Ls=nt.length;for(var Yi=0;Yi<Ls;Yi++)Yi===0?(Ma=Da(G),Oa=uo(pe)):(Ma=K(ul-Ia[Yi]),Oa=-cl),P.push([nt[Yi],Ma,Oa]),ul=Ia[Yi]}else if(Bt==="center"){G-=Ia[0]/2,P=[],Ls=nt.length;for(var go=0;go<Ls;go++)go===0?(Ma=Da(G),Oa=uo(pe)):(Ma=K((ul-Ia[go])/2),Oa=-cl),P.push([nt[go],Ma,Oa]),ul=Ia[go]}else if(Bt==="left"){P=[],Ls=nt.length;for(var vo=0;vo<Ls;vo++)P.push(nt[vo])}else if(Bt==="justify"&&nu.encoding==="Identity-H"){P=[],Ls=nt.length,mr=mr!==0?mr:ru;for(var Qi=0,On=0;On<Ls;On++)if(Oa=On===0?uo(pe):-cl,Ma=On===0?Da(G):Qi,On<Ls-1){var ic=K((mr-Ia[On])/(nt[On].split(" ").length-1)),Ji=nt[On].split(" ");P.push([Ji[0]+" ",Ma,Oa]),Qi=0;for(var ji=1;ji<Ji.length;ji++){var oc=(ti(Ji[ji-1]+" "+Ji[ji])-ti(Ji[ji]))*wi+ic;ji==Ji.length-1?P.push([Ji[ji],oc,0]):P.push([Ji[ji]+" ",oc,0]),Qi-=oc}}else P.push([nt[On],Ma,Oa]);P.push(["",Qi,0])}else{if(Bt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(P=[],Ls=nt.length,mr=mr!==0?mr:ru,On=0;On<Ls;On++){Oa=On===0?uo(pe):-cl,Ma=On===0?Da(G):0;var lc=nt[On].split(" ").length-1,su=lc>0?(mr-Ia[On])/lc:0;On<Ls-1?po.push(F(K(su))):po.push(0),P.push([nt[On],Ma,Oa])}}}(typeof be.R2L=="boolean"?be.R2L:Ce)===!0&&(P=tu(P,function(zr,Zr,An){return[zr.split("").reverse().join(""),Zr,An]})),Ye={text:P,x:G,y:pe,options:be,mutex:{pdfEscape:Ta,activeFontKey:yt,fonts:Yt,activeFontSize:Qe}},Ir.publish("postProcessText",Ye),P=Ye.text,In=Ye.mutex.isHex||!1;var au=Yt[yt].encoding;au!=="WinAnsiEncoding"&&au!=="StandardEncoding"||(P=tu(P,function(zr,Zr,An){return[mo(zr),Zr,An]})),nt=rc(P),P=[];for(var xo,dl,fl,cc=Array.isArray(nt[0])?1:0,hl="",uc=function(zr,Zr,An){var Yn="";return An instanceof At?(An=typeof be.angle=="number"?Ee(An,new At(1,0,0,1,zr,Zr)):Ee(new At(1,0,0,1,zr,Zr),An),E===k&&(An=Ee(new At(1,0,0,-1,0,0),An)),Yn=An.join(" ")+` Tm
`):Yn=F(zr)+" "+F(Zr)+` Td
`,Yn},Pn=0;Pn<nt.length;Pn++){switch(hl="",cc){case 1:fl=(In?"<":"(")+nt[Pn][0]+(In?">":")"),xo=parseFloat(nt[Pn][1]),dl=parseFloat(nt[Pn][2]);break;case 0:fl=(In?"<":"(")+nt[Pn]+(In?">":")"),xo=Da(G),dl=uo(pe)}po!==void 0&&po[Pn]!==void 0&&(hl=po[Pn]+` Tw
`),Pn===0?P.push(hl+uc(xo,dl,Kn)+fl):cc===0?P.push(hl+fl):cc===1&&P.push(hl+uc(xo,dl,Kn)+fl)}P=cc===0?P.join(` Tj
T* `):P.join(` Tj
`),P+=` Tj
`;var da=`BT
/`;return da+=yt+" "+Qe+` Tf
`,da+=F(Qe*ho)+` TL
`,da+=yi+`
`,da+=Rs,da+=P,te(da+="ET"),v[yt]=!0,dn};var Kl=m.__private__.clip=m.clip=function(P){return te(P==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Kl("evenodd")},m.__private__.discardPath=m.discardPath=function(){return te("n"),this};var Vi=m.__private__.isValidStyle=function(P){var G=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(P)!==-1&&(G=!0),G};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(P){return Vi(P)&&(f=P),this};var Kc=m.__private__.getStyle=m.getStyle=function(P){var G=f;switch(P){case"D":case"S":G="S";break;case"F":G="f";break;case"FD":case"DF":G="B";break;case"f":case"f*":case"B":case"B*":G=P}return G},$r=m.close=function(){return te("h"),this};m.stroke=function(){return te("S"),this},m.fill=function(P){return Yl("f",P),this},m.fillEvenOdd=function(P){return Yl("f*",P),this},m.fillStroke=function(P){return Yl("B",P),this},m.fillStrokeEvenOdd=function(P){return Yl("B*",P),this};var Yl=function(P,G){cn(G)==="object"?kf(G,P):te(P)},sl=function(P){P===null||E===k&&P===void 0||(P=Kc(P),te(P))};function dd(P,G,pe,be,Te){var Ye=new bh(G||this.boundingBox,pe||this.xStep,be||this.yStep,this.gState,Te||this.matrix);Ye.stream=this.stream;var nt=P+"$$"+this.cloneIndex+++"$$";return wt(nt,Ye),Ye}var kf=function(P,G){var pe=ar[P.key],be=Ue[pe];if(be instanceof Hd)te("q"),te(Cf(G)),be.gState&&m.setGState(be.gState),te(P.matrix.toString()+" cm"),te("/"+pe+" sh"),te("Q");else if(be instanceof bh){var Te=new At(1,0,0,-1,0,ei());P.matrix&&(Te=Te.multiply(P.matrix||at),pe=dd.call(be,P.key,P.boundingBox,P.xStep,P.yStep,Te).id),te("q"),te("/Pattern cs"),te("/"+pe+" scn"),be.gState&&m.setGState(be.gState),te(G),te("Q")}},Cf=function(P){switch(P){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Yc=m.moveTo=function(P,G){return te(F(K(P))+" "+F(V(G))+" m"),this},Qc=m.lineTo=function(P,G){return te(F(K(P))+" "+F(V(G))+" l"),this},la=m.curveTo=function(P,G,pe,be,Te,Ye){return te([F(K(P)),F(V(G)),F(K(pe)),F(V(be)),F(K(Te)),F(V(Ye)),"c"].join(" ")),this};m.__private__.line=m.line=function(P,G,pe,be,Te){if(isNaN(P)||isNaN(G)||isNaN(pe)||isNaN(be)||!Vi(Te))throw new Error("Invalid arguments passed to jsPDF.line");return E===C?this.lines([[pe-P,be-G]],P,G,[1,1],Te||"S"):this.lines([[pe-P,be-G]],P,G,[1,1]).stroke()},m.__private__.lines=m.lines=function(P,G,pe,be,Te,Ye){var nt,Lt,Bt,cr,mr,Br,Sn,Kn,dn,ls,In,Rs;if(typeof P=="number"&&(Rs=pe,pe=G,G=P,P=Rs),be=be||[1,1],Ye=Ye||!1,isNaN(G)||isNaN(pe)||!Array.isArray(P)||!Array.isArray(be)||!Vi(Te)||typeof Ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Yc(G,pe),nt=be[0],Lt=be[1],cr=P.length,ls=G,In=pe,Bt=0;Bt<cr;Bt++)(mr=P[Bt]).length===2?(ls=mr[0]*nt+ls,In=mr[1]*Lt+In,Qc(ls,In)):(Br=mr[0]*nt+ls,Sn=mr[1]*Lt+In,Kn=mr[2]*nt+ls,dn=mr[3]*Lt+In,ls=mr[4]*nt+ls,In=mr[5]*Lt+In,la(Br,Sn,Kn,dn,ls,In));return Ye&&$r(),sl(Te),this},m.path=function(P){for(var G=0;G<P.length;G++){var pe=P[G],be=pe.c;switch(pe.op){case"m":Yc(be[0],be[1]);break;case"l":Qc(be[0],be[1]);break;case"c":la.apply(this,be);break;case"h":$r()}}return this},m.__private__.rect=m.rect=function(P,G,pe,be,Te){if(isNaN(P)||isNaN(G)||isNaN(pe)||isNaN(be)||!Vi(Te))throw new Error("Invalid arguments passed to jsPDF.rect");return E===C&&(be=-be),te([F(K(P)),F(V(G)),F(K(pe)),F(K(be)),"re"].join(" ")),sl(Te),this},m.__private__.triangle=m.triangle=function(P,G,pe,be,Te,Ye,nt){if(isNaN(P)||isNaN(G)||isNaN(pe)||isNaN(be)||isNaN(Te)||isNaN(Ye)||!Vi(nt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[pe-P,be-G],[Te-pe,Ye-be],[P-Te,G-Ye]],P,G,[1,1],nt,!0),this},m.__private__.roundedRect=m.roundedRect=function(P,G,pe,be,Te,Ye,nt){if(isNaN(P)||isNaN(G)||isNaN(pe)||isNaN(be)||isNaN(Te)||isNaN(Ye)||!Vi(nt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Lt=4/3*(Math.SQRT2-1);return Te=Math.min(Te,.5*pe),Ye=Math.min(Ye,.5*be),this.lines([[pe-2*Te,0],[Te*Lt,0,Te,Ye-Ye*Lt,Te,Ye],[0,be-2*Ye],[0,Ye*Lt,-Te*Lt,Ye,-Te,Ye],[2*Te-pe,0],[-Te*Lt,0,-Te,-Ye*Lt,-Te,-Ye],[0,2*Ye-be],[0,-Ye*Lt,Te*Lt,-Ye,Te,-Ye]],P+Te,G,[1,1],nt,!0),this},m.__private__.ellipse=m.ellipse=function(P,G,pe,be,Te){if(isNaN(P)||isNaN(G)||isNaN(pe)||isNaN(be)||!Vi(Te))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ye=4/3*(Math.SQRT2-1)*pe,nt=4/3*(Math.SQRT2-1)*be;return Yc(P+pe,G),la(P+pe,G-nt,P+Ye,G-be,P,G-be),la(P-Ye,G-be,P-pe,G-nt,P-pe,G),la(P-pe,G+nt,P-Ye,G+be,P,G+be),la(P+Ye,G+be,P+pe,G+nt,P+pe,G),sl(Te),this},m.__private__.circle=m.circle=function(P,G,pe,be){if(isNaN(P)||isNaN(G)||isNaN(pe)||!Vi(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(P,G,pe,pe,be)},m.setFont=function(P,G,pe){return pe&&(G=O(G,pe)),yt=Sf(P,G,{disableWarning:!1}),this};var Wi=m.__private__.getFont=m.getFont=function(){return Yt[Sf.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var P,G,pe={};for(P in or)if(or.hasOwnProperty(P))for(G in pe[P]=[],or[P])or[P].hasOwnProperty(G)&&pe[P].push(G);return pe},m.addFont=function(P,G,pe,be,Te){var Ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ye.indexOf(arguments[3])!==-1?Te=arguments[3]:arguments[3]&&Ye.indexOf(arguments[3])==-1&&(pe=O(pe,be)),Wc.call(this,P,G,pe,Te=Te||"Identity-H")};var ca,Qa=e.lineWidth||.200025,Ql=m.__private__.getLineWidth=m.getLineWidth=function(){return Qa},sr=m.__private__.setLineWidth=m.setLineWidth=function(P){return Qa=P,te(F(K(P))+" w"),this};m.__private__.setLineDash=Gt.API.setLineDash=Gt.API.setLineDashPattern=function(P,G){if(P=P||[],G=G||0,isNaN(G)||!Array.isArray(P))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return P=P.map(function(pe){return F(K(pe))}).join(" "),G=F(K(G)),te("["+P+"] "+G+" d"),this};var Hi=m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*ca};m.__private__.getLineHeight=m.getLineHeight=function(){return Qe*ca};var hm=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(P){return typeof(P=P||1.15)=="number"&&(ca=P),this},Ef=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return ca};hm(e.lineHeight);var Da=m.__private__.getHorizontalCoordinate=function(P){return K(P)},uo=m.__private__.getVerticalCoordinate=function(P){return E===k?P:Rt[q].mediaBox.topRightY-Rt[q].mediaBox.bottomLeftY-K(P)},Pf=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(P){return F(Da(P))},Jc=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(P){return F(uo(P))},Jl=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return zi(Jl)},m.__private__.setStrokeColor=m.setDrawColor=function(P,G,pe,be){return Jl=Ts({ch1:P,ch2:G,ch3:pe,ch4:be,pdfColorType:"draw",precision:2}),te(Jl),this};var fd=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return zi(fd)},m.__private__.setFillColor=m.setFillColor=function(P,G,pe,be){return fd=Ts({ch1:P,ch2:G,ch3:pe,ch4:be,pdfColorType:"fill",precision:2}),te(fd),this};var yi=e.textColor||"0 g",Zl=m.__private__.getTextColor=m.getTextColor=function(){return zi(yi)};m.__private__.setTextColor=m.setTextColor=function(P,G,pe,be){return yi=Ts({ch1:P,ch2:G,ch3:pe,ch4:be,pdfColorType:"text",precision:3}),this};var ua=e.charSpace,Zc=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(ua||0)};m.__private__.setCharSpace=m.setCharSpace=function(P){if(isNaN(P))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return ua=P,this};var hd=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(P){var G=m.CapJoinStyles[P];if(G===void 0)throw new Error("Line cap style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return hd=G,te(G+" J"),this};var md=0;m.__private__.setLineJoin=m.setLineJoin=function(P){var G=m.CapJoinStyles[P];if(G===void 0)throw new Error("Line join style of '"+P+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return md=G,te(G+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(P){if(P=P||0,isNaN(P))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return te(F(K(P))+" M"),this},m.GState=hx,m.setGState=function(P){(P=typeof P=="string"?Ht[Xt[P]]:Xc(null,P)).equals(Fr)||(te("/"+P.id+" gs"),Fr=P)};var Xc=function(P,G){if(!P||!Xt[P]){var pe=!1;for(var be in Ht)if(Ht.hasOwnProperty(be)&&Ht[be].equals(G)){pe=!0;break}if(pe)G=Ht[be];else{var Te="GS"+(Object.keys(Ht).length+1).toString(10);Ht[Te]=G,G.id=Te}return P&&(Xt[P]=G.id),Ir.publish("addGState",G),G}};m.addGState=function(P,G){return Xc(P,G),this},m.saveGraphicsState=function(){return te("q"),Pr.push({key:yt,size:Qe,color:yi}),this},m.restoreGraphicsState=function(){te("Q");var P=Pr.pop();return yt=P.key,Qe=P.size,yi=P.color,Fr=null,this},m.setCurrentTransformationMatrix=function(P){return te(P.toString()+" cm"),this},m.comment=function(P){return te("#"+P),this};var Ja=function(P,G){var pe=P||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return pe},set:function(Ye){isNaN(Ye)||(pe=parseFloat(Ye))}});var be=G||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ye){isNaN(Ye)||(be=parseFloat(Ye))}});var Te="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Te},set:function(Ye){Te=Ye.toString()}}),this},Xl=function(P,G,pe,be){Ja.call(this,P,G),this.type="rect";var Te=pe||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Te},set:function(nt){isNaN(nt)||(Te=parseFloat(nt))}});var Ye=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ye},set:function(nt){isNaN(nt)||(Ye=parseFloat(nt))}}),this},ec=function(){this.page=er,this.currentPage=q,this.pages=Pe.slice(0),this.pagesContext=Rt.slice(0),this.x=bt,this.y=Jr,this.matrix=dr,this.width=al(q),this.height=tc(q),this.outputDestination=Fe,this.id="",this.objectNumber=-1};ec.prototype.restore=function(){er=this.page,q=this.currentPage,Rt=this.pagesContext,Pe=this.pages,bt=this.x,Jr=this.y,dr=this.matrix,pd(q,this.width),Xa(q,this.height),Fe=this.outputDestination};var Za=function(P,G,pe,be,Te){un.push(new ec),er=q=0,Pe=[],bt=P,Jr=G,dr=Te,nl([pe,be])};for(var fo in m.beginFormObject=function(P,G,pe,be,Te){return Za(P,G,pe,be,Te),this},m.endFormObject=function(P){return(function(G){if(Ar[G])un.pop().restore();else{var pe=new ec,be="Xo"+(Object.keys(ir).length+1).toString(10);pe.id=be,Ar[G]=be,ir[be]=pe,Ir.publish("addFormObject",pe),un.pop().restore()}})(P),this},m.doFormObject=function(P,G){var pe=ir[Ar[P]];return te("q"),te(G.toString()+" cm"),te("/"+pe.id+" Do"),te("Q"),this},m.getFormObject=function(P){var G=ir[Ar[P]];return{x:G.x,y:G.y,width:G.width,height:G.height,matrix:G.matrix}},m.save=function(P,G){return P=P||"generated.pdf",(G=G||{}).returnPromise=G.returnPromise||!1,G.returnPromise===!1?($d(qi(La()),P),typeof $d.unload=="function"&&hr.setTimeout&&setTimeout($d.unload,911),this):new Promise(function(pe,be){try{var Te=$d(qi(La()),P);typeof $d.unload=="function"&&hr.setTimeout&&setTimeout($d.unload,911),pe(Te)}catch(Ye){be(Ye.message)}})},Gt.API)Gt.API.hasOwnProperty(fo)&&(fo==="events"&&Gt.API.events.length?(function(P,G){var pe,be,Te;for(Te=G.length-1;Te!==-1;Te--)pe=G[Te][0],be=G[Te][1],P.subscribe.apply(P,[pe].concat(typeof be=="function"?[be]:be))})(Ir,Gt.API.events):m[fo]=Gt.API[fo]);function al(P){return Rt[P].mediaBox.topRightX-Rt[P].mediaBox.bottomLeftX}function pd(P,G){Rt[P].mediaBox.topRightX=G+Rt[P].mediaBox.bottomLeftX}function tc(P){return Rt[P].mediaBox.topRightY-Rt[P].mediaBox.bottomLeftY}function Xa(P,G){Rt[P].mediaBox.topRightY=G+Rt[P].mediaBox.bottomLeftY}var Gi=m.getPageWidth=function(P){return al(P=P||q)/zt},Vs=m.setPageWidth=function(P,G){pd(P,G*zt)},ei=m.getPageHeight=function(P){return tc(P=P||q)/zt},eu=m.setPageHeight=function(P,G){Xa(P,G*zt)};return m.internal={pdfEscape:Ta,getStyle:Kc,getFont:Wi,getFontSize:xe,getCharSpace:Zc,getTextColor:Zl,getLineHeight:Hi,getLineHeightFactor:Ef,getLineWidth:Ql,write:Ze,getHorizontalCoordinate:Da,getVerticalCoordinate:uo,getCoordinateString:Pf,getVerticalCoordinateString:Jc,collections:{},newObject:jr,newAdditionalObject:Pa,newObjectDeferred:tn,newObjectDeferredBegin:Nn,getFilters:Ka,putStream:Aa,events:Ir,scaleFactor:zt,pageSize:{getWidth:function(){return Gi(q)},setWidth:function(P){Vs(q,P)},getHeight:function(){return ei(q)},setHeight:function(P){eu(q,P)}},encryptionOptions:h,encryption:os,getEncryptor:function(P){return h!==null?os.encryptor(P,0):function(G){return G}},output:Gl,getNumberOfPages:Ra,get pages(){return Pe},out:te,f2:U,f3:B,getPageInfo:xi,getPageInfoByObjId:cd,getCurrentPageInfo:ud,getPDFVersion:w,Point:Ja,Rectangle:Xl,Matrix:At,hasHotfix:Ya},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Gi(q)},set:function(P){Vs(q,P)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return ei(q)},set:function(P){eu(q,P)},enumerable:!0,configurable:!0}),(function(P){for(var G=0,pe=pt.length;G<pe;G++){var be=Wc.call(this,P[G][0],P[G][1],P[G][2],pt[G][3],!0);p===!1&&(v[be]=!0);var Te=P[G][0].split("-");_f({id:be,fontName:Te[0],fontStyle:Te[1]||""})}Ir.publish("addFonts",{fonts:Yt,dictionary:or})}).call(m,pt),yt="F1",Nf(a,r),Ir.publish("initialized"),m}mh.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},mh.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mh.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},mh.prototype.processOwnerPassword=function(e,t){return nb(rb(t).substr(0,5),e)},mh.prototype.encryptor=function(e,t){var r=rb(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return nb(r,n)}},hx.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||cn(e)!==cn(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Gt.API={events:[]},Gt.version="4.0.0";var es=Gt.API,W2=1,bf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ch=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vr=function(e){return e.toFixed(2)},Tu=function(e){return e.toFixed(5)};es.__acroform__={};var mi=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},GS=function(e){return e*W2},jl=function(e){var t=new I6,r=Ot.internal.getHeight(e)||0,n=Ot.internal.getWidth(e)||0;return t.BBox=[0,0,Number(vr(n)),Number(vr(r))],t},wK=es.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},bK=es.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},jK=es.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},ms=es.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return jK(e,t-1)},ps=es.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return wK(e,t-1)},gs=es.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bK(e,t-1)},_K=es.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,a=e[0],i=e[1],o=e[2],l=e[3],u={};return u.lowerLeft_X=r(a)||0,u.lowerLeft_Y=n(i+l)||0,u.upperRight_X=r(a+o)||0,u.upperRight_Y=n(i)||0,[Number(vr(u.lowerLeft_X)),Number(vr(u.lowerLeft_Y)),Number(vr(u.upperRight_X)),Number(vr(u.upperRight_Y))]},NK=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=sb(e,r),a=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+a+" "+vr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var i=jl(e);return i.scope=e.scope,i.stream=t.join(`
`),i}},sb=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},a=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");a=e.multiline?a.map(function(U){return U.split(`
`)}):a.map(function(U){return[U]});var i=r,o=Ot.internal.getHeight(e)||0;o=o<0?-o:o;var l=Ot.internal.getWidth(e)||0;l=l<0?-l:l;var u=function(U,B,K){if(U+1<a.length){var V=B+" "+a[U+1][0];return Sv(V,e,K).width<=l-4}return!1};i++;e:for(;i>0;){t="",i--;var f,h,p=Sv("3",e,i).height,v=e.multiline?o-i:(o-p)/2,m=v+=2,N=0,w=0,j=0;if(i<=0){t=`(...) Tj
`,t+="% Width of Text: "+Sv(t,e,i=12).width+", FieldWidth:"+l+`
`;break}for(var _="",C=0,k=0;k<a.length;k++)if(a.hasOwnProperty(k)){var E=!1;if(a[k].length!==1&&j!==a[k].length-1){if((p+2)*(C+2)+2>o)continue e;_+=a[k][j],E=!0,w=k,k--}else{_=(_+=a[k][j]+" ").substr(_.length-1)==" "?_.substr(0,_.length-1):_;var I=parseInt(k),D=u(I,_,i),O=k>=a.length-1;if(D&&!O){_+=" ",j=0;continue}if(D||O){if(O)w=I;else if(e.multiline&&(p+2)*(C+2)+2>o)continue e}else{if(!e.multiline||(p+2)*(C+2)+2>o)continue e;w=I}}for(var F="",T=N;T<=w;T++){var z=a[T];if(e.multiline){if(T===w){F+=z[j]+" ",j=(j+1)%z.length;continue}if(T===N){F+=z[z.length-1]+" ";continue}}F+=z[0]+" "}switch(F=F.substr(F.length-1)==" "?F.substr(0,F.length-1):F,h=Sv(F,e,i).width,e.textAlign){case"right":f=l-h-2;break;case"center":f=(l-h)/2;break;default:f=2}t+=vr(f)+" "+vr(m)+` Td
`,t+="("+bf(F)+`) Tj
`,t+=-vr(f)+` 0 Td
`,m=-(i+2),h=0,N=E?w:w+1,C++,_=""}break}return n.text=t,n.fontSize=i,n},Sv=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),a=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:a}},SK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},kK=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},CK=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Xo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(SK)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");W2=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new O6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var a in n)if(n.hasOwnProperty(a)){var i=n[a];i.objId=void 0,i.hasAnnotation&&kK(i,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,a){var i=!n;for(var o in n||(a.internal.newObjectDeferredBegin(a.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),a.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||a.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],u=[],f=l.Rect;if(l.Rect&&(l.Rect=_K(l.Rect,a)),a.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ot.createDefaultAppearanceStream(l),cn(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(u=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=NK(l);u.push({key:"AP",value:"<</N "+h+">>"}),a.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var p="";for(var v in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(v)){var m=l.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var N=m[o];typeof N=="function"&&(N=N.call(a,l)),p+="/"+o+" "+N+" ",a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N)}}else typeof(N=m)=="function"&&(N=N.call(a,l)),p+="/"+o+" "+N,a.internal.acroformPlugin.xForms.indexOf(N)>=0||a.internal.acroformPlugin.xForms.push(N);p+=">>"}u.push({key:"AP",value:`<<
`+p+">>"})}a.internal.putStream({additionalKeyValues:u,objectId:l.objId}),a.internal.out("endobj")}i&&(function(w,j){for(var _ in w)if(w.hasOwnProperty(_)){var C=_,k=w[_];j.internal.newObjectDeferredBegin(k.objId,!0),cn(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete w[C]}})(a.internal.acroformPlugin.xForms,a)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},D6=es.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var a="[",i=0;i<e.length;i++)switch(i!==0&&(a+=" "),cn(e[i])){case"boolean":case"number":case"object":a+=e[i].toString();break;case"string":e[i].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),a+="("+bf(n(e[i].toString()))+")"):a+=e[i].toString()}return a+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},F1=function(e,t,r){var n=function(a){return a};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+bf(n(e))+")"},Sl=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Sl.prototype.toString=function(){return this.objId+" 0 R"},Sl.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},Sl.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],a=this[n];a&&(Array.isArray(a)?e.push({key:n,value:D6(a,this.objId,this.scope)}):a instanceof Sl?(a.scope=this.scope,e.push({key:n,value:a.objId+" 0 R"})):typeof a!="function"&&e.push({key:n,value:a}))}return e};var I6=function(){Sl.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};mi(I6,Sl);var O6=function(){Sl.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+bf(r(e))+")"}},set:function(r){e=r}})};mi(O6,Sl);var Xo=function e(){Sl.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute F supplied.');t=_}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!ms(t,3)},set:function(_){_?this.F=ps(t,3):this.F=gs(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(_){if(isNaN(_))throw new Error('Invalid value "'+_+'" for attribute Ff supplied.');r=_}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(_){n=_!==void 0?_:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(_){n[0]=_}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(_){n[1]=_}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(_){n[2]=_}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(_){n[3]=_}});var a="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return a},set:function(_){switch(_){case"/Btn":case"/Tx":case"/Ch":case"/Sig":a=_;break;default:throw new Error('Invalid value "'+_+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof mx)return;i="FieldObject"+e.FieldNum++}var _=function(C){return C};return this.scope&&(_=this.scope.internal.getEncryptor(this.objId)),"("+bf(_(i))+")"},set:function(_){i=_.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(_){i=_}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(_){o=_}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(_){l=_}});var u=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return u},set:function(_){u=_}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/W2:f},set:function(_){f=_}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(_){h=_}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof mx||this instanceof Jd))return F1(p,this.objId,this.scope)},set:function(_){_=_.toString(),p=_}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Zs==0?F1(v,this.objId,this.scope):v},set:function(_){_=_.toString(),v=this instanceof Zs==0?_.substr(0,1)==="("?ch(_.substr(1,_.length-2)):ch(_):_}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs==1?ch(v.substr(1,v.length-1)):v},set:function(_){_=_.toString(),v=this instanceof Zs==1?"/"+_:_}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(_){this.V=_}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Zs==0?F1(m,this.objId,this.scope):m},set:function(_){_=_.toString(),m=this instanceof Zs==0?_.substr(0,1)==="("?ch(_.substr(1,_.length-2)):ch(_):_}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Zs==1?ch(m.substr(1,m.length-1)):m},set:function(_){_=_.toString(),m=this instanceof Zs==1?"/"+_:_}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var N,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(_){_=!!_,w=_}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(N)return N},set:function(_){N=_}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,1)},set:function(_){_?this.Ff=ps(this.Ff,1):this.Ff=gs(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,2)},set:function(_){_?this.Ff=ps(this.Ff,2):this.Ff=gs(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,3)},set:function(_){_?this.Ff=ps(this.Ff,3):this.Ff=gs(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(_){if([0,1,2].indexOf(_)===-1)throw new Error('Invalid value "'+_+'" for attribute Q supplied.');j=_}}),Object.defineProperty(this,"textAlign",{get:function(){var _;switch(j){case 0:default:_="left";break;case 1:_="center";break;case 2:_="right"}return _},configurable:!0,enumerable:!0,set:function(_){switch(_){case"right":case 2:j=2;break;case"center":case 1:j=1;break;default:j=0}}})};mi(Xo,Sl);var Ch=function(){Xo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return D6(t,this.objId,this.scope)},set:function(r){var n,a;a=[],typeof(n=r)=="string"&&(a=(function(i,o,l){l||(l=1);for(var u,f=[];u=o.exec(i);)f.push(u[l]);return f})(n,/\((.*?)\)/g)),t=a}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,18)},set:function(r){r?this.Ff=ps(this.Ff,18):this.Ff=gs(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=ps(this.Ff,19):this.Ff=gs(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,20)},set:function(r){r?(this.Ff=ps(this.Ff,20),t.sort()):this.Ff=gs(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,22)},set:function(r){r?this.Ff=ps(this.Ff,22):this.Ff=gs(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,23)},set:function(r){r?this.Ff=ps(this.Ff,23):this.Ff=gs(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,27)},set:function(r){r?this.Ff=ps(this.Ff,27):this.Ff=gs(this.Ff,27)}}),this.hasAppearanceStream=!1};mi(Ch,Xo);var Eh=function(){Ch.call(this),this.fontName="helvetica",this.combo=!1};mi(Eh,Ch);var Ph=function(){Eh.call(this),this.combo=!0};mi(Ph,Eh);var $v=function(){Ph.call(this),this.edit=!0};mi($v,Ph);var Zs=function(){Xo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,15)},set:function(r){r?this.Ff=ps(this.Ff,15):this.Ff=gs(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,16)},set:function(r){r?this.Ff=ps(this.Ff,16):this.Ff=gs(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,17)},set:function(r){r?this.Ff=ps(this.Ff,17):this.Ff=gs(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,26)},set:function(r){r?this.Ff=ps(this.Ff,26):this.Ff=gs(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,a=[];for(n in a.push("<<"),t)a.push("/"+n+" ("+bf(r(t[n]))+")");return a.push(">>"),a.join(`
`)}},set:function(r){cn(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};mi(Zs,Xo);var zv=function(){Zs.call(this),this.pushButton=!0};mi(zv,Zs);var Ah=function(){Zs.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};mi(Ah,Zs);var mx=function(){var e,t;Xo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(a){e=a}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(a){t=a}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var a=function(l){return l};this.scope&&(a=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+bf(a(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(a){cn(a)==="object"&&(n=a)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(a){typeof a=="string"&&(n.CA=a)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(a){r=a}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(a){r="/"+a}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ot.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};mi(mx,Xo),Ah.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},Ah.prototype.createOption=function(e){var t=new mx;return t.Parent=this,t.optionName=e,this.Kids.push(t),EK.call(this.scope,t),t};var qv=function(){Zs.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ot.CheckBox.createAppearanceStream()};mi(qv,Zs);var Jd=function(){Xo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,13)},set:function(t){t?this.Ff=ps(this.Ff,13):this.Ff=gs(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,21)},set:function(t){t?this.Ff=ps(this.Ff,21):this.Ff=gs(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,23)},set:function(t){t?this.Ff=ps(this.Ff,23):this.Ff=gs(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,24)},set:function(t){t?this.Ff=ps(this.Ff,24):this.Ff=gs(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,25)},set:function(t){t?this.Ff=ps(this.Ff,25):this.Ff=gs(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,26)},set:function(t){t?this.Ff=ps(this.Ff,26):this.Ff=gs(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};mi(Jd,Xo);var Vv=function(){Jd.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!ms(this.Ff,14)},set:function(e){e?this.Ff=ps(this.Ff,14):this.Ff=gs(this.Ff,14)}}),this.password=!0};mi(Vv,Jd);var Ot={CheckBox:{createAppearanceStream:function(){return{N:{On:Ot.CheckBox.YesNormal},D:{On:Ot.CheckBox.YesPushDown,Off:Ot.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=jl(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,a=e.scope.__private__.encodeColorString(e.color),i=sb(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+vr(Ot.internal.getWidth(e))+" "+vr(Ot.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vr(i.fontSize)+" Tf "+a),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=jl(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),a=[],i=Ot.internal.getHeight(e),o=Ot.internal.getWidth(e),l=sb(e,e.caption);return a.push("1 g"),a.push("0 0 "+vr(o)+" "+vr(i)+" re"),a.push("f"),a.push("q"),a.push("0 0 1 rg"),a.push("0 0 "+vr(o-1)+" "+vr(i-1)+" re"),a.push("W"),a.push("n"),a.push("0 g"),a.push("BT"),a.push("/"+r+" "+vr(l.fontSize)+" Tf "+n),a.push(l.text),a.push("ET"),a.push("Q"),t.stream=a.join(`
`),t},OffPushDown:function(e){var t=jl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vr(Ot.internal.getWidth(e))+" "+vr(Ot.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:Ot.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=Ot.RadioButton.Circle.YesNormal,t.D[e]=Ot.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=jl(e);t.scope=e.scope;var r=[],n=Ot.internal.getWidth(e)<=Ot.internal.getHeight(e)?Ot.internal.getWidth(e)/4:Ot.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Ot.internal.Bezier_C,i=Number((n*a).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+Tu(Ot.internal.getWidth(e)/2)+" "+Tu(Ot.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=jl(e);t.scope=e.scope;var r=[],n=Ot.internal.getWidth(e)<=Ot.internal.getHeight(e)?Ot.internal.getWidth(e)/4:Ot.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ot.internal.Bezier_C).toFixed(5)),o=Number((n*Ot.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Tu(Ot.internal.getWidth(e)/2)+" "+Tu(Ot.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+Tu(Ot.internal.getWidth(e)/2)+" "+Tu(Ot.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=jl(e);t.scope=e.scope;var r=[],n=Ot.internal.getWidth(e)<=Ot.internal.getHeight(e)?Ot.internal.getWidth(e)/4:Ot.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var a=Number((2*n).toFixed(5)),i=Number((a*Ot.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+Tu(Ot.internal.getWidth(e)/2)+" "+Tu(Ot.internal.getHeight(e)/2)+" cm"),r.push(a+" 0 m"),r.push(a+" "+i+" "+i+" "+a+" 0 "+a+" c"),r.push("-"+i+" "+a+" -"+a+" "+i+" -"+a+" 0 c"),r.push("-"+a+" -"+i+" -"+i+" -"+a+" 0 -"+a+" c"),r.push(i+" -"+a+" "+a+" -"+i+" "+a+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:Ot.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=Ot.RadioButton.Cross.YesNormal,t.D[e]=Ot.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=jl(e);t.scope=e.scope;var r=[],n=Ot.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+vr(Ot.internal.getWidth(e)-2)+" "+vr(Ot.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(vr(n.x1.x)+" "+vr(n.x1.y)+" m"),r.push(vr(n.x2.x)+" "+vr(n.x2.y)+" l"),r.push(vr(n.x4.x)+" "+vr(n.x4.y)+" m"),r.push(vr(n.x3.x)+" "+vr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=jl(e);t.scope=e.scope;var r=Ot.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+vr(Ot.internal.getWidth(e))+" "+vr(Ot.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vr(Ot.internal.getWidth(e)-2)+" "+vr(Ot.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(vr(r.x1.x)+" "+vr(r.x1.y)+" m"),n.push(vr(r.x2.x)+" "+vr(r.x2.y)+" l"),n.push(vr(r.x4.x)+" "+vr(r.x4.y)+" m"),n.push(vr(r.x3.x)+" "+vr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=jl(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vr(Ot.internal.getWidth(e))+" "+vr(Ot.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};Ot.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=Ot.internal.getWidth(e),r=Ot.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},Ot.internal.getWidth=function(e){var t=0;return cn(e)==="object"&&(t=GS(e.Rect[2])),t},Ot.internal.getHeight=function(e){var t=0;return cn(e)==="object"&&(t=GS(e.Rect[3])),t};var EK=es.addField=function(e){if(CK(this,e),!(e instanceof Xo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};es.AcroFormChoiceField=Ch,es.AcroFormListBox=Eh,es.AcroFormComboBox=Ph,es.AcroFormEditBox=$v,es.AcroFormButton=Zs,es.AcroFormPushButton=zv,es.AcroFormRadioButton=Ah,es.AcroFormCheckBox=qv,es.AcroFormTextField=Jd,es.AcroFormPasswordField=Vv,es.AcroFormAppearance=Ot,es.AcroForm={ChoiceField:Ch,ListBox:Eh,ComboBox:Ph,EditBox:$v,Button:Zs,PushButton:zv,RadioButton:Ah,CheckBox:qv,TextField:Jd,PasswordField:Vv,Appearance:Ot},Gt.AcroForm={ChoiceField:Ch,ListBox:Eh,ComboBox:Ph,EditBox:$v,Button:Zs,PushButton:zv,RadioButton:Ah,CheckBox:qv,TextField:Jd,PasswordField:Vv,Appearance:Ot};Gt.AcroForm;function M6(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},a=e.__addimage__.getImageFileTypeByImageData=function(U,B){var K,V,de,se,Y,W=r;if((B=B||r)==="RGBA"||U.data!==void 0&&U.data instanceof Uint8ClampedArray&&"height"in U&&"width"in U)return"RGBA";if(D(U))for(Y in n)for(de=n[Y],K=0;K<de.length;K+=1){for(se=!0,V=0;V<de[K].length;V+=1)if(de[K][V]!==void 0&&de[K][V]!==U[V]){se=!1;break}if(se===!0){W=Y;break}}else for(Y in n)for(de=n[Y],K=0;K<de.length;K+=1){for(se=!0,V=0;V<de[K].length;V+=1)if(de[K][V]!==void 0&&de[K][V]!==U.charCodeAt(V)){se=!1;break}if(se===!0){W=Y;break}}return W===r&&B!==r&&(W=B),W},i=function U(B){for(var K=this.internal.write,V=this.internal.putStream,de=(0,this.internal.getFilters)();de.indexOf("FlateEncode")!==-1;)de.splice(de.indexOf("FlateEncode"),1);B.objectId=this.internal.newObject();var se=[];if(se.push({key:"Type",value:"/XObject"}),se.push({key:"Subtype",value:"/Image"}),se.push({key:"Width",value:B.width}),se.push({key:"Height",value:B.height}),B.colorSpace===_.INDEXED?se.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(B.palette.length/3-1)+" "+("sMask"in B&&B.sMask!==void 0?B.objectId+2:B.objectId+1)+" 0 R]"}):(se.push({key:"ColorSpace",value:"/"+B.colorSpace}),B.colorSpace===_.DEVICE_CMYK&&se.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),se.push({key:"BitsPerComponent",value:B.bitsPerComponent}),"decodeParameters"in B&&B.decodeParameters!==void 0&&se.push({key:"DecodeParms",value:"<<"+B.decodeParameters+">>"}),"transparency"in B&&Array.isArray(B.transparency)&&B.transparency.length>0){for(var Y="",W=0,ee=B.transparency.length;W<ee;W++)Y+=B.transparency[W]+" "+B.transparency[W]+" ";se.push({key:"Mask",value:"["+Y+"]"})}B.sMask!==void 0&&se.push({key:"SMask",value:B.objectId+1+" 0 R"});var ge=B.filter!==void 0?["/"+B.filter]:void 0;if(V({data:B.data,additionalKeyValues:se,alreadyAppliedFilters:ge,objectId:B.objectId}),K("endobj"),"sMask"in B&&B.sMask!==void 0){var re,L=(re=B.sMaskBitsPerComponent)!==null&&re!==void 0?re:B.bitsPerComponent,q={width:B.width,height:B.height,colorSpace:"DeviceGray",bitsPerComponent:L,data:B.sMask};"filter"in B&&(q.decodeParameters="/Predictor ".concat(B.predictor," /Colors 1 /BitsPerComponent ").concat(L," /Columns ").concat(B.width),q.filter=B.filter),U.call(this,q)}if(B.colorSpace===_.INDEXED){var J=this.internal.newObject();V({data:F(new Uint8Array(B.palette)),objectId:J}),K("endobj")}},o=function(){var U=this.internal.collections[t+"images"];for(var B in U)i.call(this,U[B])},l=function(){var U,B=this.internal.collections[t+"images"],K=this.internal.write;for(var V in B)K("/I"+(U=B[V]).index,U.objectId,"0","R")},u=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},f=function(){var U=this.internal.collections[t+"images"];return u.call(this),U},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(U){return typeof e["process"+U.toUpperCase()]=="function"},v=function(U){return cn(U)==="object"&&U.nodeType===1},m=function(U,B){if(U.nodeName==="IMG"&&U.hasAttribute("src")){var K=""+U.getAttribute("src");if(K.indexOf("data:image/")===0)return Uv(unescape(K).split("base64,").pop());var V=e.loadFile(K,!0);if(V!==void 0)return V}if(U.nodeName==="CANVAS"){if(U.width===0||U.height===0)throw new Error("Given canvas must have data. Canvas width: "+U.width+", height: "+U.height);var de;switch(B){case"PNG":de="image/png";break;case"WEBP":de="image/webp";break;default:de="image/jpeg"}return Uv(U.toDataURL(de,1).split("base64,").pop())}},N=function(U){var B=this.internal.collections[t+"images"];if(B){for(var K in B)if(U===B[K].alias)return B[K]}},w=function(U,B,K){return U||B||(U=-96,B=-96),U<0&&(U=-1*K.width*72/U/this.internal.scaleFactor),B<0&&(B=-1*K.height*72/B/this.internal.scaleFactor),U===0&&(U=B*K.width/K.height),B===0&&(B=U*K.height/K.width),[U,B]},j=function(U,B,K,V,de,se){var Y=w.call(this,K,V,de),W=this.internal.getCoordinateString,ee=this.internal.getVerticalCoordinateString,ge=f.call(this);if(K=Y[0],V=Y[1],ge[de.index]=de,se){se*=Math.PI/180;var re=Math.cos(se),L=Math.sin(se),q=function(ne){return ne.toFixed(4)},J=[q(re),q(L),q(-1*L),q(re),0,0,"cm"]}this.internal.write("q"),se?(this.internal.write([1,"0","0",1,W(U),ee(B+V),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([W(K),"0","0",W(V),"0","0","cm"].join(" "))):this.internal.write([W(K),"0","0",W(V),W(U),ee(B+V),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+de.index+" Do"),this.internal.write("Q")},_=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var C=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=e.__addimage__.sHashCode=function(U){var B,K,V=0;if(typeof U=="string")for(K=U.length,B=0;B<K;B++)V=(V<<5)-V+U.charCodeAt(B),V|=0;else if(D(U))for(K=U.byteLength/2,B=0;B<K;B++)V=(V<<5)-V+U[B],V|=0;return V},E=e.__addimage__.validateStringAsBase64=function(U){(U=U||"").toString().trim();var B=!0;return U.length===0&&(B=!1),U.length%4!=0&&(B=!1),/^[A-Za-z0-9+/]+$/.test(U.substr(0,U.length-2))===!1&&(B=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(U.substr(-2))===!1&&(B=!1),B},I=e.__addimage__.extractImageFromDataUrl=function(U){if(U==null||!(U=U.trim()).startsWith("data:"))return null;var B=U.indexOf(",");return B<0?null:U.substring(0,B).trim().endsWith("base64")?U.substring(B+1):null};e.__addimage__.isArrayBuffer=function(U){return U instanceof ArrayBuffer};var D=e.__addimage__.isArrayBufferView=function(U){return U instanceof Int8Array||U instanceof Uint8Array||U instanceof Uint8ClampedArray||U instanceof Int16Array||U instanceof Uint16Array||U instanceof Int32Array||U instanceof Uint32Array||U instanceof Float32Array||U instanceof Float64Array},O=e.__addimage__.binaryStringToUint8Array=function(U){for(var B=U.length,K=new Uint8Array(B),V=0;V<B;V++)K[V]=U.charCodeAt(V);return K},F=e.__addimage__.arrayBufferToBinaryString=function(U){for(var B="",K=D(U)?U:new Uint8Array(U),V=0;V<K.length;V+=8192)B+=String.fromCharCode.apply(null,K.subarray(V,V+8192));return B};e.addImage=function(){var U,B,K,V,de,se,Y,W,ee;if(typeof arguments[1]=="number"?(B=r,K=arguments[1],V=arguments[2],de=arguments[3],se=arguments[4],Y=arguments[5],W=arguments[6],ee=arguments[7]):(B=arguments[1],K=arguments[2],V=arguments[3],de=arguments[4],se=arguments[5],Y=arguments[6],W=arguments[7],ee=arguments[8]),cn(U=arguments[0])==="object"&&!v(U)&&"imageData"in U){var ge=U;U=ge.imageData,B=ge.format||B||r,K=ge.x||K||0,V=ge.y||V||0,de=ge.w||ge.width||de,se=ge.h||ge.height||se,Y=ge.alias||Y,W=ge.compression||W,ee=ge.rotation||ge.angle||ee}var re=this.internal.getFilters();if(W===void 0&&re.indexOf("FlateEncode")!==-1&&(W="SLOW"),isNaN(K)||isNaN(V))throw new Error("Invalid coordinates passed to jsPDF.addImage");u.call(this);var L=T.call(this,U,B,Y,W);return j.call(this,K,V,de,se,L,ee),this};var T=function(U,B,K,V){var de,se,Y;if(typeof U=="string"&&a(U)===r){U=unescape(U);var W=z(U,!1);(W!==""||(W=e.loadFile(U,!0))!==void 0)&&(U=W)}if(v(U)&&(U=m(U,B)),B=a(U,B),!p(B))throw new Error("addImage does not support files of type '"+B+"', please ensure that a plugin for '"+B+"' support is added.");if(((Y=K)==null||Y.length===0)&&(K=(function(ee){return typeof ee=="string"||D(ee)?k(ee):D(ee.data)?k(ee.data):null})(U)),(de=N.call(this,K))||(U instanceof Uint8Array||B==="RGBA"||(se=U,U=O(U)),de=this["process"+B.toUpperCase()](U,h.call(this),K,(function(ee){return ee&&typeof ee=="string"&&(ee=ee.toUpperCase()),ee in e.image_compression?ee:C.NONE})(V),se)),!de)throw new Error("An unknown error occurred whilst processing the image.");return de},z=e.__addimage__.convertBase64ToBinaryString=function(U,B){B=typeof B!="boolean"||B;var K,V="";if(typeof U=="string"){var de;K=(de=I(U))!==null&&de!==void 0?de:U;try{V=Uv(K)}catch(se){if(B)throw E(K)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+se.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return V};e.getImageProperties=function(U){var B,K,V="";if(v(U)&&(U=m(U)),typeof U=="string"&&a(U)===r&&((V=z(U,!1))===""&&(V=e.loadFile(U)||""),U=V),K=a(U),!p(K))throw new Error("addImage does not support files of type '"+K+"', please ensure that a plugin for '"+K+"' support is added.");if(U instanceof Uint8Array||(U=O(U)),!(B=this["process"+K.toUpperCase()](U)))throw new Error("An unknown error occurred whilst processing the image");return B.fileType=K,B}})(Gt.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Gt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,a,i,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=this.internal.getPageInfoByObjId(r.objId),f=r.pageContext.annotations,h=!1,p=0;p<f.length&&!h;p++)switch((n=f[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<f.length;v++){n=f[v];var m=this.internal.pdfEscape,N=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),_=this.internal.getEncryptor(w.objId),C=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(_(n.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+u.objId+" 0 R",i+=" /T ("+m(_(C))+") >>",w.content=i;var k=w.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(a="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write(w.objId,"0 R",j.objId,"0 R");break;case"freetext":a="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var E=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+a+"/Contents ("+m(N(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+E+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var I=this.annotations._nameMap[n.options.name];n.options.pageNumber=I.page,n.options.top=I.y}else n.options.top||(n.options.top=0);if(a="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /A <</S /URI /URI ("+m(N(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+a+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var D=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+D+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,a,i,o){var l=this.internal.getCurrentPageInfo(),u=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:u(r),y:f(n),w:u(r+a),h:f(n+i)},options:o,type:"link"})},e.textWithLink=function(r,n,a,i){var o,l,u=this.getTextWidth(r),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var h=this.splitTextToSize(r,l).length;o=Math.ceil(f*h)}else l=u,o=f;return this.text(r,n,a,i),a+=.2*f,i.align==="center"&&(n-=u/2),i.align==="right"&&(n-=u),this.link(n,a-f,l,o,i),u},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(Gt.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},a=[1570,1571,1573,1575];e.__arabicParser__={};var i=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=e.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length<=2},u=e.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&a.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&i(w)&&t[w.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(w){var j=0,_=r,C="",k=0;for(j=0;j<w.length;j+=1)_[w.charCodeAt(j)]!==void 0?(k++,typeof(_=_[w.charCodeAt(j)])=="number"&&(C+=String.fromCharCode(_),_=r,k=0),j===w.length-1&&(_=r,C+=w.charAt(j-(k-1)),j-=k-1,k=0)):(_=r,C+=w.charAt(j-k),j-=k,k=0);return C};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(w,j,_){return o(w)?i(w)===!1?-1:!f(w)||!o(j)&&!o(_)||!o(_)&&l(j)||l(w)&&!o(j)||l(w)&&u(j)||l(w)&&l(j)?0:h(w)&&o(j)&&!l(j)&&o(_)&&f(_)?3:l(w)||!o(_)?1:2:-1},m=function(w){var j=0,_=0,C=0,k="",E="",I="",D=(w=w||"").split("\\s+"),O=[];for(j=0;j<D.length;j+=1){for(O.push(""),_=0;_<D[j].length;_+=1)k=D[j][_],E=D[j][_-1],I=D[j][_+1],o(k)?(C=v(k,E,I),O[j]+=C!==-1?String.fromCharCode(t[k.charCodeAt(0)][C]):k):O[j]+=k;O[j]=p(O[j])}return O.join(" ")},N=e.__arabicParser__.processArabic=e.processArabic=function(){var w,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,_=[];if(Array.isArray(j)){var C=0;for(_=[],C=0;C<j.length;C+=1)Array.isArray(j[C])?_.push([m(j[C][0]),j[C][1],j[C][2]]):_.push([m(j[C])]);w=_}else w=m(j);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",N])})(Gt.API),Gt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var a=300;Object.defineProperty(this,"height",{get:function(){return a},set:function(l){a=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=a+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var a;if((r=r||"2d")!=="2d")return null;for(a in n)this.pdf.context2d.hasOwnProperty(a)&&(this.pdf.context2d[a]=n[a]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Gt.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),a.call(this))},a=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var u=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return u},set:function(w){u=w}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var N=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return N},set:function(w){N=w}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(u){return n.call(this),this.internal.__cell__.headerFunction=typeof u=="function"?u:void 0,this},e.getTextDimensions=function(u,f){n.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),v=f.scaleFactor||this.internal.scaleFactor,m=0,N=0,w=0,j=this;if(!Array.isArray(u)&&typeof u!="string"){if(typeof u!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");u=String(u)}var _=f.maxWidth;_>0?typeof u=="string"?u=this.splitTextToSize(u,_):Object.prototype.toString.call(u)==="[object Array]"&&(u=u.reduce(function(k,E){return k.concat(j.splitTextToSize(E,_))},[])):u=Array.isArray(u)?u:[u];for(var C=0;C<u.length;C++)m<(w=this.getStringUnitWidth(u[C],{font:p})*h)&&(m=w);return m!==0&&(N=u.length),{w:m/=v,h:Math.max((N*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var u=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new i(u.left,u.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var u;u=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===u.lineNumber?(u.x=(f.x||0)+(f.width||0),u.y=f.y||0):f.y+f.height+u.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),u.y=p.top,m&&v&&(this.printHeaderRow(u.lineNumber,!0),u.y+=v[0].height)):u.y=f.y+f.height||u.y),u.text[0]!==void 0&&(this.rect(u.x,u.y,u.width,u.height,r===!0?"FD":void 0),u.align==="right"?this.text(u.text,u.x+u.width-h,u.y+h,{align:"right",baseline:"top"}):u.align==="center"?this.text(u.text,u.x+u.width/2,u.y+h,{align:"center",baseline:"top",maxWidth:u.width-h-h}):this.text(u.text,u.x+h,u.y+h,{align:"left",baseline:"top",maxWidth:u.width-h-h})),this.internal.__cell__.lastCell=u,this};e.table=function(u,f,h,p,v){if(n.call(this),!h)throw new Error("No data for PDF table.");var m,N,w,j,_=[],C=[],k=[],E={},I={},D=[],O=[],F=(v=v||{}).autoSize||!1,T=v.printHeaders!==!1,z=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,U=v.margins||Object.assign({width:this.getPageWidth()},t),B=typeof v.padding=="number"?v.padding:3,K=v.headerBackgroundColor||"#c8c8c8",V=v.headerTextColor||"#000";if(a.call(this),this.internal.__cell__.printHeaders=T,this.internal.__cell__.margins=U,this.internal.__cell__.table_font_size=z,this.internal.__cell__.padding=B,this.internal.__cell__.headerBackgroundColor=K,this.internal.__cell__.headerTextColor=V,this.setFontSize(z),p==null)C=_=Object.keys(h[0]),k=_.map(function(){return"left"});else if(Array.isArray(p)&&cn(p[0])==="object")for(_=p.map(function(ge){return ge.name}),C=p.map(function(ge){return ge.prompt||ge.name||""}),k=p.map(function(ge){return ge.align||"left"}),m=0;m<p.length;m+=1)I[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(C=_=p,k=_.map(function(){return"left"}));if(F||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<_.length;m+=1){for(E[j=_[m]]=h.map(function(ge){return ge[j]}),this.setFont(void 0,"bold"),D.push(this.getTextDimensions(C[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),N=E[j],this.setFont(void 0,"normal"),w=0;w<N.length;w+=1)D.push(this.getTextDimensions(N[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);I[j]=Math.max.apply(null,D)+B+B,D=[]}if(T){var de={};for(m=0;m<_.length;m+=1)de[_[m]]={},de[_[m]].text=C[m],de[_[m]].align=k[m];var se=l.call(this,de,I);O=_.map(function(ge){return new i(u,f,I[ge],se,de[ge].text,void 0,de[ge].align)}),this.setTableHeaderRow(O),this.printHeaderRow(1,!1)}var Y=p.reduce(function(ge,re){return ge[re.name]=re.align,ge},{});for(m=0;m<h.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:h[m]},this);var W=l.call(this,h[m],I);for(w=0;w<_.length;w+=1){var ee=h[m][_[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:w,data:ee},this),o.call(this,new i(u,f,I[_[w]],W,ee,m+2,Y[_[w]]))}}return this.internal.__cell__.table_x=u,this.internal.__cell__.table_y=f,this};var l=function(u,f){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(u).map(function(m){var N=u[m];return this.splitTextToSize(N.hasOwnProperty("text")?N.text:N,f[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+h+h},this).reduce(function(m,N){return Math.max(m,N)},0)};e.setTableHeaderRow=function(u){n.call(this),this.internal.__cell__.tableHeaderRow=u},e.printHeaderRow=function(u,f){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=u;var N=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(N)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}})(Gt.API);var F6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},B6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],ab=M6(B6),U6=[100,200,300,400,500,600,700,800,900],PK=M6(U6);function B1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(i){return F6[i=i||"normal"]?i:"normal"})(e.style),n=(function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400})(e.weight),a=(function(i){return typeof ab[i=i||"normal"]=="number"?i:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:a,src:e.src||[],ref:e.ref||{name:t,style:[a,r,n].join(" ")}}}function KS(e,t,r,n){var a;for(a=r;a>=0&&a<t.length;a+=n)if(e[t[a]])return e[t[a]];for(a=r;a>=0&&a<t.length;a-=n)if(e[t[a]])return e[t[a]]}var AK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},YS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function QS(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function JS(e){return e.trimLeft()}function TK(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function RK(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var kv,ZS,XS,uh,Cv,e4,t4,r4,U1=["times"];function n4(e,t,r,n,a){var i=4,o=a4;switch(a){case Gt.API.image_compression.FAST:i=1,o=s4;break;case Gt.API.image_compression.MEDIUM:i=6,o=i4;break;case Gt.API.image_compression.SLOW:i=9,o=o4}e=(function(u,f,h,p){for(var v,m=u.length/f,N=new Uint8Array(u.length+m),w=[LK,s4,a4,i4,o4],j=0;j<m;j+=1){var _=j*f,C=u.subarray(_,_+f);if(p)N.set(p(C,h,v),_+j);else{for(var k=w.length,E=[],I=0;I<k;I+=1)E[I]=w[I](C,h,v);var D=IK(E.concat());N.set(E[D],_+j)}v=C}return N})(e,t,Math.ceil(r*n/8),o);var l=Zw(e,{level:i});return Gt.API.__addimage__.arrayBufferToBinaryString(l)}function LK(e){var t=Array.apply([],e);return t.unshift(0),t}function s4(e,t){var r=e.length,n=[];n[0]=1;for(var a=0;a<r;a+=1){var i=e[a-t]||0;n[a+1]=e[a]-i+256&255}return n}function a4(e,t,r){var n=e.length,a=[];a[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;a[i+1]=e[i]-o+256&255}return a}function i4(e,t,r){var n=e.length,a=[];a[0]=3;for(var i=0;i<n;i+=1){var o=e[i-t]||0,l=r&&r[i]||0;a[i+1]=e[i]+256-(o+l>>>1)&255}return a}function o4(e,t,r){var n=e.length,a=[];a[0]=4;for(var i=0;i<n;i+=1){var o=DK(e[i-t]||0,r&&r[i]||0,r&&r[i-t]||0);a[i+1]=e[i]-o+256&255}return a}function DK(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),a=Math.abs(e-r),i=Math.abs(e+t-r-r);return n<=a&&n<=i?e:a<=i?t:r}function IK(e){var t=e.map(function(r){return r.reduce(function(n,a){return n+Math.abs(a)},0)});return t.indexOf(Math.min.apply(null,t))}function $1(e,t,r){var n=t*r,a=Math.floor(n/8),i=16-(n-8*a+r),o=(1<<r)-1;return $6(e,a)>>i&o}function l4(e,t,r,n){var a=r*n,i=Math.floor(a/8),o=16-(a-8*i+n),l=(1<<n)-1,u=(t&l)<<o;(function(f,h,p){if(h+1<f.byteLength)f.setUint16(h,p,!1);else{var v=p>>8&255;f.setUint8(h,v)}})(e,i,$6(e,i)&~(l<<o)&65535|u)}function $6(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function OK(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,a=e[t++],i=a>>7,o=1<<1+(7&a);e[t++],e[t++];var l=null,u=null;i&&(l=t,u=o,t+=3*o);var f=!0,h=[],p=0,v=null,m=0,N=null;for(this.width=r,this.height=n;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,N=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((U=e[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];p=e[t++]|e[t++]<<8,v=e[t++],1&w||(v=null),m=w>>2&7,t++;break;case 254:for(;;){if(!((U=e[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var j=e[t++]|e[t++]<<8,_=e[t++]|e[t++]<<8,C=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,E=e[t++],I=E>>6&1,D=1<<1+(7&E),O=l,F=u,T=!1;E>>7&&(T=!0,O=t,F=D,t+=3*D);var z=t;for(t++;;){var U;if(!((U=e[t++])>=0))throw Error("Invalid block size");if(U===0)break;t+=U}h.push({x:j,y:_,width:C,height:k,has_local_palette:T,palette_offset:O,palette_size:F,data_offset:z,data_length:t-z,transparent_index:v,interlaced:!!I,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return N},this.frameInfo=function(B){if(B<0||B>=h.length)throw new Error("Frame index out of range.");return h[B]},this.decodeAndBlitFrameBGRA=function(B,K){var V=this.frameInfo(B),de=V.width*V.height,se=new Uint8Array(de);c4(e,V.data_offset,se,de);var Y=V.palette_offset,W=V.transparent_index;W===null&&(W=256);var ee=V.width,ge=r-ee,re=ee,L=4*(V.y*r+V.x),q=4*((V.y+V.height)*r+V.x),J=L,ne=4*ge;V.interlaced===!0&&(ne+=4*r*7);for(var ue=8,ie=0,oe=se.length;ie<oe;++ie){var le=se[ie];if(re===0&&(re=ee,(J+=ne)>=q&&(ne=4*ge+4*r*(ue-1),J=L+(ee+ge)*(ue<<1),ue>>=1)),le===W)J+=4;else{var ye=e[Y+3*le],Pe=e[Y+3*le+1],We=e[Y+3*le+2];K[J++]=We,K[J++]=Pe,K[J++]=ye,K[J++]=255}--re}},this.decodeAndBlitFrameRGBA=function(B,K){var V=this.frameInfo(B),de=V.width*V.height,se=new Uint8Array(de);c4(e,V.data_offset,se,de);var Y=V.palette_offset,W=V.transparent_index;W===null&&(W=256);var ee=V.width,ge=r-ee,re=ee,L=4*(V.y*r+V.x),q=4*((V.y+V.height)*r+V.x),J=L,ne=4*ge;V.interlaced===!0&&(ne+=4*r*7);for(var ue=8,ie=0,oe=se.length;ie<oe;++ie){var le=se[ie];if(re===0&&(re=ee,(J+=ne)>=q&&(ne=4*ge+4*r*(ue-1),J=L+(ee+ge)*(ue<<1),ue>>=1)),le===W)J+=4;else{var ye=e[Y+3*le],Pe=e[Y+3*le+1],We=e[Y+3*le+2];K[J++]=ye,K[J++]=Pe,K[J++]=We,K[J++]=255}--re}}}function c4(e,t,r,n){for(var a=e[t++],i=1<<a,o=i+1,l=o+1,u=a+1,f=(1<<u)-1,h=0,p=0,v=0,m=e[t++],N=new Int32Array(4096),w=null;;){for(;h<16&&m!==0;)p|=e[t++]<<h,h+=8,m===1?m=e[t++]:--m;if(h<u)break;var j=p&f;if(p>>=u,h-=u,j!==i){if(j===o)break;for(var _=j<l?j:w,C=0,k=_;k>i;)k=N[k]>>8,++C;var E=k;if(v+C+(_!==j?1:0)>n)return void gn.log("Warning, gif stream longer than expected.");r[v++]=E;var I=v+=C;for(_!==j&&(r[v++]=E),k=_;C--;)k=N[k],r[--I]=255&k,k>>=8;w!==null&&l<4096&&(N[l++]=w<<8|E,l>=f+1&&u<12&&(++u,f=f<<1|1)),w=j}else l=o+1,f=(1<<(u=a+1))-1,w=null}return v!==n&&gn.log("Warning, gif stream shorter than expected."),r}function z1(e){var t,r,n,a,i,o=Math.floor,l=new Array(64),u=new Array(64),f=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),N=new Array(64),w=[],j=0,_=7,C=new Array(64),k=new Array(64),E=new Array(64),I=new Array(256),D=new Array(2048),O=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],F=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],T=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],U=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],B=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],K=[0,1,2,3,4,5,6,7,8,9,10,11],V=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],de=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function se(L,q){for(var J=0,ne=0,ue=new Array,ie=1;ie<=16;ie++){for(var oe=1;oe<=L[ie];oe++)ue[q[ne]]=[],ue[q[ne]][0]=J,ue[q[ne]][1]=ie,ne++,J++;J*=2}return ue}function Y(L){for(var q=L[0],J=L[1]-1;J>=0;)q&1<<J&&(j|=1<<_),J--,--_<0&&(j==255?(W(255),W(0)):W(j),_=7,j=0)}function W(L){w.push(L)}function ee(L){W(L>>8&255),W(255&L)}function ge(L,q,J,ne,ue){for(var ie,oe=ue[0],le=ue[240],ye=(function(Qe,me){var xe,Ce,$e,et,Ge,tt,gt,_t,yt,zt,bt=0;for(yt=0;yt<8;++yt){xe=Qe[bt],Ce=Qe[bt+1],$e=Qe[bt+2],et=Qe[bt+3],Ge=Qe[bt+4],tt=Qe[bt+5],gt=Qe[bt+6];var Jr=xe+(_t=Qe[bt+7]),dr=xe-_t,Yt=Ce+gt,or=Ce-gt,Pr=$e+tt,Ue=$e-tt,ar=et+Ge,Ht=et-Ge,Xt=Jr+ar,Fr=Jr-ar,er=Yt+Pr,Rt=Yt-Pr;Qe[bt]=Xt+er,Qe[bt+4]=Xt-er;var Ir=.707106781*(Rt+Fr);Qe[bt+2]=Fr+Ir,Qe[bt+6]=Fr-Ir;var Kt=.382683433*((Xt=Ht+Ue)-(Rt=or+dr)),ir=.5411961*Xt+Kt,Ar=1.306562965*Rt+Kt,un=.707106781*(er=Ue+or),At=dr+un,Ee=dr-un;Qe[bt+5]=Ee+ir,Qe[bt+3]=Ee-ir,Qe[bt+1]=At+Ar,Qe[bt+7]=At-Ar,bt+=8}for(bt=0,yt=0;yt<8;++yt){xe=Qe[bt],Ce=Qe[bt+8],$e=Qe[bt+16],et=Qe[bt+24],Ge=Qe[bt+32],tt=Qe[bt+40],gt=Qe[bt+48];var at=xe+(_t=Qe[bt+56]),wt=xe-_t,Zt=Ce+gt,jr=Ce-gt,tn=$e+tt,Nn=$e-tt,Pa=et+Ge,tl=et-Ge,gi=at+Pa,zi=at-Pa,Ts=Zt+tn,Ka=Zt-tn;Qe[bt]=gi+Ts,Qe[bt+32]=gi-Ts;var Aa=.707106781*(Ka+zi);Qe[bt+16]=zi+Aa,Qe[bt+48]=zi-Aa;var zl=.382683433*((gi=tl+Nn)-(Ka=jr+wt)),vi=.5411961*gi+zl,rl=1.306562965*Ka+zl,ql=.707106781*(Ts=Nn+jr),Vl=wt+ql,Vc=wt-ql;Qe[bt+40]=Vc+vi,Qe[bt+24]=Vc-vi,Qe[bt+8]=Vl+rl,Qe[bt+56]=Vl-rl,bt++}for(yt=0;yt<64;++yt)zt=Qe[yt]*me[yt],m[yt]=zt>0?zt+.5|0:zt-.5|0;return m})(L,q),Pe=0;Pe<64;++Pe)N[O[Pe]]=ye[Pe];var We=N[0]-J;J=N[0],We==0?Y(ne[0]):(Y(ne[v[ie=32767+We]]),Y(p[ie]));for(var Fe=63;Fe>0&&N[Fe]==0;)Fe--;if(Fe==0)return Y(oe),J;for(var je,te=1;te<=Fe;){for(var Ze=te;N[te]==0&&te<=Fe;)++te;var Nt=te-Ze;if(Nt>=16){je=Nt>>4;for(var pt=1;pt<=je;++pt)Y(le);Nt&=15}ie=32767+N[te],Y(ue[(Nt<<4)+v[ie]]),Y(p[ie]),te++}return Fe!=63&&Y(oe),J}function re(L){L=Math.min(Math.max(L,1),100),i!=L&&((function(q){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ne=0;ne<64;ne++){var ue=o((J[ne]*q+50)/100);ue=Math.min(Math.max(ue,1),255),l[O[ne]]=ue}for(var ie=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],oe=0;oe<64;oe++){var le=o((ie[oe]*q+50)/100);le=Math.min(Math.max(le,1),255),u[O[oe]]=le}for(var ye=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,We=0;We<8;We++)for(var Fe=0;Fe<8;Fe++)f[Pe]=1/(l[O[Pe]]*ye[We]*ye[Fe]*8),h[Pe]=1/(u[O[Pe]]*ye[We]*ye[Fe]*8),Pe++})(L<50?Math.floor(5e3/L):Math.floor(200-2*L)),i=L)}this.encode=function(L,q){q&&re(q),w=new Array,j=0,_=7,ee(65496),ee(65504),ee(16),W(74),W(70),W(73),W(70),W(0),W(1),W(1),W(0),ee(1),ee(1),W(0),W(0),(function(){ee(65499),ee(132),W(0);for(var Ce=0;Ce<64;Ce++)W(l[Ce]);W(1);for(var $e=0;$e<64;$e++)W(u[$e])})(),(function(Ce,$e){ee(65472),ee(17),W(8),ee($e),ee(Ce),W(3),W(1),W(17),W(0),W(2),W(17),W(1),W(3),W(17),W(1)})(L.width,L.height),(function(){ee(65476),ee(418),W(0);for(var Ce=0;Ce<16;Ce++)W(F[Ce+1]);for(var $e=0;$e<=11;$e++)W(T[$e]);W(16);for(var et=0;et<16;et++)W(z[et+1]);for(var Ge=0;Ge<=161;Ge++)W(U[Ge]);W(1);for(var tt=0;tt<16;tt++)W(B[tt+1]);for(var gt=0;gt<=11;gt++)W(K[gt]);W(17);for(var _t=0;_t<16;_t++)W(V[_t+1]);for(var yt=0;yt<=161;yt++)W(de[yt])})(),ee(65498),ee(12),W(3),W(1),W(0),W(2),W(17),W(3),W(17),W(0),W(63),W(0);var J=0,ne=0,ue=0;j=0,_=7,this.encode.displayName="_encode_";for(var ie,oe,le,ye,Pe,We,Fe,je,te,Ze=L.data,Nt=L.width,pt=L.height,Qe=4*Nt,me=0;me<pt;){for(ie=0;ie<Qe;){for(Pe=Qe*me+ie,Fe=-1,je=0,te=0;te<64;te++)We=Pe+(je=te>>3)*Qe+(Fe=4*(7&te)),me+je>=pt&&(We-=Qe*(me+1+je-pt)),ie+Fe>=Qe&&(We-=ie+Fe-Qe+4),oe=Ze[We++],le=Ze[We++],ye=Ze[We++],C[te]=(D[oe]+D[le+256|0]+D[ye+512|0]>>16)-128,k[te]=(D[oe+768|0]+D[le+1024|0]+D[ye+1280|0]>>16)-128,E[te]=(D[oe+1280|0]+D[le+1536|0]+D[ye+1792|0]>>16)-128;J=ge(C,f,J,t,n),ne=ge(k,h,ne,r,a),ue=ge(E,h,ue,r,a),ie+=32}me+=8}if(_>=0){var xe=[];xe[1]=_+1,xe[0]=(1<<_+1)-1,Y(xe)}return ee(65497),new Uint8Array(w)},e=e||50,(function(){for(var L=String.fromCharCode,q=0;q<256;q++)I[q]=L(q)})(),t=se(F,T),r=se(B,K),n=se(z,U),a=se(V,de),(function(){for(var L=1,q=2,J=1;J<=15;J++){for(var ne=L;ne<q;ne++)v[32767+ne]=J,p[32767+ne]=[],p[32767+ne][1]=J,p[32767+ne][0]=ne;for(var ue=-(q-1);ue<=-L;ue++)v[32767+ue]=J,p[32767+ue]=[],p[32767+ue][1]=J,p[32767+ue][0]=q-1+ue;L<<=1,q<<=1}})(),(function(){for(var L=0;L<256;L++)D[L]=19595*L,D[L+256|0]=38470*L,D[L+512|0]=7471*L+32768,D[L+768|0]=-11059*L,D[L+1024|0]=-21709*L,D[L+1280|0]=32768*L+8421375,D[L+1536|0]=-27439*L,D[L+1792|0]=-5329*L})(),re(e)}function Ao(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function u4(e){function t(T){if(!T)throw Error("assert :P")}function r(T,z,U){for(var B=0;4>B;B++)if(T[z+B]!=U.charCodeAt(B))return!0;return!1}function n(T,z,U,B,K){for(var V=0;V<K;V++)T[z+V]=U[B+V]}function a(T,z,U,B){for(var K=0;K<B;K++)T[z+K]=U}function i(T){return new Int32Array(T)}function o(T,z){for(var U=[],B=0;B<T;B++)U.push(new z);return U}function l(T,z){var U=[];return(function B(K,V,de){for(var se=de[V],Y=0;Y<se&&(K.push(de.length>V+1?[]:new z),!(de.length<V+1));Y++)B(K[Y],V+1,de)})(U,0,T),U}var u=function(){var T=this;function z(y,S){for(var R=1<<S-1>>>0;y&R;)R>>>=1;return R?(y&R-1)+R:y}function U(y,S,R,$,H){t(!($%R));do y[S+($-=R)]=H;while(0<$)}function B(y,S,R,$,H){if(t(2328>=H),512>=H)var Z=i(512);else if((Z=i(H))==null)return 0;return(function(X,ae,ce,fe,_e,Le){var he,Se,Re=ae,Ke=1<<ce,Ie=i(16),ze=i(16);for(t(_e!=0),t(fe!=null),t(X!=null),t(0<ce),Se=0;Se<_e;++Se){if(15<fe[Se])return 0;++Ie[fe[Se]]}if(Ie[0]==_e)return 0;for(ze[1]=0,he=1;15>he;++he){if(Ie[he]>1<<he)return 0;ze[he+1]=ze[he]+Ie[he]}for(Se=0;Se<_e;++Se)he=fe[Se],0<fe[Se]&&(Le[ze[he]++]=Se);if(ze[15]==1)return(fe=new K).g=0,fe.value=Le[0],U(X,Re,1,Ke,fe),Ke;var He,Je=-1,Xe=Ke-1,Ut=0,Et=1,pr=1,Dt=1<<ce;for(Se=0,he=1,_e=2;he<=ce;++he,_e<<=1){if(Et+=pr<<=1,0>(pr-=Ie[he]))return 0;for(;0<Ie[he];--Ie[he])(fe=new K).g=he,fe.value=Le[Se++],U(X,Re+Ut,_e,Dt,fe),Ut=z(Ut,he)}for(he=ce+1,_e=2;15>=he;++he,_e<<=1){if(Et+=pr<<=1,0>(pr-=Ie[he]))return 0;for(;0<Ie[he];--Ie[he]){if(fe=new K,(Ut&Xe)!=Je){for(Re+=Dt,He=1<<(Je=he)-ce;15>Je&&!(0>=(He-=Ie[Je]));)++Je,He<<=1;Ke+=Dt=1<<(He=Je-ce),X[ae+(Je=Ut&Xe)].g=He+ce,X[ae+Je].value=Re-ae-Je}fe.g=he-ce,fe.value=Le[Se++],U(X,Re+(Ut>>ce),_e,Dt,fe),Ut=z(Ut,he)}}return Et!=2*ze[15]-1?0:Ke})(y,S,R,$,H,Z)}function K(){this.value=this.g=0}function V(){this.value=this.g=0}function de(){this.G=o(5,K),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ti,V)}function se(y,S,R,$){t(y!=null),t(S!=null),t(2147483648>$),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=S,y.pa=R,y.Jd=S,y.Yc=R+$,y.Zc=4<=$?R+$-4+1:R,oe(y)}function Y(y,S){for(var R=0;0<S--;)R|=ye(y,128)<<S;return R}function W(y,S){var R=Y(y,S);return le(y)?-R:R}function ee(y,S,R,$){var H,Z=0;for(t(y!=null),t(S!=null),t(4294967288>$),y.Sb=$,y.Ra=0,y.u=0,y.h=0,4<$&&($=4),H=0;H<$;++H)Z+=S[R+H]<<8*H;y.Ra=Z,y.bb=$,y.oa=S,y.pa=R}function ge(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<ul-8>>>0,++y.bb,y.u-=8;ne(y)&&(y.h=1,y.u=0)}function re(y,S){if(t(0<=S),!y.h&&S<=Ma){var R=J(y)&Oa[S];return y.u+=S,ge(y),R}return y.h=1,y.u=0}function L(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function q(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(y){return y.Ra>>>(y.u&ul-1)>>>0}function ne(y){return t(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>ul}function ue(y,S){y.u=S,y.h=ne(y)}function ie(y){y.u>=Yi&&(t(y.u>=Yi),ge(y))}function oe(y){t(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(t(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function le(y){return Y(y,1)}function ye(y,S){var R=y.Ca;0>y.b&&oe(y);var $=y.b,H=R*S>>>8,Z=(y.I>>>$>H)+0;for(Z?(R-=H,y.I-=H+1<<$>>>0):R=H+1,$=R,H=0;256<=$;)H+=8,$>>=8;return $=7^H+go[$],y.b-=$,y.Ca=(R<<$)-1,Z}function Pe(y,S,R){y[S+0]=R>>24&255,y[S+1]=R>>16&255,y[S+2]=R>>8&255,y[S+3]=255&R}function We(y,S){return y[S+0]|y[S+1]<<8}function Fe(y,S){return We(y,S)|y[S+2]<<16}function je(y,S){return We(y,S)|We(y,S+2)<<16}function te(y,S){var R=1<<S;return t(y!=null),t(0<S),y.X=i(R),y.X==null?0:(y.Mb=32-S,y.Xa=S,1)}function Ze(y,S){t(y!=null),t(S!=null),t(y.Xa==S.Xa),n(S.X,0,y.X,0,1<<S.Xa)}function Nt(){this.X=[],this.Xa=this.Mb=0}function pt(y,S,R,$){t(R!=null),t($!=null);var H=R[0],Z=$[0];return H==0&&(H=(y*Z+S/2)/S),Z==0&&(Z=(S*H+y/2)/y),0>=H||0>=Z?0:(R[0]=H,$[0]=Z,1)}function Qe(y,S){return y+(1<<S)-1>>>S}function me(y,S){return((4278255360&y)+(4278255360&S)>>>0&4278255360)+((16711935&y)+(16711935&S)>>>0&16711935)>>>0}function xe(y,S){T[S]=function(R,$,H,Z,X,ae,ce){var fe;for(fe=0;fe<X;++fe){var _e=T[y](ae[ce+fe-1],H,Z+fe);ae[ce+fe]=me(R[$+fe],_e)}}}function Ce(){this.ud=this.hd=this.jd=0}function $e(y,S){return((4278124286&(y^S))>>>1)+(y&S)>>>0}function et(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function Ge(y,S){return et(y+(y-S+.5>>1))}function tt(y,S,R){return Math.abs(S-R)-Math.abs(y-R)}function gt(y,S,R,$,H,Z,X){for($=Z[X-1],R=0;R<H;++R)Z[X+R]=$=me(y[S+R],$)}function _t(y,S,R,$,H){var Z;for(Z=0;Z<R;++Z){var X=y[S+Z],ae=X>>8&255,ce=16711935&(ce=(ce=16711935&X)+((ae<<16)+ae));$[H+Z]=(4278255360&X)+ce>>>0}}function yt(y,S){S.jd=255&y,S.hd=y>>8&255,S.ud=y>>16&255}function zt(y,S,R,$,H,Z){var X;for(X=0;X<$;++X){var ae=S[R+X],ce=ae>>>8,fe=ae,_e=255&(_e=(_e=ae>>>16)+((y.jd<<24>>24)*(ce<<24>>24)>>>5));fe=255&(fe=(fe+=(y.hd<<24>>24)*(ce<<24>>24)>>>5)+((y.ud<<24>>24)*(_e<<24>>24)>>>5)),H[Z+X]=(4278255360&ae)+(_e<<16)+fe}}function bt(y,S,R,$,H){T[S]=function(Z,X,ae,ce,fe,_e,Le,he,Se){for(ce=Le;ce<he;++ce)for(Le=0;Le<Se;++Le)fe[_e++]=H(ae[$(Z[X++])])},T[y]=function(Z,X,ae,ce,fe,_e,Le){var he=8>>Z.b,Se=Z.Ea,Re=Z.K[0],Ke=Z.w;if(8>he)for(Z=(1<<Z.b)-1,Ke=(1<<he)-1;X<ae;++X){var Ie,ze=0;for(Ie=0;Ie<Se;++Ie)Ie&Z||(ze=$(ce[fe++])),_e[Le++]=H(Re[ze&Ke]),ze>>=he}else T["VP8LMapColor"+R](ce,fe,Re,Ke,_e,Le,X,ae,Se)}}function Jr(y,S,R,$,H){for(R=S+R;S<R;){var Z=y[S++];$[H++]=Z>>16&255,$[H++]=Z>>8&255,$[H++]=255&Z}}function dr(y,S,R,$,H){for(R=S+R;S<R;){var Z=y[S++];$[H++]=Z>>16&255,$[H++]=Z>>8&255,$[H++]=255&Z,$[H++]=Z>>24&255}}function Yt(y,S,R,$,H){for(R=S+R;S<R;){var Z=(X=y[S++])>>16&240|X>>12&15,X=240&X|X>>28&15;$[H++]=Z,$[H++]=X}}function or(y,S,R,$,H){for(R=S+R;S<R;){var Z=(X=y[S++])>>16&248|X>>13&7,X=X>>5&224|X>>3&31;$[H++]=Z,$[H++]=X}}function Pr(y,S,R,$,H){for(R=S+R;S<R;){var Z=y[S++];$[H++]=255&Z,$[H++]=Z>>8&255,$[H++]=Z>>16&255}}function Ue(y,S,R,$,H,Z){if(Z==0)for(R=S+R;S<R;)Pe($,((Z=y[S++])[0]>>24|Z[1]>>8&65280|Z[2]<<8&16711680|Z[3]<<24)>>>0),H+=32;else n($,H,y,S,R)}function ar(y,S){T[S][0]=T[y+"0"],T[S][1]=T[y+"1"],T[S][2]=T[y+"2"],T[S][3]=T[y+"3"],T[S][4]=T[y+"4"],T[S][5]=T[y+"5"],T[S][6]=T[y+"6"],T[S][7]=T[y+"7"],T[S][8]=T[y+"8"],T[S][9]=T[y+"9"],T[S][10]=T[y+"10"],T[S][11]=T[y+"11"],T[S][12]=T[y+"12"],T[S][13]=T[y+"13"],T[S][14]=T[y+"0"],T[S][15]=T[y+"0"]}function Ht(y){return y==cu||y==hc||y==_d||y==Nd}function Xt(){this.eb=[],this.size=this.A=this.fb=0}function Fr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function er(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Xt,this.f.kb=new Fr,this.sd=null}function Rt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ir(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Kt(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function ir(y,S){var R=y.T,$=S.ba.f.RGBA,H=$.eb,Z=$.fb+y.ka*$.A,X=ha[S.ba.S],ae=y.y,ce=y.O,fe=y.f,_e=y.N,Le=y.ea,he=y.W,Se=S.cc,Re=S.dc,Ke=S.Mc,Ie=S.Nc,ze=y.ka,He=y.ka+y.T,Je=y.U,Xe=Je+1>>1;for(ze==0?X(ae,ce,null,null,fe,_e,Le,he,fe,_e,Le,he,H,Z,null,null,Je):(X(S.ec,S.fc,ae,ce,Se,Re,Ke,Ie,fe,_e,Le,he,H,Z-$.A,H,Z,Je),++R);ze+2<He;ze+=2)Se=fe,Re=_e,Ke=Le,Ie=he,_e+=y.Rc,he+=y.Rc,Z+=2*$.A,X(ae,(ce+=2*y.fa)-y.fa,ae,ce,Se,Re,Ke,Ie,fe,_e,Le,he,H,Z-$.A,H,Z,Je);return ce+=y.fa,y.j+He<y.o?(n(S.ec,S.fc,ae,ce,Je),n(S.cc,S.dc,fe,_e,Xe),n(S.Mc,S.Nc,Le,he,Xe),R--):1&He||X(ae,ce,null,null,fe,_e,Le,he,fe,_e,Le,he,H,Z+$.A,null,null,Je),R}function Ar(y,S,R){var $=y.F,H=[y.J];if($!=null){var Z=y.U,X=S.ba.S,ae=X==jd||X==_d;S=S.ba.f.RGBA;var ce=[0],fe=y.ka;ce[0]=y.T,y.Kb&&(fe==0?--ce[0]:(--fe,H[0]-=y.width),y.j+y.ka+y.T==y.o&&(ce[0]=y.o-y.j-fe));var _e=S.eb;fe=S.fb+fe*S.A,y=wd($,H[0],y.width,Z,ce,_e,fe+(ae?0:3),S.A),t(R==ce),y&&Ht(X)&&fc(_e,fe,ae,Z,ce,S.A)}return 0}function un(y){var S=y.ma,R=S.ba.S,$=11>R,H=R==ml||R==bd||R==jd||R==rn||R==12||Ht(R);if(S.memory=null,S.Ib=null,S.Jb=null,S.Nd=null,!ru(S.Oa,y,H?11:12))return 0;if(H&&Ht(R)&&rc(),y.da)alert("todo:use_scaling");else{if($){if(S.Ib=Kt,y.Kb){if(R=y.U+1>>1,S.memory=i(y.U+2*R),S.memory==null)return 0;S.ec=S.memory,S.fc=0,S.cc=S.ec,S.dc=S.fc+y.U,S.Mc=S.cc,S.Nc=S.dc+R,S.Ib=ir,rc()}}else alert("todo:EmitYUV");H&&(S.Jb=Ar,$&&wi())}if($&&!Ds){for(y=0;256>y;++y)ma[y]=89858*(y-128)+Ni>>wo,pa[y]=-22014*(y-128)+Ni,hu[y]=-45773*(y-128),vc[y]=113618*(y-128)+Ni>>wo;for(y=Qr;y<Xr;++y)S=76283*(y-16)+Ni>>wo,Mf[y-Qr]=Hn(S,255),yg[y-Qr]=Hn(S+8>>4,15);Ds=1}return 1}function At(y){var S=y.ma,R=y.U,$=y.T;return t(!(1&y.ka)),0>=R||0>=$?0:(R=S.Ib(y,S),S.Jb!=null&&S.Jb(y,S,R),S.Dc+=R,1)}function Ee(y){y.ma.memory=null}function at(y,S,R,$){return re(y,8)!=47?0:(S[0]=re(y,14)+1,R[0]=re(y,14)+1,$[0]=re(y,1),re(y,3)!=0?0:!y.h)}function wt(y,S){if(4>y)return y+1;var R=y-2>>1;return(2+(1&y)<<R)+re(S,R)+1}function Zt(y,S){return 120<S?S-120:1<=(R=((R=I0[S-1])>>4)*y+(8-(15&R)))?R:1;var R}function jr(y,S,R){var $=J(R),H=y[S+=255&$].g-8;return 0<H&&(ue(R,R.u+8),$=J(R),S+=y[S].value,S+=$&(1<<H)-1),ue(R,R.u+y[S].g),y[S].value}function tn(y,S,R){return R.g+=y.g,R.value+=y.value<<S>>>0,t(8>=R.g),y.g}function Nn(y,S,R){var $=y.xc;return t((S=$==0?0:y.vc[y.md*(R>>$)+(S>>$)])<y.Wb),y.Ya[S]}function Pa(y,S,R,$){var H=y.ab,Z=y.c*S,X=y.C;S=X+S;var ae=R,ce=$;for($=y.Ta,R=y.Ua;0<H--;){var fe=y.gc[H],_e=X,Le=S,he=ae,Se=ce,Re=(ce=$,ae=R,fe.Ea);switch(t(_e<Le),t(Le<=fe.nc),fe.hc){case 2:On(he,Se,(Le-_e)*Re,ce,ae);break;case 0:var Ke=_e,Ie=Le,ze=ce,He=ae,Je=(Dt=fe).Ea;Ke==0&&(vo(he,Se,null,null,1,ze,He),gt(he,Se+1,0,0,Je-1,ze,He+1),Se+=Je,He+=Je,++Ke);for(var Xe=1<<Dt.b,Ut=Xe-1,Et=Qe(Je,Dt.b),pr=Dt.K,Dt=Dt.w+(Ke>>Dt.b)*Et;Ke<Ie;){var Rr=pr,Tn=Dt,gr=1;for(Qi(he,Se,ze,He-Je,1,ze,He);gr<Je;){var Pt=(gr&~Ut)+Xe;Pt>Je&&(Pt=Je),(0,lc[Rr[Tn++]>>8&15])(he,Se+ +gr,ze,He+gr-Je,Pt-gr,ze,He+gr),gr=Pt}Se+=Je,He+=Je,++Ke&Ut||(Dt+=Et)}Le!=fe.nc&&n(ce,ae-Re,ce,ae+(Le-_e-1)*Re,Re);break;case 1:for(Re=he,Ie=Se,Je=(he=fe.Ea)-(He=he&~(ze=(Se=1<<fe.b)-1)),Ke=Qe(he,fe.b),Xe=fe.K,fe=fe.w+(_e>>fe.b)*Ke;_e<Le;){for(Ut=Xe,Et=fe,pr=new Ce,Dt=Ie+He,Rr=Ie+he;Ie<Dt;)yt(Ut[Et++],pr),su(pr,Re,Ie,Se,ce,ae),Ie+=Se,ae+=Se;Ie<Rr&&(yt(Ut[Et++],pr),su(pr,Re,Ie,Je,ce,ae),Ie+=Je,ae+=Je),++_e&ze||(fe+=Ke)}break;case 3:if(he==ce&&Se==ae&&0<fe.b){for(Ie=ce,he=Re=ae+(Le-_e)*Re-(He=(Le-_e)*Qe(fe.Ea,fe.b)),Se=ce,ze=ae,Ke=[],He=(Je=He)-1;0<=He;--He)Ke[He]=Se[ze+He];for(He=Je-1;0<=He;--He)Ie[he+He]=Ke[He];ic(fe,_e,Le,ce,Re,ce,ae)}else ic(fe,_e,Le,he,Se,ce,ae)}ae=$,ce=R}ce!=R&&n($,R,ae,ce,Z)}function tl(y,S){var R=y.V,$=y.Ba+y.c*y.C,H=S-y.C;if(t(S<=y.l.o),t(16>=H),0<H){var Z=y.l,X=y.Ta,ae=y.Ua,ce=Z.width;if(Pa(y,H,R,$),H=ae=[ae],t((R=y.C)<($=S)),t(Z.v<Z.va),$>Z.o&&($=Z.o),R<Z.j){var fe=Z.j-R;R=Z.j,H[0]+=fe*ce}if(R>=$?R=0:(H[0]+=4*Z.v,Z.ka=R-Z.j,Z.U=Z.va-Z.v,Z.T=$-R,R=1),R){if(ae=ae[0],11>(R=y.ca).S){var _e=R.f.RGBA,Le=($=R.S,H=Z.U,Z=Z.T,fe=_e.eb,_e.A),he=Z;for(_e=_e.fb+y.Ma*_e.A;0<he--;){var Se=X,Re=ae,Ke=H,Ie=fe,ze=_e;switch($){case Lf:au(Se,Re,Ke,Ie,ze);break;case ml:xo(Se,Re,Ke,Ie,ze);break;case cu:xo(Se,Re,Ke,Ie,ze),fc(Ie,ze,0,Ke,1,0);break;case mg:cc(Se,Re,Ke,Ie,ze);break;case bd:Ue(Se,Re,Ke,Ie,ze,1);break;case hc:Ue(Se,Re,Ke,Ie,ze,1),fc(Ie,ze,0,Ke,1,0);break;case jd:Ue(Se,Re,Ke,Ie,ze,0);break;case _d:Ue(Se,Re,Ke,Ie,ze,0),fc(Ie,ze,1,Ke,1,0);break;case rn:dl(Se,Re,Ke,Ie,ze);break;case Nd:dl(Se,Re,Ke,Ie,ze),pm(Ie,ze,Ke,1,0);break;case Df:fl(Se,Re,Ke,Ie,ze);break;default:t(0)}ae+=ce,_e+=Le}y.Ma+=Z}else alert("todo:EmitRescaledRowsYUVA");t(y.Ma<=R.height)}}y.C=S,t(y.C<=y.i)}function gi(y){var S;if(0<y.ua)return 0;for(S=0;S<y.Wb;++S){var R=y.Ya[S].G,$=y.Ya[S].H;if(0<R[1][$[1]+0].g||0<R[2][$[2]+0].g||0<R[3][$[3]+0].g)return 0}return 1}function zi(y,S,R,$,H,Z){if(y.Z!=0){var X=y.qd,ae=y.rd;for(t(Ws[y.Z]!=null);S<R;++S)Ws[y.Z](X,ae,$,H,$,H,Z),X=$,ae=H,H+=Z;y.qd=X,y.rd=ae}}function Ts(y,S){var R=y.l.ma,$=R.Z==0||R.Z==1?y.l.j:y.C;if($=y.C<$?$:y.C,t(S<=y.l.o),S>$){var H=y.l.width,Z=R.ca,X=R.tb+H*$,ae=y.V,ce=y.Ba+y.c*$,fe=y.gc;t(y.ab==1),t(fe[0].hc==3),ji(fe[0],$,S,ae,ce,Z,X),zi(R,$,S,Z,X,H)}y.C=y.Ma=S}function Ka(y,S,R,$,H,Z,X){var ae=y.$/$,ce=y.$%$,fe=y.m,_e=y.s,Le=R+y.$,he=Le;H=R+$*H;var Se=R+$*Z,Re=280+_e.ua,Ke=y.Pb?ae:16777216,Ie=0<_e.ua?_e.Wa:null,ze=_e.wc,He=Le<Se?Nn(_e,ce,ae):null;t(y.C<Z),t(Se<=H);var Je=!1;e:for(;;){for(;Je||Le<Se;){var Xe=0;if(ae>=Ke){var Ut=Le-R;t((Ke=y).Pb),Ke.wd=Ke.m,Ke.xd=Ut,0<Ke.s.ua&&Ze(Ke.s.Wa,Ke.s.vb),Ke=ae+Of}if(ce&ze||(He=Nn(_e,ce,ae)),t(He!=null),He.Qb&&(S[Le]=He.qb,Je=!0),!Je)if(ie(fe),He.jc){Xe=fe,Ut=S;var Et=Le,pr=He.pd[J(Xe)&ti-1];t(He.jc),256>pr.g?(ue(Xe,Xe.u+pr.g),Ut[Et]=pr.value,Xe=0):(ue(Xe,Xe.u+pr.g-256),t(256<=pr.value),Xe=pr.value),Xe==0&&(Je=!0)}else Xe=jr(He.G[0],He.H[0],fe);if(fe.h)break;if(Je||256>Xe){if(!Je)if(He.nd)S[Le]=(He.qb|Xe<<8)>>>0;else{if(ie(fe),Je=jr(He.G[1],He.H[1],fe),ie(fe),Ut=jr(He.G[2],He.H[2],fe),Et=jr(He.G[3],He.H[3],fe),fe.h)break;S[Le]=(Et<<24|Je<<16|Xe<<8|Ut)>>>0}if(Je=!1,++Le,++ce>=$&&(ce=0,++ae,X!=null&&ae<=Z&&!(ae%16)&&X(y,ae),Ie!=null))for(;he<Le;)Xe=S[he++],Ie.X[(506832829*Xe&4294967295)>>>Ie.Mb]=Xe}else if(280>Xe){if(Xe=wt(Xe-256,fe),Ut=jr(He.G[4],He.H[4],fe),ie(fe),Ut=Zt($,Ut=wt(Ut,fe)),fe.h)break;if(Le-R<Ut||H-Le<Xe)break e;for(Et=0;Et<Xe;++Et)S[Le+Et]=S[Le+Et-Ut];for(Le+=Xe,ce+=Xe;ce>=$;)ce-=$,++ae,X!=null&&ae<=Z&&!(ae%16)&&X(y,ae);if(t(Le<=H),ce&ze&&(He=Nn(_e,ce,ae)),Ie!=null)for(;he<Le;)Xe=S[he++],Ie.X[(506832829*Xe&4294967295)>>>Ie.Mb]=Xe}else{if(!(Xe<Re))break e;for(Je=Xe-280,t(Ie!=null);he<Le;)Xe=S[he++],Ie.X[(506832829*Xe&4294967295)>>>Ie.Mb]=Xe;Xe=Le,t(!(Je>>>(Ut=Ie).Xa)),S[Xe]=Ut.X[Je],Je=!0}Je||t(fe.h==ne(fe))}if(y.Pb&&fe.h&&Le<H)t(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&Ze(y.s.vb,y.s.Wa);else{if(fe.h)break e;X?.(y,ae>Z?Z:ae),y.a=0,y.$=Le-R}return 1}return y.a=3,0}function Aa(y){t(y!=null),y.vc=null,y.yc=null,y.Ya=null;var S=y.Wa;S!=null&&(S.X=null),y.vb=null,t(y!=null)}function zl(){var y=new cr;return y==null?null:(y.a=0,y.xb=du,ar("Predictor","VP8LPredictors"),ar("Predictor","VP8LPredictors_C"),ar("PredictorAdd","VP8LPredictorsAdd"),ar("PredictorAdd","VP8LPredictorsAdd_C"),On=_t,su=zt,au=Jr,xo=dr,dl=Yt,fl=or,cc=Pr,T.VP8LMapColor32b=Ji,T.VP8LMapColor8b=oc,y)}function vi(y,S,R,$,H){var Z=1,X=[y],ae=[S],ce=$.m,fe=$.s,_e=null,Le=0;e:for(;;){if(R)for(;Z&&re(ce,1);){var he=X,Se=ae,Re=$,Ke=1,Ie=Re.m,ze=Re.gc[Re.ab],He=re(Ie,2);if(Re.Oc&1<<He)Z=0;else{switch(Re.Oc|=1<<He,ze.hc=He,ze.Ea=he[0],ze.nc=Se[0],ze.K=[null],++Re.ab,t(4>=Re.ab),He){case 0:case 1:ze.b=re(Ie,3)+2,Ke=vi(Qe(ze.Ea,ze.b),Qe(ze.nc,ze.b),0,Re,ze.K),ze.K=ze.K[0];break;case 3:var Je,Xe=re(Ie,8)+1,Ut=16<Xe?0:4<Xe?1:2<Xe?2:3;if(he[0]=Qe(ze.Ea,Ut),ze.b=Ut,Je=Ke=vi(Xe,1,0,Re,ze.K)){var Et,pr=Xe,Dt=ze,Rr=1<<(8>>Dt.b),Tn=i(Rr);if(Tn==null)Je=0;else{var gr=Dt.K[0],Pt=Dt.w;for(Tn[0]=Dt.K[0][0],Et=1;Et<1*pr;++Et)Tn[Et]=me(gr[Pt+Et],Tn[Et-1]);for(;Et<4*Rr;++Et)Tn[Et]=0;Dt.K[0]=null,Dt.K[0]=Tn,Je=1}}Ke=Je;break;case 2:break;default:t(0)}Z=Ke}}if(X=X[0],ae=ae[0],Z&&re(ce,1)&&!(Z=1<=(Le=re(ce,4))&&11>=Le)){$.a=3;break e}var xt;if(xt=Z)t:{var Mn,lr,Tr,fn=$,js=X,Qn=ae,kn=Le,cs=R,_s=fn.m,xn=fn.s,Or=[null],qr=1,yn=0,Vr=gg[kn];r:for(;;){if(cs&&re(_s,1)){var Rn=re(_s,3)+2,Ln=Qe(js,Rn),nn=Qe(Qn,Rn),Hs=Ln*nn;if(!vi(Ln,nn,0,fn,Or))break r;for(Or=Or[0],xn.xc=Rn,Mn=0;Mn<Hs;++Mn){var en=Or[Mn]>>8&65535;Or[Mn]=en,en>=qr&&(qr=en+1)}}if(_s.h)break r;for(lr=0;5>lr;++lr){var sn=mc[lr];!lr&&0<kn&&(sn+=1<<kn),yn<sn&&(yn=sn)}var Jn=o(qr*Vr,K),Is=qr,ga=o(Is,de);if(ga==null)var Fn=null;else t(65536>=Is),Fn=ga;var Bn=i(yn);if(Fn==null||Bn==null||Jn==null){fn.a=1;break r}var Gs=Jn;for(Mn=Tr=0;Mn<qr;++Mn){var an=Fn[Mn],Ks=an.G,si=an.H,Si=0,Ns=1,Un=0;for(lr=0;5>lr;++lr){sn=mc[lr],Ks[lr]=Gs,si[lr]=Tr,!lr&&0<kn&&(sn+=1<<kn);s:{var vl,jo=sn,mu=fn,eo=Bn,bg=Gs,Cm=Tr,pn=0,ki=mu.m,Em=re(ki,1);if(a(eo,0,0,jo),Em){var Pm=re(ki,1)+1,Ff=re(ki,1),Bf=re(ki,Ff==0?1:8);eo[Bf]=1,Pm==2&&(eo[Bf=re(ki,8)]=1);var to=1}else{var wn=i(19),Zn=re(ki,4)+4;if(19<Zn){mu.a=3;var $n=0;break s}for(vl=0;vl<Zn;++vl)wn[D0[vl]]=re(ki,3);var pu=void 0,_o=void 0,gu=mu,U0=wn,us=jo,Uf=eo,Pd=0,ro=gu.m,Ci=8,Fa=o(128,K);n:for(;B(Fa,0,7,U0,19);){if(re(ro,1)){var Ad=2+2*re(ro,3);if((pu=2+re(ro,Ad))>us)break n}else pu=us;for(_o=0;_o<us&&pu--;){ie(ro);var $f=Fa[0+(127&J(ro))];ue(ro,ro.u+$f.g);var xl=$f.value;if(16>xl)Uf[_o++]=xl,xl!=0&&(Ci=xl);else{var jg=xl==16,Am=xl-16,_g=If[Am],Tm=re(ro,Sd[Am])+_g;if(_o+Tm>us)break n;for(var Ng=jg?Ci:0;0<Tm--;)Uf[_o++]=Ng}}Pd=1;break n}Pd||(gu.a=3),to=Pd}(to=to&&!ki.h)&&(pn=B(bg,Cm,8,eo,jo)),to&&pn!=0?$n=pn:(mu.a=3,$n=0)}if($n==0)break r;if(Ns&&pg[lr]==1&&(Ns=Gs[Tr].g==0),Si+=Gs[Tr].g,Tr+=$n,3>=lr){var vu,zf=Bn[0];for(vu=1;vu<sn;++vu)Bn[vu]>zf&&(zf=Bn[vu]);Un+=zf}}if(an.nd=Ns,an.Qb=0,Ns&&(an.qb=(Ks[3][si[3]+0].value<<24|Ks[1][si[1]+0].value<<16|Ks[2][si[2]+0].value)>>>0,Si==0&&256>Ks[0][si[0]+0].value&&(an.Qb=1,an.qb+=Ks[0][si[0]+0].value<<8)),an.jc=!an.Qb&&6>Un,an.jc){var Td,Ba=an;for(Td=0;Td<ti;++Td){var No=Td,Ei=Ba.pd[No],yc=Ba.G[0][Ba.H[0]+No];256<=yc.value?(Ei.g=yc.g+256,Ei.value=yc.value):(Ei.g=0,Ei.value=0,No>>=tn(yc,8,Ei),No>>=tn(Ba.G[1][Ba.H[1]+No],16,Ei),No>>=tn(Ba.G[2][Ba.H[2]+No],0,Ei),tn(Ba.G[3][Ba.H[3]+No],24,Ei))}}}xn.vc=Or,xn.Wb=qr,xn.Ya=Fn,xn.yc=Jn,xt=1;break t}xt=0}if(!(Z=xt)){$.a=3;break e}if(0<Le){if(fe.ua=1<<Le,!te(fe.Wa,Le)){$.a=1,Z=0;break e}}else fe.ua=0;var qf=$,Vf=X,Sg=ae,Wf=qf.s,Hf=Wf.xc;if(qf.c=Vf,qf.i=Sg,Wf.md=Qe(Vf,Hf),Wf.wc=Hf==0?-1:(1<<Hf)-1,R){$.xb=Xi;break e}if((_e=i(X*ae))==null){$.a=1,Z=0;break e}Z=(Z=Ka($,_e,0,X,ae,ae,null))&&!ce.h;break e}return Z?(H!=null?H[0]=_e:(t(_e==null),t(R)),$.$=0,R||Aa(fe)):Aa(fe),Z}function rl(y,S){var R=y.c*y.i,$=R+S+16*S;return t(y.c<=S),y.V=i($),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+R+S,1)}function ql(y,S){var R=y.C,$=S-R,H=y.V,Z=y.Ba+y.c*R;for(t(S<=y.l.o);0<$;){var X=16<$?16:$,ae=y.l.ma,ce=y.l.width,fe=ce*X,_e=ae.ca,Le=ae.tb+ce*R,he=y.Ta,Se=y.Ua;Pa(y,X,H,Z),gm(he,Se,_e,Le,fe),zi(ae,R,R+X,_e,Le,ce),$-=X,H+=X*y.c,R+=X}t(R==S),y.C=y.Ma=S}function Vl(){this.ub=this.yd=this.td=this.Rb=0}function Vc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function dm(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function mn(){this.Yb=(function(){var y=[];return(function S(R,$,H){for(var Z=H[$],X=0;X<Z&&(R.push(H.length>$+1?[]:0),!(H.length<$+1));X++)S(R[X],$+1,H)})(y,0,[3,11]),y})()}function _f(){this.jb=i(3),this.Wc=l([4,8],mn),this.Xc=l([4,17],mn)}function Wc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ta(){this.ld=this.La=this.dd=this.tc=0}function nl(){this.Na=this.la=0}function Nf(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hc(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Wl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ta),this.Y=0,this.ya=Array(new Hc),this.aa=0,this.l=new Gc}function Ra(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Sf(){this.cb=this.a=0,this.sc="",this.m=new L,this.Od=new Vl,this.Kc=new Vc,this.ed=new Wc,this.Qa=new dm,this.Ic=this.$c=this.Aa=0,this.D=new Wl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,L),this.ia=0,this.pb=o(4,Nf),this.Pa=new _f,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ra),this.Hd=0,this.rb=Array(new nl),this.sb=0,this.wa=Array(new Ta),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hc),this.L=this.aa=0,this.gd=l([4,2],Ta),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Hn(y,S){return 0>y?0:y>S?S:y}function Gc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function fm(){var y=new Sf;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,pc||(pc=qi)),y}function Gn(y,S,R){return y.a==0&&(y.a=S,y.sc=R,y.cb=0),0}function Hl(y,S,R){return 3<=R&&y[S+0]==157&&y[S+1]==1&&y[S+2]==42}function La(y,S){if(y==null)return 0;if(y.a=0,y.sc="OK",S==null)return Gn(y,2,"null VP8Io passed to VP8GetHeaders()");var R=S.data,$=S.w,H=S.ha;if(4>H)return Gn(y,7,"Truncated header.");var Z=R[$+0]|R[$+1]<<8|R[$+2]<<16,X=y.Od;if(X.Rb=!(1&Z),X.td=Z>>1&7,X.yd=Z>>4&1,X.ub=Z>>5,3<X.td)return Gn(y,3,"Incorrect keyframe parameters.");if(!X.yd)return Gn(y,4,"Frame not displayable.");$+=3,H-=3;var ae=y.Kc;if(X.Rb){if(7>H)return Gn(y,7,"cannot parse picture header");if(!Hl(R,$,H))return Gn(y,3,"Bad code word");ae.c=16383&(R[$+4]<<8|R[$+3]),ae.Td=R[$+4]>>6,ae.i=16383&(R[$+6]<<8|R[$+5]),ae.Ud=R[$+6]>>6,$+=7,H-=7,y.za=ae.c+15>>4,y.Ub=ae.i+15>>4,S.width=ae.c,S.height=ae.i,S.Da=0,S.j=0,S.v=0,S.va=S.width,S.o=S.height,S.da=0,S.ib=S.width,S.hb=S.height,S.U=S.width,S.T=S.height,a((Z=y.Pa).jb,0,255,Z.jb.length),t((Z=y.Qa)!=null),Z.Cb=0,Z.Bb=0,Z.Fb=1,a(Z.Zb,0,0,Z.Zb.length),a(Z.Lb,0,0,Z.Lb)}if(X.ub>H)return Gn(y,7,"bad partition length");se(Z=y.m,R,$,X.ub),$+=X.ub,H-=X.ub,X.Rb&&(ae.Ld=le(Z),ae.Kd=le(Z)),ae=y.Qa;var ce,fe=y.Pa;if(t(Z!=null),t(ae!=null),ae.Cb=le(Z),ae.Cb){if(ae.Bb=le(Z),le(Z)){for(ae.Fb=le(Z),ce=0;4>ce;++ce)ae.Zb[ce]=le(Z)?W(Z,7):0;for(ce=0;4>ce;++ce)ae.Lb[ce]=le(Z)?W(Z,6):0}if(ae.Bb)for(ce=0;3>ce;++ce)fe.jb[ce]=le(Z)?Y(Z,8):255}else ae.Bb=0;if(Z.Ka)return Gn(y,3,"cannot parse segment header");if((ae=y.ed).zd=le(Z),ae.Tb=Y(Z,6),ae.wb=Y(Z,3),ae.Pc=le(Z),ae.Pc&&le(Z)){for(fe=0;4>fe;++fe)le(Z)&&(ae.vd[fe]=W(Z,6));for(fe=0;4>fe;++fe)le(Z)&&(ae.od[fe]=W(Z,6))}if(y.L=ae.Tb==0?0:ae.zd?1:2,Z.Ka)return Gn(y,3,"cannot parse filter header");var _e=H;if(H=ce=$,$=ce+_e,ae=_e,y.Xb=(1<<Y(y.m,2))-1,_e<3*(fe=y.Xb))R=7;else{for(ce+=3*fe,ae-=3*fe,_e=0;_e<fe;++_e){var Le=R[H+0]|R[H+1]<<8|R[H+2]<<16;Le>ae&&(Le=ae),se(y.Jc[+_e],R,ce,Le),ce+=Le,ae-=Le,H+=3}se(y.Jc[+fe],R,ce,ae),R=ce<$?0:5}if(R!=0)return Gn(y,R,"cannot parse partitions");for(R=Y(ce=y.m,7),H=le(ce)?W(ce,4):0,$=le(ce)?W(ce,4):0,ae=le(ce)?W(ce,4):0,fe=le(ce)?W(ce,4):0,ce=le(ce)?W(ce,4):0,_e=y.Qa,Le=0;4>Le;++Le){if(_e.Cb){var he=_e.Zb[Le];_e.Fb||(he+=R)}else{if(0<Le){y.pb[Le]=y.pb[0];continue}he=R}var Se=y.pb[Le];Se.Sc[0]=uu[Hn(he+H,127)],Se.Sc[1]=kd[Hn(he+0,127)],Se.Eb[0]=2*uu[Hn(he+$,127)],Se.Eb[1]=101581*kd[Hn(he+ae,127)]>>16,8>Se.Eb[1]&&(Se.Eb[1]=8),Se.Qc[0]=uu[Hn(he+fe,117)],Se.Qc[1]=kd[Hn(he+ce,127)],Se.lc=he+ce}if(!X.Rb)return Gn(y,4,"Not a key frame.");for(le(Z),X=y.Pa,R=0;4>R;++R){for(H=0;8>H;++H)for($=0;3>$;++$)for(ae=0;11>ae;++ae)fe=ye(Z,M0[R][H][$][ae])?Y(Z,8):xg[R][H][$][ae],X.Wc[R][H].Yb[$][ae]=fe;for(H=0;17>H;++H)X.Xc[R][H]=X.Wc[R][Nm[H]]}return y.kc=le(Z),y.kc&&(y.Bd=Y(Z,8)),y.cb=1}function qi(y,S,R,$,H,Z,X){var ae=S[H].Yb[R];for(R=0;16>H;++H){if(!ye(y,ae[R+0]))return H;for(;!ye(y,ae[R+1]);)if(ae=S[++H].Yb[0],R=0,H==16)return 16;var ce=S[H+1].Yb;if(ye(y,ae[R+2])){var fe=y,_e=0;if(ye(fe,(he=ae)[(Le=R)+3]))if(ye(fe,he[Le+6])){for(ae=0,Le=2*(_e=ye(fe,he[Le+8]))+(he=ye(fe,he[Le+9+_e])),_e=0,he=jm[Le];he[ae];++ae)_e+=_e+ye(fe,he[ae]);_e+=3+(8<<Le)}else ye(fe,he[Le+7])?(_e=7+2*ye(fe,165),_e+=ye(fe,145)):_e=5+ye(fe,159);else _e=ye(fe,he[Le+4])?3+ye(fe,he[Le+5]):2;ae=ce[2]}else _e=1,ae=ce[1];ce=X+_m[H],0>(fe=y).b&&oe(fe);var Le,he=fe.b,Se=(Le=fe.Ca>>1)-(fe.I>>he)>>31;--fe.b,fe.Ca+=Se,fe.Ca|=1,fe.I-=(Le+1&Se)<<he,Z[ce]=((_e^Se)-Se)*$[(0<H)+0]}return 16}function Gl(y){var S=y.rb[y.sb-1];S.la=0,S.Na=0,a(y.zc,0,0,y.zc.length),y.ja=0}function Ya(y,S,R,$,H){H=y[S+R+32*$]+(H>>3),y[S+R+32*$]=-256&H?0>H?0:255:H}function os(y,S,R,$,H,Z){Ya(y,S,0,R,$+H),Ya(y,S,1,R,$+Z),Ya(y,S,2,R,$-Z),Ya(y,S,3,R,$-H)}function xi(y){return(20091*y>>16)+y}function cd(y,S,R,$){var H,Z=0,X=i(16);for(H=0;4>H;++H){var ae=y[S+0]+y[S+8],ce=y[S+0]-y[S+8],fe=(35468*y[S+4]>>16)-xi(y[S+12]),_e=xi(y[S+4])+(35468*y[S+12]>>16);X[Z+0]=ae+_e,X[Z+1]=ce+fe,X[Z+2]=ce-fe,X[Z+3]=ae-_e,Z+=4,S++}for(H=Z=0;4>H;++H)ae=(y=X[Z+0]+4)+X[Z+8],ce=y-X[Z+8],fe=(35468*X[Z+4]>>16)-xi(X[Z+12]),Ya(R,$,0,0,ae+(_e=xi(X[Z+4])+(35468*X[Z+12]>>16))),Ya(R,$,1,0,ce+fe),Ya(R,$,2,0,ce-fe),Ya(R,$,3,0,ae-_e),Z++,$+=32}function ud(y,S,R,$){var H=y[S+0]+4,Z=35468*y[S+4]>>16,X=xi(y[S+4]),ae=35468*y[S+1]>>16;os(R,$,0,H+X,y=xi(y[S+1]),ae),os(R,$,1,H+Z,y,ae),os(R,$,2,H-Z,y,ae),os(R,$,3,H-X,y,ae)}function Kl(y,S,R,$,H){cd(y,S,R,$),H&&cd(y,S+16,R,$+4)}function Vi(y,S,R,$){uc(y,S+0,R,$,1),uc(y,S+32,R,$+128,1)}function Kc(y,S,R,$){var H;for(y=y[S+0]+4,H=0;4>H;++H)for(S=0;4>S;++S)Ya(R,$,S,H,y)}function $r(y,S,R,$){y[S+0]&&zr(y,S+0,R,$),y[S+16]&&zr(y,S+16,R,$+4),y[S+32]&&zr(y,S+32,R,$+128),y[S+48]&&zr(y,S+48,R,$+128+4)}function Yl(y,S,R,$){var H,Z=i(16);for(H=0;4>H;++H){var X=y[S+0+H]+y[S+12+H],ae=y[S+4+H]+y[S+8+H],ce=y[S+4+H]-y[S+8+H],fe=y[S+0+H]-y[S+12+H];Z[0+H]=X+ae,Z[8+H]=X-ae,Z[4+H]=fe+ce,Z[12+H]=fe-ce}for(H=0;4>H;++H)X=(y=Z[0+4*H]+3)+Z[3+4*H],ae=Z[1+4*H]+Z[2+4*H],ce=Z[1+4*H]-Z[2+4*H],fe=y-Z[3+4*H],R[$+0]=X+ae>>3,R[$+16]=fe+ce>>3,R[$+32]=X-ae>>3,R[$+48]=fe-ce>>3,$+=64}function sl(y,S,R){var $,H=S-32,Z=ra,X=255-y[H-1];for($=0;$<R;++$){var ae,ce=Z,fe=X+y[S-1];for(ae=0;ae<R;++ae)y[S+ae]=ce[fe+y[H+ae]];S+=32}}function dd(y,S){sl(y,S,4)}function kf(y,S){sl(y,S,8)}function Cf(y,S){sl(y,S,16)}function Yc(y,S){var R;for(R=0;16>R;++R)n(y,S+32*R,y,S-32,16)}function Qc(y,S){var R;for(R=16;0<R;--R)a(y,S,y[S-1],16),S+=32}function la(y,S,R){var $;for($=0;16>$;++$)a(S,R+32*$,y,16)}function Wi(y,S){var R,$=16;for(R=0;16>R;++R)$+=y[S-1+32*R]+y[S+R-32];la($>>5,y,S)}function ca(y,S){var R,$=8;for(R=0;16>R;++R)$+=y[S-1+32*R];la($>>4,y,S)}function Qa(y,S){var R,$=8;for(R=0;16>R;++R)$+=y[S+R-32];la($>>4,y,S)}function Ql(y,S){la(128,y,S)}function sr(y,S,R){return y+2*S+R+2>>2}function Hi(y,S){var R,$=S-32;for($=new Uint8Array([sr(y[$-1],y[$+0],y[$+1]),sr(y[$+0],y[$+1],y[$+2]),sr(y[$+1],y[$+2],y[$+3]),sr(y[$+2],y[$+3],y[$+4])]),R=0;4>R;++R)n(y,S+32*R,$,0,$.length)}function hm(y,S){var R=y[S-1],$=y[S-1+32],H=y[S-1+64],Z=y[S-1+96];Pe(y,S+0,16843009*sr(y[S-1-32],R,$)),Pe(y,S+32,16843009*sr(R,$,H)),Pe(y,S+64,16843009*sr($,H,Z)),Pe(y,S+96,16843009*sr(H,Z,Z))}function Ef(y,S){var R,$=4;for(R=0;4>R;++R)$+=y[S+R-32]+y[S-1+32*R];for($>>=3,R=0;4>R;++R)a(y,S+32*R,$,4)}function Da(y,S){var R=y[S-1+0],$=y[S-1+32],H=y[S-1+64],Z=y[S-1-32],X=y[S+0-32],ae=y[S+1-32],ce=y[S+2-32],fe=y[S+3-32];y[S+0+96]=sr($,H,y[S-1+96]),y[S+1+96]=y[S+0+64]=sr(R,$,H),y[S+2+96]=y[S+1+64]=y[S+0+32]=sr(Z,R,$),y[S+3+96]=y[S+2+64]=y[S+1+32]=y[S+0+0]=sr(X,Z,R),y[S+3+64]=y[S+2+32]=y[S+1+0]=sr(ae,X,Z),y[S+3+32]=y[S+2+0]=sr(ce,ae,X),y[S+3+0]=sr(fe,ce,ae)}function uo(y,S){var R=y[S+1-32],$=y[S+2-32],H=y[S+3-32],Z=y[S+4-32],X=y[S+5-32],ae=y[S+6-32],ce=y[S+7-32];y[S+0+0]=sr(y[S+0-32],R,$),y[S+1+0]=y[S+0+32]=sr(R,$,H),y[S+2+0]=y[S+1+32]=y[S+0+64]=sr($,H,Z),y[S+3+0]=y[S+2+32]=y[S+1+64]=y[S+0+96]=sr(H,Z,X),y[S+3+32]=y[S+2+64]=y[S+1+96]=sr(Z,X,ae),y[S+3+64]=y[S+2+96]=sr(X,ae,ce),y[S+3+96]=sr(ae,ce,ce)}function Pf(y,S){var R=y[S-1+0],$=y[S-1+32],H=y[S-1+64],Z=y[S-1-32],X=y[S+0-32],ae=y[S+1-32],ce=y[S+2-32],fe=y[S+3-32];y[S+0+0]=y[S+1+64]=Z+X+1>>1,y[S+1+0]=y[S+2+64]=X+ae+1>>1,y[S+2+0]=y[S+3+64]=ae+ce+1>>1,y[S+3+0]=ce+fe+1>>1,y[S+0+96]=sr(H,$,R),y[S+0+64]=sr($,R,Z),y[S+0+32]=y[S+1+96]=sr(R,Z,X),y[S+1+32]=y[S+2+96]=sr(Z,X,ae),y[S+2+32]=y[S+3+96]=sr(X,ae,ce),y[S+3+32]=sr(ae,ce,fe)}function Jc(y,S){var R=y[S+0-32],$=y[S+1-32],H=y[S+2-32],Z=y[S+3-32],X=y[S+4-32],ae=y[S+5-32],ce=y[S+6-32],fe=y[S+7-32];y[S+0+0]=R+$+1>>1,y[S+1+0]=y[S+0+64]=$+H+1>>1,y[S+2+0]=y[S+1+64]=H+Z+1>>1,y[S+3+0]=y[S+2+64]=Z+X+1>>1,y[S+0+32]=sr(R,$,H),y[S+1+32]=y[S+0+96]=sr($,H,Z),y[S+2+32]=y[S+1+96]=sr(H,Z,X),y[S+3+32]=y[S+2+96]=sr(Z,X,ae),y[S+3+64]=sr(X,ae,ce),y[S+3+96]=sr(ae,ce,fe)}function Jl(y,S){var R=y[S-1+0],$=y[S-1+32],H=y[S-1+64],Z=y[S-1+96];y[S+0+0]=R+$+1>>1,y[S+2+0]=y[S+0+32]=$+H+1>>1,y[S+2+32]=y[S+0+64]=H+Z+1>>1,y[S+1+0]=sr(R,$,H),y[S+3+0]=y[S+1+32]=sr($,H,Z),y[S+3+32]=y[S+1+64]=sr(H,Z,Z),y[S+3+64]=y[S+2+64]=y[S+0+96]=y[S+1+96]=y[S+2+96]=y[S+3+96]=Z}function fd(y,S){var R=y[S-1+0],$=y[S-1+32],H=y[S-1+64],Z=y[S-1+96],X=y[S-1-32],ae=y[S+0-32],ce=y[S+1-32],fe=y[S+2-32];y[S+0+0]=y[S+2+32]=R+X+1>>1,y[S+0+32]=y[S+2+64]=$+R+1>>1,y[S+0+64]=y[S+2+96]=H+$+1>>1,y[S+0+96]=Z+H+1>>1,y[S+3+0]=sr(ae,ce,fe),y[S+2+0]=sr(X,ae,ce),y[S+1+0]=y[S+3+32]=sr(R,X,ae),y[S+1+32]=y[S+3+64]=sr($,R,X),y[S+1+64]=y[S+3+96]=sr(H,$,R),y[S+1+96]=sr(Z,H,$)}function yi(y,S){var R;for(R=0;8>R;++R)n(y,S+32*R,y,S-32,8)}function Zl(y,S){var R;for(R=0;8>R;++R)a(y,S,y[S-1],8),S+=32}function ua(y,S,R){var $;for($=0;8>$;++$)a(S,R+32*$,y,8)}function Zc(y,S){var R,$=8;for(R=0;8>R;++R)$+=y[S+R-32]+y[S-1+32*R];ua($>>4,y,S)}function hd(y,S){var R,$=4;for(R=0;8>R;++R)$+=y[S+R-32];ua($>>3,y,S)}function md(y,S){var R,$=4;for(R=0;8>R;++R)$+=y[S-1+32*R];ua($>>3,y,S)}function Xc(y,S){ua(128,y,S)}function Ja(y,S,R){var $=y[S-R],H=y[S+0],Z=3*(H-$)+Zi[1020+y[S-2*R]-y[S+R]],X=lu[112+(Z+4>>3)];y[S-R]=ra[255+$+lu[112+(Z+3>>3)]],y[S+0]=ra[255+H-X]}function Xl(y,S,R,$){var H=y[S+0],Z=y[S+R];return ri[255+y[S-2*R]-y[S-R]]>$||ri[255+Z-H]>$}function ec(y,S,R,$){return 4*ri[255+y[S-R]-y[S+0]]+ri[255+y[S-2*R]-y[S+R]]<=$}function Za(y,S,R,$,H){var Z=y[S-3*R],X=y[S-2*R],ae=y[S-R],ce=y[S+0],fe=y[S+R],_e=y[S+2*R],Le=y[S+3*R];return 4*ri[255+ae-ce]+ri[255+X-fe]>$?0:ri[255+y[S-4*R]-Z]<=H&&ri[255+Z-X]<=H&&ri[255+X-ae]<=H&&ri[255+Le-_e]<=H&&ri[255+_e-fe]<=H&&ri[255+fe-ce]<=H}function fo(y,S,R,$){var H=2*$+1;for($=0;16>$;++$)ec(y,S+$,R,H)&&Ja(y,S+$,R)}function al(y,S,R,$){var H=2*$+1;for($=0;16>$;++$)ec(y,S+$*R,1,H)&&Ja(y,S+$*R,1)}function pd(y,S,R,$){var H;for(H=3;0<H;--H)fo(y,S+=4*R,R,$)}function tc(y,S,R,$){var H;for(H=3;0<H;--H)al(y,S+=4,R,$)}function Xa(y,S,R,$,H,Z,X,ae){for(Z=2*Z+1;0<H--;){if(Za(y,S,R,Z,X))if(Xl(y,S,R,ae))Ja(y,S,R);else{var ce=y,fe=S,_e=R,Le=ce[fe-2*_e],he=ce[fe-_e],Se=ce[fe+0],Re=ce[fe+_e],Ke=ce[fe+2*_e],Ie=27*(He=Zi[1020+3*(Se-he)+Zi[1020+Le-Re]])+63>>7,ze=18*He+63>>7,He=9*He+63>>7;ce[fe-3*_e]=ra[255+ce[fe-3*_e]+He],ce[fe-2*_e]=ra[255+Le+ze],ce[fe-_e]=ra[255+he+Ie],ce[fe+0]=ra[255+Se-Ie],ce[fe+_e]=ra[255+Re-ze],ce[fe+2*_e]=ra[255+Ke-He]}S+=$}}function Gi(y,S,R,$,H,Z,X,ae){for(Z=2*Z+1;0<H--;){if(Za(y,S,R,Z,X))if(Xl(y,S,R,ae))Ja(y,S,R);else{var ce=y,fe=S,_e=R,Le=ce[fe-_e],he=ce[fe+0],Se=ce[fe+_e],Re=lu[112+(4+(Ke=3*(he-Le))>>3)],Ke=lu[112+(Ke+3>>3)],Ie=Re+1>>1;ce[fe-2*_e]=ra[255+ce[fe-2*_e]+Ie],ce[fe-_e]=ra[255+Le+Ke],ce[fe+0]=ra[255+he-Re],ce[fe+_e]=ra[255+Se-Ie]}S+=$}}function Vs(y,S,R,$,H,Z){Xa(y,S,R,1,16,$,H,Z)}function ei(y,S,R,$,H,Z){Xa(y,S,1,R,16,$,H,Z)}function eu(y,S,R,$,H,Z){var X;for(X=3;0<X;--X)Gi(y,S+=4*R,R,1,16,$,H,Z)}function P(y,S,R,$,H,Z){var X;for(X=3;0<X;--X)Gi(y,S+=4,1,R,16,$,H,Z)}function G(y,S,R,$,H,Z,X,ae){Xa(y,S,H,1,8,Z,X,ae),Xa(R,$,H,1,8,Z,X,ae)}function pe(y,S,R,$,H,Z,X,ae){Xa(y,S,1,H,8,Z,X,ae),Xa(R,$,1,H,8,Z,X,ae)}function be(y,S,R,$,H,Z,X,ae){Gi(y,S+4*H,H,1,8,Z,X,ae),Gi(R,$+4*H,H,1,8,Z,X,ae)}function Te(y,S,R,$,H,Z,X,ae){Gi(y,S+4,1,H,8,Z,X,ae),Gi(R,$+4,1,H,8,Z,X,ae)}function Ye(){this.ba=new er,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ir,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function nt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Lt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Bt(){this.ua=0,this.Wa=new Nt,this.vb=new Nt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new de,this.yc=new K}function cr(){this.xb=this.a=0,this.l=new Gc,this.ca=new er,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new q,this.Pb=0,this.wd=new q,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Bt,this.ab=0,this.gc=o(4,Lt),this.Oc=0}function mr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Gc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Br(y,S,R,$,H,Z,X){for(y=y==null?0:y[S+0],S=0;S<X;++S)H[Z+S]=y+R[$+S]&255,y=H[Z+S]}function Sn(y,S,R,$,H,Z,X){var ae;if(y==null)Br(null,null,R,$,H,Z,X);else for(ae=0;ae<X;++ae)H[Z+ae]=y[S+ae]+R[$+ae]&255}function Kn(y,S,R,$,H,Z,X){if(y==null)Br(null,null,R,$,H,Z,X);else{var ae,ce=y[S+0],fe=ce,_e=ce;for(ae=0;ae<X;++ae)fe=_e+(ce=y[S+ae])-fe,_e=R[$+ae]+(-256&fe?0>fe?0:255:fe)&255,fe=ce,H[Z+ae]=_e}}function dn(y,S,R,$){var H=S.width,Z=S.o;if(t(y!=null&&S!=null),0>R||0>=$||R+$>Z)return null;if(!y.Cc){if(y.ga==null){var X;if(y.ga=new mr,(X=y.ga==null)||(X=S.width*S.o,t(y.Gb.length==0),y.Gb=i(X),y.Uc=0,y.Gb==null?X=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,X=1),X=!X),!X){X=y.ga;var ae=y.Fa,ce=y.P,fe=y.qc,_e=y.mb,Le=y.nb,he=ce+1,Se=fe-1,Re=X.l;if(t(ae!=null&&_e!=null&&S!=null),Ws[0]=null,Ws[1]=Br,Ws[2]=Sn,Ws[3]=Kn,X.ca=_e,X.tb=Le,X.c=S.width,X.i=S.height,t(0<X.c&&0<X.i),1>=fe)S=0;else if(X.$a=3&ae[ce+0],X.Z=ae[ce+0]>>2&3,X.Lc=ae[ce+0]>>4&3,ce=ae[ce+0]>>6&3,0>X.$a||1<X.$a||4<=X.Z||1<X.Lc||ce)S=0;else if(Re.put=At,Re.ac=un,Re.bc=Ee,Re.ma=X,Re.width=S.width,Re.height=S.height,Re.Da=S.Da,Re.v=S.v,Re.va=S.va,Re.j=S.j,Re.o=S.o,X.$a)e:{t(X.$a==1),S=zl();t:for(;;){if(S==null){S=0;break e}if(t(X!=null),X.mc=S,S.c=X.c,S.i=X.i,S.l=X.l,S.l.ma=X,S.l.width=X.c,S.l.height=X.i,S.a=0,ee(S.m,ae,he,Se),!vi(X.c,X.i,1,S,null)||(S.ab==1&&S.gc[0].hc==3&&gi(S.s)?(X.ic=1,ae=S.c*S.i,S.Ta=null,S.Ua=0,S.V=i(ae),S.Ba=0,S.V==null?(S.a=1,S=0):S=1):(X.ic=0,S=rl(S,X.c)),!S))break t;S=1;break e}X.mc=null,S=0}else S=Se>=X.c*X.i;X=!S}if(X)return null;y.ga.Lc!=1?y.Ga=0:$=Z-R}t(y.ga!=null),t(R+$<=Z);e:{if(S=(ae=y.ga).c,Z=ae.l.o,ae.$a==0){if(he=y.rc,Se=y.Vc,Re=y.Fa,ce=y.P+1+R*S,fe=y.mb,_e=y.nb+R*S,t(ce<=y.P+y.qc),ae.Z!=0)for(t(Ws[ae.Z]!=null),X=0;X<$;++X)Ws[ae.Z](he,Se,Re,ce,fe,_e,S),he=fe,Se=_e,_e+=S,ce+=S;else for(X=0;X<$;++X)n(fe,_e,Re,ce,S),he=fe,Se=_e,_e+=S,ce+=S;y.rc=he,y.Vc=Se}else{if(t(ae.mc!=null),S=R+$,t((X=ae.mc)!=null),t(S<=X.i),X.C>=S)S=1;else if(ae.ic||wi(),ae.ic){ae=X.V,he=X.Ba,Se=X.c;var Ke=X.i,Ie=(Re=1,ce=X.$/Se,fe=X.$%Se,_e=X.m,Le=X.s,X.$),ze=Se*Ke,He=Se*S,Je=Le.wc,Xe=Ie<He?Nn(Le,fe,ce):null;t(Ie<=ze),t(S<=Ke),t(gi(Le));t:for(;;){for(;!_e.h&&Ie<He;){if(fe&Je||(Xe=Nn(Le,fe,ce)),t(Xe!=null),ie(_e),256>(Ke=jr(Xe.G[0],Xe.H[0],_e)))ae[he+Ie]=Ke,++Ie,++fe>=Se&&(fe=0,++ce<=S&&!(ce%16)&&Ts(X,ce));else{if(!(280>Ke)){Re=0;break t}Ke=wt(Ke-256,_e);var Ut,Et=jr(Xe.G[4],Xe.H[4],_e);if(ie(_e),!(Ie>=(Et=Zt(Se,Et=wt(Et,_e)))&&ze-Ie>=Ke)){Re=0;break t}for(Ut=0;Ut<Ke;++Ut)ae[he+Ie+Ut]=ae[he+Ie+Ut-Et];for(Ie+=Ke,fe+=Ke;fe>=Se;)fe-=Se,++ce<=S&&!(ce%16)&&Ts(X,ce);Ie<He&&fe&Je&&(Xe=Nn(Le,fe,ce))}t(_e.h==ne(_e))}Ts(X,ce>S?S:ce);break t}!Re||_e.h&&Ie<ze?(Re=0,X.a=_e.h?5:3):X.$=Ie,S=Re}else S=Ka(X,X.V,X.Ba,X.c,X.i,S,ql);if(!S){$=0;break e}}R+$>=Z&&(y.Cc=1),$=1}if(!$)return null;if(y.Cc&&(($=y.ga)!=null&&($.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+R*H}function ls(y,S,R,$,H,Z){for(;0<H--;){var X,ae=y,ce=S+(R?1:0),fe=y,_e=S+(R?0:3);for(X=0;X<$;++X){var Le=fe[_e+4*X];Le!=255&&(Le*=32897,ae[ce+4*X+0]=ae[ce+4*X+0]*Le>>23,ae[ce+4*X+1]=ae[ce+4*X+1]*Le>>23,ae[ce+4*X+2]=ae[ce+4*X+2]*Le>>23)}S+=Z}}function In(y,S,R,$,H){for(;0<$--;){var Z;for(Z=0;Z<R;++Z){var X=y[S+2*Z+0],ae=15&(fe=y[S+2*Z+1]),ce=4369*ae,fe=(240&fe|fe>>4)*ce>>16;y[S+2*Z+0]=(240&X|X>>4)*ce>>16&240|(15&X|X<<4)*ce>>16>>4&15,y[S+2*Z+1]=240&fe|ae}S+=H}}function Rs(y,S,R,$,H,Z,X,ae){var ce,fe,_e=255;for(fe=0;fe<H;++fe){for(ce=0;ce<$;++ce){var Le=y[S+ce];Z[X+4*ce]=Le,_e&=Le}S+=R,X+=ae}return _e!=255}function ho(y,S,R,$,H){var Z;for(Z=0;Z<H;++Z)R[$+Z]=y[S+Z]>>8}function wi(){fc=ls,pm=In,wd=Rs,gm=ho}function mo(y,S,R){T[y]=function($,H,Z,X,ae,ce,fe,_e,Le,he,Se,Re,Ke,Ie,ze,He,Je){var Xe,Ut=Je-1>>1,Et=ae[ce+0]|fe[_e+0]<<16,pr=Le[he+0]|Se[Re+0]<<16;t($!=null);var Dt=3*Et+pr+131074>>2;for(S($[H+0],255&Dt,Dt>>16,Ke,Ie),Z!=null&&(Dt=3*pr+Et+131074>>2,S(Z[X+0],255&Dt,Dt>>16,ze,He)),Xe=1;Xe<=Ut;++Xe){var Rr=ae[ce+Xe]|fe[_e+Xe]<<16,Tn=Le[he+Xe]|Se[Re+Xe]<<16,gr=Et+Rr+pr+Tn+524296,Pt=gr+2*(Rr+pr)>>3;Dt=Pt+Et>>1,Et=(gr=gr+2*(Et+Tn)>>3)+Rr>>1,S($[H+2*Xe-1],255&Dt,Dt>>16,Ke,Ie+(2*Xe-1)*R),S($[H+2*Xe-0],255&Et,Et>>16,Ke,Ie+(2*Xe-0)*R),Z!=null&&(Dt=gr+pr>>1,Et=Pt+Tn>>1,S(Z[X+2*Xe-1],255&Dt,Dt>>16,ze,He+(2*Xe-1)*R),S(Z[X+2*Xe+0],255&Et,Et>>16,ze,He+(2*Xe+0)*R)),Et=Rr,pr=Tn}1&Je||(Dt=3*Et+pr+131074>>2,S($[H+Je-1],255&Dt,Dt>>16,Ke,Ie+(Je-1)*R),Z!=null&&(Dt=3*pr+Et+131074>>2,S(Z[X+Je-1],255&Dt,Dt>>16,ze,He+(Je-1)*R)))}}function rc(){ha[Lf]=F0,ha[ml]=pl,ha[mg]=B0,ha[bd]=fu,ha[jd]=gc,ha[rn]=Cd,ha[Df]=Sm,ha[cu]=pl,ha[hc]=fu,ha[_d]=gc,ha[Nd]=Cd}function tu(y){return y&-16384?0>y?0:255:y>>gl}function il(y,S){return tu((19077*y>>8)+(26149*S>>8)-14234)}function nc(y,S,R){return tu((19077*y>>8)-(6419*S>>8)-(13320*R>>8)+8708)}function ol(y,S){return tu((19077*y>>8)+(33050*S>>8)-17685)}function ll(y,S,R,$,H){$[H+0]=il(y,R),$[H+1]=nc(y,S,R),$[H+2]=ol(y,S)}function Ls(y,S,R,$,H){$[H+0]=ol(y,S),$[H+1]=nc(y,S,R),$[H+2]=il(y,R)}function sc(y,S,R,$,H){var Z=nc(y,S,R);S=Z<<3&224|ol(y,S)>>3,$[H+0]=248&il(y,R)|Z>>5,$[H+1]=S}function ac(y,S,R,$,H){var Z=240&ol(y,S)|15;$[H+0]=240&il(y,R)|nc(y,S,R)>>4,$[H+1]=Z}function gd(y,S,R,$,H){$[H+0]=255,ll(y,S,R,$,H+1)}function vd(y,S,R,$,H){Ls(y,S,R,$,H),$[H+3]=255}function ta(y,S,R,$,H){ll(y,S,R,$,H),$[H+3]=255}function bi(y,S,R){T[y]=function($,H,Z,X,ae,ce,fe,_e,Le){for(var he=_e+(-2&Le)*R;_e!=he;)S($[H+0],Z[X+0],ae[ce+0],fe,_e),S($[H+1],Z[X+0],ae[ce+0],fe,_e+R),H+=2,++X,++ce,_e+=2*R;1&Le&&S($[H+0],Z[X+0],ae[ce+0],fe,_e)}}function Ki(y,S,R){return R==0?y==0?S==0?6:5:S==0?4:0:R}function Af(y,S,R,$,H){switch(y>>>30){case 3:uc(S,R,$,H,0);break;case 2:Pn(S,R,$,H);break;case 1:zr(S,R,$,H)}}function Ia(y,S){var R,$,H=S.M,Z=S.Nb,X=y.oc,ae=y.pc+40,ce=y.oc,fe=y.pc+584,_e=y.oc,Le=y.pc+600;for(R=0;16>R;++R)X[ae+32*R-1]=129;for(R=0;8>R;++R)ce[fe+32*R-1]=129,_e[Le+32*R-1]=129;for(0<H?X[ae-1-32]=ce[fe-1-32]=_e[Le-1-32]=129:(a(X,ae-32-1,127,21),a(ce,fe-32-1,127,9),a(_e,Le-32-1,127,9)),$=0;$<y.za;++$){var he=S.ya[S.aa+$];if(0<$){for(R=-1;16>R;++R)n(X,ae+32*R-4,X,ae+32*R+12,4);for(R=-1;8>R;++R)n(ce,fe+32*R-4,ce,fe+32*R+4,4),n(_e,Le+32*R-4,_e,Le+32*R+4,4)}var Se=y.Gd,Re=y.Hd+$,Ke=he.ad,Ie=he.Hc;if(0<H&&(n(X,ae-32,Se[Re].y,0,16),n(ce,fe-32,Se[Re].f,0,8),n(_e,Le-32,Se[Re].ea,0,8)),he.Za){var ze=X,He=ae-32+16;for(0<H&&($>=y.za-1?a(ze,He,Se[Re].y[15],4):n(ze,He,Se[Re+1].y,0,4)),R=0;4>R;R++)ze[He+128+R]=ze[He+256+R]=ze[He+384+R]=ze[He+0+R];for(R=0;16>R;++R,Ie<<=2)ze=X,He=ae+km[R],ni[he.Ob[R]](ze,He),Af(Ie,Ke,16*+R,ze,He)}else if(ze=Ki($,H,he.Ob[0]),na[ze](X,ae),Ie!=0)for(R=0;16>R;++R,Ie<<=2)Af(Ie,Ke,16*+R,X,ae+km[R]);for(R=he.Gc,ze=Ki($,H,he.Dd),fa[ze](ce,fe),fa[ze](_e,Le),Ie=Ke,ze=ce,He=fe,255&(he=0|R)&&(170&he?da(Ie,256,ze,He):Zr(Ie,256,ze,He)),he=_e,Ie=Le,255&(R>>=8)&&(170&R?da(Ke,320,he,Ie):Zr(Ke,320,he,Ie)),H<y.Ub-1&&(n(Se[Re].y,0,X,ae+480,16),n(Se[Re].f,0,ce,fe+224,8),n(Se[Re].ea,0,_e,Le+224,8)),R=8*Z*y.B,Se=y.sa,Re=y.ta+16*$+16*Z*y.R,Ke=y.qa,he=y.ra+8*$+R,Ie=y.Ha,ze=y.Ia+8*$+R,R=0;16>R;++R)n(Se,Re+R*y.R,X,ae+32*R,16);for(R=0;8>R;++R)n(Ke,he+R*y.B,ce,fe+32*R,8),n(Ie,ze+R*y.B,_e,Le+32*R,8)}}function cl(y,S,R,$,H,Z,X,ae,ce){var fe=[0],_e=[0],Le=0,he=ce!=null?ce.kd:0,Se=ce??new nt;if(y==null||12>R)return 7;Se.data=y,Se.w=S,Se.ha=R,S=[S],R=[R],Se.gb=[Se.gb];e:{var Re=S,Ke=R,Ie=Se.gb;if(t(y!=null),t(Ke!=null),t(Ie!=null),Ie[0]=0,12<=Ke[0]&&!r(y,Re[0],"RIFF")){if(r(y,Re[0]+8,"WEBP")){Ie=3;break e}var ze=je(y,Re[0]+4);if(12>ze||4294967286<ze){Ie=3;break e}if(he&&ze>Ke[0]-8){Ie=7;break e}Ie[0]=ze,Re[0]+=12,Ke[0]-=12}Ie=0}if(Ie!=0)return Ie;for(ze=0<Se.gb[0],R=R[0];;){e:{var He=y;Ke=S,Ie=R;var Je=fe,Xe=_e,Ut=Re=[0];if((Dt=Le=[Le])[0]=0,8>Ie[0])Ie=7;else{if(!r(He,Ke[0],"VP8X")){if(je(He,Ke[0]+4)!=10){Ie=3;break e}if(18>Ie[0]){Ie=7;break e}var Et=je(He,Ke[0]+8),pr=1+Fe(He,Ke[0]+12);if(2147483648<=pr*(He=1+Fe(He,Ke[0]+15))){Ie=3;break e}Ut!=null&&(Ut[0]=Et),Je!=null&&(Je[0]=pr),Xe!=null&&(Xe[0]=He),Ke[0]+=18,Ie[0]-=18,Dt[0]=1}Ie=0}}if(Le=Le[0],Re=Re[0],Ie!=0)return Ie;if(Ke=!!(2&Re),!ze&&Le)return 3;if(Z!=null&&(Z[0]=!!(16&Re)),X!=null&&(X[0]=Ke),ae!=null&&(ae[0]=0),X=fe[0],Re=_e[0],Le&&Ke&&ce==null){Ie=0;break}if(4>R){Ie=7;break}if(ze&&Le||!ze&&!Le&&!r(y,S[0],"ALPH")){R=[R],Se.na=[Se.na],Se.P=[Se.P],Se.Sa=[Se.Sa];e:{Et=y,Ie=S,ze=R;var Dt=Se.gb;Je=Se.na,Xe=Se.P,Ut=Se.Sa,pr=22,t(Et!=null),t(ze!=null),He=Ie[0];var Rr=ze[0];for(t(Je!=null),t(Ut!=null),Je[0]=null,Xe[0]=null,Ut[0]=0;;){if(Ie[0]=He,ze[0]=Rr,8>Rr){Ie=7;break e}var Tn=je(Et,He+4);if(4294967286<Tn){Ie=3;break e}var gr=8+Tn+1&-2;if(pr+=gr,0<Dt&&pr>Dt){Ie=3;break e}if(!r(Et,He,"VP8 ")||!r(Et,He,"VP8L")){Ie=0;break e}if(Rr[0]<gr){Ie=7;break e}r(Et,He,"ALPH")||(Je[0]=Et,Xe[0]=He+8,Ut[0]=Tn),He+=gr,Rr-=gr}}if(R=R[0],Se.na=Se.na[0],Se.P=Se.P[0],Se.Sa=Se.Sa[0],Ie!=0)break}R=[R],Se.Ja=[Se.Ja],Se.xa=[Se.xa];e:if(Dt=y,Ie=S,ze=R,Je=Se.gb[0],Xe=Se.Ja,Ut=Se.xa,Et=Ie[0],He=!r(Dt,Et,"VP8 "),pr=!r(Dt,Et,"VP8L"),t(Dt!=null),t(ze!=null),t(Xe!=null),t(Ut!=null),8>ze[0])Ie=7;else{if(He||pr){if(Dt=je(Dt,Et+4),12<=Je&&Dt>Je-12){Ie=3;break e}if(he&&Dt>ze[0]-8){Ie=7;break e}Xe[0]=Dt,Ie[0]+=8,ze[0]-=8,Ut[0]=pr}else Ut[0]=5<=ze[0]&&Dt[Et+0]==47&&!(Dt[Et+4]>>5),Xe[0]=ze[0];Ie=0}if(R=R[0],Se.Ja=Se.Ja[0],Se.xa=Se.xa[0],S=S[0],Ie!=0)break;if(4294967286<Se.Ja)return 3;if(ae==null||Ke||(ae[0]=Se.xa?2:1),X=[X],Re=[Re],Se.xa){if(5>R){Ie=7;break}ae=X,he=Re,Ke=Z,y==null||5>R?y=0:5<=R&&y[S+0]==47&&!(y[S+4]>>5)?(ze=[0],Dt=[0],Je=[0],ee(Xe=new q,y,S,R),at(Xe,ze,Dt,Je)?(ae!=null&&(ae[0]=ze[0]),he!=null&&(he[0]=Dt[0]),Ke!=null&&(Ke[0]=Je[0]),y=1):y=0):y=0}else{if(10>R){Ie=7;break}ae=Re,y==null||10>R||!Hl(y,S+3,R-3)?y=0:(he=y[S+0]|y[S+1]<<8|y[S+2]<<16,Ke=16383&(y[S+7]<<8|y[S+6]),y=16383&(y[S+9]<<8|y[S+8]),1&he||3<(he>>1&7)||!(he>>4&1)||he>>5>=Se.Ja||!Ke||!y?y=0:(X&&(X[0]=Ke),ae&&(ae[0]=y),y=1))}if(!y||(X=X[0],Re=Re[0],Le&&(fe[0]!=X||_e[0]!=Re)))return 3;ce!=null&&(ce[0]=Se,ce.offset=S-ce.w,t(4294967286>S-ce.w),t(ce.offset==ce.ha-R));break}return Ie==0||Ie==7&&Le&&ce==null?(Z!=null&&(Z[0]|=Se.na!=null&&0<Se.na.length),$!=null&&($[0]=X),H!=null&&(H[0]=Re),0):Ie}function ru(y,S,R){var $=S.width,H=S.height,Z=0,X=0,ae=$,ce=H;if(S.Da=y!=null&&0<y.Da,S.Da&&(ae=y.cd,ce=y.bd,Z=y.v,X=y.j,11>R||(Z&=-2,X&=-2),0>Z||0>X||0>=ae||0>=ce||Z+ae>$||X+ce>H))return 0;if(S.v=Z,S.j=X,S.va=Z+ae,S.o=X+ce,S.U=ae,S.T=ce,S.da=y!=null&&0<y.da,S.da){if(!pt(ae,ce,R=[y.ib],Z=[y.hb]))return 0;S.ib=R[0],S.hb=Z[0]}return S.ob=y!=null&&y.ob,S.Kb=y==null||!y.Sd,S.da&&(S.ob=S.ib<3*$/4&&S.hb<3*H/4,S.Kb=0),1}function nu(y){if(y==null)return 2;if(11>y.S){var S=y.f.RGBA;S.fb+=(y.height-1)*S.A,S.A=-S.A}else S=y.f.kb,y=y.height,S.O+=(y-1)*S.fa,S.fa=-S.fa,S.N+=(y-1>>1)*S.Ab,S.Ab=-S.Ab,S.W+=(y-1>>1)*S.Db,S.Db=-S.Db,S.F!=null&&(S.J+=(y-1)*S.lb,S.lb=-S.lb);return 0}function po(y,S,R,$){if($==null||0>=y||0>=S)return 2;if(R!=null){if(R.Da){var H=R.cd,Z=R.bd,X=-2&R.v,ae=-2&R.j;if(0>X||0>ae||0>=H||0>=Z||X+H>y||ae+Z>S)return 2;y=H,S=Z}if(R.da){if(!pt(y,S,H=[R.ib],Z=[R.hb]))return 2;y=H[0],S=Z[0]}}$.width=y,$.height=S;e:{var ce=$.width,fe=$.height;if(y=$.S,0>=ce||0>=fe||!(y>=Lf&&13>y))y=2;else{if(0>=$.Rd&&$.sd==null){X=Z=H=S=0;var _e=(ae=ce*Ed[y])*fe;if(11>y||(Z=(fe+1)/2*(S=(ce+1)/2),y==12&&(X=(H=ce)*fe)),(fe=i(_e+2*Z+X))==null){y=1;break e}$.sd=fe,11>y?((ce=$.f.RGBA).eb=fe,ce.fb=0,ce.A=ae,ce.size=_e):((ce=$.f.kb).y=fe,ce.O=0,ce.fa=ae,ce.Fd=_e,ce.f=fe,ce.N=0+_e,ce.Ab=S,ce.Cd=Z,ce.ea=fe,ce.W=0+_e+Z,ce.Db=S,ce.Ed=Z,y==12&&(ce.F=fe,ce.J=0+_e+2*Z),ce.Tc=X,ce.lb=H)}if(S=1,H=$.S,Z=$.width,X=$.height,H>=Lf&&13>H)if(11>H)y=$.f.RGBA,S&=(ae=Math.abs(y.A))*(X-1)+Z<=y.size,S&=ae>=Z*Ed[H],S&=y.eb!=null;else{y=$.f.kb,ae=(Z+1)/2,_e=(X+1)/2,ce=Math.abs(y.fa),fe=Math.abs(y.Ab);var Le=Math.abs(y.Db),he=Math.abs(y.lb),Se=he*(X-1)+Z;S&=ce*(X-1)+Z<=y.Fd,S&=fe*(_e-1)+ae<=y.Cd,S=(S&=Le*(_e-1)+ae<=y.Ed)&ce>=Z&fe>=ae&Le>=ae,S&=y.y!=null,S&=y.f!=null,S&=y.ea!=null,H==12&&(S&=he>=Z,S&=Se<=y.Tc,S&=y.F!=null)}else S=0;y=S?0:2}}return y!=0||R!=null&&R.fd&&(y=nu($)),y}var ti=64,Oa=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ma=24,ul=32,Yi=8,go=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xe("Predictor0","PredictorAdd0"),T.Predictor0=function(){return 4278190080},T.Predictor1=function(y){return y},T.Predictor2=function(y,S,R){return S[R+0]},T.Predictor3=function(y,S,R){return S[R+1]},T.Predictor4=function(y,S,R){return S[R-1]},T.Predictor5=function(y,S,R){return $e($e(y,S[R+1]),S[R+0])},T.Predictor6=function(y,S,R){return $e(y,S[R-1])},T.Predictor7=function(y,S,R){return $e(y,S[R+0])},T.Predictor8=function(y,S,R){return $e(S[R-1],S[R+0])},T.Predictor9=function(y,S,R){return $e(S[R+0],S[R+1])},T.Predictor10=function(y,S,R){return $e($e(y,S[R-1]),$e(S[R+0],S[R+1]))},T.Predictor11=function(y,S,R){var $=S[R+0];return 0>=tt($>>24&255,y>>24&255,(S=S[R-1])>>24&255)+tt($>>16&255,y>>16&255,S>>16&255)+tt($>>8&255,y>>8&255,S>>8&255)+tt(255&$,255&y,255&S)?$:y},T.Predictor12=function(y,S,R){var $=S[R+0];return(et((y>>24&255)+($>>24&255)-((S=S[R-1])>>24&255))<<24|et((y>>16&255)+($>>16&255)-(S>>16&255))<<16|et((y>>8&255)+($>>8&255)-(S>>8&255))<<8|et((255&y)+(255&$)-(255&S)))>>>0},T.Predictor13=function(y,S,R){var $=S[R-1];return(Ge((y=$e(y,S[R+0]))>>24&255,$>>24&255)<<24|Ge(y>>16&255,$>>16&255)<<16|Ge(y>>8&255,$>>8&255)<<8|Ge(255&y,255&$))>>>0};var vo=T.PredictorAdd0;T.PredictorAdd1=gt,xe("Predictor2","PredictorAdd2"),xe("Predictor3","PredictorAdd3"),xe("Predictor4","PredictorAdd4"),xe("Predictor5","PredictorAdd5"),xe("Predictor6","PredictorAdd6"),xe("Predictor7","PredictorAdd7"),xe("Predictor8","PredictorAdd8"),xe("Predictor9","PredictorAdd9"),xe("Predictor10","PredictorAdd10"),xe("Predictor11","PredictorAdd11"),xe("Predictor12","PredictorAdd12"),xe("Predictor13","PredictorAdd13");var Qi=T.PredictorAdd2;bt("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),bt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var On,ic=T.ColorIndexInverseTransform,Ji=T.MapARGB,ji=T.VP8LColorIndexInverseTransformAlpha,oc=T.MapAlpha,lc=T.VP8LPredictorsAdd=[];lc.length=16,(T.VP8LPredictors=[]).length=16,(T.VP8LPredictorsAdd_C=[]).length=16,(T.VP8LPredictors_C=[]).length=16;var su,au,xo,dl,fl,cc,hl,uc,Pn,da,zr,Zr,An,Yn,_i,xd,iu,yo,Tf,ou,Rf,mm,yd,dc,fc,pm,wd,gm,vm=i(511),xm=i(2041),ym=i(225),wm=i(767),bm=0,Zi=xm,lu=ym,ra=wm,ri=vm,Lf=0,ml=1,mg=2,bd=3,jd=4,rn=5,Df=6,cu=7,hc=8,_d=9,Nd=10,Sd=[2,3,7],If=[3,3,11],mc=[280,256,256,256,40],pg=[0,1,1,1,0],D0=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],I0=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],gg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Of=8,uu=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],kd=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],pc=null,jm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],_m=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],vg=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],xg=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],O0=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],M0=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],Nm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],na=[],ni=[],fa=[],Xi=1,du=2,Ws=[],ha=[];mo("UpsampleRgbLinePair",ll,3),mo("UpsampleBgrLinePair",Ls,3),mo("UpsampleRgbaLinePair",ta,4),mo("UpsampleBgraLinePair",vd,4),mo("UpsampleArgbLinePair",gd,4),mo("UpsampleRgba4444LinePair",ac,2),mo("UpsampleRgb565LinePair",sc,2);var F0=T.UpsampleRgbLinePair,B0=T.UpsampleBgrLinePair,pl=T.UpsampleRgbaLinePair,fu=T.UpsampleBgraLinePair,gc=T.UpsampleArgbLinePair,Cd=T.UpsampleRgba4444LinePair,Sm=T.UpsampleRgb565LinePair,wo=16,Ni=1<<wo-1,Qr=-227,Xr=482,gl=6,Ds=0,ma=i(256),vc=i(256),hu=i(256),pa=i(256),Mf=i(Xr-Qr),yg=i(Xr-Qr);bi("YuvToRgbRow",ll,3),bi("YuvToBgrRow",Ls,3),bi("YuvToRgbaRow",ta,4),bi("YuvToBgraRow",vd,4),bi("YuvToArgbRow",gd,4),bi("YuvToRgba4444Row",ac,2),bi("YuvToRgb565Row",sc,2);var km=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],xc=[0,2,8],wg=[8,7,6,4,4,2,2,2,1,1,1,1],bo=1;this.WebPDecodeRGBA=function(y,S,R,$,H){var Z=ml,X=new Ye,ae=new er;X.ba=ae,ae.S=Z,ae.width=[ae.width],ae.height=[ae.height];var ce=ae.width,fe=ae.height,_e=new Rt;if(_e==null||y==null)var Le=2;else t(_e!=null),Le=cl(y,S,R,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Le!=0?ce=0:(ce!=null&&(ce[0]=_e.width[0]),fe!=null&&(fe[0]=_e.height[0]),ce=1),ce){ae.width=ae.width[0],ae.height=ae.height[0],$!=null&&($[0]=ae.width),H!=null&&(H[0]=ae.height);e:{if($=new Gc,(H=new nt).data=y,H.w=S,H.ha=R,H.kd=1,S=[0],t(H!=null),((y=cl(H.data,H.w,H.ha,null,null,null,S,null,H))==0||y==7)&&S[0]&&(y=4),(S=y)==0){if(t(X!=null),$.data=H.data,$.w=H.w+H.offset,$.ha=H.ha-H.offset,$.put=At,$.ac=un,$.bc=Ee,$.ma=X,H.xa){if((y=zl())==null){X=1;break e}if((function(he,Se){var Re=[0],Ke=[0],Ie=[0];t:for(;;){if(he==null)return 0;if(Se==null)return he.a=2,0;if(he.l=Se,he.a=0,ee(he.m,Se.data,Se.w,Se.ha),!at(he.m,Re,Ke,Ie)){he.a=3;break t}if(he.xb=du,Se.width=Re[0],Se.height=Ke[0],!vi(Re[0],Ke[0],1,he,null))break t;return 1}return t(he.a!=0),0})(y,$)){if($=(S=po($.width,$.height,X.Oa,X.ba))==0){t:{$=y;r:for(;;){if($==null){$=0;break t}if(t($.s.yc!=null),t($.s.Ya!=null),t(0<$.s.Wb),t((R=$.l)!=null),t((H=R.ma)!=null),$.xb!=0){if($.ca=H.ba,$.tb=H.tb,t($.ca!=null),!ru(H.Oa,R,bd)){$.a=2;break r}if(!rl($,R.width)||R.da)break r;if((R.da||Ht($.ca.S))&&wi(),11>$.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),$.ca.f.kb.F!=null&&wi()),$.Pb&&0<$.s.ua&&$.s.vb.X==null&&!te($.s.vb,$.s.Wa.Xa)){$.a=1;break r}$.xb=0}if(!Ka($,$.V,$.Ba,$.c,$.i,R.o,tl))break r;H.Dc=$.Ma,$=1;break t}t($.a!=0),$=0}$=!$}$&&(S=y.a)}else S=y.a}else{if((y=new fm)==null){X=1;break e}if(y.Fa=H.na,y.P=H.P,y.qc=H.Sa,La(y,$)){if((S=po($.width,$.height,X.Oa,X.ba))==0){if(y.Aa=0,R=X.Oa,t((H=y)!=null),R!=null){if(0<(ce=0>(ce=R.Md)?0:100<ce?255:255*ce/100)){for(fe=_e=0;4>fe;++fe)12>(Le=H.pb[fe]).lc&&(Le.ia=ce*wg[0>Le.lc?0:Le.lc]>>3),_e|=Le.ia;_e&&(alert("todo:VP8InitRandom"),H.ia=1)}H.Ga=R.Id,100<H.Ga?H.Ga=100:0>H.Ga&&(H.Ga=0)}(function(he,Se){if(he==null)return 0;if(Se==null)return Gn(he,2,"NULL VP8Io parameter in VP8Decode().");if(!he.cb&&!La(he,Se))return 0;if(t(he.cb),Se.ac==null||Se.ac(Se)){Se.ob&&(he.L=0);var Re=xc[he.L];if(he.L==2?(he.yb=0,he.zb=0):(he.yb=Se.v-Re>>4,he.zb=Se.j-Re>>4,0>he.yb&&(he.yb=0),0>he.zb&&(he.zb=0)),he.Va=Se.o+15+Re>>4,he.Hb=Se.va+15+Re>>4,he.Hb>he.za&&(he.Hb=he.za),he.Va>he.Ub&&(he.Va=he.Ub),0<he.L){var Ke=he.ed;for(Re=0;4>Re;++Re){var Ie;if(he.Qa.Cb){var ze=he.Qa.Lb[Re];he.Qa.Fb||(ze+=Ke.Tb)}else ze=Ke.Tb;for(Ie=0;1>=Ie;++Ie){var He=he.gd[Re][Ie],Je=ze;if(Ke.Pc&&(Je+=Ke.vd[0],Ie&&(Je+=Ke.od[0])),0<(Je=0>Je?0:63<Je?63:Je)){var Xe=Je;0<Ke.wb&&(Xe=4<Ke.wb?Xe>>2:Xe>>1)>9-Ke.wb&&(Xe=9-Ke.wb),1>Xe&&(Xe=1),He.dd=Xe,He.tc=2*Je+Xe,He.ld=40<=Je?2:15<=Je?1:0}else He.tc=0;He.La=Ie}}}Re=0}else Gn(he,6,"Frame setup failed"),Re=he.a;if(Re=Re==0){if(Re){he.$c=0,0<he.Aa||(he.Ic=bo);t:{Re=he.Ic,Ke=4*(Xe=he.za);var Ut=32*Xe,Et=Xe+1,pr=0<he.L?Xe*(0<he.Aa?2:1):0,Dt=(he.Aa==2?2:1)*Xe;if((He=Ke+832+(Ie=3*(16*Re+xc[he.L])/2*Ut)+(ze=he.Fa!=null&&0<he.Fa.length?he.Kc.c*he.Kc.i:0))!=He)Re=0;else{if(He>he.Vb){if(he.Vb=0,he.Ec=i(He),he.Fc=0,he.Ec==null){Re=Gn(he,1,"no memory during frame initialization.");break t}he.Vb=He}He=he.Ec,Je=he.Fc,he.Ac=He,he.Bc=Je,Je+=Ke,he.Gd=o(Ut,Ra),he.Hd=0,he.rb=o(Et+1,nl),he.sb=1,he.wa=pr?o(pr,Ta):null,he.Y=0,he.D.Nb=0,he.D.wa=he.wa,he.D.Y=he.Y,0<he.Aa&&(he.D.Y+=Xe),t(!0),he.oc=He,he.pc=Je,Je+=832,he.ya=o(Dt,Hc),he.aa=0,he.D.ya=he.ya,he.D.aa=he.aa,he.Aa==2&&(he.D.aa+=Xe),he.R=16*Xe,he.B=8*Xe,Xe=(Ut=xc[he.L])*he.R,Ut=Ut/2*he.B,he.sa=He,he.ta=Je+Xe,he.qa=he.sa,he.ra=he.ta+16*Re*he.R+Ut,he.Ha=he.qa,he.Ia=he.ra+8*Re*he.B+Ut,he.$c=0,Je+=Ie,he.mb=ze?He:null,he.nb=ze?Je:null,t(Je+ze<=he.Fc+he.Vb),Gl(he),a(he.Ac,he.Bc,0,Ke),Re=1}}if(Re){if(Se.ka=0,Se.y=he.sa,Se.O=he.ta,Se.f=he.qa,Se.N=he.ra,Se.ea=he.Ha,Se.Vd=he.Ia,Se.fa=he.R,Se.Rc=he.B,Se.F=null,Se.J=0,!bm){for(Re=-255;255>=Re;++Re)vm[255+Re]=0>Re?-Re:Re;for(Re=-1020;1020>=Re;++Re)xm[1020+Re]=-128>Re?-128:127<Re?127:Re;for(Re=-112;112>=Re;++Re)ym[112+Re]=-16>Re?-16:15<Re?15:Re;for(Re=-255;510>=Re;++Re)wm[255+Re]=0>Re?0:255<Re?255:Re;bm=1}hl=Yl,uc=Kl,da=Vi,zr=Kc,Zr=$r,Pn=ud,An=Vs,Yn=ei,_i=G,xd=pe,iu=eu,yo=P,Tf=be,ou=Te,Rf=fo,mm=al,yd=pd,dc=tc,ni[0]=Ef,ni[1]=dd,ni[2]=Hi,ni[3]=hm,ni[4]=Da,ni[5]=Pf,ni[6]=uo,ni[7]=Jc,ni[8]=fd,ni[9]=Jl,na[0]=Wi,na[1]=Cf,na[2]=Yc,na[3]=Qc,na[4]=ca,na[5]=Qa,na[6]=Ql,fa[0]=Zc,fa[1]=kf,fa[2]=yi,fa[3]=Zl,fa[4]=md,fa[5]=hd,fa[6]=Xc,Re=1}else Re=0}Re&&(Re=(function(Rr,Tn){for(Rr.M=0;Rr.M<Rr.Va;++Rr.M){var gr,Pt=Rr.Jc[Rr.M&Rr.Xb],xt=Rr.m,Mn=Rr;for(gr=0;gr<Mn.za;++gr){var lr=xt,Tr=Mn,fn=Tr.Ac,js=Tr.Bc+4*gr,Qn=Tr.zc,kn=Tr.ya[Tr.aa+gr];if(Tr.Qa.Bb?kn.$b=ye(lr,Tr.Pa.jb[0])?2+ye(lr,Tr.Pa.jb[2]):ye(lr,Tr.Pa.jb[1]):kn.$b=0,Tr.kc&&(kn.Ad=ye(lr,Tr.Bd)),kn.Za=!ye(lr,145)+0,kn.Za){var cs=kn.Ob,_s=0;for(Tr=0;4>Tr;++Tr){var xn,Or=Qn[0+Tr];for(xn=0;4>xn;++xn){Or=O0[fn[js+xn]][Or];for(var qr=vg[ye(lr,Or[0])];0<qr;)qr=vg[2*qr+ye(lr,Or[qr])];Or=-qr,fn[js+xn]=Or}n(cs,_s,fn,js,4),_s+=4,Qn[0+Tr]=Or}}else Or=ye(lr,156)?ye(lr,128)?1:3:ye(lr,163)?2:0,kn.Ob[0]=Or,a(fn,js,Or,4),a(Qn,0,Or,4);kn.Dd=ye(lr,142)?ye(lr,114)?ye(lr,183)?1:3:2:0}if(Mn.m.Ka)return Gn(Rr,7,"Premature end-of-partition0 encountered.");for(;Rr.ja<Rr.za;++Rr.ja){if(Mn=Pt,lr=(xt=Rr).rb[xt.sb-1],fn=xt.rb[xt.sb+xt.ja],gr=xt.ya[xt.aa+xt.ja],js=xt.kc?gr.Ad:0)lr.la=fn.la=0,gr.Za||(lr.Na=fn.Na=0),gr.Hc=0,gr.Gc=0,gr.ia=0;else{var yn,Vr;if(lr=fn,fn=Mn,js=xt.Pa.Xc,Qn=xt.ya[xt.aa+xt.ja],kn=xt.pb[Qn.$b],Tr=Qn.ad,cs=0,_s=xt.rb[xt.sb-1],Or=xn=0,a(Tr,cs,0,384),Qn.Za)var Rn=0,Ln=js[3];else{qr=i(16);var nn=lr.Na+_s.Na;if(nn=pc(fn,js[1],nn,kn.Eb,0,qr,0),lr.Na=_s.Na=(0<nn)+0,1<nn)hl(qr,0,Tr,cs);else{var Hs=qr[0]+3>>3;for(qr=0;256>qr;qr+=16)Tr[cs+qr]=Hs}Rn=1,Ln=js[0]}var en=15&lr.la,sn=15&_s.la;for(qr=0;4>qr;++qr){var Jn=1&sn;for(Hs=Vr=0;4>Hs;++Hs)en=en>>1|(Jn=(nn=pc(fn,Ln,nn=Jn+(1&en),kn.Sc,Rn,Tr,cs))>Rn)<<7,Vr=Vr<<2|(3<nn?3:1<nn?2:Tr[cs+0]!=0),cs+=16;en>>=4,sn=sn>>1|Jn<<7,xn=(xn<<8|Vr)>>>0}for(Ln=en,Rn=sn>>4,yn=0;4>yn;yn+=2){for(Vr=0,en=lr.la>>4+yn,sn=_s.la>>4+yn,qr=0;2>qr;++qr){for(Jn=1&sn,Hs=0;2>Hs;++Hs)nn=Jn+(1&en),en=en>>1|(Jn=0<(nn=pc(fn,js[2],nn,kn.Qc,0,Tr,cs)))<<3,Vr=Vr<<2|(3<nn?3:1<nn?2:Tr[cs+0]!=0),cs+=16;en>>=2,sn=sn>>1|Jn<<5}Or|=Vr<<4*yn,Ln|=en<<4<<yn,Rn|=(240&sn)<<yn}lr.la=Ln,_s.la=Rn,Qn.Hc=xn,Qn.Gc=Or,Qn.ia=43690&Or?0:kn.ia,js=!(xn|Or)}if(0<xt.L&&(xt.wa[xt.Y+xt.ja]=xt.gd[gr.$b][gr.Za],xt.wa[xt.Y+xt.ja].La|=!js),Mn.Ka)return Gn(Rr,7,"Premature end-of-file encountered.")}if(Gl(Rr),xt=Tn,Mn=1,gr=(Pt=Rr).D,lr=0<Pt.L&&Pt.M>=Pt.zb&&Pt.M<=Pt.Va,Pt.Aa==0)t:{if(gr.M=Pt.M,gr.uc=lr,Ia(Pt,gr),Mn=1,gr=(Vr=Pt.D).Nb,lr=(Or=xc[Pt.L])*Pt.R,fn=Or/2*Pt.B,qr=16*gr*Pt.R,Hs=8*gr*Pt.B,js=Pt.sa,Qn=Pt.ta-lr+qr,kn=Pt.qa,Tr=Pt.ra-fn+Hs,cs=Pt.Ha,_s=Pt.Ia-fn+Hs,sn=(en=Vr.M)==0,xn=en>=Pt.Va-1,Pt.Aa==2&&Ia(Pt,Vr),Vr.uc)for(Jn=(nn=Pt).D.M,t(nn.D.uc),Vr=nn.yb;Vr<nn.Hb;++Vr){Rn=Vr,Ln=Jn;var Is=(ga=(Un=nn).D).Nb;yn=Un.R;var ga=ga.wa[ga.Y+Rn],Fn=Un.sa,Bn=Un.ta+16*Is*yn+16*Rn,Gs=ga.dd,an=ga.tc;if(an!=0)if(t(3<=an),Un.L==1)0<Rn&&mm(Fn,Bn,yn,an+4),ga.La&&dc(Fn,Bn,yn,an),0<Ln&&Rf(Fn,Bn,yn,an+4),ga.La&&yd(Fn,Bn,yn,an);else{var Ks=Un.B,si=Un.qa,Si=Un.ra+8*Is*Ks+8*Rn,Ns=Un.Ha,Un=Un.Ia+8*Is*Ks+8*Rn;Is=ga.ld,0<Rn&&(Yn(Fn,Bn,yn,an+4,Gs,Is),xd(si,Si,Ns,Un,Ks,an+4,Gs,Is)),ga.La&&(yo(Fn,Bn,yn,an,Gs,Is),ou(si,Si,Ns,Un,Ks,an,Gs,Is)),0<Ln&&(An(Fn,Bn,yn,an+4,Gs,Is),_i(si,Si,Ns,Un,Ks,an+4,Gs,Is)),ga.La&&(iu(Fn,Bn,yn,an,Gs,Is),Tf(si,Si,Ns,Un,Ks,an,Gs,Is))}}if(Pt.ia&&alert("todo:DitherRow"),xt.put!=null){if(Vr=16*en,en=16*(en+1),sn?(xt.y=Pt.sa,xt.O=Pt.ta+qr,xt.f=Pt.qa,xt.N=Pt.ra+Hs,xt.ea=Pt.Ha,xt.W=Pt.Ia+Hs):(Vr-=Or,xt.y=js,xt.O=Qn,xt.f=kn,xt.N=Tr,xt.ea=cs,xt.W=_s),xn||(en-=Or),en>xt.o&&(en=xt.o),xt.F=null,xt.J=null,Pt.Fa!=null&&0<Pt.Fa.length&&Vr<en&&(xt.J=dn(Pt,xt,Vr,en-Vr),xt.F=Pt.mb,xt.F==null&&xt.F.length==0)){Mn=Gn(Pt,3,"Could not decode alpha data.");break t}Vr<xt.j&&(Or=xt.j-Vr,Vr=xt.j,t(!(1&Or)),xt.O+=Pt.R*Or,xt.N+=Pt.B*(Or>>1),xt.W+=Pt.B*(Or>>1),xt.F!=null&&(xt.J+=xt.width*Or)),Vr<en&&(xt.O+=xt.v,xt.N+=xt.v>>1,xt.W+=xt.v>>1,xt.F!=null&&(xt.J+=xt.v),xt.ka=Vr-xt.j,xt.U=xt.va-xt.v,xt.T=en-Vr,Mn=xt.put(xt))}gr+1!=Pt.Ic||xn||(n(Pt.sa,Pt.ta-lr,js,Qn+16*Pt.R,lr),n(Pt.qa,Pt.ra-fn,kn,Tr+8*Pt.B,fn),n(Pt.Ha,Pt.Ia-fn,cs,_s+8*Pt.B,fn))}if(!Mn)return Gn(Rr,6,"Output aborted.")}return 1})(he,Se)),Se.bc!=null&&Se.bc(Se),Re&=1}return Re?(he.cb=0,Re):0})(y,$)||(S=y.a)}}else S=y.a}S==0&&X.Oa!=null&&X.Oa.fd&&(S=nu(X.ba))}X=S}Z=X!=0?null:11>Z?ae.f.RGBA.eb:ae.f.kb.y}else Z=null;return Z};var Ed=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(T,z){for(var U="",B=0;B<4;B++)U+=String.fromCharCode(T[z++]);return U}function h(T,z){return T[z+0]|T[z+1]<<8}function p(T,z){return(T[z+0]|T[z+1]<<8|T[z+2]<<16)>>>0}function v(T,z){return(T[z+0]|T[z+1]<<8|T[z+2]<<16|T[z+3]<<24)>>>0}new u;var m=[0],N=[0],w=[],j=new u,_=e,C=(function(T,z){var U={},B=0,K=!1,V=0,de=0;if(U.frames=[],!(function(L,q){for(var J=0;J<4;J++)if(L[q+J]!="RIFF".charCodeAt(J))return!0;return!1})(T,z)){for(v(T,z+=4),z+=8;z<T.length;){var se=f(T,z),Y=v(T,z+=4);z+=4;var W=Y+(1&Y);switch(se){case"VP8 ":case"VP8L":U.frames[B]===void 0&&(U.frames[B]={}),(re=U.frames[B]).src_off=K?de:z-8,re.src_size=V+Y+8,B++,K&&(K=!1,V=0,de=0);break;case"VP8X":(re=U.header={}).feature_flags=T[z];var ee=z+4;re.canvas_width=1+p(T,ee),ee+=3,re.canvas_height=1+p(T,ee),ee+=3;break;case"ALPH":K=!0,V=W+8,de=z-8;break;case"ANIM":(re=U.header).bgcolor=v(T,z),ee=z+4,re.loop_count=h(T,ee),ee+=2;break;case"ANMF":var ge,re;(re=U.frames[B]={}).offset_x=2*p(T,z),z+=3,re.offset_y=2*p(T,z),z+=3,re.width=1+p(T,z),z+=3,re.height=1+p(T,z),z+=3,re.duration=p(T,z),z+=3,ge=T[z++],re.dispose=1&ge,re.blend=ge>>1&1}se!="ANMF"&&(z+=W)}return U}})(_,0);C.response=_,C.rgbaoutput=!0,C.dataurl=!1;var k=C.header?C.header:null,E=C.frames?C.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],N=[k.canvas_width];for(var I=0;I<E.length&&E[I].blend!=0;I++);}var D=E[0],O=j.WebPDecodeRGBA(_,D.src_off,D.src_size,N,m);D.rgba=O,D.imgwidth=N[0],D.imgheight=m[0];for(var F=0;F<N[0]*m[0]*4;F++)w[F]=O[F];return this.width=N,this.height=m,this.data=w,this}(function(e){var t,r,n,a,i,o,l,u,f,h=function(L){return L=L||{},this.isStrokeTransparent=L.isStrokeTransparent||!1,this.strokeOpacity=L.strokeOpacity||1,this.strokeStyle=L.strokeStyle||"#000000",this.fillStyle=L.fillStyle||"#000000",this.isFillTransparent=L.isFillTransparent||!1,this.fillOpacity=L.fillOpacity||1,this.font=L.font||"10px sans-serif",this.textBaseline=L.textBaseline||"alphabetic",this.textAlign=L.textAlign||"left",this.lineWidth=L.lineWidth||1,this.lineJoin=L.lineJoin||"miter",this.lineCap=L.lineCap||"butt",this.path=L.path||[],this.transform=L.transform!==void 0?L.transform.clone():new u,this.globalCompositeOperation=L.globalCompositeOperation||"normal",this.globalAlpha=L.globalAlpha||1,this.clip_path=L.clip_path||[],this.currentPoint=L.currentPoint||new o,this.miterLimit=L.miterLimit||10,this.lastPoint=L.lastPoint||new o,this.lineDashOffset=L.lineDashOffset||0,this.lineDash=L.lineDash||[],this.margin=L.margin||[0,0,0,0],this.prevPageLastElemOffset=L.prevPageLastElemOffset||0,this.ignoreClearRect=typeof L.ignoreClearRect!="boolean"||L.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,u=this.internal.Matrix,f=new h}]);var p=function(L){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var q=L;Object.defineProperty(this,"pdf",{get:function(){return q}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(te){J=!!te}});var ne=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ne},set:function(te){ne=!!te}});var ue=0;Object.defineProperty(this,"posX",{get:function(){return ue},set:function(te){isNaN(te)||(ue=te)}});var ie=0;Object.defineProperty(this,"posY",{get:function(){return ie},set:function(te){isNaN(te)||(ie=te)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(te){var Ze;typeof te=="number"?Ze=[te,te,te,te]:((Ze=new Array(4))[0]=te[0],Ze[1]=te.length>=2?te[1]:Ze[0],Ze[2]=te.length>=3?te[2]:Ze[0],Ze[3]=te.length>=4?te[3]:Ze[1]),f.margin=Ze}});var oe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return oe},set:function(te){oe=te}});var le=0;Object.defineProperty(this,"lastBreak",{get:function(){return le},set:function(te){le=te}});var ye=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ye},set:function(te){ye=te}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(te){te instanceof h&&(f=te)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(te){f.path=te}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(te){Pe=te}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(te){var Ze;Ze=v(te),this.ctx.fillStyle=Ze.style,this.ctx.isFillTransparent=Ze.a===0,this.ctx.fillOpacity=Ze.a,this.pdf.setFillColor(Ze.r,Ze.g,Ze.b,{a:Ze.a}),this.pdf.setTextColor(Ze.r,Ze.g,Ze.b,{a:Ze.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(te){var Ze=v(te);this.ctx.strokeStyle=Ze.style,this.ctx.isStrokeTransparent=Ze.a===0,this.ctx.strokeOpacity=Ze.a,Ze.a===0?this.pdf.setDrawColor(255,255,255):(Ze.a,this.pdf.setDrawColor(Ze.r,Ze.g,Ze.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(te){["butt","round","square"].indexOf(te)!==-1&&(this.ctx.lineCap=te,this.pdf.setLineCap(te))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(te){isNaN(te)||(this.ctx.lineWidth=te,this.pdf.setLineWidth(te))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(te){["bevel","round","miter"].indexOf(te)!==-1&&(this.ctx.lineJoin=te,this.pdf.setLineJoin(te))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(te){isNaN(te)||(this.ctx.miterLimit=te,this.pdf.setMiterLimit(te))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(te){this.ctx.textBaseline=te}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(te){["right","end","center","left","start"].indexOf(te)!==-1&&(this.ctx.textAlign=te)}});var We=null,Fe=null,je=null;Object.defineProperty(this,"fontFaces",{get:function(){return je},set:function(te){We=null,Fe=null,je=te}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(te){var Ze;if(this.ctx.font=te,(Ze=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(te))!==null){var Nt=Ze[1];Ze[2];var pt=Ze[3],Qe=Ze[4];Ze[5];var me=Ze[6],xe=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Qe)[2];Qe=Math.floor(xe==="px"?parseFloat(Qe)*this.pdf.internal.scaleFactor:xe==="em"?parseFloat(Qe)*this.pdf.getFontSize():parseFloat(Qe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Qe);var Ce=(function(bt){var Jr,dr,Yt=[],or=bt.trim();if(or==="")return U1;if(or in YS)return[YS[or]];for(;or!=="";){switch(dr=null,Jr=(or=JS(or)).charAt(0)){case'"':case"'":dr=TK(or.substring(1),Jr);break;default:dr=RK(or)}if(dr===null||(Yt.push(dr[0]),(or=JS(dr[1]))!==""&&or.charAt(0)!==","))return U1;or=or.replace(/^,/,"")}return Yt})(me);if(this.fontFaces){var $e=(function(bt,Jr){var dr=bt.getFontList(),Yt=JSON.stringify(dr);if(We===null||Fe!==Yt){var or=(function(Pr){var Ue=[];return Object.keys(Pr).forEach(function(ar){Pr[ar].forEach(function(Ht){var Xt=null;switch(Ht){case"bold":Xt={family:ar,weight:"bold"};break;case"italic":Xt={family:ar,style:"italic"};break;case"bolditalic":Xt={family:ar,weight:"bold",style:"italic"};break;case"":case"normal":Xt={family:ar}}Xt!==null&&(Xt.ref={name:ar,style:Ht},Ue.push(Xt))})}),Ue})(dr);We=(function(Pr){for(var Ue={},ar=0;ar<Pr.length;++ar){var Ht=B1(Pr[ar]),Xt=Ht.family,Fr=Ht.stretch,er=Ht.style,Rt=Ht.weight;Ue[Xt]=Ue[Xt]||{},Ue[Xt][Fr]=Ue[Xt][Fr]||{},Ue[Xt][Fr][er]=Ue[Xt][Fr][er]||{},Ue[Xt][Fr][er][Rt]=Ht}return Ue})(or.concat(Jr)),Fe=Yt}return We})(this.pdf,this.fontFaces),et=Ce.map(function(bt){return{family:bt,stretch:"normal",weight:pt,style:Nt}}),Ge=(function(bt,Jr,dr){for(var Yt=(dr=dr||{}).defaultFontFamily||"times",or=Object.assign({},AK,dr.genericFontFamilies||{}),Pr=null,Ue=null,ar=0;ar<Jr.length;++ar)if(or[(Pr=B1(Jr[ar])).family]&&(Pr.family=or[Pr.family]),bt.hasOwnProperty(Pr.family)){Ue=bt[Pr.family];break}if(!(Ue=Ue||bt[Yt]))throw new Error("Could not find a font-family for the rule '"+QS(Pr)+"' and default family '"+Yt+"'.");if(Ue=(function(Ht,Xt){if(Xt[Ht])return Xt[Ht];var Fr=ab[Ht],er=Fr<=ab.normal?-1:1,Rt=KS(Xt,B6,Fr,er);if(!Rt)throw new Error("Could not find a matching font-stretch value for "+Ht);return Rt})(Pr.stretch,Ue),Ue=(function(Ht,Xt){if(Xt[Ht])return Xt[Ht];for(var Fr=F6[Ht],er=0;er<Fr.length;++er)if(Xt[Fr[er]])return Xt[Fr[er]];throw new Error("Could not find a matching font-style for "+Ht)})(Pr.style,Ue),!(Ue=(function(Ht,Xt){if(Xt[Ht])return Xt[Ht];if(Ht===400&&Xt[500])return Xt[500];if(Ht===500&&Xt[400])return Xt[400];var Fr=PK[Ht],er=KS(Xt,U6,Fr,Ht<400?-1:1);if(!er)throw new Error("Could not find a matching font-weight for value "+Ht);return er})(Pr.weight,Ue)))throw new Error("Failed to resolve a font for the rule '"+QS(Pr)+"'.");return Ue})($e,et);this.pdf.setFont(Ge.ref.name,Ge.ref.style)}else{var tt="";(pt==="bold"||parseInt(pt,10)>=700||Nt==="bold")&&(tt="bold"),Nt==="italic"&&(tt+="italic"),tt.length===0&&(tt="normal");for(var gt="",_t={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},yt=0;yt<Ce.length;yt++){if(this.pdf.internal.getFont(Ce[yt],tt,{noFallback:!0,disableWarning:!0})!==void 0){gt=Ce[yt];break}if(tt==="bolditalic"&&this.pdf.internal.getFont(Ce[yt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)gt=Ce[yt],tt="bold";else if(this.pdf.internal.getFont(Ce[yt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){gt=Ce[yt],tt="normal";break}}if(gt===""){for(var zt=0;zt<Ce.length;zt++)if(_t[Ce[zt]]){gt=_t[Ce[zt]];break}}gt=gt===""?"Times":gt,this.pdf.setFont(gt,tt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(te){this.ctx.globalCompositeOperation=te}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(te){this.ctx.globalAlpha=te}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(te){this.ctx.lineDashOffset=te,re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(te){this.ctx.lineDash=te,re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(te){this.ctx.ignoreClearRect=!!te}})};p.prototype.setLineDash=function(L){this.lineDash=L},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){E.call(this,"fill",!1)},p.prototype.stroke=function(){E.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(L,q){if(isNaN(L)||isNaN(q))throw gn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(L,q)},p.prototype.closePath=function(){var L=new o(0,0),q=0;for(q=this.path.length-1;q!==-1;q--)if(this.path[q].type==="begin"&&cn(this.path[q+1])==="object"&&typeof this.path[q+1].x=="number"){L=new o(this.path[q+1].x,this.path[q+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(L.x,L.y)},p.prototype.lineTo=function(L,q){if(isNaN(L)||isNaN(q))throw gn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},p.prototype.quadraticCurveTo=function(L,q,J,ne){if(isNaN(J)||isNaN(ne)||isNaN(L)||isNaN(q))throw gn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ue=this.ctx.transform.applyToPoint(new o(J,ne)),ie=this.ctx.transform.applyToPoint(new o(L,q));this.path.push({type:"qct",x1:ie.x,y1:ie.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new o(ue.x,ue.y)},p.prototype.bezierCurveTo=function(L,q,J,ne,ue,ie){if(isNaN(ue)||isNaN(ie)||isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne))throw gn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var oe=this.ctx.transform.applyToPoint(new o(ue,ie)),le=this.ctx.transform.applyToPoint(new o(L,q)),ye=this.ctx.transform.applyToPoint(new o(J,ne));this.path.push({type:"bct",x1:le.x,y1:le.y,x2:ye.x,y2:ye.y,x:oe.x,y:oe.y}),this.ctx.lastPoint=new o(oe.x,oe.y)},p.prototype.arc=function(L,q,J,ne,ue,ie){if(isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue))throw gn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(ie=!!ie,!this.ctx.transform.isIdentity){var oe=this.ctx.transform.applyToPoint(new o(L,q));L=oe.x,q=oe.y;var le=this.ctx.transform.applyToPoint(new o(0,J)),ye=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(le.x-ye.x,2)+Math.pow(le.y-ye.y,2))}Math.abs(ue-ne)>=2*Math.PI&&(ne=0,ue=2*Math.PI),this.path.push({type:"arc",x:L,y:q,radius:J,startAngle:ne,endAngle:ue,counterclockwise:ie})},p.prototype.arcTo=function(L,q,J,ne,ue){throw new Error("arcTo not implemented.")},p.prototype.rect=function(L,q,J,ne){if(isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne))throw gn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(L,q),this.lineTo(L+J,q),this.lineTo(L+J,q+ne),this.lineTo(L,q+ne),this.lineTo(L,q),this.lineTo(L+J,q),this.lineTo(L,q)},p.prototype.fillRect=function(L,q,J,ne){if(isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne))throw gn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ue={};this.lineCap!=="butt"&&(ue.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ue.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(L,q,J,ne),this.fill(),ue.hasOwnProperty("lineCap")&&(this.lineCap=ue.lineCap),ue.hasOwnProperty("lineJoin")&&(this.lineJoin=ue.lineJoin)}},p.prototype.strokeRect=function(L,q,J,ne){if(isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne))throw gn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");N.call(this)||(this.beginPath(),this.rect(L,q,J,ne),this.stroke())},p.prototype.clearRect=function(L,q,J,ne){if(isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne))throw gn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(L,q,J,ne))},p.prototype.save=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(q),L){this.ctx.fontSize=this.pdf.internal.getFontSize();var ne=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ne}},p.prototype.restore=function(L){L=typeof L!="boolean"||L;for(var q=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(q),L&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(L){var q,J,ne,ue;if(L.isCanvasGradient===!0&&(L=L.getColor()),!L)return{r:0,g:0,b:0,a:0,style:L};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(L))q=0,J=0,ne=0,ue=0;else{var ie=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(L);if(ie!==null)q=parseInt(ie[1]),J=parseInt(ie[2]),ne=parseInt(ie[3]),ue=1;else if((ie=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(L))!==null)q=parseInt(ie[1]),J=parseInt(ie[2]),ne=parseInt(ie[3]),ue=parseFloat(ie[4]);else{if(ue=1,typeof L=="string"&&L.charAt(0)!=="#"){var oe=new T6(L);L=oe.ok?oe.toHex():"#000000"}L.length===4?(q=L.substring(1,2),q+=q,J=L.substring(2,3),J+=J,ne=L.substring(3,4),ne+=ne):(q=L.substring(1,3),J=L.substring(3,5),ne=L.substring(5,7)),q=parseInt(q,16),J=parseInt(J,16),ne=parseInt(ne,16)}}return{r:q,g:J,b:ne,a:ue,style:L}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},N=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(L,q,J,ne){if(isNaN(q)||isNaN(J)||typeof L!="string")throw gn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ne=isNaN(ne)?void 0:ne,!m.call(this)){var ue=W(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;B.call(this,{text:L,x:q,y:J,scale:ie,angle:ue,align:this.textAlign,maxWidth:ne})}},p.prototype.strokeText=function(L,q,J,ne){if(isNaN(q)||isNaN(J)||typeof L!="string")throw gn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!N.call(this)){ne=isNaN(ne)?void 0:ne;var ue=W(this.ctx.transform.rotation),ie=this.ctx.transform.scaleX;B.call(this,{text:L,x:q,y:J,scale:ie,renderingMode:"stroke",angle:ue,align:this.textAlign,maxWidth:ne})}},p.prototype.measureText=function(L){if(typeof L!="string")throw gn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var q=this.pdf,J=this.pdf.internal.scaleFactor,ne=q.internal.getFontSize(),ue=q.getStringUnitWidth(L)*ne/q.internal.scaleFactor;return new function(ie){var oe=(ie=ie||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return oe}}),this}({width:ue*=Math.round(96*J/72*1e4)/1e4})},p.prototype.scale=function(L,q){if(isNaN(L)||isNaN(q))throw gn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new u(L,0,0,q,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.rotate=function(L){if(isNaN(L))throw gn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var q=new u(Math.cos(L),Math.sin(L),-Math.sin(L),Math.cos(L),0,0);this.ctx.transform=this.ctx.transform.multiply(q)},p.prototype.translate=function(L,q){if(isNaN(L)||isNaN(q))throw gn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new u(1,0,0,1,L,q);this.ctx.transform=this.ctx.transform.multiply(J)},p.prototype.transform=function(L,q,J,ne,ue,ie){if(isNaN(L)||isNaN(q)||isNaN(J)||isNaN(ne)||isNaN(ue)||isNaN(ie))throw gn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var oe=new u(L,q,J,ne,ue,ie);this.ctx.transform=this.ctx.transform.multiply(oe)},p.prototype.setTransform=function(L,q,J,ne,ue,ie){L=isNaN(L)?1:L,q=isNaN(q)?0:q,J=isNaN(J)?0:J,ne=isNaN(ne)?1:ne,ue=isNaN(ue)?0:ue,ie=isNaN(ie)?0:ie,this.ctx.transform=new u(L,q,J,ne,ue,ie)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(L,q,J,ne,ue,ie,oe,le,ye){var Pe=this.pdf.getImageProperties(L),We=1,Fe=1,je=1,te=1;ne!==void 0&&le!==void 0&&(je=le/ne,te=ye/ue,We=Pe.width/ne*le/ne,Fe=Pe.height/ue*ye/ue),ie===void 0&&(ie=q,oe=J,q=0,J=0),ne!==void 0&&le===void 0&&(le=ne,ye=ue),ne===void 0&&le===void 0&&(le=Pe.width,ye=Pe.height);var Ze=this.ctx.transform.decompose(),Nt=W(Ze.rotate.shx),pt=new u,Qe=(pt=(pt=(pt=pt.multiply(Ze.translate)).multiply(Ze.skew)).multiply(Ze.scale)).applyToRectangle(new l(ie-q*je,oe-J*te,ne*We,ue*Fe));if(this.autoPaging){for(var me,xe=j.call(this,Qe),Ce=[],$e=0;$e<xe.length;$e+=1)Ce.indexOf(xe[$e])===-1&&Ce.push(xe[$e]);k(Ce);for(var et=Ce[0],Ge=Ce[Ce.length-1],tt=et;tt<Ge+1;tt++){this.pdf.setPage(tt);var gt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],_t=tt===1?this.posY+this.margin[0]:this.margin[0],yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],zt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=tt===1?0:yt+(tt-2)*zt;if(this.ctx.clip_path.length!==0){var Jr=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(me,this.posX+this.margin[3],-bt+_t+this.ctx.prevPageLastElemOffset),I.call(this,"fill",!0),this.path=Jr}var dr=JSON.parse(JSON.stringify(Qe));dr=C([dr],this.posX+this.margin[3],-bt+_t+this.ctx.prevPageLastElemOffset)[0];var Yt=(tt>et||tt<Ge)&&w.call(this);Yt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gt,zt,null).clip().discardPath()),this.pdf.addImage(L,"JPEG",dr.x,dr.y,dr.w,dr.h,null,null,Nt),Yt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(L,"JPEG",Qe.x,Qe.y,Qe.w,Qe.h,null,null,Nt)};var j=function(L,q,J){var ne=[];q=q||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ue=this.posY+this.ctx.prevPageLastElemOffset;switch(L.type){default:case"mt":case"lt":ne.push(Math.floor((L.y+ue)/J)+1);break;case"arc":ne.push(Math.floor((L.y+ue-L.radius)/J)+1),ne.push(Math.floor((L.y+ue+L.radius)/J)+1);break;case"qct":var ie=ee(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x,L.y);ne.push(Math.floor((ie.y+ue)/J)+1),ne.push(Math.floor((ie.y+ie.h+ue)/J)+1);break;case"bct":var oe=ge(this.ctx.lastPoint.x,this.ctx.lastPoint.y,L.x1,L.y1,L.x2,L.y2,L.x,L.y);ne.push(Math.floor((oe.y+ue)/J)+1),ne.push(Math.floor((oe.y+oe.h+ue)/J)+1);break;case"rect":ne.push(Math.floor((L.y+ue)/J)+1),ne.push(Math.floor((L.y+L.h+ue)/J)+1)}for(var le=0;le<ne.length;le+=1)for(;this.pdf.internal.getNumberOfPages()<ne[le];)_.call(this);return ne},_=function(){var L=this.fillStyle,q=this.strokeStyle,J=this.font,ne=this.lineCap,ue=this.lineWidth,ie=this.lineJoin;this.pdf.addPage(),this.fillStyle=L,this.strokeStyle=q,this.font=J,this.lineCap=ne,this.lineWidth=ue,this.lineJoin=ie},C=function(L,q,J){for(var ne=0;ne<L.length;ne++)switch(L[ne].type){case"bct":L[ne].x2+=q,L[ne].y2+=J;case"qct":L[ne].x1+=q,L[ne].y1+=J;default:L[ne].x+=q,L[ne].y+=J}return L},k=function(L){return L.sort(function(q,J){return q-J})},E=function(L,q){var J=this.fillStyle,ne=this.strokeStyle,ue=this.lineCap,ie=this.lineWidth,oe=Math.abs(ie*this.ctx.transform.scaleX),le=this.lineJoin;if(this.autoPaging){for(var ye,Pe,We=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),je=[],te=0;te<Fe.length;te++)if(Fe[te].x!==void 0)for(var Ze=j.call(this,Fe[te]),Nt=0;Nt<Ze.length;Nt+=1)je.indexOf(Ze[Nt])===-1&&je.push(Ze[Nt]);for(var pt=0;pt<je.length;pt++)for(;this.pdf.internal.getNumberOfPages()<je[pt];)_.call(this);k(je);for(var Qe=je[0],me=je[je.length-1],xe=Qe;xe<me+1;xe++){this.pdf.setPage(xe),this.fillStyle=J,this.strokeStyle=ne,this.lineCap=ue,this.lineWidth=oe,this.lineJoin=le;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],$e=xe===1?this.posY+this.margin[0]:this.margin[0],et=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ge=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],tt=xe===1?0:et+(xe-2)*Ge;if(this.ctx.clip_path.length!==0){var gt=this.path;ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(ye,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),I.call(this,L,!0),this.path=gt}if(Pe=JSON.parse(JSON.stringify(We)),this.path=C(Pe,this.posX+this.margin[3],-tt+$e+this.ctx.prevPageLastElemOffset),q===!1||xe===0){var _t=(xe>Qe||xe<me)&&w.call(this);_t&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,Ge,null).clip().discardPath()),I.call(this,L,q),_t&&this.pdf.restoreGraphicsState()}this.lineWidth=ie}this.path=We}else this.lineWidth=oe,I.call(this,L,q),this.lineWidth=ie},I=function(L,q){if((L!=="stroke"||q||!N.call(this))&&(L==="stroke"||q||!m.call(this))){for(var J,ne,ue=[],ie=this.path,oe=0;oe<ie.length;oe++){var le=ie[oe];switch(le.type){case"begin":ue.push({begin:!0});break;case"close":ue.push({close:!0});break;case"mt":ue.push({start:le,deltas:[],abs:[]});break;case"lt":var ye=ue.length;if(ie[oe-1]&&!isNaN(ie[oe-1].x)&&(J=[le.x-ie[oe-1].x,le.y-ie[oe-1].y],ye>0)){for(;ye>=0;ye--)if(ue[ye-1].close!==!0&&ue[ye-1].begin!==!0){ue[ye-1].deltas.push(J),ue[ye-1].abs.push(le);break}}break;case"bct":J=[le.x1-ie[oe-1].x,le.y1-ie[oe-1].y,le.x2-ie[oe-1].x,le.y2-ie[oe-1].y,le.x-ie[oe-1].x,le.y-ie[oe-1].y],ue[ue.length-1].deltas.push(J);break;case"qct":var Pe=ie[oe-1].x+2/3*(le.x1-ie[oe-1].x),We=ie[oe-1].y+2/3*(le.y1-ie[oe-1].y),Fe=le.x+2/3*(le.x1-le.x),je=le.y+2/3*(le.y1-le.y),te=le.x,Ze=le.y;J=[Pe-ie[oe-1].x,We-ie[oe-1].y,Fe-ie[oe-1].x,je-ie[oe-1].y,te-ie[oe-1].x,Ze-ie[oe-1].y],ue[ue.length-1].deltas.push(J);break;case"arc":ue.push({deltas:[],abs:[],arc:!0}),Array.isArray(ue[ue.length-1].abs)&&ue[ue.length-1].abs.push(le)}}ne=q?null:L==="stroke"?"stroke":"fill";for(var Nt=!1,pt=0;pt<ue.length;pt++)if(ue[pt].arc)for(var Qe=ue[pt].abs,me=0;me<Qe.length;me++){var xe=Qe[me];xe.type==="arc"?F.call(this,xe.x,xe.y,xe.radius,xe.startAngle,xe.endAngle,xe.counterclockwise,void 0,q,!Nt):K.call(this,xe.x,xe.y),Nt=!0}else if(ue[pt].close===!0)this.pdf.internal.out("h"),Nt=!1;else if(ue[pt].begin!==!0){var Ce=ue[pt].start.x,$e=ue[pt].start.y;V.call(this,ue[pt].deltas,Ce,$e),Nt=!0}ne&&T.call(this,ne),q&&z.call(this)}},D=function(L){var q=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=q*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return L-J;case"top":return L+q-J;case"hanging":return L+q-2*J;case"middle":return L+q/2-J;default:return L}},O=function(L){return L+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var L=function(){};return L.colorStops=[],L.addColorStop=function(q,J){this.colorStops.push([q,J])},L.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},L.isCanvasGradient=!0,L},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var F=function(L,q,J,ne,ue,ie,oe,le,ye){for(var Pe=se.call(this,J,ne,ue,ie),We=0;We<Pe.length;We++){var Fe=Pe[We];We===0&&(ye?U.call(this,Fe.x1+L,Fe.y1+q):K.call(this,Fe.x1+L,Fe.y1+q)),de.call(this,L,q,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}le?z.call(this):T.call(this,oe)},T=function(L){switch(L){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},z=function(){this.pdf.clip(),this.pdf.discardPath()},U=function(L,q){this.pdf.internal.out(r(L)+" "+n(q)+" m")},B=function(L){var q;switch(L.align){case"right":case"end":q="right";break;case"center":q="center";break;default:q="left"}var J,ne,ue,ie=this.pdf.getTextDimensions(L.text),oe=D.call(this,L.y),le=O.call(this,oe)-ie.h,ye=this.ctx.transform.applyToPoint(new o(L.x,oe));if(this.autoPaging){var Pe=this.ctx.transform.decompose(),We=new u;We=(We=(We=We.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var Fe=this.ctx.transform.applyToRectangle(new l(L.x,oe,ie.w,ie.h)),je=We.applyToRectangle(new l(L.x,le,ie.w,ie.h)),te=j.call(this,je),Ze=[],Nt=0;Nt<te.length;Nt+=1)Ze.indexOf(te[Nt])===-1&&Ze.push(te[Nt]);k(Ze);for(var pt=Ze[0],Qe=Ze[Ze.length-1],me=pt;me<Qe+1;me++){this.pdf.setPage(me);var xe=me===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$e=this.pdf.internal.pageSize.height-this.margin[2],et=$e-this.margin[0],Ge=this.pdf.internal.pageSize.width-this.margin[1],tt=Ge-this.margin[3],gt=me===1?0:Ce+(me-2)*et;if(this.ctx.clip_path.length!==0){var _t=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=C(J,this.posX+this.margin[3],-1*gt+xe),I.call(this,"fill",!0),this.path=_t}var yt=C([JSON.parse(JSON.stringify(je))],this.posX+this.margin[3],-gt+xe+this.ctx.prevPageLastElemOffset)[0];L.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*L.scale),ue=this.lineWidth,this.lineWidth=ue*L.scale);var zt=this.autoPaging!=="text";if(zt||yt.y+yt.h<=$e){if(zt||yt.y>=xe&&yt.x<=Ge){var bt=zt?L.text:this.pdf.splitTextToSize(L.text,L.maxWidth||Ge-yt.x)[0],Jr=C([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-gt+xe+this.ctx.prevPageLastElemOffset)[0],dr=zt&&(me>pt||me<Qe)&&w.call(this);dr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],tt,et,null).clip().discardPath()),this.pdf.text(bt,Jr.x,Jr.y,{angle:L.angle,align:q,renderingMode:L.renderingMode}),dr&&this.pdf.restoreGraphicsState()}}else yt.y<$e&&(this.ctx.prevPageLastElemOffset+=$e-yt.y);L.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=ue)}}else L.scale>=.01&&(ne=this.pdf.internal.getFontSize(),this.pdf.setFontSize(ne*L.scale),ue=this.lineWidth,this.lineWidth=ue*L.scale),this.pdf.text(L.text,ye.x+this.posX,ye.y+this.posY,{angle:L.angle,align:q,renderingMode:L.renderingMode,maxWidth:L.maxWidth}),L.scale>=.01&&(this.pdf.setFontSize(ne),this.lineWidth=ue)},K=function(L,q,J,ne){J=J||0,ne=ne||0,this.pdf.internal.out(r(L+J)+" "+n(q+ne)+" l")},V=function(L,q,J){return this.pdf.lines(L,q,J,null,null)},de=function(L,q,J,ne,ue,ie,oe,le){this.pdf.internal.out([t(a(J+L)),t(i(ne+q)),t(a(ue+L)),t(i(ie+q)),t(a(oe+L)),t(i(le+q)),"c"].join(" "))},se=function(L,q,J,ne){for(var ue=2*Math.PI,ie=Math.PI/2;q>J;)q-=ue;var oe=Math.abs(J-q);oe<ue&&ne&&(oe=ue-oe);for(var le=[],ye=ne?-1:1,Pe=q;oe>1e-5;){var We=Pe+ye*Math.min(oe,ie);le.push(Y.call(this,L,Pe,We)),oe-=Math.abs(We-Pe),Pe=We}return le},Y=function(L,q,J){var ne=(J-q)/2,ue=L*Math.cos(ne),ie=L*Math.sin(ne),oe=ue,le=-ie,ye=oe*oe+le*le,Pe=ye+oe*ue+le*ie,We=4/3*(Math.sqrt(2*ye*Pe)-Pe)/(oe*ie-le*ue),Fe=oe-We*le,je=le+We*oe,te=Fe,Ze=-je,Nt=ne+q,pt=Math.cos(Nt),Qe=Math.sin(Nt);return{x1:L*Math.cos(q),y1:L*Math.sin(q),x2:Fe*pt-je*Qe,y2:Fe*Qe+je*pt,x3:te*pt-Ze*Qe,y3:te*Qe+Ze*pt,x4:L*Math.cos(J),y4:L*Math.sin(J)}},W=function(L){return 180*L/Math.PI},ee=function(L,q,J,ne,ue,ie){var oe=L+.5*(J-L),le=q+.5*(ne-q),ye=ue+.5*(J-ue),Pe=ie+.5*(ne-ie),We=Math.min(L,ue,oe,ye),Fe=Math.max(L,ue,oe,ye),je=Math.min(q,ie,le,Pe),te=Math.max(q,ie,le,Pe);return new l(We,je,Fe-We,te-je)},ge=function(L,q,J,ne,ue,ie,oe,le){var ye,Pe,We,Fe,je,te,Ze,Nt,pt,Qe,me,xe,Ce,$e,et=J-L,Ge=ne-q,tt=ue-J,gt=ie-ne,_t=oe-ue,yt=le-ie;for(Pe=0;Pe<41;Pe++)pt=(Ze=(We=L+(ye=Pe/40)*et)+ye*((je=J+ye*tt)-We))+ye*(je+ye*(ue+ye*_t-je)-Ze),Qe=(Nt=(Fe=q+ye*Ge)+ye*((te=ne+ye*gt)-Fe))+ye*(te+ye*(ie+ye*yt-te)-Nt),Pe==0?(me=pt,xe=Qe,Ce=pt,$e=Qe):(me=Math.min(me,pt),xe=Math.min(xe,Qe),Ce=Math.max(Ce,pt),$e=Math.max($e,Qe));return new l(Math.round(me),Math.round(xe),Math.round(Ce-me),Math.round($e-xe))},re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var L,q,J=(L=this.ctx.lineDash,q=this.ctx.lineDashOffset,JSON.stringify({lineDash:L,lineDashOffset:q}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(Gt.API),(function(e){var t=function(o){var l,u,f,h,p,v,m,N,w,j;for(u=[],f=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>f;f+=4)(p=(o.charCodeAt(f)<<24)+(o.charCodeAt(f+1)<<16)+(o.charCodeAt(f+2)<<8)+o.charCodeAt(f+3))!==0?(v=(p=((p=((p=((p=(p-(j=p%85))/85)-(w=p%85))/85)-(N=p%85))/85)-(m=p%85))/85)%85,u.push(v+33,m+33,N+33,w+33,j+33)):u.push(122);return(function(_,C){for(var k=C;k>0;k--)_.pop()})(u,l.length),String.fromCharCode.apply(String,u)+"~>"},r=function(o){var l,u,f,h,p,v=String,m="length",N=255,w="charCodeAt",j="slice",_="replace";for(o[j](-2),o=o[j](0,-2)[_](/\s/g,"")[_]("z","!!!!!"),f=[],h=0,p=(o+=l="uuuuu"[j](o[m]%5||5))[m];p>h;h+=5)u=52200625*(o[w](h)-33)+614125*(o[w](h+1)-33)+7225*(o[w](h+2)-33)+85*(o[w](h+3)-33)+(o[w](h+4)-33),f.push(N&u>>24,N&u>>16,N&u>>8,N&u);return(function(C,k){for(var E=k;E>0;E--)C.pop()})(f,l[m]),v.fromCharCode.apply(v,f)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},a=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var u="",f=0;f<o.length;f+=2)u+=String.fromCharCode("0x"+(o[f]+o[f+1]));return u},i=function(o){for(var l=new Uint8Array(o.length),u=o.length;u--;)l[u]=o.charCodeAt(u);return(l=Zw(l)).reduce(function(f,h){return f+String.fromCharCode(h)},"")};e.processDataByFilters=function(o,l){var u=0,f=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),u=0;u<l.length;u+=1)switch(l[u]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=a(f),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=n(f),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=i(f),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[u]+'" is not implemented')}return{data:f,reverseChain:h.reverse().join(" ")}}})(Gt.API),(function(e){e.loadFile=function(t,r,n){return(function(a,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(u,f,h){var p=new XMLHttpRequest,v=0,m=function(N){var w=N.length,j=[],_=String.fromCharCode;for(v=0;v<w;v+=1)j.push(_(255&N.charCodeAt(v)));return j.join("")};if(p.open("GET",u,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)})(a,i,o)}catch{}return l})(t,r,n)},e.allowFsRead=void 0,e.loadImageFile=e.loadFile})(Gt.API),(function(e){function t(){return(hr.html2canvas?Promise.resolve(hr.html2canvas):Al(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(hr.DOMPurify?Promise.resolve(hr.DOMPurify):Al(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var u=cn(l);return u==="undefined"?"undefined":u==="string"||l instanceof String?"string":u==="number"||l instanceof Number?"number":u==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":u==="object"?"object":"unknown"},a=function(l,u){var f=document.createElement(l);for(var h in u.className&&(f.className=u.className),u.innerHTML&&u.dompurify&&(f.innerHTML=u.dompurify.sanitize(u.innerHTML)),u.style)f.style[h]=u.style[h];return f},i=function l(u,f){for(var h=u.nodeType===3?document.createTextNode(u.nodeValue):u.cloneNode(!1),p=u.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,f));return u.nodeType===1&&(u.nodeName==="CANVAS"?(h.width=u.width,h.height=u.height,h.getContext("2d").drawImage(u,0,0)):u.nodeName!=="TEXTAREA"&&u.nodeName!=="SELECT"||(h.value=u.value),h.addEventListener("load",function(){h.scrollTop=u.scrollTop,h.scrollLeft=u.scrollLeft},!0)),h},o=function l(u){var f=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),f);return(h=h.setProgress(1,l,1,[l])).set(u)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,u){return l.__proto__=u||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,u){return this.then(function(){switch(u=u||(function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),u){case"string":return this.then(r).then(function(f){return this.set({src:a("div",{innerHTML:l,dompurify:f})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},u=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);u.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(u),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(u){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,u(this.prop.container,f)}).then(function(u){(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(u){var f=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=h,h)for(var m=0;m<h.length;++m){var N=h[m],w=N.src.find(function(j){return j.format==="truetype"});w&&f.addFont(w.url,N.ref.name,N.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),u(this.prop.container,v)}).then(function(u){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(u),this.prop.canvas=u,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,u,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(l,u):this.outputPdf(l,u)},o.prototype.outputPdf=function(l,u){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,u)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var u=Object.keys(l||{}).map(function(f){if(f in o.template.prop)return function(){this.prop[f]=l[f]};switch(f){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[f]=l[f]}}},this);return this.then(function(){return this.thenList(u)})},o.prototype.get=function(l,u){return this.then(function(){var f=l in o.template.prop?this.prop[l]:this.opt[l];return u?u(f):f})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function u(f,h){return Math.floor(f*h/72*96)}return this.then(function(){(l=l||Gt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:u(l.inner.width,l.k),height:u(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,u,f,h){return l!=null&&(this.progress.val=l),u!=null&&(this.progress.state=u),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,u,f,h){return this.setProgress(l?this.progress.val+l:null,u||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,u){var f=this;return this.thenCore(l,u,function(h,p){return f.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,h),v}).then(h,p).then(function(v){return f.updateProgress(1),v})})},o.prototype.thenCore=function(l,u,f){f=f||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),u&&(u=u.bind(h));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),v=f.call(p,l,u);return o.convert(v,h.__proto__)},o.prototype.thenExternal=function(l,u){return Promise.prototype.then.call(this,l,u)},o.prototype.thenList=function(l){var u=this;return l.forEach(function(f){u=u.thenCore(f)}),u},o.prototype.catch=function(l){l&&(l=l.bind(this));var u=Promise.prototype.catch.call(this,l);return o.convert(u,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Gt.getPageSize=function(l,u,f){if(cn(l)==="object"){var h=l;l=h.orientation,u=h.unit||u,f=h.format||f}u=u||"mm",f=f||"a4",l=(""+(l||"P")).toLowerCase();var p,v=(""+f).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(u){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+u}var N,w=0,j=0;if(m.hasOwnProperty(v))w=m[v][1]/p,j=m[v][0]/p;else try{w=f[1],j=f[0]}catch{throw new Error("Invalid format: "+f)}if(l==="p"||l==="portrait")l="p",j>w&&(N=j,j=w,w=N);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>j&&(N=j,j=w,w=N)}return{width:j,height:w,unit:u,k:p,orientation:l}},e.html=function(l,u){(u=u||{}).callback=u.callback||function(){},u.html2canvas=u.html2canvas||{},u.html2canvas.canvas=u.html2canvas.canvas||this.canvas,u.jsPDF=u.jsPDF||this,u.fontFaces=u.fontFaces?u.fontFaces.map(B1):null;var f=new o(u);return u.worker?f:f.from(l).doCallback()}})(Gt.API),Gt.API.addJS=function(e){return XS=e,this.internal.events.subscribe("postPutResources",function(){kv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(kv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ZS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+XS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){kv!==void 0&&ZS!==void 0&&this.internal.out("/Names <</JavaScript "+kv+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var a=r.outline.render().split(/\r\n/),i=0;i<a.length;i++){var o=a[i],l=n.exec(o);if(l!=null){var u=l[1];r.internal.newObjectDeferredBegin(u,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(i=0;i<f;i++){var p=r.internal.newObject();h.push(p);var v=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<h.length;i++)r.internal.write("(page_"+(i+1)+")"+h[i]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,a,i){var o={title:a,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var a=0;a<n.children.length;a++)this.genIds_r(n.children[a])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var a=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var u=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+u.objId+" 0 R /XYZ 0 "+a(0)+" 0]")}this.objEnd()}for(var f=0;f<n.children.length;f++)this.renderItems(n.children[f])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,a){for(var i=0;i<a.children.length;i++)n.count++,this.count_r(n,a.children[i]);return n.count}}])})(Gt.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,a,i,o,l){var u,f=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,u=(function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),N=p.length,w={width:0,height:0,numcomponents:1},j=4;j<N;j+=2){if(j+=m,t.indexOf(p.charCodeAt(j+1))!==-1){v=256*p.charCodeAt(j+5)+p.charCodeAt(j+6),w={width:256*p.charCodeAt(j+7)+p.charCodeAt(j+8),height:v,numcomponents:p.charCodeAt(j+9)};break}m=256*p.charCodeAt(j+2)+p.charCodeAt(j+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),u.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:r,width:u.width,height:u.height,colorSpace:l,bitsPerComponent:8,filter:f,index:n,alias:a}}return h}})(Gt.API),Gt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var a,i=pK(e,{checkCrc:!0}),o=i.width,l=i.height,u=i.channels,f=i.palette,h=i.depth;a=f&&u===1?(function(F){for(var T=F.width,z=F.height,U=F.data,B=F.palette,K=F.depth,V=!1,de=[],se=[],Y=void 0,W=!1,ee=0,ge=0;ge<B.length;ge++){var re=nS(B[ge],4),L=re[0],q=re[1],J=re[2],ne=re[3];de.push(L,q,J),ne!=null&&(ne===0?(ee++,se.length<1&&se.push(ge)):ne<255&&(W=!0))}if(W||ee>1){V=!0,se=void 0;var ue=T*z;Y=new Uint8Array(ue);for(var ie=new DataView(U.buffer),oe=0;oe<ue;oe++){var le=$1(ie,oe,K),ye=nS(B[le],4)[3];Y[oe]=ye}}else ee===0&&(se=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:V?8:void 0,colorBytes:U,alphaBytes:Y,needSMask:V,palette:de,mask:se}})(i):u===2||u===4?(function(F){for(var T=F.data,z=F.width,U=F.height,B=F.channels,K=F.depth,V=B===2?"DeviceGray":"DeviceRGB",de=B-1,se=z*U,Y=de,W=se*Y,ee=1*se,ge=Math.ceil(W*K/8),re=Math.ceil(ee*K/8),L=new Uint8Array(ge),q=new Uint8Array(re),J=new DataView(T.buffer),ne=new DataView(L.buffer),ue=new DataView(q.buffer),ie=!1,oe=0;oe<se;oe++){for(var le=oe*B,ye=0;ye<Y;ye++)l4(ne,$1(J,le+ye,K),oe*Y+ye,K);var Pe=$1(J,le+Y,K);Pe<(1<<K)-1&&(ie=!0),l4(ue,Pe,1*oe,K)}return{colorSpace:V,colorsPerPixel:de,sMaskBitsPerComponent:ie?K:void 0,colorBytes:L,alphaBytes:q,needSMask:ie}})(i):(function(F){var T=F.data,z=F.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:z,colorsPerPixel:z==="DeviceGray"?1:3,colorBytes:T instanceof Uint16Array?(function(U){for(var B=U.length,K=new Uint8Array(2*B),V=new DataView(K.buffer,K.byteOffset,K.byteLength),de=0;de<B;de++)V.setUint16(2*de,U[de],!1);return K})(T):T,needSMask:!1}})(i);var p,v,m,N=a,w=N.colorSpace,j=N.colorsPerPixel,_=N.sMaskBitsPerComponent,C=N.colorBytes,k=N.alphaBytes,E=N.needSMask,I=N.palette,D=N.mask,O=null;return n!==Gt.API.image_compression.NONE&&typeof Zw=="function"?(O=(function(F){var T;switch(F){case Gt.API.image_compression.FAST:T=11;break;case Gt.API.image_compression.MEDIUM:T=13;break;case Gt.API.image_compression.SLOW:T=14;break;default:T=12}return T})(n),p=this.decode.FLATE_DECODE,v="/Predictor ".concat(O," /Colors ").concat(j," /BitsPerComponent ").concat(h," /Columns ").concat(o),e=n4(C,Math.ceil(o*j*h/8),j,h,n),E&&(m=n4(k,Math.ceil(o*_/8),1,_,n))):(p=void 0,v=void 0,e=C,E&&(m=k)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:e,index:t,filter:p,decodeParameters:v,transparency:D,palette:I,sMask:m,predictor:O,width:o,height:l,bitsPerComponent:h,sMaskBitsPerComponent:_,colorSpace:w}}},(function(e){e.processGIF89A=function(t,r,n,a){var i=new OK(t),o=i.width,l=i.height,u=[];i.decodeAndBlitFrameRGBA(0,u);var f={data:u,width:o,height:l},h=new z1(100).encode(f,100);return e.processJPEG.call(this,h,r,n,a)},e.processGIF87A=e.processGIF89A})(Gt.API),Ao.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:a,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Ao.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){gn.log("bit decode error:"+r)}},Ao.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,a=0;a<t;a++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*a*4,l=0;l<8&&8*a+l<this.width;l++){var u=this.palette[i>>7-l&1];this.data[o+4*l]=u.blue,this.data[o+4*l+1]=u.green,this.data[o+4*l+2]=u.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},Ao.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<e;a++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*a*4,l=i>>4,u=15&i,f=this.palette[l];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*a+1>=this.width)break;f=this.palette[u],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},Ao.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var a=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(a<this.palette.length){var o=this.palette[a];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}e!==0&&(this.pos+=4-e)}},Ao.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&t)/t*255|0,l=(i>>5&t)/t*255|0,u=(i>>10&t)/t*255|0,f=i>>15?255:0,h=n*this.width*4+4*a;this.data[h]=u,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=f}this.pos+=e}},Ao.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var a=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,u=(o>>5&r)/r*255|0,f=(o>>11)/t*255|0,h=a*this.width*4+4*i;this.data[h]=f,this.data[h+1]=u,this.data[h+2]=l,this.data[h+3]=255}this.pos+=e}},Ao.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=i,this.data[o+1]=a,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Ao.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=i,this.data[l+1]=a,this.data[l+2]=n,this.data[l+3]=o}},Ao.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,a){var i=new Ao(t,!1),o=i.width,l=i.height,u={data:i.getData(),width:o,height:l},f=new z1(100).encode(u,100);return e.processJPEG.call(this,f,r,n,a)}})(Gt.API),u4.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,a){var i=new u4(t),o=i.width,l=i.height,u={data:i.getData(),width:o,height:l},f=new z1(100).encode(u,100);return e.processJPEG.call(this,f,r,n,a)}})(Gt.API),Gt.API.processRGBA=function(e,t,r){for(var n=e.data,a=n.length,i=new Uint8Array(a/4*3),o=new Uint8Array(a/4),l=0,u=0,f=0;f<a;f+=4){var h=n[f],p=n[f+1],v=n[f+2],m=n[f+3];i[l++]=h,i[l++]=p,i[l++]=v,o[u++]=m}var N=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:N,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Gt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},uh=Gt.API,Cv=uh.getCharWidthsArray=function(e,t){var r,n,a=(t=t||{}).font||this.internal.getFont(),i=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:a.metadata.Unicode.widths,u=l.fof?l.fof:1,f=t.kerning?t.kerning:a.metadata.Unicode.kerning,h=f.fof?f.fof:1,p=t.doKerning!==!1,v=0,m=e.length,N=0,w=l[0]||u,j=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof a.metadata.widthOfString=="function"?j.push((a.metadata.widthOfGlyph(a.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(v=p&&cn(f[n])==="object"&&!isNaN(parseInt(f[n][N],10))?f[n][N]/h:0,j.push((l[n]||w)/u+v)),N=n;return j},e4=uh.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),a=t.charSpace||this.internal.getCharSpace();return uh.processArabic&&(e=uh.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,a)/r:Cv.apply(this,arguments).reduce(function(i,o){return i+o},0)},t4=function(e,t,r,n){for(var a=[],i=0,o=e.length,l=0;i!==o&&l+t[i]<r;)l+=t[i],i++;a.push(e.slice(0,i));var u=i;for(l=0;i!==o;)l+t[i]>n&&(a.push(e.slice(u,i)),l=0,u=i),l+=t[i],i++;return u!==i&&a.push(e.slice(u,i)),a},r4=function(e,t,r){r||(r={});var n,a,i,o,l,u,f,h=[],p=[h],v=r.textIndent||0,m=0,N=0,w=e.split(" "),j=Cv.apply(this,[" ",r])[0];if(u=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var _=Array(u).join(" "),C=[];w.map(function(E){(E=E.split(/\s*\n/)).length>1?C=C.concat(E.map(function(I,D){return(D&&I.length?`
`:"")+I})):C.push(E[0])}),w=C,u=e4.apply(this,[_,r])}for(i=0,o=w.length;i<o;i++){var k=0;if(n=w[i],u&&n[0]==`
`&&(n=n.substr(1),k=1),v+m+(N=(a=Cv.apply(this,[n,r])).reduce(function(E,I){return E+I},0))>t||k){if(N>t){for(l=t4.apply(this,[n,a,t-(v+m),t]),h.push(l.shift()),h=[l.pop()];l.length;)p.push([l.shift()]);N=a.slice(n.length-(h[0]?h[0].length:0)).reduce(function(E,I){return E+I},0)}else h=[n];p.push(h),v=N+u,m=j}else h.push(n),v+=m+N,m=j}return f=u?function(E,I){return(I?_:"")+E.join(" ")}:function(E){return E.join(" ")},p.map(f)},uh.splitTextToSize=function(e,t,r){var n,a=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle),v="Unicode";return p.metadata[v]?{widths:p.metadata[v].widths||{0:1},kerning:p.metadata[v].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/a;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/a:0,i.lineIndent=r.lineIndent;var l,u,f=[];for(l=0,u=n.length;l<u;l++)f=f.concat(r4.apply(this,[n[l],o,i]));return f},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},a={},i=0;i<16;i++)n[r[i]]=t[i],a[t[i]]=r[i];var o=function(v){return"0x"+parseInt(v,10).toString(16)},l=e.__fontmetrics__.compress=function(v){var m,N,w,j,_=["{"];for(var C in v){if(m=v[C],isNaN(parseInt(C,10))?N="'"+C+"'":(C=parseInt(C,10),N=(N=o(C).slice(2)).slice(0,-1)+a[N.slice(-1)]),typeof m=="number")m<0?(w=o(m).slice(3),j="-"):(w=o(m).slice(2),j=""),w=j+w.slice(0,-1)+a[w.slice(-1)];else{if(cn(m)!=="object")throw new Error("Don't know what to do with value type "+cn(m)+".");w=l(m)}_.push(N+w)}return _.push("}"),_.join("")},u=e.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,N,w,j,_={},C=1,k=_,E=[],I="",D="",O=v.length-1,F=1;F<O;F+=1)(j=v[F])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(j):j=="{"?(E.push([k,w]),k={},w=void 0):j=="}"?((N=E.pop())[0][N[1]]=k,w=void 0,k=N[0]):j=="-"?C=-1:w===void 0?n.hasOwnProperty(j)?(I+=n[j],w=parseInt(I,16)*C,C=1,I=""):I+=j:n.hasOwnProperty(j)?(D+=n[j],k[w]=parseInt(D,16)*C,C=1,w=void 0,D=""):D+=j;return _},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:u("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},p={Unicode:{"Courier-Oblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":u("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":u("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:u("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":u("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:u("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":u("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":u("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":u("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":u("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(v){var m=v.font,N=p.Unicode[m.postScriptName];N&&(m.metadata.Unicode={},m.metadata.Unicode.widths=N.widths,m.metadata.Unicode.kerning=N.kerning);var w=h.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(Gt.API),(function(e){var t=function(r){for(var n=r.length,a=new Uint8Array(n),i=0;i<n;i++)a[i]=r.charCodeAt(i);return a};e.API.events.push(["addFont",function(r){var n=void 0,a=r.font,i=r.instance;if(!a.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");if(typeof(n=i.existsFileInVFS(a.postScriptName)===!1?i.loadFile(a.postScriptName):i.getFileFromVFS(a.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+a.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(Uv(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(a,n)}}])})(Gt),Gt.API.addSvgAsImage=function(e,t,r,n,a,i,o,l){if(isNaN(t)||isNaN(r))throw gn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(a))throw gn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=n,u.height=a;var f=u.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,u.width,u.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(hr.canvg?Promise.resolve(hr.canvg):Al(()=>import("./index.es-DS1LjBQi.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(f,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){p.addImage(u.toDataURL("image/jpeg",1),t,r,n,a,o,l)})},Gt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var a=0;a<this.internal.pages[n].length;a++)this.internal.pages[n][a]=this.internal.pages[n][a].replace(t,r);return this},Gt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,a,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),u=[],f=0,h=0,p=0;function v(N,w){var j,_=!1;for(j=0;j<N.length;j+=1)N[j]===w&&(_=!0);return _}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(p=0;p<m;p+=1)r[l[p]].value=r[l[p]].defaultValue,r[l[p]].explicitSet=!1}if(cn(e)==="object"){for(a in e)if(i=e[a],v(l,a)&&i!==void 0){if(r[a].type==="boolean"&&typeof i=="boolean")r[a].value=i;else if(r[a].type==="name"&&v(r[a].valueSet,i))r[a].value=i;else if(r[a].type==="integer"&&Number.isInteger(i))r[a].value=i;else if(r[a].type==="array"){for(f=0;f<i.length;f+=1)if(n=!0,i[f].length===1&&typeof i[f][0]=="number")u.push(String(i[f]-1));else if(i[f].length>1){for(h=0;h<i[f].length;h+=1)typeof i[f][h]!="number"&&(n=!1);n===!0&&u.push([i[f][0]-1,i[f][1]-1].join(" "))}r[a].value="["+u.join(" ")+"]"}else r[a].value=r[a].defaultValue;r[a].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var N,w=[];for(N in r)r[N].explicitSet===!0&&(r[N].type==="name"?w.push("/"+N+" /"+r[N].value):w.push("/"+N+" "+r[N].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',a=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),u=unescape(encodeURIComponent("</x:xmpmeta>")),f=i.length+o.length+l.length+a.length+u.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(a+i+o+l+u),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,a){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:a||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Gt.API),(function(e){var t=e.API,r=t.pdfEscape16=function(i,o){for(var l,u=o.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],p=0,v=i.length;p<v;++p){if(l=o.metadata.characterToGlyph(i.charCodeAt(p)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=i.charCodeAt(p),u.indexOf(l)==-1&&(u.push(l),u.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(f[4-l.length],l)}return h.join("")},n=function(i){var o,l,u,f,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,u=[],p=0,v=(l=Object.keys(i).sort(function(m,N){return m-N})).length;p<v;p++)o=l[p],u.length>=100&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar`,u=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(f=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),u.push("<"+o+"><"+f+">"));return u.length&&(h+=`
`+u.length+` beginbfchar
`+u.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(i){(function(o){var l=o.font,u=o.out,f=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,v=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",N=0;N<v.length;N++)m+=String.fromCharCode(v[N]);var w=f();h({data:m,addLength1:!0,objectId:w}),u("endobj");var j=f();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:j}),u("endobj");var _=f();u("<<"),u("/Type /FontDescriptor"),u("/FontName /"+ph(l.fontName)),u("/FontFile2 "+w+" 0 R"),u("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),u("/Flags "+l.metadata.flags),u("/StemV "+l.metadata.stemV),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u(">>"),u("endobj");var C=f();u("<<"),u("/Type /Font"),u("/BaseFont /"+ph(l.fontName)),u("/FontDescriptor "+_+" 0 R"),u("/W "+e.API.PDFObject.convert(p)),u("/CIDToGIDMap /Identity"),u("/DW 1000"),u("/Subtype /CIDFontType2"),u("/CIDSystemInfo"),u("<<"),u("/Supplement 0"),u("/Registry (Adobe)"),u("/Ordering ("+l.encoding+")"),u(">>"),u(">>"),u("endobj"),l.objectNumber=f(),u("<<"),u("/Type /Font"),u("/Subtype /Type0"),u("/ToUnicode "+j+" 0 R"),u("/BaseFont /"+ph(l.fontName)),u("/Encoding /"+l.encoding),u("/DescendantFonts ["+C+" 0 R]"),u(">>"),u("endobj"),l.isAlreadyPutted=!0}})(i)}]),t.events.push(["putFont",function(i){(function(o){var l=o.font,u=o.out,f=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var N=f();h({data:v,addLength1:!0,objectId:N}),u("endobj");var w=f();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),u("endobj");var j=f();u("<<"),u("/Descent "+l.metadata.decender),u("/CapHeight "+l.metadata.capHeight),u("/StemV "+l.metadata.stemV),u("/Type /FontDescriptor"),u("/FontFile2 "+N+" 0 R"),u("/Flags 96"),u("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),u("/FontName /"+ph(l.fontName)),u("/ItalicAngle "+l.metadata.italicAngle),u("/Ascent "+l.metadata.ascender),u(">>"),u("endobj"),l.objectNumber=f();for(var _=0;_<l.metadata.hmtx.widths.length;_++)l.metadata.hmtx.widths[_]=parseInt(l.metadata.hmtx.widths[_]*(1e3/l.metadata.head.unitsPerEm));u("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+ph(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),u("endobj"),l.isAlreadyPutted=!0}})(i)}]);var a=function(i){var o,l=i.text||"",u=i.x,f=i.y,h=i.options||{},p=i.mutex||{},v=p.pdfEscape,m=p.activeFontKey,N=p.fonts,w=m,j="",_=0,C="",k=N[w].encoding;if(N[w].encoding!=="Identity-H")return{text:l,x:u,y:f,options:h,mutex:p};for(C=l,w=m,Array.isArray(l)&&(C=l[0]),_=0;_<C.length;_+=1)N[w].metadata.hasOwnProperty("cmap")&&(o=N[w].metadata.cmap.unicode.codeMap[C[_].charCodeAt(0)]),o||C[_].charCodeAt(0)<256&&N[w].metadata.hasOwnProperty("Unicode")?j+=C[_]:j+="";var E="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?E=v(j,w).split("").map(function(I){return I.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(E=r(j,N[w])),p.isHex=!0,{text:E,x:u,y:f,options:h,mutex:p}};t.events.push(["postProcessText",function(i){var o=i.text||"",l=[],u={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?l.push([a(Object.assign({},u,{text:o[f][0]})).text,o[f][1],o[f][2]]):l.push(a(Object.assign({},u,{text:o[f]})).text);i.text=l}else i.text=a(Object.assign({},u,{text:o})).text}])})(Gt),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Gt.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var a,i,o,l,u,f,h,p=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],N={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],_=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),C=!1,k=0;this.__bidiEngine__={};var E=function(U){var B=U.charCodeAt(),K=B>>8,V=w[K];return V!==void 0?p[256*V+(255&B)]:K===252||K===253?"AL":_.test(K)?"L":K===8?"R":"N"},I=function(U){for(var B,K=0;K<U.length;K++){if((B=E(U.charAt(K)))==="L")return!1;if(B==="R")return!0}return!1},D=function(U,B,K,V){var de,se,Y,W,ee=B[V];switch(ee){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":C=!1;break;case"N":case"AN":break;case"EN":C&&(ee="AN");break;case"AL":C=!0,ee="R";break;case"WS":case"BN":ee="N";break;case"CS":V<1||V+1>=B.length||(de=K[V-1])!=="EN"&&de!=="AN"||(se=B[V+1])!=="EN"&&se!=="AN"?ee="N":C&&(se="AN"),ee=se===de?se:"N";break;case"ES":ee=(de=V>0?K[V-1]:"B")==="EN"&&V+1<B.length&&B[V+1]==="EN"?"EN":"N";break;case"ET":if(V>0&&K[V-1]==="EN"){ee="EN";break}if(C){ee="N";break}for(Y=V+1,W=B.length;Y<W&&B[Y]==="ET";)Y++;ee=Y<W&&B[Y]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(W=B.length,Y=V+1;Y<W&&B[Y]==="NSM";)Y++;if(Y<W){var ge=U[V],re=ge>=1425&&ge<=2303||ge===64286;if(de=B[Y],re&&(de==="R"||de==="AL")){ee="R";break}}}ee=V<1||(de=B[V-1])==="B"?"N":K[V-1];break;case"B":C=!1,a=!0,ee=k;break;case"S":i=!0,ee="N"}return ee},O=function(U,B,K){var V=U.split("");return K&&F(V,K,{hiLevel:k}),V.reverse(),B&&B.reverse(),V.join("")},F=function(U,B,K){var V,de,se,Y,W,ee=-1,ge=U.length,re=0,L=[],q=k?m:v,J=[];for(C=!1,a=!1,i=!1,de=0;de<ge;de++)J[de]=E(U[de]);for(se=0;se<ge;se++){if(W=re,L[se]=D(U,J,L,se),V=240&(re=q[W][N[L[se]]]),re&=15,B[se]=Y=q[re][5],V>0)if(V===16){for(de=ee;de<se;de++)B[de]=1;ee=-1}else ee=-1;if(q[re][6])ee===-1&&(ee=se);else if(ee>-1){for(de=ee;de<se;de++)B[de]=Y;ee=-1}J[se]==="B"&&(B[se]=0),K.hiLevel|=Y}i&&(function(ne,ue,ie){for(var oe=0;oe<ie;oe++)if(ne[oe]==="S"){ue[oe]=k;for(var le=oe-1;le>=0&&ne[le]==="WS";le--)ue[le]=k}})(J,B,ge)},T=function(U,B,K,V,de){if(!(de.hiLevel<U)){if(U===1&&k===1&&!a)return B.reverse(),void(K&&K.reverse());for(var se,Y,W,ee,ge=B.length,re=0;re<ge;){if(V[re]>=U){for(W=re+1;W<ge&&V[W]>=U;)W++;for(ee=re,Y=W-1;ee<Y;ee++,Y--)se=B[ee],B[ee]=B[Y],B[Y]=se,K&&(se=K[ee],K[ee]=K[Y],K[Y]=se);re=W}re++}}},z=function(U,B,K){var V=U.split(""),de={hiLevel:k};return K||(K=[]),F(V,K,de),(function(se,Y,W){if(W.hiLevel!==0&&h)for(var ee,ge=0;ge<se.length;ge++)Y[ge]===1&&(ee=j.indexOf(se[ge]))>=0&&(se[ge]=j[ee+1])})(V,K,de),T(2,V,B,K,de),T(1,V,B,K,de),V.join("")};return this.__bidiEngine__.doBidiReorder=function(U,B,K){if((function(de,se){if(se)for(var Y=0;Y<de.length;Y++)se[Y]=Y;l===void 0&&(l=I(de)),f===void 0&&(f=I(de))})(U,B),o||!u||f)if(o&&u&&l^f)k=l?1:0,U=O(U,B,K);else if(!o&&u&&f)k=l?1:0,U=z(U,B,K),U=O(U,B);else if(!o||l||u||f){if(o&&!u&&l^f)U=O(U,B),l?(k=0,U=z(U,B,K)):(k=1,U=z(U,B,K),U=O(U,B));else if(o&&l&&!u&&f)k=1,U=z(U,B,K),U=O(U,B);else if(!o&&!u&&l^f){var V=h;l?(k=1,U=z(U,B,K),k=0,h=!1,U=z(U,B,K),h=V):(k=0,U=z(U,B,K),U=O(U,B),k=1,h=!1,U=z(U,B,K),h=V,U=O(U,B))}}else k=0,U=z(U,B,K);else k=l?1:0,U=z(U,B,K);return U},this.__bidiEngine__.setOptions=function(U){U&&(o=U.isInputVisual,u=U.isOutputVisual,l=U.isInputRtl,f=U.isOutputRtl,h=U.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var a=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(a)==="[object Array]"){var l=0;for(o=[],l=0;l<a.length;l+=1)Object.prototype.toString.call(a[l])==="[object Array]"?o.push([r.doBidiReorder(a[l][0]),a[l][1],a[l][2]]):o.push([r.doBidiReorder(a[l])]);n.text=o}else n.text=r.doBidiReorder(a);r.setOptions({isInputVisual:!0})}])})(Gt),Gt.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Hu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new JK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new MK(this.contents),this.head=new BK(this),this.name=new VK(this),this.cmap=new z6(this),this.toUnicode={},this.hhea=new UK(this),this.maxp=new WK(this),this.hmtx=new HK(this),this.post=new zK(this),this.os2=new $K(this),this.loca=new QK(this),this.glyf=new GK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,a,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,u,f;for(f=[],o=0,l=(u=this.bbox).length;o<l;o++)t=u[o],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(n=255&(a=this.post.italic_angle),32768&(r=a>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var a,i,o,l;for(o=0,i=0,l=(t=""+t).length;0<=l?i<l:i>l;i=0<=l?++i:--i)a=t.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(a))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var el,Hu=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,a;for(a=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)a.push(this.writeByte(t.charCodeAt(r)));return a},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,a,i,o,l,u;return t=this.readByte(),r=this.readByte(),n=this.readByte(),a=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),u=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^a)+16777216*(255^i)+65536*(255^o)+256*(255^l)+(255^u)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*a+16777216*i+65536*o+256*l+u},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,a,i;for(i=[],n=0,a=t.length;n<a;n++)r=t[n],i.push(this.writeByte(r));return i},e})(),MK=(function(){var e;function t(r){var n,a,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},a=0,i=this.tableCount;0<=i?a<i:a>i;a=0<=i?++a:--a)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,a,i,o,l,u,f,h,p,v,m,N,w;for(w in m=Object.keys(r).length,u=Math.log(2),p=16*Math.floor(Math.log(m)/u),o=Math.floor(p/u),h=16*m-p,(a=new Hu).writeInt(this.scalarType),a.writeShort(m),a.writeShort(p),a.writeShort(o),a.writeShort(h),i=16*m,f=a.pos+i,l=null,N=[],r)for(v=r[w],a.writeString(w),a.writeInt(e(v)),a.writeInt(f),a.writeInt(v.length),N=N.concat(v),w==="head"&&(l=f),f+=v.length;f%4;)N.push(0),f++;return a.write(N),n=2981146554-e(a.data),a.pos=l+8,a.writeUInt32(n),a.data},e=function(r){var n,a,i,o;for(r=q6.call(r);r.length%4;)r.push(0);for(i=new Hu(r),a=0,n=0,o=r.length;n<o;n=n+=4)a+=i.readUInt32();return 4294967295&a},t})(),FK={}.hasOwnProperty,Ul=function(e,t){for(var r in t)FK.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};el=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var BK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Hu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),d4=(function(){function e(t,r){var n,a,i,o,l,u,f,h,p,v,m,N,w,j,_,C,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(u=0;u<256;++u)this.codeMap[u]=t.readByte();break;case 4:for(m=t.readUInt16(),v=m/2,t.pos+=6,i=(function(){var E,I;for(I=[],u=E=0;0<=v?E<v:E>v;u=0<=v?++E:--E)I.push(t.readUInt16());return I})(),t.pos+=2,w=(function(){var E,I;for(I=[],u=E=0;0<=v?E<v:E>v;u=0<=v?++E:--E)I.push(t.readUInt16());return I})(),f=(function(){var E,I;for(I=[],u=E=0;0<=v?E<v:E>v;u=0<=v?++E:--E)I.push(t.readUInt16());return I})(),h=(function(){var E,I;for(I=[],u=E=0;0<=v?E<v:E>v;u=0<=v?++E:--E)I.push(t.readUInt16());return I})(),a=(this.length-t.pos+this.offset)/2,l=(function(){var E,I;for(I=[],u=E=0;0<=a?E<a:E>a;u=0<=a?++E:--E)I.push(t.readUInt16());return I})(),u=_=0,k=i.length;_<k;u=++_)for(j=i[u],n=C=N=w[u];N<=j?C<=j:C>=j;n=N<=j?++C:--C)h[u]===0?o=n+f[u]:(o=l[h[u]/2+(n-N)-(v-u)]||0)!==0&&(o+=f[u]),this.codeMap[n]=65535&o}t.pos=p}return e.encode=function(t,r){var n,a,i,o,l,u,f,h,p,v,m,N,w,j,_,C,k,E,I,D,O,F,T,z,U,B,K,V,de,se,Y,W,ee,ge,re,L,q,J,ne,ue,ie,oe,le,ye,Pe,We;switch(V=new Hu,o=Object.keys(t).sort(function(Fe,je){return Fe-je}),r){case"macroman":for(w=0,j=(function(){var Fe=[];for(N=0;N<256;++N)Fe.push(0);return Fe})(),C={0:0},i={},de=0,ee=o.length;de<ee;de++)C[le=t[a=o[de]]]==null&&(C[le]=++w),i[a]={old:t[a],new:C[t[a]]},j[a]=C[t[a]];return V.writeUInt16(1),V.writeUInt16(0),V.writeUInt32(12),V.writeUInt16(0),V.writeUInt16(262),V.writeUInt16(0),V.write(j),{charMap:i,subtable:V.data,maxGlyphID:w+1};case"unicode":for(B=[],p=[],k=0,C={},n={},_=f=null,se=0,ge=o.length;se<ge;se++)C[I=t[a=o[se]]]==null&&(C[I]=++k),n[a]={old:I,new:C[I]},l=C[I]-a,_!=null&&l===f||(_&&p.push(_),B.push(a),f=l),_=a;for(_&&p.push(_),p.push(65535),B.push(65535),z=2*(T=B.length),F=2*Math.pow(Math.log(T)/Math.LN2,2),v=Math.log(F/2)/Math.LN2,O=2*T-F,u=[],D=[],m=[],N=Y=0,re=B.length;Y<re;N=++Y){if(U=B[N],h=p[N],U===65535){u.push(0),D.push(0);break}if(U-(K=n[U].new)>=32768)for(u.push(0),D.push(2*(m.length+T-N)),a=W=U;U<=h?W<=h:W>=h;a=U<=h?++W:--W)m.push(n[a].new);else u.push(K-U),D.push(0)}for(V.writeUInt16(3),V.writeUInt16(1),V.writeUInt32(12),V.writeUInt16(4),V.writeUInt16(16+8*T+2*m.length),V.writeUInt16(0),V.writeUInt16(z),V.writeUInt16(F),V.writeUInt16(v),V.writeUInt16(O),ie=0,L=p.length;ie<L;ie++)a=p[ie],V.writeUInt16(a);for(V.writeUInt16(0),oe=0,q=B.length;oe<q;oe++)a=B[oe],V.writeUInt16(a);for(ye=0,J=u.length;ye<J;ye++)l=u[ye],V.writeUInt16(l);for(Pe=0,ne=D.length;Pe<ne;Pe++)E=D[Pe],V.writeUInt16(E);for(We=0,ue=m.length;We<ue;We++)w=m[We],V.writeUInt16(w);return{charMap:n,subtable:V.data,maxGlyphID:k+1}}},e})(),z6=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,a;for(t.pos=this.offset,this.version=t.readUInt16(),a=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=a?n<a:n>a;n=0<=a?++n:--n)r=new d4(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,a;return r==null&&(r="macroman"),n=d4.encode(t,r),(a=new Hu).writeUInt16(0),a.writeUInt16(1),n.table=a.data.concat(n.subtable),n},e})(),UK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),$K=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),zK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,a;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=t.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],a=[];t.pos<this.offset+this.length;)r=t.readByte(),a.push(this.names.push(t.readString(r)));return a;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,l,u;for(u=[],i=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;i=0<=l?++o:--o)u.push(t.readUInt32());return u}).call(this)}},e})(),qK=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},VK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,a,i,o,l,u,f,h,p,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(u={},i=h=0,p=n.length;h<p;i=++h)a=n[i],t.pos=a.offset,f=t.readString(a.length),o=new qK(f,a),u[v=a.nameID]==null&&(u[v]=[]),u[a.nameID].push(o);this.strings=u,this.copyright=u[0],this.fontFamily=u[1],this.fontSubfamily=u[2],this.uniqueSubfamily=u[3],this.fontName=u[4],this.version=u[5];try{this.postscriptName=u[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=u[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=u[7],this.manufacturer=u[8],this.designer=u[9],this.description=u[10],this.vendorUrl=u[11],this.designerUrl=u[12],this.license=u[13],this.licenseUrl=u[14],this.preferredFamily=u[15],this.preferredSubfamily=u[17],this.compatibleFull=u[18],this.sampleText=u[19]},e})(),WK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),HK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,a,i,o,l,u;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,h;for(h=[],r=f=0;0<=a?f<a:f>a;r=0<=a?++f:--f)h.push(t.readInt16());return h})(),this.widths=(function(){var f,h,p,v;for(v=[],f=0,h=(p=this.metrics).length;f<h;f++)i=p[f],v.push(i.advance);return v}).call(this),n=this.widths[this.widths.length-1],u=[],r=o=0;0<=a?o<a:o>a;r=0<=a?++o:--o)u.push(this.widths.push(n));return u},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),q6=[].slice,GK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,a,i,o,l,u,f,h,p;return t in this.cache?this.cache[t]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(t),(a=i.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new Hu(r.read(a))).readShort(),f=l.readShort(),p=l.readShort(),u=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new YK(l,f,p,u,h):new KK(l,o,f,p,u,h),this.cache[t]))},e.prototype.encode=function(t,r,n){var a,i,o,l,u;for(o=[],i=[],l=0,u=r.length;l<u;l++)a=t[r[l]],i.push(o.length),a&&(o=o.concat(a.encode(n)));return i.push(o.length),{table:o,offsets:i}},e})(),KK=(function(){function e(t,r,n,a,i,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=a,this.xMax=i,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),YK=(function(){function e(t,r,n,a,i){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=a,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Hu(q6.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),QK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Ul(e,el),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=2)i.push(2*t.readUInt16());return i}).call(this):(function(){var a,i;for(i=[],n=0,a=this.length;n<a;n+=4)i.push(t.readUInt32());return i}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),a=0,i=0,o=0;o<n.length;++o)if(n[o]=a,i<r.length&&r[i]==o){++i,n[o]=a;var l=this.offsets[o],u=this.offsets[o+1]-l;u>0&&(a+=u)}for(var f=new Array(4*n.length),h=0;h<n.length;++h)f[4*h+3]=255&n[h],f[4*h+2]=(65280&n[h])>>8,f[4*h+1]=(16711680&n[h])>>16,f[4*h]=(4278190080&n[h])>>24;return f},e})(),JK=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,a,i;for(r in a=this.font.cmap.tables[0].codeMap,t={},i=this.subset)n=i[r],t[r]=a[n];return t},e.prototype.glyphsFor=function(t){var r,n,a,i,o,l,u;for(a={},o=0,l=t.length;o<l;o++)a[i=t[o]]=this.font.glyf.glyphFor(i);for(i in r=[],a)(n=a[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in u=this.glyphsFor(r))n=u[i],a[i]=n;return a},e.prototype.encode=function(t,r){var n,a,i,o,l,u,f,h,p,v,m,N,w,j,_;for(a in n=z6.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},_=n.charMap)m[(u=_[a]).old]=u.new;for(N in v=n.maxGlyphID,o)N in m||(m[N]=v++);return h=(function(C){var k,E;for(k in E={},C)E[C[k]]=k;return E})(m),p=Object.keys(h).sort(function(C,k){return C-k}),w=(function(){var C,k,E;for(E=[],C=0,k=p.length;C<k;C++)l=p[C],E.push(h[l]);return E})(),i=this.font.glyf.encode(o,w,m),f=this.font.loca.encode(i.offsets,w),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},e})();Gt.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,a,i,o;if(Array.isArray(r))return"["+(function(){var l,u,f;for(f=[],l=0,u=r.length;l<u;l++)n=r[l],f.push(t.convert(n));return f})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(a in i=["<<"],r)o=r[a],i.push("/"+a+" "+t.convert(o));return i.push(">>"),i.join(`
`)}return""+r},t})();class ZK{type="pdf";name;capabilities;settings;constructor(t="PDF Export",r){this.name=t,this.settings={type:"pdf",name:t,paperWidth:50,paperHeight:50,defaultQuantity:1,...r},this.capabilities={supportsZPL:!1,supportsPDF:!0,supportsColor:!0,maxWidth:210,maxHeight:297}}async connect(){return!0}async disconnect(){}isConnected(){return!0}async print(t){try{const r=await this.createPDF([t]),n=`label_${t.productName.replace(/\s+/g,"_")}_${Date.now()}.pdf`;return r.save(n),!0}catch(r){return console.error("PDF generation error:",r),!1}}async printBatch(t){try{const r=await this.createPDF(t),n=new Date().toISOString().split("T")[0];return r.save(`labels_batch_${n}_${t.length}items.pdf`),!0}catch(r){return console.error("PDF batch generation error:",r),!1}}getSettings(){return{...this.settings}}async updateSettings(t){this.settings={...this.settings,...t}}async getStatus(){return{isReady:!0,paperOut:!1}}async createPDF(t){const r=new Gt({orientation:"portrait",unit:"mm",format:"a4"});for(let n=0;n<t.length;n++)n>0&&r.addPage(),await this.renderLabel(r,t[n]);return r}async renderLabel(t,r){try{const n=await this.convertToLabelPrintData(r),a=await Wu(n),i={labelId:a||void 0,categoryId:n.categoryId||"",categoryName:n.categoryName,subcategoryId:void 0,subcategoryName:r.subcategoryName,productId:n.productId,productName:n.productName,condition:n.condition,preparedBy:n.preparedBy,preparedByName:n.preparedByName,prepDate:n.prepDate,expiryDate:n.expiryDate,quantity:n.quantity||"",unit:n.unit||"",batchNumber:n.batchNumber,allergens:n.allergens},o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Failed to get canvas context");const u=600,f=848;o.width=u,o.height=f,await U2(l,i,u,f);const h=o.toDataURL("image/png");t.addImage(h,"PNG",0,0,210,297),console.log(`PDF label rendered successfully. LabelId: ${a}`)}catch(n){throw console.error("Error rendering PDF label:",n),n}}async convertToLabelPrintData(t){const{data:{user:r}}=await Ae.auth.getUser();let n=t.organizationId,a=t.preparedBy,i=t.preparedByName;if(r&&(!n||!a)){const{data:u}=await Ae.from("profiles").select("organization_id, display_name").eq("user_id",r.id).single();u&&(n=n||u.organization_id,a=a||r.id,i=i||u.display_name||"Unknown")}if(!n)throw new Error("Organization ID is required for printing");if(!a||!i)throw new Error("Prepared by information is required for printing");const o=t.condition||t.storageInstructions||"Refrigerate";return{productId:t.productId||null,productName:t.productName,categoryId:t.categoryId||null,categoryName:t.categoryName||"General",preparedBy:a,preparedByName:i,prepDate:t.preparedDate,expiryDate:t.useByDate,condition:o,organizationId:n,quantity:t.quantity,unit:t.unit,batchNumber:t.barcode||"",allergens:t.allergens?.map(u=>({id:"",name:typeof u=="string"?u:u.name||"",icon:null,severity:"low"}))}}}class XK{type="zebra";name;capabilities;settings;connected=!1;constructor(t="Zebra Thermal",r){this.name=t,this.settings={type:"zebra",name:t,paperWidth:102,paperHeight:152,darkness:20,speed:4,ipAddress:"192.168.1.100",port:9100,defaultQuantity:1,...r},this.capabilities={supportsZPL:!0,supportsPDF:!1,supportsColor:!1,maxWidth:812,maxHeight:1218}}async connect(){return this.settings.ipAddress?(this.connected=!0,!0):!1}async disconnect(){this.connected=!1}isConnected(){return this.connected}async print(t){try{const r=await this.convertToLabelPrintData(t),n=await lH(r);if(!n.success)throw new Error(n.error||"Print failed");return console.log(`Label printed successfully. LabelId: ${n.labelId}`),!0}catch(r){return console.error("ZPL generation error:",r),!1}}async printBatch(t){try{return(await Promise.all(t.map(n=>this.print(n)))).every(n=>n===!0)}catch(r){return console.error("ZPL batch generation error:",r),!1}}getSettings(){return{...this.settings}}async updateSettings(t){this.settings={...this.settings,...t}}async getStatus(){return{isReady:this.connected,paperOut:!1,ribbonOut:!1}}async convertToLabelPrintData(t){const{data:{user:r}}=await Ae.auth.getUser();let n=t.organizationId,a=t.preparedBy,i=t.preparedByName;if(r&&(!n||!a)){const{data:u}=await Ae.from("profiles").select("organization_id, display_name").eq("user_id",r.id).single();u&&(n=n||u.organization_id,a=a||r.id,i=i||u.display_name||"Unknown")}if(!n)throw new Error("Organization ID is required for printing");if(!a||!i)throw new Error("Prepared by information is required for printing");const o=t.condition||t.storageInstructions||"Refrigerate";return{productId:t.productId||null,productName:t.productName,categoryId:t.categoryId||null,categoryName:t.categoryName||"General",preparedBy:a,preparedByName:i,prepDate:t.preparedDate,expiryDate:t.useByDate,condition:o,organizationId:n,quantity:t.quantity,unit:t.unit,batchNumber:t.barcode||"",allergens:t.allergens?.map(u=>({id:"",name:typeof u=="string"?u:u.name||"",icon:null,severity:"low"}))}}}class Sc{static createPrinter(t,r){switch(t){case"generic":return new cH(r?.name||"Browser Print",r);case"pdf":return new ZK(r?.name||"PDF Export",r);case"zebra":return new XK(r?.name||"Zebra Thermal",r);default:throw new Error(`Unknown printer type: ${t}`)}}static getAvailablePrinters(){return[{type:"generic",name:"Browser Print",description:"Use your browser's print dialog to print labels"},{type:"pdf",name:"PDF Export",description:"Generate PDF files for labels"},{type:"zebra",name:"Zebra Thermal",description:"Direct printing to Zebra thermal printers (ZPL format)"}]}static getDefaultSettings(t){const r={type:t,name:"",paperWidth:102,paperHeight:180,defaultQuantity:1};switch(t){case"generic":return{...r,name:"Browser Print"};case"pdf":return{...r,name:"PDF Export"};case"zebra":return{...r,name:"Zebra Thermal",ipAddress:"192.168.1.100",port:9100,darkness:20,speed:4};default:return r}}}const f4="printer_settings";function jf(){const{toast:e}=Er(),[t,r]=x.useState(null),[n,a]=x.useState(null),[i,o]=x.useState(!1);x.useEffect(()=>{(()=>{try{{console.log(" Production mode: Forcing Zebra printer");const _=Sc.getDefaultSettings("zebra");a(_),r(Sc.createPrinter("zebra",_));return}const j=localStorage.getItem(f4);if(j){const _=JSON.parse(j);a(_);const C=Sc.createPrinter(_.type,_);r(C)}else{const _=Sc.getDefaultSettings("generic");a(_),r(Sc.createPrinter("generic",_))}}catch(w){console.error("Failed to load printer settings:",w),e({title:"Settings Error",description:"Failed to load printer settings. Using default.",variant:"destructive"});const j="zebra",_=Sc.getDefaultSettings(j);a(_),r(Sc.createPrinter(j,_))}})()},[e]);const l=x.useCallback(N=>{try{localStorage.setItem(f4,JSON.stringify(N)),a(N);const w=Sc.createPrinter(N.type,N);r(w),e({title:"Settings Saved",description:`Printer configured: ${N.name}`})}catch(w){console.error("Failed to save printer settings:",w),e({title:"Save Error",description:"Failed to save printer settings.",variant:"destructive"})}},[e]),u=x.useCallback(N=>{{console.warn(" Cannot change printer in production. Zebra is the only supported printer."),e({title:"Printer Locked",description:"Zebra printer is required in production environment.",variant:"default"});return}},[l,e]),f=x.useCallback(async N=>{if(!t)return e({title:"Printer Error",description:"No printer configured.",variant:"destructive"}),!1;o(!0);try{const w=await t.print(N);return e(w?{title:"Print Successful",description:`Label for "${N.productName}" sent to printer.`}:{title:"Print Failed",description:"Failed to print label. Please try again.",variant:"destructive"}),w}catch(w){return console.error("Print error:",w),e({title:"Print Error",description:w instanceof Error?w.message:"Unknown error occurred.",variant:"destructive"}),!1}finally{o(!1)}},[t,e]),h=x.useCallback(async N=>{if(!t)return e({title:"Printer Error",description:"No printer configured.",variant:"destructive"}),!1;if(N.length===0)return e({title:"No Labels",description:"No labels to print.",variant:"destructive"}),!1;o(!0);try{const w=await t.printBatch(N);return e(w?{title:"Batch Print Successful",description:`${N.length} labels sent to printer.`}:{title:"Batch Print Failed",description:"Failed to print labels. Please try again.",variant:"destructive"}),w}catch(w){return console.error("Batch print error:",w),e({title:"Batch Print Error",description:w instanceof Error?w.message:"Unknown error occurred.",variant:"destructive"}),!1}finally{o(!1)}},[t,e]),p=x.useCallback(N=>{if(!n)return;const w={...n,...N};l(w)},[n,l]),v=Sc.getAvailablePrinters();return{printer:t,settings:n,isLoading:i,print:f,printBatch:h,changePrinter:u,updateSettings:p,saveSettings:l,availablePrinters:v,isProduction:!0}}var ur=function(){return ur=Object.assign||function(t){for(var r,n=1,a=arguments.length;n<a;n++){r=arguments[n];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])}return t},ur.apply(this,arguments)};function eY(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]]);return r}function V6(e,t,r){for(var n=0,a=t.length,i;n<a;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))}function ag(e){return e.mode==="multiple"}function ig(e){return e.mode==="range"}function y0(e){return e.mode==="single"}var tY={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function rY(e,t){return wr(e,"LLLL y",t)}function nY(e,t){return wr(e,"d",t)}function sY(e,t){return wr(e,"LLLL",t)}function aY(e){return"".concat(e)}function iY(e,t){return wr(e,"cccccc",t)}function oY(e,t){return wr(e,"yyyy",t)}var lY=Object.freeze({__proto__:null,formatCaption:rY,formatDay:nY,formatMonthCaption:sY,formatWeekNumber:aY,formatWeekdayName:iY,formatYearCaption:oY}),cY=function(e,t,r){return wr(e,"do MMMM (EEEE)",r)},uY=function(){return"Month: "},dY=function(){return"Go to next month"},fY=function(){return"Go to previous month"},hY=function(e,t){return wr(e,"cccc",t)},mY=function(e){return"Week n. ".concat(e)},pY=function(){return"Year: "},gY=Object.freeze({__proto__:null,labelDay:cY,labelMonthDropdown:uY,labelNext:dY,labelPrevious:fY,labelWeekNumber:mY,labelWeekday:hY,labelYearDropdown:pY});function vY(){var e="buttons",t=tY,r=j2,n={},a={},i=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:lY,labels:gY,locale:r,modifiersClassNames:n,modifiers:a,numberOfMonths:i,styles:o,today:l,mode:"default"}}function xY(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,a=e.toMonth,i=e.fromDate,o=e.toDate;return n?i=hi(n):t&&(i=new Date(t,0,1)),a?o=o0(a):r&&(o=new Date(r,11,31)),{fromDate:i?ef(i):void 0,toDate:o?ef(o):void 0}}var W6=x.createContext(void 0);function yY(e){var t,r=e.initialProps,n=vY(),a=xY(r),i=a.fromDate,o=a.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!i||!o)&&(l="buttons");var u;(y0(r)||ag(r)||ig(r))&&(u=r.onSelect);var f=ur(ur(ur({},n),r),{captionLayout:l,classNames:ur(ur({},n.classNames),r.classNames),components:ur({},r.components),formatters:ur(ur({},n.formatters),r.formatters),fromDate:i,labels:ur(ur({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:ur(ur({},n.modifiers),r.modifiers),modifiersClassNames:ur(ur({},n.modifiersClassNames),r.modifiersClassNames),onSelect:u,styles:ur(ur({},n.styles),r.styles),toDate:o});return s.jsx(W6.Provider,{value:f,children:e.children})}function _n(){var e=x.useContext(W6);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function H6(e){var t=_n(),r=t.locale,n=t.classNames,a=t.styles,i=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:a.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:i(e.displayMonth,{locale:r})})}function wY(e){return s.jsx("svg",ur({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function G6(e){var t,r,n=e.onChange,a=e.value,i=e.children,o=e.caption,l=e.className,u=e.style,f=_n(),h=(r=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:wY;return s.jsxs("div",{className:l,style:u,children:[s.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:a,onChange:n,children:i}),s.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(h,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function bY(e){var t,r=_n(),n=r.fromDate,a=r.toDate,i=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,u=r.classNames,f=r.components,h=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});var p=[];if(Vq(n,a))for(var v=hi(n),m=n.getMonth();m<=a.getMonth();m++)p.push(Zy(v,m));else for(var v=hi(new Date),m=0;m<=11;m++)p.push(Zy(v,m));var N=function(j){var _=Number(j.target.value),C=Zy(hi(e.displayMonth),_);e.onChange(C)},w=(t=f?.Dropdown)!==null&&t!==void 0?t:G6;return s.jsx(w,{name:"months","aria-label":h(),className:u.dropdown_month,style:i.dropdown_month,onChange:N,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:p.map(function(j){return s.jsx("option",{value:j.getMonth(),children:l(j,{locale:o})},j.getMonth())})})}function jY(e){var t,r=e.displayMonth,n=_n(),a=n.fromDate,i=n.toDate,o=n.locale,l=n.styles,u=n.classNames,f=n.components,h=n.formatters.formatYearCaption,p=n.labels.labelYearDropdown,v=[];if(!a)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});for(var m=a.getFullYear(),N=i.getFullYear(),w=m;w<=N;w++)v.push(wN(iP(new Date),w));var j=function(C){var k=wN(hi(r),Number(C.target.value));e.onChange(k)},_=(t=f?.Dropdown)!==null&&t!==void 0?t:G6;return s.jsx(_,{name:"years","aria-label":p(),className:u.dropdown_year,style:l.dropdown_year,onChange:j,value:r.getFullYear(),caption:h(r,{locale:o}),children:v.map(function(C){return s.jsx("option",{value:C.getFullYear(),children:h(C,{locale:o})},C.getFullYear())})})}function _Y(e,t){var r=x.useState(e),n=r[0],a=r[1],i=t===void 0?n:t;return[i,a]}function NY(e){var t=e.month,r=e.defaultMonth,n=e.today,a=t||r||n||new Date,i=e.toDate,o=e.fromDate,l=e.numberOfMonths,u=l===void 0?1:l;if(i&&Uh(i,a)<0){var f=-1*(u-1);a=Ui(i,f)}return o&&Uh(a,o)<0&&(a=o),hi(a)}function SY(){var e=_n(),t=NY(e),r=_Y(t,e.month),n=r[0],a=r[1],i=function(o){var l;if(!e.disableNavigation){var u=hi(o);a(u),(l=e.onMonthChange)===null||l===void 0||l.call(e,u)}};return[n,i]}function kY(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,a=hi(e),i=hi(Ui(a,n)),o=Uh(i,a),l=[],u=0;u<o;u++){var f=Ui(a,u);l.push(f)}return r&&(l=l.reverse()),l}function CY(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=hi(e);if(!r)return Ui(l,o);var u=Uh(r,e);if(!(u<i))return Ui(l,o)}}function EY(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,a=t.numberOfMonths,i=a===void 0?1:a,o=n?i:1,l=hi(e);if(!r)return Ui(l,-o);var u=Uh(l,r);if(!(u<=0))return Ui(l,-o)}}var K6=x.createContext(void 0);function PY(e){var t=_n(),r=SY(),n=r[0],a=r[1],i=kY(n,t),o=CY(n,t),l=EY(n,t),u=function(p){return i.some(function(v){return _2(p,v)})},f=function(p,v){u(p)||(v&&Rc(p,v)?a(Ui(p,1+t.numberOfMonths*-1)):a(p))},h={currentMonth:n,displayMonths:i,goToMonth:a,goToDate:f,previousMonth:l,nextMonth:o,isDateDisplayed:u};return s.jsx(K6.Provider,{value:h,children:e.children})}function og(){var e=x.useContext(K6);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function h4(e){var t,r=_n(),n=r.classNames,a=r.styles,i=r.components,o=og().goToMonth,l=function(h){o(Ui(h,e.displayIndex?-e.displayIndex:0))},u=(t=i?.CaptionLabel)!==null&&t!==void 0?t:H6,f=s.jsx(u,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:a.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:f}),s.jsx(bY,{onChange:l,displayMonth:e.displayMonth}),s.jsx(jY,{onChange:l,displayMonth:e.displayMonth})]})}function AY(e){return s.jsx("svg",ur({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function TY(e){return s.jsx("svg",ur({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var px=x.forwardRef(function(e,t){var r=_n(),n=r.classNames,a=r.styles,i=[n.button_reset,n.button];e.className&&i.push(e.className);var o=i.join(" "),l=ur(ur({},a.button_reset),a.button);return e.style&&Object.assign(l,e.style),s.jsx("button",ur({},e,{ref:t,type:"button",className:o,style:l}))});function RY(e){var t,r,n=_n(),a=n.dir,i=n.locale,o=n.classNames,l=n.styles,u=n.labels,f=u.labelPrevious,h=u.labelNext,p=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var v=f(e.previousMonth,{locale:i}),m=[o.nav_button,o.nav_button_previous].join(" "),N=h(e.nextMonth,{locale:i}),w=[o.nav_button,o.nav_button_next].join(" "),j=(t=p?.IconRight)!==null&&t!==void 0?t:TY,_=(r=p?.IconLeft)!==null&&r!==void 0?r:AY;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(px,{name:"previous-month","aria-label":v,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:a==="rtl"?s.jsx(j,{className:o.nav_icon,style:l.nav_icon}):s.jsx(_,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(px,{name:"next-month","aria-label":N,className:w,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:a==="rtl"?s.jsx(_,{className:o.nav_icon,style:l.nav_icon}):s.jsx(j,{className:o.nav_icon,style:l.nav_icon})})]})}function m4(e){var t=_n().numberOfMonths,r=og(),n=r.previousMonth,a=r.nextMonth,i=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(N){return _2(e.displayMonth,N)}),u=l===0,f=l===o.length-1,h=t>1&&(u||!f),p=t>1&&(f||!u),v=function(){n&&i(n)},m=function(){a&&i(a)};return s.jsx(RY,{displayMonth:e.displayMonth,hideNext:h,hidePrevious:p,nextMonth:a,previousMonth:n,onPreviousClick:v,onNextClick:m})}function LY(e){var t,r=_n(),n=r.classNames,a=r.disableNavigation,i=r.styles,o=r.captionLayout,l=r.components,u=(t=l?.CaptionLabel)!==null&&t!==void 0?t:H6,f;return a?f=s.jsx(u,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?f=s.jsx(h4,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?f=s.jsxs(s.Fragment,{children:[s.jsx(h4,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(m4,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=s.jsxs(s.Fragment,{children:[s.jsx(u,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(m4,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:i.caption,children:f})}function DY(e){var t=_n(),r=t.footer,n=t.styles,a=t.classNames.tfoot;return r?s.jsx("tfoot",{className:a,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function IY(e,t,r){for(var n=r?Xd(new Date):Ko(new Date,{locale:e,weekStartsOn:t}),a=[],i=0;i<7;i++){var o=hs(n,i);a.push(o)}return a}function OY(){var e=_n(),t=e.classNames,r=e.styles,n=e.showWeekNumber,a=e.locale,i=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,u=e.labels.labelWeekday,f=IY(a,i,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),f.map(function(h,p){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":u(h,{locale:a}),children:l(h,{locale:a})},p)})]})}function MY(){var e,t=_n(),r=t.classNames,n=t.styles,a=t.components,i=(e=a?.HeadRow)!==null&&e!==void 0?e:OY;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(i,{})})}function FY(e){var t=_n(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var H2=x.createContext(void 0);function BY(e){if(!ag(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(H2.Provider,{value:t,children:e.children})}return s.jsx(UY,{initialProps:e.initialProps,children:e.children})}function UY(e){var t=e.initialProps,r=e.children,n=t.selected,a=t.min,i=t.max,o=function(f,h,p){var v,m;(v=t.onDayClick)===null||v===void 0||v.call(t,f,h,p);var N=!!(h.selected&&a&&n?.length===a);if(!N){var w=!!(!h.selected&&i&&n?.length===i);if(!w){var j=n?V6([],n):[];if(h.selected){var _=j.findIndex(function(C){return ka(f,C)});j.splice(_,1)}else j.push(f);(m=t.onSelect)===null||m===void 0||m.call(t,j,f,h,p)}}},l={disabled:[]};n&&l.disabled.push(function(f){var h=i&&n.length>i-1,p=n.some(function(v){return ka(v,f)});return!!(h&&!p)});var u={selected:n,onDayClick:o,modifiers:l};return s.jsx(H2.Provider,{value:u,children:r})}function G2(){var e=x.useContext(H2);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function $Y(e,t){var r=t||{},n=r.from,a=r.to;return n&&a?ka(a,e)&&ka(n,e)?void 0:ka(a,e)?{from:a,to:void 0}:ka(n,e)?void 0:Op(n,e)?{from:e,to:a}:{from:n,to:e}:a?Op(e,a)?{from:a,to:e}:{from:e,to:a}:n?Rc(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var K2=x.createContext(void 0);function zY(e){if(!ig(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(K2.Provider,{value:t,children:e.children})}return s.jsx(qY,{initialProps:e.initialProps,children:e.children})}function qY(e){var t=e.initialProps,r=e.children,n=t.selected,a=n||{},i=a.from,o=a.to,l=t.min,u=t.max,f=function(m,N,w){var j,_;(j=t.onDayClick)===null||j===void 0||j.call(t,m,N,w);var C=$Y(m,n);(_=t.onSelect)===null||_===void 0||_.call(t,C,m,N,w)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(i?(h.range_start=[i],o?(h.range_end=[o],ka(i,o)||(h.range_middle=[{after:i,before:o}])):h.range_end=[i]):o&&(h.range_start=[o],h.range_end=[o]),l&&(i&&!o&&h.disabled.push({after:Qy(i,l-1),before:hs(i,l-1)}),i&&o&&h.disabled.push({after:i,before:hs(i,l-1)}),!i&&o&&h.disabled.push({after:Qy(o,l-1),before:hs(o,l-1)})),u){if(i&&!o&&(h.disabled.push({before:hs(i,-u+1)}),h.disabled.push({after:hs(i,u-1)})),i&&o){var p=Nl(o,i)+1,v=u-p;h.disabled.push({before:Qy(i,v)}),h.disabled.push({after:hs(o,v)})}!i&&o&&(h.disabled.push({before:hs(o,-u+1)}),h.disabled.push({after:hs(o,u-1)}))}return s.jsx(K2.Provider,{value:{selected:n,onDayClick:f,modifiers:h},children:r})}function Y2(){var e=x.useContext(K2);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function Wv(e){return Array.isArray(e)?V6([],e):e!==void 0?[e]:[]}function VY(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],a=r[1];t[n]=Wv(a)}),t}var Qo;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Qo||(Qo={}));var WY=Qo.Selected,kc=Qo.Disabled,HY=Qo.Hidden,GY=Qo.Today,q1=Qo.RangeEnd,V1=Qo.RangeMiddle,W1=Qo.RangeStart,KY=Qo.Outside;function YY(e,t,r){var n,a=(n={},n[WY]=Wv(e.selected),n[kc]=Wv(e.disabled),n[HY]=Wv(e.hidden),n[GY]=[e.today],n[q1]=[],n[V1]=[],n[W1]=[],n[KY]=[],n);return e.fromDate&&a[kc].push({before:e.fromDate}),e.toDate&&a[kc].push({after:e.toDate}),ag(e)?a[kc]=a[kc].concat(t.modifiers[kc]):ig(e)&&(a[kc]=a[kc].concat(r.modifiers[kc]),a[W1]=r.modifiers[W1],a[V1]=r.modifiers[V1],a[q1]=r.modifiers[q1]),a}var Y6=x.createContext(void 0);function QY(e){var t=_n(),r=G2(),n=Y2(),a=YY(t,r,n),i=VY(t.modifiers),o=ur(ur({},a),i);return s.jsx(Y6.Provider,{value:o,children:e.children})}function Q6(){var e=x.useContext(Y6);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function JY(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function ZY(e){return!!(e&&typeof e=="object"&&"from"in e)}function XY(e){return!!(e&&typeof e=="object"&&"after"in e)}function eQ(e){return!!(e&&typeof e=="object"&&"before"in e)}function tQ(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function rQ(e,t){var r,n=t.from,a=t.to;if(n&&a){var i=Nl(a,n)<0;i&&(r=[a,n],n=r[0],a=r[1]);var o=Nl(e,n)>=0&&Nl(a,e)>=0;return o}return a?ka(a,e):n?ka(n,e):!1}function nQ(e){return b2(e)}function sQ(e){return Array.isArray(e)&&e.every(b2)}function aQ(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(nQ(r))return ka(e,r);if(sQ(r))return r.includes(e);if(ZY(r))return rQ(e,r);if(tQ(r))return r.dayOfWeek.includes(e.getDay());if(JY(r)){var n=Nl(r.before,e),a=Nl(r.after,e),i=n>0,o=a<0,l=Op(r.before,r.after);return l?o&&i:i||o}return XY(r)?Nl(e,r.after)>0:eQ(r)?Nl(r.before,e)>0:typeof r=="function"?r(e):!1})}function Q2(e,t,r){var n=Object.keys(t).reduce(function(i,o){var l=t[o];return aQ(e,l)&&i.push(o),i},[]),a={};return n.forEach(function(i){return a[i]=!0}),r&&!_2(e,r)&&(a.outside=!0),a}function iQ(e,t){for(var r=hi(e[0]),n=o0(e[e.length-1]),a,i,o=r;o<=n;){var l=Q2(o,t),u=!l.disabled&&!l.hidden;if(!u){o=hs(o,1);continue}if(l.selected)return o;l.today&&!i&&(i=o),a||(a=o),o=hs(o,1)}return i||a}var oQ=365;function J6(e,t){var r=t.moveBy,n=t.direction,a=t.context,i=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,u=a.weekStartsOn,f=a.fromDate,h=a.toDate,p=a.locale,v={day:hs,week:Dp,month:Ui,year:Lz,startOfWeek:function(j){return a.ISOWeek?Xd(j):Ko(j,{locale:p,weekStartsOn:u})},endOfWeek:function(j){return a.ISOWeek?oP(j):l0(j,{locale:p,weekStartsOn:u})}},m=v[r](e,n==="after"?1:-1);n==="before"&&f?m=Dz([f,m]):n==="after"&&h&&(m=Iz([h,m]));var N=!0;if(i){var w=Q2(m,i);N=!w.disabled&&!w.hidden}return N?m:l.count>oQ?l.lastFocused:J6(m,{moveBy:r,direction:n,context:a,modifiers:i,retry:ur(ur({},l),{count:l.count+1})})}var Z6=x.createContext(void 0);function lQ(e){var t=og(),r=Q6(),n=x.useState(),a=n[0],i=n[1],o=x.useState(),l=o[0],u=o[1],f=iQ(t.displayMonths,r),h=a??(l&&t.isDateDisplayed(l))?l:f,p=function(){u(a),i(void 0)},v=function(j){i(j)},m=_n(),N=function(j,_){if(a){var C=J6(a,{moveBy:j,direction:_,context:m,modifiers:r});ka(a,C)||(t.goToDate(C,a),v(C))}},w={focusedDay:a,focusTarget:h,blur:p,focus:v,focusDayAfter:function(){return N("day","after")},focusDayBefore:function(){return N("day","before")},focusWeekAfter:function(){return N("week","after")},focusWeekBefore:function(){return N("week","before")},focusMonthBefore:function(){return N("month","before")},focusMonthAfter:function(){return N("month","after")},focusYearBefore:function(){return N("year","before")},focusYearAfter:function(){return N("year","after")},focusStartOfWeek:function(){return N("startOfWeek","before")},focusEndOfWeek:function(){return N("endOfWeek","after")}};return s.jsx(Z6.Provider,{value:w,children:e.children})}function J2(){var e=x.useContext(Z6);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function cQ(e,t){var r=Q6(),n=Q2(e,r,t);return n}var Z2=x.createContext(void 0);function uQ(e){if(!y0(e.initialProps)){var t={selected:void 0};return s.jsx(Z2.Provider,{value:t,children:e.children})}return s.jsx(dQ,{initialProps:e.initialProps,children:e.children})}function dQ(e){var t=e.initialProps,r=e.children,n=function(i,o,l){var u,f,h;if((u=t.onDayClick)===null||u===void 0||u.call(t,i,o,l),o.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,i,o,l);return}(h=t.onSelect)===null||h===void 0||h.call(t,i,i,o,l)},a={selected:t.selected,onDayClick:n};return s.jsx(Z2.Provider,{value:a,children:r})}function X6(){var e=x.useContext(Z2);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function fQ(e,t){var r=_n(),n=X6(),a=G2(),i=Y2(),o=J2(),l=o.focusDayAfter,u=o.focusDayBefore,f=o.focusWeekAfter,h=o.focusWeekBefore,p=o.blur,v=o.focus,m=o.focusMonthBefore,N=o.focusMonthAfter,w=o.focusYearBefore,j=o.focusYearAfter,_=o.focusStartOfWeek,C=o.focusEndOfWeek,k=function(Y){var W,ee,ge,re;y0(r)?(W=n.onDayClick)===null||W===void 0||W.call(n,e,t,Y):ag(r)?(ee=a.onDayClick)===null||ee===void 0||ee.call(a,e,t,Y):ig(r)?(ge=i.onDayClick)===null||ge===void 0||ge.call(i,e,t,Y):(re=r.onDayClick)===null||re===void 0||re.call(r,e,t,Y)},E=function(Y){var W;v(e),(W=r.onDayFocus)===null||W===void 0||W.call(r,e,t,Y)},I=function(Y){var W;p(),(W=r.onDayBlur)===null||W===void 0||W.call(r,e,t,Y)},D=function(Y){var W;(W=r.onDayMouseEnter)===null||W===void 0||W.call(r,e,t,Y)},O=function(Y){var W;(W=r.onDayMouseLeave)===null||W===void 0||W.call(r,e,t,Y)},F=function(Y){var W;(W=r.onDayPointerEnter)===null||W===void 0||W.call(r,e,t,Y)},T=function(Y){var W;(W=r.onDayPointerLeave)===null||W===void 0||W.call(r,e,t,Y)},z=function(Y){var W;(W=r.onDayTouchCancel)===null||W===void 0||W.call(r,e,t,Y)},U=function(Y){var W;(W=r.onDayTouchEnd)===null||W===void 0||W.call(r,e,t,Y)},B=function(Y){var W;(W=r.onDayTouchMove)===null||W===void 0||W.call(r,e,t,Y)},K=function(Y){var W;(W=r.onDayTouchStart)===null||W===void 0||W.call(r,e,t,Y)},V=function(Y){var W;(W=r.onDayKeyUp)===null||W===void 0||W.call(r,e,t,Y)},de=function(Y){var W;switch(Y.key){case"ArrowLeft":Y.preventDefault(),Y.stopPropagation(),r.dir==="rtl"?l():u();break;case"ArrowRight":Y.preventDefault(),Y.stopPropagation(),r.dir==="rtl"?u():l();break;case"ArrowDown":Y.preventDefault(),Y.stopPropagation(),f();break;case"ArrowUp":Y.preventDefault(),Y.stopPropagation(),h();break;case"PageUp":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?w():m();break;case"PageDown":Y.preventDefault(),Y.stopPropagation(),Y.shiftKey?j():N();break;case"Home":Y.preventDefault(),Y.stopPropagation(),_();break;case"End":Y.preventDefault(),Y.stopPropagation(),C();break}(W=r.onDayKeyDown)===null||W===void 0||W.call(r,e,t,Y)},se={onClick:k,onFocus:E,onBlur:I,onKeyDown:de,onKeyUp:V,onMouseEnter:D,onMouseLeave:O,onPointerEnter:F,onPointerLeave:T,onTouchCancel:z,onTouchEnd:U,onTouchMove:B,onTouchStart:K};return se}function hQ(){var e=_n(),t=X6(),r=G2(),n=Y2(),a=y0(e)?t.selected:ag(e)?r.selected:ig(e)?n.selected:void 0;return a}function mQ(e){return Object.values(Qo).includes(e)}function pQ(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var a=e.modifiersClassNames[n];if(a)r.push(a);else if(mQ(n)){var i=e.classNames["day_".concat(n)];i&&r.push(i)}}),r}function gQ(e,t){var r=ur({},e.styles.day);return Object.keys(t).forEach(function(n){var a;r=ur(ur({},r),(a=e.modifiersStyles)===null||a===void 0?void 0:a[n])}),r}function vQ(e,t,r){var n,a,i,o=_n(),l=J2(),u=cQ(e,t),f=fQ(e,u),h=hQ(),p=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var D;u.outside||l.focusedDay&&p&&ka(l.focusedDay,e)&&((D=r.current)===null||D===void 0||D.focus())},[l.focusedDay,e,r,p,u.outside]);var v=pQ(o,u).join(" "),m=gQ(o,u),N=!!(u.outside&&!o.showOutsideDays||u.hidden),w=(i=(a=o.components)===null||a===void 0?void 0:a.DayContent)!==null&&i!==void 0?i:FY,j=s.jsx(w,{date:e,displayMonth:t,activeModifiers:u}),_={style:m,className:v,children:j,role:"gridcell"},C=l.focusTarget&&ka(l.focusTarget,e)&&!u.outside,k=l.focusedDay&&ka(l.focusedDay,e),E=ur(ur(ur({},_),(n={disabled:u.disabled,role:"gridcell"},n["aria-selected"]=u.selected,n.tabIndex=k||C?0:-1,n)),f),I={isButton:p,isHidden:N,activeModifiers:u,selectedDays:h,buttonProps:E,divProps:_};return I}function xQ(e){var t=x.useRef(null),r=vQ(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(px,ur({name:"day",ref:t},r.buttonProps)):s.jsx("div",ur({},r.divProps))}function yQ(e){var t=e.number,r=e.dates,n=_n(),a=n.onWeekNumberClick,i=n.styles,o=n.classNames,l=n.locale,u=n.labels.labelWeekNumber,f=n.formatters.formatWeekNumber,h=f(Number(t),{locale:l});if(!a)return s.jsx("span",{className:o.weeknumber,style:i.weeknumber,children:h});var p=u(Number(t),{locale:l}),v=function(m){a(t,r,m)};return s.jsx(px,{name:"week-number","aria-label":p,className:o.weeknumber,style:i.weeknumber,onClick:v,children:h})}function wQ(e){var t,r,n=_n(),a=n.styles,i=n.classNames,o=n.showWeekNumber,l=n.components,u=(t=l?.Day)!==null&&t!==void 0?t:xQ,f=(r=l?.WeekNumber)!==null&&r!==void 0?r:yQ,h;return o&&(h=s.jsx("td",{className:i.cell,style:a.cell,children:s.jsx(f,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:i.row,style:a.row,children:[h,e.dates.map(function(p){return s.jsx("td",{className:i.cell,style:a.cell,role:"presentation",children:s.jsx(u,{displayMonth:e.displayMonth,date:p})},$q(p))})]})}function p4(e,t,r){for(var n=r?.ISOWeek?oP(t):l0(t,r),a=r?.ISOWeek?Xd(e):Ko(e,r),i=Nl(n,a),o=[],l=0;l<=i;l++)o.push(hs(a,l));var u=o.reduce(function(f,h){var p=r?.ISOWeek?lP(h):uP(h,r),v=f.find(function(m){return m.weekNumber===p});return v?(v.dates.push(h),f):(f.push({weekNumber:p,dates:[h]}),f)},[]);return u}function bQ(e,t){var r=p4(hi(e),o0(e),t);if(t?.useFixedWeeks){var n=qq(e,t);if(n<6){var a=r[r.length-1],i=a.dates[a.dates.length-1],o=Dp(i,6-n),l=p4(Dp(i,1),o,t);r.push.apply(r,l)}}return r}function jQ(e){var t,r,n,a=_n(),i=a.locale,o=a.classNames,l=a.styles,u=a.hideHead,f=a.fixedWeeks,h=a.components,p=a.weekStartsOn,v=a.firstWeekContainsDate,m=a.ISOWeek,N=bQ(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:m,locale:i,weekStartsOn:p,firstWeekContainsDate:v}),w=(t=h?.Head)!==null&&t!==void 0?t:MY,j=(r=h?.Row)!==null&&r!==void 0?r:wQ,_=(n=h?.Footer)!==null&&n!==void 0?n:DY;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!u&&s.jsx(w,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:N.map(function(C){return s.jsx(j,{displayMonth:e.displayMonth,dates:C.dates,weekNumber:C.weekNumber},C.weekNumber)})}),s.jsx(_,{displayMonth:e.displayMonth})]})}function _Q(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var NQ=_Q()?x.useLayoutEffect:x.useEffect,H1=!1,SQ=0;function g4(){return"react-day-picker-".concat(++SQ)}function kQ(e){var t,r=e??(H1?g4():null),n=x.useState(r),a=n[0],i=n[1];return NQ(function(){a===null&&i(g4())},[]),x.useEffect(function(){H1===!1&&(H1=!0)},[]),(t=e??a)!==null&&t!==void 0?t:void 0}function CQ(e){var t,r,n=_n(),a=n.dir,i=n.classNames,o=n.styles,l=n.components,u=og().displayMonths,f=kQ(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),h=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,p=[i.month],v=o.month,m=e.displayIndex===0,N=e.displayIndex===u.length-1,w=!m&&!N;a==="rtl"&&(t=[m,N],N=t[0],m=t[1]),m&&(p.push(i.caption_start),v=ur(ur({},v),o.caption_start)),N&&(p.push(i.caption_end),v=ur(ur({},v),o.caption_end)),w&&(p.push(i.caption_between),v=ur(ur({},v),o.caption_between));var j=(r=l?.Caption)!==null&&r!==void 0?r:LY;return s.jsxs("div",{className:p.join(" "),style:v,children:[s.jsx(j,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(jQ,{id:h,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function EQ(e){var t=_n(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function PQ(e){var t,r,n=e.initialProps,a=_n(),i=J2(),o=og(),l=x.useState(!1),u=l[0],f=l[1];x.useEffect(function(){a.initialFocus&&i.focusTarget&&(u||(i.focus(i.focusTarget),f(!0)))},[a.initialFocus,u,i.focus,i.focusTarget,i]);var h=[a.classNames.root,a.className];a.numberOfMonths>1&&h.push(a.classNames.multiple_months),a.showWeekNumber&&h.push(a.classNames.with_weeknumber);var p=ur(ur({},a.styles.root),a.style),v=Object.keys(n).filter(function(N){return N.startsWith("data-")}).reduce(function(N,w){var j;return ur(ur({},N),(j={},j[w]=n[w],j))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:EQ;return s.jsx("div",ur({className:h.join(" "),style:p,dir:a.dir,id:a.id,nonce:n.nonce,title:n.title,lang:n.lang},v,{children:s.jsx(m,{children:o.displayMonths.map(function(N,w){return s.jsx(CQ,{displayIndex:w,displayMonth:N},w)})})}))}function AQ(e){var t=e.children,r=eY(e,["children"]);return s.jsx(yY,{initialProps:r,children:s.jsx(PY,{children:s.jsx(uQ,{initialProps:r,children:s.jsx(BY,{initialProps:r,children:s.jsx(zY,{initialProps:r,children:s.jsx(QY,{children:s.jsx(lQ,{children:t})})})})})})})}function TQ(e){return s.jsx(AQ,ur({},e,{children:s.jsx(PQ,{initialProps:e})}))}function Up({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(TQ,{showOutsideDays:r,className:Oe("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Oe(Cp({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Oe(Cp({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...a})=>s.jsx(Rb,{className:"h-4 w-4"}),IconRight:({...a})=>s.jsx(xp,{className:"h-4 w-4"})},...n})}Up.displayName="Calendar";var w0="Popover",[eT]=bs(w0,[Qu]),lg=Qu(),[RQ,od]=eT(w0),tT=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:a,onOpenChange:i,modal:o=!1}=e,l=lg(t),u=x.useRef(null),[f,h]=x.useState(!1),[p,v]=Ea({prop:n,defaultProp:a??!1,onChange:i,caller:w0});return s.jsx($x,{...l,children:s.jsx(RQ,{scope:t,contentId:Xs(),triggerRef:u,open:p,onOpenChange:v,onOpenToggle:x.useCallback(()=>v(m=>!m),[v]),hasCustomAnchor:f,onCustomAnchorAdd:x.useCallback(()=>h(!0),[]),onCustomAnchorRemove:x.useCallback(()=>h(!1),[]),modal:o,children:r})})};tT.displayName=w0;var rT="PopoverAnchor",LQ=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=od(rT,r),i=lg(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=a;return x.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Yp,{...i,...n,ref:t})});LQ.displayName=rT;var nT="PopoverTrigger",sT=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=od(nT,r),i=lg(r),o=Jt(t,a.triggerRef),l=s.jsx(vt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":cT(a.open),...n,ref:o,onClick:lt(e.onClick,a.onOpenToggle)});return a.hasCustomAnchor?l:s.jsx(Yp,{asChild:!0,...i,children:l})});sT.displayName=nT;var X2="PopoverPortal",[DQ,IQ]=eT(X2,{forceMount:void 0}),aT=e=>{const{__scopePopover:t,forceMount:r,children:n,container:a}=e,i=od(X2,t);return s.jsx(DQ,{scope:t,forceMount:r,children:s.jsx(qs,{present:r||i.open,children:s.jsx(Zh,{asChild:!0,container:a,children:n})})})};aT.displayName=X2;var $h="PopoverContent",iT=x.forwardRef((e,t)=>{const r=IQ($h,e.__scopePopover),{forceMount:n=r.forceMount,...a}=e,i=od($h,e.__scopePopover);return s.jsx(qs,{present:n||i.open,children:i.modal?s.jsx(MQ,{...a,ref:t}):s.jsx(FQ,{...a,ref:t})})});iT.displayName=$h;var OQ=zu("PopoverContent.RemoveScroll"),MQ=x.forwardRef((e,t)=>{const r=od($h,e.__scopePopover),n=x.useRef(null),a=Jt(t,n),i=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return Xx(o)},[]),s.jsx(Zp,{as:OQ,allowPinchZoom:!0,children:s.jsx(oT,{...e,ref:a,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(e.onCloseAutoFocus,o=>{o.preventDefault(),i.current||r.triggerRef.current?.focus()}),onPointerDownOutside:lt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,u=l.button===0&&l.ctrlKey===!0,f=l.button===2||u;i.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:lt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),FQ=x.forwardRef((e,t)=>{const r=od($h,e.__scopePopover),n=x.useRef(!1),a=x.useRef(!1);return s.jsx(oT,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{e.onCloseAutoFocus?.(i),i.defaultPrevented||(n.current||r.triggerRef.current?.focus(),i.preventDefault()),n.current=!1,a.current=!1},onInteractOutside:i=>{e.onInteractOutside?.(i),i.defaultPrevented||(n.current=!0,i.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const o=i.target;r.triggerRef.current?.contains(o)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&a.current&&i.preventDefault()}})}),oT=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:f,onInteractOutside:h,...p}=e,v=od($h,r),m=lg(r);return Qx(),s.jsx(Qp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:a,onUnmountAutoFocus:i,children:s.jsx(df,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:u,onFocusOutside:f,onDismiss:()=>v.onOpenChange(!1),children:s.jsx(zx,{"data-state":cT(v.open),role:"dialog",id:v.contentId,...m,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),lT="PopoverClose",BQ=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=od(lT,r);return s.jsx(vt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,()=>a.onOpenChange(!1))})});BQ.displayName=lT;var UQ="PopoverArrow",$Q=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,a=lg(r);return s.jsx(qx,{...a,...n,ref:t})});$Q.displayName=UQ;function cT(e){return e?"open":"closed"}var zQ=tT,qQ=sT,VQ=aT,uT=iT;const Lc=zQ,Dc=qQ,kl=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},a)=>s.jsx(VQ,{children:s.jsx(uT,{ref:a,align:t,sideOffset:r,className:Oe("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));kl.displayName=uT.displayName;var G1={exports:{}},K1={};var v4;function WQ(){if(v4)return K1;v4=1;var e=Tx();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,a=e.useEffect,i=e.useLayoutEffect,o=e.useDebugValue;function l(p,v){var m=v(),N=n({inst:{value:m,getSnapshot:v}}),w=N[0].inst,j=N[1];return i(function(){w.value=m,w.getSnapshot=v,u(w)&&j({inst:w})},[p,m,v]),a(function(){return u(w)&&j({inst:w}),p(function(){u(w)&&j({inst:w})})},[p]),o(m),m}function u(p){var v=p.getSnapshot;p=p.value;try{var m=v();return!r(p,m)}catch{return!0}}function f(p,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return K1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,K1}var x4;function HQ(){return x4||(x4=1,G1.exports=WQ()),G1.exports}var GQ=HQ();function KQ(){return GQ.useSyncExternalStore(YQ,()=>!0,()=>!1)}function YQ(){return()=>{}}var e5="Avatar",[QQ]=bs(e5),[JQ,dT]=QQ(e5),fT=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[a,i]=x.useState("idle");return s.jsx(JQ,{scope:r,imageLoadingStatus:a,onImageLoadingStatusChange:i,children:s.jsx(vt.span,{...n,ref:t})})});fT.displayName=e5;var hT="AvatarImage",mT=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:a=()=>{},...i}=e,o=dT(hT,r),l=ZQ(n,i),u=as(f=>{a(f),o.onImageLoadingStatusChange(f)});return ys(()=>{l!=="idle"&&u(l)},[l,u]),l==="loaded"?s.jsx(vt.img,{...i,ref:t,src:n}):null});mT.displayName=hT;var pT="AvatarFallback",gT=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...a}=e,i=dT(pT,r),[o,l]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const u=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(u)}},[n]),o&&i.imageLoadingStatus!=="loaded"?s.jsx(vt.span,{...a,ref:t}):null});gT.displayName=pT;function y4(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function ZQ(e,{referrerPolicy:t,crossOrigin:r}){const n=KQ(),a=x.useRef(null),i=n?(a.current||(a.current=new window.Image),a.current):null,[o,l]=x.useState(()=>y4(i,e));return ys(()=>{l(y4(i,e))},[i,e]),ys(()=>{const u=p=>()=>{l(p)};if(!i)return;const f=u("loaded"),h=u("error");return i.addEventListener("load",f),i.addEventListener("error",h),t&&(i.referrerPolicy=t),typeof r=="string"&&(i.crossOrigin=r),()=>{i.removeEventListener("load",f),i.removeEventListener("error",h)}},[i,r,t]),o}var vT=fT,xT=mT,yT=gT;const of=x.forwardRef(({className:e,...t},r)=>s.jsx(vT,{ref:r,className:Oe("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));of.displayName=vT.displayName;const b0=x.forwardRef(({className:e,...t},r)=>s.jsx(xT,{ref:r,className:Oe("aspect-square h-full w-full",e),...t}));b0.displayName=xT.displayName;const lf=x.forwardRef(({className:e,...t},r)=>s.jsx(yT,{ref:r,className:Oe("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));lf.displayName=yT.displayName;const t5={cook:"Cook",barista:"Barista",manager:"Manager",leader_chef:"Leader Chef",admin:"Admin"},gx={cook:"bg-blue-100 text-blue-800 border-blue-200",barista:"bg-green-100 text-green-800 border-green-200",manager:"bg-yellow-100 text-yellow-800 border-yellow-200",leader_chef:"bg-orange-100 text-orange-800 border-orange-200",admin:"bg-red-100 text-red-800 border-red-200"};function zh({open:e,onOpenChange:t,onSelectUser:r,organizationId:n,title:a="Select Team Member",description:i="Choose who is preparing this product"}){const[o,l]=x.useState([]),[u,f]=x.useState(""),[h,p]=x.useState(!1),{toast:v}=Er();x.useEffect(()=>{e&&m()},[e]);const m=async()=>{p(!0);try{let C=n;if(!C){const{data:{user:I},error:D}=await Ae.auth.getUser();if(D)throw console.error("Auth error:",D),new Error(`Authentication failed: ${D.message}`);if(!I)throw new Error("Not authenticated and no organization_id provided");console.log("[UserSelectionDialog] Current user ID:",I.id);const{data:O,error:F}=await Ae.from("profiles").select("organization_id").eq("user_id",I.id).maybeSingle();if(F)throw console.error("[UserSelectionDialog] Profile error:",F),new Error(`Failed to fetch profile: ${F.message}`);if(console.log("[UserSelectionDialog] Current profile organization_id:",O?.organization_id),!O?.organization_id){v({title:"No Organization",description:"You are not assigned to an organization.",variant:"destructive"}),l([]);return}C=O.organization_id}console.log("[UserSelectionDialog] Fetching team members for organization_id:",C);const{data:k,error:E}=await Ae.from("team_members").select("*").eq("organization_id",C).eq("is_active",!0).order("display_name",{ascending:!0});if(E)throw console.error("[UserSelectionDialog] Error fetching team members:",E),new Error(`Failed to fetch team members: ${E.message}`);console.log("[UserSelectionDialog] Fetched team members:",k),l(k||[]),(!k||k.length===0)&&v({title:"No Team Members Found",description:"No active team members found in your organization. Please add team members first."})}catch(C){console.error("[UserSelectionDialog] Error fetching team members:",C),v({title:"Error",description:C instanceof Error?C.message:"Failed to load team members",variant:"destructive"})}finally{p(!1)}},N=o.filter(C=>C.display_name?.toLowerCase().includes(u.toLowerCase())||C.position?.toLowerCase().includes(u.toLowerCase())||C.email?.toLowerCase().includes(u.toLowerCase())),w=C=>{r(C),t(!1)},j=C=>C?C.split(" ").map(k=>k[0]).join("").toUpperCase().substring(0,2):"U",_=C=>C.profile_complete?s.jsx(Js,{className:"h-4 w-4 text-green-500"}):s.jsx(Hr,{className:"h-4 w-4 text-amber-500"});return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-w-[500px]",children:[s.jsxs($s,{children:[s.jsx(zs,{children:a}),s.jsx(Wa,{children:i})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search by name, position, or email...",value:u,onChange:C=>f(C.target.value),className:"pl-10"})]}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto space-y-2",children:h?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading team members..."}):N.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:u?"No team members found matching your search":"No team members found"}):N.map(C=>s.jsxs("button",{onClick:()=>w(C),className:"w-full flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors",children:[s.jsx(of,{children:s.jsx(lf,{className:"bg-primary text-primary-foreground",children:j(C.display_name)})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"font-medium",children:C.display_name||"No name"}),_(C)]}),C.position&&s.jsx("p",{className:"text-sm text-muted-foreground",children:C.position}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsx(ut,{variant:"secondary",className:"text-xs",style:{backgroundColor:gx[C.role_type]+"20",color:gx[C.role_type]},children:t5[C.role_type]})})]})]},C.id))})]})]})})}function wT({open:e,onOpenChange:t,recipe:r,initialUser:n}){const{toast:a}=Er(),{printer:i,print:o,changePrinter:l}=jf(),[u,f]=x.useState(!1),[h,p]=x.useState(!1),[v,m]=x.useState(n||null),[N,w]=x.useState(i?.type||"zebra"),[j,_]=x.useState(1),[C,k]=x.useState(new Date),[E,I]=x.useState("refrigerated"),[D,O]=x.useState(""),[F,T]=x.useState(""),[z,U]=x.useState(""),[B,K]=x.useState(null),[V,de]=x.useState(null),se=r.shelf_life_days||3,Y=new Date(C);Y.setDate(Y.getDate()+se),x.useEffect(()=>{n&&m(n)},[n]),x.useEffect(()=>{async function ge(){const{data:re,error:L}=await Ae.from("label_categories").select("id").eq("name","Prepared Foods").single();if(L||!re){console.error("Failed to load Prepared Foods category:",L);return}K(re.id);const{data:q,error:J}=await Ae.from("label_subcategories").select("id").eq("category_id",re.id).eq("name","Recipes").single();if(J||!q){console.error("Failed to load Recipes subcategory:",J);return}de(q.id)}e&&ge()},[e]);const W=async()=>{if(!v){p(!0);return}if(!B||!V){a({title:"Configuration Error",description:"Recipe category not configured. Please run the migration first.",variant:"destructive"});return}f(!0);try{const ge={productName:`${r.name}${j>1?` (${j}x)`:""}`,preparedDate:wr(C,"yyyy-MM-dd"),useByDate:wr(Y,"yyyy-MM-dd"),condition:E,allergens:(r.allergens||[]).map(re=>re.name),preparedByName:v.display_name,categoryId:B,subcategoryId:V,categoryName:"Prepared Foods",subcategoryName:"Recipes",quantity:D||void 0,unit:F||void 0,batchNumber:z||void 0,storageInstructions:E==="refrigerated"?"Keep refrigerated":E==="frozen"?"Keep frozen":"Store in cool, dry place"};await o(ge),a({title:"Label Printed!",description:`Recipe label for ${r.name} has been sent to ${i?.name||"printer"}`}),t(!1)}catch(ge){console.error("Print error:",ge),a({title:"Print Failed",description:ge.message||"Failed to print recipe label",variant:"destructive"})}finally{f(!1)}},ee=ge=>{m(ge),p(!1)};return s.jsxs(s.Fragment,{children:[s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-w-[500px]",children:[s.jsxs($s,{children:[s.jsx(zs,{children:"Print Recipe Label"}),s.jsxs(Wa,{children:["Create a label for ",r.name]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Batch Size"}),s.jsxs(Nr,{value:j.toString(),onValueChange:ge=>_(Number(ge)),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"1",children:"1x (Standard)"}),s.jsx(qe,{value:"2",children:"2x (Double)"}),s.jsx(qe,{value:"3",children:"3x (Triple)"}),s.jsx(qe,{value:"4",children:"4x (Quadruple)"}),s.jsx(qe,{value:"5",children:"5x"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Manufacturing Date"}),s.jsxs(Lc,{children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",className:Oe("w-full justify-start text-left font-normal",!C&&"text-muted-foreground"),children:[s.jsx(Va,{className:"mr-2 h-4 w-4"}),C?wr(C,"PPP"):s.jsx("span",{children:"Pick a date"})]})}),s.jsx(kl,{className:"w-auto p-0",children:s.jsx(Up,{mode:"single",selected:C,onSelect:ge=>ge&&k(ge),initialFocus:!0})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Expiry Date (Auto-calculated)"}),s.jsx(St,{value:wr(Y,"PPP"),disabled:!0,className:"bg-muted"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:["Based on ",se," day shelf life"]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Storage Condition"}),s.jsxs(Nr,{value:E,onValueChange:ge=>I(ge),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"ambient",children:"Ambient"}),s.jsx(qe,{value:"refrigerated",children:"Refrigerated"}),s.jsx(qe,{value:"frozen",children:"Frozen"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Quantity (Optional)"}),s.jsx(St,{type:"text",placeholder:"e.g., 500",value:D,onChange:ge=>O(ge.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Unit (Optional)"}),s.jsx(St,{placeholder:"e.g., g, ml",value:F,onChange:ge=>T(ge.target.value)})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Batch Number (Optional)"}),s.jsx(St,{placeholder:"e.g., B2026-001",value:z,onChange:ge=>U(ge.target.value)})]}),v&&s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm font-medium",children:"Prepared By:"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:v.display_name})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Printer"}),s.jsxs(Nr,{value:N,onValueChange:ge=>{w(ge),l(ge)},disabled:!0,children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"zebra",children:" Zebra Thermal Printer"}),s.jsx(qe,{value:"generic",children:" Generic Printer"}),s.jsx(qe,{value:"pdf",children:" PDF Export"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Zebra printer locked in production"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{variant:"outline",className:"flex-1",onClick:()=>t(!1),disabled:u,children:"Cancel"}),s.jsxs(we,{className:"flex-1",onClick:W,disabled:u,children:[u&&s.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),s.jsx(Sa,{className:"mr-2 h-4 w-4"}),"Print Label"]})]})]})}),s.jsx(zh,{open:h,onOpenChange:p,onSelectUser:ee})]})}function XQ({recipe:e,variant:t="default",size:r="default",className:n}){const[a,i]=x.useState(!1),[o,l]=x.useState(!1),[u,f]=x.useState(null),h=p=>{f(p),i(!1),l(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs(we,{variant:t,size:r,className:n,onClick:()=>i(!0),children:[s.jsx(Sa,{className:"mr-2 h-4 w-4"}),"Print Label"]}),s.jsx(zh,{open:a,onOpenChange:i,onSelectUser:h,title:"Who is preparing this recipe?",description:"Select the team member preparing this item"}),s.jsx(wT,{open:o,onOpenChange:l,recipe:e,initialUser:u})]})}function j0({open:e,onOpenChange:t,limitType:r,currentPlan:n,currentLimit:a,featureName:i}){const o=mf(),l=()=>{switch(r){case"teamMembers":return{title:"Team Member Limit Reached",description:`You've reached your ${a} team member limit on the ${n} plan.`,icon:s.jsx(Ac,{className:"h-12 w-12 text-purple-500"})};case"recipes":return{title:"Recipe Limit Reached",description:`You've reached your ${a} recipe limit on the ${n} plan.`,icon:s.jsx(Ac,{className:"h-12 w-12 text-purple-500"})};case"products":return{title:"Product Limit Reached",description:`You've reached your ${a} product limit on the ${n} plan.`,icon:s.jsx(Ac,{className:"h-12 w-12 text-purple-500"})};case"suppliers":return{title:"Supplier Limit Reached",description:`You've reached your ${a} supplier limit on the ${n} plan.`,icon:s.jsx(Ac,{className:"h-12 w-12 text-purple-500"})};case"feature":return{title:`${i||"Premium Feature"} Required`,description:`This feature is not available on the ${n} plan.`,icon:s.jsx(Dh,{className:"h-12 w-12 text-blue-500"})};default:return{title:"Upgrade Required",description:"This feature requires a higher plan.",icon:s.jsx(Ac,{className:"h-12 w-12 text-purple-500"})}}},u=()=>n==="free"||n==="starter"?{name:"Professional",price:"$99",benefits:["Up to 50 team members","Up to 500 recipes","Up to 1,000 products","Allergen Management","Nutritional Calculator","Cost Control & Analytics","Priority Support"]}:{name:"Enterprise",price:"$299",benefits:["Unlimited team members","Unlimited recipes","Unlimited products","All Professional features","API Access","Custom Integrations","Dedicated Account Manager","24/7 Priority Support"]},f=l(),h=u(),p=()=>{t(!1),o("/pricing")},v=()=>{t(!1),o("/pricing")};return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-w-[500px]",children:[s.jsx($s,{children:s.jsxs("div",{className:"flex flex-col items-center text-center mb-4",children:[s.jsx("div",{className:"mb-4",children:f.icon}),s.jsx(zs,{className:"text-2xl",children:f.title}),s.jsx(Wa,{className:"mt-2 text-base",children:f.description})]})}),s.jsxs("div",{className:"border-2 border-purple-500/20 rounded-lg p-5 bg-gradient-to-br from-purple-50 to-blue-50",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-bold text-purple-900",children:h.name}),s.jsxs("p",{className:"text-2xl font-bold text-purple-600",children:[h.price,s.jsx("span",{className:"text-sm font-normal text-muted-foreground",children:"/month"})]})]}),s.jsx(ut,{className:"bg-purple-500 text-white",children:"Recommended"})]}),s.jsx("div",{className:"space-y-2",children:h.benefits.map((m,N)=>s.jsxs("div",{className:"flex items-start gap-2",children:[s.jsx(Js,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),s.jsx("span",{className:"text-sm text-purple-900",children:m})]},N))})]}),s.jsxs(Zo,{className:"flex-col sm:flex-row gap-2 mt-4",children:[s.jsx(we,{variant:"outline",onClick:v,className:"w-full sm:w-auto",children:"View All Plans"}),s.jsxs(we,{onClick:p,className:"w-full sm:w-auto bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",children:["Upgrade to ",h.name,s.jsx(Qd,{className:"h-4 w-4 ml-2"})]})]})]})})}const eJ=["All Categories","Entrees","Mains","Desserts","Sides","Sauces","Beverages","Bakery","Other"];function tJ(){const[e,t]=x.useState([]),[r,n]=x.useState(""),[a,i]=x.useState("All Categories"),[o,l]=x.useState(!1),[u,f]=x.useState(!1),[h,p]=x.useState(null),[v,m]=x.useState(null),[N,w]=x.useState(null),[j,_]=x.useState(!0),{user:C}=Ga(),{role:k,isAdmin:E,isLeaderChef:I,loading:D}=rd(),{checkRecipeLimit:O,upgradeModalProps:F}=p0(),{toast:T}=Er(),z=E||I;x.useEffect(()=>{console.log(" Recipe Permissions Debug:",{userId:C?.id,role:k,rolesLoading:D,isAdmin:E,isLeaderChef:I,canManageRecipes:z})},[C,k,D,E,I,z]);const U=()=>{const Y=e.length;O(Y)&&(w(null),l(!0))};x.useEffect(()=>{B()},[]);const B=async()=>{try{const{data:Y,error:W}=await Ae.from("recipes").select("*").order("created_at",{ascending:!1});if(W)throw W;const ee=new Set;Y?.forEach(q=>{q.created_by&&ee.add(q.created_by),q.updated_by&&ee.add(q.updated_by)});const{data:ge}=await Ae.from("profiles").select("user_id, display_name").in("user_id",Array.from(ee)),re=new Map(ge?.map(q=>[q.user_id,q.display_name])||[]),L=Y?.map(q=>({...q,creator:q.created_by?{display_name:re.get(q.created_by)||"Unknown"}:null,updater:q.updated_by?{display_name:re.get(q.updated_by)||"Unknown"}:null}));t(L||[])}catch(Y){console.error("Error fetching recipes:",Y),T({title:"Error",description:"Failed to fetch recipes",variant:"destructive"})}finally{_(!1)}},K=async()=>{if(v)try{const{error:Y}=await Ae.from("recipes").delete().eq("id",v.id);if(Y)throw Y;T({title:"Success",description:"Recipe deleted successfully"}),B()}catch(Y){console.error("Error deleting recipe:",Y),T({title:"Error",description:"Failed to delete recipe",variant:"destructive"})}finally{m(null)}},V=Y=>{w(Y),l(!0)},de=Y=>{p(Y),f(!0)},se=e.filter(Y=>{const W=Y.name.toLowerCase().includes(r.toLowerCase())||(Y.allergens||[]).some(ge=>ge.toLowerCase().includes(r.toLowerCase()))||(Y.dietary_requirements||[]).some(ge=>ge.toLowerCase().includes(r.toLowerCase())),ee=a==="All Categories"||Y.category===a;return W&&ee});return j?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recipes"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your recipe collection"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(Y=>s.jsxs(rt,{className:"animate-pulse",children:[s.jsx(Wt,{children:s.jsx("div",{className:"h-6 bg-muted rounded w-3/4"})}),s.jsx(st,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded"}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})})]},Y))})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(rt,{className:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200",children:s.jsx(st,{className:"pt-4",children:s.jsxs("p",{className:"text-sm font-mono",children:[s.jsx("strong",{children:"Debug Info:"})," User ID: ",C?.id?.slice(0,8),"... | Role: ",k||"none"," | Is Admin: ",E?"":""," | Is Leader Chef: ",I?"":""," | Can Manage: ",z?" YES":" NO"," | Loading: ",D?"Yes":"No"]})})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recipes"}),s.jsx("p",{className:"text-muted-foreground",children:z?"Manage your recipe collection":"Browse available recipes"})]}),z&&s.jsxs(we,{onClick:U,children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Create Recipe"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(St,{placeholder:"Search recipes, allergens, or dietary...",value:r,onChange:Y=>n(Y.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Fc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs(Nr,{value:a,onValueChange:i,children:[s.jsx(_r,{className:"w-48",children:s.jsx(Sr,{})}),s.jsx(Cr,{className:"bg-background opacity-100",children:eJ.map(Y=>s.jsx(qe,{value:Y,className:"bg-background opacity-100",children:Y},Y))})]})]})]}),se.length===0?s.jsx(rt,{children:s.jsx(st,{className:"flex flex-col items-center justify-center py-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto",children:s.jsx(jn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"No recipes found"}),s.jsx("p",{className:"text-muted-foreground",children:r?"Try adjusting your search terms":z?"Get started by creating your first recipe":"No recipes available yet"})]}),!r&&z&&s.jsxs(we,{onClick:()=>{w(null),l(!0)},children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Create Recipe"]})]})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:se.map(Y=>s.jsxs(rt,{className:"hover:shadow-card transition-shadow cursor-pointer",children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-start justify-between",children:[s.jsx("span",{className:"line-clamp-2",children:Y.name}),(Y.allergens||[]).length>0&&s.jsx(is,{className:"w-5 h-5 text-amber-500 flex-shrink-0 ml-2"})]})}),s.jsxs(st,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(ut,{variant:"outline",className:"text-xs",children:Y.category}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(jn,{className:"w-3 h-3"}),s.jsxs("span",{children:[(Y.estimated_prep_minutes||0)+(Y.service_gap_minutes||0),"min"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Bi,{className:"w-4 h-4"}),s.jsxs("span",{children:[Y.yield_amount," ",Y.yield_unit]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(jn,{className:"w-4 h-4"}),s.jsxs("span",{children:[Y.prep_steps?.length||0," steps"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(jn,{className:"w-4 h-4"}),s.jsxs("span",{children:[Y.hold_time_days,"d hold"]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Ingredients (",Y.ingredients?.length||0,")"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[Y.ingredients?.slice(0,3)?.join(", "),Y.ingredients?.length>3&&s.jsxs("span",{children:[" + ",Y.ingredients.length-3," more"]})]})]}),(Y.allergens||[]).length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-2 text-red-600",children:"Allergens"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(Y.allergens||[]).map(W=>s.jsx(ut,{variant:"destructive",className:"text-xs font-bold",children:W},W))})]}),(Y.dietary_requirements||[]).length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-2 text-green-600",children:"Dietary"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(Y.dietary_requirements||[]).map(W=>s.jsx(ut,{variant:"secondary",className:"text-xs",children:W},W))})]}),s.jsxs("div",{className:"pt-2 border-t space-y-2 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Va,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Created at:"}),s.jsx("span",{children:wr(new Date(Y.created_at),"MMM dd, yyyy 'at' HH:mm")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Il,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Created by:"}),s.jsx("span",{children:Y.creator?.display_name||"Unknown"})]}),Y.updated_by&&Y.updated_at!==Y.created_at&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Va,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Last Updated:"}),s.jsx("span",{children:wr(new Date(Y.updated_at),"MMM dd, yyyy 'at' HH:mm")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Il,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Last Updated by:"}),s.jsx("span",{children:Y.updater?.display_name||"Unknown"})]})]})]}),s.jsxs("div",{className:"pt-2 space-y-2",children:[s.jsxs(we,{size:"sm",onClick:()=>de(Y),className:"w-full",children:[s.jsx(Dx,{className:"w-4 h-4 mr-2"}),"Prepare Recipe"]}),s.jsx(XQ,{recipe:{id:Y.id,name:Y.name,shelf_life_days:Y.hold_time_days,allergens:Y.allergens?.map((W,ee)=>({id:`allergen-${ee}`,name:W}))},variant:"outline",size:"sm",className:"w-full"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(we,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{T({title:"Coming Soon",description:"Recipe comments feature will be available soon"})},children:[s.jsx(Dv,{className:"w-4 h-4 mr-2"}),"Notes"]}),z&&s.jsxs(s.Fragment,{children:[s.jsx(we,{size:"sm",variant:"outline",onClick:W=>{W.stopPropagation(),V(Y)},children:s.jsx(Rh,{className:"w-4 h-4"})}),s.jsx(we,{size:"sm",variant:"destructive",onClick:W=>{W.stopPropagation(),m(Y)},children:s.jsx(Dl,{className:"w-4 h-4"})})]})]})]})]})]},Y.id))}),s.jsx(bW,{open:o,onOpenChange:Y=>{l(Y),Y||w(null)},onSuccess:()=>{B(),w(null)},recipeToEdit:N}),s.jsx(sH,{open:u,onOpenChange:f,recipe:h}),s.jsx(Tl,{open:!!v,onOpenChange:()=>m(null),children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Are you sure?"}),s.jsxs(Rl,{children:['This will permanently delete the recipe "',v?.name,'". This action cannot be undone.']})]}),s.jsxs(zo,{children:[s.jsx(Wo,{children:"Cancel"}),s.jsx(Vo,{onClick:K,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Recipe"})]})]})}),s.jsx(j0,{...F})]})}var w4=1,rJ=.9,nJ=.8,sJ=.17,Y1=.1,Q1=.999,aJ=.9999,iJ=.99,oJ=/[\\\/_+.#"@\[\(\{&]/,lJ=/[\\\/_+.#"@\[\(\{&]/g,cJ=/[\s-]/,bT=/[\s-]/g;function ib(e,t,r,n,a,i,o){if(i===t.length)return a===e.length?w4:iJ;var l=`${a},${i}`;if(o[l]!==void 0)return o[l];for(var u=n.charAt(i),f=r.indexOf(u,a),h=0,p,v,m,N;f>=0;)p=ib(e,t,r,n,f+1,i+1,o),p>h&&(f===a?p*=w4:oJ.test(e.charAt(f-1))?(p*=nJ,m=e.slice(a,f-1).match(lJ),m&&a>0&&(p*=Math.pow(Q1,m.length))):cJ.test(e.charAt(f-1))?(p*=rJ,N=e.slice(a,f-1).match(bT),N&&a>0&&(p*=Math.pow(Q1,N.length))):(p*=sJ,a>0&&(p*=Math.pow(Q1,f-a))),e.charAt(f)!==t.charAt(i)&&(p*=aJ)),(p<Y1&&r.charAt(f-1)===n.charAt(i+1)||n.charAt(i+1)===n.charAt(i)&&r.charAt(f-1)!==n.charAt(i))&&(v=ib(e,t,r,n,f+1,i+2,o),v*Y1>p&&(p=v*Y1)),p>h&&(h=p),f=r.indexOf(u,f+1);return o[l]=h,h}function b4(e){return e.toLowerCase().replace(bT," ")}function uJ(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,ib(e,t,b4(e),b4(t),0,0,{})}var Gm='[cmdk-group=""]',J1='[cmdk-group-items=""]',dJ='[cmdk-group-heading=""]',jT='[cmdk-item=""]',j4=`${jT}:not([aria-disabled="true"])`,ob="cmdk-item-select",gh="data-value",fJ=(e,t,r)=>uJ(e,t,r),_T=x.createContext(void 0),cg=()=>x.useContext(_T),NT=x.createContext(void 0),r5=()=>x.useContext(NT),ST=x.createContext(void 0),kT=x.forwardRef((e,t)=>{let r=vh(()=>{var L,q;return{search:"",value:(q=(L=e.value)!=null?L:e.defaultValue)!=null?q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=vh(()=>new Set),a=vh(()=>new Map),i=vh(()=>new Map),o=vh(()=>new Set),l=CT(e),{label:u,children:f,value:h,onValueChange:p,filter:v,shouldFilter:m,loop:N,disablePointerSelection:w=!1,vimBindings:j=!0,..._}=e,C=Xs(),k=Xs(),E=Xs(),I=x.useRef(null),D=_J();cf(()=>{if(h!==void 0){let L=h.trim();r.current.value=L,O.emit()}},[h]),cf(()=>{D(6,K)},[]);let O=x.useMemo(()=>({subscribe:L=>(o.current.add(L),()=>o.current.delete(L)),snapshot:()=>r.current,setState:(L,q,J)=>{var ne,ue,ie,oe;if(!Object.is(r.current[L],q)){if(r.current[L]=q,L==="search")B(),z(),D(1,U);else if(L==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let le=document.getElementById(E);le?le.focus():(ne=document.getElementById(C))==null||ne.focus()}if(D(7,()=>{var le;r.current.selectedItemId=(le=V())==null?void 0:le.id,O.emit()}),J||D(5,K),((ue=l.current)==null?void 0:ue.value)!==void 0){let le=q??"";(oe=(ie=l.current).onValueChange)==null||oe.call(ie,le);return}}O.emit()}},emit:()=>{o.current.forEach(L=>L())}}),[]),F=x.useMemo(()=>({value:(L,q,J)=>{var ne;q!==((ne=i.current.get(L))==null?void 0:ne.value)&&(i.current.set(L,{value:q,keywords:J}),r.current.filtered.items.set(L,T(q,J)),D(2,()=>{z(),O.emit()}))},item:(L,q)=>(n.current.add(L),q&&(a.current.has(q)?a.current.get(q).add(L):a.current.set(q,new Set([L]))),D(3,()=>{B(),z(),r.current.value||U(),O.emit()}),()=>{i.current.delete(L),n.current.delete(L),r.current.filtered.items.delete(L);let J=V();D(4,()=>{B(),J?.getAttribute("id")===L&&U(),O.emit()})}),group:L=>(a.current.has(L)||a.current.set(L,new Set),()=>{i.current.delete(L),a.current.delete(L)}),filter:()=>l.current.shouldFilter,label:u||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:C,inputId:E,labelId:k,listInnerRef:I}),[]);function T(L,q){var J,ne;let ue=(ne=(J=l.current)==null?void 0:J.filter)!=null?ne:fJ;return L?ue(L,r.current.search,q):0}function z(){if(!r.current.search||l.current.shouldFilter===!1)return;let L=r.current.filtered.items,q=[];r.current.filtered.groups.forEach(ne=>{let ue=a.current.get(ne),ie=0;ue.forEach(oe=>{let le=L.get(oe);ie=Math.max(le,ie)}),q.push([ne,ie])});let J=I.current;de().sort((ne,ue)=>{var ie,oe;let le=ne.getAttribute("id"),ye=ue.getAttribute("id");return((ie=L.get(ye))!=null?ie:0)-((oe=L.get(le))!=null?oe:0)}).forEach(ne=>{let ue=ne.closest(J1);ue?ue.appendChild(ne.parentElement===ue?ne:ne.closest(`${J1} > *`)):J.appendChild(ne.parentElement===J?ne:ne.closest(`${J1} > *`))}),q.sort((ne,ue)=>ue[1]-ne[1]).forEach(ne=>{var ue;let ie=(ue=I.current)==null?void 0:ue.querySelector(`${Gm}[${gh}="${encodeURIComponent(ne[0])}"]`);ie?.parentElement.appendChild(ie)})}function U(){let L=de().find(J=>J.getAttribute("aria-disabled")!=="true"),q=L?.getAttribute(gh);O.setState("value",q||void 0)}function B(){var L,q,J,ne;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let ue=0;for(let ie of n.current){let oe=(q=(L=i.current.get(ie))==null?void 0:L.value)!=null?q:"",le=(ne=(J=i.current.get(ie))==null?void 0:J.keywords)!=null?ne:[],ye=T(oe,le);r.current.filtered.items.set(ie,ye),ye>0&&ue++}for(let[ie,oe]of a.current)for(let le of oe)if(r.current.filtered.items.get(le)>0){r.current.filtered.groups.add(ie);break}r.current.filtered.count=ue}function K(){var L,q,J;let ne=V();ne&&(((L=ne.parentElement)==null?void 0:L.firstChild)===ne&&((J=(q=ne.closest(Gm))==null?void 0:q.querySelector(dJ))==null||J.scrollIntoView({block:"nearest"})),ne.scrollIntoView({block:"nearest"}))}function V(){var L;return(L=I.current)==null?void 0:L.querySelector(`${jT}[aria-selected="true"]`)}function de(){var L;return Array.from(((L=I.current)==null?void 0:L.querySelectorAll(j4))||[])}function se(L){let q=de()[L];q&&O.setState("value",q.getAttribute(gh))}function Y(L){var q;let J=V(),ne=de(),ue=ne.findIndex(oe=>oe===J),ie=ne[ue+L];(q=l.current)!=null&&q.loop&&(ie=ue+L<0?ne[ne.length-1]:ue+L===ne.length?ne[0]:ne[ue+L]),ie&&O.setState("value",ie.getAttribute(gh))}function W(L){let q=V(),J=q?.closest(Gm),ne;for(;J&&!ne;)J=L>0?bJ(J,Gm):jJ(J,Gm),ne=J?.querySelector(j4);ne?O.setState("value",ne.getAttribute(gh)):Y(L)}let ee=()=>se(de().length-1),ge=L=>{L.preventDefault(),L.metaKey?ee():L.altKey?W(1):Y(1)},re=L=>{L.preventDefault(),L.metaKey?se(0):L.altKey?W(-1):Y(-1)};return x.createElement(vt.div,{ref:t,tabIndex:-1,..._,"cmdk-root":"",onKeyDown:L=>{var q;(q=_.onKeyDown)==null||q.call(_,L);let J=L.nativeEvent.isComposing||L.keyCode===229;if(!(L.defaultPrevented||J))switch(L.key){case"n":case"j":{j&&L.ctrlKey&&ge(L);break}case"ArrowDown":{ge(L);break}case"p":case"k":{j&&L.ctrlKey&&re(L);break}case"ArrowUp":{re(L);break}case"Home":{L.preventDefault(),se(0);break}case"End":{L.preventDefault(),ee();break}case"Enter":{L.preventDefault();let ne=V();if(ne){let ue=new Event(ob);ne.dispatchEvent(ue)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:F.inputId,id:F.labelId,style:SJ},u),_0(e,L=>x.createElement(NT.Provider,{value:O},x.createElement(_T.Provider,{value:F},L))))}),hJ=x.forwardRef((e,t)=>{var r,n;let a=Xs(),i=x.useRef(null),o=x.useContext(ST),l=cg(),u=CT(e),f=(n=(r=u.current)==null?void 0:r.forceMount)!=null?n:o?.forceMount;cf(()=>{if(!f)return l.item(a,o?.id)},[f]);let h=ET(a,i,[e.value,e.children,i],e.keywords),p=r5(),v=Gu(D=>D.value&&D.value===h.current),m=Gu(D=>f||l.filter()===!1?!0:D.search?D.filtered.items.get(a)>0:!0);x.useEffect(()=>{let D=i.current;if(!(!D||e.disabled))return D.addEventListener(ob,N),()=>D.removeEventListener(ob,N)},[m,e.onSelect,e.disabled]);function N(){var D,O;w(),(O=(D=u.current).onSelect)==null||O.call(D,h.current)}function w(){p.setState("value",h.current,!0)}if(!m)return null;let{disabled:j,value:_,onSelect:C,forceMount:k,keywords:E,...I}=e;return x.createElement(vt.div,{ref:Oc(i,t),...I,id:a,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!v,"data-disabled":!!j,"data-selected":!!v,onPointerMove:j||l.getDisablePointerSelection()?void 0:w,onClick:j?void 0:N},e.children)}),mJ=x.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:a,...i}=e,o=Xs(),l=x.useRef(null),u=x.useRef(null),f=Xs(),h=cg(),p=Gu(m=>a||h.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);cf(()=>h.group(o),[]),ET(o,l,[e.value,e.heading,u]);let v=x.useMemo(()=>({id:o,forceMount:a}),[a]);return x.createElement(vt.div,{ref:Oc(l,t),...i,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},r&&x.createElement("div",{ref:u,"cmdk-group-heading":"","aria-hidden":!0,id:f},r),_0(e,m=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?f:void 0},x.createElement(ST.Provider,{value:v},m))))}),pJ=x.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,a=x.useRef(null),i=Gu(o=>!o.search);return!r&&!i?null:x.createElement(vt.div,{ref:Oc(a,t),...n,"cmdk-separator":"",role:"separator"})}),gJ=x.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,a=e.value!=null,i=r5(),o=Gu(f=>f.search),l=Gu(f=>f.selectedItemId),u=cg();return x.useEffect(()=>{e.value!=null&&i.setState("search",e.value)},[e.value]),x.createElement(vt.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":u.listId,"aria-labelledby":u.labelId,"aria-activedescendant":l,id:u.inputId,type:"text",value:a?e.value:o,onChange:f=>{a||i.setState("search",f.target.value),r?.(f.target.value)}})}),vJ=x.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...a}=e,i=x.useRef(null),o=x.useRef(null),l=Gu(f=>f.selectedItemId),u=cg();return x.useEffect(()=>{if(o.current&&i.current){let f=o.current,h=i.current,p,v=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let m=f.offsetHeight;h.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return v.observe(f),()=>{cancelAnimationFrame(p),v.unobserve(f)}}},[]),x.createElement(vt.div,{ref:Oc(i,t),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:u.listId},_0(e,f=>x.createElement("div",{ref:Oc(o,u.listInnerRef),"cmdk-list-sizer":""},f)))}),xJ=x.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:a,contentClassName:i,container:o,...l}=e;return x.createElement(C2,{open:r,onOpenChange:n},x.createElement(E2,{container:o},x.createElement(u0,{"cmdk-overlay":"",className:a}),x.createElement(d0,{"aria-label":e.label,"cmdk-dialog":"",className:i},x.createElement(kT,{ref:t,...l}))))}),yJ=x.forwardRef((e,t)=>Gu(r=>r.filtered.count===0)?x.createElement(vt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),wJ=x.forwardRef((e,t)=>{let{progress:r,children:n,label:a="Loading...",...i}=e;return x.createElement(vt.div,{ref:t,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},_0(e,o=>x.createElement("div",{"aria-hidden":!0},o)))}),pi=Object.assign(kT,{List:vJ,Item:hJ,Input:gJ,Group:mJ,Separator:pJ,Dialog:xJ,Empty:yJ,Loading:wJ});function bJ(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function jJ(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function CT(e){let t=x.useRef(e);return cf(()=>{t.current=e}),t}var cf=typeof window>"u"?x.useEffect:x.useLayoutEffect;function vh(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function Gu(e){let t=r5(),r=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,r,r)}function ET(e,t,r,n=[]){let a=x.useRef(),i=cg();return cf(()=>{var o;let l=(()=>{var f;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(f=h.current.textContent)==null?void 0:f.trim():a.current}})(),u=n.map(f=>f.trim());i.value(e,l,u),(o=t.current)==null||o.setAttribute(gh,l),a.current=l}),a}var _J=()=>{let[e,t]=x.useState(),r=vh(()=>new Map);return cf(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,a)=>{r.current.set(n,a),t({})}};function NJ(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function _0({asChild:e,children:t},r){return e&&x.isValidElement(t)?x.cloneElement(NJ(t),{ref:t.ref},r(t.props.children)):r(t)}var SJ={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const ep=x.forwardRef(({className:e,...t},r)=>s.jsx(pi,{ref:r,className:Oe("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));ep.displayName=pi.displayName;const tp=x.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(Ml,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(pi.Input,{ref:r,className:Oe("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));tp.displayName=pi.Input.displayName;const rp=x.forwardRef(({className:e,...t},r)=>s.jsx(pi.List,{ref:r,className:Oe("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));rp.displayName=pi.List.displayName;const np=x.forwardRef((e,t)=>s.jsx(pi.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));np.displayName=pi.Empty.displayName;const sp=x.forwardRef(({className:e,...t},r)=>s.jsx(pi.Group,{ref:r,className:Oe("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));sp.displayName=pi.Group.displayName;const kJ=x.forwardRef(({className:e,...t},r)=>s.jsx(pi.Separator,{ref:r,className:Oe("-mx-1 h-px bg-border",e),...t}));kJ.displayName=pi.Separator.displayName;const xh=x.forwardRef(({className:e,...t},r)=>s.jsx(pi.Item,{ref:r,className:Oe("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));xh.displayName=pi.Item.displayName;function CJ({labelData:e,format:t,scale:r=1,className:n=""}){const a=x.useRef(null),[i,o]=x.useState(!1),l=x.useRef(),u=async()=>{const f=a.current;if(!f)return;const h=f.getContext("2d");if(!h)return;o(!0);let p=600,v=848;(t==="pdf"||t==="zebra"||t==="generic")&&(p=600,v=848),f.width=p*r,f.height=v*r,h.clearRect(0,0,f.width,f.height),h.save(),h.scale(r,r);try{await U2(h,e,p,v)}catch(m){console.error("Error rendering label preview:",m),h.fillStyle="#dc3545",h.font="16px sans-serif",h.textAlign="center",h.fillText("Error rendering preview",p/2,v/2)}finally{h.restore(),o(!1)}};return x.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{u()},300),()=>{l.current&&clearTimeout(l.current)}),[e,t,r]),s.jsxs("div",{className:`relative flex items-center justify-center bg-muted/30 rounded-lg p-4 overflow-auto ${n}`,children:[i&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 rounded-lg z-10",children:s.jsx(vs,{className:"w-8 h-8 animate-spin text-primary"})}),s.jsx("canvas",{ref:a,className:"border border-border rounded shadow-sm bg-white",style:{maxWidth:"100%",height:"auto"}})]})}function EJ(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var n5="ScrollArea",[PT]=bs(n5),[PJ,lo]=PT(n5),AT=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:a,scrollHideDelay:i=600,...o}=e,[l,u]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,N]=x.useState(null),[w,j]=x.useState(null),[_,C]=x.useState(0),[k,E]=x.useState(0),[I,D]=x.useState(!1),[O,F]=x.useState(!1),T=Jt(t,U=>u(U)),z=Zu(a);return s.jsx(PJ,{scope:r,type:n,dir:z,scrollHideDelay:i,scrollArea:l,viewport:f,onViewportChange:h,content:p,onContentChange:v,scrollbarX:m,onScrollbarXChange:N,scrollbarXEnabled:I,onScrollbarXEnabledChange:D,scrollbarY:w,onScrollbarYChange:j,scrollbarYEnabled:O,onScrollbarYEnabledChange:F,onCornerWidthChange:C,onCornerHeightChange:E,children:s.jsx(vt.div,{dir:z,...o,ref:T,style:{position:"relative","--radix-scroll-area-corner-width":_+"px","--radix-scroll-area-corner-height":k+"px",...e.style}})})});AT.displayName=n5;var TT="ScrollAreaViewport",RT=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:a,...i}=e,o=lo(TT,r),l=x.useRef(null),u=Jt(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:a}),s.jsx(vt.div,{"data-radix-scroll-area-viewport":"",...i,ref:u,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});RT.displayName=TT;var $l="ScrollAreaScrollbar",s5=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=lo($l,e.__scopeScrollArea),{onScrollbarXEnabledChange:i,onScrollbarYEnabledChange:o}=a,l=e.orientation==="horizontal";return x.useEffect(()=>(l?i(!0):o(!0),()=>{l?i(!1):o(!1)}),[l,i,o]),a.type==="hover"?s.jsx(AJ,{...n,ref:t,forceMount:r}):a.type==="scroll"?s.jsx(TJ,{...n,ref:t,forceMount:r}):a.type==="auto"?s.jsx(LT,{...n,ref:t,forceMount:r}):a.type==="always"?s.jsx(a5,{...n,ref:t}):null});s5.displayName=$l;var AJ=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=lo($l,e.__scopeScrollArea),[i,o]=x.useState(!1);return x.useEffect(()=>{const l=a.scrollArea;let u=0;if(l){const f=()=>{window.clearTimeout(u),o(!0)},h=()=>{u=window.setTimeout(()=>o(!1),a.scrollHideDelay)};return l.addEventListener("pointerenter",f),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),l.removeEventListener("pointerenter",f),l.removeEventListener("pointerleave",h)}}},[a.scrollArea,a.scrollHideDelay]),s.jsx(qs,{present:r||i,children:s.jsx(LT,{"data-state":i?"visible":"hidden",...n,ref:t})})}),TJ=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=lo($l,e.__scopeScrollArea),i=e.orientation==="horizontal",o=S0(()=>u("SCROLL_END"),100),[l,u]=EJ("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>u("HIDE"),a.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,a.scrollHideDelay,u]),x.useEffect(()=>{const f=a.viewport,h=i?"scrollLeft":"scrollTop";if(f){let p=f[h];const v=()=>{const m=f[h];p!==m&&(u("SCROLL"),o()),p=m};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[a.viewport,i,u,o]),s.jsx(qs,{present:r||l!=="hidden",children:s.jsx(a5,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:lt(e.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:lt(e.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),LT=x.forwardRef((e,t)=>{const r=lo($l,e.__scopeScrollArea),{forceMount:n,...a}=e,[i,o]=x.useState(!1),l=e.orientation==="horizontal",u=S0(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?f:h)}},10);return qh(r.viewport,u),qh(r.content,u),s.jsx(qs,{present:n||i,children:s.jsx(a5,{"data-state":i?"visible":"hidden",...a,ref:t})})}),a5=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,a=lo($l,e.__scopeScrollArea),i=x.useRef(null),o=x.useRef(0),[l,u]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=FT(l.viewport,l.content),h={...n,sizes:l,onSizesChange:u,hasThumb:f>0&&f<1,onThumbChange:v=>i.current=v,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:v=>o.current=v};function p(v,m){return MJ(v,o.current,l,m)}return r==="horizontal"?s.jsx(RJ,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const v=a.viewport.scrollLeft,m=_4(v,l,a.dir);i.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:v=>{a.viewport&&(a.viewport.scrollLeft=v)},onDragScroll:v=>{a.viewport&&(a.viewport.scrollLeft=p(v,a.dir))}}):r==="vertical"?s.jsx(LJ,{...h,ref:t,onThumbPositionChange:()=>{if(a.viewport&&i.current){const v=a.viewport.scrollTop,m=_4(v,l);i.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:v=>{a.viewport&&(a.viewport.scrollTop=v)},onDragScroll:v=>{a.viewport&&(a.viewport.scrollTop=p(v))}}):null}),RJ=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=lo($l,e.__scopeScrollArea),[o,l]=x.useState(),u=x.useRef(null),f=Jt(t,u,i.onScrollbarXChange);return x.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),s.jsx(IT,{"data-orientation":"horizontal",...a,ref:f,sizes:r,style:{bottom:0,left:i.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:i.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":N0(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(i.viewport){const v=i.viewport.scrollLeft+h.deltaX;e.onWheelScroll(v),UT(v,p)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&n({content:i.viewport.scrollWidth,viewport:i.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:xx(o.paddingLeft),paddingEnd:xx(o.paddingRight)}})}})}),LJ=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...a}=e,i=lo($l,e.__scopeScrollArea),[o,l]=x.useState(),u=x.useRef(null),f=Jt(t,u,i.onScrollbarYChange);return x.useEffect(()=>{u.current&&l(getComputedStyle(u.current))},[u]),s.jsx(IT,{"data-orientation":"vertical",...a,ref:f,sizes:r,style:{top:0,right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":N0(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(i.viewport){const v=i.viewport.scrollTop+h.deltaY;e.onWheelScroll(v),UT(v,p)&&h.preventDefault()}},onResize:()=>{u.current&&i.viewport&&o&&n({content:i.viewport.scrollHeight,viewport:i.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:xx(o.paddingTop),paddingEnd:xx(o.paddingBottom)}})}})}),[DJ,DT]=PT($l),IT=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:a,onThumbChange:i,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:u,onDragScroll:f,onWheelScroll:h,onResize:p,...v}=e,m=lo($l,r),[N,w]=x.useState(null),j=Jt(t,T=>w(T)),_=x.useRef(null),C=x.useRef(""),k=m.viewport,E=n.content-n.viewport,I=as(h),D=as(u),O=S0(p,10);function F(T){if(_.current){const z=T.clientX-_.current.left,U=T.clientY-_.current.top;f({x:z,y:U})}}return x.useEffect(()=>{const T=z=>{const U=z.target;N?.contains(U)&&I(z,E)};return document.addEventListener("wheel",T,{passive:!1}),()=>document.removeEventListener("wheel",T,{passive:!1})},[k,N,E,I]),x.useEffect(D,[n,D]),qh(N,O),qh(m.content,O),s.jsx(DJ,{scope:r,scrollbar:N,hasThumb:a,onThumbChange:as(i),onThumbPointerUp:as(o),onThumbPositionChange:D,onThumbPointerDown:as(l),children:s.jsx(vt.div,{...v,ref:j,style:{position:"absolute",...v.style},onPointerDown:lt(e.onPointerDown,T=>{T.button===0&&(T.target.setPointerCapture(T.pointerId),_.current=N.getBoundingClientRect(),C.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),F(T))}),onPointerMove:lt(e.onPointerMove,F),onPointerUp:lt(e.onPointerUp,T=>{const z=T.target;z.hasPointerCapture(T.pointerId)&&z.releasePointerCapture(T.pointerId),document.body.style.webkitUserSelect=C.current,m.viewport&&(m.viewport.style.scrollBehavior=""),_.current=null})})})}),vx="ScrollAreaThumb",OT=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,a=DT(vx,e.__scopeScrollArea);return s.jsx(qs,{present:r||a.hasThumb,children:s.jsx(IJ,{ref:t,...n})})}),IJ=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...a}=e,i=lo(vx,r),o=DT(vx,r),{onThumbPositionChange:l}=o,u=Jt(t,p=>o.onThumbChange(p)),f=x.useRef(void 0),h=S0(()=>{f.current&&(f.current(),f.current=void 0)},100);return x.useEffect(()=>{const p=i.viewport;if(p){const v=()=>{if(h(),!f.current){const m=FJ(p,l);f.current=m,l()}};return l(),p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[i.viewport,h,l]),s.jsx(vt.div,{"data-state":o.hasThumb?"visible":"hidden",...a,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:lt(e.onPointerDownCapture,p=>{const m=p.target.getBoundingClientRect(),N=p.clientX-m.left,w=p.clientY-m.top;o.onThumbPointerDown({x:N,y:w})}),onPointerUp:lt(e.onPointerUp,o.onThumbPointerUp)})});OT.displayName=vx;var i5="ScrollAreaCorner",MT=x.forwardRef((e,t)=>{const r=lo(i5,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(OJ,{...e,ref:t}):null});MT.displayName=i5;var OJ=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,a=lo(i5,r),[i,o]=x.useState(0),[l,u]=x.useState(0),f=!!(i&&l);return qh(a.scrollbarX,()=>{const h=a.scrollbarX?.offsetHeight||0;a.onCornerHeightChange(h),u(h)}),qh(a.scrollbarY,()=>{const h=a.scrollbarY?.offsetWidth||0;a.onCornerWidthChange(h),o(h)}),f?s.jsx(vt.div,{...n,ref:t,style:{width:i,height:l,position:"absolute",right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function xx(e){return e?parseInt(e,10):0}function FT(e,t){const r=e/t;return isNaN(r)?0:r}function N0(e){const t=FT(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function MJ(e,t,r,n="ltr"){const a=N0(r),i=a/2,o=t||i,l=a-o,u=r.scrollbar.paddingStart+o,f=r.scrollbar.size-r.scrollbar.paddingEnd-l,h=r.content-r.viewport,p=n==="ltr"?[0,h]:[h*-1,0];return BT([u,f],p)(e)}function _4(e,t,r="ltr"){const n=N0(t),a=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,i=t.scrollbar.size-a,o=t.content-t.viewport,l=i-n,u=r==="ltr"?[0,o]:[o*-1,0],f=Mp(e,u);return BT([0,o],[0,l])(f)}function BT(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function UT(e,t){return e>0&&e<t}var FJ=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return(function a(){const i={left:e.scrollLeft,top:e.scrollTop},o=r.left!==i.left,l=r.top!==i.top;(o||l)&&t(),r=i,n=window.requestAnimationFrame(a)})(),()=>window.cancelAnimationFrame(n)};function S0(e,t){const r=as(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function qh(e,t){const r=as(t);ys(()=>{let n=0;if(e){const a=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return a.observe(e),()=>{window.cancelAnimationFrame(n),a.unobserve(e)}}},[e,r])}var $T=AT,BJ=RT,UJ=MT;const ug=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs($T,{ref:n,className:Oe("relative overflow-hidden",e),...r,children:[s.jsx(BJ,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(o5,{}),s.jsx(UJ,{})]}));ug.displayName=$T.displayName;const o5=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(s5,{ref:n,orientation:t,className:Oe("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(OT,{className:"relative flex-1 rounded-full bg-border"})}));o5.displayName=s5.displayName;var $J="Separator",N4="horizontal",zJ=["horizontal","vertical"],zT=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=N4,...a}=e,i=qJ(n)?n:N4,l=r?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return s.jsx(vt.div,{"data-orientation":i,...l,...a,ref:t})});zT.displayName=$J;function qJ(e){return zJ.includes(e)}var qT=zT;const ss=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},a)=>s.jsx(qT,{ref:a,decorative:r,orientation:t,className:Oe("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));ss.displayName=qT.displayName;function VT(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=Er();x.useEffect(()=>{i()},[]);const i=async()=>{try{n(!0);const{data:v,error:m}=await Ae.from("allergens").select("*").order("is_common",{ascending:!1}).order("severity").order("name");if(m)throw m;t(v||[])}catch(v){console.error("Error fetching allergens:",v),a({title:"Error",description:"Failed to load allergens",variant:"destructive"})}finally{n(!1)}},o=async v=>{try{const{data:m,error:N}=await Ae.from("product_allergens").select(`
          allergen_id,
          allergens (*)
        `).eq("product_id",v);if(N)throw N;return(m||[]).map(w=>w.allergens).filter(Boolean)}catch(m){return console.error("Error fetching product allergens:",m),[]}};return{allergens:e,loading:r,getProductAllergens:o,addProductAllergen:async(v,m)=>{try{const{error:N}=await Ae.from("product_allergens").insert({product_id:v,allergen_id:m});if(N)throw N;return a({title:"Success",description:"Allergen added to product"}),!0}catch(N){return console.error("Error adding product allergen:",N),N.code==="23505"?a({title:"Info",description:"This allergen is already added to the product"}):a({title:"Error",description:"Failed to add allergen",variant:"destructive"}),!1}},removeProductAllergen:async(v,m)=>{try{const{error:N}=await Ae.from("product_allergens").delete().eq("product_id",v).eq("allergen_id",m);if(N)throw N;return a({title:"Success",description:"Allergen removed from product"}),!0}catch(N){return console.error("Error removing product allergen:",N),a({title:"Error",description:"Failed to remove allergen",variant:"destructive"}),!1}},updateProductAllergens:async(v,m)=>{try{const w=(await o(v)).map(C=>C.id),j=m.filter(C=>!w.includes(C)),_=w.filter(C=>!m.includes(C));if(_.length>0){const{error:C}=await Ae.from("product_allergens").delete().eq("product_id",v).in("allergen_id",_);if(C)throw C}if(j.length>0){const{error:C}=await Ae.from("product_allergens").insert(j.map(k=>({product_id:v,allergen_id:k})));if(C)throw C}return a({title:"Success",description:"Product allergens updated"}),!0}catch(N){return console.error("Error updating product allergens:",N),a({title:"Error",description:"Failed to update allergens",variant:"destructive"}),!1}},getCommonAllergens:()=>e.filter(v=>v.is_common),getCriticalAllergens:()=>e.filter(v=>v.severity==="critical"),refetch:i}}const VJ=e=>{switch(e){case"critical":return s.jsx(Hr,{className:"h-4 w-4 text-red-500"});case"warning":return s.jsx(is,{className:"h-4 w-4 text-yellow-500"});case"info":return s.jsx(Wk,{className:"h-4 w-4 text-blue-500"});default:return null}},WT=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-300 hover:bg-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300 hover:bg-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-300 hover:bg-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-300 hover:bg-gray-200"}};function WJ({selectedAllergenIds:e=[],onChange:t,disabled:r=!1,showCommonOnly:n=!1,className:a="",productId:i}){const{allergens:o,loading:l,getProductAllergens:u}=VT(),[f,h]=x.useState(!1),[p,v]=x.useState(!1);x.useEffect(()=>{i&&m()},[i]);const m=async()=>{if(i){v(!0);try{const E=(await u(i)).map(I=>I.id);t(E)}catch(k){console.error("Error loading product allergens:",k)}finally{v(!1)}}},N=k=>{if(r)return;const E=e.includes(k)?e.filter(I=>I!==k):[...e,k];t(E)},w=()=>{r||t([])},j=n||!f?o.filter(k=>k.is_common):o,_=o.filter(k=>e.includes(k.id)),C={critical:j.filter(k=>k.severity==="critical"),warning:j.filter(k=>k.severity==="warning"),info:j.filter(k=>k.severity==="info")};return l||p?s.jsx("div",{className:Oe("space-y-4",a),children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(k=>s.jsx("div",{className:"h-10 bg-gray-200 rounded"},k))})]})}):s.jsxs("div",{className:Oe("space-y-4",a),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(ft,{className:"text-base font-semibold flex items-center gap-2",children:[s.jsx(Hr,{className:"h-5 w-5"}),"Allergens"]}),s.jsxs("div",{className:"flex gap-2",children:[e.length>0&&s.jsx(we,{type:"button",variant:"ghost",size:"sm",onClick:w,disabled:r,children:"Clear All"}),!n&&s.jsx(we,{type:"button",variant:"outline",size:"sm",onClick:()=>h(!f),disabled:r,children:f?"Common Only":"Show All"})]})]}),_.length>0&&s.jsxs(rt,{className:"bg-yellow-50 border-yellow-200",children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs(Qt,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(is,{className:"h-4 w-4 text-yellow-600"}),"Selected Allergens (",_.length,")"]})}),s.jsx(st,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(k=>s.jsxs(ut,{variant:"secondary",className:Oe("text-sm py-1 px-3 cursor-pointer",WT(k.severity)),onClick:()=>!r&&N(k.id),children:[k.icon&&s.jsx("span",{className:"mr-1",children:k.icon}),k.name,!r&&s.jsx(hn,{className:"h-3 w-3 ml-1 inline"})]},k.id))})})]}),s.jsx(ug,{className:"h-[300px] rounded-md border p-4",children:s.jsxs("div",{className:"space-y-4",children:[C.critical.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Hr,{className:"h-4 w-4 text-red-500"}),s.jsx("h4",{className:"text-sm font-semibold text-red-700",children:"Critical Allergens"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:C.critical.map(k=>s.jsx(Z1,{allergen:k,checked:e.includes(k.id),onCheckedChange:()=>N(k.id),disabled:r},k.id))}),s.jsx(ss,{className:"mt-4"})]}),C.warning.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(is,{className:"h-4 w-4 text-yellow-500"}),s.jsx("h4",{className:"text-sm font-semibold text-yellow-700",children:"Common Allergens"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:C.warning.map(k=>s.jsx(Z1,{allergen:k,checked:e.includes(k.id),onCheckedChange:()=>N(k.id),disabled:r},k.id))}),s.jsx(ss,{className:"mt-4"})]}),C.info.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(Wk,{className:"h-4 w-4 text-blue-500"}),s.jsx("h4",{className:"text-sm font-semibold text-blue-700",children:"Other Allergens"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:C.info.map(k=>s.jsx(Z1,{allergen:k,checked:e.includes(k.id),onCheckedChange:()=>N(k.id),disabled:r},k.id))})]})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n||!f?"Showing FDA/EU recognized major allergens (Top 14)":"Showing all allergens including less common ones"})]})}function Z1({allergen:e,checked:t,onCheckedChange:r,disabled:n}){return s.jsxs("div",{className:Oe("flex items-center space-x-3 rounded-md border p-3 transition-colors cursor-pointer",t?WT(e.severity):"hover:bg-accent",n&&"opacity-50 cursor-not-allowed"),onClick:()=>!n&&r(),children:[s.jsx(F2,{checked:t,onCheckedChange:r,disabled:n,id:`allergen-${e.id}`}),s.jsxs("label",{htmlFor:`allergen-${e.id}`,className:"flex-1 cursor-pointer flex items-center gap-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[e.icon&&s.jsx("span",{className:"text-lg",children:e.icon}),s.jsx("span",{children:e.name}),e.severity&&s.jsx("span",{className:"ml-auto",children:VJ(e.severity)})]})]})}const HJ=Xh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),Oo=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Oe(HJ({variant:t}),e),...r}));Oo.displayName="Alert";const Kd=x.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Oe("mb-1 font-medium leading-none tracking-tight",e),...t}));Kd.displayName="AlertTitle";const Mo=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Oe("text-sm [&_p]:leading-relaxed",e),...t}));Mo.displayName="AlertDescription";function Ur({className:e,...t}){return s.jsx("div",{className:Oe("animate-pulse rounded-md bg-muted",e),...t})}function GJ({similarProducts:e,isLoading:t,isDuplicate:r,error:n,onSelectProduct:a,onProceedAnyway:i,showProceedButton:o=!0}){if(!t&&e.length===0&&!n)return null;if(t)return s.jsx(rt,{className:"border-blue-200 bg-blue-50",children:s.jsx(st,{className:"pt-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Ur,{className:"h-5 w-5 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(Ur,{className:"h-4 w-48"}),s.jsx(Ur,{className:"h-3 w-full"}),s.jsx(Ur,{className:"h-3 w-3/4"})]})]})})});if(n)return s.jsxs(Oo,{variant:"destructive",children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Kd,{children:"Error Checking Duplicates"}),s.jsx(Mo,{className:"text-sm",children:n})]});if(e.length===0)return null;const u=Math.max(...e.map(f=>f.similarity_score))>=.85||r;return s.jsxs(Oo,{variant:u?"destructive":"default",className:u?"border-red-500":"border-yellow-500 bg-yellow-50",children:[s.jsx(Hr,{className:`h-4 w-4 ${u?"":"text-yellow-600"}`}),s.jsx(Kd,{className:"mb-3",children:u?" Potential Duplicate Product Detected":"Similar Products Found"}),s.jsx(Mo,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm",children:u?"A very similar product already exists. Please review before creating:":`Found ${e.length} similar product${e.length>1?"s":""}. Consider using an existing product:`}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(f=>s.jsx(rt,{className:"border-gray-200 hover:border-gray-300 transition-colors",children:s.jsx(st,{className:"p-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-sm",children:f.product_name}),s.jsxs(ut,{variant:f.similarity_score>=.85?"destructive":f.similarity_score>=.6?"default":"secondary",className:"text-xs",children:[Math.round(f.similarity_score*100),"% match"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx(OD,{className:"h-3 w-3"}),s.jsxs("span",{children:[f.category_name,f.subcategory_name&&`  ${f.subcategory_name}`]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[f.allergen_count>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-base",children:""}),f.allergen_count," allergen",f.allergen_count>1?"s":""]}),f.last_printed&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(jn,{className:"h-3 w-3"}),"Last printed:"," ",wr(new Date(f.last_printed),"MMM d, yyyy")]}),!f.last_printed&&s.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[s.jsx(jn,{className:"h-3 w-3"}),"Never printed"]})]})]}),a&&s.jsxs(we,{size:"sm",variant:"outline",onClick:()=>a(f),className:"shrink-0",children:[s.jsx(Js,{className:"h-4 w-4 mr-1"}),"Use This"]})]})})},f.product_id))}),o&&i&&s.jsx("div",{className:"flex gap-2 pt-2",children:s.jsx(we,{size:"sm",variant:u?"destructive":"default",onClick:i,className:"w-full",children:u?"Create New Product Anyway":"Proceed with New Product"})})]})})]})}function KJ({productName:e,organizationId:t,minSimilarity:r=.3,debounceMs:n=500,excludeProductId:a}){const[i,o]=x.useState([]),[l,u]=x.useState(!1),[f,h]=x.useState(!1),[p,v]=x.useState(null);x.useEffect(()=>{if(!e||e.trim().length<3||!t){o([]),h(!1);return}const j=setTimeout(async()=>{await m()},n);return()=>clearTimeout(j)},[e,t,r,a]);const m=async()=>{u(!0),v(null);try{const{data:j,error:_}=await Ae.rpc("find_similar_products",{search_name:e.trim(),org_id:t,min_similarity:r});if(_)throw new Error(`Failed to fetch similar products: ${_.message}`);let C=j||[];a&&(C=C.filter(k=>k.product_id!==a)),o(C)}catch(j){const _=j instanceof Error?j.message:"Unknown error";v(_),console.error("Error fetching similar products:",j),o([])}finally{u(!1)}};return{similarProducts:i,isLoading:l,isDuplicate:f,error:p,checkDuplicate:async()=>{if(!e||e.trim().length<3||!t)return h(!1),!1;try{const{data:j,error:_}=await Ae.rpc("is_duplicate_product",{check_name:e.trim(),org_id:t,exclude_id:a||null});if(_)throw new Error(`Failed to check duplicate: ${_.message}`);const C=j===!0;return h(C),C}catch(j){const _=j instanceof Error?j.message:"Unknown error";return v(_),console.error("Error checking duplicate:",j),!1}},refreshSimilarProducts:async()=>{await m()}}}const S4=50;function dg(){const{toast:e}=Er(),{printBatch:t,isLoading:r}=jf(),{isOpen:n,items:a,setItems:i,openQueue:o,closeQueue:l,toggleQueue:u}=vz(),{organizationId:f}=mz(),[h,p]=x.useState(!1),[v,m]=x.useState(null),N=a.reduce((O,F)=>O+F.quantity,0),w=a.length,j=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,_=x.useCallback((O,F=1)=>{if(console.log("usePrintQueue: addToQueue called with:",O.productName,"quantity:",F,"current items:",a.length),F<1){e({title:"Invalid Quantity",description:"Quantity must be at least 1.",variant:"destructive"});return}const T=a.findIndex(B=>B.labelData.productId===O.productId&&B.labelData.prepDate===O.prepDate&&B.labelData.expiryDate===O.expiryDate);if(T>=0){const B=[...a];B[T].quantity+=F,i(B),console.log("usePrintQueue: updated existing item, new total:",B.length),e({title:"Quantity Updated",description:`Added ${F} more labels for "${O.productName}". Total: ${B[T].quantity}`});return}if(a.length>=S4){e({title:"Queue Full",description:`Maximum queue size is ${S4} items. Please print or remove items first.`,variant:"destructive"});return}const z={id:j(),labelData:O,quantity:F,addedAt:new Date().toISOString(),productName:O.productName,categoryName:O.categoryName},U=[...a,z];console.log("usePrintQueue: adding new item, new total:",U.length,"new item:",z),i(U),e({title:"Added to Queue",description:`${F} label${F>1?"s":""} for "${O.productName}" added to print queue.`}),n||(console.log("usePrintQueue: queue was closed, opening in 300ms"),setTimeout(()=>o(),300))},[a,n,o,e,i]),C=x.useCallback(O=>{const F=a.find(T=>T.id===O);F&&(i(a.filter(T=>T.id!==O)),e({title:"Removed from Queue",description:`"${F.productName}" removed from print queue.`}))},[a,e]),k=x.useCallback((O,F)=>{if(F<1){e({title:"Invalid Quantity",description:"Quantity must be at least 1.",variant:"destructive"});return}if(F>100){e({title:"Quantity Too Large",description:"Maximum quantity per item is 100.",variant:"destructive"});return}const T=a.map(z=>z.id===O?{...z,quantity:F}:z);i(T)},[a,e]),E=x.useCallback(()=>{const O=a.length;i([]),e({title:"Queue Cleared",description:`Removed ${O} item${O>1?"s":""} from print queue.`})},[a,e]),I=x.useCallback(async(O,F)=>{if(a.length===0)return e({title:"Empty Queue",description:"No items in print queue.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};if(r)return e({title:"Printer Busy",description:"Please wait for current print job to finish.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};if(!f)return e({title:"Organization Not Found",description:"Unable to determine organization. Please refresh the page.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};p(!0);const T=[];let z=0;const U=N;m({current:0,total:a.length,totalLabels:U,currentItem:"",currentQuantity:0,printedLabels:0,errors:[]});try{for(let V=0;V<a.length;V++){const de=a[V];m({current:V+1,total:a.length,totalLabels:U,currentItem:de.productName,currentQuantity:de.quantity,printedLabels:z,errors:T});try{const se=O||de.labelData.preparedBy||"",Y=F||de.labelData.preparedByName;let W=de.labelData.productId||"";if(W){const{data:q}=await Ae.from("products").select("id").eq("id",W).maybeSingle();q||(W="")}for(let q=0;q<de.quantity;q++)await Wu({productId:W,productName:de.labelData.productName,categoryId:de.labelData.categoryId&&de.labelData.categoryId!=="all"&&de.labelData.categoryId!==""?de.labelData.categoryId:null,categoryName:de.labelData.categoryName,preparedBy:se,preparedByName:Y,prepDate:de.labelData.prepDate,expiryDate:de.labelData.expiryDate,condition:de.labelData.condition,organizationId:f,quantity:"1",unit:de.labelData.unit,batchNumber:de.labelData.batchNumber||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`});const ee=de.labelData,ge={productId:W,productName:ee.productName,categoryId:ee.categoryId,categoryName:ee.categoryName,subcategoryName:ee.subcategoryName,preparedDate:ee.prepDate,useByDate:ee.expiryDate,preparedBy:se,preparedByName:Y,condition:ee.condition,quantity:ee.quantity||"1",unit:ee.unit||"",batchNumber:ee.batchNumber,allergens:(ee.allergens||[]).map(q=>q.name),storageInstructions:`Condition: ${ee.condition}`,organizationId:f},re=Array(de.quantity).fill(ge);await t(re)?z+=de.quantity:T.push({itemId:de.id,productName:de.productName,error:"Print failed"})}catch(se){console.error(`Error printing ${de.productName}:`,se),T.push({itemId:de.id,productName:de.productName,error:se instanceof Error?se.message:"Unknown error"})}await new Promise(se=>setTimeout(se,100))}const B=U-z,K=T.length===0;if(K)i([]),e({title:"Print Complete",description:`Successfully printed ${z} labels!`});else{const V=T.map(de=>de.itemId);i(a.filter(de=>V.includes(de.id))),e({title:"Print Completed with Errors",description:`Printed ${z} labels. ${T.length} item${T.length>1?"s":""} failed.`,variant:"destructive"})}return{success:K,totalPrinted:z,totalFailed:B,errors:T}}catch(B){return console.error("Batch print error:",B),e({title:"Print Error",description:B instanceof Error?B.message:"Unknown error occurred",variant:"destructive"}),{success:!1,totalPrinted:z,totalFailed:U-z,errors:T}}finally{p(!1),m(null)}},[a,N,r,t,e,f]),D=x.useCallback(async O=>{const F=a.filter(U=>O.includes(U.id));if(F.length===0)return e({title:"No Items to Retry",description:"No failed items found in queue.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};const T=[...a];i(F);const z=await I();return z.success||i(T),z},[a,I,e]);return{items:a,totalLabels:N,totalItems:w,isOpen:n,isPrinting:h,printProgress:v,addToQueue:_,removeFromQueue:C,updateQuantity:k,clearQueue:E,toggleQueue:u,openQueue:o,closeQueue:l,printAll:I,retryFailed:D}}var HT=["PageUp","PageDown"],GT=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],KT={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},cm="Slider",[lb,YJ,QJ]=Wp(cm),[YT]=bs(cm,[QJ]),[JJ,k0]=YT(cm),QT=x.forwardRef((e,t)=>{const{name:r,min:n=0,max:a=100,step:i=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:u=0,defaultValue:f=[n],value:h,onValueChange:p=()=>{},onValueCommit:v=()=>{},inverted:m=!1,form:N,...w}=e,j=x.useRef(new Set),_=x.useRef(0),k=o==="horizontal"?ZJ:XJ,[E=[],I]=Ea({prop:h,defaultProp:f,onChange:U=>{[...j.current][_.current]?.focus(),p(U)}}),D=x.useRef(E);function O(U){const B=sZ(E,U);z(U,B)}function F(U){z(U,_.current)}function T(){const U=D.current[_.current];E[_.current]!==U&&v(E)}function z(U,B,{commit:K}={commit:!1}){const V=lZ(i),de=cZ(Math.round((U-n)/i)*i+n,V),se=Mp(de,[n,a]);I((Y=[])=>{const W=rZ(Y,se,B);if(oZ(W,u*i)){_.current=W.indexOf(se);const ee=String(W)!==String(Y);return ee&&K&&v(W),ee?W:Y}else return Y})}return s.jsx(JJ,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:a,valueIndexToChangeRef:_,thumbs:j.current,values:E,orientation:o,form:N,children:s.jsx(lb.Provider,{scope:e.__scopeSlider,children:s.jsx(lb.Slot,{scope:e.__scopeSlider,children:s.jsx(k,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:t,onPointerDown:lt(w.onPointerDown,()=>{l||(D.current=E)}),min:n,max:a,inverted:m,onSlideStart:l?void 0:O,onSlideMove:l?void 0:F,onSlideEnd:l?void 0:T,onHomeKeyDown:()=>!l&&z(n,0,{commit:!0}),onEndKeyDown:()=>!l&&z(a,E.length-1,{commit:!0}),onStepKeyDown:({event:U,direction:B})=>{if(!l){const de=HT.includes(U.key)||U.shiftKey&&GT.includes(U.key)?10:1,se=_.current,Y=E[se],W=i*de*B;z(Y+W,se,{commit:!0})}}})})})})});QT.displayName=cm;var[JT,ZT]=YT(cm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),ZJ=x.forwardRef((e,t)=>{const{min:r,max:n,dir:a,inverted:i,onSlideStart:o,onSlideMove:l,onSlideEnd:u,onStepKeyDown:f,...h}=e,[p,v]=x.useState(null),m=Jt(t,k=>v(k)),N=x.useRef(void 0),w=Zu(a),j=w==="ltr",_=j&&!i||!j&&i;function C(k){const E=N.current||p.getBoundingClientRect(),I=[0,E.width],O=l5(I,_?[r,n]:[n,r]);return N.current=E,O(k-E.left)}return s.jsx(JT,{scope:e.__scopeSlider,startEdge:_?"left":"right",endEdge:_?"right":"left",direction:_?1:-1,size:"width",children:s.jsx(XT,{dir:w,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const E=C(k.clientX);o?.(E)},onSlideMove:k=>{const E=C(k.clientX);l?.(E)},onSlideEnd:()=>{N.current=void 0,u?.()},onStepKeyDown:k=>{const I=KT[_?"from-left":"from-right"].includes(k.key);f?.({event:k,direction:I?-1:1})}})})}),XJ=x.forwardRef((e,t)=>{const{min:r,max:n,inverted:a,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onStepKeyDown:u,...f}=e,h=x.useRef(null),p=Jt(t,h),v=x.useRef(void 0),m=!a;function N(w){const j=v.current||h.current.getBoundingClientRect(),_=[0,j.height],k=l5(_,m?[n,r]:[r,n]);return v.current=j,k(w-j.top)}return s.jsx(JT,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(XT,{"data-orientation":"vertical",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const j=N(w.clientY);i?.(j)},onSlideMove:w=>{const j=N(w.clientY);o?.(j)},onSlideEnd:()=>{v.current=void 0,l?.()},onStepKeyDown:w=>{const _=KT[m?"from-bottom":"from-top"].includes(w.key);u?.({event:w,direction:_?-1:1})}})})}),XT=x.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:a,onSlideEnd:i,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:u,...f}=e,h=k0(cm,r);return s.jsx(vt.span,{...f,ref:t,onKeyDown:lt(e.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(l(p),p.preventDefault()):HT.concat(GT).includes(p.key)&&(u(p),p.preventDefault())}),onPointerDown:lt(e.onPointerDown,p=>{const v=p.target;v.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(v)?v.focus():n(p)}),onPointerMove:lt(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&a(p)}),onPointerUp:lt(e.onPointerUp,p=>{const v=p.target;v.hasPointerCapture(p.pointerId)&&(v.releasePointerCapture(p.pointerId),i(p))})})}),eR="SliderTrack",tR=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=k0(eR,r);return s.jsx(vt.span,{"data-disabled":a.disabled?"":void 0,"data-orientation":a.orientation,...n,ref:t})});tR.displayName=eR;var cb="SliderRange",rR=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,a=k0(cb,r),i=ZT(cb,r),o=x.useRef(null),l=Jt(t,o),u=a.values.length,f=a.values.map(v=>aR(v,a.min,a.max)),h=u>1?Math.min(...f):0,p=100-Math.max(...f);return s.jsx(vt.span,{"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,...n,ref:l,style:{...e.style,[i.startEdge]:h+"%",[i.endEdge]:p+"%"}})});rR.displayName=cb;var ub="SliderThumb",nR=x.forwardRef((e,t)=>{const r=YJ(e.__scopeSlider),[n,a]=x.useState(null),i=Jt(t,l=>a(l)),o=x.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(eZ,{...e,ref:i,index:o})}),eZ=x.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:a,...i}=e,o=k0(ub,r),l=ZT(ub,r),[u,f]=x.useState(null),h=Jt(t,C=>f(C)),p=u?o.form||!!u.closest("form"):!0,v=Kp(u),m=o.values[n],N=m===void 0?0:aR(m,o.min,o.max),w=nZ(n,o.values.length),j=v?.[l.size],_=j?aZ(j,N,l.direction):0;return x.useEffect(()=>{if(u)return o.thumbs.add(u),()=>{o.thumbs.delete(u)}},[u,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${N}% + ${_}px)`},children:[s.jsx(lb.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(vt.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...i,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:lt(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),p&&s.jsx(sR,{name:a??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});nR.displayName=ub;var tZ="RadioBubbleInput",sR=x.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const a=x.useRef(null),i=Jt(a,n),o=rg(t);return x.useEffect(()=>{const l=a.current;if(!l)return;const u=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(u,"value").set;if(o!==t&&h){const p=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(p)}},[o,t]),s.jsx(vt.input,{style:{display:"none"},...r,ref:i,defaultValue:t})});sR.displayName=tZ;function rZ(e=[],t,r){const n=[...e];return n[r]=t,n.sort((a,i)=>a-i)}function aR(e,t,r){const i=100/(r-t)*(e-t);return Mp(i,[0,100])}function nZ(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function sZ(e,t){if(e.length===1)return 0;const r=e.map(a=>Math.abs(a-t)),n=Math.min(...r);return r.indexOf(n)}function aZ(e,t,r){const n=e/2,i=l5([0,50],[0,n]);return(n-i(t)*r)*r}function iZ(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function oZ(e,t){if(t>0){const r=iZ(e);return Math.min(...r)>=t}return!0}function l5(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function lZ(e){return(String(e).split(".")[1]||"").length}function cZ(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var iR=QT,uZ=tR,dZ=rR,fZ=nR;const oR=x.forwardRef(({className:e,...t},r)=>s.jsxs(iR,{ref:r,className:Oe("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(uZ,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(dZ,{className:"absolute h-full bg-primary"})}),s.jsx(fZ,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));oR.displayName=iR.displayName;const X1=[{value:"fresh",label:"Fresh",days:1},{value:"cooked",label:"Cooked",days:3},{value:"frozen",label:"Frozen",days:30},{value:"dry",label:"Dry Storage",days:90},{value:"refrigerated",label:"Refrigerated",days:7}];function hZ({onSave:e,onPrint:t,onCancel:r,selectedUser:n}){const{toast:a}=Er(),{updateProductAllergens:i}=VT(),{user:o}=Ga(),{print:l,settings:u,changePrinter:f,availablePrinters:h,isLoading:p}=jf(),{addToQueue:v}=dg(),[m,N]=x.useState(""),[w,j]=x.useState([]),[_,C]=x.useState([]),[k,E]=x.useState(!1),[I,D]=x.useState([]),[O,F]=x.useState(!1),[T,z]=x.useState([]),[U,B]=x.useState(""),[K,V]=x.useState(""),[de,se]=x.useState(!1),[Y,W]=x.useState(!1),[ee,ge]=x.useState(!1),[re,L]=x.useState([]),[q,J]=x.useState(!1),[ne,ue]=x.useState(""),[ie,oe]=x.useState(!1),[le,ye]=x.useState(!1),[Pe,We]=x.useState(""),[Fe,je]=x.useState(""),[te,Ze]=x.useState(""),[Nt,pt]=x.useState(!1),[Qe,me]=x.useState(!1),[xe,Ce]=x.useState(""),[$e,et]=x.useState(!1),[Ge,tt]=x.useState(!1),[gt,_t]=x.useState(1),[yt,zt]=x.useState(),{similarProducts:bt,isLoading:Jr,isDuplicate:dr,error:Yt}=KJ({productName:Pe,organizationId:m,minSimilarity:.3,debounceMs:500}),or=w.filter(Ee=>Ee.name.toLowerCase().includes(K.toLowerCase())),Pr=new Date().toISOString().split("T")[0],[Ue,ar]=x.useState({categoryId:"",categoryName:"",subcategoryId:"",subcategoryName:"",productId:"",productName:"",condition:"",preparedBy:n?.auth_role_id||o?.id||"",preparedByName:n?.display_name||"",prepDate:Pr,expiryDate:"",quantity:"",unit:"",batchNumber:""});x.useEffect(()=>{(async()=>{if(o?.id)try{const{data:at,error:wt}=await Ae.from("profiles").select("organization_id").eq("user_id",o.id).single();if(wt)throw wt;if(at?.organization_id){N(at.organization_id);const{data:Zt}=await Ae.from("organizations").select("name, address, phone, email, food_safety_registration").eq("id",at.organization_id).single();Zt&&zt({name:Zt.name,address:typeof Zt.address=="string"?Zt.address:Zt.address?JSON.stringify(Zt.address):void 0,phone:Zt.phone||void 0,email:Zt.email||void 0,foodSafetyRegistration:Zt.food_safety_registration||void 0})}}catch(at){console.error("Error fetching organization_id:",at),a({title:"Error",description:"Failed to load organization information",variant:"destructive"})}})()},[o,a]),x.useEffect(()=>{(async()=>{if(n){let at=n.auth_role_id;!at&&o?.id&&(at=o.id,console.warn(`Team member ${n.display_name} (${n.id}) is not linked to a user account. Using current user as fallback.`)),ar(wt=>({...wt,preparedBy:at||"",preparedByName:n.display_name||""}))}})()},[n,o]),x.useEffect(()=>{m&&Ht()},[m]),x.useEffect(()=>{(async()=>{if(!Ue.categoryId||Ue.categoryId==="all"){C([]);return}if(!m){console.log("Waiting for organization_id before fetching subcategories");return}try{E(!0);const{data:at,error:wt}=await Ae.from("label_subcategories").select("id, name").eq("category_id",Ue.categoryId).eq("organization_id",m).order("name");if(wt)throw wt;const Zt=(at||[]).filter(jr=>jr&&typeof jr.id=="string"&&typeof jr.name=="string");C(Zt)}catch(at){console.error("Error fetching form subcategories:",at),C([])}finally{E(!1)}})()},[Ue.categoryId,m]),x.useEffect(()=>{(async()=>{if(!Fe){D([]);return}if(!m){console.log("Waiting for organization_id before fetching dialog subcategories");return}try{F(!0);const{data:at,error:wt}=await Ae.from("label_subcategories").select("id, name").eq("category_id",Fe).eq("organization_id",m).order("name");if(wt)throw wt;const Zt=(at||[]).filter(jr=>jr&&typeof jr.id=="string"&&typeof jr.name=="string");D(Zt)}catch(at){console.error("Error fetching dialog subcategories:",at),D([])}finally{F(!1)}})()},[Fe,m]),x.useEffect(()=>{const Ee=setTimeout(()=>{Xt(Ue.categoryId,Ue.subcategoryId,U)},300);return()=>clearTimeout(Ee)},[Ue.categoryId,Ue.subcategoryId,U]);const Ht=async()=>{try{if(!m){console.log("Waiting for organization_id before fetching categories");return}const{data:Ee,error:at}=await Ae.from("label_categories").select("id, name").eq("organization_id",m).order("name");if(at)throw at;console.log("Fetched categories:",Ee),j(Ee||[])}catch(Ee){console.error("Error fetching categories:",Ee)}},Xt=async(Ee,at,wt)=>{try{if(!m){console.log("Waiting for organization_id before fetching products");return}let Zt=Ae.from("products").select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          label_subcategories:subcategory_id (
            id,
            name
          )
        `).eq("organization_id",m).order("name").limit(50);Ee&&Ee!=="all"&&(Zt=Zt.eq("category_id",Ee)),at&&(Zt=Zt.eq("subcategory_id",at)),wt&&(Zt=Zt.ilike("name",`%${wt}%`));const{data:jr,error:tn}=await Zt;if(tn)throw tn;const Nn=(jr||[]).filter(Pa=>Pa&&typeof Pa.id=="string"&&typeof Pa.name=="string");console.log("Fetched products:",Nn.length,"valid products"),z(Nn)}catch(Zt){console.error("Error fetching products:",Zt),z([])}},Fr=async()=>{if(!ne.trim()){a({title:"Invalid Name",description:"Please enter a category name",variant:"destructive"});return}oe(!0);try{const{data:Ee,error:at}=await Ae.from("label_categories").insert({name:ne.trim()}).select().single();if(at){if(at.code==="23505")a({title:"Category Already Exists",description:`A category named "${ne}" already exists in your organization.`,variant:"destructive"});else throw at;return}a({title:"Category Created",description:`"${ne}" has been created successfully.`}),j(wt=>[...wt,Ee]),ar(wt=>({...wt,categoryId:Ee.id,categoryName:Ee.name,productId:"",productName:""})),ue(""),J(!1),V(""),se(!1)}catch(Ee){console.error("Error creating category:",Ee),a({title:"Error",description:"Failed to create category",variant:"destructive"})}finally{oe(!1)}},er=async()=>{if(!Pe.trim()){a({title:"Invalid Name",description:"Please enter a product name",variant:"destructive"});return}if(!Fe){a({title:"Category Required",description:"Please select a category for the product",variant:"destructive"});return}pt(!0);try{const{data:Ee,error:at}=await Ae.from("products").insert({name:Pe.trim(),category_id:Fe,subcategory_id:te||null,organization_id:m}).select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          label_subcategories:subcategory_id (
            id,
            name
          )
        `).single();if(at){if(at.code==="23505")a({title:"Product Already Exists",description:`A product named "${Pe}" already exists in your organization.`,variant:"destructive"});else throw at;return}a({title:"Product Created",description:`"${Pe}" has been created successfully.`}),z(wt=>[...wt,Ee]),ar(wt=>({...wt,productId:Ee.id,productName:Ee.name,categoryId:Ee.category_id||wt.categoryId,categoryName:Ee.label_categories?.name||wt.categoryName,subcategoryId:Ee.subcategory_id||"",subcategoryName:Ee.label_subcategories?.name||"",unit:Ee.measuring_units?.abbreviation||""})),We(""),je(""),Ze(""),ye(!1),B(""),W(!1)}catch(Ee){console.error("Error creating product:",Ee),a({title:"Error",description:"Failed to create product",variant:"destructive"})}finally{pt(!1)}},Rt=(Ee,at)=>{const wt=X1.find(jr=>jr.value===Ee);if(!wt||!at)return"";const Zt=new Date(at);return Zt.setDate(Zt.getDate()+wt.days),Zt.toISOString().split("T")[0]},Ir=Ee=>{ar(at=>{const wt=Rt(Ee,at.prepDate);return{...at,condition:Ee,expiryDate:wt}}),ge(!1)},Kt=Ee=>{ar(at=>{const wt=at.condition?Rt(at.condition,Ee):"";return{...at,prepDate:Ee,expiryDate:wt}})},ir=Ee=>{const at=T.find(wt=>wt.id===Ee);at&&(ar(wt=>({...wt,productId:at.id,productName:at.name,unit:at.measuring_units?.abbreviation||"",categoryId:at.category_id||wt.categoryId,categoryName:at.label_categories?.name||wt.categoryName,subcategoryId:at.subcategory_id||"",subcategoryName:at.label_subcategories?.name||""})),W(!1))},Ar=async()=>{if(!xe.trim()){a({title:"Invalid Name",description:"Please enter a draft name",variant:"destructive"});return}et(!0);try{const{error:Ee}=await Ae.from("label_drafts").insert({draft_name:xe.trim(),form_data:Ue,user_id:(await Ae.auth.getUser()).data.user?.id||""});if(Ee)throw Ee;a({title:"Draft Saved",description:`Draft "${xe}" has been saved successfully.`}),Ce(""),me(!1)}catch(Ee){console.error("Error saving draft:",Ee),a({title:"Error",description:"Failed to save draft",variant:"destructive"})}finally{et(!1)}},un=async()=>{if(!Ue.productId||!Ue.condition){a({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}Ue.productId&&re.length>0&&(await i(Ue.productId,re)||a({title:"Warning",description:"Failed to save allergen information, but continuing with print",variant:"destructive"}));try{await Wu({productId:Ue.productId,productName:Ue.productName,categoryId:Ue.categoryId==="all"?null:Ue.categoryId,categoryName:Ue.categoryName,preparedBy:Ue.preparedBy,preparedByName:Ue.preparedByName,prepDate:Ue.prepDate,expiryDate:Ue.expiryDate,condition:Ue.condition,quantity:Ue.quantity,unit:Ue.unit,batchNumber:Ue.batchNumber,organizationId:m||""}),await l({productName:Ue.productName,categoryName:Ue.categoryName,subcategoryName:Ue.subcategoryName,preparedDate:Ue.prepDate,useByDate:Ue.expiryDate,allergens:[],storageInstructions:`Condition: ${Ue.condition}`,barcode:Ue.batchNumber})&&t&&t(Ue)}catch(Ee){console.error("Error in print process:",Ee),a({title:"Print Error",description:"Failed to complete print operation",variant:"destructive"})}},At=()=>{if(!Ue.productId||!Ue.prepDate||!Ue.expiryDate){a({title:"Incomplete Form",description:"Please fill in all required fields before adding to queue.",variant:"destructive"});return}const Ee=parseInt(Ue.quantity)||1;v(Ue,Ee)};return!m&&o?.id?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading organization information..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[r&&s.jsx(we,{onClick:r,variant:"ghost",size:"icon",children:s.jsx(gp,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Create Label"}),s.jsx("p",{className:"text-muted-foreground",children:"Fill in the information for your food label"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(we,{onClick:()=>me(!0),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(Qk,{className:"w-4 h-4"}),"Save Draft"]}),s.jsxs(we,{onClick:At,variant:"outline",disabled:p||!Ue.productId||!Ue.prepDate||!Ue.expiryDate,className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-4 h-4"}),"Add to Queue (",Ue.quantity||1,")"]}),s.jsxs(we,{onClick:un,disabled:p,variant:"hero",className:"flex items-center gap-2",children:[s.jsx(Sa,{className:"w-4 h-4"}),p?"Printing...":"Print Now"]})]})]}),s.jsx(rt,{className:"bg-muted/50",children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsx(Bc,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(ft,{className:"text-sm font-medium",children:"Current Printer"}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:u?.name||"No printer selected"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[u?.paperWidth,"mm  ",u?.paperHeight,"mm"]})]})]}),s.jsxs(Nr,{value:u?.type||"generic",onValueChange:f,children:[s.jsx(_r,{className:"w-[200px] flex-shrink-0",children:s.jsx(Sr,{})}),s.jsx(Cr,{children:h.map(Ee=>s.jsx(qe,{value:Ee.type,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sa,{className:"h-4 w-4 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium",children:Ee.name}),s.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1",children:Ee.description})]})]})},Ee.type))})]})]})})}),s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(Ca,{className:"w-5 h-5"}),"Product Information"]})}),s.jsxs(st,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Category *"}),s.jsxs(Lc,{open:de,onOpenChange:se,children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",role:"combobox","aria-expanded":de,className:"w-full justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[Ue.categoryId&&Ue.categoryId!=="all"&&w.find(Ee=>Ee.id===Ue.categoryId)?.icon&&s.jsx("span",{className:"text-lg",children:w.find(Ee=>Ee.id===Ue.categoryId)?.icon}),s.jsx("span",{children:Ue.categoryName||"Select category..."})]}),s.jsx(Jg,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(kl,{className:"w-full p-0",align:"start",side:"bottom",children:s.jsxs(ep,{shouldFilter:!1,children:[s.jsx(tp,{placeholder:"Search category...",value:K,onValueChange:V}),s.jsxs(rp,{children:[or.length===0&&s.jsx(np,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 px-4 text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No category found. Would you like to create one?"}),s.jsxs(we,{variant:"outline",size:"sm",onClick:()=>{ue(K),J(!0),se(!1)},className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-4 h-4"}),'Create "',K||"New Category",'"']})]})}),s.jsxs(sp,{children:[s.jsxs(xh,{value:"All Categories",onSelect:()=>{ar(Ee=>({...Ee,categoryId:"all",categoryName:"All Categories",subcategoryId:"",subcategoryName:"",productId:"",productName:""})),B(""),V(""),se(!1)},children:[s.jsx(Na,{className:Oe("mr-2 h-4 w-4",Ue.categoryId==="all"?"opacity-100":"opacity-0")}),"All Categories"]}),or.map(Ee=>s.jsxs(xh,{value:Ee.name,onSelect:()=>{ar(at=>({...at,categoryId:Ee.id,categoryName:Ee.name,subcategoryId:"",subcategoryName:"",productId:"",productName:""})),B(""),V(""),se(!1)},children:[s.jsx(Na,{className:Oe("mr-2 h-4 w-4",Ue.categoryId===Ee.id?"opacity-100":"opacity-0")}),Ee.icon&&s.jsx("span",{className:"mr-2 text-lg",children:Ee.icon}),Ee.name]},Ee.id))]})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ft,{htmlFor:"subcategory",children:["Subcategory (Optional)",!Ue.categoryId&&s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"- Select a category first"})]}),Ue.categoryId&&Ue.categoryId!=="all"?k?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),"Loading subcategories..."]}):s.jsxs(Nr,{value:Ue.subcategoryId||"none",onValueChange:Ee=>{const at=_.find(wt=>wt.id===Ee);ar(wt=>({...wt,subcategoryId:Ee==="none"?"":Ee,subcategoryName:Ee==="none"?"":at?.name||"",productId:"",productName:""})),B("")},children:[s.jsx(_r,{id:"subcategory",children:s.jsx(Sr,{placeholder:"Select a subcategory...",children:Ue.subcategoryId&&_.find(Ee=>Ee.id===Ue.subcategoryId)&&s.jsxs("span",{className:"flex items-center gap-2",children:[_.find(Ee=>Ee.id===Ue.subcategoryId)?.icon&&s.jsx("span",{className:"text-lg",children:_.find(Ee=>Ee.id===Ue.subcategoryId)?.icon}),s.jsx("span",{children:Ue.subcategoryName})]})})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"none",children:"None"}),Array.isArray(_)&&_.map(Ee=>s.jsx(qe,{value:Ee.id,children:s.jsxs("span",{className:"flex items-center gap-2",children:[Ee.icon&&s.jsx("span",{className:"text-lg",children:Ee.icon}),s.jsx("span",{children:Ee.name})]})},Ee.id))]})]}):s.jsx(Nr,{disabled:!0,children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select a category first..."})})}),Ue.categoryId&&Ue.categoryId!=="all"&&!k&&s.jsx("p",{className:"text-xs text-muted-foreground",children:_.length>0?`${_.length} subcategor${_.length===1?"y":"ies"} available`:"No subcategories available for this category"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Product *"}),s.jsxs(Lc,{open:Y,onOpenChange:W,children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",role:"combobox","aria-expanded":Y,className:"w-full justify-between",children:[Ue.productName||"Select product...",s.jsx(Jg,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(kl,{className:"w-full p-0",align:"start",side:"bottom",children:s.jsxs(ep,{shouldFilter:!1,children:[s.jsx(tp,{placeholder:"Search product...",value:U,onValueChange:B}),s.jsxs(rp,{children:[T.length===0&&s.jsx(np,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 px-4 text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No product found. Would you like to create one?"}),s.jsxs(we,{variant:"outline",size:"sm",onClick:()=>{We(U),je(Ue.categoryId==="all"?"":Ue.categoryId),ye(!0),W(!1)},className:"flex items-center gap-2",children:[s.jsx(vn,{className:"w-4 h-4"}),'Create "',U||"New Product",'"']})]})}),Array.isArray(T)&&T.length>0&&s.jsx(sp,{children:T.map(Ee=>s.jsxs(xh,{value:Ee.name,onSelect:()=>ir(Ee.id),children:[s.jsx(Na,{className:Oe("mr-2 h-4 w-4",Ue.productId===Ee.id?"opacity-100":"opacity-0")}),Ee.name]},Ee.id))})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Condition *"}),s.jsxs(Lc,{open:ee,onOpenChange:ge,children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",role:"combobox","aria-expanded":ee,className:"w-full justify-between",children:[X1.find(Ee=>Ee.value===Ue.condition)?.label||"Select condition...",s.jsx(Jg,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(kl,{className:"w-full p-0",align:"start",children:s.jsxs(ep,{children:[s.jsx(tp,{placeholder:"Search condition..."}),s.jsxs(rp,{children:[s.jsx(np,{children:"No condition found."}),s.jsx(sp,{children:X1.map(Ee=>s.jsxs(xh,{value:Ee.label,onSelect:()=>Ir(Ee.value),children:[s.jsx(Na,{className:Oe("mr-2 h-4 w-4",Ue.condition===Ee.value?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:Ee.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee.days," day",Ee.days!==1?"s":""," shelf life"]})]})]},Ee.value))})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Prepared By"}),s.jsx(St,{value:Ue.preparedByName,readOnly:!0,className:"bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"prep-date",children:"Prep Date"}),s.jsx(St,{id:"prep-date",type:"date",value:Ue.prepDate,onChange:Ee=>Kt(Ee.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"expiry-date",children:"Expiry Date"}),s.jsx(St,{id:"expiry-date",type:"date",value:Ue.expiryDate,readOnly:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically calculated based on condition"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"quantity",children:"Quantity (Optional)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(we,{type:"button",variant:"outline",size:"icon",onClick:()=>{const Ee=parseInt(Ue.quantity)||0;Ee>0&&ar(at=>({...at,quantity:String(Ee-1)}))},disabled:!Ue.quantity||parseInt(Ue.quantity)<=0,className:"h-10 w-10 shrink-0",children:s.jsx(Db,{className:"h-4 w-4"})}),s.jsx(St,{id:"quantity",type:"number",value:Ue.quantity,onChange:Ee=>{const at=Ee.target.value;(at===""||parseInt(at)>=0)&&ar(wt=>({...wt,quantity:at}))},placeholder:"0",min:"0",className:"text-center"}),s.jsx(we,{type:"button",variant:"outline",size:"icon",onClick:()=>{const Ee=parseInt(Ue.quantity)||0;ar(at=>({...at,quantity:String(Ee+1)}))},className:"h-10 w-10 shrink-0",children:s.jsx(vn,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"unit",children:"Unit"}),s.jsxs(Nr,{value:Ue.unit,onValueChange:Ee=>ar(at=>({...at,unit:Ee})),children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select unit..."})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"kg",children:"kg (Kilogram)"}),s.jsx(qe,{value:"g",children:"g (Gram)"}),s.jsx(qe,{value:"L",children:"L (Liter)"}),s.jsx(qe,{value:"mL",children:"mL (Milliliter)"}),s.jsx(qe,{value:"pcs",children:"pcs (Pieces)"}),s.jsx(qe,{value:"oz",children:"oz (Ounce)"}),s.jsx(qe,{value:"lb",children:"lb (Pound)"}),s.jsx(qe,{value:"gal",children:"gal (Gallon)"}),s.jsx(qe,{value:"servings",children:"Servings"}),s.jsx(qe,{value:"portions",children:"Portions"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-loaded from product or select manually"})]})]})]})]}),Ue.productId&&s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsx(Qt,{children:"Allergen Information"})}),s.jsx(st,{children:s.jsx(WJ,{selectedAllergenIds:re,onChange:L,productId:Ue.productId,showCommonOnly:!1})})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[Ge?s.jsx(Mc,{className:"w-5 h-5"}):s.jsx(Kv,{className:"w-5 h-5"}),"Label Preview"]}),s.jsx(we,{variant:"outline",size:"sm",onClick:()=>tt(!Ge),className:"flex items-center gap-2",children:Ge?s.jsxs(s.Fragment,{children:[s.jsx(Kv,{className:"w-4 h-4"}),"Hide Preview"]}):s.jsxs(s.Fragment,{children:[s.jsx(Mc,{className:"w-4 h-4"}),"Show Preview"]})})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Preview shows how your label will look with the current printer: ",s.jsx("span",{className:"font-medium text-foreground",children:u?.name||"No printer selected"})]})]}),Ge&&s.jsxs(st,{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(ft,{className:"text-xs font-medium",children:"Current Printer"}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background rounded-md border",children:[s.jsx(Sa,{className:"w-5 h-5 text-primary flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:u?.name||"No printer selected"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[u?.paperWidth,"mm  ",u?.paperHeight,"mm"]})]})]})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs(ft,{className:"text-xs font-medium flex items-center justify-between",children:[s.jsx("span",{children:"Zoom"}),s.jsxs("span",{className:"text-muted-foreground",children:[Math.round(gt*100),"%"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(we,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>{const Ee=[.5,.75,1,1.25,1.5],at=Ee.indexOf(gt);at>0&&_t(Ee[at-1])},disabled:gt<=.5,children:s.jsx(BD,{className:"w-4 h-4"})}),s.jsx(oR,{value:[gt*100],onValueChange:([Ee])=>{const at=Ee/100;if(at>=.5&&at<=1.5){const Zt=[.5,.75,1,1.25,1.5].reduce((jr,tn)=>Math.abs(tn-at)<Math.abs(jr-at)?tn:jr);_t(Zt)}},min:50,max:150,step:25,className:"flex-1"}),s.jsx(we,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>{const Ee=[.5,.75,1,1.25,1.5],at=Ee.indexOf(gt);at<Ee.length-1&&_t(Ee[at+1])},disabled:gt>=1.5,children:s.jsx(cw,{className:"w-4 h-4"})})]})]})]}),s.jsx(CJ,{labelData:{...Ue,organizationDetails:yt},format:u?.type||"generic",scale:gt,className:"min-h-[400px]"}),s.jsx("div",{className:"text-xs text-muted-foreground text-center p-4 bg-muted/30 rounded-lg",children:s.jsxs("p",{children:["All labels use the same professional layout.",u?.type==="pdf"&&" This preview shows how it will appear on A4 paper (210mm  297mm).",u?.type==="zebra"&&" This preview shows how it will appear on thermal printer labels (60mm  60mm).",u?.type==="generic"&&" This preview shows how it will appear on standard label paper (60mm  60mm).",!u&&" Select a printer to see the label preview with appropriate dimensions."]})})]})]}),s.jsx(Tl,{open:q,onOpenChange:J,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Create New Category"}),s.jsx(Rl,{children:"Are you sure you want to create a new category with the following name?"})]}),s.jsxs("div",{className:"my-4",children:[s.jsx(ft,{htmlFor:"category-name",children:"Category Name"}),s.jsx(St,{id:"category-name",value:ne,onChange:Ee=>ue(Ee.target.value),placeholder:"Enter category name...",className:"mt-2",onKeyDown:Ee=>{Ee.key==="Enter"&&!ie&&Fr()}})]}),s.jsxs(zo,{children:[s.jsx(Wo,{disabled:ie,children:"Cancel"}),s.jsx(Vo,{onClick:Fr,disabled:ie||!ne.trim(),children:ie?"Creating...":"Create Category"})]})]})}),s.jsx(Tl,{open:Qe,onOpenChange:me,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Save Draft"}),s.jsx(Rl,{children:"Give your draft a name to save your progress and continue later."})]}),s.jsxs("div",{className:"my-4",children:[s.jsx(ft,{htmlFor:"draft-name",children:"Draft Name *"}),s.jsx(St,{id:"draft-name",value:xe,onChange:Ee=>Ce(Ee.target.value),placeholder:"e.g., Chicken Breast Label",className:"mt-2",onKeyDown:Ee=>{Ee.key==="Enter"&&!$e&&xe.trim()&&Ar()}})]}),s.jsxs(zo,{children:[s.jsx(Wo,{disabled:$e,children:"Cancel"}),s.jsx(Vo,{onClick:Ar,disabled:$e||!xe.trim(),children:$e?"Saving...":"Save Draft"})]})]})}),s.jsx(Tl,{open:le,onOpenChange:ye,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Create New Product"}),s.jsx(Rl,{children:"Fill in the details to create a new product."})]}),s.jsxs("div",{className:"space-y-4 my-4",children:[s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"product-name",children:"Product Name *"}),s.jsx(St,{id:"product-name",value:Pe,onChange:Ee=>We(Ee.target.value),placeholder:"Enter product name...",className:"mt-2",onKeyDown:Ee=>{Ee.key==="Enter"&&!Nt&&Pe.trim()&&Fe&&er()}}),m&&s.jsx(GJ,{similarProducts:bt,isLoading:Jr,isDuplicate:dr,error:Yt,onSelectProduct:Ee=>{ye(!1);const at=T.find(wt=>wt.id===Ee.product_id);at&&(ar(wt=>({...wt,productId:at.id,productName:at.name,categoryId:at.category_id||"",categoryName:at.label_categories?.name||"",subcategoryId:at.subcategory_id||"",subcategoryName:at.label_subcategories?.name||""})),a({title:"Product Selected",description:`Using existing product: ${at.name}`}))},showProceedButton:!1})]}),s.jsxs("div",{children:[s.jsx(ft,{htmlFor:"product-category",children:"Category *"}),s.jsxs(Lc,{children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",role:"combobox",className:"w-full justify-between mt-2",children:[w.find(Ee=>Ee.id===Fe)?.name||"Select category...",s.jsx(Jg,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(kl,{className:"w-full p-0",align:"start",children:s.jsxs(ep,{children:[s.jsx(tp,{placeholder:"Search category..."}),s.jsxs(rp,{children:[s.jsx(np,{children:"No category found."}),s.jsx(sp,{children:w.map(Ee=>s.jsxs(xh,{value:Ee.name,onSelect:()=>je(Ee.id),children:[s.jsx(Na,{className:Oe("mr-2 h-4 w-4",Fe===Ee.id?"opacity-100":"opacity-0")}),Ee.icon&&s.jsx("span",{className:"mr-2 text-lg",children:Ee.icon}),Ee.name]},Ee.id))})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs(ft,{htmlFor:"product-subcategory",children:["Subcategory (Optional)",!Fe&&s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"- Select a category first"})]}),s.jsx("div",{className:"mt-2",children:Fe?O?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),"Loading subcategories..."]}):s.jsxs(Nr,{value:te||"none",onValueChange:Ee=>Ze(Ee==="none"?"":Ee),children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select a subcategory..."})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"none",children:"None"}),Array.isArray(I)&&I.map(Ee=>s.jsx(qe,{value:Ee.id,children:s.jsxs("span",{className:"flex items-center gap-2",children:[Ee.icon&&s.jsx("span",{className:"text-lg",children:Ee.icon}),s.jsx("span",{children:Ee.name})]})},Ee.id))]})]}):s.jsx(Nr,{disabled:!0,children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select a category first..."})})})})]})]}),s.jsxs(zo,{children:[s.jsx(Wo,{disabled:Nt,children:"Cancel"}),s.jsx(Vo,{onClick:er,disabled:Nt||!Pe.trim()||!Fe||dr,children:Nt?"Creating...":"Create Product"})]})]})})]})}function mZ({open:e,onOpenChange:t,onConfirm:r,productName:n}){const[a,i]=x.useState("1"),[o,l]=x.useState("Unit"),[u,f]=x.useState("REFRIGERATED"),h=()=>{r({quantity:a,unit:o,condition:u}),i("1"),l("Unit"),f("REFRIGERATED")},p=()=>{t(!1),i("1"),l("Unit"),f("REFRIGERATED")};return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-width-[425px]",children:[s.jsxs($s,{children:[s.jsx(zs,{children:"Quick Print - Additional Details"}),s.jsxs(Wa,{children:["Complete the details for ",s.jsx("span",{className:"font-semibold",children:n})]})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(ft,{htmlFor:"quantity",className:"text-right flex items-center gap-1",children:[s.jsx(Ca,{className:"h-4 w-4"}),"Quantity"]}),s.jsx(St,{id:"quantity",type:"number",min:"1",value:a,onChange:v=>i(v.target.value),className:"col-span-3",autoFocus:!0})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(ft,{htmlFor:"unit",className:"text-right flex items-center gap-1",children:[s.jsx(LD,{className:"h-4 w-4"}),"Unit"]}),s.jsxs(Nr,{value:o,onValueChange:l,children:[s.jsx(_r,{className:"col-span-3",children:s.jsx(Sr,{placeholder:"Select unit"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"Unit",children:"Unit"}),s.jsx(qe,{value:"kg",children:"Kilogram (kg)"}),s.jsx(qe,{value:"g",children:"Gram (g)"}),s.jsx(qe,{value:"L",children:"Liter (L)"}),s.jsx(qe,{value:"mL",children:"Milliliter (mL)"}),s.jsx(qe,{value:"lb",children:"Pound (lb)"}),s.jsx(qe,{value:"oz",children:"Ounce (oz)"}),s.jsx(qe,{value:"Portion",children:"Portion"}),s.jsx(qe,{value:"Box",children:"Box"}),s.jsx(qe,{value:"Bag",children:"Bag"}),s.jsx(qe,{value:"Container",children:"Container"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(ft,{htmlFor:"condition",className:"text-right flex items-center gap-1",children:[s.jsx(Zk,{className:"h-4 w-4"}),"Condition"]}),s.jsxs(Nr,{value:u,onValueChange:f,children:[s.jsx(_r,{className:"col-span-3",children:s.jsx(Sr,{placeholder:"Select condition"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"REFRIGERATED",children:"Refrigerated"}),s.jsx(qe,{value:"FROZEN",children:"Frozen"}),s.jsx(qe,{value:"ROOM TEMP",children:"Room Temperature"}),s.jsx(qe,{value:"HOT",children:"Hot"})]})]})]})]}),s.jsxs(Zo,{children:[s.jsx(we,{variant:"outline",onClick:p,children:"Cancel"}),s.jsxs(we,{onClick:h,className:"gap-2",children:[s.jsx(Ca,{className:"h-4 w-4"}),"Print Label"]})]})]})})}function pZ({mode:e,onModeChange:t,className:r}){return s.jsxs("div",{className:Oe("flex gap-2 p-1 bg-muted rounded-lg",r),children:[s.jsxs(we,{variant:e==="categories"?"default":"ghost",className:Oe("flex-1 transition-all",e==="categories"&&"shadow-sm"),onClick:()=>t("categories"),children:[s.jsx(qk,{className:"w-4 h-4 mr-2"}),"By Categories"]}),s.jsxs(we,{variant:e==="products"?"default":"ghost",className:Oe("flex-1 transition-all",e==="products"&&"shadow-sm"),onClick:()=>t("products"),children:[s.jsx(Ca,{className:"w-4 h-4 mr-2"}),"By Products"]})]})}function gZ({navigationStack:e,onBack:t,onNavigateToLevel:r,className:n}){const a=e.length>0;return s.jsxs("div",{className:Oe("flex items-center gap-2 text-sm",n),children:[s.jsxs(we,{variant:"outline",size:"sm",onClick:t,disabled:!a,className:"h-9",children:[s.jsx(Rb,{className:"w-4 h-4 mr-1"}),"Back"]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(qk,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Categories"}),e.length>0&&s.jsx(xp,{className:"w-3 h-3 text-muted-foreground"}),e.map((i,o)=>s.jsxs(x.Fragment,{children:[s.jsxs(we,{variant:"link",size:"sm",onClick:()=>r(o),className:"h-auto p-0 text-sm hover:text-primary",children:[s.jsx("span",{className:"mr-1 text-base",children:i.icon}),i.name]}),o<e.length-1&&s.jsx(xp,{className:"w-3 h-3 text-muted-foreground"})]},o))]})]})}const vZ={product:""};function xZ(){return vZ.product}function lR({product:e,open:t,onOpenChange:r}){const{addToQueue:n}=dg(),[a,i]=x.useState(1),o=()=>{if(!e)return;const u=new Date().toISOString().split("T")[0],f=new Date;f.setDate(f.getDate()+1);const h=f.toISOString().split("T")[0],p={categoryId:e.category_id||e.label_categories?.id||"",categoryName:e.label_categories?.name||"Uncategorized",subcategoryId:void 0,subcategoryName:void 0,productId:e.id,productName:e.name,condition:"Fresh",preparedBy:"",preparedByName:"",prepDate:u,expiryDate:h,quantity:a.toString(),unit:e.measuring_units?.abbreviation||"units",batchNumber:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`};n(p,a),r(!1),i(1)},l=u=>{const f=a+u;f>=1&&f<=100&&i(f)};return s.jsx(ea,{open:t,onOpenChange:r,children:s.jsxs(Us,{className:"sm:max-w-[425px]",children:[s.jsxs($s,{children:[s.jsx(zs,{children:"Add to Print Queue"}),s.jsxs(Wa,{children:["Add ",e?.name," to your print queue with today's date and tomorrow's expiry."]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Product"}),s.jsx("div",{className:"text-sm font-medium",children:e?.name}),e?.label_categories&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Category: ",e.label_categories.name]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Number of Labels"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(we,{type:"button",variant:"outline",size:"icon",onClick:()=>l(-1),disabled:a<=1,children:s.jsx(Db,{className:"w-4 h-4"})}),s.jsx(St,{type:"number",min:1,max:100,value:a,onChange:u=>{const f=parseInt(u.target.value);!isNaN(f)&&f>=1&&f<=100&&i(f)},className:"text-center text-lg font-semibold w-24"}),s.jsx(we,{type:"button",variant:"outline",size:"icon",onClick:()=>l(1),disabled:a>=100,children:s.jsx(vn,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Max 100 labels per item"})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[s.jsx("p",{className:"text-xs font-medium",children:"Default Values:"}),s.jsxs("ul",{className:"text-xs text-muted-foreground space-y-0.5",children:[s.jsx("li",{children:" Prep Date: Today"}),s.jsx("li",{children:" Expiry Date: Tomorrow"}),s.jsx("li",{children:" Condition: Fresh"})]}),s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-500 mt-2",children:" Edit dates in the queue before printing if needed"})]})]}),s.jsxs(Zo,{children:[s.jsx(we,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(we,{type:"button",variant:"hero",onClick:o,children:["Add ",a," Label",a>1?"s":""," to Queue"]})]})]})})}const yx=e=>{if(!e)return"safe";const t=new Date,r=new Date(e);if(r<t)return"expired";const n=1440*60*1e3;return r.getTime()-t.getTime()<=n?"warning":"safe"},wx=e=>{switch(e){case"expired":return"#ef4444";case"warning":return"#f59e0b";case"safe":return"#10b981";default:return"#6b7280"}},db=e=>{switch(e){case"expired":return"Expired";case"warning":return"Expiring Soon";case"safe":return"";default:return"Unknown"}},fb=e=>e==="expired"||e==="warning";function yZ({navigationStack:e,categories:t,subcategories:r,products:n,loadingSubcategories:a,loadingProducts:i,printingProductId:o,successProductId:l,onCategorySelect:u,onSubcategorySelect:f,onProductSelect:h,className:p}){const{user:v}=Ga(),[m,N]=x.useState(null),[w,j]=x.useState(!1),_=(k,E)=>{k.stopPropagation(),N(E),j(!0)},C=e.length===0?"categories":e[e.length-1].type==="category"?"subcategories":"products";if(C==="categories")return t.length===0?s.jsxs("div",{className:Oe("text-center py-12",p),children:[s.jsx(Ca,{className:"w-16 h-16 mx-auto mb-4 text-muted-foreground/30"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Categories Found"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4 max-w-md mx-auto",children:"No label categories are available for your organization. Please contact your administrator or create categories in Settings."}),s.jsx("div",{className:"text-xs text-muted-foreground/60",children:"Check browser console for details (F12)"})]}):s.jsxs("div",{className:Oe("space-y-4",p),children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a category to view products"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map(k=>s.jsxs(we,{variant:"outline",className:"h-36 sm:h-40 flex flex-col items-center justify-center p-4 hover:bg-primary hover:text-primary-foreground hover:border-primary transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md",onClick:()=>u(k),children:[s.jsx("div",{className:"text-5xl mb-3 group-hover:scale-110 transition-transform",children:k.icon||""}),s.jsx("span",{className:"text-sm font-medium text-center line-clamp-2 leading-tight",children:k.name}),k.product_count!==void 0&&s.jsxs("span",{className:"text-xs text-muted-foreground group-hover:text-primary-foreground/80 mt-2",children:[k.product_count," ",k.product_count===1?"product":"products"]})]},k.id))})]});if(C==="subcategories"){if(a)return s.jsxs("div",{className:"flex items-center justify-center h-40",children:[s.jsx(vs,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading subcategories..."})]});if(!(r.length===0&&!i&&n.length>0)){if(r.length===0)return i?s.jsxs("div",{className:"flex items-center justify-center h-40",children:[s.jsx(vs,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading products..."})]}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No subcategories or products found in this category"})]})}return s.jsxs("div",{className:Oe("space-y-4",p),children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a subcategory to view products"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:r.map(k=>s.jsxs(we,{variant:"outline",className:"min-h-[10rem] sm:min-h-[11rem] flex flex-col items-center justify-center p-3 sm:p-4 gap-3 hover:bg-primary hover:text-primary-foreground hover:border-primary transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md",onClick:()=>f(k),children:[s.jsx("div",{className:"text-5xl sm:text-6xl group-hover:scale-110 transition-transform leading-none",children:k.icon||""}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-center line-clamp-2 leading-tight px-2",children:k.name}),k.product_count!==void 0&&s.jsxs("span",{className:"text-xs text-muted-foreground group-hover:text-primary-foreground/80 mt-1",children:[k.product_count," ",k.product_count===1?"product":"products"]})]},k.id))})]})}return C==="products"?i?s.jsxs("div",{className:"flex items-center justify-center h-40",children:[s.jsx(vs,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading products..."})]}):n.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),s.jsxs("p",{className:"text-sm",children:["No products found in this ",e[e.length-1]?.type||"category"]})]}):s.jsxs("div",{className:Oe("space-y-4",p),children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tap to print instantly  Long-press + icon to add to queue"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:n.map(k=>{const E=o===k.id,I=l===k.id,D=k.latestLabel?yx(k.latestLabel.expiry_date):null,O=D?wx(D):null,F=k.allergens?.some(T=>T.severity==="critical");return k.allergens?.filter(T=>T.severity==="critical").length,s.jsxs("div",{className:"relative",children:[s.jsxs(we,{variant:"outline",disabled:E,className:Oe("w-full min-h-[10rem] sm:min-h-[11rem] flex flex-col items-center justify-between p-3 sm:p-4 gap-2 transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md relative",I?"bg-green-500 text-white border-green-600 hover:bg-green-600":"hover:bg-primary hover:text-primary-foreground hover:border-primary"),onClick:()=>h(k),children:[s.jsxs("div",{className:"absolute top-2 left-2 right-2 flex items-start justify-between z-20 pointer-events-none gap-2",children:[k.latestLabel&&D&&fb(D)?s.jsx(ut,{variant:"secondary",className:"h-5 sm:h-6 px-2 text-[10px] sm:text-xs font-bold shadow-sm pointer-events-auto shrink-0",style:{backgroundColor:O?`${O}20`:"rgba(0,0,0,0.1)",color:O||"#000",borderColor:O||"transparent"},children:db(D)}):s.jsx("span",{className:"shrink-0"}),!E&&!I&&s.jsx(we,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full shadow-md hover:scale-110 transition-transform bg-primary text-primary-foreground hover:bg-primary/90 pointer-events-auto shrink-0",onClick:T=>_(T,k),children:s.jsx(vn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 mt-8 mb-6",children:[E?s.jsx("div",{className:Oe("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-primary/10 group-hover:bg-primary-foreground/20"),children:s.jsx(vs,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-spin"})}):I?s.jsx("div",{className:Oe("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-green-600"),children:s.jsx(Na,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-in zoom-in duration-300"})}):s.jsx("div",{className:"text-5xl sm:text-6xl leading-none",children:xZ()}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-center line-clamp-2 px-2 w-full",children:E?"Printing...":I?"Sent!":k.name})]}),s.jsx("div",{className:"w-full flex flex-col items-center gap-1 min-h-[1.5rem]",children:!E&&!I&&k.measuring_units&&s.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-primary-foreground/80",children:k.measuring_units.abbreviation})})]}),k.allergens&&k.allergens.length>0&&s.jsx(ut,{variant:"secondary",className:Oe("absolute bottom-2 right-2 h-6 w-6 rounded-full p-0 flex items-center justify-center text-xs font-bold shadow-sm z-10",F?"bg-red-500 text-white border-red-600":"bg-yellow-500 text-white border-yellow-600"),children:k.allergens.length})]},k.id)})}),s.jsx(lR,{product:m,open:w,onOpenChange:j})]}):null}function wZ({products:e,onQuickPrint:t,className:r}){const{user:n}=Ga(),{settings:a,availablePrinters:i,changePrinter:o}=jf(),[l,u]=x.useState("categories"),[f,h]=x.useState("grid"),[p,v]=x.useState(""),[m,N]=x.useState([]),[w,j]=x.useState([]),[_,C]=x.useState([]),[k,E]=x.useState(e),[I,D]=x.useState(!1),[O,F]=x.useState(!1),[T,z]=x.useState(!1),[U,B]=x.useState(null),[K,V]=x.useState(null),[de,se]=x.useState(null),[Y,W]=x.useState(!1);x.useEffect(()=>{l==="categories"&&w.length===0&&ee()},[l]),x.useEffect(()=>{if(l==="products"){const le=e.filter(ye=>ye.name.toLowerCase().includes(p.toLowerCase()));E(le)}},[e,p,l]);const ee=async()=>{D(!0);try{if(!n?.id){console.error(" QuickPrintGrid: No user ID available"),j([]);return}console.log(" QuickPrintGrid: Fetching profile for user:",n.id);const{data:le,error:ye}=await Ae.from("profiles").select("organization_id").eq("user_id",n.id).single();if(ye){console.error(" QuickPrintGrid: Error fetching profile:",ye),j([]);return}if(!le?.organization_id){console.warn(" QuickPrintGrid: User has no organization_id. Profile:",le),j([]);return}console.log(" QuickPrintGrid: Organization ID:",le.organization_id);const{data:Pe,error:We}=await Ae.from("label_categories").select("id, name, icon").eq("organization_id",le.organization_id).order("name");if(We)throw console.error(" QuickPrintGrid: Error fetching categories:",We),We;console.log(` QuickPrintGrid: Found ${Pe?.length||0} categories`);const Fe=await Promise.all((Pe||[]).map(async je=>{const{count:te}=await Ae.from("label_subcategories").select("*",{count:"exact",head:!0}).eq("category_id",je.id).eq("organization_id",le.organization_id),{count:Ze}=await Ae.from("products").select("*",{count:"exact",head:!0}).eq("category_id",je.id).eq("organization_id",le.organization_id);return{id:je.id,name:je.name,icon:je.icon,subcategory_count:te||0,product_count:Ze||0}}));j(Fe)}catch(le){console.error("Error fetching categories:",le)}finally{D(!1)}},ge=async le=>{F(!0);try{if(!n?.id)return C([]),[];const{data:ye}=await Ae.from("profiles").select("organization_id").eq("user_id",n.id).single();if(!ye?.organization_id)return C([]),[];const{data:Pe,error:We}=await Ae.from("label_subcategories").select("id, name, icon, category_id").eq("category_id",le).eq("organization_id",ye.organization_id).order("display_order");if(We)throw We;const Fe=await Promise.all((Pe||[]).map(async je=>{let te=0;if(je.name==="Recipes"){const{count:Ze}=await Ae.from("recipes").select("*",{count:"exact",head:!0}).eq("organization_id",ye.organization_id);te=Ze||0}else{const{count:Ze}=await Ae.from("products").select("*",{count:"exact",head:!0}).eq("subcategory_id",je.id).eq("organization_id",ye.organization_id);te=Ze||0}return{id:je.id,name:je.name,icon:je.icon,category_id:je.category_id,product_count:te}}));return C(Fe),Fe}catch(ye){return console.error("Error fetching subcategories:",ye),[]}finally{F(!1)}},re=async(le,ye)=>{z(!0);try{if(!n?.id){E([]);return}const{data:Pe}=await Ae.from("profiles").select("organization_id").eq("user_id",n.id).single();if(!Pe?.organization_id){E([]);return}let We=!1;if(ye){const{data:pt}=await Ae.from("label_subcategories").select("name").eq("id",ye).single();We=pt?.name==="Recipes"}if(We){const{data:pt,error:Qe}=await Ae.from("recipes").select("id, name, hold_time_days, allergens").eq("organization_id",Pe.organization_id).order("name");if(Qe)throw Qe;const me=(pt||[]).map(xe=>({id:xe.id,name:xe.name,category_id:le,subcategory_id:ye,measuring_unit_id:null,measuring_units:null,label_categories:null,allergens:[],latestLabel:null,shelf_life_days:xe.hold_time_days}));E(me),z(!1);return}let Fe=Ae.from("products").select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          product_allergens (
            allergen_id,
            allergens (
              id,
              name,
              icon,
              severity,
              is_common
            )
          )
        `).eq("category_id",le).eq("organization_id",Pe.organization_id);ye?Fe=Fe.eq("subcategory_id",ye):Fe=Fe.is("subcategory_id",null),Fe=Fe.order("name");const{data:je,error:te}=await Fe;if(te)throw te;const Ze=(je||[]).map(pt=>({...pt,allergens:pt.product_allergens?.map(Qe=>Qe.allergens).filter(Boolean)||[]})),Nt=await Promise.all(Ze.map(async pt=>{const{data:Qe}=await Ae.from("printed_labels").select("id, expiry_date, condition").eq("product_id",pt.id).eq("organization_id",Pe.organization_id).order("created_at",{ascending:!1}).limit(1).maybeSingle();return{...pt,latestLabel:Qe}}));E(Nt)}catch(Pe){console.error("Error fetching products:",Pe),E([])}finally{z(!1)}},L=le=>{u(le),N([]),C([]),v(""),le==="products"&&E(e)},q=async le=>{const ye={type:"category",id:le.id,name:le.name,icon:le.icon||""};N([ye]),(await ge(le.id)).length===0&&await re(le.id)},J=async le=>{const ye={type:"subcategory",id:le.id,name:le.name,icon:le.icon||""};N(We=>[...We,ye]);const Pe=m[0]?.id;Pe&&await re(Pe,le.id)},ne=()=>{if(m.length===0)return;const le=[...m];if(le.pop(),N(le),le.length===0)C([]),E([]);else if(le.length===1){const ye=le[0].id;ye&&(ge(ye),E([]))}},ue=le=>{if(le>=m.length)return;const ye=m.slice(0,le+1);if(N(ye),ye.length===1){const Pe=ye[0].id;Pe&&(ge(Pe),E([]))}},ie=async le=>{B(le.id);try{await t(le),B(null),V(le.id),setTimeout(()=>{V(null)},1500)}catch{B(null)}},oe=(le,ye)=>{le.stopPropagation(),se(ye),W(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs(rt,{className:Oe("w-full",r),children:[s.jsxs(Wt,{className:"pb-3",children:[s.jsx("div",{className:"mb-4 p-3 border rounded-lg bg-muted/20",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx(Bc,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(ft,{className:"text-xs font-medium",children:"Printer Output"}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[a?.name||"No printer","  ",a?.paperWidth,"",a?.paperHeight,"mm"]})]})]}),s.jsxs(Nr,{value:a?.type||"generic",onValueChange:o,children:[s.jsx(_r,{className:"w-[160px] h-8 text-xs flex-shrink-0",children:s.jsx(Sr,{})}),s.jsx(Cr,{children:i.map(le=>s.jsx(qe,{value:le.type,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sa,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("div",{className:"min-w-0",children:s.jsx("div",{className:"text-xs font-medium",children:le.name})})]})},le.type))})]})]})}),s.jsx(pZ,{mode:l,onModeChange:L,className:"mb-4"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Dh,{className:"w-5 h-5 text-primary"}),s.jsx(Qt,{className:"text-xl",children:"Quick Print"}),s.jsx(ut,{variant:"secondary",className:"ml-2",children:l==="categories"?m.length===0?`${w.length} categories`:m.length===1&&_.length>0?`${_.length} subcategories`:`${k.length} products`:`${k.length} products`})]}),l==="products"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(we,{variant:f==="grid"?"default":"outline",size:"sm",onClick:()=>h("grid"),className:"h-9 w-9 p-0",children:s.jsx(Vk,{className:"w-4 h-4"})}),s.jsx(we,{variant:f==="list"?"default":"outline",size:"sm",onClick:()=>h("list"),className:"h-9 w-9 p-0",children:s.jsx(Lb,{className:"w-4 h-4"})})]})]}),l==="categories"&&m.length>0&&s.jsx(gZ,{navigationStack:m,onBack:ne,onNavigateToLevel:ue,className:"mt-3"}),l==="products"&&s.jsxs("div",{className:"relative mt-3",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search products...",value:p,onChange:le=>v(le.target.value),className:"pl-9"})]})]}),s.jsx(st,{children:l==="categories"?I&&w.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(vs,{className:"w-12 h-12 mx-auto mb-3 animate-spin text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading categories..."})]}):s.jsx(yZ,{navigationStack:m,categories:w,subcategories:_,products:k,loadingSubcategories:O,loadingProducts:T,printingProductId:U,successProductId:K,onCategorySelect:q,onSubcategorySelect:J,onProductSelect:ie}):s.jsx(s.Fragment,{children:k.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(Ca,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No products found"})]}):s.jsxs(s.Fragment,{children:[f==="grid"&&s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:k.map(le=>{const ye=U===le.id,Pe=K===le.id,We=le.allergens?.some(te=>te.severity==="critical");le.allergens?.filter(te=>te.severity==="critical").length;const Fe=le.latestLabel?yx(le.latestLabel.expiry_date):null,je=Fe?wx(Fe):null;return s.jsxs("div",{className:"relative",children:[s.jsxs(we,{variant:"outline",disabled:ye,className:Oe("min-h-[10rem] sm:min-h-[11rem] w-full flex flex-col items-center justify-between p-3 sm:p-4 gap-2 transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md relative",Pe?"bg-green-500 text-white border-green-600 hover:bg-green-600":"hover:bg-primary hover:text-primary-foreground hover:border-primary"),onClick:()=>ie(le),children:[s.jsxs("div",{className:"absolute top-2 left-2 right-2 flex items-start justify-between z-20 pointer-events-none gap-2",children:[le.latestLabel&&Fe&&fb(Fe)?s.jsx(ut,{variant:"secondary",className:"h-5 sm:h-6 px-2 text-[10px] sm:text-xs font-bold shadow-sm pointer-events-auto shrink-0",style:{backgroundColor:je?`${je}20`:"rgba(0,0,0,0.1)",color:je||"#000",borderColor:je||"transparent"},children:db(Fe)}):s.jsx("span",{className:"shrink-0"}),!ye&&!Pe&&s.jsx(we,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full shadow-md hover:scale-110 bg-primary text-primary-foreground hover:bg-primary/90 pointer-events-auto transition-transform shrink-0",onClick:te=>oe(te,le),children:s.jsx(vn,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 mt-8 mb-6",children:[ye?s.jsx("div",{className:Oe("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-primary/10 group-hover:bg-primary-foreground/20"),children:s.jsx(vs,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-spin"})}):Pe?s.jsx("div",{className:Oe("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-green-600"),children:s.jsx(Na,{className:"w-8 h-8 sm:w-10 sm:h-10"})}):s.jsx("div",{className:"text-5xl sm:text-6xl leading-none",children:""}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-center line-clamp-2 px-2 w-full",children:le.name})]}),s.jsx("div",{className:"w-full flex flex-col items-center gap-1 min-h-[1.5rem]"})]}),le.allergens&&le.allergens.length>0&&s.jsx(ut,{variant:"secondary",className:Oe("absolute bottom-2 right-2 h-6 w-6 rounded-full p-0 flex items-center justify-center text-xs font-bold shadow-sm z-10",We?"bg-red-500 text-white border-red-600":"bg-yellow-500 text-white border-yellow-600"),children:le.allergens.length})]},le.id)})}),f==="list"&&s.jsx("div",{className:"space-y-3",children:k.map(le=>{const ye=U===le.id,Pe=K===le.id,We=le.allergens?.some(te=>te.severity==="critical"),Fe=le.latestLabel?yx(le.latestLabel.expiry_date):null,je=Fe?wx(Fe):null;return s.jsxs(we,{variant:"outline",disabled:ye,className:Oe("w-full min-h-20 flex items-center justify-between px-6 py-3 transition-all duration-200 group active:scale-[0.98] touch-manipulation shadow-sm hover:shadow-md",Pe?"bg-green-500 text-white border-green-600 hover:bg-green-600":"hover:bg-primary hover:text-primary-foreground hover:border-primary"),onClick:()=>ie(le),children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[ye?s.jsx("div",{className:Oe("w-12 h-12 rounded-full flex items-center justify-center transition-colors shrink-0","bg-primary/10 group-hover:bg-primary-foreground/20"),children:s.jsx(vs,{className:"w-6 h-6 animate-spin"})}):Pe?s.jsx("div",{className:Oe("w-12 h-12 rounded-full flex items-center justify-center transition-colors shrink-0","bg-green-600"),children:s.jsx(Na,{className:"w-6 h-6"})}):s.jsx("div",{className:"text-3xl shrink-0",children:""}),s.jsx("div",{className:"flex-1 text-left",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-base font-medium",children:le.name}),!ye&&!Pe&&le.latestLabel&&Fe&&fb(Fe)&&s.jsxs(ut,{variant:"secondary",className:"h-5 px-2 text-xs font-bold",style:{backgroundColor:je?`${je}20`:"rgba(0,0,0,0.1)",color:je||"#000",borderColor:je||"transparent"},children:[s.jsx(jn,{className:"w-3 h-3 mr-1"}),Fe&&db(Fe)]}),!ye&&!Pe&&le.allergens&&le.allergens.length>0&&s.jsxs(ut,{variant:"secondary",className:Oe("h-5 px-2 text-xs font-bold",We?"bg-red-500 text-white border-red-600":"bg-yellow-500 text-white border-yellow-600"),children:[s.jsx(is,{className:"w-3 h-3 mr-1"}),le.allergens.length," Allergen",le.allergens.length>1?"s":""]})]})})]}),s.jsx(Dh,{className:"w-5 h-5 opacity-60 shrink-0"})]},le.id)})})]})})})]}),s.jsx(lR,{product:de,open:Y,onOpenChange:W})]})}function bZ({organizationId:e}){const{toast:t}=Er(),{isAdmin:r,isManager:n,loading:a}=rd(),[i,o]=x.useState(null),[l,u]=x.useState(!0),[f,h]=x.useState(null),[p,v]=x.useState(!1),[m,N]=x.useState(!1),[w,j]=x.useState(null),[_,C]=x.useState("1to2"),k=r||n;x.useEffect(()=>{E()},[e]);const E=async()=>{u(!0),h(null);try{const{data:F,error:T}=await Ae.rpc("get_duplicate_stats",{org_id:e});if(T)throw new Error(`Failed to fetch stats: ${T.message}`);F&&Array.isArray(F)&&F.length>0&&o(F[0])}catch(F){const T=F instanceof Error?F.message:"Unknown error";h(T),console.error("Error fetching duplicate stats:",F)}finally{u(!1)}},I=(F,T)=>{if(!k){t({title:"Permission Denied",description:"You need admin or manager permissions to merge products.",variant:"destructive"});return}j(F),C(T),N(!0)},D=async()=>{if(!w)return;const F=_==="1to2"?w.product1.id:w.product2.id,T=_==="1to2"?w.product2.id:w.product1.id,z=_==="1to2"?w.product1.name:w.product2.name,U=_==="1to2"?w.product2.name:w.product1.name;v(!0);try{const{data:B,error:K}=await Ae.rpc("merge_products",{source_product_id:F,target_product_id:T,org_id:e});if(K)throw new Error(`Merge failed: ${K.message}`);const V=B;if(V&&!V.success)throw new Error(V.error||"Merge failed");t({title:"Products Merged Successfully",description:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"font-medium",children:[z,"  ",U]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[V?.labels_migrated||0," label",V?.labels_migrated!==1?"s":""," migrated"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[V?.allergens_migrated||0," allergen",V?.allergens_migrated!==1?"s":""," migrated"]})]})}),await E(),N(!1),j(null)}catch(B){const K=B instanceof Error?B.message:"Unknown error";console.error("Error merging products:",B),t({title:"Merge Failed",description:K,variant:"destructive"})}finally{v(!1)}};if(l||a)return s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Ur,{className:"h-6 w-48"}),s.jsx(Ur,{className:"h-4 w-full mt-2"})]}),s.jsxs(st,{className:"space-y-4",children:[s.jsx(Ur,{className:"h-20 w-full"}),s.jsx(Ur,{className:"h-32 w-full"})]})]});if(f)return s.jsxs(Oo,{variant:"destructive",children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Kd,{children:"Error Loading Duplicate Data"}),s.jsx(Mo,{children:f})]});if(!i)return s.jsxs(Oo,{children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Kd,{children:"No Data"}),s.jsx(Mo,{children:"Unable to load duplicate statistics."})]});const O=i.duplicate_groups||[];return s.jsxs(s.Fragment,{children:[s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Qt,{children:"Duplicate Product Management"}),s.jsx(Bs,{children:"Identify and merge duplicate products to maintain data quality"})]}),s.jsxs(ut,{variant:r?"default":n?"secondary":"outline",className:"flex items-center gap-1",children:[s.jsx(ff,{className:"h-3 w-3"}),r?"Admin":n?"Manager":"View Only"]})]})}),s.jsxs(st,{className:"space-y-6",children:[!k&&s.jsxs(Oo,{children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Kd,{children:"View Only Mode"}),s.jsx(Mo,{children:"You can view duplicate statistics, but only administrators and managers can merge products."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(rt,{className:"border-blue-200 bg-blue-50",children:s.jsxs(st,{className:"pt-6",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-700",children:i.total_products}),s.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Total Products"})]})}),s.jsx(rt,{className:O.length>0?"border-yellow-200 bg-yellow-50":"border-gray-200",children:s.jsxs(st,{className:"pt-6",children:[s.jsx("div",{className:`text-3xl font-bold ${O.length>0?"text-yellow-700":"text-gray-700"}`,children:i.potential_duplicates}),s.jsx("div",{className:`text-sm mt-1 ${O.length>0?"text-yellow-600":"text-gray-600"}`,children:"Potential Duplicates"})]})}),s.jsx(rt,{className:O.length>0?"border-orange-200 bg-orange-50":"border-gray-200",children:s.jsxs(st,{className:"pt-6",children:[s.jsx("div",{className:`text-3xl font-bold ${O.length>0?"text-orange-700":"text-gray-700"}`,children:O.length}),s.jsx("div",{className:`text-sm mt-1 ${O.length>0?"text-orange-600":"text-gray-600"}`,children:"Duplicate Pairs"})]})})]}),O.length>0?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(is,{className:"h-5 w-5 text-orange-600"}),"Duplicate Product Pairs (70%+ similarity)"]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:O.map((F,T)=>s.jsx(rt,{className:"border-orange-200",children:s.jsx(st,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:F.product1.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",F.product1.id.slice(0,8),"..."]})]}),s.jsxs(ut,{variant:F.similarity>=.9?"destructive":F.similarity>=.8?"default":"secondary",className:"shrink-0",children:[Math.round(F.similarity*100),"% match"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:F.product2.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",F.product2.id.slice(0,8),"..."]})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx(we,{size:"sm",variant:"outline",onClick:()=>I(F,"1to2"),disabled:!k,title:k?"Merge right":"Admin/Manager permission required",className:"text-xs",children:s.jsx(Qd,{className:"h-3 w-3"})}),s.jsx(we,{size:"sm",variant:"outline",onClick:()=>I(F,"2to1"),disabled:!k,title:k?"Merge left":"Admin/Manager permission required",className:"text-xs",children:s.jsx(Qd,{className:"h-3 w-3 rotate-180"})})]})]})})},T))})]}):s.jsxs(Oo,{children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Kd,{children:"No Duplicates Found"}),s.jsx(Mo,{children:"Great! Your product database is clean. No potential duplicates detected."})]}),s.jsx(we,{onClick:E,variant:"outline",className:"w-full",children:"Refresh Statistics"})]})]}),s.jsx(Tl,{open:m,onOpenChange:N,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsxs(qo,{className:"flex items-center gap-2",children:[s.jsx(is,{className:"h-5 w-5 text-orange-600"}),"Confirm Product Merge"]}),s.jsx(Rl,{className:"space-y-3",children:w&&s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"This action will merge the following products:"}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-md space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ut,{variant:"destructive",className:"text-xs",children:"Source"}),s.jsx("span",{className:"font-medium",children:_==="1to2"?w.product1.name:w.product2.name})]}),s.jsx("div",{className:"text-center",children:s.jsx(Qd,{className:"h-4 w-4 inline"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ut,{variant:"default",className:"text-xs",children:"Target"}),s.jsx("span",{className:"font-medium",children:_==="1to2"?w.product2.name:w.product1.name})]})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("p",{className:"font-medium",children:"What will happen:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"All printed labels will be updated to reference the target product"}),s.jsx("li",{children:"All allergens will be migrated to the target product"}),s.jsx("li",{children:"The source product will be permanently deleted"})]})]}),s.jsxs(Oo,{variant:"destructive",className:"mt-4",children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsxs(Mo,{className:"text-xs",children:[s.jsx("strong",{children:"Warning:"})," This action cannot be undone. Make sure you're merging the correct products."]})]})]})})]}),s.jsxs(zo,{children:[s.jsx(Wo,{disabled:p,children:"Cancel"}),s.jsx(Vo,{onClick:D,disabled:p,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:p?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"mr-2 h-4 w-4 animate-spin"}),"Merging..."]}):"Confirm Merge"})]})]})})]})}function jZ(){const{items:e,totalLabels:t,totalItems:r,isOpen:n,isPrinting:a,printProgress:i,removeFromQueue:o,updateQuantity:l,clearQueue:u,closeQueue:f,printAll:h}=dg(),{settings:p,availablePrinters:v,changePrinter:m}=jf(),{toast:N}=Er(),[w,j]=x.useState(!1),[_,C]=x.useState(!1),k=Math.ceil(t*3/60),E=T=>{const z=new Date(T),B=Math.floor((new Date().getTime()-z.getTime())/1e3);return B<60?"Just now":B<3600?`${Math.floor(B/60)} min ago`:B<86400?`${Math.floor(B/3600)} hours ago`:`${Math.floor(B/86400)} days ago`},I=(T,z)=>{const U=e.find(K=>K.id===T);if(!U)return;const B=U.quantity+z;B>=1&&B<=100&&l(T,B)},D=async()=>{C(!0)},O=async T=>{let z;if(T.auth_role_id)z=T.auth_role_id;else{const{data:{user:U}}=await Ae.auth.getUser();if(!U){N({title:"Authentication Error",description:"Unable to determine user. Please refresh the page.",variant:"destructive"});return}z=U.id,console.warn("Team member not linked to user account. Using current logged-in user as fallback.")}await h(z,T.display_name||"Unknown")},F=()=>{u(),j(!1)};return n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Oe("fixed inset-0 bg-black/50 z-40 transition-opacity",n?"opacity-100":"opacity-0 pointer-events-none"),onClick:f}),s.jsxs("div",{className:Oe("fixed right-0 top-0 h-full w-full sm:w-[450px] bg-background shadow-2xl z-50","transform transition-transform duration-300 ease-in-out","flex flex-col",n?"translate-x-0":"translate-x-full"),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Sa,{className:"w-6 h-6 text-primary"}),r>0&&s.jsx(ut,{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground px-1.5 py-0.5 text-xs",children:r})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold",children:"Print Queue"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[r," item",r!==1?"s":"","  ",t," label",t!==1?"s":""]})]})]}),s.jsx(we,{variant:"ghost",size:"icon",onClick:f,disabled:a,children:s.jsx(hn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"px-4 py-3 border-b bg-muted/20",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx(Bc,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(ft,{className:"text-xs font-medium",children:"Printer"}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[p?.name||"No printer","  ",p?.paperWidth,"",p?.paperHeight,"mm"]})]})]}),s.jsxs(Nr,{value:p?.type||"generic",onValueChange:m,children:[s.jsx(_r,{className:"w-[160px] h-8 text-xs flex-shrink-0",children:s.jsx(Sr,{})}),s.jsx(Cr,{children:v.map(T=>s.jsx(qe,{value:T.type,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Sa,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("div",{className:"min-w-0",children:s.jsx("div",{className:"text-xs font-medium",children:T.name})})]})},T.type))})]})]})}),e.length===0?s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[s.jsx(Sa,{className:"w-16 h-16 text-muted-foreground/30 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Queue is Empty"}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Add labels to your print queue from the label form or quick print view."})]}):s.jsxs(s.Fragment,{children:[s.jsx(ug,{className:"flex-1 p-4",children:s.jsx("div",{className:"space-y-3",children:e.map((T,z)=>s.jsx(rt,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-7 h-7 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold",children:z+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-base leading-tight mb-1",children:T.productName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:T.categoryName})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Prep:"}),s.jsx("span",{className:"ml-1 font-medium",children:new Date(T.labelData.prepDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Expiry:"}),s.jsx("span",{className:"ml-1 font-medium",children:new Date(T.labelData.expiryDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(we,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>I(T.id,-1),disabled:a||T.quantity<=1,children:s.jsx(Db,{className:"w-3 h-3"})}),s.jsx("div",{className:"w-12 text-center font-semibold",children:T.quantity}),s.jsx(we,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>I(T.id,1),disabled:a||T.quantity>=100,children:s.jsx(vn,{className:"w-3 h-3"})})]})]}),s.jsx(we,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(T.id),disabled:a,children:s.jsx(Dl,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Added ",E(T.addedAt)]})]})},T.id))})}),a&&i&&s.jsx("div",{className:"p-4 border-t bg-blue-50 dark:bg-blue-950/20",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Printing..."}),s.jsxs("span",{className:"text-muted-foreground",children:[i.printedLabels," / ",i.totalLabels," labels"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-primary h-full transition-all duration-300",style:{width:`${i.printedLabels/i.totalLabels*100}%`}})}),i.currentItem&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Printing: ",i.currentItem," (",i.currentQuantity," copies)"]}),i.errors.length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-xs text-destructive",children:[s.jsx(Hr,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),s.jsxs("span",{children:[i.errors.length," error",i.errors.length>1?"s":""]})]})]})}),s.jsxs("div",{className:"p-4 border-t bg-muted/20 space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Labels:"}),s.jsx("span",{className:"font-bold text-lg",children:t})]}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Estimated time:"}),s.jsxs("span",{children:["~",k," minute",k!==1?"s":""]})]})]}),s.jsx(ss,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{variant:"outline",onClick:()=>j(!0),disabled:a,className:"flex-1",children:"Clear All"}),s.jsxs(we,{variant:"hero",onClick:D,disabled:a,className:"flex-1",children:[s.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Print All (",t,")"]})]})]})]})]}),s.jsx(Tl,{open:w,onOpenChange:j,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Clear Print Queue?"}),s.jsxs(Rl,{children:["This will remove all ",r," item",r!==1?"s":""," (",t," labels) from your print queue. This action cannot be undone."]})]}),s.jsxs(zo,{children:[s.jsx(Wo,{children:"Cancel"}),s.jsx(Vo,{onClick:F,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear Queue"})]})]})}),s.jsx(zh,{open:_,onOpenChange:C,onSelectUser:O})]}):null}function _Z(){const{totalLabels:e,totalItems:t,openQueue:r}=dg(),[n,a]=x.useState(!1);return x.useEffect(()=>{if(t>0){a(!0);const i=setTimeout(()=>a(!1),1e3);return()=>clearTimeout(i)}},[t]),t===0?null:s.jsxs(we,{onClick:r,className:Oe("fixed bottom-6 right-6 z-30","rounded-full w-16 h-16 shadow-lg","hover:scale-110 transition-all duration-200",n&&"animate-pulse"),variant:"hero",size:"icon",children:[s.jsx(Sa,{className:"w-6 h-6"}),s.jsx(ut,{className:Oe("absolute -top-2 -right-2","bg-red-500 text-white border-2 border-background","min-w-[24px] h-6 flex items-center justify-center","font-bold text-xs",n&&"animate-bounce"),children:e})]})}function NZ(){const[e,t]=x.useState(""),[r,n]=x.useState("overview"),[a,i]=x.useState(!1),[o,l]=x.useState(!1),[u,f]=x.useState(!1),[h,p]=x.useState(null),[v,m]=x.useState(null),{toast:N}=Er(),{user:w}=Ga(),{isAdmin:j}=rd(),{print:_}=jf(),{openQueue:C,totalLabels:k}=dg(),[E,I]=x.useState(""),[D,O]=x.useState(0),[F,T]=x.useState(0),[z,U]=x.useState(0),[B,K]=x.useState([]),[V,de]=x.useState([]);x.useEffect(()=>{Y(),W(),ee(),se()},[]);const se=async()=>{if(w?.id)try{const{data:oe,error:le}=await Ae.from("profiles").select("organization_id").eq("user_id",w.id).single();if(le)throw le;oe?.organization_id&&I(oe.organization_id)}catch(oe){console.error("Error fetching organization_id:",oe)}},Y=async()=>{try{if(!w?.id)return;const{data:oe}=await Ae.from("profiles").select("organization_id").eq("user_id",w.id).single();if(!oe?.organization_id)return;const{data:le,error:ye}=await Ae.from("products").select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          organization_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          product_allergens (
            allergen_id,
            allergens (
              id,
              name,
              icon,
              severity,
              is_common
            )
          )
        `).eq("organization_id",oe.organization_id).order("name");if(ye)throw ye;const Pe=(le||[]).map(Fe=>({...Fe,allergens:Fe.product_allergens?.map(je=>je.allergens).filter(Boolean)||[]})),We=await Promise.all(Pe.map(async Fe=>{const{data:je}=await Ae.from("printed_labels").select("id, expiry_date, condition").eq("product_id",Fe.id).eq("organization_id",oe.organization_id).order("created_at",{ascending:!1}).limit(1).maybeSingle();return{...Fe,latestLabel:je}}));de(We)}catch(oe){console.error("Error fetching products:",oe)}},W=async()=>{try{const oe=new Date;oe.setHours(0,0,0,0);const le=new Date(oe);le.setDate(le.getDate()+1);const{count:ye,error:Pe}=await Ae.from("printed_labels").select("*",{count:"exact",head:!0}).gte("created_at",oe.toISOString()).lt("created_at",le.toISOString());if(Pe)throw Pe;O(ye||0);const{count:We,error:Fe}=await Ae.from("printed_labels").select("*",{count:"exact",head:!0});if(Fe)throw Fe;T(We||0);const je=new Date,te=new Date;te.setHours(te.getHours()+24);const{count:Ze,error:Nt}=await Ae.from("printed_labels").select("*",{count:"exact",head:!0}).gte("expiry_date",je.toISOString().split("T")[0]).lte("expiry_date",te.toISOString().split("T")[0]);if(Nt)throw Nt;U(Ze||0)}catch(oe){console.error("Error fetching dashboard stats:",oe)}},ee=async()=>{try{const{data:oe,error:le}=await Ae.from("printed_labels").select("*").order("created_at",{ascending:!1}).limit(10);if(le)throw le;K(oe||[])}catch(oe){console.error("Error fetching recent labels:",oe)}},ge=async oe=>{p(oe),i(!0)},re=()=>{p(null),i(!0)},L=oe=>{m(oe),h?h.shelf_life_days!==void 0?f(!0):l(!0):n("form")},q=oe=>{h&&v&&(J(h,v,oe),p(null),l(!1))},J=async(oe,le,ye)=>{if(!E){N({title:"Organization Required",description:"Could not determine your organization. Please refresh the page.",variant:"destructive"});return}let Pe;if(le.auth_role_id)Pe=le.auth_role_id;else{const{data:{user:pt}}=await Ae.auth.getUser();if(!pt){N({title:"Authentication Error",description:"Unable to determine user. Please refresh the page.",variant:"destructive"});return}Pe=pt.id,console.warn(`Team member ${le.display_name} (${le.id}) is not linked to a user account. Using current user as fallback.`)}const We=new Date,Fe=We.toISOString().split("T")[0],je=new Date(We);je.setDate(We.getDate()+3);const te=je.toISOString().split("T")[0];let Ze=[];try{const{data:pt}=await Ae.from("product_allergens").select(`
          allergen_id,
          allergens (
            id,
            name,
            icon,
            severity
          )
        `).eq("product_id",oe.id);Ze=(pt||[]).map(Qe=>Qe.allergens).filter(Boolean)}catch(pt){console.error("Error fetching allergens for quick print:",pt)}const Nt={productId:oe.id,productName:oe.name,categoryId:oe.label_categories?.id||null,categoryName:oe.label_categories?.name||"Quick Print",preparedBy:Pe,preparedByName:le.display_name||"Unknown",prepDate:Fe,expiryDate:te,condition:ye?.condition||"REFRIGERATED",quantity:ye?.quantity||"1",unit:ye?.unit||oe.measuring_units?.abbreviation||"Unit",batchNumber:"",allergens:Ze,organizationId:E};try{await Wu(Nt),await _({productName:oe.name,categoryName:oe.label_categories?.name||"Quick Print",preparedDate:Fe,useByDate:te,preparedByName:le.display_name||"Unknown",allergens:Ze.map(Qe=>Qe.name),storageInstructions:ye?.condition||"REFRIGERATED",quantity:ye?.quantity||"1",unit:ye?.unit||oe.measuring_units?.abbreviation||"Unit",condition:ye?.condition||"REFRIGERATED"})?(N({title:"Label Sent to Printer",description:`Printing label for ${oe.name} prepared by ${le.display_name}`}),W(),ee()):N({title:"Print Failed",description:"Could not connect to printer.",variant:"destructive"})}catch(pt){console.error("Error in quick print:",pt),N({title:"Print Failed",description:"An error occurred while printing.",variant:"destructive"})}},ne=oe=>{N({title:"Label Saved",description:"Your label has been saved as a draft."}),n("overview")},ue=async oe=>{if(!E){N({title:"Organization Required",description:"Could not determine your organization. Please refresh the page.",variant:"destructive"});return}try{let le=[];if(oe.productId)try{const{data:Pe}=await Ae.from("product_allergens").select(`
              allergen_id,
              allergens (
                id,
                name,
                icon,
                severity
              )
            `).eq("product_id",oe.productId);le=(Pe||[]).map(We=>We.allergens).filter(Boolean)}catch(Pe){console.error("Error fetching allergens for print:",Pe)}await Wu({productId:oe.productId,productName:oe.productName,categoryId:oe.categoryId==="all"?null:oe.categoryId,categoryName:oe.categoryName,preparedBy:oe.preparedBy,preparedByName:oe.preparedByName,prepDate:oe.prepDate,expiryDate:oe.expiryDate,condition:oe.condition,quantity:oe.quantity,unit:oe.unit,batchNumber:oe.batchNumber,allergens:le,organizationId:E}),await _({productName:oe.productName,categoryName:oe.categoryName,subcategoryName:oe.subcategoryName,preparedDate:oe.prepDate,useByDate:oe.expiryDate,preparedByName:oe.preparedByName,allergens:le.map(Pe=>Pe.name),storageInstructions:`Condition: ${oe.condition}`,barcode:oe.batchNumber,quantity:oe.quantity,unit:oe.unit,condition:oe.condition})?(N({title:"Label Printed Successfully",description:`Label for ${oe.productName} has been sent to the printer and saved to history.`}),W(),ee(),n("overview")):N({title:"Print Failed",description:"Could not connect to printer.",variant:"destructive"})}catch(le){console.error("Error printing label:",le),N({title:"Print Error",description:"An unexpected error occurred while printing.",variant:"destructive"})}},ie=()=>{n("overview")};return r==="form"?s.jsxs(s.Fragment,{children:[s.jsx(hZ,{onSave:ne,onPrint:ue,onCancel:ie,selectedUser:v||void 0}),s.jsx(zh,{open:a,onOpenChange:i,onSelectUser:L})]}):r==="admin"?j?E?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Duplicate Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Identify and merge duplicate products to maintain data integrity"})]}),s.jsx(we,{variant:"outline",onClick:()=>n("overview"),children:"Back to Overview"})]}),s.jsx(bZ,{organizationId:E})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Duplicate Management"}),s.jsx(we,{variant:"outline",onClick:()=>n("overview"),children:"Back to Overview"})]}),s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading organization information..."})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Admin Access Required"}),s.jsx(we,{variant:"outline",onClick:()=>n("overview"),children:"Back to Overview"})]}),s.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-6 text-center",children:[s.jsx(is,{className:"w-12 h-12 mx-auto mb-4 text-destructive"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You need administrator privileges to access product duplicate management."})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(zh,{open:a,onOpenChange:i,onSelectUser:L}),s.jsx(mZ,{open:o,onOpenChange:l,onConfirm:q,productName:h?.name||""}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Label Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Quick print labels with one tap - designed for busy kitchens"})]}),s.jsxs("div",{className:"flex gap-3",children:[j&&s.jsxs(we,{variant:"outline",onClick:()=>n("admin"),className:"flex items-center gap-2",children:[s.jsx(wD,{className:"w-4 h-4"}),"Manage Duplicates"]}),s.jsxs(we,{variant:"outline",onClick:C,children:[s.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Print Queue",k>0&&s.jsx(ut,{variant:"default",className:"ml-2",children:k})]}),s.jsxs(we,{variant:"hero",onClick:re,className:"text-white",children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"New Label"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Quick Print"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tap any product to print a label instantly"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[V.length," products available"]})]}),s.jsx(wZ,{products:V,onQuickPrint:ge})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Today's Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(fi,{title:"Labels Today",value:D,change:`Total: ${F} labels`,changeType:"neutral",icon:Sa}),s.jsx(fi,{title:"Recent Labels",value:B.length,change:"Last 10 printed",changeType:"neutral",icon:TD}),s.jsx(fi,{title:"Expiring Soon",value:z,change:"Next 24 hours",changeType:z>10?"negative":"neutral",icon:is}),s.jsx(fi,{title:"Compliance Rate",value:F>0?"Active":"No Data",change:`${F} printed`,changeType:"positive",icon:Va})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Recent Labels"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Ml,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),s.jsx(St,{placeholder:"Search labels...",className:"pl-10 w-48",value:e,onChange:oe=>t(oe.target.value)})]}),s.jsx(we,{variant:"outline",size:"icon",children:s.jsx(Fc,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"space-y-3",children:B.length===0?s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-8 text-center",children:[s.jsx(Sa,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No labels printed yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start printing labels to see them here"})]}):B.filter(oe=>e===""||oe.product_name.toLowerCase().includes(e.toLowerCase())).map(oe=>{const le=yx(oe.expiry_date),ye=wx(le);return s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium",children:oe.product_name}),s.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium",style:{backgroundColor:`${ye}20`,color:ye},children:le})]}),s.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["Category: ",oe.category_name||"N/A"]}),s.jsxs("p",{children:["Condition: ",oe.condition]}),s.jsxs("p",{children:["Prep: ",new Date(oe.prep_date).toLocaleDateString()," | Expires: ",new Date(oe.expiry_date).toLocaleDateString()]}),s.jsxs("p",{children:["By: ",oe.prepared_by_name," at ",new Date(oe.created_at).toLocaleTimeString()]}),oe.quantity&&s.jsxs("p",{children:["Qty: ",oe.quantity," ",oe.unit]})]})]},oe.id)})})]})]}),s.jsx(jZ,{}),s.jsx(_Z,{}),h&&v&&s.jsx(wT,{open:u,onOpenChange:oe=>{f(oe),oe||(p(null),m(null))},recipe:{id:h.id,name:h.name,shelf_life_days:h.shelf_life_days,allergens:h.allergens},initialUser:v?{id:v.id,display_name:v.display_name}:null})]})}const k4=[{id:1,name:"Chicken Breast",category:"Proteins",currentStock:11,parLevel:23,unit:"kg",supplier:"Fresh Farms Co",lastOrdered:"2024-08-18",status:"low"},{id:2,name:"Tomatoes",category:"Produce",currentStock:54,parLevel:45,unit:"kg",supplier:"Garden Fresh",lastOrdered:"2024-08-19",status:"good"},{id:3,name:"Olive Oil",category:"Pantry",currentStock:8,parLevel:12,unit:"litres",supplier:"Mediterranean Supply",lastOrdered:"2024-08-15",status:"reorder"},{id:4,name:"Rice",category:"Grains",currentStock:0,parLevel:11,unit:"kg",supplier:"Bulk Foods Inc",lastOrdered:"2024-08-10",status:"out"}],SZ=[{item:"Chicken Breast",currentStock:11,parLevel:23,suggested:34},{item:"Olive Oil",currentStock:8,parLevel:12,suggested:15},{item:"Rice",currentStock:0,parLevel:11,suggested:23}];function kZ(){const{checkProductLimit:e,upgradeModalProps:t}=p0(),{toast:r}=Er(),n=()=>{const a=k4.length;e(a)&&r({title:"Coming Soon",description:"Add item functionality will be implemented soon."})};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Track stock levels, manage suppliers, and automate reorders"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(we,{variant:"outline",children:[s.jsx(Ox,{className:"w-4 h-4 mr-2"}),"Export Data"]}),s.jsxs(we,{variant:"hero",onClick:n,children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(fi,{title:"Total Items",value:"1,247",change:"+23 this week",changeType:"positive",icon:Ca}),s.jsx(fi,{title:"Low Stock Items",value:18,change:"Need attention",changeType:"negative",icon:is}),s.jsx(fi,{title:"Out of Stock",value:4,change:"Critical items",changeType:"negative",icon:Wj}),s.jsx(fi,{title:"Reorder Value",value:"$2,340",change:"Pending approval",changeType:"neutral",icon:Ca})]}),s.jsx("div",{className:"bg-card rounded-lg border shadow-card p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ml,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),s.jsx(St,{placeholder:"Search inventory items...",className:"pl-10"})]}),s.jsxs("select",{className:"h-10 px-3 py-2 text-sm border border-input bg-background rounded-md",children:[s.jsx("option",{children:"All Categories"}),s.jsx("option",{children:"Proteins"}),s.jsx("option",{children:"Produce"}),s.jsx("option",{children:"Pantry"}),s.jsx("option",{children:"Grains"})]}),s.jsxs("select",{className:"h-10 px-3 py-2 text-sm border border-input bg-background rounded-md",children:[s.jsx("option",{children:"All Status"}),s.jsx("option",{children:"Good"}),s.jsx("option",{children:"Low Stock"}),s.jsx("option",{children:"Reorder"}),s.jsx("option",{children:"Out of Stock"})]}),s.jsxs(we,{variant:"outline",children:[s.jsx(Fc,{className:"w-4 h-4 mr-2"}),"More Filters"]})]})}),s.jsx(hP,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Current Inventory"}),s.jsx("div",{className:"space-y-4",children:k4.map(a=>s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-4 hover:shadow-card-hover transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:a.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.category,"  ",a.supplier]})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${a.status==="good"?"bg-success/10 text-success":a.status==="low"?"bg-warning/10 text-warning":a.status==="reorder"?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:a.status==="out"?"OUT OF STOCK":a.status==="reorder"?"REORDER":a.status==="low"?"LOW STOCK":"IN STOCK"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Stock"}),s.jsxs("p",{className:"font-medium",children:[a.currentStock," ",a.unit]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Par Level"}),s.jsxs("p",{className:"font-medium",children:[a.parLevel," ",a.unit]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Last Ordered"}),s.jsx("p",{className:"font-medium",children:new Date(a.lastOrdered).toLocaleDateString()})]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2 mb-3",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${a.status==="good"?"bg-success":a.status==="low"?"bg-warning":"bg-destructive"}`,style:{width:`${Math.max(a.currentStock/a.parLevel*100,5)}%`}})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{variant:"outline",size:"sm",children:"Update Count"}),a.status==="reorder"||a.status==="out"?s.jsx(we,{variant:"default",size:"sm",children:"Reorder Now"}):null]})]},a.id))})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Reorder Suggestions"}),s.jsx("div",{className:"space-y-3",children:SZ.map((a,i)=>s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:a.item}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Current:"}),s.jsx("span",{children:a.currentStock})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Par Level:"}),s.jsx("span",{children:a.parLevel})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Suggested:"}),s.jsx("span",{className:"font-medium text-primary",children:a.suggested})]})]}),s.jsx(we,{variant:"default",size:"sm",className:"w-full mt-3",children:"Add to Order"})]},i))})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(we,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Ca,{className:"w-4 h-4 mr-2"}),"Bulk Update Counts"]}),s.jsxs(we,{variant:"outline",className:"w-full justify-start",children:[s.jsx(Wj,{className:"w-4 h-4 mr-2"}),"Generate Waste Report"]}),s.jsxs(we,{variant:"outline",className:"w-full justify-start",children:[s.jsx(is,{className:"w-4 h-4 mr-2"}),"View Low Stock Alert"]}),s.jsxs(we,{variant:"default",className:"w-full justify-start",children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Create Purchase Order"]})]})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Supplier Quick Contact"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Fresh Farms Co"}),s.jsx(we,{variant:"ghost",size:"sm",children:"Call"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Garden Fresh"}),s.jsx(we,{variant:"ghost",size:"sm",children:"Call"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Mediterranean Supply"}),s.jsx(we,{variant:"ghost",size:"sm",children:"Call"})]})]})]})]})]}),s.jsx(j0,{...t})]})}const CZ=[{category:"Label Compliance",current:98.5,target:95,trend:"+0.3%"},{category:"Temperature Logs",current:100,target:100,trend:"0%"},{category:"HACCP Checks",current:94.2,target:95,trend:"-1.2%"},{category:"Cleaning Schedule",current:89.5,target:90,trend:"+2.1%"}],EZ=[{item:"Produce",amount:"20 kg",cost:"$89",reason:"Expiration"},{item:"Bread",amount:"12 loaves",cost:"$24",reason:"Overproduction"},{item:"Dairy",amount:"30 litres",cost:"$32",reason:"Temperature Issue"},{item:"Proteins",amount:"7 kg",cost:"$75",reason:"Quality Control"}];function PZ(){const{checkFeature:e,upgradeModalProps:t}=p0();return x.useEffect(()=>{e("hasCostControl","Cost Control & Analytics")},[e]),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics & Reports"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Compliance tracking, operational insights, and performance metrics"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(we,{variant:"outline",children:[s.jsx(Va,{className:"w-4 h-4 mr-2"}),"Date Range"]}),s.jsxs(we,{variant:"outline",children:[s.jsx(Ox,{className:"w-4 h-4 mr-2"}),"Export Reports"]}),s.jsxs(we,{variant:"hero",children:[s.jsx(Mc,{className:"w-4 h-4 mr-2"}),"Custom Report"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(fi,{title:"Overall Compliance",value:"95.6%",change:"+1.2% from last month",changeType:"positive",icon:Cl}),s.jsx(fi,{title:"Failed Checks",value:7,change:"3 this week",changeType:"negative",icon:is}),s.jsx(fi,{title:"Cost Savings",value:"$2,340",change:"vs last month",changeType:"positive",icon:Lh}),s.jsx(fi,{title:"Efficiency Score",value:"87%",change:"+5% improvement",changeType:"positive",icon:vp})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Compliance Overview"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Current period performance vs targets"})]}),s.jsxs(we,{variant:"outline",size:"sm",children:[s.jsx(Fc,{className:"w-4 h-4 mr-2"}),"Filter by Location"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:CZ.map((r,n)=>s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:r.category}),s.jsx("span",{className:`text-xs font-medium ${r.current>=r.target?"text-success":"text-warning"}`,children:r.trend})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("span",{className:"text-2xl font-bold",children:[r.current,"%"]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Target: ",r.target,"%"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${r.current>=r.target?"bg-success":"bg-warning"}`,style:{width:`${Math.min(r.current,100)}%`}})})]})]},n))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Performance Trends"}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-medium",children:"Weekly Label Compliance"}),s.jsx(we,{variant:"outline",size:"sm",children:"View Details"})]}),s.jsx("div",{className:"h-48 bg-muted/20 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(vp,{className:"w-12 h-12 text-muted-foreground mx-auto mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"Chart showing weekly compliance trends"})]})})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-medium",children:"Temperature Monitoring"}),s.jsx(we,{variant:"outline",size:"sm",children:"View Details"})]}),s.jsx("div",{className:"h-48 bg-muted/20 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Lh,{className:"w-12 h-12 text-muted-foreground mx-auto mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"Temperature compliance over time"})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Waste Analysis"}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"This Week's Waste"}),s.jsx("div",{className:"space-y-3",children:EZ.map((r,n)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:r.item}),s.jsx("p",{className:"text-sm text-muted-foreground",children:r.reason})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium",children:r.amount}),s.jsx("p",{className:"text-sm text-destructive",children:r.cost})]})]},n))}),s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Total Weekly Waste"}),s.jsx("span",{className:"font-bold text-destructive",children:"$220"})]})})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"Active Alerts"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4 text-warning"}),s.jsx("span",{className:"font-medium text-sm",children:"Temperature Alert"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Freezer #2 temperature slightly elevated"})]}),s.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4 text-destructive"}),s.jsx("span",{className:"font-medium text-sm",children:"Compliance Issue"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Missing temperature log for lunch prep"})]}),s.jsxs("div",{className:"p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(is,{className:"w-4 h-4 text-warning"}),s.jsx("span",{className:"font-medium text-sm",children:"Inventory Alert"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Multiple items below par level"})]})]})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"Multi-Site Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Main Kitchen"}),s.jsx("span",{className:"px-2 py-1 bg-success/10 text-success text-xs rounded-full",children:"95.8%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"East Location"}),s.jsx("span",{className:"px-2 py-1 bg-success/10 text-success text-xs rounded-full",children:"97.2%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"West Location"}),s.jsx("span",{className:"px-2 py-1 bg-warning/10 text-warning text-xs rounded-full",children:"89.5%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Downtown Branch"}),s.jsx("span",{className:"px-2 py-1 bg-success/10 text-success text-xs rounded-full",children:"94.1%"})]})]})]})]})]}),s.jsx(j0,{...t})]})}const AZ=[{icon:Jk,title:"Smart Labeling",description:"Custom templates with auto-expiry calculations and QR codes for seamless traceability."},{icon:Dx,title:"Kitchen Management",description:"Digital prep plans, timers, and HACCP compliance tools to streamline operations."},{icon:Ca,title:"Inventory Control",description:"Real-time stock tracking with automated reorder suggestions and supplier management."},{icon:vp,title:"Analytics & Insights",description:"Comprehensive reporting on compliance, waste reduction, and operational efficiency."},{icon:ff,title:"HACCP Compliance",description:"Built-in food safety protocols with temperature logging and audit trails."},{icon:Bi,title:"Multi-Tenant Platform",description:"Enterprise-ready with role-based access and multi-location support."}],TZ=["Reduce food waste by up to 30%","Improve compliance scores to 98%+","Save 4+ hours daily on paperwork","Real-time visibility across locations"],RZ=()=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-muted/40",children:[s.jsx("header",{className:"border-b bg-card/80 backdrop-blur-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Lp,{className:"w-12 h-12"}),s.jsx("h1",{className:"font-bold text-xl",children:"Tampa APP"})]}),s.jsx(we,{variant:"hero",asChild:!0,children:s.jsxs("a",{href:"/auth",children:["Enter Platform",s.jsx(Qd,{className:"w-4 h-4 ml-2"})]})})]})})}),s.jsx("section",{className:"relative py-20 overflow-hidden",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-foreground mb-6",children:["The Complete Food Service",s.jsx("span",{className:"block bg-gradient-hero bg-clip-text text-transparent",children:"Management Platform"})]}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-3xl mx-auto",children:"Streamline operations, ensure compliance, and reduce waste with our comprehensive SaaS platform designed specifically for the food service industry."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(we,{variant:"hero",size:"lg",asChild:!0,children:s.jsxs("a",{href:"/auth",children:["Start Free Trial",s.jsx(Qd,{className:"w-5 h-5 ml-2"})]})}),s.jsx(we,{variant:"outline",size:"lg",children:"Schedule Demo"})]})]})})}),s.jsx("section",{className:"py-16 bg-card/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"text-center mb-12",children:s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Proven Results for Food Service Operations"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:TZ.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Cl,{className:"w-6 h-6 text-success flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:e})]},t))})]})}),s.jsx("section",{className:"py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Everything You Need in One Platform"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"From labeling to analytics, our integrated solution covers every aspect of modern food service management."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:AZ.map((e,t)=>s.jsxs("div",{className:"bg-card rounded-lg border shadow-card hover:shadow-card-hover transition-shadow p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:s.jsx(e.icon,{className:"w-6 h-6 text-primary"})}),s.jsx("h3",{className:"font-semibold text-lg mb-3",children:e.title}),s.jsx("p",{className:"text-muted-foreground",children:e.description})]},t))})]})}),s.jsx("section",{className:"py-20 bg-gradient-hero",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-primary-foreground mb-6",children:"Ready to Transform Your Food Service Operations?"}),s.jsx("p",{className:"text-xl text-primary-foreground/90 mb-8 max-w-2xl mx-auto",children:"Join hundreds of restaurants, cafeterias, and food service providers who trust our platform for their daily operations."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(we,{variant:"secondary",size:"lg",asChild:!0,children:s.jsxs("a",{href:"/auth",children:["Access Dashboard",s.jsx(Qd,{className:"w-5 h-5 ml-2"})]})}),s.jsx(we,{variant:"outline",size:"lg",className:"bg-transparent border-primary-foreground text-primary-foreground hover:bg-primary-foreground hover:text-primary",children:"Contact Sales"})]})]})}),s.jsx("footer",{className:"border-t bg-card/80 backdrop-blur-sm py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(Lp,{className:"w-12 h-12"}),s.jsx("span",{className:"font-bold text-lg",children:"Tampa APP"})]}),s.jsx("p",{className:"text-muted-foreground",children:" 2024 Tampa APP. Smart Food Safety & Kitchen Management."})]})})})]});var C0="Tabs",[LZ]=bs(C0,[Xu]),cR=Xu(),[DZ,c5]=LZ(C0),uR=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:a,defaultValue:i,orientation:o="horizontal",dir:l,activationMode:u="automatic",...f}=e,h=Zu(l),[p,v]=Ea({prop:n,onChange:a,defaultProp:i??"",caller:C0});return s.jsx(DZ,{scope:r,baseId:Xs(),value:p,onValueChange:v,orientation:o,dir:h,activationMode:u,children:s.jsx(vt.div,{dir:h,"data-orientation":o,...f,ref:t})})});uR.displayName=C0;var dR="TabsList",fR=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...a}=e,i=c5(dR,r),o=cR(r);return s.jsx(Jx,{asChild:!0,...o,orientation:i.orientation,dir:i.dir,loop:n,children:s.jsx(vt.div,{role:"tablist","aria-orientation":i.orientation,...a,ref:t})})});fR.displayName=dR;var hR="TabsTrigger",mR=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:a=!1,...i}=e,o=c5(hR,r),l=cR(r),u=vR(o.baseId,n),f=xR(o.baseId,n),h=n===o.value;return s.jsx(Zx,{asChild:!0,...l,focusable:!a,active:h,children:s.jsx(vt.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":f,"data-state":h?"active":"inactive","data-disabled":a?"":void 0,disabled:a,id:u,...i,ref:t,onMouseDown:lt(e.onMouseDown,p=>{!a&&p.button===0&&p.ctrlKey===!1?o.onValueChange(n):p.preventDefault()}),onKeyDown:lt(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(n)}),onFocus:lt(e.onFocus,()=>{const p=o.activationMode!=="manual";!h&&!a&&p&&o.onValueChange(n)})})})});mR.displayName=hR;var pR="TabsContent",gR=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:a,children:i,...o}=e,l=c5(pR,r),u=vR(l.baseId,n),f=xR(l.baseId,n),h=n===l.value,p=x.useRef(h);return x.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),s.jsx(qs,{present:a||h,children:({present:v})=>s.jsx(vt.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":u,hidden:!v,id:f,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:v&&i})})});gR.displayName=pR;function vR(e,t){return`${e}-trigger-${t}`}function xR(e,t){return`${e}-content-${t}`}var IZ=uR,yR=fR,wR=mR,bR=gR;const fg=IZ,um=x.forwardRef(({className:e,...t},r)=>s.jsx(yR,{ref:r,className:Oe("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));um.displayName=yR.displayName;const ia=x.forwardRef(({className:e,...t},r)=>s.jsx(wR,{ref:r,className:Oe("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ia.displayName=wR.displayName;const oa=x.forwardRef(({className:e,...t},r)=>s.jsx(bR,{ref:r,className:Oe("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));oa.displayName=bR.displayName;const OZ=()=>{const{user:e,signIn:t,signUp:r,loading:n}=Ga(),{toast:a}=Er(),[i,o]=x.useState(!1),[l,u]=x.useState(null);if(!n&&e)return s.jsx(t3,{to:"/",replace:!0});const f=async p=>{p.preventDefault(),o(!0),u(null);const v=new FormData(p.currentTarget),m=v.get("email"),N=v.get("password"),{error:w}=await t(m,N);w?(u(w.message),a({variant:"destructive",title:"Sign in failed",description:w.message})):a({title:"Welcome back!",description:"You have successfully signed in."}),o(!1)},h=async p=>{p.preventDefault(),o(!0),u(null);const v=new FormData(p.currentTarget),m=v.get("email"),N=v.get("password"),w=v.get("displayName"),{error:j}=await r(m,N,w);j?(u(j.message),a({variant:"destructive",title:"Sign up failed",description:j.message})):a({title:"Account created!",description:"Please check your email to verify your account."}),o(!1)};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-muted/20 to-muted/40",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-muted/40",children:[s.jsx("header",{className:"border-b bg-card/80 backdrop-blur-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center h-16",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Lp,{className:"w-8 h-8"}),s.jsx("h1",{className:"font-bold text-xl",children:"Tampa APP"})]})})})}),s.jsx("div",{className:"flex items-center justify-center py-20 px-4",children:s.jsxs(rt,{className:"w-full max-w-md shadow-card",children:[s.jsxs(Wt,{className:"text-center space-y-2",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-lg flex items-center justify-center mx-auto",children:s.jsx(Dx,{className:"w-8 h-8 text-primary-foreground"})}),s.jsx(Qt,{className:"text-2xl",children:"Welcome to Tampa APP"}),s.jsx(Bs,{children:"Sign in to your account or create a new one to get started"})]}),s.jsx(st,{children:s.jsxs(fg,{defaultValue:"signin",className:"space-y-4",children:[s.jsxs(um,{className:"grid w-full grid-cols-2",children:[s.jsx(ia,{value:"signin",children:"Sign In"}),s.jsx(ia,{value:"signup",children:"Sign Up"})]}),l&&s.jsxs(Oo,{variant:"destructive",children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Mo,{children:l})]}),s.jsx(oa,{value:"signin",className:"space-y-4",children:s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"signin-email",children:"Email"}),s.jsx(St,{id:"signin-email",name:"email",type:"email",placeholder:"Enter your email",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"signin-password",children:"Password"}),s.jsx(St,{id:"signin-password",name:"password",type:"password",placeholder:"Enter your password",required:!0})]}),s.jsx(we,{type:"submit",className:"w-full",disabled:i,children:i?"Signing in...":"Sign In"})]})}),s.jsx(oa,{value:"signup",className:"space-y-4",children:s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"signup-name",children:"Display Name"}),s.jsx(St,{id:"signup-name",name:"displayName",type:"text",placeholder:"Enter your name",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"signup-email",children:"Email"}),s.jsx(St,{id:"signup-email",name:"email",type:"email",placeholder:"Enter your email",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"signup-password",children:"Password"}),s.jsx(St,{id:"signup-password",name:"password",type:"password",placeholder:"Create a password",required:!0,minLength:6})]}),s.jsx(we,{type:"submit",className:"w-full",disabled:i,children:i?"Creating account...":"Create Account"})]})})]})})]})})]})},MZ=()=>{const e=hf();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var jR="Toggle",u5=x.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:a,...i}=e,[o,l]=Ea({prop:r,onChange:a,defaultProp:n??!1,caller:jR});return s.jsx(vt.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...i,ref:t,onClick:lt(e.onClick,()=>{e.disabled||l(!o)})})});u5.displayName=jR;var _R=u5,ld="ToggleGroup",[NR]=bs(ld,[Xu]),SR=Xu(),d5=Ve.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const a=n;return s.jsx(FZ,{...a,ref:t})}if(r==="multiple"){const a=n;return s.jsx(BZ,{...a,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${ld}\``)});d5.displayName=ld;var[kR,CR]=NR(ld),FZ=Ve.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Ea({prop:r,defaultProp:n??"",onChange:a,caller:ld});return s.jsx(kR,{scope:e.__scopeToggleGroup,type:"single",value:Ve.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:Ve.useCallback(()=>l(""),[l]),children:s.jsx(ER,{...i,ref:t})})}),BZ=Ve.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:a=()=>{},...i}=e,[o,l]=Ea({prop:r,defaultProp:n??[],onChange:a,caller:ld}),u=Ve.useCallback(h=>l((p=[])=>[...p,h]),[l]),f=Ve.useCallback(h=>l((p=[])=>p.filter(v=>v!==h)),[l]);return s.jsx(kR,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:u,onItemDeactivate:f,children:s.jsx(ER,{...i,ref:t})})});d5.displayName=ld;var[UZ,$Z]=NR(ld),ER=Ve.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:a=!0,orientation:i,dir:o,loop:l=!0,...u}=e,f=SR(r),h=Zu(o),p={role:"group",dir:h,...u};return s.jsx(UZ,{scope:r,rovingFocus:a,disabled:n,children:a?s.jsx(Jx,{asChild:!0,...f,orientation:i,dir:h,loop:l,children:s.jsx(vt.div,{...p,ref:t})}):s.jsx(vt.div,{...p,ref:t})})}),bx="ToggleGroupItem",PR=Ve.forwardRef((e,t)=>{const r=CR(bx,e.__scopeToggleGroup),n=$Z(bx,e.__scopeToggleGroup),a=SR(e.__scopeToggleGroup),i=r.value.includes(e.value),o=n.disabled||e.disabled,l={...e,pressed:i,disabled:o},u=Ve.useRef(null);return n.rovingFocus?s.jsx(Zx,{asChild:!0,...a,focusable:!o,active:i,ref:u,children:s.jsx(C4,{...l,ref:t})}):s.jsx(C4,{...l,ref:t})});PR.displayName=bx;var C4=Ve.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...a}=e,i=CR(bx,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=i.type==="single"?o:void 0;return s.jsx(u5,{...l,...a,ref:t,onPressedChange:u=>{u?i.onItemActivate(n):i.onItemDeactivate(n)}})}),AR=d5,TR=PR;const RR=Xh("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),zZ=x.forwardRef(({className:e,variant:t,size:r,...n},a)=>s.jsx(_R,{ref:a,className:Oe(RR({variant:t,size:r,className:e})),...n}));zZ.displayName=_R.displayName;const LR=x.createContext({size:"default",variant:"default"}),DR=x.forwardRef(({className:e,variant:t,size:r,children:n,...a},i)=>s.jsx(AR,{ref:i,className:Oe("flex items-center justify-center gap-1",e),...a,children:s.jsx(LR.Provider,{value:{variant:t,size:r},children:n})}));DR.displayName=AR.displayName;const hb=x.forwardRef(({className:e,children:t,variant:r,size:n,...a},i)=>{const o=x.useContext(LR);return s.jsx(TR,{ref:i,className:Oe(RR({variant:o.variant||r,size:o.size||n}),e),...a,children:t})});hb.displayName=TR.displayName;var hg=e=>e.type==="checkbox",Yd=e=>e instanceof Date,di=e=>e==null;const IR=e=>typeof e=="object";var As=e=>!di(e)&&!Array.isArray(e)&&IR(e)&&!Yd(e),OR=e=>As(e)&&e.target?hg(e.target)?e.target.checked:e.target.value:e,qZ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,MR=(e,t)=>e.has(qZ(t)),VZ=e=>{const t=e.constructor&&e.constructor.prototype;return As(t)&&t.hasOwnProperty("isPrototypeOf")},f5=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Fs(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(f5&&(e instanceof Blob||n))&&(r||As(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!VZ(e))t=e;else for(const a in e)e.hasOwnProperty(a)&&(t[a]=Fs(e[a]));else return e;return t}var E0=e=>/^\w*$/.test(e),ns=e=>e===void 0,h5=e=>Array.isArray(e)?e.filter(Boolean):[],m5=e=>h5(e.replace(/["|']|\]/g,"").split(/\.|\[/)),jt=(e,t,r)=>{if(!t||!As(e))return r;const n=(E0(t)?[t]:m5(t)).reduce((a,i)=>di(a)?a:a[i],e);return ns(n)||n===e?ns(e[t])?r:e[t]:n},Ri=e=>typeof e=="boolean",on=(e,t,r)=>{let n=-1;const a=E0(t)?[t]:m5(t),i=a.length,o=i-1;for(;++n<i;){const l=a[n];let u=r;if(n!==o){const f=e[l];u=As(f)||Array.isArray(f)?f:isNaN(+a[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=u,e=e[l]}};const jx={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Fo={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},Cc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},p5=Ve.createContext(null);p5.displayName="HookFormContext";const P0=()=>Ve.useContext(p5),WZ=e=>{const{children:t,...r}=e;return Ve.createElement(p5.Provider,{value:r},t)};var FR=(e,t,r,n=!0)=>{const a={defaultValues:t._defaultValues};for(const i in e)Object.defineProperty(a,i,{get:()=>{const o=i;return t._proxyFormState[o]!==Fo.all&&(t._proxyFormState[o]=!n||Fo.all),r&&(r[o]=!0),e[o]}});return a};const g5=typeof window<"u"?Ve.useLayoutEffect:Ve.useEffect;function HZ(e){const t=P0(),{control:r=t.control,disabled:n,name:a,exact:i}=e||{},[o,l]=Ve.useState(r._formState),u=Ve.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return g5(()=>r._subscribe({name:a,formState:u.current,exact:i,callback:f=>{!n&&l({...r._formState,...f})}}),[a,n,i]),Ve.useEffect(()=>{u.current.isValid&&r._setValid(!0)},[r]),Ve.useMemo(()=>FR(o,r,u.current,!1),[o,r])}var Oi=e=>typeof e=="string",BR=(e,t,r,n,a)=>Oi(e)?(n&&t.watch.add(e),jt(r,e,a)):Array.isArray(e)?e.map(i=>(n&&t.watch.add(i),jt(r,i))):(n&&(t.watchAll=!0),r),mb=e=>di(e)||!IR(e);function Tc(e,t,r=new WeakSet){if(mb(e)||mb(t))return e===t;if(Yd(e)&&Yd(t))return e.getTime()===t.getTime();const n=Object.keys(e),a=Object.keys(t);if(n.length!==a.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const i of n){const o=e[i];if(!a.includes(i))return!1;if(i!=="ref"){const l=t[i];if(Yd(o)&&Yd(l)||As(o)&&As(l)||Array.isArray(o)&&Array.isArray(l)?!Tc(o,l,r):o!==l)return!1}}return!0}function GZ(e){const t=P0(),{control:r=t.control,name:n,defaultValue:a,disabled:i,exact:o,compute:l}=e||{},u=Ve.useRef(a),f=Ve.useRef(l),h=Ve.useRef(void 0);f.current=l;const p=Ve.useMemo(()=>r._getWatch(n,u.current),[r,n]),[v,m]=Ve.useState(f.current?f.current(p):p);return g5(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:N=>{if(!i){const w=BR(n,r._names,N.values||r._formValues,!1,u.current);if(f.current){const j=f.current(w);Tc(j,h.current)||(m(j),h.current=j)}else m(w)}}}),[r,i,n,o]),Ve.useEffect(()=>r._removeUnmounted()),v}function KZ(e){const t=P0(),{name:r,disabled:n,control:a=t.control,shouldUnregister:i,defaultValue:o}=e,l=MR(a._names.array,r),u=Ve.useMemo(()=>jt(a._formValues,r,jt(a._defaultValues,r,o)),[a,r,o]),f=GZ({control:a,name:r,defaultValue:u,exact:!0}),h=HZ({control:a,name:r,exact:!0}),p=Ve.useRef(e),v=Ve.useRef(void 0),m=Ve.useRef(a.register(r,{...e.rules,value:f,...Ri(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const N=Ve.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!jt(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!jt(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!jt(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!jt(h.validatingFields,r)},error:{enumerable:!0,get:()=>jt(h.errors,r)}}),[h,r]),w=Ve.useCallback(k=>m.current.onChange({target:{value:OR(k),name:r},type:jx.CHANGE}),[r]),j=Ve.useCallback(()=>m.current.onBlur({target:{value:jt(a._formValues,r),name:r},type:jx.BLUR}),[r,a._formValues]),_=Ve.useCallback(k=>{const E=jt(a._fields,r);E&&k&&(E._f.ref={focus:()=>k.focus&&k.focus(),select:()=>k.select&&k.select(),setCustomValidity:I=>k.setCustomValidity(I),reportValidity:()=>k.reportValidity()})},[a._fields,r]),C=Ve.useMemo(()=>({name:r,value:f,...Ri(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:w,onBlur:j,ref:_}),[r,n,h.disabled,w,j,_,f]);return Ve.useEffect(()=>{const k=a._options.shouldUnregister||i,E=v.current;E&&E!==r&&!l&&a.unregister(E),a.register(r,{...p.current.rules,...Ri(p.current.disabled)?{disabled:p.current.disabled}:{}});const I=(D,O)=>{const F=jt(a._fields,D);F&&F._f&&(F._f.mount=O)};if(I(r,!0),k){const D=Fs(jt(a._options.defaultValues,r,p.current.defaultValue));on(a._defaultValues,r,D),ns(jt(a._formValues,r))&&on(a._formValues,r,D)}return!l&&a.register(r),v.current=r,()=>{(l?k&&!a._state.action:k)?a.unregister(r):I(r,!1)}},[r,a,l,i]),Ve.useEffect(()=>{a._setDisabledField({disabled:n,name:r})},[n,r,a]),Ve.useMemo(()=>({field:C,formState:h,fieldState:N}),[C,h,N])}const YZ=e=>e.render(KZ(e));var UR=(e,t,r,n,a)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:a||!0}}:{},hp=e=>Array.isArray(e)?e:[e],E4=()=>{let e=[];return{get observers(){return e},next:a=>{for(const i of e)i.next&&i.next(a)},subscribe:a=>(e.push(a),{unsubscribe:()=>{e=e.filter(i=>i!==a)}}),unsubscribe:()=>{e=[]}}};function $R(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const a=e[n],i=t[n];if(a&&As(a)&&i){const o=$R(a,i);As(o)&&(r[n]=o)}else e[n]&&(r[n]=i)}return r}var ci=e=>As(e)&&!Object.keys(e).length,v5=e=>e.type==="file",Bo=e=>typeof e=="function",_x=e=>{if(!f5)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},zR=e=>e.type==="select-multiple",x5=e=>e.type==="radio",QZ=e=>x5(e)||hg(e),ew=e=>_x(e)&&e.isConnected;function JZ(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=ns(e)?n++:e[t[n++]];return e}function ZZ(e){for(const t in e)if(e.hasOwnProperty(t)&&!ns(e[t]))return!1;return!0}function ks(e,t){const r=Array.isArray(t)?t:E0(t)?[t]:m5(t),n=r.length===1?e:JZ(e,r),a=r.length-1,i=r[a];return n&&delete n[i],a!==0&&(As(n)&&ci(n)||Array.isArray(n)&&ZZ(n))&&ks(e,r.slice(0,-1)),e}var XZ=e=>{for(const t in e)if(Bo(e[t]))return!0;return!1};function qR(e){return Array.isArray(e)||As(e)&&!XZ(e)}function pb(e,t={}){for(const r in e)qR(e[r])?(t[r]=Array.isArray(e[r])?[]:{},pb(e[r],t[r])):ns(e[r])||(t[r]=!0);return t}function yh(e,t,r){r||(r=pb(t));for(const n in e)qR(e[n])?ns(t)||mb(r[n])?r[n]=pb(e[n],Array.isArray(e[n])?[]:{}):yh(e[n],di(t)?{}:t[n],r[n]):r[n]=!Tc(e[n],t[n]);return r}const P4={value:!1,isValid:!1},A4={value:!0,isValid:!0};var VR=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!ns(e[0].attributes.value)?ns(e[0].value)||e[0].value===""?A4:{value:e[0].value,isValid:!0}:A4:P4}return P4},WR=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>ns(e)?e:t?e===""?NaN:e&&+e:r&&Oi(e)?new Date(e):n?n(e):e;const T4={isValid:!1,value:null};var HR=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,T4):T4;function R4(e){const t=e.ref;return v5(t)?t.files:x5(t)?HR(e.refs).value:zR(t)?[...t.selectedOptions].map(({value:r})=>r):hg(t)?VR(e.refs).value:WR(ns(t.value)?e.ref.value:t.value,e)}var eX=(e,t,r,n)=>{const a={};for(const i of e){const o=jt(t,i);o&&on(a,i,o._f)}return{criteriaMode:r,names:[...e],fields:a,shouldUseNativeValidation:n}},Nx=e=>e instanceof RegExp,Km=e=>ns(e)?e:Nx(e)?e.source:As(e)?Nx(e.value)?e.value.source:e.value:e,L4=e=>({isOnSubmit:!e||e===Fo.onSubmit,isOnBlur:e===Fo.onBlur,isOnChange:e===Fo.onChange,isOnAll:e===Fo.all,isOnTouch:e===Fo.onTouched});const D4="AsyncFunction";var tX=e=>!!e&&!!e.validate&&!!(Bo(e.validate)&&e.validate.constructor.name===D4||As(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===D4)),rX=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),I4=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const mp=(e,t,r,n)=>{for(const a of r||Object.keys(e)){const i=jt(e,a);if(i){const{_f:o,...l}=i;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],a)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(mp(l,t))break}else if(As(l)&&mp(l,t))break}}};function O4(e,t,r){const n=jt(e,r);if(n||E0(r))return{error:n,name:r};const a=r.split(".");for(;a.length;){const i=a.join("."),o=jt(t,i),l=jt(e,i);if(o&&!Array.isArray(o)&&r!==i)return{name:r};if(l&&l.type)return{name:i,error:l};if(l&&l.root&&l.root.type)return{name:`${i}.root`,error:l.root};a.pop()}return{name:r}}var nX=(e,t,r,n)=>{r(e);const{name:a,...i}=e;return ci(i)||Object.keys(i).length>=Object.keys(t).length||Object.keys(i).find(o=>t[o]===(!n||Fo.all))},sX=(e,t,r)=>!e||!t||e===t||hp(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),aX=(e,t,r,n,a)=>a.isOnAll?!1:!r&&a.isOnTouch?!(t||e):(r?n.isOnBlur:a.isOnBlur)?!e:(r?n.isOnChange:a.isOnChange)?e:!0,iX=(e,t)=>!h5(jt(e,t)).length&&ks(e,t),oX=(e,t,r)=>{const n=hp(jt(e,r));return on(n,"root",t[r]),on(e,r,n),e};function M4(e,t,r="validate"){if(Oi(e)||Array.isArray(e)&&e.every(Oi)||Ri(e)&&!e)return{type:r,message:Oi(e)?e:"",ref:t}}var dh=e=>As(e)&&!Nx(e)?e:{value:e,message:""},F4=async(e,t,r,n,a,i)=>{const{ref:o,refs:l,required:u,maxLength:f,minLength:h,min:p,max:v,pattern:m,validate:N,name:w,valueAsNumber:j,mount:_}=e._f,C=jt(r,w);if(!_||t.has(w))return{};const k=l?l[0]:o,E=B=>{a&&k.reportValidity&&(k.setCustomValidity(Ri(B)?"":B||""),k.reportValidity())},I={},D=x5(o),O=hg(o),F=D||O,T=(j||v5(o))&&ns(o.value)&&ns(C)||_x(o)&&o.value===""||C===""||Array.isArray(C)&&!C.length,z=UR.bind(null,w,n,I),U=(B,K,V,de=Cc.maxLength,se=Cc.minLength)=>{const Y=B?K:V;I[w]={type:B?de:se,message:Y,ref:o,...z(B?de:se,Y)}};if(i?!Array.isArray(C)||!C.length:u&&(!F&&(T||di(C))||Ri(C)&&!C||O&&!VR(l).isValid||D&&!HR(l).isValid)){const{value:B,message:K}=Oi(u)?{value:!!u,message:u}:dh(u);if(B&&(I[w]={type:Cc.required,message:K,ref:k,...z(Cc.required,K)},!n))return E(K),I}if(!T&&(!di(p)||!di(v))){let B,K;const V=dh(v),de=dh(p);if(!di(C)&&!isNaN(C)){const se=o.valueAsNumber||C&&+C;di(V.value)||(B=se>V.value),di(de.value)||(K=se<de.value)}else{const se=o.valueAsDate||new Date(C),Y=ge=>new Date(new Date().toDateString()+" "+ge),W=o.type=="time",ee=o.type=="week";Oi(V.value)&&C&&(B=W?Y(C)>Y(V.value):ee?C>V.value:se>new Date(V.value)),Oi(de.value)&&C&&(K=W?Y(C)<Y(de.value):ee?C<de.value:se<new Date(de.value))}if((B||K)&&(U(!!B,V.message,de.message,Cc.max,Cc.min),!n))return E(I[w].message),I}if((f||h)&&!T&&(Oi(C)||i&&Array.isArray(C))){const B=dh(f),K=dh(h),V=!di(B.value)&&C.length>+B.value,de=!di(K.value)&&C.length<+K.value;if((V||de)&&(U(V,B.message,K.message),!n))return E(I[w].message),I}if(m&&!T&&Oi(C)){const{value:B,message:K}=dh(m);if(Nx(B)&&!C.match(B)&&(I[w]={type:Cc.pattern,message:K,ref:o,...z(Cc.pattern,K)},!n))return E(K),I}if(N){if(Bo(N)){const B=await N(C,r),K=M4(B,k);if(K&&(I[w]={...K,...z(Cc.validate,K.message)},!n))return E(K.message),I}else if(As(N)){let B={};for(const K in N){if(!ci(B)&&!n)break;const V=M4(await N[K](C,r),k,K);V&&(B={...V,...z(K,V.message)},E(V.message),n&&(I[w]=B))}if(!ci(B)&&(I[w]={ref:k,...B},!n))return I}}return E(!0),I};const lX={mode:Fo.onSubmit,reValidateMode:Fo.onChange,shouldFocusError:!0};function cX(e={}){let t={...lX,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Bo(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},a=As(t.defaultValues)||As(t.values)?Fs(t.defaultValues||t.values)||{}:{},i=t.shouldUnregister?{}:Fs(a),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},u,f=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const v={array:E4(),state:E4()},m=t.criteriaMode===Fo.all,N=me=>xe=>{clearTimeout(f),f=setTimeout(me,xe)},w=async me=>{if(!t.disabled&&(h.isValid||p.isValid||me)){const xe=t.resolver?ci((await O()).errors):await T(n,!0);xe!==r.isValid&&v.state.next({isValid:xe})}},j=(me,xe)=>{!t.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((me||Array.from(l.mount)).forEach(Ce=>{Ce&&(xe?on(r.validatingFields,Ce,xe):ks(r.validatingFields,Ce))}),v.state.next({validatingFields:r.validatingFields,isValidating:!ci(r.validatingFields)}))},_=(me,xe=[],Ce,$e,et=!0,Ge=!0)=>{if($e&&Ce&&!t.disabled){if(o.action=!0,Ge&&Array.isArray(jt(n,me))){const tt=Ce(jt(n,me),$e.argA,$e.argB);et&&on(n,me,tt)}if(Ge&&Array.isArray(jt(r.errors,me))){const tt=Ce(jt(r.errors,me),$e.argA,$e.argB);et&&on(r.errors,me,tt),iX(r.errors,me)}if((h.touchedFields||p.touchedFields)&&Ge&&Array.isArray(jt(r.touchedFields,me))){const tt=Ce(jt(r.touchedFields,me),$e.argA,$e.argB);et&&on(r.touchedFields,me,tt)}(h.dirtyFields||p.dirtyFields)&&(r.dirtyFields=yh(a,i)),v.state.next({name:me,isDirty:U(me,xe),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else on(i,me,xe)},C=(me,xe)=>{on(r.errors,me,xe),v.state.next({errors:r.errors})},k=me=>{r.errors=me,v.state.next({errors:r.errors,isValid:!1})},E=(me,xe,Ce,$e)=>{const et=jt(n,me);if(et){const Ge=jt(i,me,ns(Ce)?jt(a,me):Ce);ns(Ge)||$e&&$e.defaultChecked||xe?on(i,me,xe?Ge:R4(et._f)):V(me,Ge),o.mount&&w()}},I=(me,xe,Ce,$e,et)=>{let Ge=!1,tt=!1;const gt={name:me};if(!t.disabled){if(!Ce||$e){(h.isDirty||p.isDirty)&&(tt=r.isDirty,r.isDirty=gt.isDirty=U(),Ge=tt!==gt.isDirty);const _t=Tc(jt(a,me),xe);tt=!!jt(r.dirtyFields,me),_t?ks(r.dirtyFields,me):on(r.dirtyFields,me,!0),gt.dirtyFields=r.dirtyFields,Ge=Ge||(h.dirtyFields||p.dirtyFields)&&tt!==!_t}if(Ce){const _t=jt(r.touchedFields,me);_t||(on(r.touchedFields,me,Ce),gt.touchedFields=r.touchedFields,Ge=Ge||(h.touchedFields||p.touchedFields)&&_t!==Ce)}Ge&&et&&v.state.next(gt)}return Ge?gt:{}},D=(me,xe,Ce,$e)=>{const et=jt(r.errors,me),Ge=(h.isValid||p.isValid)&&Ri(xe)&&r.isValid!==xe;if(t.delayError&&Ce?(u=N(()=>C(me,Ce)),u(t.delayError)):(clearTimeout(f),u=null,Ce?on(r.errors,me,Ce):ks(r.errors,me)),(Ce?!Tc(et,Ce):et)||!ci($e)||Ge){const tt={...$e,...Ge&&Ri(xe)?{isValid:xe}:{},errors:r.errors,name:me};r={...r,...tt},v.state.next(tt)}},O=async me=>{j(me,!0);const xe=await t.resolver(i,t.context,eX(me||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return j(me),xe},F=async me=>{const{errors:xe}=await O(me);if(me)for(const Ce of me){const $e=jt(xe,Ce);$e?on(r.errors,Ce,$e):ks(r.errors,Ce)}else r.errors=xe;return xe},T=async(me,xe,Ce={valid:!0})=>{for(const $e in me){const et=me[$e];if(et){const{_f:Ge,...tt}=et;if(Ge){const gt=l.array.has(Ge.name),_t=et._f&&tX(et._f);_t&&h.validatingFields&&j([Ge.name],!0);const yt=await F4(et,l.disabled,i,m,t.shouldUseNativeValidation&&!xe,gt);if(_t&&h.validatingFields&&j([Ge.name]),yt[Ge.name]&&(Ce.valid=!1,xe))break;!xe&&(jt(yt,Ge.name)?gt?oX(r.errors,yt,Ge.name):on(r.errors,Ge.name,yt[Ge.name]):ks(r.errors,Ge.name))}!ci(tt)&&await T(tt,xe,Ce)}}return Ce.valid},z=()=>{for(const me of l.unMount){const xe=jt(n,me);xe&&(xe._f.refs?xe._f.refs.every(Ce=>!ew(Ce)):!ew(xe._f.ref))&&ie(me)}l.unMount=new Set},U=(me,xe)=>!t.disabled&&(me&&xe&&on(i,me,xe),!Tc(ge(),a)),B=(me,xe,Ce)=>BR(me,l,{...o.mount?i:ns(xe)?a:Oi(me)?{[me]:xe}:xe},Ce,xe),K=me=>h5(jt(o.mount?i:a,me,t.shouldUnregister?jt(a,me,[]):[])),V=(me,xe,Ce={})=>{const $e=jt(n,me);let et=xe;if($e){const Ge=$e._f;Ge&&(!Ge.disabled&&on(i,me,WR(xe,Ge)),et=_x(Ge.ref)&&di(xe)?"":xe,zR(Ge.ref)?[...Ge.ref.options].forEach(tt=>tt.selected=et.includes(tt.value)):Ge.refs?hg(Ge.ref)?Ge.refs.forEach(tt=>{(!tt.defaultChecked||!tt.disabled)&&(Array.isArray(et)?tt.checked=!!et.find(gt=>gt===tt.value):tt.checked=et===tt.value||!!et)}):Ge.refs.forEach(tt=>tt.checked=tt.value===et):v5(Ge.ref)?Ge.ref.value="":(Ge.ref.value=et,Ge.ref.type||v.state.next({name:me,values:Fs(i)})))}(Ce.shouldDirty||Ce.shouldTouch)&&I(me,et,Ce.shouldTouch,Ce.shouldDirty,!0),Ce.shouldValidate&&ee(me)},de=(me,xe,Ce)=>{for(const $e in xe){if(!xe.hasOwnProperty($e))return;const et=xe[$e],Ge=me+"."+$e,tt=jt(n,Ge);(l.array.has(me)||As(et)||tt&&!tt._f)&&!Yd(et)?de(Ge,et,Ce):V(Ge,et,Ce)}},se=(me,xe,Ce={})=>{const $e=jt(n,me),et=l.array.has(me),Ge=Fs(xe);on(i,me,Ge),et?(v.array.next({name:me,values:Fs(i)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&Ce.shouldDirty&&v.state.next({name:me,dirtyFields:yh(a,i),isDirty:U(me,Ge)})):$e&&!$e._f&&!di(Ge)?de(me,Ge,Ce):V(me,Ge,Ce),I4(me,l)&&v.state.next({...r,name:me}),v.state.next({name:o.mount?me:void 0,values:Fs(i)})},Y=async me=>{o.mount=!0;const xe=me.target;let Ce=xe.name,$e=!0;const et=jt(n,Ce),Ge=_t=>{$e=Number.isNaN(_t)||Yd(_t)&&isNaN(_t.getTime())||Tc(_t,jt(i,Ce,_t))},tt=L4(t.mode),gt=L4(t.reValidateMode);if(et){let _t,yt;const zt=xe.type?R4(et._f):OR(me),bt=me.type===jx.BLUR||me.type===jx.FOCUS_OUT,Jr=!rX(et._f)&&!t.resolver&&!jt(r.errors,Ce)&&!et._f.deps||aX(bt,jt(r.touchedFields,Ce),r.isSubmitted,gt,tt),dr=I4(Ce,l,bt);on(i,Ce,zt),bt?(!xe||!xe.readOnly)&&(et._f.onBlur&&et._f.onBlur(me),u&&u(0)):et._f.onChange&&et._f.onChange(me);const Yt=I(Ce,zt,bt),or=!ci(Yt)||dr;if(!bt&&v.state.next({name:Ce,type:me.type,values:Fs(i)}),Jr)return(h.isValid||p.isValid)&&(t.mode==="onBlur"?bt&&w():bt||w()),or&&v.state.next({name:Ce,...dr?{}:Yt});if(!bt&&dr&&v.state.next({...r}),t.resolver){const{errors:Pr}=await O([Ce]);if(Ge(zt),$e){const Ue=O4(r.errors,n,Ce),ar=O4(Pr,n,Ue.name||Ce);_t=ar.error,Ce=ar.name,yt=ci(Pr)}}else j([Ce],!0),_t=(await F4(et,l.disabled,i,m,t.shouldUseNativeValidation))[Ce],j([Ce]),Ge(zt),$e&&(_t?yt=!1:(h.isValid||p.isValid)&&(yt=await T(n,!0)));$e&&(et._f.deps&&(!Array.isArray(et._f.deps)||et._f.deps.length>0)&&ee(et._f.deps),D(Ce,yt,_t,Yt))}},W=(me,xe)=>{if(jt(r.errors,xe)&&me.focus)return me.focus(),1},ee=async(me,xe={})=>{let Ce,$e;const et=hp(me);if(t.resolver){const Ge=await F(ns(me)?me:et);Ce=ci(Ge),$e=me?!et.some(tt=>jt(Ge,tt)):Ce}else me?($e=(await Promise.all(et.map(async Ge=>{const tt=jt(n,Ge);return await T(tt&&tt._f?{[Ge]:tt}:tt)}))).every(Boolean),!(!$e&&!r.isValid)&&w()):$e=Ce=await T(n);return v.state.next({...!Oi(me)||(h.isValid||p.isValid)&&Ce!==r.isValid?{}:{name:me},...t.resolver||!me?{isValid:Ce}:{},errors:r.errors}),xe.shouldFocus&&!$e&&mp(n,W,me?et:l.mount),$e},ge=(me,xe)=>{let Ce={...o.mount?i:a};return xe&&(Ce=$R(xe.dirtyFields?r.dirtyFields:r.touchedFields,Ce)),ns(me)?Ce:Oi(me)?jt(Ce,me):me.map($e=>jt(Ce,$e))},re=(me,xe)=>({invalid:!!jt((xe||r).errors,me),isDirty:!!jt((xe||r).dirtyFields,me),error:jt((xe||r).errors,me),isValidating:!!jt(r.validatingFields,me),isTouched:!!jt((xe||r).touchedFields,me)}),L=me=>{me&&hp(me).forEach(xe=>ks(r.errors,xe)),v.state.next({errors:me?r.errors:{}})},q=(me,xe,Ce)=>{const $e=(jt(n,me,{_f:{}})._f||{}).ref,et=jt(r.errors,me)||{},{ref:Ge,message:tt,type:gt,..._t}=et;on(r.errors,me,{..._t,...xe,ref:$e}),v.state.next({name:me,errors:r.errors,isValid:!1}),Ce&&Ce.shouldFocus&&$e&&$e.focus&&$e.focus()},J=(me,xe)=>Bo(me)?v.state.subscribe({next:Ce=>"values"in Ce&&me(B(void 0,xe),Ce)}):B(me,xe,!0),ne=me=>v.state.subscribe({next:xe=>{sX(me.name,xe.name,me.exact)&&nX(xe,me.formState||h,Nt,me.reRenderRoot)&&me.callback({values:{...i},...r,...xe,defaultValues:a})}}).unsubscribe,ue=me=>(o.mount=!0,p={...p,...me.formState},ne({...me,formState:p})),ie=(me,xe={})=>{for(const Ce of me?hp(me):l.mount)l.mount.delete(Ce),l.array.delete(Ce),xe.keepValue||(ks(n,Ce),ks(i,Ce)),!xe.keepError&&ks(r.errors,Ce),!xe.keepDirty&&ks(r.dirtyFields,Ce),!xe.keepTouched&&ks(r.touchedFields,Ce),!xe.keepIsValidating&&ks(r.validatingFields,Ce),!t.shouldUnregister&&!xe.keepDefaultValue&&ks(a,Ce);v.state.next({values:Fs(i)}),v.state.next({...r,...xe.keepDirty?{isDirty:U()}:{}}),!xe.keepIsValid&&w()},oe=({disabled:me,name:xe})=>{(Ri(me)&&o.mount||me||l.disabled.has(xe))&&(me?l.disabled.add(xe):l.disabled.delete(xe))},le=(me,xe={})=>{let Ce=jt(n,me);const $e=Ri(xe.disabled)||Ri(t.disabled);return on(n,me,{...Ce||{},_f:{...Ce&&Ce._f?Ce._f:{ref:{name:me}},name:me,mount:!0,...xe}}),l.mount.add(me),Ce?oe({disabled:Ri(xe.disabled)?xe.disabled:t.disabled,name:me}):E(me,!0,xe.value),{...$e?{disabled:xe.disabled||t.disabled}:{},...t.progressive?{required:!!xe.required,min:Km(xe.min),max:Km(xe.max),minLength:Km(xe.minLength),maxLength:Km(xe.maxLength),pattern:Km(xe.pattern)}:{},name:me,onChange:Y,onBlur:Y,ref:et=>{if(et){le(me,xe),Ce=jt(n,me);const Ge=ns(et.value)&&et.querySelectorAll&&et.querySelectorAll("input,select,textarea")[0]||et,tt=QZ(Ge),gt=Ce._f.refs||[];if(tt?gt.find(_t=>_t===Ge):Ge===Ce._f.ref)return;on(n,me,{_f:{...Ce._f,...tt?{refs:[...gt.filter(ew),Ge,...Array.isArray(jt(a,me))?[{}]:[]],ref:{type:Ge.type,name:me}}:{ref:Ge}}}),E(me,!1,void 0,Ge)}else Ce=jt(n,me,{}),Ce._f&&(Ce._f.mount=!1),(t.shouldUnregister||xe.shouldUnregister)&&!(MR(l.array,me)&&o.action)&&l.unMount.add(me)}}},ye=()=>t.shouldFocusError&&mp(n,W,l.mount),Pe=me=>{Ri(me)&&(v.state.next({disabled:me}),mp(n,(xe,Ce)=>{const $e=jt(n,Ce);$e&&(xe.disabled=$e._f.disabled||me,Array.isArray($e._f.refs)&&$e._f.refs.forEach(et=>{et.disabled=$e._f.disabled||me}))},0,!1))},We=(me,xe)=>async Ce=>{let $e;Ce&&(Ce.preventDefault&&Ce.preventDefault(),Ce.persist&&Ce.persist());let et=Fs(i);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:Ge,values:tt}=await O();r.errors=Ge,et=Fs(tt)}else await T(n);if(l.disabled.size)for(const Ge of l.disabled)ks(et,Ge);if(ks(r.errors,"root"),ci(r.errors)){v.state.next({errors:{}});try{await me(et,Ce)}catch(Ge){$e=Ge}}else xe&&await xe({...r.errors},Ce),ye(),setTimeout(ye);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ci(r.errors)&&!$e,submitCount:r.submitCount+1,errors:r.errors}),$e)throw $e},Fe=(me,xe={})=>{jt(n,me)&&(ns(xe.defaultValue)?se(me,Fs(jt(a,me))):(se(me,xe.defaultValue),on(a,me,Fs(xe.defaultValue))),xe.keepTouched||ks(r.touchedFields,me),xe.keepDirty||(ks(r.dirtyFields,me),r.isDirty=xe.defaultValue?U(me,Fs(jt(a,me))):U()),xe.keepError||(ks(r.errors,me),h.isValid&&w()),v.state.next({...r}))},je=(me,xe={})=>{const Ce=me?Fs(me):a,$e=Fs(Ce),et=ci(me),Ge=et?a:$e;if(xe.keepDefaultValues||(a=Ce),!xe.keepValues){if(xe.keepDirtyValues){const tt=new Set([...l.mount,...Object.keys(yh(a,i))]);for(const gt of Array.from(tt))jt(r.dirtyFields,gt)?on(Ge,gt,jt(i,gt)):se(gt,jt(Ge,gt))}else{if(f5&&ns(me))for(const tt of l.mount){const gt=jt(n,tt);if(gt&&gt._f){const _t=Array.isArray(gt._f.refs)?gt._f.refs[0]:gt._f.ref;if(_x(_t)){const yt=_t.closest("form");if(yt){yt.reset();break}}}}if(xe.keepFieldsRef)for(const tt of l.mount)se(tt,jt(Ge,tt));else n={}}i=t.shouldUnregister?xe.keepDefaultValues?Fs(a):{}:Fs(Ge),v.array.next({values:{...Ge}}),v.state.next({values:{...Ge}})}l={mount:xe.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!xe.keepIsValid||!!xe.keepDirtyValues,o.watch=!!t.shouldUnregister,v.state.next({submitCount:xe.keepSubmitCount?r.submitCount:0,isDirty:et?!1:xe.keepDirty?r.isDirty:!!(xe.keepDefaultValues&&!Tc(me,a)),isSubmitted:xe.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:et?{}:xe.keepDirtyValues?xe.keepDefaultValues&&i?yh(a,i):r.dirtyFields:xe.keepDefaultValues&&me?yh(a,me):xe.keepDirty?r.dirtyFields:{},touchedFields:xe.keepTouched?r.touchedFields:{},errors:xe.keepErrors?r.errors:{},isSubmitSuccessful:xe.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:a})},te=(me,xe)=>je(Bo(me)?me(i):me,xe),Ze=(me,xe={})=>{const Ce=jt(n,me),$e=Ce&&Ce._f;if($e){const et=$e.refs?$e.refs[0]:$e.ref;et.focus&&(et.focus(),xe.shouldSelect&&Bo(et.select)&&et.select())}},Nt=me=>{r={...r,...me}},Qe={control:{register:le,unregister:ie,getFieldState:re,handleSubmit:We,setError:q,_subscribe:ne,_runSchema:O,_focusError:ye,_getWatch:B,_getDirty:U,_setValid:w,_setFieldArray:_,_setDisabledField:oe,_setErrors:k,_getFieldArray:K,_reset:je,_resetDefaultValues:()=>Bo(t.defaultValues)&&t.defaultValues().then(me=>{te(me,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:z,_disableForm:Pe,_subjects:v,_proxyFormState:h,get _fields(){return n},get _formValues(){return i},get _state(){return o},set _state(me){o=me},get _defaultValues(){return a},get _names(){return l},set _names(me){l=me},get _formState(){return r},get _options(){return t},set _options(me){t={...t,...me}}},subscribe:ue,trigger:ee,register:le,handleSubmit:We,watch:J,setValue:se,getValues:ge,reset:te,resetField:Fe,clearErrors:L,unregister:ie,setError:q,setFocus:Ze,getFieldState:re};return{...Qe,formControl:Qe}}function y5(e={}){const t=Ve.useRef(void 0),r=Ve.useRef(void 0),[n,a]=Ve.useState({isDirty:!1,isValidating:!1,isLoading:Bo(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Bo(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Bo(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=cX(e);t.current={...l,formState:n}}const i=t.current.control;return i._options=e,g5(()=>{const o=i._subscribe({formState:i._proxyFormState,callback:()=>a({...i._formState}),reRenderRoot:!0});return a(l=>({...l,isReady:!0})),i._formState.isReady=!0,o},[i]),Ve.useEffect(()=>i._disableForm(e.disabled),[i,e.disabled]),Ve.useEffect(()=>{e.mode&&(i._options.mode=e.mode),e.reValidateMode&&(i._options.reValidateMode=e.reValidateMode)},[i,e.mode,e.reValidateMode]),Ve.useEffect(()=>{e.errors&&(i._setErrors(e.errors),i._focusError())},[i,e.errors]),Ve.useEffect(()=>{e.shouldUnregister&&i._subjects.state.next({values:i._getWatch()})},[i,e.shouldUnregister]),Ve.useEffect(()=>{if(i._proxyFormState.isDirty){const o=i._getDirty();o!==n.isDirty&&i._subjects.state.next({isDirty:o})}},[i,n.isDirty]),Ve.useEffect(()=>{e.values&&!Tc(e.values,r.current)?(i._reset(e.values,{keepFieldsRef:!0,...i._options.resetOptions}),r.current=e.values,a(o=>({...o}))):i._resetDefaultValues()},[i,e.values]),Ve.useEffect(()=>{i._state.mount||(i._setValid(),i._state.mount=!0),i._state.watch&&(i._state.watch=!1,i._subjects.state.next({...i._formState})),i._removeUnmounted()}),t.current.formState=FR(n,i),t.current}const B4=(e,t,r)=>{if(e&&"reportValidity"in e){const n=jt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},GR=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?B4(n.ref,r,e):n.refs&&n.refs.forEach(a=>B4(a,r,e))}},uX=(e,t)=>{t.shouldUseNativeValidation&&GR(e,t);const r={};for(const n in e){const a=jt(t.fields,n),i=Object.assign(e[n]||{},{ref:a&&a.ref});if(dX(t.names||Object.keys(e),n)){const o=Object.assign({},jt(r,n));on(o,"root",i),on(r,n,o)}else on(r,n,i)}return r},dX=(e,t)=>e.some(r=>r.startsWith(t+"."));var fX=function(e,t){for(var r={};e.length;){var n=e[0],a=n.code,i=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:i,type:a};if("unionErrors"in n&&n.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return e.push(p)})}),t){var u=r[o].types,f=u&&u[n.code];r[o]=UR(o,t,r,a,f?[].concat(f,n.message):n.message)}e.shift()}return r},w5=function(e,t,r){return r===void 0&&(r={}),function(n,a,i){try{return Promise.resolve((function(o,l){try{var u=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(f){return i.shouldUseNativeValidation&&GR({},i),{errors:{},values:r.raw?n:f}})}catch(f){return l(f)}return u&&u.then?u.then(void 0,l):u})(0,function(o){if((function(l){return Array.isArray(l?.errors)})(o))return{values:{},errors:uX(fX(o.errors,!i.shouldUseNativeValidation&&i.criteriaMode==="all"),i)};throw o}))}catch(o){return Promise.reject(o)}}},Yr;(function(e){e.assertEqual=a=>{};function t(a){}e.assertIs=t;function r(a){throw new Error}e.assertNever=r,e.arrayToEnum=a=>{const i={};for(const o of a)i[o]=o;return i},e.getValidEnumValues=a=>{const i=e.objectKeys(a).filter(l=>typeof a[a[l]]!="number"),o={};for(const l of i)o[l]=a[l];return e.objectValues(o)},e.objectValues=a=>e.objectKeys(a).map(function(i){return a[i]}),e.objectKeys=typeof Object.keys=="function"?a=>Object.keys(a):a=>{const i=[];for(const o in a)Object.prototype.hasOwnProperty.call(a,o)&&i.push(o);return i},e.find=(a,i)=>{for(const o of a)if(i(o))return o},e.isInteger=typeof Number.isInteger=="function"?a=>Number.isInteger(a):a=>typeof a=="number"&&Number.isFinite(a)&&Math.floor(a)===a;function n(a,i=" | "){return a.map(o=>typeof o=="string"?`'${o}'`:o).join(i)}e.joinValues=n,e.jsonStringifyReplacer=(a,i)=>typeof i=="bigint"?i.toString():i})(Yr||(Yr={}));var U4;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(U4||(U4={}));const Ft=Yr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Du=e=>{switch(typeof e){case"undefined":return Ft.undefined;case"string":return Ft.string;case"number":return Number.isNaN(e)?Ft.nan:Ft.number;case"boolean":return Ft.boolean;case"function":return Ft.function;case"bigint":return Ft.bigint;case"symbol":return Ft.symbol;case"object":return Array.isArray(e)?Ft.array:e===null?Ft.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Ft.promise:typeof Map<"u"&&e instanceof Map?Ft.map:typeof Set<"u"&&e instanceof Set?Ft.set:typeof Date<"u"&&e instanceof Date?Ft.date:Ft.object;default:return Ft.unknown}},mt=Yr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class zc extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(i){return i.message},n={_errors:[]},a=i=>{for(const o of i.issues)if(o.code==="invalid_union")o.unionErrors.map(a);else if(o.code==="invalid_return_type")a(o.returnTypeError);else if(o.code==="invalid_arguments")a(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,u=0;for(;u<o.path.length;){const f=o.path[u];u===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(r(o))):l[f]=l[f]||{_errors:[]},l=l[f],u++}}};return a(this),n}static assert(t){if(!(t instanceof zc))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Yr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const a of this.issues)if(a.path.length>0){const i=a.path[0];r[i]=r[i]||[],r[i].push(t(a))}else n.push(t(a));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}zc.create=e=>new zc(e);const gb=(e,t)=>{let r;switch(e.code){case mt.invalid_type:e.received===Ft.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case mt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Yr.jsonStringifyReplacer)}`;break;case mt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Yr.joinValues(e.keys,", ")}`;break;case mt.invalid_union:r="Invalid input";break;case mt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Yr.joinValues(e.options)}`;break;case mt.invalid_enum_value:r=`Invalid enum value. Expected ${Yr.joinValues(e.options)}, received '${e.received}'`;break;case mt.invalid_arguments:r="Invalid function arguments";break;case mt.invalid_return_type:r="Invalid function return type";break;case mt.invalid_date:r="Invalid date";break;case mt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Yr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case mt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case mt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case mt.custom:r="Invalid input";break;case mt.invalid_intersection_types:r="Intersection results could not be merged";break;case mt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case mt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Yr.assertNever(e)}return{message:r}};let hX=gb;function mX(){return hX}const pX=e=>{const{data:t,path:r,errorMaps:n,issueData:a}=e,i=[...r,...a.path||[]],o={...a,path:i};if(a.message!==void 0)return{...a,path:i,message:a.message};let l="";const u=n.filter(f=>!!f).slice().reverse();for(const f of u)l=f(o,{data:t,defaultError:l}).message;return{...a,path:i,message:l}};function Ct(e,t){const r=mX(),n=pX({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===gb?void 0:gb].filter(a=>!!a)});e.common.issues.push(n)}class $i{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const a of r){if(a.status==="aborted")return yr;a.status==="dirty"&&t.dirty(),n.push(a.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const a of r){const i=await a.key,o=await a.value;n.push({key:i,value:o})}return $i.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const a of r){const{key:i,value:o}=a;if(i.status==="aborted"||o.status==="aborted")return yr;i.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),i.value!=="__proto__"&&(typeof o.value<"u"||a.alwaysSet)&&(n[i.value]=o.value)}return{status:t.value,value:n}}}const yr=Object.freeze({status:"aborted"}),ap=e=>({status:"dirty",value:e}),co=e=>({status:"valid",value:e}),$4=e=>e.status==="aborted",z4=e=>e.status==="dirty",Vh=e=>e.status==="valid",Sx=e=>typeof Promise<"u"&&e instanceof Promise;var Vt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(Vt||(Vt={}));class Ku{constructor(t,r,n,a){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=a}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const q4=(e,t)=>{if(Vh(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new zc(e.common.issues);return this._error=r,this._error}}};function Dr(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:a}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:a}:{errorMap:(o,l)=>{const{message:u}=e;return o.code==="invalid_enum_value"?{message:u??l.defaultError}:typeof l.data>"u"?{message:u??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:u??r??l.defaultError}},description:a}}class Gr{get description(){return this._def.description}_getType(t){return Du(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:Du(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new $i,ctx:{common:t.parent.common,data:t.data,parsedType:Du(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(Sx(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Du(t)},a=this._parseSync({data:t,path:n.path,parent:n});return q4(n,a)}"~validate"(t){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Du(t)};if(!this["~standard"].async)try{const n=this._parseSync({data:t,path:[],parent:r});return Vh(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(n=>Vh(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Du(t)},a=this._parse({data:t,path:n.path,parent:n}),i=await(Sx(a)?a:Promise.resolve(a));return q4(n,i)}refine(t,r){const n=a=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(a):r;return this._refinement((a,i)=>{const o=t(a),l=()=>i.addIssue({code:mt.custom,...n(a)});return typeof Promise<"u"&&o instanceof Promise?o.then(u=>u?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,a)=>t(n)?!0:(a.addIssue(typeof r=="function"?r(n,a):r),!1))}_refinement(t){return new Gh({schema:this,typeName:br.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return $u.create(this,this._def)}nullable(){return Kh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ll.create(this)}promise(){return Ex.create(this,this._def)}or(t){return kx.create([this,t],this._def)}and(t){return Cx.create(this,t,this._def)}transform(t){return new Gh({...Dr(this._def),schema:this,typeName:br.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new wb({...Dr(this._def),innerType:this,defaultValue:r,typeName:br.ZodDefault})}brand(){return new FX({typeName:br.ZodBranded,type:this,...Dr(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new bb({...Dr(this._def),innerType:this,catchValue:r,typeName:br.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return b5.create(this,t)}readonly(){return jb.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const gX=/^c[^\s-]{8,}$/i,vX=/^[0-9a-z]+$/,xX=/^[0-9A-HJKMNP-TV-Z]{26}$/i,yX=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,wX=/^[a-z0-9_-]{21}$/i,bX=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,jX=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,_X=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,NX="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let tw;const SX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,kX=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,CX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,EX=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,PX=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,AX=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,KR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",TX=new RegExp(`^${KR}$`);function YR(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function RX(e){return new RegExp(`^${YR(e)}$`)}function LX(e){let t=`${KR}T${YR(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function DX(e,t){return!!((t==="v4"||!t)&&SX.test(e)||(t==="v6"||!t)&&CX.test(e))}function IX(e,t){if(!bX.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),a=JSON.parse(atob(n));return!(typeof a!="object"||a===null||"typ"in a&&a?.typ!=="JWT"||!a.alg||t&&a.alg!==t)}catch{return!1}}function OX(e,t){return!!((t==="v4"||!t)&&kX.test(e)||(t==="v6"||!t)&&EX.test(e))}class Fu extends Gr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Ft.string){const i=this._getOrReturnCtx(t);return Ct(i,{code:mt.invalid_type,expected:Ft.string,received:i.parsedType}),yr}const n=new $i;let a;for(const i of this._def.checks)if(i.kind==="min")t.data.length<i.value&&(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="max")t.data.length>i.value&&(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!1,message:i.message}),n.dirty());else if(i.kind==="length"){const o=t.data.length>i.value,l=t.data.length<i.value;(o||l)&&(a=this._getOrReturnCtx(t,a),o?Ct(a,{code:mt.too_big,maximum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}):l&&Ct(a,{code:mt.too_small,minimum:i.value,type:"string",inclusive:!0,exact:!0,message:i.message}),n.dirty())}else if(i.kind==="email")_X.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"email",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="emoji")tw||(tw=new RegExp(NX,"u")),tw.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"emoji",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="uuid")yX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"uuid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="nanoid")wX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"nanoid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid")gX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"cuid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="cuid2")vX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"cuid2",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="ulid")xX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"ulid",code:mt.invalid_string,message:i.message}),n.dirty());else if(i.kind==="url")try{new URL(t.data)}catch{a=this._getOrReturnCtx(t,a),Ct(a,{validation:"url",code:mt.invalid_string,message:i.message}),n.dirty()}else i.kind==="regex"?(i.regex.lastIndex=0,i.regex.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"regex",code:mt.invalid_string,message:i.message}),n.dirty())):i.kind==="trim"?t.data=t.data.trim():i.kind==="includes"?t.data.includes(i.value,i.position)||(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.invalid_string,validation:{includes:i.value,position:i.position},message:i.message}),n.dirty()):i.kind==="toLowerCase"?t.data=t.data.toLowerCase():i.kind==="toUpperCase"?t.data=t.data.toUpperCase():i.kind==="startsWith"?t.data.startsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.invalid_string,validation:{startsWith:i.value},message:i.message}),n.dirty()):i.kind==="endsWith"?t.data.endsWith(i.value)||(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.invalid_string,validation:{endsWith:i.value},message:i.message}),n.dirty()):i.kind==="datetime"?LX(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.invalid_string,validation:"datetime",message:i.message}),n.dirty()):i.kind==="date"?TX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.invalid_string,validation:"date",message:i.message}),n.dirty()):i.kind==="time"?RX(i).test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.invalid_string,validation:"time",message:i.message}),n.dirty()):i.kind==="duration"?jX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"duration",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="ip"?DX(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"ip",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="jwt"?IX(t.data,i.alg)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"jwt",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="cidr"?OX(t.data,i.version)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"cidr",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64"?PX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"base64",code:mt.invalid_string,message:i.message}),n.dirty()):i.kind==="base64url"?AX.test(t.data)||(a=this._getOrReturnCtx(t,a),Ct(a,{validation:"base64url",code:mt.invalid_string,message:i.message}),n.dirty()):Yr.assertNever(i);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(a=>t.test(a),{validation:r,code:mt.invalid_string,...Vt.errToObj(n)})}_addCheck(t){return new Fu({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Vt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Vt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Vt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Vt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...Vt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Vt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Vt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Vt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...Vt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...Vt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...Vt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Vt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...Vt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...Vt.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...Vt.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...Vt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...Vt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...Vt.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...Vt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...Vt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...Vt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...Vt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...Vt.errToObj(r)})}nonempty(t){return this.min(1,Vt.errToObj(t))}trim(){return new Fu({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new Fu({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new Fu({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Fu.create=e=>new Fu({checks:[],typeName:br.ZodString,coerce:e?.coerce??!1,...Dr(e)});function MX(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,a=r>n?r:n,i=Number.parseInt(e.toFixed(a).replace(".","")),o=Number.parseInt(t.toFixed(a).replace(".",""));return i%o/10**a}class Wh extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Ft.number){const i=this._getOrReturnCtx(t);return Ct(i,{code:mt.invalid_type,expected:Ft.number,received:i.parsedType}),yr}let n;const a=new $i;for(const i of this._def.checks)i.kind==="int"?Yr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.invalid_type,expected:"integer",received:"float",message:i.message}),a.dirty()):i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.too_small,minimum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.too_big,maximum:i.value,type:"number",inclusive:i.inclusive,exact:!1,message:i.message}),a.dirty()):i.kind==="multipleOf"?MX(t.data,i.value)!==0&&(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):i.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.not_finite,message:i.message}),a.dirty()):Yr.assertNever(i);return{status:a.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,Vt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Vt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Vt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Vt.toString(r))}setLimit(t,r,n,a){return new Wh({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Vt.toString(a)}]})}_addCheck(t){return new Wh({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Vt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Vt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Vt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Vt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Vt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Vt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:Vt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Vt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Vt.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Yr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Wh.create=e=>new Wh({checks:[],typeName:br.ZodNumber,coerce:e?.coerce||!1,...Dr(e)});class $p extends Gr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Ft.bigint)return this._getInvalidInput(t);let n;const a=new $i;for(const i of this._def.checks)i.kind==="min"?(i.inclusive?t.data<i.value:t.data<=i.value)&&(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.too_small,type:"bigint",minimum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="max"?(i.inclusive?t.data>i.value:t.data>=i.value)&&(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.too_big,type:"bigint",maximum:i.value,inclusive:i.inclusive,message:i.message}),a.dirty()):i.kind==="multipleOf"?t.data%i.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Ct(n,{code:mt.not_multiple_of,multipleOf:i.value,message:i.message}),a.dirty()):Yr.assertNever(i);return{status:a.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Ct(r,{code:mt.invalid_type,expected:Ft.bigint,received:r.parsedType}),yr}gte(t,r){return this.setLimit("min",t,!0,Vt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,Vt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,Vt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,Vt.toString(r))}setLimit(t,r,n,a){return new $p({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:Vt.toString(a)}]})}_addCheck(t){return new $p({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Vt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Vt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Vt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Vt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:Vt.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}$p.create=e=>new $p({checks:[],typeName:br.ZodBigInt,coerce:e?.coerce??!1,...Dr(e)});class vb extends Gr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Ft.boolean){const n=this._getOrReturnCtx(t);return Ct(n,{code:mt.invalid_type,expected:Ft.boolean,received:n.parsedType}),yr}return co(t.data)}}vb.create=e=>new vb({typeName:br.ZodBoolean,coerce:e?.coerce||!1,...Dr(e)});class zp extends Gr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Ft.date){const i=this._getOrReturnCtx(t);return Ct(i,{code:mt.invalid_type,expected:Ft.date,received:i.parsedType}),yr}if(Number.isNaN(t.data.getTime())){const i=this._getOrReturnCtx(t);return Ct(i,{code:mt.invalid_date}),yr}const n=new $i;let a;for(const i of this._def.checks)i.kind==="min"?t.data.getTime()<i.value&&(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.too_small,message:i.message,inclusive:!0,exact:!1,minimum:i.value,type:"date"}),n.dirty()):i.kind==="max"?t.data.getTime()>i.value&&(a=this._getOrReturnCtx(t,a),Ct(a,{code:mt.too_big,message:i.message,inclusive:!0,exact:!1,maximum:i.value,type:"date"}),n.dirty()):Yr.assertNever(i);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new zp({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:Vt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:Vt.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}zp.create=e=>new zp({checks:[],coerce:e?.coerce||!1,typeName:br.ZodDate,...Dr(e)});class V4 extends Gr{_parse(t){if(this._getType(t)!==Ft.symbol){const n=this._getOrReturnCtx(t);return Ct(n,{code:mt.invalid_type,expected:Ft.symbol,received:n.parsedType}),yr}return co(t.data)}}V4.create=e=>new V4({typeName:br.ZodSymbol,...Dr(e)});class W4 extends Gr{_parse(t){if(this._getType(t)!==Ft.undefined){const n=this._getOrReturnCtx(t);return Ct(n,{code:mt.invalid_type,expected:Ft.undefined,received:n.parsedType}),yr}return co(t.data)}}W4.create=e=>new W4({typeName:br.ZodUndefined,...Dr(e)});class H4 extends Gr{_parse(t){if(this._getType(t)!==Ft.null){const n=this._getOrReturnCtx(t);return Ct(n,{code:mt.invalid_type,expected:Ft.null,received:n.parsedType}),yr}return co(t.data)}}H4.create=e=>new H4({typeName:br.ZodNull,...Dr(e)});class G4 extends Gr{constructor(){super(...arguments),this._any=!0}_parse(t){return co(t.data)}}G4.create=e=>new G4({typeName:br.ZodAny,...Dr(e)});class K4 extends Gr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return co(t.data)}}K4.create=e=>new K4({typeName:br.ZodUnknown,...Dr(e)});class Yu extends Gr{_parse(t){const r=this._getOrReturnCtx(t);return Ct(r,{code:mt.invalid_type,expected:Ft.never,received:r.parsedType}),yr}}Yu.create=e=>new Yu({typeName:br.ZodNever,...Dr(e)});class Y4 extends Gr{_parse(t){if(this._getType(t)!==Ft.undefined){const n=this._getOrReturnCtx(t);return Ct(n,{code:mt.invalid_type,expected:Ft.void,received:n.parsedType}),yr}return co(t.data)}}Y4.create=e=>new Y4({typeName:br.ZodVoid,...Dr(e)});class Ll extends Gr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),a=this._def;if(r.parsedType!==Ft.array)return Ct(r,{code:mt.invalid_type,expected:Ft.array,received:r.parsedType}),yr;if(a.exactLength!==null){const o=r.data.length>a.exactLength.value,l=r.data.length<a.exactLength.value;(o||l)&&(Ct(r,{code:o?mt.too_big:mt.too_small,minimum:l?a.exactLength.value:void 0,maximum:o?a.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:a.exactLength.message}),n.dirty())}if(a.minLength!==null&&r.data.length<a.minLength.value&&(Ct(r,{code:mt.too_small,minimum:a.minLength.value,type:"array",inclusive:!0,exact:!1,message:a.minLength.message}),n.dirty()),a.maxLength!==null&&r.data.length>a.maxLength.value&&(Ct(r,{code:mt.too_big,maximum:a.maxLength.value,type:"array",inclusive:!0,exact:!1,message:a.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>a.type._parseAsync(new Ku(r,o,r.path,l)))).then(o=>$i.mergeArray(n,o));const i=[...r.data].map((o,l)=>a.type._parseSync(new Ku(r,o,r.path,l)));return $i.mergeArray(n,i)}get element(){return this._def.type}min(t,r){return new Ll({...this._def,minLength:{value:t,message:Vt.toString(r)}})}max(t,r){return new Ll({...this._def,maxLength:{value:t,message:Vt.toString(r)}})}length(t,r){return new Ll({...this._def,exactLength:{value:t,message:Vt.toString(r)}})}nonempty(t){return this.min(1,t)}}Ll.create=(e,t)=>new Ll({type:e,minLength:null,maxLength:null,exactLength:null,typeName:br.ZodArray,...Dr(t)});function wh(e){if(e instanceof Es){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=$u.create(wh(n))}return new Es({...e._def,shape:()=>t})}else return e instanceof Ll?new Ll({...e._def,type:wh(e.element)}):e instanceof $u?$u.create(wh(e.unwrap())):e instanceof Kh?Kh.create(wh(e.unwrap())):e instanceof uf?uf.create(e.items.map(t=>wh(t))):e}class Es extends Gr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Yr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Ft.object){const f=this._getOrReturnCtx(t);return Ct(f,{code:mt.invalid_type,expected:Ft.object,received:f.parsedType}),yr}const{status:n,ctx:a}=this._processInputParams(t),{shape:i,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Yu&&this._def.unknownKeys==="strip"))for(const f in a.data)o.includes(f)||l.push(f);const u=[];for(const f of o){const h=i[f],p=a.data[f];u.push({key:{status:"valid",value:f},value:h._parse(new Ku(a,p,a.path,f)),alwaysSet:f in a.data})}if(this._def.catchall instanceof Yu){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of l)u.push({key:{status:"valid",value:h},value:{status:"valid",value:a.data[h]}});else if(f==="strict")l.length>0&&(Ct(a,{code:mt.unrecognized_keys,keys:l}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of l){const p=a.data[h];u.push({key:{status:"valid",value:h},value:f._parse(new Ku(a,p,a.path,h)),alwaysSet:h in a.data})}}return a.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of u){const p=await h.key,v=await h.value;f.push({key:p,value:v,alwaysSet:h.alwaysSet})}return f}).then(f=>$i.mergeObjectSync(n,f)):$i.mergeObjectSync(n,u)}get shape(){return this._def.shape()}strict(t){return Vt.errToObj,new Es({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{const a=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:Vt.errToObj(t).message??a}:{message:a}}}:{}})}strip(){return new Es({...this._def,unknownKeys:"strip"})}passthrough(){return new Es({...this._def,unknownKeys:"passthrough"})}extend(t){return new Es({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new Es({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:br.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new Es({...this._def,catchall:t})}pick(t){const r={};for(const n of Yr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new Es({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Yr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new Es({...this._def,shape:()=>r})}deepPartial(){return wh(this)}partial(t){const r={};for(const n of Yr.objectKeys(this.shape)){const a=this.shape[n];t&&!t[n]?r[n]=a:r[n]=a.optional()}return new Es({...this._def,shape:()=>r})}required(t){const r={};for(const n of Yr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let i=this.shape[n];for(;i instanceof $u;)i=i._def.innerType;r[n]=i}return new Es({...this._def,shape:()=>r})}keyof(){return QR(Yr.objectKeys(this.shape))}}Es.create=(e,t)=>new Es({shape:()=>e,unknownKeys:"strip",catchall:Yu.create(),typeName:br.ZodObject,...Dr(t)});Es.strictCreate=(e,t)=>new Es({shape:()=>e,unknownKeys:"strict",catchall:Yu.create(),typeName:br.ZodObject,...Dr(t)});Es.lazycreate=(e,t)=>new Es({shape:e,unknownKeys:"strip",catchall:Yu.create(),typeName:br.ZodObject,...Dr(t)});class kx extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function a(i){for(const l of i)if(l.result.status==="valid")return l.result;for(const l of i)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=i.map(l=>new zc(l.ctx.common.issues));return Ct(r,{code:mt.invalid_union,unionErrors:o}),yr}if(r.common.async)return Promise.all(n.map(async i=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await i._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(a);{let i;const o=[];for(const u of n){const f={...r,common:{...r.common,issues:[]},parent:null},h=u._parseSync({data:r.data,path:r.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!i&&(i={result:h,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(i)return r.common.issues.push(...i.ctx.common.issues),i.result;const l=o.map(u=>new zc(u));return Ct(r,{code:mt.invalid_union,unionErrors:l}),yr}}get options(){return this._def.options}}kx.create=(e,t)=>new kx({options:e,typeName:br.ZodUnion,...Dr(t)});function xb(e,t){const r=Du(e),n=Du(t);if(e===t)return{valid:!0,data:e};if(r===Ft.object&&n===Ft.object){const a=Yr.objectKeys(t),i=Yr.objectKeys(e).filter(l=>a.indexOf(l)!==-1),o={...e,...t};for(const l of i){const u=xb(e[l],t[l]);if(!u.valid)return{valid:!1};o[l]=u.data}return{valid:!0,data:o}}else if(r===Ft.array&&n===Ft.array){if(e.length!==t.length)return{valid:!1};const a=[];for(let i=0;i<e.length;i++){const o=e[i],l=t[i],u=xb(o,l);if(!u.valid)return{valid:!1};a.push(u.data)}return{valid:!0,data:a}}else return r===Ft.date&&n===Ft.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class Cx extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=(i,o)=>{if($4(i)||$4(o))return yr;const l=xb(i.value,o.value);return l.valid?((z4(i)||z4(o))&&r.dirty(),{status:r.value,value:l.data}):(Ct(n,{code:mt.invalid_intersection_types}),yr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([i,o])=>a(i,o)):a(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}Cx.create=(e,t,r)=>new Cx({left:e,right:t,typeName:br.ZodIntersection,...Dr(r)});class uf extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ft.array)return Ct(n,{code:mt.invalid_type,expected:Ft.array,received:n.parsedType}),yr;if(n.data.length<this._def.items.length)return Ct(n,{code:mt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),yr;!this._def.rest&&n.data.length>this._def.items.length&&(Ct(n,{code:mt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const i=[...n.data].map((o,l)=>{const u=this._def.items[l]||this._def.rest;return u?u._parse(new Ku(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(i).then(o=>$i.mergeArray(r,o)):$i.mergeArray(r,i)}get items(){return this._def.items}rest(t){return new uf({...this._def,rest:t})}}uf.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new uf({items:e,typeName:br.ZodTuple,rest:null,...Dr(t)})};class Q4 extends Gr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ft.map)return Ct(n,{code:mt.invalid_type,expected:Ft.map,received:n.parsedType}),yr;const a=this._def.keyType,i=this._def.valueType,o=[...n.data.entries()].map(([l,u],f)=>({key:a._parse(new Ku(n,l,n.path,[f,"key"])),value:i._parse(new Ku(n,u,n.path,[f,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const u of o){const f=await u.key,h=await u.value;if(f.status==="aborted"||h.status==="aborted")return yr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),l.set(f.value,h.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const u of o){const f=u.key,h=u.value;if(f.status==="aborted"||h.status==="aborted")return yr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),l.set(f.value,h.value)}return{status:r.value,value:l}}}}Q4.create=(e,t,r)=>new Q4({valueType:t,keyType:e,typeName:br.ZodMap,...Dr(r)});class qp extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Ft.set)return Ct(n,{code:mt.invalid_type,expected:Ft.set,received:n.parsedType}),yr;const a=this._def;a.minSize!==null&&n.data.size<a.minSize.value&&(Ct(n,{code:mt.too_small,minimum:a.minSize.value,type:"set",inclusive:!0,exact:!1,message:a.minSize.message}),r.dirty()),a.maxSize!==null&&n.data.size>a.maxSize.value&&(Ct(n,{code:mt.too_big,maximum:a.maxSize.value,type:"set",inclusive:!0,exact:!1,message:a.maxSize.message}),r.dirty());const i=this._def.valueType;function o(u){const f=new Set;for(const h of u){if(h.status==="aborted")return yr;h.status==="dirty"&&r.dirty(),f.add(h.value)}return{status:r.value,value:f}}const l=[...n.data.values()].map((u,f)=>i._parse(new Ku(n,u,n.path,f)));return n.common.async?Promise.all(l).then(u=>o(u)):o(l)}min(t,r){return new qp({...this._def,minSize:{value:t,message:Vt.toString(r)}})}max(t,r){return new qp({...this._def,maxSize:{value:t,message:Vt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}qp.create=(e,t)=>new qp({valueType:e,minSize:null,maxSize:null,typeName:br.ZodSet,...Dr(t)});class J4 extends Gr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}J4.create=(e,t)=>new J4({getter:e,typeName:br.ZodLazy,...Dr(t)});class yb extends Gr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Ct(r,{received:r.data,code:mt.invalid_literal,expected:this._def.value}),yr}return{status:"valid",value:t.data}}get value(){return this._def.value}}yb.create=(e,t)=>new yb({value:e,typeName:br.ZodLiteral,...Dr(t)});function QR(e,t){return new Hh({values:e,typeName:br.ZodEnum,...Dr(t)})}class Hh extends Gr{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Ct(r,{expected:Yr.joinValues(n),received:r.parsedType,code:mt.invalid_type}),yr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Ct(r,{received:r.data,code:mt.invalid_enum_value,options:n}),yr}return co(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Hh.create(t,{...this._def,...r})}exclude(t,r=this._def){return Hh.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Hh.create=QR;class Z4 extends Gr{_parse(t){const r=Yr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Ft.string&&n.parsedType!==Ft.number){const a=Yr.objectValues(r);return Ct(n,{expected:Yr.joinValues(a),received:n.parsedType,code:mt.invalid_type}),yr}if(this._cache||(this._cache=new Set(Yr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const a=Yr.objectValues(r);return Ct(n,{received:n.data,code:mt.invalid_enum_value,options:a}),yr}return co(t.data)}get enum(){return this._def.values}}Z4.create=(e,t)=>new Z4({values:e,typeName:br.ZodNativeEnum,...Dr(t)});class Ex extends Gr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Ft.promise&&r.common.async===!1)return Ct(r,{code:mt.invalid_type,expected:Ft.promise,received:r.parsedType}),yr;const n=r.parsedType===Ft.promise?r.data:Promise.resolve(r.data);return co(n.then(a=>this._def.type.parseAsync(a,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Ex.create=(e,t)=>new Ex({type:e,typeName:br.ZodPromise,...Dr(t)});class Gh extends Gr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===br.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),a=this._def.effect||null,i={addIssue:o=>{Ct(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(i.addIssue=i.addIssue.bind(i),a.type==="preprocess"){const o=a.transform(n.data,i);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return yr;const u=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return u.status==="aborted"?yr:u.status==="dirty"||r.value==="dirty"?ap(u.value):u});{if(r.value==="aborted")return yr;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?yr:l.status==="dirty"||r.value==="dirty"?ap(l.value):l}}if(a.type==="refinement"){const o=l=>{const u=a.refinement(l,i);if(n.common.async)return Promise.resolve(u);if(u instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?yr:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?yr:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(a.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Vh(o))return yr;const l=a.transform(o.value,i);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Vh(o)?Promise.resolve(a.transform(o.value,i)).then(l=>({status:r.value,value:l})):yr);Yr.assertNever(a)}}Gh.create=(e,t,r)=>new Gh({schema:e,typeName:br.ZodEffects,effect:t,...Dr(r)});Gh.createWithPreprocess=(e,t,r)=>new Gh({schema:t,effect:{type:"preprocess",transform:e},typeName:br.ZodEffects,...Dr(r)});class $u extends Gr{_parse(t){return this._getType(t)===Ft.undefined?co(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}$u.create=(e,t)=>new $u({innerType:e,typeName:br.ZodOptional,...Dr(t)});class Kh extends Gr{_parse(t){return this._getType(t)===Ft.null?co(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Kh.create=(e,t)=>new Kh({innerType:e,typeName:br.ZodNullable,...Dr(t)});class wb extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Ft.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}wb.create=(e,t)=>new wb({innerType:e,typeName:br.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Dr(t)});class bb extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},a=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return Sx(a)?a.then(i=>({status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new zc(n.common.issues)},input:n.data})})):{status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new zc(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}bb.create=(e,t)=>new bb({innerType:e,typeName:br.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Dr(t)});class X4 extends Gr{_parse(t){if(this._getType(t)!==Ft.nan){const n=this._getOrReturnCtx(t);return Ct(n,{code:mt.invalid_type,expected:Ft.nan,received:n.parsedType}),yr}return{status:"valid",value:t.data}}}X4.create=e=>new X4({typeName:br.ZodNaN,...Dr(e)});class FX extends Gr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class b5 extends Gr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const i=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?yr:i.status==="dirty"?(r.dirty(),ap(i.value)):this._def.out._parseAsync({data:i.value,path:n.path,parent:n})})();{const a=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?yr:a.status==="dirty"?(r.dirty(),{status:"dirty",value:a.value}):this._def.out._parseSync({data:a.value,path:n.path,parent:n})}}static create(t,r){return new b5({in:t,out:r,typeName:br.ZodPipeline})}}class jb extends Gr{_parse(t){const r=this._def.innerType._parse(t),n=a=>(Vh(a)&&(a.value=Object.freeze(a.value)),a);return Sx(r)?r.then(a=>n(a)):n(r)}unwrap(){return this._def.innerType}}jb.create=(e,t)=>new jb({innerType:e,typeName:br.ZodReadonly,...Dr(t)});var br;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(br||(br={}));const za=Fu.create,BX=Wh.create,rw=vb.create,ek=zp.create;Yu.create;const UX=Ll.create,Px=Es.create;kx.create;Cx.create;uf.create;const $X=yb.create,pp=Hh.create;Ex.create;$u.create;Kh.create;const j5=WZ,JR=x.createContext({}),ts=({...e})=>s.jsx(JR.Provider,{value:{name:e.name},children:s.jsx(YZ,{...e})}),A0=()=>{const e=x.useContext(JR),t=x.useContext(ZR),{getFieldState:r,formState:n}=P0(),a=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...a}},ZR=x.createContext({}),qn=x.forwardRef(({className:e,...t},r)=>{const n=x.useId();return s.jsx(ZR.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:Oe("space-y-2",e),...t})})});qn.displayName="FormItem";const Vn=x.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:a}=A0();return s.jsx(ft,{ref:r,className:Oe(n&&"text-destructive",e),htmlFor:a,...t})});Vn.displayName="FormLabel";const Wn=x.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:a,formMessageId:i}=A0();return s.jsx(ck,{ref:t,id:n,"aria-describedby":r?`${a} ${i}`:`${a}`,"aria-invalid":!!r,...e})});Wn.displayName="FormControl";const Ps=x.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=A0();return s.jsx("p",{ref:r,id:n,className:Oe("text-sm text-muted-foreground",e),...t})});Ps.displayName="FormDescription";const rs=x.forwardRef(({className:e,children:t,...r},n)=>{const{error:a,formMessageId:i}=A0(),o=a?String(a?.message):t;return o?s.jsx("p",{ref:n,id:i,className:Oe("text-sm font-medium text-destructive",e),...r,children:o}):null});rs.displayName="FormMessage";var _5="Radio",[zX,XR]=bs(_5),[qX,VX]=zX(_5),eL=x.forwardRef((e,t)=>{const{__scopeRadio:r,name:n,checked:a=!1,required:i,disabled:o,value:l="on",onCheck:u,form:f,...h}=e,[p,v]=x.useState(null),m=Jt(t,j=>v(j)),N=x.useRef(!1),w=p?f||!!p.closest("form"):!0;return s.jsxs(qX,{scope:r,checked:a,disabled:o,children:[s.jsx(vt.button,{type:"button",role:"radio","aria-checked":a,"data-state":sL(a),"data-disabled":o?"":void 0,disabled:o,value:l,...h,ref:m,onClick:lt(e.onClick,j=>{a||u?.(),w&&(N.current=j.isPropagationStopped(),N.current||j.stopPropagation())})}),w&&s.jsx(nL,{control:p,bubbles:!N.current,name:n,value:l,checked:a,required:i,disabled:o,form:f,style:{transform:"translateX(-100%)"}})]})});eL.displayName=_5;var tL="RadioIndicator",rL=x.forwardRef((e,t)=>{const{__scopeRadio:r,forceMount:n,...a}=e,i=VX(tL,r);return s.jsx(qs,{present:n||i.checked,children:s.jsx(vt.span,{"data-state":sL(i.checked),"data-disabled":i.disabled?"":void 0,...a,ref:t})})});rL.displayName=tL;var WX="RadioBubbleInput",nL=x.forwardRef(({__scopeRadio:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=x.useRef(null),l=Jt(o,i),u=rg(r),f=Kp(t);return x.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==r&&m){const N=new Event("click",{bubbles:n});m.call(h,r),h.dispatchEvent(N)}},[u,r,n]),s.jsx(vt.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});nL.displayName=WX;function sL(e){return e?"checked":"unchecked"}var HX=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],T0="RadioGroup",[GX]=bs(T0,[Xu,XR]),aL=Xu(),iL=XR(),[KX,YX]=GX(T0),oL=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,name:n,defaultValue:a,value:i,required:o=!1,disabled:l=!1,orientation:u,dir:f,loop:h=!0,onValueChange:p,...v}=e,m=aL(r),N=Zu(f),[w,j]=Ea({prop:i,defaultProp:a??null,onChange:p,caller:T0});return s.jsx(KX,{scope:r,name:n,required:o,disabled:l,value:w,onValueChange:j,children:s.jsx(Jx,{asChild:!0,...m,orientation:u,dir:N,loop:h,children:s.jsx(vt.div,{role:"radiogroup","aria-required":o,"aria-orientation":u,"data-disabled":l?"":void 0,dir:N,...v,ref:t})})})});oL.displayName=T0;var lL="RadioGroupItem",cL=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,disabled:n,...a}=e,i=YX(lL,r),o=i.disabled||n,l=aL(r),u=iL(r),f=x.useRef(null),h=Jt(t,f),p=i.value===a.value,v=x.useRef(!1);return x.useEffect(()=>{const m=w=>{HX.includes(w.key)&&(v.current=!0)},N=()=>v.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",N),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",N)}},[]),s.jsx(Zx,{asChild:!0,...l,focusable:!o,active:p,children:s.jsx(eL,{disabled:o,required:i.required,checked:p,...u,...a,name:i.name,ref:h,onCheck:()=>i.onValueChange(a.value),onKeyDown:lt(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:lt(a.onFocus,()=>{v.current&&f.current?.click()})})})});cL.displayName=lL;var QX="RadioGroupIndicator",uL=x.forwardRef((e,t)=>{const{__scopeRadioGroup:r,...n}=e,a=iL(r);return s.jsx(rL,{...a,...n,ref:t})});uL.displayName=QX;var dL=oL,fL=cL,JX=uL;const hL=x.forwardRef(({className:e,...t},r)=>s.jsx(dL,{className:Oe("grid gap-2",e),...t,ref:r}));hL.displayName=dL.displayName;const ip=x.forwardRef(({className:e,...t},r)=>s.jsx(fL,{ref:r,className:Oe("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:s.jsx(JX,{className:"flex items-center justify-center",children:s.jsx(Bk,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ip.displayName=fL.displayName;function mL({taskId:e,onUploadComplete:t,maxImages:r=10,existingImages:n=[],canDelete:a=!1}){const{toast:i}=Er(),o=x.useRef(null),l=x.useRef(null),[u,f]=x.useState([]),[h,p]=x.useState(null),[v,m]=x.useState(!1),[N,w]=x.useState(null);console.log(" ImageUpload rendered with:",{taskId:e,existingImagesCount:n.length,existingImages:n,newImagesCount:u.length,canDelete:a});const j=async D=>{const O=Array.from(D.target.files||[]);if(O.length===0)return;if(u.length+n.length+O.length>r){i({title:"Too Many Images",description:`You can only upload up to ${r} images per task`,variant:"destructive"});return}const F=O.filter(z=>{const U=z.type.startsWith("image/"),B=z.size<=5*1024*1024;return U||i({title:"Invalid File Type",description:`${z.name} is not an image file`,variant:"destructive"}),B||i({title:"File Too Large",description:`${z.name} exceeds 5MB limit`,variant:"destructive"}),U&&B});if(F.length===0)return;const T=F.map(z=>({id:crypto.randomUUID(),url:URL.createObjectURL(z),file:z,uploading:!0}));f(z=>[...z,...T]),await _(T)},_=async D=>{m(!0);const O=[];for(const F of D)try{const T=F.file.name.split(".").pop(),U=`task-attachments/${`${e}/${crypto.randomUUID()}.${T}`}`,{data:B,error:K}=await Ae.storage.from("task-attachments").upload(U,F.file,{cacheControl:"3600",upsert:!1});if(K)throw K;const{data:{publicUrl:V}}=Ae.storage.from("task-attachments").getPublicUrl(B.path);O.push(V);const{error:de}=await Ae.from("task_attachments").insert({task_id:e,file_url:V,file_name:F.file.name,file_type:F.file.type,file_size:F.file.size});if(de)throw console.error("Database insert error:",de),new Error("Failed to save attachment record");f(se=>se.map(Y=>Y.id===F.id?{...Y,uploading:!1}:Y))}catch(T){console.error("Upload error:",T),f(z=>z.map(U=>U.id===F.id?{...U,uploading:!1,error:"Upload failed"}:U)),i({title:"Upload Failed",description:`Failed to upload ${F.file.name}`,variant:"destructive"})}m(!1),O.length>0&&t&&(t(O),i({title:"Upload Successful",description:`${O.length} image(s) uploaded successfully`}))},C=D=>{f(O=>{const F=O.find(T=>T.id===D);return F&&URL.revokeObjectURL(F.url),O.filter(T=>T.id!==D)})},k=async D=>{if(!a){i({title:"Permission Denied",description:"You don't have permission to delete images",variant:"destructive"});return}if(confirm("Are you sure you want to delete this image? This cannot be undone.")){w(D);try{const O=D.split("/task-attachments/");if(O.length<2)throw new Error("Invalid image URL");const F=`task-attachments/${O[1]}`,{error:T}=await Ae.storage.from("task-attachments").remove([F]);if(T)throw console.error("Storage delete error:",T),new Error("Failed to delete from storage");const{error:z}=await Ae.from("task_attachments").delete().eq("file_url",D);if(z)throw console.error("Database delete error:",z),new Error("Failed to delete from database");i({title:"Image Deleted",description:"The image has been removed successfully"}),t&&t([])}catch(O){console.error("Delete error:",O),i({title:"Delete Failed",description:O instanceof Error?O.message:"Failed to delete image",variant:"destructive"})}finally{w(null)}}},E=()=>{o.current?.click()},I=()=>{l.current?.click()};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(we,{type:"button",variant:"outline",onClick:E,disabled:v||u.length+n.length>=r,className:"gap-2",children:[s.jsx(Ib,{className:"w-4 h-4"}),"Browse Files"]}),s.jsxs(we,{type:"button",variant:"outline",onClick:I,disabled:v||u.length+n.length>=r,className:"gap-2",children:[s.jsx(Ab,{className:"w-4 h-4"}),"Take Photo"]}),v&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(vs,{className:"w-4 h-4 animate-spin"}),"Uploading..."]})]}),s.jsx("input",{ref:o,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:j}),s.jsx("input",{ref:l,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:j}),(u.length>0||n.length>0)&&s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[n.map((D,O)=>s.jsx(rt,{className:"overflow-hidden",children:s.jsxs(st,{className:"p-0 relative group",children:[s.jsx("img",{src:D,alt:`Existing ${O+1}`,className:"w-full h-32 object-cover"}),N===D&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(vs,{className:"w-6 h-6 text-white animate-spin"})}),s.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(D),disabled:N===D,children:s.jsx(cw,{className:"w-4 h-4"})}),a&&s.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 left-1 bg-red-500/70 hover:bg-red-600 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>k(D),disabled:N===D,children:s.jsx(hn,{className:"w-4 h-4"})})]})},`existing-${O}`)),u.map(D=>s.jsx(rt,{className:"overflow-hidden",children:s.jsxs(st,{className:"p-0 relative group",children:[s.jsx("img",{src:D.url,alt:D.file.name,className:"w-full h-32 object-cover"}),D.uploading&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(vs,{className:"w-6 h-6 text-white animate-spin"})}),D.error&&s.jsx("div",{className:"absolute inset-0 bg-red-500/50 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-medium",children:D.error})}),!D.uploading&&!D.error&&s.jsxs(s.Fragment,{children:[s.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(D.url),children:s.jsx(cw,{className:"w-4 h-4"})}),s.jsx(we,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 left-1 bg-red-500/70 hover:bg-red-600 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C(D.id),children:s.jsx(hn,{className:"w-4 h-4"})})]})]})},D.id))]}),u.length===0&&n.length===0&&s.jsx(rt,{className:"border-dashed",children:s.jsxs(Wt,{children:[s.jsx(Qt,{className:"text-center text-sm",children:"No Images Attached"}),s.jsx(Bs,{className:"text-center",children:"Add photos to document task completion using the buttons above"})]})}),(u.length>0||n.length>0)&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[u.length+n.length," of ",r," images"]}),s.jsx(ea,{open:!!h,onOpenChange:()=>p(null),children:s.jsxs(Us,{className:"max-w-4xl",children:[s.jsx($s,{children:s.jsx(zs,{children:"Image Preview"})}),h&&s.jsx("img",{src:h,alt:"Preview",className:"w-full h-auto max-h-[70vh] object-contain"})]})})]})}const Yh={cleaning_daily:"Daily Cleaning",cleaning_weekly:"Weekly Cleaning",temperature:"Temperature Log",opening:"Opening Checklist",closing:"Closing Checklist",maintenance:"Maintenance",others:"Others"},Qh={critical:"Critical",important:"Important",normal:"Normal"},ZX={created:"Task Created",status_changed:"Status Changed",assignment_changed:"Assignment Changed",priority_changed:"Priority Changed",due_date_changed:"Due Date Changed",title_updated:"Title Updated",description_updated:"Description Updated",note_added:"Note Added",attachment_added:"Photo Added",attachment_removed:"Photo Removed",deleted:"Task Deleted"},XX={created:"",status_changed:"",assignment_changed:"",priority_changed:"",due_date_changed:"",title_updated:"",description_updated:"",note_added:"",attachment_added:"",attachment_removed:"",deleted:""},eee=Px({title:za().min(3,"Title must be at least 3 characters"),description:za().optional(),subtasks:UX(Px({id:za(),title:za().min(1,"Subtask title is required"),completed:rw()})).optional(),task_type:pp(["cleaning_daily","cleaning_weekly","temperature","opening","closing","maintenance","others"]),custom_task_type:za().optional(),priority:pp(["critical","important","normal"]),assigned_to:za().min(1,"Please assign this task to someone"),scheduled_date:ek({required_error:"Please select a date"}),scheduled_time:za().optional(),estimated_minutes:BX().min(1).max(480).optional(),requires_approval:rw().default(!1),is_recurring:rw().default(!1),recurrence_frequency:pp(["daily","weekly","biweekly","monthly"]).optional(),recurrence_end_date:ek().optional()}).refine(e=>!(e.task_type==="others"&&!e.custom_task_type?.trim()),{message:"Please specify the task type",path:["custom_task_type"]});function tk({onSubmit:e,onCancel:t,defaultValues:r,users:n=[],isLoading:a=!1,isEditing:i=!1,taskId:o,userRole:l}){const{toast:u}=Er(),[f,h]=x.useState(!1),[p,v]=x.useState([]),[m,N]=x.useState(!1),[w,j]=x.useState([]),[_,C]=x.useState("");console.log(" TaskForm - User role:",l);const k=l==="admin"||l==="owner"||l==="manager"||l==="leader_chef";console.log(" TaskForm - Can delete images:",k),x.useEffect(()=>{i&&o&&E()},[i,o]),x.useEffect(()=>{if(r?.subtasks){const T=r.subtasks.filter(z=>typeof z.id=="string"&&typeof z.title=="string"&&typeof z.completed=="boolean");j(T)}},[r?.subtasks]);const E=async()=>{if(o){N(!0);try{const{data:T,error:z}=await Ae.from("task_attachments").select("*").eq("task_id",o).order("uploaded_at",{ascending:!0});if(z){console.error("Error loading attachments:",z);return}v(T?.map(U=>U.file_url)||[])}catch(T){console.error("Error loading attachments:",T)}finally{N(!1)}}},I=()=>{if(_.trim()){const T={id:crypto.randomUUID(),title:_.trim(),completed:!1},z=[...w,T];j(z),O.setValue("subtasks",z),C("")}},D=T=>{const z=w.filter(U=>U.id!==T);j(z),O.setValue("subtasks",z)},O=y5({resolver:w5(eee),defaultValues:{title:r?.title||"",description:r?.description||"",subtasks:r?.subtasks||[],task_type:r?.task_type||"others",custom_task_type:"",priority:r?.priority||"normal",assigned_to:r?.assigned_to||"",scheduled_date:r?.scheduled_date||new Date,scheduled_time:r?.scheduled_time||"",estimated_minutes:r?.estimated_minutes||30,requires_approval:r?.requires_approval||!1,is_recurring:!1,recurrence_frequency:void 0,recurrence_end_date:void 0}}),F=async T=>{try{h(!0);let z;if(T.is_recurring&&T.recurrence_frequency){let B=1,K="daily";T.recurrence_frequency==="daily"?(K="daily",B=1):T.recurrence_frequency==="weekly"?(K="weekly",B=1):T.recurrence_frequency==="biweekly"?(K="weekly",B=2):T.recurrence_frequency==="monthly"&&(K="monthly",B=1),z={frequency:K,interval:B,end_date:T.recurrence_end_date?wr(T.recurrence_end_date,"yyyy-MM-dd"):void 0}}const U={title:T.title,description:T.task_type==="others"&&T.custom_task_type?`[${T.custom_task_type}] ${T.description||""}`:T.description,subtasks:w.length>0?w:void 0,task_type:T.task_type,priority:T.priority,team_member_id:T.assigned_to,scheduled_date:wr(T.scheduled_date,"yyyy-MM-dd"),scheduled_time:T.scheduled_time||void 0,estimated_minutes:T.estimated_minutes,requires_approval:T.requires_approval,recurrence_pattern:z};await e(U),O.reset()}catch(z){console.error("Error submitting task:",z),u({title:"Error",description:"Failed to create task. Please try again.",variant:"destructive"})}finally{h(!1)}};return s.jsx(j5,{...O,children:s.jsxs("form",{onSubmit:O.handleSubmit(F),className:"space-y-6",children:[s.jsx(ts,{control:O.control,name:"title",render:({field:T})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Task Title *"}),s.jsx(Wn,{children:s.jsx(St,{placeholder:"e.g., Check refrigerator temperature",...T})}),s.jsx(rs,{})]})}),s.jsx(ts,{control:O.control,name:"description",render:({field:T})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Description"}),s.jsx(Wn,{children:s.jsx(ng,{placeholder:"Add any additional details or instructions...",className:"resize-none",rows:3,...T})}),s.jsx(Ps,{children:"Optional notes or instructions for this task"}),s.jsx(rs,{})]})}),s.jsxs("div",{className:"space-y-3",children:[s.jsx(ft,{children:"Subtasks"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(St,{value:_,onChange:T=>C(T.target.value),placeholder:"Add a subtask...",onKeyPress:T=>{T.key==="Enter"&&(T.preventDefault(),I())}}),s.jsx(we,{type:"button",onClick:I,size:"sm",variant:"secondary",children:s.jsx(vn,{className:"w-4 h-4"})})]}),w.length>0&&s.jsx("div",{className:"space-y-2",children:w.map((T,z)=>s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[s.jsxs("span",{className:"font-medium text-sm text-muted-foreground mt-0.5",children:[z+1,"."]}),s.jsx("span",{className:"flex-1 text-sm",children:T.title}),s.jsx(we,{type:"button",variant:"ghost",size:"sm",onClick:()=>D(T.id),className:"h-6 w-6 p-0 hover:bg-destructive/10",children:s.jsx(hn,{className:"w-4 h-4 text-muted-foreground hover:text-destructive"})})]},T.id))}),s.jsx(Ps,{children:"Optional checklist of steps to complete this task"})]}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(ts,{control:O.control,name:"task_type",render:({field:T})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Task Type *"}),s.jsxs(Nr,{onValueChange:T.onChange,defaultValue:T.value,children:[s.jsx(Wn,{children:s.jsx(_r,{"data-testid":"task-type-select",children:s.jsx(Sr,{placeholder:"Select task type"})})}),s.jsx(Cr,{children:Object.keys(Yh).map(z=>s.jsx(qe,{value:z,children:Yh[z]},z))})]}),s.jsx(rs,{})]})}),s.jsx(ts,{control:O.control,name:"priority",render:({field:T})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Priority *"}),s.jsxs(Nr,{onValueChange:T.onChange,defaultValue:T.value,children:[s.jsx(Wn,{children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select priority"})})}),s.jsx(Cr,{children:Object.keys(Qh).map(z=>s.jsx(qe,{value:z,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:Oe("w-2 h-2 rounded-full",z==="critical"&&"bg-red-500",z==="important"&&"bg-yellow-500",z==="normal"&&"bg-green-500")}),Qh[z]]})},z))})]}),s.jsx(rs,{})]})})]}),O.watch("task_type")==="others"&&s.jsx(ts,{control:O.control,name:"custom_task_type",render:({field:T})=>s.jsxs(qn,{children:[s.jsxs(Vn,{className:"flex items-center gap-1",children:["Specify Task Type",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(Wn,{children:s.jsx(St,{"data-testid":"custom-task-type-input",placeholder:"e.g., Inventory count, Staff meeting, Training...",...T,className:Oe(!T.value?.trim()&&"border-yellow-500 focus:ring-yellow-500")})}),s.jsxs(Ps,{className:"flex items-center gap-1 text-yellow-600",children:[s.jsx(Hr,{className:"w-3 h-3"}),"Please describe what type of task this is"]}),s.jsx(rs,{})]})}),s.jsx(ts,{control:O.control,name:"assigned_to",render:({field:T})=>s.jsxs(qn,{children:[s.jsxs(Vn,{className:"flex items-center gap-1",children:["Assign To",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsxs(Nr,{onValueChange:T.onChange,defaultValue:T.value,children:[s.jsx(Wn,{children:s.jsx(_r,{"data-testid":"assign-to-select",className:Oe(!T.value&&"border-destructive focus:ring-destructive"),children:s.jsx(Sr,{placeholder:"Select a team member",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Il,{className:"w-4 h-4"}),s.jsx("span",{children:T.value&&T.value!=="unassigned"?n.find(z=>z.user_id===T.value)?.display_name||"Select user":"Select a team member"})]})})})}),s.jsx(Cr,{children:n.length===0?s.jsxs("div",{className:"px-2 py-6 text-center text-sm text-muted-foreground",children:[s.jsx(Hr,{className:"w-8 h-8 mx-auto mb-2 text-yellow-500"}),s.jsx("p",{className:"font-medium",children:"No team members found"}),s.jsx("p",{className:"text-xs mt-1",children:"Please add team members first"})]}):n.map(z=>s.jsx(qe,{value:z.user_id,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-6 h-6 rounded-full bg-primary/10 flex items-center justify-center",children:s.jsx("span",{className:"text-xs font-medium",children:z.display_name.charAt(0).toUpperCase()})}),z.display_name]})},z.user_id))})]}),s.jsx(Ps,{children:T.value?s.jsxs("span",{className:"text-muted-foreground",children:["Task assigned to ",n.find(z=>z.user_id===T.value)?.display_name]}):s.jsxs("span",{className:"text-destructive flex items-center gap-1",children:[s.jsx(Hr,{className:"w-3 h-3"}),"This field is required"]})}),s.jsx(rs,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(ts,{control:O.control,name:"scheduled_date",render:({field:T})=>s.jsxs(qn,{className:"flex flex-col",children:[s.jsx(Vn,{children:"Scheduled Date *"}),s.jsxs(Lc,{children:[s.jsx(Dc,{asChild:!0,children:s.jsx(Wn,{children:s.jsxs(we,{"data-testid":"scheduled-date-button",variant:"outline",className:Oe("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?wr(T.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(Va,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(kl,{className:"w-auto p-0",align:"start",children:s.jsx(Up,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:z=>z<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),s.jsx(rs,{})]})}),s.jsx(ts,{control:O.control,name:"scheduled_time",render:({field:T})=>s.jsxs(qn,{className:"flex flex-col",children:[s.jsx(Vn,{children:"Scheduled Time"}),s.jsx(Wn,{children:s.jsx(St,{type:"time",className:"w-full h-10 [color-scheme:light] dark:[color-scheme:dark]",placeholder:"09:00",...T})}),s.jsx(Ps,{children:"Optional specific time"}),s.jsx(rs,{})]})})]}),s.jsx(ts,{control:O.control,name:"estimated_minutes",render:({field:T})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Estimated Duration (minutes)"}),s.jsx(Wn,{children:s.jsx(St,{type:"number",min:"1",max:"480",placeholder:"30",...T,onChange:z=>T.onChange(Number(z.target.value))})}),s.jsx(Ps,{children:"How long do you expect this task to take?"}),s.jsx(rs,{})]})}),s.jsx(ss,{className:"my-6"}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(RD,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Recurrence Settings"})]}),s.jsx(ts,{control:O.control,name:"is_recurring",render:({field:T})=>s.jsxs(qn,{className:"flex flex-row items-center justify-between rounded-lg border p-4",children:[s.jsxs("div",{className:"space-y-0.5",children:[s.jsx(Vn,{className:"text-base",children:"Recurring Task"}),s.jsx(Ps,{children:"Create this task automatically on a schedule"})]}),s.jsx(Wn,{children:s.jsx("input",{"data-testid":"is-recurring-checkbox",type:"checkbox",checked:T.value,onChange:T.onChange,className:"h-5 w-5 rounded border-gray-300 text-primary focus:ring-primary"})})]})}),O.watch("is_recurring")&&s.jsxs(s.Fragment,{children:[s.jsx(ts,{control:O.control,name:"recurrence_frequency",render:({field:T})=>s.jsxs(qn,{className:"space-y-3",children:[s.jsx(Vn,{children:"Frequency *"}),s.jsx(Wn,{children:s.jsxs(hL,{"data-testid":"recurrence-frequency-group",onValueChange:T.onChange,defaultValue:T.value,className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ip,{value:"daily",id:"daily"}),s.jsxs(ft,{htmlFor:"daily",className:"font-normal cursor-pointer flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Daily"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Every day"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ip,{value:"weekly",id:"weekly"}),s.jsxs(ft,{htmlFor:"weekly",className:"font-normal cursor-pointer flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Weekly"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Every 7 days"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ip,{value:"biweekly",id:"biweekly"}),s.jsxs(ft,{htmlFor:"biweekly",className:"font-normal cursor-pointer flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Biweekly"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Every 14 days"})]})]})]}),s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(ip,{value:"monthly",id:"monthly"}),s.jsxs(ft,{htmlFor:"monthly",className:"font-normal cursor-pointer flex items-center gap-2",children:[s.jsx("span",{className:"text-lg",children:""}),s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:"Monthly"}),s.jsx("div",{className:"text-xs text-muted-foreground",children:"Every 30 days"})]})]})]})]})}),s.jsx(Ps,{children:"How often should this task repeat?"}),s.jsx(rs,{})]})}),s.jsx(ts,{control:O.control,name:"recurrence_end_date",render:({field:T})=>s.jsxs(qn,{className:"flex flex-col",children:[s.jsx(Vn,{children:"End Date (Optional)"}),s.jsxs(Lc,{children:[s.jsx(Dc,{asChild:!0,children:s.jsx(Wn,{children:s.jsxs(we,{variant:"outline",className:Oe("w-full pl-3 text-left font-normal",!T.value&&"text-muted-foreground"),children:[T.value?wr(T.value,"PPP"):s.jsx("span",{children:"No end date (repeats forever)"}),s.jsx(Va,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(kl,{className:"w-auto p-0",align:"start",children:s.jsx(Up,{mode:"single",selected:T.value,onSelect:T.onChange,disabled:z=>z<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),s.jsx(Ps,{children:"When should the recurrence stop? Leave empty for no end date."}),s.jsx(rs,{})]})})]})]}),i&&o&&s.jsxs(s.Fragment,{children:[s.jsx(ss,{className:"my-6"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ab,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Photo Attachments"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Add photos to document this task",k&&"  You can delete images as an admin/leader"]}),s.jsx(mL,{taskId:o,existingImages:p,onUploadComplete:T=>{console.log("Images uploaded:",T),E()},maxImages:10,canDelete:k})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Hr,{className:"w-4 h-4"}),s.jsx("span",{children:"* Required fields"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[t&&s.jsx(we,{type:"button",variant:"outline",onClick:t,disabled:f||a,children:"Cancel"}),s.jsx(we,{"data-testid":"submit-button",type:"submit",disabled:f||a||!O.watch("assigned_to"),className:Oe(!O.watch("assigned_to")&&"opacity-50 cursor-not-allowed"),children:O.watch("assigned_to")?f?i?"Saving...":"Creating...":i?"Save Task Changes":"Create Task":s.jsxs(s.Fragment,{children:[s.jsx(Hr,{className:"w-4 h-4 mr-2"}),"Assign Someone First"]})})]})]})]})})}const tee={cleaning_daily:"",cleaning_weekly:"",temperature:"",opening:"",closing:"",maintenance:"",others:""},ree={not_started:"bg-gray-100 text-gray-700 border-gray-300",in_progress:"bg-blue-100 text-blue-700 border-blue-300",completed:"bg-green-100 text-green-700 border-green-300",overdue:"bg-red-100 text-red-700 border-red-300",skipped:"bg-yellow-100 text-yellow-700 border-yellow-300"},nee={critical:"bg-red-500",important:"bg-yellow-500",normal:"bg-green-500"};function Ev({task:e,onView:t,onComplete:r,onDelete:n,showActions:a=!0}){const i=tee[e.task_type]||"",o=ree[e.status],l=nee[e.priority],u=e.status==="completed",f=e.status==="overdue";return s.jsxs(rt,{className:Oe("transition-all hover:shadow-md",u&&"opacity-75"),children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:Oe("w-12 h-12 rounded-lg flex items-center justify-center text-2xl flex-shrink-0",u?"bg-green-100":f?"bg-red-100":"bg-primary/10"),children:i}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:Oe("w-2 h-2 rounded-full flex-shrink-0",l),title:Qh[e.priority]}),s.jsx("h3",{className:Oe("font-semibold text-base truncate",u&&"line-through text-muted-foreground"),title:e.title,children:e.title})]}),s.jsx(ut,{variant:"secondary",className:"text-xs",children:Yh[e.task_type]})]})]}),a&&s.jsxs(l2,{children:[s.jsx(c2,{asChild:!0,children:s.jsx(we,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(zk,{className:"h-4 w-4"})})}),s.jsxs(a0,{align:"end",children:[t&&s.jsxs(Pl,{onClick:()=>t(e),children:[s.jsx(Mc,{className:"mr-2 h-4 w-4"}),"View Details"]}),r&&e.status!=="completed"&&s.jsxs(Pl,{onClick:()=>r(e),children:[s.jsx(Na,{className:"mr-2 h-4 w-4"}),"Mark Complete"]}),n&&s.jsxs(Pl,{onClick:()=>n(e),className:"text-red-600",children:[s.jsx(Dl,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),s.jsxs(st,{className:"pt-0",children:[e.description&&!u&&s.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(jn,{className:"w-4 h-4"}),s.jsxs("span",{children:[wr(new Date(e.scheduled_date),"MMM d, yyyy"),e.scheduled_time&&` at ${e.scheduled_time}`]})]}),e.assigned_user&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Il,{className:"w-4 h-4"}),s.jsx("span",{children:e.assigned_user.display_name})]}),e.estimated_minutes&&s.jsx("div",{className:"flex items-center gap-1.5",children:s.jsxs("span",{className:"text-xs",children:[" ",e.estimated_minutes," min"]})})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t",children:[s.jsx(ut,{variant:"outline",className:Oe("font-medium",o),children:e.status.replace("_"," ").toUpperCase()}),u&&e.completed_at&&s.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["Completed ",wr(new Date(e.completed_at),"MMM d 'at' h:mm a")]})]}),!u&&r&&s.jsxs(we,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>r(e),children:[s.jsx(Na,{className:"w-4 h-4 mr-2"}),"Mark as Complete"]})]})]})}function see({taskId:e,limit:t=50,showTitle:r=!0}){const[n,a]=x.useState([]),[i,o]=x.useState(!0),[l,u]=x.useState(null);x.useEffect(()=>{f()},[e]);const f=async()=>{o(!0),u(null);try{a([])}catch(v){console.error("Error fetching task activities:",v),u(v instanceof Error?v.message:"Failed to load activities")}finally{o(!1)}},h=v=>{switch(v){case"created":return"bg-green-500/10 text-green-700 border-green-500/20";case"status_changed":return"bg-blue-500/10 text-blue-700 border-blue-500/20";case"assignment_changed":return"bg-purple-500/10 text-purple-700 border-purple-500/20";case"priority_changed":return"bg-orange-500/10 text-orange-700 border-orange-500/20";case"due_date_changed":return"bg-yellow-500/10 text-yellow-700 border-yellow-500/20";case"note_added":case"description_updated":return"bg-indigo-500/10 text-indigo-700 border-indigo-500/20";case"attachment_added":return"bg-pink-500/10 text-pink-700 border-pink-500/20";case"attachment_removed":case"deleted":return"bg-red-500/10 text-red-700 border-red-500/20";default:return"bg-gray-500/10 text-gray-700 border-gray-500/20"}},p=v=>{const{activity_type:m,field_name:N,old_value:w,new_value:j,notes:_}=v;return m==="status_changed"&&w&&j?s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ut,{variant:"outline",className:"capitalize",children:w.replace("_"," ")}),s.jsx("span",{children:""}),s.jsx(ut,{variant:"default",className:"capitalize",children:j.replace("_"," ")})]}):m==="assignment_changed"&&_?s.jsx("p",{className:"text-sm text-muted-foreground",children:_}):m==="priority_changed"&&w&&j?s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(ut,{variant:"outline",className:"capitalize",children:w}),s.jsx("span",{children:""}),s.jsx(ut,{variant:"default",className:"capitalize",children:j})]}):m==="due_date_changed"&&w&&j?s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:wr(new Date(w),"MMM d, yyyy")}),s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:wr(new Date(j),"MMM d, yyyy")})]}):_?s.jsx("p",{className:"text-sm text-muted-foreground",children:_}):null};return i?s.jsxs(rt,{children:[r&&s.jsxs(Wt,{children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-5 h-5"}),"Activity History"]}),s.jsx(Bs,{children:"Loading activity timeline..."})]}),s.jsxs(st,{className:"space-y-3",children:[s.jsx(Ur,{className:"h-16 w-full"}),s.jsx(Ur,{className:"h-16 w-full"}),s.jsx(Ur,{className:"h-16 w-full"})]})]}):l?s.jsxs(rt,{children:[r&&s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-5 h-5"}),"Activity History"]})}),s.jsx(st,{children:s.jsx("div",{className:"text-center py-8",children:s.jsx("p",{className:"text-sm text-destructive",children:l})})})]}):n.length===0?s.jsxs(rt,{children:[r&&s.jsx(Wt,{children:s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-5 h-5"}),"Activity History"]})}),s.jsx(st,{children:s.jsxs("div",{className:"text-center py-8",children:[s.jsx(jn,{className:"w-12 h-12 mx-auto mb-3 text-muted-foreground opacity-50"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No activity yet"})]})})]}):s.jsxs(rt,{children:[r&&s.jsxs(Wt,{children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-5 h-5"}),"Activity History"]}),s.jsxs(Bs,{children:[n.length," ",n.length===1?"activity":"activities"," recorded"]})]}),s.jsx(st,{children:s.jsx(ug,{className:"h-[400px] pr-4",children:s.jsx("div",{className:"space-y-4",children:n.map((v,m)=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex gap-4",children:[s.jsxs("div",{className:"flex flex-col items-center",children:[s.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 ${h(v.activity_type)}`,children:s.jsx("span",{className:"text-lg",children:XX[v.activity_type]||""})}),m<n.length-1&&s.jsx("div",{className:"w-0.5 h-full min-h-[40px] bg-border mt-2"})]}),s.jsxs("div",{className:"flex-1 pb-4",children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm",children:ZX[v.activity_type]||v.activity_type}),v.performed_by_name&&s.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[s.jsx(Il,{className:"w-3 h-3"}),v.performed_by_name]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground text-right shrink-0",children:[s.jsx("p",{children:Ip(new Date(v.created_at),{addSuffix:!0})}),s.jsx("p",{className:"text-[10px]",children:wr(new Date(v.created_at),"MMM d, h:mm a")})]})]}),s.jsx("div",{className:"mt-2",children:p(v)})]})]}),m<n.length-1&&s.jsx(ss,{className:"my-2"})]},v.id))})})})]})}const aee={cleaning_daily:"",cleaning_weekly:"",temperature:"",opening:"",closing:"",inspection:"",maintenance:""},iee={not_started:"bg-gray-100 text-gray-700 border-gray-300",in_progress:"bg-blue-100 text-blue-700 border-blue-300",completed:"bg-green-100 text-green-700 border-green-300",overdue:"bg-red-100 text-red-700 border-red-300",skipped:"bg-gray-100 text-gray-500 border-gray-300"},oee={critical:"bg-red-500",important:"bg-yellow-500",normal:"bg-green-500"};function lee({task:e,open:t,onOpenChange:r,onComplete:n,onStatusChange:a,onEdit:i,onDelete:o,onAddNote:l}){const{toast:u}=Er(),[f,h]=x.useState(""),[p,v]=x.useState(!1),[m,N]=x.useState([]),[w,j]=x.useState(!1);x.useEffect(()=>{t&&e.id&&_()},[t,e.id]);const _=async()=>{console.log(" Loading attachments for task:",e.id),j(!0);try{const{data:T,error:z}=await Ae.from("task_attachments").select("*").eq("task_id",e.id).order("uploaded_at",{ascending:!0});if(z){console.error(" Error loading attachments:",z);return}console.log(" Loaded attachments from database:",T);const U=T?.map(B=>B.file_url)||[];console.log(" Attachment URLs:",U),N(U)}catch(T){console.error(" Error loading attachments:",T)}finally{j(!1)}},C=e.scheduled_date?wr(new Date(e.scheduled_date),"MMM d, yyyy"):"Not scheduled",k=e.scheduled_time||"No specific time",E=T=>T.split(" ").map(z=>z[0]).join("").toUpperCase().slice(0,2),I=T=>{a&&(a(e.id,T),u({title:"Status Updated",description:`Task status changed to ${T.replace("_"," ")}`}))},D=()=>{n&&n(e)},O=()=>{f.trim()&&l&&(l(e.id,f.trim()),h(""),v(!1),u({title:"Note Added",description:"Your note has been saved"}))},F=()=>{confirm(`Are you sure you want to delete "${e.title}"?`)&&o&&(o(e),r(!1))};return s.jsx(ea,{open:t,onOpenChange:r,children:s.jsxs(Us,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx($s,{children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-4xl",children:aee[e.task_type]||""}),s.jsxs("div",{children:[s.jsx(zs,{className:"text-2xl",children:e.title}),s.jsx(Wa,{children:Yh[e.task_type]})]})]})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx(ut,{variant:"outline",className:`${iee[e.status]} border`,children:e.status.replace("_"," ").toUpperCase()}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${oee[e.priority]}`}),s.jsxs("span",{className:"text-sm font-medium",children:[Qh[e.priority]," Priority"]})]}),e.requires_approval&&s.jsx(ut,{variant:"secondary",children:"Requires Approval"})]}),s.jsx(ss,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(rt,{children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs(Qt,{className:"text-sm flex items-center gap-2",children:[s.jsx(Va,{className:"w-4 h-4"}),"Scheduled Date"]})}),s.jsx(st,{children:s.jsx("p",{className:"font-medium",children:C})})]}),s.jsxs(rt,{children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs(Qt,{className:"text-sm flex items-center gap-2",children:[s.jsx(jn,{className:"w-4 h-4"}),"Scheduled Time"]})}),s.jsx(st,{children:s.jsx("p",{className:"font-medium",children:k})})]}),s.jsxs(rt,{children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs(Qt,{className:"text-sm flex items-center gap-2",children:[s.jsx(Il,{className:"w-4 h-4"}),"Assigned To"]})}),s.jsx(st,{children:e.assigned_to?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(of,{className:"w-8 h-8",children:[s.jsx(b0,{src:e.assigned_user?.avatar_url}),s.jsx(lf,{children:e.assigned_user?.display_name?E(e.assigned_user.display_name):"?"})]}),s.jsx("span",{className:"font-medium",children:e.assigned_user?.display_name||"Unknown User"})]}):s.jsx("p",{className:"text-muted-foreground",children:"Unassigned"})})]}),s.jsxs(rt,{children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs(Qt,{className:"text-sm flex items-center gap-2",children:[s.jsx(jn,{className:"w-4 h-4"}),"Estimated Duration"]})}),s.jsx(st,{children:s.jsx("p",{className:"font-medium",children:e.estimated_minutes?`${e.estimated_minutes} minutes`:"Not specified"})})]})]}),e.description&&s.jsxs(s.Fragment,{children:[s.jsx(ss,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[s.jsx(Dv,{className:"w-4 h-4"}),"Description"]}),s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.description})]})]}),e.completed_at&&s.jsxs(s.Fragment,{children:[s.jsx(ss,{}),s.jsxs(rt,{className:"bg-green-50 border-green-200",children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs(Qt,{className:"text-sm flex items-center gap-2 text-green-700",children:[s.jsx(Js,{className:"w-4 h-4"}),"Completed"]})}),s.jsxs(st,{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",wr(new Date(e.completed_at),"MMM d, yyyy 'at' h:mm a")]}),e.completed_user&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"By:"}),s.jsx(of,{className:"w-6 h-6",children:s.jsx(lf,{className:"text-xs",children:E(e.completed_user.display_name)})}),s.jsx("span",{className:"text-sm",children:e.completed_user.display_name})]}),e.notes&&s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsx("span",{className:"font-medium block mb-2",children:"Notes & Comments:"}),s.jsx("div",{className:"bg-muted/50 p-3 rounded-md whitespace-pre-wrap text-sm",children:e.notes})]})]})]})]}),s.jsx(ss,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(Ab,{className:"w-4 h-4"}),"Photo Attachments"]}),s.jsx(mL,{taskId:e.id,existingImages:m,onUploadComplete:T=>{console.log("Images uploaded:",T),_()},maxImages:10})]}),s.jsx(ss,{}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(Dv,{className:"w-4 h-4"}),"Notes & Comments"]}),!p&&s.jsx(we,{variant:"outline",size:"sm",onClick:()=>v(!0),children:"Add Note"})]}),p&&s.jsx(rt,{className:"mb-4",children:s.jsxs(st,{className:"pt-4 space-y-3",children:[s.jsx(ft,{htmlFor:"note",children:"Add a note"}),s.jsx(ng,{id:"note",placeholder:"Enter your note here...",value:f,onChange:T=>h(T.target.value),rows:3}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{onClick:O,size:"sm",children:"Save Note"}),s.jsx(we,{variant:"outline",size:"sm",onClick:()=>{h(""),v(!1)},children:"Cancel"})]})]})}),e.notes?s.jsx("div",{className:"bg-muted/50 p-4 rounded-md whitespace-pre-wrap text-sm",children:e.notes}):s.jsx(rt,{className:"border-dashed",children:s.jsxs(st,{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(Dv,{className:"w-8 h-8 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet. Add one to get started."})]})})]}),s.jsx(ss,{}),s.jsx("div",{children:s.jsx(see,{taskId:e.id,limit:20,showTitle:!0})})]}),s.jsx(Zo,{className:"flex-col sm:flex-row gap-2",children:s.jsxs("div",{className:"flex flex-1 gap-2",children:[e.status!=="completed"&&s.jsxs(we,{onClick:D,className:"flex-1 sm:flex-initial",variant:"default",children:[s.jsx(Js,{className:"w-4 h-4 mr-2"}),"Mark Complete"]}),e.status==="not_started"&&s.jsx(we,{onClick:()=>I("in_progress"),variant:"outline",className:"flex-1 sm:flex-initial",children:"Start Task"}),i&&s.jsx(we,{onClick:()=>i(e),variant:"outline",size:"icon",children:s.jsx(Rh,{className:"w-4 h-4"})}),o&&s.jsx(we,{onClick:F,variant:"outline",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Dl,{className:"w-4 h-4"})})]})})]})})}const pL=x.memo(()=>{const e=Array.from({length:24},(t,r)=>r);return s.jsxs("div",{className:"relative h-[1440px] bg-muted/20",children:[e.map(t=>{const r=t/24*100,n=t.toString().padStart(2,"0")+":00";return s.jsxs("div",{className:"absolute left-0 right-0 border-t border-muted",style:{top:`${r}%`},children:[s.jsx("div",{className:"absolute -left-1 -top-3 w-16 text-right pr-2",children:s.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n})}),s.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-muted/40",style:{top:"25%"}}),s.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-muted/40",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-muted/40",style:{top:"75%"}})]},t)}),s.jsx("div",{className:"absolute left-16 top-0 bottom-0 border-r-2 border-muted"})]})});pL.displayName="TimelineGrid";const cee={cleaning_daily:{bg:"bg-blue-100 dark:bg-blue-950",border:"border-blue-300 dark:border-blue-700",text:"text-blue-900 dark:text-blue-100"},cleaning_weekly:{bg:"bg-purple-100 dark:bg-purple-950",border:"border-purple-300 dark:border-purple-700",text:"text-purple-900 dark:text-purple-100"},temperature:{bg:"bg-orange-100 dark:bg-orange-950",border:"border-orange-300 dark:border-orange-700",text:"text-orange-900 dark:text-orange-100"},opening:{bg:"bg-green-100 dark:bg-green-950",border:"border-green-300 dark:border-green-700",text:"text-green-900 dark:text-green-100"},closing:{bg:"bg-red-100 dark:bg-red-950",border:"border-red-300 dark:border-red-700",text:"text-red-900 dark:text-red-100"},maintenance:{bg:"bg-yellow-100 dark:bg-yellow-950",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-900 dark:text-yellow-100"},others:{bg:"bg-gray-100 dark:bg-gray-800",border:"border-gray-300 dark:border-gray-600",text:"text-gray-900 dark:text-gray-100"}},uee={completed:"opacity-60",in_progress:"ring-2 ring-blue-500",overdue:"ring-2 ring-red-500",skipped:"opacity-40",not_started:""},gL=x.memo(({task:e,style:t,onClick:r,onComplete:n})=>{const a=cee[e.task_type],i=uee[e.status],o=e.status==="completed",l=e.status==="overdue",u=e.status!=="completed"&&e.status!=="skipped";return s.jsx(FC,{children:s.jsxs(UM,{children:[s.jsx($M,{asChild:!0,children:s.jsxs("div",{style:t,className:Oe("border-l-4 rounded-lg p-2 cursor-pointer transition-all hover:shadow-md",a.bg,a.border,a.text,i,"group relative overflow-hidden"),onClick:r,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[o&&s.jsx(Na,{className:"w-3.5 h-3.5 flex-shrink-0 text-green-600"}),l&&s.jsx(Hr,{className:"w-3.5 h-3.5 flex-shrink-0 text-red-600"}),s.jsx("h4",{className:Oe("text-sm font-medium truncate",o&&"line-through"),children:e.title})]}),e.scheduled_time&&s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(jn,{className:"w-3 h-3 opacity-70"}),s.jsx("span",{className:"text-xs opacity-70",children:e.scheduled_time}),e.estimated_minutes&&s.jsxs("span",{className:"text-xs opacity-70",children:["(",e.estimated_minutes,"m)"]})]})]}),e.priority==="critical"&&s.jsx(ut,{variant:"destructive",className:"text-xs h-5 px-1.5",children:"!"}),e.priority==="important"&&s.jsx(ut,{variant:"secondary",className:"text-xs h-5 px-1.5",children:""})]}),e.assigned_user&&s.jsx("div",{className:"text-xs opacity-70 truncate",children:e.assigned_user.display_name}),u&&n&&s.jsx(we,{size:"sm",variant:"ghost",className:Oe("absolute top-1 right-1 h-6 w-6 p-0","opacity-0 group-hover:opacity-100 transition-opacity",a.text),onClick:f=>{f.stopPropagation(),n()},children:s.jsx(Na,{className:"w-4 h-4"})})]})}),s.jsx(BC,{side:"right",className:"max-w-xs",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-semibold",children:e.title}),e.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Status: ",e.status.replace("_"," ")]})]})})]})})});gL.displayName="TaskBlock";function dee(e,t,r){if(!e.recurrence_pattern)return[e];const n=e.recurrence_pattern,a=[],i=qw(e.scheduled_date);let o=new Date(Math.max(i.getTime(),t.getTime()));const l=hs(t,90);let u=new Date(Math.min(r.getTime(),l.getTime()));if(n.end_date){const p=qw(n.end_date);u=new Date(Math.min(u.getTime(),p.getTime()))}if(Rc(i,t)){const p=Math.floor((t.getTime()-i.getTime())/864e5);if(n.frequency==="daily"){const v=Math.floor(p/n.interval);o=hs(i,v*n.interval)}else if(n.frequency==="weekly"){const v=Math.floor(p/(7*n.interval));o=Dp(i,v*n.interval)}else if(n.frequency==="monthly"){const v=Math.floor(p/30),m=Math.floor(v/n.interval);o=Ui(i,m*n.interval)}for(;Rc(o,t);)o=rk(o,n.frequency,n.interval)}let f=0;const h=100;for(;!Op(o,u)&&f<h;){const p={...e,scheduled_date:wr(o,"yyyy-MM-dd"),scheduled_time:e.scheduled_time,_recurringInstanceDate:wr(o,"yyyy-MM-dd")};a.push(p),f++,o=rk(o,n.frequency,n.interval)}return a}function rk(e,t,r){switch(t){case"daily":return hs(e,r);case"weekly":return Dp(e,r);case"monthly":return Ui(e,r);default:return e}}function fee(e,t,r){const n=[];return e.forEach(a=>{const i=dee(a,t,r);n.push(...i)}),n}function hee({tasks:e,selectedDate:t,onTaskClick:r,onTaskComplete:n}){const a=new Date,i=wr(t,"yyyy-MM-dd")===wr(a,"yyyy-MM-dd"),o=x.useMemo(()=>{const v=Ko(t),m=l0(t);return fee(e,v,m)},[e,t]),l=x.useMemo(()=>{const v=wr(t,"yyyy-MM-dd");return o.filter(m=>m.scheduled_date?wr(qw(m.scheduled_date),"yyyy-MM-dd")===v:!1)},[o,t]),u=x.useMemo(()=>[...l].sort((v,m)=>{const N=v.scheduled_time||"00:00",w=m.scheduled_time||"00:00";return N.localeCompare(w)}),[l]),f=x.useMemo(()=>{if(!i)return null;const v=a.getHours(),m=a.getMinutes();return(v*60+m)/1440*100},[i,a]),h=x.useMemo(()=>{const v=new Map;return u.forEach(m=>{const N=m.scheduled_time||"00:00",w=parseInt(N.split(":")[0]);v.has(w)||v.set(w,[]),v.get(w).push(m)}),v},[u]),p=x.useRef(null);return x.useEffect(()=>{if(p.current){const v=p.current.offsetHeight;console.log(" Timeline container height:",v,"px (expected: 1440px)")}},[]),s.jsxs(rt,{className:"w-full",children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(jn,{className:"w-5 h-5"}),s.jsxs("span",{children:["Timeline - ",wr(t,"EEEE, MMMM d, yyyy")]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[u.length," ",u.length===1?"task":"tasks"]})]})}),s.jsx(st,{className:"p-0",children:s.jsxs(ug,{className:"w-full",children:[s.jsxs("div",{ref:p,className:"relative min-w-[800px] h-[1440px]",children:[s.jsx(pL,{}),i&&f!==null&&s.jsxs("div",{className:"absolute left-0 right-0 z-20 border-t-2 border-red-500",style:{top:`${f}%`},children:[s.jsx("div",{className:"absolute -left-1 -top-2 w-2 h-2 rounded-full bg-red-500"}),s.jsx("div",{className:"absolute left-2 -top-3 text-xs font-medium text-red-500",children:wr(a,"HH:mm")})]}),s.jsx("div",{className:"absolute inset-0 z-10",children:Array.from(h.entries()).map(([v,m])=>s.jsx(x.Fragment,{children:m.map((N,w)=>{const j=N.scheduled_time||"00:00",[_,C]=j.split(":").map(Number),k=_*60+C,E=k/1440*100,D=(N.estimated_minutes||30)/1440*100,O=w*5;N.title==="aaaaaaa"&&(console.log(' DEBUG Task "aaaaaaa":',{scheduled_time:N.scheduled_time,time_parsed:j,hours_extracted:_,minutes_extracted:C,totalMinutes:k,topPosition:E,topPosition_string:`${E}%`,expected_pixels:`${E/100*1440}px of 1440px`}),console.log(" Style being applied:",{position:"absolute",top:`${E}%`,left:`${80+O}px`,right:"16px",minHeight:`${Math.max(D,2)}%`}));const F=`${N.id}_${N.scheduled_date}`;return s.jsx(gL,{task:N,style:{position:"absolute",top:`${E}%`,left:`${80+O}px`,right:"16px",minHeight:`${Math.max(D,2)}%`},onClick:()=>r?.(N),onComplete:()=>n?.(N)},F)})},v))}),u.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[s.jsx(jn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks scheduled"}),s.jsxs("p",{className:"text-sm",children:["Create a task for ",wr(t,"MMMM d")," to see it here"]})]})})]}),s.jsx(o5,{orientation:"horizontal"})]})})]})}function mee(e){const[t,r]=x.useState([]),[n,a]=x.useState([]),[i,o]=x.useState(!0),[l,u]=x.useState(null),f=x.useCallback(async k=>{try{o(!0),u(null);let E=Ae.from("routine_tasks").select("*").order("scheduled_date",{ascending:!1});e&&(E=E.eq("organization_id",e)),k&&(k.status&&(E=E.eq("status",k.status)),k.task_type&&(E=E.eq("task_type",k.task_type)),k.assigned_to&&(E=E.eq("assigned_to",k.assigned_to)),k.date_from&&(E=E.gte("scheduled_date",k.date_from)),k.date_to&&(E=E.lte("scheduled_date",k.date_to)),k.priority&&(E=E.eq("priority",k.priority)));const{data:I,error:D}=await E;if(D)throw D;r(I||[])}catch(E){console.error("Error fetching routine tasks:",E),u(E)}finally{o(!1)}},[e]),h=x.useCallback(async()=>{try{let k=Ae.from("task_templates").select("*").order("name");e&&(k=k.eq("organization_id",e));const{data:E,error:I}=await k;if(I)throw I;a(E||[])}catch(k){console.error("Error fetching task templates:",k)}},[e]),p=async k=>{try{const{data:E,error:I}=await Ae.from("routine_tasks").insert({...k,organization_id:e,status:"not_started",requires_approval:k.requires_approval||!1,recurrence_pattern:k.recurrence_pattern}).select("*").single();if(I)throw I;return E&&r(D=>[E,...D]),E}catch(E){return console.error("Error creating routine task:",E),u(E),null}},v=async(k,E)=>{try{const{error:I}=await Ae.from("routine_tasks").update(E).eq("id",k);if(I)throw I;return r(D=>D.map(O=>O.id===k?{...O,...E}:O)),!0}catch(I){return console.error("Error updating routine task:",I),u(I),!1}},m=async(k,E,I)=>{const D={status:E};return E==="completed"?(D.completed_at=new Date().toISOString(),I&&(D.completed_by=I)):E==="in_progress"&&(D.started_at=new Date().toISOString()),v(k,D)},N=async k=>{try{const{error:E}=await Ae.from("routine_tasks").delete().eq("id",k);if(E)throw E;return r(I=>I.filter(D=>D.id!==k)),!0}catch(E){return console.error("Error deleting routine task:",E),u(E),!1}},w=k=>t.filter(E=>E.status===k),j=()=>{const k=new Date;return t.filter(E=>E.status!=="completed"&&E.scheduled_date&&new Date(E.scheduled_date)<k)},_=()=>{const k=new Date().toISOString().split("T")[0];return t.filter(E=>E.scheduled_date?.startsWith(k))},C=async(k,E,I)=>{const D=n.find(O=>O.id===k);return D?p({title:D.name,description:D.description,task_type:D.task_type,scheduled_date:E,assigned_to:I,priority:"normal"}):(u(new Error("Template not found")),null)};return x.useEffect(()=>{e&&(f(),h())},[e,f,h]),x.useEffect(()=>{if(!e)return;const k=Ae.channel(`routine-tasks:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"routine_tasks",filter:`organization_id=eq.${e}`},E=>{E.eventType==="INSERT"?r(I=>[E.new,...I]):E.eventType==="UPDATE"?r(I=>I.map(D=>D.id===E.new.id?{...D,...E.new}:D)):E.eventType==="DELETE"&&r(I=>I.filter(D=>D.id!==E.old.id))}).subscribe();return()=>{Ae.removeChannel(k)}},[e]),{tasks:t,templates:n,loading:i,error:l,fetchTasks:f,fetchTemplates:h,createTask:p,updateTask:v,updateTaskStatus:m,deleteTask:N,getTasksByStatus:w,getOverdueTasks:j,getTodayTasks:_,createFromTemplate:C,refresh:f}}function R0(e){const[t,r]=x.useState([]),[n,a]=x.useState(!0),[i,o]=x.useState(null),l=x.useCallback(async k=>{try{a(!0),o(null);let E=Ae.from("profiles").select("*, user_documents:user_documents(*)").order("display_name");e&&(E=E.eq("organization_id",e)),k&&(k.department_id&&(E=E.eq("department_id",k.department_id)),k.search&&(E=E.or(`display_name.ilike.%${k.search}%,email.ilike.%${k.search}%,user_id.eq.${k.search}`)));const{data:I,error:D}=await E;if(D)throw D;const{data:O,error:F}=await Ae.from("user_roles").select("user_id, role");if(F)throw F;const T=new Map((O||[]).map(U=>[U.user_id,U.role]));let z=(I||[]).map(U=>({...U,role:T.get(U.user_id)||"staff"}));k?.role&&k.role!=="all"&&(z=z.filter(U=>U.role===k.role)),r(z)}catch(E){console.error("Error fetching users:",E),o(E)}finally{a(!1)}},[e]),u=async k=>{try{const{data:E,error:I}=await Ae.from("profiles").insert({...k,organization_id:e}).select(`
          *,
          user_documents:user_documents(*)
        `).single();if(I)throw I;return E&&r(D=>[...D,E]),E}catch(E){return console.error("Error creating user:",E),o(E),null}},f=async(k,E)=>{try{const{role:I,...D}=E;if(Object.keys(D).length>0){const{error:O}=await Ae.from("profiles").update(D).eq("user_id",k);if(O)throw O}if(I){const{data:O}=await Ae.from("user_roles").select("id").eq("user_id",k).single();if(O){const{error:F}=await Ae.from("user_roles").update({role:I}).eq("user_id",k);if(F)throw F}else{const{error:F}=await Ae.from("user_roles").insert({user_id:k,role:I});if(F)throw F}}return r(O=>O.map(F=>F.user_id===k?{...F,...E}:F)),!0}catch(I){return console.error("Error updating user:",I),o(I),!1}},h=async k=>{try{const{error:E}=await Ae.from("profiles").update({employment_status:"terminated",terminated_at:new Date().toISOString()}).eq("user_id",k);if(E)throw E;return r(I=>I.map(D=>D.user_id===k?{...D,employment_status:"terminated",terminated_at:new Date().toISOString()}:D)),!0}catch(E){return console.error("Error deleting user:",E),o(E),!1}},p=async(k,E,I)=>{try{const D=E.name.split(".").pop(),F=`user-documents/${`${k}/${I}_${Date.now()}.${D}`}`,{error:T}=await Ae.storage.from("documents").upload(F,E);if(T)throw T;const{data:z}=Ae.storage.from("documents").getPublicUrl(F),{data:U,error:B}=await Ae.from("user_documents").insert({user_id:k,document_type:I,document_name:E.name,file_url:z.publicUrl,file_type:E.type,file_size:E.size,status:"active"}).select().single();if(B)throw B;return r(K=>K.map(V=>V.user_id===k?{...V,user_documents:[...V.user_documents||[],U]}:V)),U}catch(D){return console.error("Error uploading document:",D),o(D),null}},v=async k=>{try{const{data:E,error:I}=await Ae.from("user_documents").select("file_url, user_id").eq("id",k).single();if(I)throw I;const{error:D}=await Ae.from("user_documents").delete().eq("id",k);if(D)throw D;return r(O=>O.map(F=>F.user_id===E.user_id?{...F,user_documents:F.user_documents?.filter(T=>T.id!==k)}:F)),!0}catch(E){return console.error("Error deleting document:",E),o(E),!1}},m=k=>t.filter(E=>E.role===k),N=()=>t.filter(k=>k.employment_status==="active"),w=k=>t.filter(E=>E.department_id===k),j=async(k,E)=>(console.warn("PIN verification not yet implemented"),!1),_=async(k,E)=>(console.warn("PIN setting not yet implemented"),!1),C=k=>t.find(I=>I.user_id===k)?.profile_completion_percentage||0;return x.useEffect(()=>{e&&l()},[e,l]),x.useEffect(()=>{if(!e)return;const k=Ae.channel(`people:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`organization_id=eq.${e}`},E=>{E.eventType==="INSERT"?r(I=>[...I,E.new]):E.eventType==="UPDATE"?r(I=>I.map(D=>D.user_id===E.new.user_id?{...D,...E.new}:D)):E.eventType==="DELETE"&&r(I=>I.filter(D=>D.user_id!==E.old.user_id))}).subscribe();return()=>{Ae.removeChannel(k)}},[e]),{users:t,loading:n,error:i,fetchUsers:l,createUser:u,updateUser:f,deleteUser:h,uploadDocument:p,deleteDocument:v,getUsersByRole:m,getActiveUsers:N,getUsersByDepartment:w,getProfileCompletion:C,verifyPin:j,setPin:_,refresh:l}}async function _b(e,t){if(!/^\d{4}$/.test(e))throw new Error("PIN must be exactly 4 digits");const r=pee(),a=new TextEncoder().encode(e+r),i=await crypto.subtle.digest("SHA-256",a),l=Array.from(new Uint8Array(i)).map(u=>u.toString(16).padStart(2,"0")).join("");return`${r}:${l}`}function pee(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<16;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function gee(){return Math.floor(1e3+Math.random()*9e3).toString()}const N5=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),[a,i]=x.useState(null),{toast:o}=Er(),l=async _=>{try{n(!0),i(null);let C=Ae.from("team_members").select("*").order("display_name",{ascending:!0});_?.role_type&&_.role_type!=="all"&&(C=C.eq("role_type",_.role_type)),_?.is_active!==void 0&&(C=C.eq("is_active",_.is_active)),_?.organization_id&&(C=C.eq("organization_id",_.organization_id)),_?.location_id&&(C=C.eq("location_id",_.location_id)),_?.auth_role_id&&(C=C.eq("auth_role_id",_.auth_role_id)),_?.profile_complete!==void 0&&(C=C.eq("profile_complete",_.profile_complete)),_?.search&&(C=C.or(`display_name.ilike.%${_.search}%,email.ilike.%${_.search}%,position.ilike.%${_.search}%`));const{data:k,error:E}=await C;if(E)throw E;return t(k||[]),k||[]}catch(C){const k=C;return i(k),o({title:"Error fetching team members",description:k.message,variant:"destructive"}),[]}finally{n(!1)}};return{teamMembers:e,loading:r,error:a,fetchTeamMembers:l,fetchTeamMember:async _=>{try{const{data:C,error:k}=await Ae.from("team_members").select("*").eq("id",_).single();if(k)throw k;return C}catch(C){return o({title:"Error fetching team member",description:C.message,variant:"destructive"}),null}},createTeamMember:async _=>{try{const C=_.pin||gee(),k=await _b(C),{data:{user:E}}=await Ae.auth.getUser();if(!E)throw new Error("User not authenticated");const{data:I,error:D}=await Ae.from("team_members").insert({display_name:_.display_name,email:_.email,phone:_.phone,position:_.position,date_of_birth:_.date_of_birth,address:_.address,tfn_number:_.tfn_number,emergency_contact_name:_.emergency_contact_name,emergency_contact_phone:_.emergency_contact_phone,emergency_contact_relationship:_.emergency_contact_relationship,hire_date:_.hire_date,department_id:_.department_id,role_type:_.role_type,auth_role_id:_.auth_role_id,organization_id:_.organization_id,location_id:_.location_id,pin_hash:k,created_by:E.id,updated_by:E.id}).select().single();if(D)throw D;const O=I;return o({title:"Team member created",description:`${O.display_name} has been added. PIN: ${C}`}),await l(),O}catch(C){return o({title:"Error creating team member",description:C.message,variant:"destructive"}),null}},updateTeamMember:async(_,C)=>{try{const{data:{user:k}}=await Ae.auth.getUser();if(!k)throw new Error("User not authenticated");const E={...C,updated_by:k.id};C.pin&&(E.pin_hash=await _b(C.pin),delete E.pin);const{data:I,error:D}=await Ae.from("team_members").update(E).eq("id",_).select().single();if(D)throw D;const O=I;return o({title:"Team member updated",description:`${O.display_name} has been updated.`}),await l(),O}catch(k){return o({title:"Error updating team member",description:k.message,variant:"destructive"}),null}},deactivateTeamMember:async _=>{try{const{error:C}=await Ae.from("team_members").update({is_active:!1}).eq("id",_);if(C)throw C;return o({title:"Team member deactivated",description:"The team member has been deactivated."}),await l(),!0}catch(C){return o({title:"Error deactivating team member",description:C.message,variant:"destructive"}),!1}},reactivateTeamMember:async _=>{try{const{error:C}=await Ae.from("team_members").update({is_active:!0}).eq("id",_);if(C)throw C;return o({title:"Team member reactivated",description:"The team member has been reactivated."}),await l(),!0}catch(C){return o({title:"Error reactivating team member",description:C.message,variant:"destructive"}),!1}},verifyPIN:async(_,C)=>{try{const{data:k,error:E}=await Ae.rpc("verify_team_member_pin",{member_id:_,pin_input:C});if(E)throw E;return k===!0}catch(k){return console.error("PIN verification error:",k),o({title:"PIN verification failed",description:"Could not verify PIN. Please try again.",variant:"destructive"}),!1}},getTeamMembersByRole:async _=>l({role_type:_,is_active:!0}),getTeamMembersByAuthRole:async _=>l({auth_role_id:_,is_active:!0}),getIncompleteProfiles:async()=>l({profile_complete:!1,is_active:!0})}};function vee(){const{toast:e}=Er(),{context:t,loading:r}=nd(),[n,a]=x.useState(!1),[i,o]=x.useState(!1),[l,u]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState("list"),[m,N]=x.useState(new Date);console.log("TasksOverview - context:",t),console.log("TasksOverview - contextLoading:",r);const[w,j]=x.useState(""),[_,C]=x.useState("all"),[k,E]=x.useState("all"),[I,D]=x.useState("all"),[O,F]=x.useState("all");R0(t?.organization_id);const{teamMembers:T,loading:z,fetchTeamMembers:U}=N5();x.useEffect(()=>{t?.organization_id&&U({organization_id:t.organization_id,is_active:!0})},[t?.organization_id]);const{tasks:B,loading:K,error:V,createTask:de,updateTask:se,updateTaskStatus:Y,deleteTask:W}=mee(t?.organization_id),ee=x.useMemo(()=>{let je=[...B];if(w.trim()){const te=w.toLowerCase();je=je.filter(Ze=>Ze.title.toLowerCase().includes(te)||Ze.description?.toLowerCase().includes(te))}return _!=="all"&&(je=je.filter(te=>te.status===_)),k!=="all"&&(je=je.filter(te=>te.task_type===k)),I!=="all"&&(je=je.filter(te=>te.priority===I)),O!=="all"&&(je=je.filter(te=>te.assigned_to===O)),je},[B,w,_,k,I,O]),ge=ee.filter(je=>{if(!je.scheduled_date)return!1;const te=new Date(je.scheduled_date),Ze=new Date;return te.getDate()===Ze.getDate()&&te.getMonth()===Ze.getMonth()&&te.getFullYear()===Ze.getFullYear()}),re=ee.filter(je=>!je.scheduled_date||je.status==="completed"?!1:new Date(je.scheduled_date)<new Date);ee.filter(je=>je.status==="not_started");const L=ee.filter(je=>je.status==="in_progress"),q=ee.filter(je=>je.status==="completed"),J=x.useMemo(()=>T.map(je=>({id:je.id,name:je.display_name})),[T]),ne=w.trim()!==""||_!=="all"||k!=="all"||I!=="all"||O!=="all",ue=()=>{j(""),C("all"),E("all"),D("all"),F("all")},ie=async je=>{if(console.log("Creating task with data:",je),console.log("Organization ID:",t?.organization_id),!t?.organization_id){e({title:"Error",description:"No organization found. Please log in again.",variant:"destructive"});return}await de(je)&&(a(!1),e({title:"Success!",description:"Task created successfully"}))},oe=async je=>{await Y(je.id,"completed",t?.user_id)&&e({title:"Task Completed!",description:`"${je.title}" has been marked as complete`})},le=async je=>{confirm(`Are you sure you want to delete "${je.title}"?`)&&await W(je.id)&&(u(null),e({title:"Task Deleted",description:"Task has been removed"}))},ye=async(je,te)=>{if(await Y(je,te,t?.user_id)){if(l&&l.id===je){const Nt={status:te};te==="completed"?(Nt.completed_at=new Date().toISOString(),Nt.completed_by=t?.user_id):te==="in_progress"&&(Nt.started_at=new Date().toISOString()),u({...l,...Nt})}e({title:"Status Updated",description:`Task status changed to ${te.replace("_"," ")}`})}},Pe=async(je,te)=>{if(!te.trim()){e({title:"Error",description:"Note cannot be empty",variant:"destructive"});return}const Ze=B.find(Ce=>Ce.id===je);if(!Ze)return;const Nt=new Date().toLocaleString(),pt=t?.display_name||"User",Qe=`[${Nt}] ${pt}: ${te}`,me=Ze.notes?`${Ze.notes}
${Qe}`:Qe;l&&l.id===je&&u({...l,notes:me}),await se(je,{notes:me})?e({title:"Note Added",description:"Your note has been saved"}):(l&&l.id===je&&u({...l,notes:Ze.notes}),e({title:"Error",description:"Failed to save note",variant:"destructive"}))},We=async je=>{if(!f)return;if(await se(f.id,{title:je.title,description:je.description,priority:je.priority,team_member_id:je.team_member_id,scheduled_date:je.scheduled_date,scheduled_time:je.scheduled_time})){if(o(!1),h(null),l&&l.id===f.id){const Ze=B.find(Nt=>Nt.id===f.id);Ze&&u(Ze)}e({title:"Success!",description:"Task updated successfully"})}else e({title:"Error",description:"Failed to update task",variant:"destructive"})},Fe=je=>{h(je),o(!0)};return K||r?s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsx(Ur,{className:"h-12 w-full"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsx(Ur,{className:"h-32"}),s.jsx(Ur,{className:"h-32"}),s.jsx(Ur,{className:"h-32"})]}),s.jsx(Ur,{className:"h-96"})]}):t?V?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx(rt,{className:"border-red-200 bg-red-50",children:s.jsxs(Wt,{children:[s.jsx(Qt,{className:"text-red-700",children:"Error Loading Tasks"}),s.jsx(Bs,{className:"text-red-600",children:V.message})]})})}):s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Routine Tasks"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your daily operations and checklists"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(DR,{type:"single",value:p,onValueChange:je=>je&&v(je),className:"justify-start sm:justify-center",children:[s.jsxs(hb,{value:"list","aria-label":"List view",className:"gap-2",children:[s.jsx(Lb,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"List"})]}),s.jsxs(hb,{value:"timeline","aria-label":"Timeline view",className:"gap-2",children:[s.jsx(jn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Timeline"})]})]}),n&&s.jsx(ea,{open:n,onOpenChange:a,children:s.jsxs(Us,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs($s,{children:[s.jsx(zs,{children:"Create New Task"}),s.jsx(Wa,{children:"Add a new routine task to your schedule"})]}),s.jsx(tk,{onSubmit:ie,users:T.map(je=>({user_id:je.id,display_name:je.display_name})),isLoading:z})]})}),s.jsxs(we,{size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>a(!0),children:[s.jsx(vn,{className:"w-5 h-5"}),s.jsx("span",{children:"New Task"})]})]})]}),p==="timeline"&&s.jsx(rt,{children:s.jsxs(st,{className:"pt-6",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between gap-4",children:[s.jsx(we,{variant:"outline",size:"icon",onClick:()=>{const je=new Date(m);je.setDate(je.getDate()-1),N(je)},className:"shrink-0",children:s.jsx(Rb,{className:"h-4 w-4"})}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap justify-center",children:[s.jsxs(Lc,{children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",className:Oe("justify-start text-left font-normal",!m&&"text-muted-foreground"),children:[s.jsx(Va,{className:"mr-2 h-4 w-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Select Date"}),s.jsx("span",{className:"sm:hidden",children:"Date"})]})}),s.jsx(kl,{className:"w-auto p-0",align:"center",children:s.jsx(Up,{mode:"single",selected:m,onSelect:je=>je&&N(je),initialFocus:!0})})]}),s.jsx(we,{variant:wr(m,"yyyy-MM-dd")===wr(new Date,"yyyy-MM-dd")?"default":"outline",onClick:()=>N(new Date),children:"Today"}),s.jsx("div",{className:"hidden md:block text-center font-semibold px-4 py-2 bg-muted rounded-md min-w-[200px]",children:wr(m,"PPP")})]}),s.jsx(we,{variant:"outline",size:"icon",onClick:()=>{const je=new Date(m);je.setDate(je.getDate()+1),N(je)},className:"shrink-0",children:s.jsx(xp,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"md:hidden mt-4 text-center font-semibold text-sm text-muted-foreground",children:wr(m,"PPP")})]})}),s.jsx(rt,{children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search tasks by title or description...",value:w,onChange:je=>j(je.target.value),className:"pl-9"}),w&&s.jsx(we,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7",onClick:()=>j(""),children:s.jsx(hn,{className:"w-4 h-4"})})]}),s.jsxs(Lc,{children:[s.jsx(Dc,{asChild:!0,children:s.jsxs(we,{variant:"outline",className:"gap-2",children:[s.jsx(Fc,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Filters"}),ne&&s.jsx(ut,{variant:"secondary",className:"ml-1 px-1.5 py-0",children:[_!=="all",k!=="all",I!=="all",O!=="all"].filter(Boolean).length})]})}),s.jsx(kl,{className:"w-80",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold",children:"Filters"}),ne&&s.jsx(we,{variant:"ghost",size:"sm",onClick:ue,className:"h-auto py-1 px-2",children:"Clear all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Status"}),s.jsxs(Nr,{value:_,onValueChange:je=>C(je),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Statuses"}),s.jsx(qe,{value:"not_started",children:"Not Started"}),s.jsx(qe,{value:"in_progress",children:"In Progress"}),s.jsx(qe,{value:"completed",children:"Completed"}),s.jsx(qe,{value:"overdue",children:"Overdue"}),s.jsx(qe,{value:"blocked",children:"Blocked"}),s.jsx(qe,{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Task Type"}),s.jsxs(Nr,{value:k,onValueChange:je=>E(je),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Types"}),Object.entries(Yh).map(([je,te])=>s.jsx(qe,{value:je,children:te},je))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Priority"}),s.jsxs(Nr,{value:I,onValueChange:je=>D(je),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Priorities"}),Object.entries(Qh).map(([je,te])=>s.jsx(qe,{value:je,children:te},je))]})]})]}),J.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Assigned To"}),s.jsxs(Nr,{value:O,onValueChange:F,children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Users"}),J.map(je=>s.jsx(qe,{value:je.id,children:je.name},je.id))]})]})]})]})})]})]}),ne&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),w&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:['Search: "',w,'"',s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>j("")})]}),_!=="all"&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Status: ",_.replace("_"," "),s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>C("all")})]}),k!=="all"&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Type: ",Yh[k],s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>E("all")})]}),I!=="all"&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Priority: ",Qh[I],s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>D("all")})]}),O!=="all"&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["User: ",J.find(je=>je.id===O)?.name,s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>F("all")})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",ee.length," of ",B.length," tasks",ne&&" (filtered)"]})]})})}),p==="timeline"&&s.jsx(hee,{tasks:ee,selectedDate:m,onTaskClick:u,onTaskComplete:oe}),p==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"Today's Tasks"}),s.jsx(Va,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(st,{children:[s.jsx("div",{className:"text-2xl font-bold",children:ge.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled for today"})]})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"Overdue Tasks"}),s.jsx(Hr,{className:"h-4 w-4 text-red-500"})]}),s.jsxs(st,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:re.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Need immediate attention"})]})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"In Progress"}),s.jsx("div",{className:"h-4 w-4 rounded-full bg-blue-500"})]}),s.jsxs(st,{children:[s.jsx("div",{className:"text-2xl font-bold",children:L.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"Completed"}),s.jsx("div",{className:"h-4 w-4 rounded-full bg-green-500"})]}),s.jsxs(st,{children:[s.jsx("div",{className:"text-2xl font-bold",children:q.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Finished tasks"})]})]})]}),s.jsxs(fg,{defaultValue:"today",className:"space-y-4",children:[s.jsxs(um,{className:"grid w-full grid-cols-4",children:[s.jsxs(ia,{value:"today",className:"gap-2",children:[s.jsx("span",{children:"Today"}),ge.length>0&&s.jsx(ut,{variant:"secondary",className:"ml-1",children:ge.length})]}),s.jsxs(ia,{value:"overdue",className:"gap-2",children:[s.jsx("span",{children:"Overdue"}),re.length>0&&s.jsx(ut,{variant:"destructive",className:"ml-1",children:re.length})]}),s.jsxs(ia,{value:"in-progress",className:"gap-2",children:[s.jsx("span",{children:"In Progress"}),L.length>0&&s.jsx(ut,{variant:"secondary",className:"ml-1",children:L.length})]}),s.jsx(ia,{value:"all",children:"All Tasks"})]}),s.jsx(oa,{value:"today",className:"space-y-4",children:ge.length===0?s.jsx(rt,{children:s.jsxs(st,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Va,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks scheduled for today"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new task to get started"})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ge.map(je=>s.jsx(Ev,{task:je,onView:u,onComplete:oe,onDelete:le},je.id))})}),s.jsx(oa,{value:"overdue",className:"space-y-4",children:re.length===0?s.jsx(rt,{children:s.jsxs(st,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Hr,{className:"w-12 h-12 text-green-500 mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No overdue tasks!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up"})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:re.map(je=>s.jsx(Ev,{task:je,onView:u,onComplete:oe,onDelete:le},je.id))})}),s.jsx(oa,{value:"in-progress",className:"space-y-4",children:L.length===0?s.jsx(rt,{children:s.jsxs(st,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks in progress"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Start working on a task to see it here"})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:L.map(je=>s.jsx(Ev,{task:je,onView:u,onComplete:oe,onDelete:le},je.id))})}),s.jsx(oa,{value:"all",className:"space-y-4",children:ee.length===0?s.jsx(rt,{children:s.jsx(st,{className:"flex flex-col items-center justify-center py-12",children:ne?s.jsxs(s.Fragment,{children:[s.jsx(Fc,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks match your filters"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Try adjusting your search or filters"}),s.jsxs(we,{onClick:ue,variant:"outline",children:[s.jsx(hn,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(vn,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first task to get started"}),s.jsxs(we,{onClick:()=>a(!0),children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Create Task"]})]})})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:ee.map(je=>s.jsx(Ev,{task:je,onView:u,onComplete:oe,onDelete:le},je.id))})})]})]}),i&&f&&s.jsx(ea,{open:i,onOpenChange:o,children:s.jsxs(Us,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs($s,{children:[s.jsx(zs,{children:"Edit Task"}),s.jsx(Wa,{children:"Update the task details below"})]}),s.jsx(tk,{onSubmit:We,users:T.map(je=>({user_id:je.id,display_name:je.display_name})),isLoading:z,isEditing:!0,taskId:f.id,userRole:t?.user_role,defaultValues:{title:f.title,description:f.description||"",task_type:f.task_type,priority:f.priority,assigned_to:f.team_member_id||f.assigned_to||"",scheduled_date:new Date(f.scheduled_date),scheduled_time:f.scheduled_time||"",estimated_minutes:f.estimated_minutes||30,requires_approval:f.requires_approval}})]})}),l&&s.jsx(lee,{task:l,open:!!l,onOpenChange:je=>!je&&u(null),onComplete:oe,onStatusChange:ye,onEdit:Fe,onDelete:le,onAddNote:Pe})]}):s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(rt,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(Wt,{children:s.jsx(Qt,{className:"text-yellow-800",children:"Setup Required"})}),s.jsx(st,{children:s.jsx("p",{className:"text-yellow-700",children:"Please complete your organization setup to access routine tasks."})})]})})}function xee(){return s.jsx(vee,{})}function yee(){const[e,t]=x.useState([]),[r,n]=x.useState(new Map),[a,i]=x.useState(!0),{toast:o}=Er();x.useEffect(()=>{l()},[]);const l=async()=>{try{const[f,h]=await Promise.all([Ae.from("training_courses").select("*").eq("is_published",!0).order("title"),Ae.from("training_enrollments").select("*")]);if(f.error)throw f.error;if(h.error)throw h.error;t(f.data||[]);const p=new Map;(h.data||[]).forEach(v=>{p.set(v.course_id,v)}),n(p)}catch(f){console.error("Error fetching data:",f),o({title:"Error",description:"Failed to load training courses",variant:"destructive"})}finally{i(!1)}},u=async f=>{try{const{data:{user:h}}=await Ae.auth.getUser();if(!h)throw new Error("Not authenticated");const{error:p}=await Ae.from("training_enrollments").insert({course_id:f,user_id:h.id});if(p)throw p;o({title:"Success",description:"Enrolled in course successfully"}),l()}catch(h){console.error("Error enrolling:",h),o({title:"Error",description:"Failed to enroll in course",variant:"destructive"})}};return a?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("p",{children:"Loading..."})}):s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:"Training Courses"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(f=>{const h=r.get(f.id),p=!!h,v=h?.completed_at;return s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[s.jsx(gD,{className:"h-5 w-5"}),f.title]}),s.jsx(Bs,{children:f.description})]}),s.jsxs(st,{children:[f.duration_minutes&&s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Duration: ",f.duration_minutes," minutes"]}),p?s.jsxs(s.Fragment,{children:[s.jsx(ux,{value:h.progress||0,className:"mb-4"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Progress: ",h.progress||0,"%"]}),s.jsx(we,{className:"w-full",variant:v?"outline":"default",children:v?s.jsxs(s.Fragment,{children:[s.jsx(Cl,{className:"mr-2 h-4 w-4"}),"Completed"]}):s.jsxs(s.Fragment,{children:[s.jsx(ow,{className:"mr-2 h-4 w-4"}),"Continue"]})})]}):s.jsx(we,{onClick:()=>u(f.id),className:"w-full",children:"Enroll Now"})]})]},f.id)})})]})}function Th(e){const t=e.replace(/\D/g,"");return t.length===0?"":t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}function Vp(e){return e.replace(/\D/g,"")}function wee(e){return Vp(e).length===10}function nk(e){const r=e.replace(/\D/g,"").slice(0,9);return r.length===0?"":r.length<=3?r:r.length<=6?`${r.slice(0,3)} ${r.slice(3)}`:`${r.slice(0,3)} ${r.slice(3,6)} ${r.slice(6)}`}function bee(e){return e.replace(/\D/g,"")}function jee({user:e,onViewProfile:t,onEdit:r,showActions:n=!0}){const a=()=>{switch(e.role){case"admin":return{color:"bg-red-100 text-red-800 border-red-200",icon:"",label:"Admin"};case"manager":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"",label:"Manager"};case"leader_chef":return{color:"bg-orange-100 text-orange-800 border-orange-200",icon:"",label:"Leader Chef"};case"cook":return{color:"bg-purple-100 text-purple-800 border-purple-200",icon:"",label:"Cook"};case"barista":return{color:"bg-amber-100 text-amber-800 border-amber-200",icon:"",label:"Barista"};case"staff":return{color:"bg-blue-100 text-blue-800 border-blue-200",icon:"",label:"Staff"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"",label:"Unknown"}}},i=()=>({icon:Js,color:"text-green-600",bgColor:"bg-green-50",label:"Active"}),o=()=>{if(!e.user_documents||e.user_documents.length===0)return{icon:is,color:"text-amber-600",label:"No Documents"};const m=new Date,N=e.user_documents.filter(j=>{if(!j.expiration_date)return!1;const _=new Date(j.expiration_date),C=Math.ceil((_.getTime()-m.getTime())/(1e3*60*60*24));return C>0&&C<=30}),w=e.user_documents.filter(j=>j.expiration_date?new Date(j.expiration_date)<m:!1);return w.length>0?{icon:Ix,color:"text-red-600",label:`${w.length} Expired`}:N.length>0?{icon:is,color:"text-amber-600",label:`${N.length} Expiring Soon`}:{icon:Js,color:"text-green-600",label:"Compliant"}},l=m=>m.split(" ").map(N=>N[0]).join("").toUpperCase().substring(0,2),u=a(),f=i(),h=o(),p=f.icon,v=h.icon;return s.jsx(rt,{className:"hover:shadow-md transition-shadow",children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(of,{className:"w-20 h-20 border-2 border-muted",children:[s.jsx(b0,{src:e.avatar_url,alt:e.display_name}),s.jsx(lf,{className:"text-xl font-semibold",children:l(e.display_name)})]}),s.jsx("div",{className:Oe("absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-white flex items-center justify-center",f.bgColor),children:s.jsx(p,{className:Oe("w-3 h-3",f.color)})})]}),s.jsxs("div",{className:"space-y-2 w-full",children:[s.jsx("h3",{className:"font-semibold text-lg leading-tight",children:e.display_name}),s.jsxs(ut,{className:Oe("border",u.color),children:[s.jsx("span",{className:"mr-1",children:u.icon}),u.label]}),e.position&&s.jsx("p",{className:"text-sm text-muted-foreground",children:e.position}),e.department_id&&s.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground",children:[s.jsx(vD,{className:"w-3 h-3"}),s.jsx("span",{children:"Department"})]})]}),s.jsxs("div",{className:"w-full space-y-1",children:[e.email&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground justify-center",children:[s.jsx(Gk,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground justify-center",children:[s.jsx(Kk,{className:"w-3 h-3"}),s.jsx("span",{children:Th(e.phone)})]})]}),s.jsxs("div",{className:"w-full pt-3 border-t space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status"}),s.jsx(ut,{variant:"outline",className:f.bgColor,children:f.label})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Compliance"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v,{className:Oe("w-4 h-4",h.color)}),s.jsx("span",{className:Oe("text-xs font-medium",h.color),children:h.label})]})]}),e.user_documents&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Documents"}),s.jsx("span",{className:"text-xs font-medium",children:e.user_documents.length})]})]}),n&&s.jsxs("div",{className:"flex items-center gap-2 w-full pt-2",children:[s.jsxs(we,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t?.(e),children:[s.jsx(Mc,{className:"w-4 h-4 mr-1"}),"View"]}),r&&s.jsxs(we,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>r(e),children:[s.jsx(Rh,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]})})})}function _ee({users:e,loading:t,onViewProfile:r,onEdit:n,onLoadMore:a,hasMore:i=!1,loadingMore:o=!1,showActions:l=!0}){const[u,f]=x.useState("grid");return t?s.jsx("div",{className:Oe("grid gap-4",u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:[1,2,3,4,5,6,7,8].map(h=>s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Ur,{className:"w-20 h-20 rounded-full"}),s.jsxs("div",{className:"space-y-2 w-full",children:[s.jsx(Ur,{className:"h-5 w-3/4 mx-auto"}),s.jsx(Ur,{className:"h-4 w-1/2 mx-auto"}),s.jsx(Ur,{className:"h-4 w-2/3 mx-auto"})]}),s.jsxs("div",{className:"w-full space-y-2 pt-3",children:[s.jsx(Ur,{className:"h-4 w-full"}),s.jsx(Ur,{className:"h-4 w-full"})]}),s.jsxs("div",{className:"flex gap-2 w-full pt-2",children:[s.jsx(Ur,{className:"h-8 flex-1"}),s.jsx(Ur,{className:"h-8 flex-1"})]})]})})},h))}):!e||e.length===0?s.jsx(rt,{className:"border-2 border-dashed",children:s.jsxs(st,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:s.jsx(Bi,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No team members found"}),s.jsx("p",{className:"text-muted-foreground text-center max-w-sm",children:"There are no team members to display. Try adjusting your filters or add new team members."})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(we,{variant:u==="grid"?"default":"outline",size:"sm",onClick:()=>f("grid"),children:[s.jsx(Vk,{className:"w-4 h-4 mr-2"}),"Grid"]}),s.jsxs(we,{variant:u==="list"?"default":"outline",size:"sm",onClick:()=>f("list"),children:[s.jsx(Lb,{className:"w-4 h-4 mr-2"}),"List"]})]}),s.jsx("div",{className:Oe("grid gap-4",u==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:e.map(h=>s.jsx(jee,{user:h,onViewProfile:r,onEdit:n,showActions:l},h.user_id))}),i&&a&&s.jsx("div",{className:"flex justify-center pt-4",children:s.jsx(we,{variant:"outline",onClick:a,disabled:o,className:"min-w-[200px]",children:o?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading more..."]}):"Load More"})}),!i&&e.length>12&&s.jsx("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"You've reached the end of the list"}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing ",e.length," team member",e.length!==1?"s":""]})]})}function Nee({users:e}){const t=e.length,r=e.length,n=e.filter(m=>m.role==="admin").length,a=e.filter(m=>m.role==="manager").length,i=e.filter(m=>m.role==="leader_chef").length,o=e.filter(m=>m.role==="cook").length,l=e.filter(m=>m.role==="barista").length,u=new Date,f=e.filter(m=>m.user_documents&&m.user_documents.length>0),h=e.filter(m=>!m.user_documents||m.user_documents.length===0?!1:!m.user_documents.some(w=>w.expiration_date?new Date(w.expiration_date)<u:!1)),p=e.reduce((m,N)=>{if(!N.user_documents)return m;const w=N.user_documents.filter(j=>{if(!j.expiration_date)return!1;const _=new Date(j.expiration_date),C=Math.ceil((_.getTime()-u.getTime())/(1e3*60*60*24));return C>0&&C<=30});return m+w.length},0),v=f.length>0?Math.round(h.length/f.length*100):0;return s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Team"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsx("p",{className:"text-3xl font-bold",children:t})}),s.jsx("div",{className:"flex items-center gap-2 mt-2 text-xs",children:s.jsxs(ut,{variant:"secondary",className:"text-xs",children:[" ",r," Active"]})})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Bi,{className:"w-6 h-6 text-blue-600"})})]})})}),s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"By Role"}),s.jsxs("div",{className:"space-y-1",children:[n>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:n}),s.jsx("span",{className:"text-muted-foreground",children:"Admin"})]}),a>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:a}),s.jsx("span",{className:"text-muted-foreground",children:"Manager"})]}),i>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:i}),s.jsx("span",{className:"text-muted-foreground",children:"Leader Chef"})]}),o>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:o}),s.jsx("span",{className:"text-muted-foreground",children:"Cook"})]}),l>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:l}),s.jsx("span",{className:"text-muted-foreground",children:"Barista"})]})]})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(ff,{className:"w-6 h-6 text-purple-600"})})]})})}),s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Compliance"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("p",{className:"text-3xl font-bold",children:[v,"%"]})}),s.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-300 ${v>=80?"bg-green-600":v>=60?"bg-amber-600":"bg-red-600"}`,style:{width:`${v}%`}})}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[h.length," of ",f.length," users"]})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(MD,{className:"w-6 h-6 text-green-600"})})]})})}),s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Expiring Docs"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsx("p",{className:`text-3xl font-bold ${p>0?"text-amber-600":"text-green-600"}`,children:p})}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:p===0?"All documents valid":p===1?"Document expiring within 30 days":"Documents expiring within 30 days"})]}),s.jsx("div",{className:`p-3 rounded-lg ${p>0?"bg-amber-100":"bg-green-100"}`,children:s.jsx(is,{className:`w-6 h-6 ${p>0?"text-amber-600":"text-green-600"}`})})]})})})]})}function See({filters:e,onFilterChange:t,onClearFilters:r}){const[n,a]=x.useState(e.search||""),[i,o]=x.useState(!1),l=[e.role,e.employment_status,e.department_id,e.active_only,e.search].filter(Boolean).length,u=v=>{t({...e,role:v==="all"?void 0:v})},f=v=>{t({...e,employment_status:v==="all"?void 0:v})},h=()=>{t({...e,active_only:!e.active_only})},p=v=>{a(v),t({...e,search:v||void 0})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search by name or email...",value:n,onChange:v=>p(v.target.value),className:"pl-9"})]})}),s.jsxs(Nr,{value:e.role||"all",onValueChange:u,children:[s.jsx(_r,{className:"w-[150px]",children:s.jsx(Sr,{placeholder:"Role"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Roles"}),s.jsx(qe,{value:"admin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Admin"})]})}),s.jsx(qe,{value:"manager",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Manager"})]})}),s.jsx(qe,{value:"leader_chef",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Leader Chef"})]})}),s.jsx(qe,{value:"cook",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Cook"})]})}),s.jsx(qe,{value:"barista",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Barista"})]})})]})]}),s.jsxs(Nr,{value:e.employment_status||"all",onValueChange:f,children:[s.jsx(_r,{className:"w-[150px]",children:s.jsx(Sr,{placeholder:"Status"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Status"}),s.jsx(qe,{value:"active",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Active"})]})}),s.jsx(qe,{value:"on_leave",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"On Leave"})]})}),s.jsx(qe,{value:"terminated",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Terminated"})]})})]})]}),s.jsxs(we,{variant:"outline",size:"icon",onClick:()=>o(!i),className:"relative",children:[s.jsx(Fc,{className:"w-4 h-4"}),l>0&&s.jsx(ut,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs",children:l})]}),l>0&&s.jsxs(we,{variant:"ghost",size:"sm",onClick:r,className:"gap-1",children:[s.jsx(hn,{className:"w-4 h-4"}),"Clear"]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsx(ss,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(mD,{className:"w-4 h-4"}),"Sort By"]}),s.jsxs(Nr,{defaultValue:"name",children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Sort by..."})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"name",children:"Name (A-Z)"}),s.jsx(qe,{value:"name_desc",children:"Name (Z-A)"}),s.jsx(qe,{value:"role",children:"Role"}),s.jsx(qe,{value:"status",children:"Status"}),s.jsx(qe,{value:"compliance",children:"Compliance"}),s.jsx(qe,{value:"recent",children:"Recently Added"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Department"}),s.jsxs(Nr,{defaultValue:"all",children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"All Departments"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Departments"}),s.jsx(qe,{value:"kitchen",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Kitchen"})]})}),s.jsx(qe,{value:"bar",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Bar"})]})}),s.jsx(qe,{value:"management",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Management"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Compliance"}),s.jsxs(Nr,{defaultValue:"all",children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"All"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All"}),s.jsx(qe,{value:"compliant",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Compliant"})]})}),s.jsx(qe,{value:"expiring",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Expiring Soon"})]})}),s.jsx(qe,{value:"non_compliant",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Non-Compliant"})]})})]})]})]})]})]}),l>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),e.role&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Role: ",e.role.replace("_"," "),s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>u("all")})]}),e.employment_status&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Status: ",e.employment_status.replace("_"," "),s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("all")})]}),e.search&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:['Search: "',e.search,'"',s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>p("")})]}),e.active_only&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Active Only",s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:h})]})]})]})}function vL({open:e,onOpenChange:t,user:r,onSuccess:n}){const{toast:a}=Er(),{context:i}=nd(),{updateUser:o,loading:l}=R0(i?.organization_id),[u,f]=x.useState({display_name:r.display_name||"",email:r.email||"",phone:r.phone||"",position:r.position||"",role:r.role||"cook",hire_date:r.hire_date||""});x.useEffect(()=>{f({display_name:r.display_name||"",email:r.email||"",phone:r.phone||"",position:r.position||"",role:r.role||"cook",hire_date:r.hire_date||""})},[r,e]);const h=i?.user_role==="admin",p=i?.user_role==="manager",v=i?.user_id===r.user_id,m=h||p,N=(_,C)=>{f(_==="phone"?k=>({...k,[_]:Th(C)}):k=>({...k,[_]:C}))},w=()=>u.display_name.trim()?u.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(u.email)?u.phone&&!wee(u.phone)?(a({title:"Validation Error",description:"Please enter a valid 10-digit phone number.",variant:"destructive"}),!1):!0:(a({title:"Validation Error",description:"Please enter a valid email address.",variant:"destructive"}),!1):(a({title:"Validation Error",description:"Email is required.",variant:"destructive"}),!1):(a({title:"Validation Error",description:"Display name is required.",variant:"destructive"}),!1),j=async _=>{if(_.preventDefault(),!!w())try{const C={display_name:u.display_name,email:u.email,phone:u.phone?Vp(u.phone):null,position:u.position||null};m&&(C.role=u.role),h&&u.hire_date&&(C.hire_date=u.hire_date),await o(r.user_id,C),a({title:"Success",description:"User information updated successfully."}),t(!1),n?.()}catch(C){console.error("Error updating user:",C),a({title:"Error",description:"Failed to update user information. Please try again.",variant:"destructive"})}};return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs($s,{children:[s.jsx(zs,{children:"Edit User Information"}),s.jsxs(Wa,{children:[v?"Update your profile information.":`Update information for ${r.display_name}.`,!h&&!p&&" You can only edit contact information."]})]}),s.jsxs("form",{onSubmit:j,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ft,{htmlFor:"display_name",children:["Display Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(St,{id:"display_name",value:u.display_name,onChange:_=>N("display_name",_.target.value),placeholder:"John Doe",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ft,{htmlFor:"email",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(St,{id:"email",type:"email",value:u.email,onChange:_=>N("email",_.target.value),placeholder:"john@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"phone",children:"Phone"}),s.jsx(St,{id:"phone",type:"tel",value:u.phone,onChange:_=>N("phone",_.target.value),placeholder:"(555) 123-4567",maxLength:14}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: (XXX) XXX-XXXX"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Employment Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"position",children:"Position / Title"}),s.jsx(St,{id:"position",value:u.position,onChange:_=>N("position",_.target.value),placeholder:"Head Chef"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"role",children:"Role"}),s.jsxs(Nr,{value:u.role,onValueChange:_=>N("role",_),disabled:!m,children:[s.jsx(_r,{id:"role",children:s.jsx(Sr,{})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"admin",children:" Admin"}),s.jsx(qe,{value:"manager",children:" Manager"}),s.jsx(qe,{value:"leader_chef",children:" Leader Chef"}),s.jsx(qe,{value:"cook",children:" Cook"}),s.jsx(qe,{value:"barista",children:" Barista"}),s.jsx(qe,{value:"staff",children:" Staff"})]})]}),!m&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin/Manager only field"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"hire_date",children:"Hire Date"}),s.jsx(St,{id:"hire_date",type:"date",value:u.hire_date,onChange:_=>N("hire_date",_.target.value),disabled:!h&&!p}),!h&&!p&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin/Manager only field"})]})]})]}),s.jsxs(Zo,{children:[s.jsx(we,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),s.jsxs(we,{type:"submit",disabled:l,children:[l&&s.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]})]})]})]})})}var L0="Switch",[kee]=bs(L0),[Cee,Eee]=kee(L0),xL=x.forwardRef((e,t)=>{const{__scopeSwitch:r,name:n,checked:a,defaultChecked:i,required:o,disabled:l,value:u="on",onCheckedChange:f,form:h,...p}=e,[v,m]=x.useState(null),N=Jt(t,k=>m(k)),w=x.useRef(!1),j=v?h||!!v.closest("form"):!0,[_,C]=Ea({prop:a,defaultProp:i??!1,onChange:f,caller:L0});return s.jsxs(Cee,{scope:r,checked:_,disabled:l,children:[s.jsx(vt.button,{type:"button",role:"switch","aria-checked":_,"aria-required":o,"data-state":jL(_),"data-disabled":l?"":void 0,disabled:l,value:u,...p,ref:N,onClick:lt(e.onClick,k=>{C(E=>!E),j&&(w.current=k.isPropagationStopped(),w.current||k.stopPropagation())})}),j&&s.jsx(bL,{control:v,bubbles:!w.current,name:n,value:u,checked:_,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});xL.displayName=L0;var yL="SwitchThumb",wL=x.forwardRef((e,t)=>{const{__scopeSwitch:r,...n}=e,a=Eee(yL,r);return s.jsx(vt.span,{"data-state":jL(a.checked),"data-disabled":a.disabled?"":void 0,...n,ref:t})});wL.displayName=yL;var Pee="SwitchBubbleInput",bL=x.forwardRef(({__scopeSwitch:e,control:t,checked:r,bubbles:n=!0,...a},i)=>{const o=x.useRef(null),l=Jt(o,i),u=rg(r),f=Kp(t);return x.useEffect(()=>{const h=o.current;if(!h)return;const p=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(p,"checked").set;if(u!==r&&m){const N=new Event("click",{bubbles:n});m.call(h,r),h.dispatchEvent(N)}},[u,r,n]),s.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...a,tabIndex:-1,ref:l,style:{...a.style,...f,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bL.displayName=Pee;function jL(e){return e?"checked":"unchecked"}var _L=xL,Aee=wL;const NL=x.forwardRef(({className:e,...t},r)=>s.jsx(_L,{className:Oe("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:r,children:s.jsx(Aee,{className:Oe("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));NL.displayName=_L.displayName;function Tee({open:e,onOpenChange:t,onValidated:r,expectedHash:n,title:a="PIN Verification Required",description:i="Enter your 4-digit PIN to continue",maxAttempts:o=3}){const[l,u]=x.useState(""),[f,h]=x.useState(""),[p,v]=x.useState(0),[m,N]=x.useState(!1),[w,j]=x.useState(!1);x.useEffect(()=>{e&&(u(""),h(""),v(0),j(!1))},[e]),x.useEffect(()=>{l.length===4&&!m&&_()},[l]);const _=async()=>{if(l.length!==4){h("PIN must be 4 digits");return}if(p>=o){h("Maximum attempts reached. Please contact an administrator.");return}N(!0),h("");try{if(await _b(l)===n)console.log("[PINValidationDialog] PIN validated successfully"),r(),t(!1);else{const O=p+1;v(O);const F=o-O;F>0?h(`Incorrect PIN. ${F} attempt(s) remaining.`):h("Maximum attempts reached. Please contact an administrator."),u(""),console.log("[PINValidationDialog] PIN validation failed. Attempts:",O)}}catch(D){console.error("[PINValidationDialog] Error validating PIN:",D),h("An error occurred. Please try again."),u("")}finally{N(!1)}},C=D=>{const O=D.replace(/\D/g,"").slice(0,4);u(O),h("")},k=()=>{t(!1)},E=D=>{D.key==="Enter"&&l.length===4&&!m&&_()},I=p>=o;return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-w-[400px]",children:[s.jsxs($s,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hk,{className:"h-5 w-5 text-primary"}),s.jsx(zs,{children:a})]}),s.jsx(Wa,{children:i})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"pin",children:"4-Digit PIN"}),s.jsxs("div",{className:"relative",children:[s.jsx(St,{id:"pin",type:w?"text":"password",value:l,onChange:D=>C(D.target.value),onKeyDown:E,placeholder:"",maxLength:4,className:"text-center text-2xl tracking-widest font-mono pr-10",disabled:m||I,autoFocus:!0,autoComplete:"off"}),s.jsx("button",{type:"button",onClick:()=>j(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",disabled:m||I,children:w?s.jsx(Kv,{className:"h-4 w-4"}):s.jsx(Mc,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex gap-1",children:[0,1,2,3].map(D=>s.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${l.length>D?"bg-primary":"bg-muted"}`},D))})]}),f&&s.jsxs(Oo,{variant:"destructive",children:[s.jsx(Hr,{className:"h-4 w-4"}),s.jsx(Mo,{children:f})]}),p>0&&!I&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Attempts: ",p," / ",o]})]}),s.jsxs(Zo,{className:"gap-2",children:[s.jsx(we,{variant:"outline",onClick:k,disabled:m,children:"Cancel"}),s.jsx(we,{onClick:_,disabled:l.length!==4||m||I,children:m?"Validating...":"Verify"})]})]})})}function Ree(e){const[t,r]=x.useState(!1),[n,a]=x.useState([]),{toast:i}=Er(),o="team_member_documents";return{documents:n,loading:t,fetchDocuments:async p=>{if(!p&&!e)return;const v=p||e;r(!0);try{const{data:m,error:N}=await Ae.from("team_member_certificates").select("*").eq("team_member_id",v).order("created_at",{ascending:!1});if(N)throw N;return a(m||[]),m}catch(m){return console.error("Error fetching documents:",m),i({title:"Error",description:"Failed to load documents.",variant:"destructive"}),null}finally{r(!1)}},uploadDocument:async(p,v)=>{r(!0);try{const{data:{user:m}}=await Ae.auth.getUser();if(!m)throw new Error("No authenticated user");const N=v.file.name.split(".").pop(),w=`${p}/${Date.now()}-${Math.random().toString(36).substring(7)}.${N}`,{data:j,error:_}=await Ae.storage.from(o).upload(w,v.file,{contentType:v.file.type,upsert:!1});if(_)throw _;const{data:{publicUrl:C}}=Ae.storage.from(o).getPublicUrl(w),{data:k,error:E}=await Ae.from("team_member_certificates").insert({team_member_id:p,certificate_name:v.certificate_name,certificate_type:v.certificate_type,description:v.description,file_url:C,file_type:v.file.type,file_size:v.file.size,issue_date:v.issue_date,expiration_date:v.expiration_date,issued_by:v.issued_by,certificate_number:v.certificate_number,status:"active",verification_status:"pending",created_by:m.id,updated_by:m.id}).select().single();if(E)throw await Ae.storage.from(o).remove([w]),E;return i({title:"Success",description:"Document uploaded successfully."}),a(I=>[k,...I]),k}catch(m){return console.error("Error uploading document:",m),i({title:"Upload Failed",description:m.message||"Failed to upload document.",variant:"destructive"}),null}finally{r(!1)}},deleteDocument:async p=>{r(!0);try{const{data:v,error:m}=await Ae.from("team_member_certificates").select("file_url").eq("id",p).single();if(m)throw m;const w=new URL(v.file_url).pathname.split("/").slice(-2).join("/"),{error:j}=await Ae.storage.from(o).remove([w]);j&&console.warn("Storage deletion warning:",j);const{error:_}=await Ae.from("team_member_certificates").delete().eq("id",p);if(_)throw _;return i({title:"Success",description:"Document deleted successfully."}),a(C=>C.filter(k=>k.id!==p)),!0}catch(v){return console.error("Error deleting document:",v),i({title:"Delete Failed",description:v.message||"Failed to delete document.",variant:"destructive"}),!1}finally{r(!1)}},updateDocument:async(p,v)=>{r(!0);try{const{data:{user:m}}=await Ae.auth.getUser();if(!m)throw new Error("No authenticated user");const{data:N,error:w}=await Ae.from("team_member_certificates").update({...v,updated_by:m.id}).eq("id",p).select().single();if(w)throw w;return i({title:"Success",description:"Document updated successfully."}),a(j=>j.map(_=>_.id===p?N:_)),!0}catch(m){return console.error("Error updating document:",m),i({title:"Update Failed",description:m.message||"Failed to update document.",variant:"destructive"}),!1}finally{r(!1)}}}}function Lee({teamMemberId:e,documents:t=[],onDocumentsChange:r,maxFiles:n=10,maxSizeInMB:a=10}){const{toast:i}=Er(),{documents:o,loading:l,fetchDocuments:u,uploadDocument:f,deleteDocument:h}=Ree(e),[p,v]=x.useState(t);x.useEffect(()=>{e&&u(e)},[e]),x.useEffect(()=>{const C=o.map(k=>({id:k.id,name:k.certificate_name,type:k.file_type||"application/octet-stream",size:k.file_size||0,url:k.file_url}));v(C)},[o]);const m=["application/pdf","image/jpeg","image/jpg","image/png","image/webp"],N=async C=>{const k=C.target.files;if(!k||k.length===0)return;if(!e){i({title:"Error",description:"Team member ID is required to upload documents.",variant:"destructive"});return}const E=a*1024*1024;for(let I=0;I<k.length;I++){const D=k[I];if(!m.includes(D.type)){i({title:"Invalid file type",description:`${D.name} is not a supported format. Please upload PDF or image files.`,variant:"destructive"});continue}if(D.size>E){i({title:"File too large",description:`${D.name} exceeds ${a}MB. Please choose a smaller file.`,variant:"destructive"});continue}if(p.length>=n){i({title:"Maximum files reached",description:`You can upload a maximum of ${n} files.`,variant:"destructive"});break}await f(e,{file:D,certificate_name:D.name,certificate_type:D.type.startsWith("image/")?"photo":"certificate",description:`Uploaded ${D.name}`})}C.target.value=""},w=async C=>{if(await h(C)&&r){const E=p.filter(I=>I.id!==C);r(E)}},j=C=>{if(C===0)return"0 Bytes";const k=1024,E=["Bytes","KB","MB"],I=Math.floor(Math.log(C)/Math.log(k));return Math.round(C/Math.pow(k,I)*100)/100+" "+E[I]},_=C=>C==="application/pdf"?s.jsx(Ic,{className:"w-8 h-8 text-red-500"}):s.jsx(ND,{className:"w-8 h-8 text-blue-500"});return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs(we,{type:"button",variant:"outline",className:"relative",disabled:p.length>=n||l||!e,children:[s.jsx("input",{type:"file",multiple:!0,accept:".pdf,.jpg,.jpeg,.png,.webp",onChange:N,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",disabled:p.length>=n||l||!e}),l?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Uploading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ib,{className:"w-4 h-4 mr-2"}),"Attach Documents"]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[p.length,"/",n," files  Max ",a,"MB per file"]})]}),!e&&s.jsx("p",{className:"text-xs text-amber-600",children:"Save the team member first to enable document uploads."}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported formats: PDF, JPG, PNG, WEBP"}),p.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ft,{children:["Uploaded Documents (",p.length,")"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:p.map(C=>s.jsx(rt,{className:"overflow-hidden",children:s.jsx(st,{className:"p-3",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0",children:C.url&&C.type.startsWith("image/")?s.jsx("div",{className:"w-16 h-16 rounded-lg overflow-hidden bg-muted",children:s.jsx("img",{src:C.url,alt:C.name,className:"w-full h-full object-cover"})}):s.jsx("div",{className:"w-16 h-16 rounded-lg bg-muted flex items-center justify-center",children:_(C.type)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("p",{className:"text-sm font-medium truncate",title:C.name,children:C.name}),s.jsx("p",{className:"text-xs text-muted-foreground",children:j(C.size)}),s.jsx("div",{className:"flex items-center gap-2 mt-2",children:C.url&&s.jsxs(s.Fragment,{children:[s.jsxs(we,{type:"button",size:"sm",variant:"ghost",className:"h-7 px-2",onClick:()=>window.open(C.url,"_blank"),children:[s.jsx(Mc,{className:"w-3 h-3 mr-1"}),"View"]}),s.jsxs(we,{type:"button",size:"sm",variant:"ghost",className:"h-7 px-2",onClick:()=>{const k=document.createElement("a");k.href=C.url,k.download=C.name,k.click()},children:[s.jsx(Ox,{className:"w-3 h-3 mr-1"}),"Download"]})]})})]}),s.jsx(we,{type:"button",size:"sm",variant:"ghost",className:"h-8 w-8 p-0 flex-shrink-0",onClick:()=>w(C.id),children:s.jsx(hn,{className:"w-4 h-4"})})]})})},C.id))})]}),p.length===0&&s.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center text-muted-foreground",children:[s.jsx(Ic,{className:"w-12 h-12 mx-auto mb-2 opacity-50"}),s.jsx("p",{className:"text-sm",children:"No documents uploaded yet"}),s.jsx("p",{className:"text-xs mt-1",children:e?'Click "Attach Documents" to upload certificates and files':"Save the team member first to upload documents"})]})]})}function Dee({open:e,onOpenChange:t,teamMember:r,currentTeamMemberId:n,onSuccess:a}){const{canEditWithoutPIN:i}=rd(),{updateTeamMember:o,loading:l}=N5(),[u,f]=x.useState(!1),[h,p]=x.useState(!1),[v,m]=x.useState({}),[N,w]=x.useState("personal"),[j,_]=x.useState([]);if(x.useEffect(()=>{e&&r?(m({display_name:r.display_name,email:r.email,phone:r.phone?Th(r.phone):r.phone,position:r.position,date_of_birth:r.date_of_birth,address:r.address,tfn_number:r.tfn_number?nk(r.tfn_number):r.tfn_number,emergency_contact_name:r.emergency_contact_name,emergency_contact_phone:r.emergency_contact_phone?Th(r.emergency_contact_phone):r.emergency_contact_phone,emergency_contact_relationship:r.emergency_contact_relationship,hire_date:r.hire_date,role_type:r.role_type,is_active:r.is_active}),p(!1),w("personal")):(m({}),p(!1))},[e,r]),!r)return null;const C=n===r.id,k=!i&&C,E=()=>{if(k&&!h){f(!0);return}I()},I=async()=>{if(!r)return;const F={...v,phone:v.phone?Vp(v.phone):v.phone,emergency_contact_phone:v.emergency_contact_phone?Vp(v.emergency_contact_phone):v.emergency_contact_phone,tfn_number:v.tfn_number?bee(v.tfn_number):v.tfn_number};await o(r.id,F)&&(t(!1),a&&a())},D=()=>{p(!0),f(!1),I()},O=(F,T)=>{m(F==="phone"||F==="emergency_contact_phone"?z=>({...z,[F]:Th(T)}):F==="tfn_number"?z=>({...z,[F]:nk(T)}):z=>({...z,[F]:T}))};return s.jsxs(s.Fragment,{children:[s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsxs($s,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(zs,{children:"Edit Team Member"}),k&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded",children:[s.jsx(Hk,{className:"h-3 w-3"}),s.jsx("span",{children:"PIN Required"})]}),i&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[s.jsx(ff,{className:"h-3 w-3"}),s.jsx("span",{children:"Admin Access"})]})]}),s.jsx(Wa,{children:k?"You will need to enter your PIN to save changes":"Update team member information"}),i&&s.jsxs("div",{className:"flex items-center gap-2 pt-2",children:[s.jsx(ft,{htmlFor:"is_active",className:"text-sm cursor-pointer",children:v.is_active?"Active":"Inactive"}),s.jsx(NL,{id:"is_active",checked:v.is_active??!0,onCheckedChange:F=>O("is_active",F)})]})]}),s.jsxs(fg,{value:N,onValueChange:F=>w(F),className:"w-full",children:[s.jsxs(um,{className:"grid w-full grid-cols-4",children:[s.jsxs(ia,{value:"personal",className:"flex items-center gap-1",children:[s.jsx(Il,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Personal"})]}),s.jsxs(ia,{value:"employment",className:"flex items-center gap-1",children:[s.jsx(Gv,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Employment"})]}),s.jsxs(ia,{value:"emergency",className:"flex items-center gap-1",children:[s.jsx(_D,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Emergency"})]}),s.jsxs(ia,{value:"documents",className:"flex items-center gap-1",children:[s.jsx(Ic,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Documents"})]})]}),s.jsxs(oa,{value:"personal",className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(ft,{htmlFor:"display_name",children:["Full Name ",s.jsx("span",{className:"text-destructive",children:"*"})]}),s.jsx(St,{id:"display_name",value:v.display_name||"",onChange:F=>O("display_name",F.target.value),placeholder:"Joo Silva"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"date_of_birth",children:"Date of Birth"}),s.jsx(St,{id:"date_of_birth",type:"date",value:v.date_of_birth||"",onChange:F=>O("date_of_birth",F.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"email",children:"Email"}),s.jsx(St,{id:"email",type:"email",value:v.email||"",onChange:F=>O("email",F.target.value),placeholder:"joao@restaurant.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"phone",children:"Phone"}),s.jsx(St,{id:"phone",type:"tel",value:v.phone||"",onChange:F=>O("phone",F.target.value),placeholder:"(123) 456-7890"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"address",children:"Address"}),s.jsx(ng,{id:"address",value:v.address||"",onChange:F=>O("address",F.target.value),placeholder:"123 Main Street, City, State, ZIP",rows:3})]})]}),s.jsxs(oa,{value:"employment",className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"position",children:"Position"}),s.jsx(St,{id:"position",value:v.position||"",onChange:F=>O("position",F.target.value),placeholder:"Line Cook"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"hire_date",children:"Hire Date"}),s.jsx(St,{id:"hire_date",type:"date",value:v.hire_date||"",onChange:F=>O("hire_date",F.target.value)})]}),i&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"role_type",children:"Role Type"}),s.jsxs(Nr,{value:v.role_type,onValueChange:F=>O("role_type",F),children:[s.jsx(_r,{children:s.jsx(Sr,{})}),s.jsx(Cr,{children:Object.entries(t5).map(([F,T])=>s.jsx(qe,{value:F,children:T},F))})]})]})]}),s.jsxs(oa,{value:"emergency",className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"emergency_contact_name",children:"Emergency Contact Name"}),s.jsx(St,{id:"emergency_contact_name",value:v.emergency_contact_name||"",onChange:F=>O("emergency_contact_name",F.target.value),placeholder:"Maria Silva"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"emergency_contact_phone",children:"Emergency Contact Phone"}),s.jsx(St,{id:"emergency_contact_phone",type:"tel",value:v.emergency_contact_phone||"",onChange:F=>O("emergency_contact_phone",F.target.value),placeholder:"(123) 456-7890"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"emergency_contact_relationship",children:"Relationship"}),s.jsx(St,{id:"emergency_contact_relationship",value:v.emergency_contact_relationship||"",onChange:F=>O("emergency_contact_relationship",F.target.value),placeholder:"Spouse, Parent, Sibling, etc."})]})]}),s.jsxs(oa,{value:"documents",className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{htmlFor:"tfn_number",children:"TFN (Tax File Number)"}),s.jsx(St,{id:"tfn_number",value:v.tfn_number||"",onChange:F=>O("tfn_number",F.target.value),placeholder:"123 456 789",maxLength:11}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: nnn nnn nnn (8 or 9 digits)"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Certificates & Documents"}),s.jsx(Lee,{teamMemberId:r?.id,documents:j,onDocumentsChange:_,maxFiles:10,maxSizeInMB:10})]})]})]}),s.jsxs(Zo,{className:"flex justify-end gap-2 pt-4 border-t",children:[s.jsx(we,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),s.jsx(we,{onClick:E,disabled:l||!v.display_name,children:l?"Saving...":k?"Save with PIN":"Save"})]})]})}),k&&r.pin_hash&&s.jsx(Tee,{open:u,onOpenChange:f,onValidated:D,expectedHash:r.pin_hash,title:"Verify Your PIN",description:"Enter your PIN to save changes to your profile"})]})}const Iee=Px({email:za().email("Invalid email address"),displayName:za().min(2,"Display name must be at least 2 characters"),role:pp(["admin","manager","leader_chef","cook","barista"],{required_error:"Please select a role"})});function Oee({open:e,onOpenChange:t,onSuccess:r}){const{toast:n}=Er(),{context:a}=nd(),[i,o]=x.useState(!1);console.log("[CreateUserDialog] Dialog open:",e),console.log("[CreateUserDialog] Context:",a);const l=y5({resolver:w5(Iee),defaultValues:{email:"",displayName:"",role:void 0}});console.log("[CreateUserDialog] Form state:",l.formState),console.log("[CreateUserDialog] Form errors:",l.formState.errors);const u=async f=>{if(console.log("[CreateUserDialog] onSubmit called with values:",f),console.log("[CreateUserDialog] Context:",a),!a?.organization_id){console.error("[CreateUserDialog] No organization_id in context"),n({title:"Error",description:"No organization context found. Please log in again.",variant:"destructive"});return}o(!0),console.log("[CreateUserDialog] Starting invitation process...");try{const{data:{session:h}}=await Ae.auth.getSession();if(console.log("[CreateUserDialog] Session:",h?"Found":"Not found"),!h)throw new Error("No active session. Please log in.");const p="https://imnecvcvhypnlvujajpn.supabase.co";console.log("[CreateUserDialog] Supabase URL:",p),console.log("[CreateUserDialog] Calling invite-user function...");const v=await fetch(`${p}/functions/v1/invite-user`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${h.access_token}`},body:JSON.stringify({email:f.email,display_name:f.displayName,role_type:f.role,organization_id:a.organization_id})});console.log("[CreateUserDialog] Response status:",v.status);const m=await v.json();if(console.log("[CreateUserDialog] Response body:",m),!v.ok)throw new Error(m.error||"Failed to create user");n({title:" User Created Successfully",description:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("p",{children:[s.jsx("strong",{children:f.displayName})," has been created!"]}),s.jsxs("p",{className:"text-sm",children:[" A password reset email has been sent to ",s.jsx("strong",{children:f.email})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"The user should check their inbox (and spam folder) to set their password."}),s.jsxs("div",{className:"bg-amber-50 border border-amber-200 p-2 rounded mt-2",children:[s.jsx("p",{className:"text-xs font-semibold text-amber-800",children:"Backup Option:"}),s.jsxs("p",{className:"text-xs text-amber-700",children:["If email doesn't arrive, user can login with password: ",s.jsx("code",{className:"font-mono bg-amber-100 px-1",children:"TampaAPP@2026"})]})]})]}),duration:12e3}),l.reset(),r&&r(),t(!1)}catch(h){console.error("Error creating user:",h),n({title:"Error",description:h.message||"Failed to create user. Please try again.",variant:"destructive"})}finally{o(!1)}};return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-w-[900px] max-h-[85vh] overflow-y-auto",children:[s.jsxs($s,{children:[s.jsxs(zs,{className:"flex items-center gap-2",children:[s.jsx(Hj,{className:"w-5 h-5"}),"Create Auth User"]}),s.jsxs(Wa,{children:["Create a new authentication user account. This creates a login account only (not a team member profile).",s.jsx("br",{}),s.jsxs("span",{className:"text-xs text-muted-foreground mt-1 block",children:["Default password: ",s.jsx("code",{className:"font-mono bg-muted px-1 rounded",children:"TampaAPP@2026"})]})]})]}),s.jsx(j5,{...l,children:s.jsxs("form",{onSubmit:l.handleSubmit(u),className:"space-y-4",children:[s.jsx("div",{className:"text-sm text-muted-foreground mb-4",children:"Fill in the required fields marked with * to send an invitation."}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(ts,{control:l.control,name:"email",render:({field:f})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Email Address *"}),s.jsx(Wn,{children:s.jsx(St,{type:"email",placeholder:"user@example.com",...f,disabled:i})}),s.jsx(Ps,{children:"Invitation will be sent to this email"}),s.jsx(rs,{})]})}),s.jsx(ts,{control:l.control,name:"displayName",render:({field:f})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Display Name *"}),s.jsx(Wn,{children:s.jsx(St,{type:"text",placeholder:"John Doe",...f,disabled:i})}),s.jsx(Ps,{children:"Name shown in the app"}),s.jsx(rs,{})]})})]}),s.jsx(ts,{control:l.control,name:"role",render:({field:f})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Role *"}),s.jsxs(Nr,{onValueChange:f.onChange,defaultValue:f.value,disabled:i,children:[s.jsx(Wn,{children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select a role"})})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"admin",children:"Admin"}),s.jsx(qe,{value:"manager",children:"Manager"}),s.jsx(qe,{value:"leader_chef",children:"Leader Chef"}),s.jsx(qe,{value:"cook",children:"Cook"}),s.jsx(qe,{value:"barista",children:"Barista"})]})]}),s.jsx(Ps,{children:"User's role determines their permissions in the system"}),s.jsx(rs,{})]})}),s.jsxs(Zo,{children:[s.jsx(we,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),s.jsx(we,{type:"submit",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Sending Invitation..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Hj,{className:"w-4 h-4 mr-2"}),"Send Invitation"]})})]})]})})]})})}const Mee=Px({authUserId:za().min(1,"Please select an auth user"),displayName:za().min(2,"Display name must be at least 2 characters"),role:pp(["admin","manager","leader_chef","cook","barista"],{required_error:"Please select a role"}),position:za().optional(),phone:za().optional(),email:za().email("Invalid email").optional().or($X("")),departmentId:za().optional()});function Fee({open:e,onOpenChange:t,onSuccess:r}){const{toast:n}=Er(),{context:a}=nd(),[i,o]=x.useState(!1),[l,u]=x.useState([]),[f,h]=x.useState(!1),[p,v]=x.useState([]),[m,N]=x.useState(!1),w=y5({resolver:w5(Mee),defaultValues:{authUserId:"",displayName:"",role:void 0,position:"",phone:"",email:"",departmentId:""}});x.useEffect(()=>{(async()=>{if(!(!e||!a?.organization_id)){h(!0);try{const{data:C,error:k}=await Ae.from("profiles").select("user_id, display_name, email").eq("organization_id",a.organization_id).order("display_name");if(k)throw k;const E=(C||[]).map(I=>({id:I.user_id,email:I.email||"No email",display_name:I.display_name||"No name"}));u(E)}catch(C){console.error("Error fetching auth users:",C),n({title:"Error loading users",description:"Could not load auth users. Please try again.",variant:"destructive"})}finally{h(!1)}}})()},[e,a?.organization_id]),x.useEffect(()=>{(async()=>{if(!(!e||!a?.organization_id)){N(!0);try{const{data:C,error:k}=await Ae.from("departments").select("id, name").eq("organization_id",a.organization_id).order("name");if(k)throw k;v(C||[])}catch(C){console.error("Error fetching departments:",C)}finally{N(!1)}}})()},[e,a?.organization_id]);const j=async _=>{if(!a?.organization_id){n({title:"Error",description:"No organization context found. Please log in again.",variant:"destructive"});return}o(!0);try{const{data:C,error:k}=await Ae.from("team_members").insert({display_name:_.displayName,organization_id:a.organization_id,role_type:_.role,position:_.position||null,phone:_.phone?Vp(_.phone):null,email:_.email||null,department_id:_.departmentId||null,auth_role_id:_.authUserId,is_active:!0,profile_complete:!1}).select().single();if(k)throw k;n({title:"Team Member Created",description:`${_.displayName} has been linked to the auth user and can now login.`}),w.reset(),r&&r(),t(!1)}catch(C){console.error("Error creating team member:",C),n({title:"Error",description:C.message||"Failed to create team member. Please try again.",variant:"destructive"})}finally{o(!1)}};return s.jsx(ea,{open:e,onOpenChange:t,children:s.jsxs(Us,{className:"sm:max-w-[900px] max-h-[85vh] overflow-y-auto",children:[s.jsxs($s,{children:[s.jsxs(zs,{className:"flex items-center gap-2",children:[s.jsx(Bi,{className:"w-5 h-5"}),"Create Team Member"]}),s.jsx(Wa,{children:"Link an existing auth user to a team member profile. This allows them to login and use the system with their assigned role."})]}),s.jsx(j5,{...w,children:s.jsxs("form",{onSubmit:w.handleSubmit(j),className:"space-y-4",children:[s.jsx(ts,{control:w.control,name:"authUserId",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Select Auth User *"}),s.jsxs(Nr,{onValueChange:_.onChange,defaultValue:_.value,disabled:i||f,children:[s.jsx(Wn,{children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select an auth user to link"})})}),s.jsx(Cr,{children:l.map(C=>s.jsxs(qe,{value:C.id,children:[C.display_name||"No name"," - ",C.email]},C.id))})]}),s.jsx(Ps,{children:f?"Loading available users...":`${l.length} auth users available in your organization`}),s.jsx(rs,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(ts,{control:w.control,name:"displayName",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Display Name *"}),s.jsx(Wn,{children:s.jsx(St,{type:"text",placeholder:"John Doe",..._,disabled:i})}),s.jsx(Ps,{children:"Name shown in the app"}),s.jsx(rs,{})]})}),s.jsx(ts,{control:w.control,name:"role",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Role *"}),s.jsxs(Nr,{onValueChange:_.onChange,defaultValue:_.value,disabled:i,children:[s.jsx(Wn,{children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select a role"})})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"admin",children:"Admin"}),s.jsx(qe,{value:"manager",children:"Manager"}),s.jsx(qe,{value:"leader_chef",children:"Leader Chef"}),s.jsx(qe,{value:"cook",children:"Cook"}),s.jsx(qe,{value:"barista",children:"Barista"})]})]}),s.jsx(Ps,{children:"Team member's role"}),s.jsx(rs,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(ts,{control:w.control,name:"position",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Position (Optional)"}),s.jsx(Wn,{children:s.jsx(St,{type:"text",placeholder:"Line Cook, Sous Chef, etc.",..._,disabled:i})}),s.jsx(Ps,{children:"Job title or position"}),s.jsx(rs,{})]})}),s.jsx(ts,{control:w.control,name:"departmentId",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Department (Optional)"}),s.jsxs(Nr,{onValueChange:_.onChange,defaultValue:_.value,disabled:i||m,children:[s.jsx(Wn,{children:s.jsx(_r,{children:s.jsx(Sr,{placeholder:"Select a department"})})}),s.jsx(Cr,{children:p.map(C=>s.jsx(qe,{value:C.id,children:C.name},C.id))})]}),s.jsx(Ps,{children:m?"Loading...":"Team department"}),s.jsx(rs,{})]})})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsx(ts,{control:w.control,name:"email",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Email (Optional)"}),s.jsx(Wn,{children:s.jsx(St,{type:"email",placeholder:"user@example.com",..._,disabled:i})}),s.jsx(Ps,{children:"Contact email only"}),s.jsx(rs,{})]})}),s.jsx(ts,{control:w.control,name:"phone",render:({field:_})=>s.jsxs(qn,{children:[s.jsx(Vn,{children:"Phone (Optional)"}),s.jsx(Wn,{children:s.jsx(St,{type:"tel",placeholder:"(123) 456-7890",..._,onChange:C=>_.onChange(Th(C.target.value)),disabled:i})}),s.jsx(Ps,{children:"Contact phone number"}),s.jsx(rs,{})]})})]}),s.jsxs(Zo,{children:[s.jsx(we,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:i,children:"Cancel"}),s.jsx(we,{type:"submit",disabled:i,children:i?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Creating..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Create Team Member"]})})]})]})})]})})}function Bee(){const e=mf(),{toast:t}=Er(),{context:r,loading:n}=nd(),{canManageTeamMembers:a}=rd(),{checkTeamMemberLimit:i,upgradeModalProps:o}=p0(),[l,u]=x.useState({}),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,N]=x.useState("team"),[w,j]=x.useState(!1),[_,C]=x.useState(!1),{users:k,loading:E,error:I,fetchUsers:D}=R0(r?.organization_id),{teamMembers:O,loading:F,error:T,fetchTeamMembers:z}=N5();x.useEffect(()=>{r?.organization_id&&D(l)},[r?.organization_id,l,D]),x.useEffect(()=>{r?.organization_id&&z({organization_id:r.organization_id})},[r?.organization_id]);const U=()=>{m==="users"?D(l):r?.organization_id&&z({organization_id:r.organization_id}),t({title:"Refreshed",description:`${m==="users"?"Auth users":"Team members"} list has been refreshed.`})},B=()=>{u({})},K=L=>{e(`/people/${L.user_id}`)},V=L=>{h(L)},de=L=>{v(L)},se=()=>{r?.organization_id&&D(l)},Y=()=>{r?.organization_id&&z({organization_id:r.organization_id}),v(null),t({title:"Success",description:"Team member updated successfully."})},W=()=>{r?.organization_id&&(D(l),z({organization_id:r.organization_id})),t({title:"Success",description:"User created successfully. They can now log in."})},ee=()=>{r?.organization_id&&z({organization_id:r.organization_id}),t({title:"Success",description:"Team member created successfully."})},ge=()=>{const L=k.length;i(L)&&j(!0)},re=()=>{const L=O.length;i(L)&&C(!0)};return n?s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(rt,{children:s.jsx(st,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})}):(console.log("[PeopleModule] User context:",r),r?.organization_id?s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"People"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your team members and user accounts"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(we,{variant:"outline",size:"icon",onClick:U,disabled:m==="users"?E:F,children:s.jsx(yp,{className:`w-4 h-4 ${(m==="users"?E:F)?"animate-spin":""}`})}),a&&s.jsxs(s.Fragment,{children:[m==="users"&&s.jsxs(we,{onClick:ge,children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add User"]}),m==="team"&&s.jsxs(we,{onClick:re,children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})]})]})]}),s.jsx(ss,{}),s.jsxs(fg,{value:m,onValueChange:L=>N(L),className:"w-full",children:[s.jsxs(um,{className:"grid w-full max-w-md grid-cols-2",children:[s.jsxs(ia,{value:"team",className:"flex items-center gap-2",children:[s.jsx(Gv,{className:"w-4 h-4"}),"Team Members (",O.length,")"]}),s.jsxs(ia,{value:"users",className:"flex items-center gap-2",children:[s.jsx(Bi,{className:"w-4 h-4"}),"Auth Users (",k.length,")"]})]}),s.jsx(oa,{value:"team",className:"space-y-6 mt-6",children:s.jsx(rt,{children:s.jsxs(st,{className:"p-6",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Operational team members with PIN-based access for daily work (cooking, serving, cleaning, etc.)"}),T&&s.jsxs("div",{className:"p-4 border border-destructive rounded-md mb-4",children:[s.jsxs("p",{className:"text-sm text-destructive",children:["Error loading team members: ",T.message||String(T)]}),s.jsx(we,{variant:"outline",size:"sm",onClick:U,className:"mt-2",children:"Try Again"})]}),F&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(yp,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading team members..."})]}),!F&&!T&&s.jsx("div",{className:"space-y-3",children:O.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Gv,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No team members found"}),a&&s.jsxs(we,{onClick:()=>C(!0),className:"mt-4",children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add First Team Member"]})]}):O.map(L=>s.jsx(rt,{className:"p-4 hover:bg-accent/50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"font-semibold",children:L.display_name}),s.jsx("span",{className:"text-sm px-2 py-1 rounded bg-primary/10 text-primary",children:L.role_type}),!L.is_active&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-destructive/10 text-destructive",children:"Inactive"}),!L.profile_complete&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-warning/10 text-warning",children:"Incomplete"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:L.position}),L.email&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:L.email})]}),a&&s.jsx(we,{variant:"outline",size:"sm",onClick:()=>de(L),children:"Edit"})]})},L.id))})]})})}),s.jsxs(oa,{value:"users",className:"space-y-6 mt-6",children:[s.jsx(Nee,{users:k}),s.jsx(ss,{}),s.jsx(See,{filters:l,onFilterChange:u,onClearFilters:B}),I&&s.jsx(rt,{className:"border-destructive",children:s.jsxs(st,{className:"p-6",children:[s.jsxs("p",{className:"text-destructive",children:["Error loading users: ",I.message||String(I)]}),s.jsx(we,{variant:"outline",size:"sm",onClick:U,className:"mt-4",children:"Try Again"})]})}),s.jsx(_ee,{users:k,loading:E,onViewProfile:K,onEdit:V})]})]}),f&&s.jsx(vL,{open:!!f,onOpenChange:L=>!L&&h(null),user:f,onSuccess:se}),p&&s.jsx(Dee,{open:!!p,onOpenChange:L=>!L&&v(null),teamMember:p,onSuccess:Y}),s.jsx(Oee,{open:w,onOpenChange:j,onSuccess:W}),s.jsx(Fee,{open:_,onOpenChange:C,onSuccess:ee}),s.jsx(j0,{...o})]}):s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(rt,{children:s.jsxs(st,{className:"p-12 text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"Please log in to view team members."}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Debug: Context loaded = ",n?"loading":"loaded",", Organization ID = ",r?.organization_id||"null"]})]})})}))}function Uee(){return s.jsx(Bee,{})}function $ee(e,t){const[r,n]=x.useState([]),[a,i]=x.useState(!0),[o,l]=x.useState(null),[u,f]=x.useState(0),h=x.useCallback(async E=>{try{i(!0),l(null);let I=Ae.from("feed_items").select(`
          *,
          created_by_user:profiles!feed_items_created_by_fkey(user_id, display_name),
          related_user:profiles!feed_items_target_user_id_fkey(user_id, display_name),
          feed_reads(*)
        `).order("created_at",{ascending:!1});t&&(I=I.eq("organization_id",t)),E&&(E.channel&&(I=I.eq("channel",E.channel)),E.type&&(I=I.eq("type",E.type)),E.priority&&(I=I.eq("priority",E.priority)),E.unread_only&&e&&(I=I.not("read_by","cs",`{${e}}`)),E.date_from&&(I=I.gte("created_at",E.date_from)),E.date_to&&(I=I.lte("created_at",E.date_to)));const{data:D,error:O}=await I;if(O)throw O;if(n(D||[]),e&&D){const F=D.filter(T=>!T.feed_reads?.some(z=>z.user_id===e)).length;f(F)}}catch(I){console.error("Error fetching feed:",I),l(I)}finally{i(!1)}},[e,t]),p=async E=>{try{const{data:I,error:D}=await Ae.from("feed_items").insert({...E,organization_id:t}).select(`
          *,
          created_by_user:profiles!feed_items_created_by_fkey(user_id, display_name),
          related_user:profiles!feed_items_target_user_id_fkey(user_id, display_name),
          feed_reads(*)
        `).single();if(D)throw D;return I&&(n(O=>[I,...O]),e&&!I.feed_reads?.some(O=>O.user_id===e)&&f(O=>O+1)),I}catch(I){return console.error("Error creating feed item:",I),l(I),null}},v=async E=>{if(!e)return!1;try{const I=r.find(F=>F.id===E);if(!I)return!1;if(I.feed_reads?.some(F=>F.user_id===e))return!0;const{error:O}=await Ae.from("feed_reads").insert({feed_item_id:E,user_id:e,read_at:new Date().toISOString()});if(O)throw O;return n(F=>F.map(T=>T.id===E?{...T,feed_reads:[...T.feed_reads||[],{user_id:e,read_at:new Date().toISOString()}]}:T)),f(F=>Math.max(0,F-1)),!0}catch(I){return console.error("Error marking feed item as read:",I),l(I),!1}},m=async E=>{if(!e)return!1;try{let I=Ae.from("feed_items").select("id, feed_reads(user_id)");t&&(I=I.eq("organization_id",t)),E&&(I=I.eq("channel",E));const{data:D,error:O}=await I;if(O)throw O;const F=D?.filter(U=>!U.feed_reads?.some(B=>B.user_id===e));if(!F||F.length===0)return!0;const T=F.map(U=>({feed_item_id:U.id,user_id:e,read_at:new Date().toISOString()})),{error:z}=await Ae.from("feed_reads").insert(T);if(z)throw z;return n(U=>U.map(B=>({...B,feed_reads:[...B.feed_reads||[],{user_id:e,read_at:new Date().toISOString()}]}))),f(0),!0}catch(I){return console.error("Error marking all as read:",I),l(I),!1}},N=async E=>{try{const{error:I}=await Ae.from("feed_items").delete().eq("id",E);if(I)throw I;const D=r.find(O=>O.id===E);return D&&e&&!D.feed_reads?.some(O=>O.user_id===e)&&f(O=>Math.max(0,O-1)),n(O=>O.filter(F=>F.id!==E)),!0}catch(I){return console.error("Error deleting feed item:",I),l(I),!1}},w=E=>r.filter(I=>I.channel===E),j=()=>e?r.filter(E=>!E.feed_reads?.some(I=>I.user_id===e)):[],_=E=>r.filter(I=>I.type===E),C=E=>r.filter(I=>I.priority===E),k=E=>e&&r.find(D=>D.id===E)?.feed_reads?.some(D=>D.user_id===e)||!1;return x.useEffect(()=>{t&&h()},[t,h]),x.useEffect(()=>{if(!t)return;const E=Ae.channel(`feed:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"feed_items",filter:`organization_id=eq.${t}`},I=>{if(I.eventType==="INSERT")n(D=>[I.new,...D]),e&&f(D=>D+1);else if(I.eventType==="UPDATE")n(D=>D.map(O=>O.id===I.new.id?{...O,...I.new}:O));else if(I.eventType==="DELETE"){const D=r.find(O=>O.id===I.old.id);D&&e&&!D.feed_reads?.some(O=>O.user_id===e)&&f(O=>Math.max(0,O-1)),n(O=>O.filter(F=>F.id!==I.old.id))}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"feed_reads",filter:e?`user_id=eq.${e}`:void 0},I=>{n(D=>D.map(O=>O.id===I.new.feed_item_id?{...O,feed_reads:[...O.feed_reads||[],I.new]}:O)),f(D=>Math.max(0,D-1))}).subscribe();return()=>{Ae.removeChannel(E)}},[t,e,r]),{feedItems:r,loading:a,error:o,unreadCount:u,fetchFeed:h,createFeedItem:p,markAsRead:v,markAllAsRead:m,deleteFeedItem:N,getByChannel:w,getUnreadItems:j,getByType:_,getByPriority:C,isRead:k,refresh:h}}function zee({item:e,currentUserId:t,onMarkAsRead:r,onMarkAsUnread:n,onDelete:a,onClick:i}){const[o,l]=x.useState(!1),u=t?e.feed_reads?.some(E=>E.user_id===t):!1,f=()=>{switch(e.type){case"task_delegated":return{icon:Uk,label:"Task Assigned",bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",badgeVariant:"default"};case"pending_docs":return{icon:yD,label:"Document Alert",bgColor:"bg-amber-50",borderColor:"border-amber-200",iconColor:"text-amber-600",badgeVariant:"secondary"};case"custom_note":return{icon:Hv,label:"Announcement",bgColor:"bg-purple-50",borderColor:"border-purple-200",iconColor:"text-purple-600",badgeVariant:"outline"};case"maintenance":return{icon:FD,label:"Maintenance",bgColor:"bg-orange-50",borderColor:"border-orange-200",iconColor:"text-orange-600",badgeVariant:"secondary"};case"system":return{icon:Bc,label:"System",bgColor:"bg-gray-50",borderColor:"border-gray-200",iconColor:"text-gray-600",badgeVariant:"outline"};default:return{icon:Hv,label:"Info",bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",badgeVariant:"default"}}},h=()=>{switch(e.priority){case"critical":return{badge:" Critical",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-900"};case"high":return{badge:" High",bgColor:"bg-amber-50",borderColor:"border-amber-300",textColor:"text-amber-900"};case"normal":return{badge:"Normal",bgColor:"",borderColor:"",textColor:""};case"low":return{badge:"Low",bgColor:"",borderColor:"",textColor:"text-muted-foreground"};default:return{badge:"Normal",bgColor:"",borderColor:"",textColor:""}}},p=f(),v=h(),m=p.icon,N=e.message.length>150,w=N&&!o?e.message.substring(0,150)+"...":e.message,j=E=>E.split(" ").map(I=>I[0]).join("").toUpperCase().substring(0,2),_=e.creator?.display_name||"System",C=e.creator?.avatar_url,k=t&&(e.created_by===t||t==="admin");return s.jsxs(rt,{className:Oe("transition-all hover:shadow-md cursor-pointer",!u&&"border-l-4 border-l-primary",v.bgColor,v.borderColor&&`border-2 ${v.borderColor}`),onClick:()=>i?.(e),children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:Oe("p-2 rounded-lg shrink-0",p.bgColor,p.borderColor&&`border ${p.borderColor}`),children:s.jsx(m,{className:Oe("w-5 h-5",p.iconColor)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start gap-2 flex-wrap mb-1",children:[s.jsx("h3",{className:Oe("font-semibold text-base leading-tight",v.textColor),children:e.title}),!u&&s.jsx(ut,{variant:"default",className:"h-5 text-xs shrink-0",children:"New"})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[s.jsx(ut,{variant:p.badgeVariant,className:"text-xs",children:p.label}),e.priority!=="normal"&&s.jsx(ut,{variant:"outline",className:"text-xs",children:v.badge}),e.channel&&s.jsxs(ut,{variant:"secondary",className:"text-xs capitalize",children:["#",e.channel]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsxs(of,{className:"w-5 h-5",children:[s.jsx(b0,{src:C,alt:_}),s.jsx(lf,{className:"text-xs",children:j(_)})]}),s.jsx("span",{className:"font-medium",children:_}),s.jsx("span",{children:""}),s.jsx("span",{children:Ip(new Date(e.created_at),{addSuffix:!0})})]})]})]}),s.jsxs(l2,{children:[s.jsx(c2,{asChild:!0,children:s.jsx(we,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8",onClick:E=>E.stopPropagation(),children:s.jsx(zk,{className:"w-4 h-4"})})}),s.jsxs(a0,{align:"end",children:[!u&&r&&s.jsxs(Pl,{onClick:E=>{E.stopPropagation(),r(e.id)},children:[s.jsx(Js,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),u&&n&&s.jsxs(Pl,{onClick:E=>{E.stopPropagation(),n(e.id)},children:[s.jsx(Kv,{className:"w-4 h-4 mr-2"}),"Mark as Unread"]}),k&&a&&s.jsxs(Pl,{onClick:E=>{E.stopPropagation(),confirm("Are you sure you want to delete this feed item?")&&a(e.id)},className:"text-destructive focus:text-destructive",children:[s.jsx(Dl,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),s.jsxs(st,{className:"pt-0",children:[s.jsx("p",{className:Oe("text-sm whitespace-pre-wrap",v.textColor||"text-foreground"),children:w}),N&&s.jsx(we,{variant:"link",size:"sm",className:"p-0 h-auto mt-2",onClick:E=>{E.stopPropagation(),l(!o)},children:o?"Show less":"Show more"}),e.related_entity_type&&e.related_entity_id&&s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsxs(we,{variant:"outline",size:"sm",onClick:E=>{E.stopPropagation(),window.location.href=`/${e.related_entity_type}s/${e.related_entity_id}`},children:[s.jsx(Mc,{className:"w-4 h-4 mr-2"}),"View ",e.related_entity_type]})}),e.expires_at&&new Date(e.expires_at)>new Date&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(is,{className:"w-3 h-3"}),s.jsxs("span",{children:["Expires"," ",Ip(new Date(e.expires_at),{addSuffix:!0})]})]})]})]})}function qee({items:e,loading:t,currentUserId:r,onMarkAsRead:n,onMarkAsUnread:a,onDelete:i,onItemClick:o,onLoadMore:l,hasMore:u=!1,loadingMore:f=!1}){return t?s.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(h=>s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Ur,{className:"w-12 h-12 rounded-lg shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{className:"h-5 w-32"}),s.jsx(Ur,{className:"h-5 w-16"})]}),s.jsx(Ur,{className:"h-4 w-full"}),s.jsx(Ur,{className:"h-4 w-3/4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ur,{className:"w-6 h-6 rounded-full"}),s.jsx(Ur,{className:"h-3 w-24"}),s.jsx(Ur,{className:"h-3 w-16"})]})]})]})})},h))}):!e||e.length===0?s.jsx(rt,{className:"border-2 border-dashed",children:s.jsxs(st,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:s.jsx(SD,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No feed items"}),s.jsx("p",{className:"text-muted-foreground text-center max-w-sm",children:"There are no notifications or updates to show at the moment. Check back later for new activity."})]})}):s.jsxs("div",{className:"space-y-4",children:[e.map(h=>s.jsx(zee,{item:h,currentUserId:r,onMarkAsRead:n,onMarkAsUnread:a,onDelete:i,onClick:o},h.id)),u&&l&&s.jsx("div",{className:"flex justify-center pt-4",children:s.jsx(we,{variant:"outline",onClick:l,disabled:f,className:"min-w-[200px]",children:f?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading more..."]}):"Load More"})}),!u&&e.length>10&&s.jsx("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"You've reached the end of the feed"})]})}function Vee({items:e,currentUserId:t}){const r=e.length,n=t?e.filter(p=>!p.feed_reads?.some(v=>v.user_id===t)):[],a=n.length,i=n.filter(p=>p.priority==="critical").length,o=n.filter(p=>p.priority==="high").length;n.filter(p=>p.priority==="normal").length;const l=e.filter(p=>p.type==="task_delegated").length,u=e.filter(p=>p.type==="pending_docs").length,f=e.filter(p=>p.type==="maintenance").length,h=r>0?Math.round((r-a)/r*100):0;return s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Unread"}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("p",{className:"text-3xl font-bold",children:a}),r>0&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",r]})]})]}),s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:s.jsx(pD,{className:"w-6 h-6 text-primary"})})]})})}),s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Urgent"}),s.jsxs("div",{className:"flex items-center gap-3",children:[i>0&&s.jsxs(ut,{variant:"destructive",className:"text-base px-2 py-1 font-bold",children:[" ",i]}),o>0&&s.jsxs(ut,{variant:"secondary",className:"text-base px-2 py-1 font-bold bg-amber-100 text-amber-900",children:[" ",o]}),i===0&&o===0&&s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"0"})]})]}),s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(Hr,{className:"w-6 h-6 text-red-600"})})]})})}),s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"By Type"}),s.jsxs("div",{className:"space-y-1",children:[l>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:l}),s.jsx("span",{className:"text-muted-foreground",children:"Tasks"})]}),u>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:u}),s.jsx("span",{className:"text-muted-foreground",children:"Docs"})]}),f>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:f}),s.jsx("span",{className:"text-muted-foreground",children:"Maintenance"})]}),l===0&&u===0&&f===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No items"})]})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Hv,{className:"w-6 h-6 text-blue-600"})})]})})}),s.jsx(rt,{children:s.jsx(st,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Read Progress"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("p",{className:"text-3xl font-bold",children:[h,"%"]})}),s.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-green-600 transition-all duration-300",style:{width:`${h}%`}})})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Lh,{className:"w-6 h-6 text-green-600"})})]})})})]})}function Wee({filters:e,onFilterChange:t,onClearFilters:r}){const[n,a]=x.useState(""),[i,o]=x.useState(!1),l=[e.channel,e.type,e.priority,e.unread_only,e.date_from,e.date_to].filter(Boolean).length,u=m=>{t({...e,channel:m==="all"?void 0:m})},f=m=>{t({...e,type:m==="all"?void 0:m})},h=m=>{t({...e,priority:m==="all"?void 0:m})},p=()=>{t({...e,unread_only:!e.unread_only})},v=()=>{console.log("Searching for:",n)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(St,{placeholder:"Search feed...",value:n,onChange:m=>a(m.target.value),onKeyDown:m=>m.key==="Enter"&&v(),className:"pl-9"})]})}),s.jsxs(Nr,{value:e.channel||"all",onValueChange:u,children:[s.jsx(_r,{className:"w-[150px]",children:s.jsx(Sr,{placeholder:"Channel"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Channels"}),s.jsx(qe,{value:"general",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"General"})]})}),s.jsx(qe,{value:"baristas",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Baristas"})]})}),s.jsx(qe,{value:"cooks",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Cooks"})]})}),s.jsx(qe,{value:"maintenance",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Maintenance"})]})})]})]}),s.jsx(we,{variant:e.unread_only?"default":"outline",size:"default",onClick:p,className:"gap-2",children:e.unread_only?"Unread Only":"All"}),s.jsxs(we,{variant:"outline",size:"icon",onClick:()=>o(!i),className:"relative",children:[s.jsx(Fc,{className:"w-4 h-4"}),l>0&&s.jsx(ut,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs",children:l})]}),l>0&&s.jsxs(we,{variant:"ghost",size:"sm",onClick:r,className:"gap-1",children:[s.jsx(hn,{className:"w-4 h-4"}),"Clear"]})]}),i&&s.jsxs(s.Fragment,{children:[s.jsx(ss,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Type"}),s.jsxs(Nr,{value:e.type||"all",onValueChange:f,children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"All Types"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Types"}),s.jsx(qe,{value:"task_delegated",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Task Assigned"})]})}),s.jsx(qe,{value:"pending_docs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Document Alert"})]})}),s.jsx(qe,{value:"custom_note",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Announcement"})]})}),s.jsx(qe,{value:"maintenance",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Maintenance"})]})}),s.jsx(qe,{value:"system",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"System"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Priority"}),s.jsxs(Nr,{value:e.priority||"all",onValueChange:h,children:[s.jsx(_r,{children:s.jsx(Sr,{placeholder:"All Priorities"})}),s.jsxs(Cr,{children:[s.jsx(qe,{value:"all",children:"All Priorities"}),s.jsx(qe,{value:"critical",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Critical"})]})}),s.jsx(qe,{value:"high",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"High"})]})}),s.jsx(qe,{value:"normal",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Normal"})]})}),s.jsx(qe,{value:"low",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Low"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),s.jsx(we,{variant:"outline",className:"w-full justify-start",children:" Select Range"})]})]})]}),l>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),e.channel&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Channel: ",e.channel,s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>u("all")})]}),e.type&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Type: ",e.type.replace("_"," "),s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("all")})]}),e.priority&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Priority: ",e.priority,s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:()=>h("all")})]}),e.unread_only&&s.jsxs(ut,{variant:"secondary",className:"gap-1",children:["Unread Only",s.jsx(hn,{className:"w-3 h-3 cursor-pointer",onClick:p})]})]})]})}function Hee({organizationId:e,userRole:t}){const[r,n]=x.useState([]),[a,i]=x.useState(!1),[o,l]=x.useState(!1),u=["admin","manager","owner"].includes(t||"");x.useEffect(()=>{u&&e&&f()},[e,u]);const f=async()=>{i(!0);try{const{data:p,error:v}=await Ae.from("team_members").select("*").eq("organization_id",e).eq("is_active",!0).eq("profile_complete",!1).order("display_name",{ascending:!0});if(v)throw v;n(p||[])}catch(p){console.error("[IncompleteProfilesAlert] Error fetching incomplete profiles:",p)}finally{i(!1)}};if(!u||r.length===0)return null;const h=p=>{const v=[p.display_name,p.email,p.phone,p.position,p.hire_date,p.date_of_birth,p.address,p.emergency_contact_name,p.emergency_contact_phone],m=v.filter(N=>N).length;return Math.round(m/v.length*100)};return s.jsxs(rt,{className:"border-blue-500 bg-blue-50 dark:bg-blue-950/20",children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Bi,{className:"h-5 w-5 text-blue-600"}),s.jsx(Qt,{className:"text-lg",children:"Incomplete Team Profiles"}),s.jsx(ut,{variant:"secondary",className:"ml-2",children:r.length})]}),s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>l(!o),children:o?s.jsx(Fk,{className:"h-4 w-4"}):s.jsx(Tb,{className:"h-4 w-4"})})]})}),o&&s.jsxs(st,{children:[s.jsxs(Oo,{className:"mb-4 bg-blue-100 border-blue-300 dark:bg-blue-900/30",children:[s.jsx(Hr,{className:"h-4 w-4 text-blue-600"}),s.jsx(Mo,{className:"text-blue-900 dark:text-blue-100",children:"The following team members have incomplete profiles. Please follow up to ensure all required information is provided."})]}),a?s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading team members..."}):s.jsx("div",{className:"space-y-3",children:r.map(p=>{const v=h(p);return s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"font-medium",children:p.display_name||"No name"}),s.jsx(ut,{variant:"secondary",className:"text-xs",style:{backgroundColor:gx[p.role_type]+"20",color:gx[p.role_type]},children:t5[p.role_type]})]}),p.position&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:p.position}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-muted-foreground",children:"Profile completion"}),s.jsxs("span",{className:"font-medium",children:[v,"%"]})]}),s.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${v}%`}})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[s.jsx(jn,{className:"h-3 w-3"}),s.jsxs("span",{children:["Missing: ",[!p.date_of_birth&&"DOB",!p.address&&"Address",!p.emergency_contact_name&&"Emergency Contact"].filter(Boolean).join(", ")||"Basic info only"]})]})]}),s.jsx(we,{variant:"outline",size:"sm",onClick:()=>{console.log("View profile:",p.id)},children:"View Profile"})]},p.id)})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between pt-4 border-t",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(Js,{className:"h-4 w-4 inline mr-1"}),"Follow up with team members to complete profiles"]}),s.jsx(we,{variant:"default",size:"sm",onClick:()=>{console.log("Navigate to People module")},children:"Go to People Module"})]})]})]})}function Gee(){const{toast:e}=Er(),{context:t,loading:r}=nd(),[n,a]=x.useState({}),[i,o]=x.useState(null),[l,u]=x.useState(!1),{feedItems:f,loading:h,error:p,fetchFeed:v,markAsRead:m,deleteFeedItem:N}=$ee(t?.user_id,t?.organization_id);x.useEffect(()=>{t?.organization_id&&v(n)},[t?.organization_id,n,v]);const w=D=>{o(D),e({title:"Team Member Selected",description:`Viewing feed as ${D.display_name}`})},j=async D=>{if(!(i?.auth_role_id||t?.user_id))return;const F=await m(D);e(F?{title:"Marked as read",description:"Feed item has been marked as read."}:{title:"Error",description:"Failed to mark item as read.",variant:"destructive"})},_=async D=>{e({title:"Coming soon",description:"Mark as unread functionality will be added."})},C=async D=>{const O=await N(D);e(O?{title:"Deleted",description:"Feed item has been deleted."}:{title:"Error",description:"Failed to delete feed item.",variant:"destructive"})},k=()=>{v(n),e({title:"Refreshed",description:"Feed has been refreshed."})},E=()=>{a({})},I=D=>{const O=i?.auth_role_id||t?.user_id;D.feed_reads?.some(F=>F.user_id===O)||j(D.id)};return r?s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(rt,{children:s.jsx(st,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})}):t?.organization_id?s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsx(zh,{open:l,onOpenChange:u,onSelectUser:w,organizationId:t?.organization_id,title:"Select Team Member",description:"Choose who is viewing the feed"}),i&&!i.profile_complete&&s.jsx(rt,{className:"border-amber-500 bg-amber-50 dark:bg-amber-950/20",children:s.jsx(st,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Hr,{className:"h-5 w-5 text-amber-600 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-100",children:"Profile Incomplete"}),s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 mt-1",children:[i.display_name,"'s profile is not complete. Please update personal information, emergency contacts, and required certificates in the People module."]})]}),s.jsx(we,{variant:"outline",size:"sm",className:"shrink-0",onClick:()=>e({title:"Navigate to People",description:"Open People module to complete profile"}),children:"Complete Profile"})]})})}),s.jsx(Hee,{organizationId:t?.organization_id||"",userRole:t?.user_role}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Feed"}),s.jsx("p",{className:"text-muted-foreground",children:"Stay updated with notifications and activity feed"})]}),i&&s.jsxs(ut,{variant:"secondary",className:"h-fit",children:[s.jsx(Il,{className:"w-3 h-3 mr-1"}),i.display_name]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(we,{variant:"outline",onClick:()=>u(!0),children:[s.jsx(Il,{className:"w-4 h-4 mr-2"}),i?"Change User":"Select User"]}),s.jsx(we,{variant:"outline",size:"icon",onClick:k,disabled:h,children:s.jsx(yp,{className:`w-4 h-4 ${h?"animate-spin":""}`})}),(t?.user_role==="admin"||t?.user_role==="manager"||t?.user_role==="owner")&&s.jsxs(we,{onClick:()=>e({title:"Coming soon!",description:"Create feed item functionality will be added."}),children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Create"]})]})]}),s.jsx(Vee,{items:f,currentUserId:i?.auth_role_id||t?.user_id}),s.jsx(ss,{}),s.jsx(Wee,{filters:n,onFilterChange:a,onClearFilters:E}),s.jsx(ss,{}),p&&s.jsx(rt,{className:"border-destructive",children:s.jsxs(st,{className:"p-6 text-center",children:[s.jsxs("p",{className:"text-destructive",children:["Error loading feed: ",p.message]}),s.jsx(we,{onClick:k,variant:"outline",className:"mt-4",children:"Try Again"})]})}),!p&&s.jsx(qee,{items:f,loading:h,currentUserId:i?.auth_role_id||t?.user_id,onMarkAsRead:j,onMarkAsUnread:_,onDelete:C,onItemClick:I})]}):s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(rt,{children:s.jsx(st,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your feed."})})})})}function Kee(){return s.jsx(Gee,{})}const Pv=e=>{const t=new Date,r=new Date(e),n=Math.floor((r.getTime()-t.getTime())/(1e3*60*60));return n<0?{status:"expired",hoursUntilExpiry:n,message:`Expired ${Math.abs(n)}h ago`}:n<=24?{status:"warning",hoursUntilExpiry:n,message:`${n}h left`}:{status:"good",hoursUntilExpiry:n,message:`${Math.floor(n/24)}d left`}},Yee=e=>{switch(e){case"expired":return"bg-destructive/10 border-destructive";case"warning":return"bg-warning/10 border-warning";case"good":return"bg-success/10 border-success"}},Qee=e=>{switch(e){case"expired":return s.jsx(Ix,{className:"w-5 h-5 text-destructive"});case"warning":return s.jsx(is,{className:"w-5 h-5 text-warning"});case"good":return s.jsx(Cl,{className:"w-5 h-5 text-success"})}},Jee=e=>{switch(e){case"expired":return"destructive";case"warning":return"secondary";case"good":return"outline"}};function Zee(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:a}=Er(),i=async()=>{try{const{data:l,error:u}=await Ae.from("prepared_items").select(`
          *,
          recipes (
            name,
            category
          )
        `).order("expires_at",{ascending:!0});if(u){console.error("Error fetching prepared items:",u),a({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"});return}t(l||[])}catch(l){console.error("Error:",l),a({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"})}finally{n(!1)}};if(x.useEffect(()=>{i();const l=Ae.channel("prepared_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"prepared_items"},()=>{i()}).subscribe();return()=>{Ae.removeChannel(l)}},[]),r)return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Traffic Light"}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor all products by expiration status"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((l,u)=>s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsx(Ur,{className:"h-6 w-3/4"})}),s.jsxs(st,{children:[s.jsx(Ur,{className:"h-4 w-1/2 mb-2"}),s.jsx(Ur,{className:"h-4 w-full"})]})]},u))})]});const o={expired:e.filter(l=>Pv(l.expires_at).status==="expired").length,warning:e.filter(l=>Pv(l.expires_at).status==="warning").length,good:e.filter(l=>Pv(l.expires_at).status==="good").length};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Traffic Light"}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor all products by expiration status"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(rt,{className:"border-destructive/50",children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expired"}),s.jsx("p",{className:"text-3xl font-bold text-destructive",children:o.expired})]}),s.jsx(Ix,{className:"w-8 h-8 text-destructive"})]})})}),s.jsx(rt,{className:"border-warning/50",children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiring Soon"}),s.jsx("p",{className:"text-3xl font-bold text-warning",children:o.warning})]}),s.jsx(is,{className:"w-8 h-8 text-warning"})]})})}),s.jsx(rt,{className:"border-success/50",children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Fresh"}),s.jsx("p",{className:"text-3xl font-bold text-success",children:o.good})]}),s.jsx(Cl,{className:"w-8 h-8 text-success"})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:e.map(l=>{const u=Pv(l.expires_at),f=new Date(l.expires_at),h=new Date(l.prepared_at);return s.jsxs(rt,{className:`border-2 transition-all hover:shadow-lg ${Yee(u.status)}`,children:[s.jsx(Wt,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(Qt,{className:"text-base line-clamp-2",children:l.recipes?.name||"Unknown Product"}),Qee(u.status)]})}),s.jsxs(st,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(ut,{variant:Jee(u.status),className:"mb-2",children:u.status.toUpperCase()}),s.jsx("p",{className:"text-sm font-medium",children:u.message})]}),s.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(jn,{className:"w-3 h-3"}),s.jsxs("span",{children:["Expires: ",f.toLocaleDateString()," ",f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:["Prepared: ",h.toLocaleDateString()]}),l.recipes?.category&&s.jsxs("div",{className:"capitalize",children:["Category: ",l.recipes.category]}),s.jsxs("div",{children:["Batch: ",l.batch_size||1]})]})]})]},l.id)})}),e.length===0&&s.jsx(rt,{children:s.jsx(st,{className:"py-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No prepared items found"})})})]})}const SL=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Oe("w-full caption-bottom text-sm",e),...t})}));SL.displayName="Table";const kL=x.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Oe("[&_tr]:border-b",e),...t}));kL.displayName="TableHeader";const CL=x.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Oe("[&_tr:last-child]:border-0",e),...t}));CL.displayName="TableBody";const Xee=x.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Oe("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));Xee.displayName="TableFooter";const Nb=x.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Oe("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Nb.displayName="TableRow";const zd=x.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Oe("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));zd.displayName="TableHead";const qd=x.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Oe("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));qd.displayName="TableCell";const ete=x.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Oe("mt-4 text-sm text-muted-foreground",e),...t}));ete.displayName="TableCaption";function tte(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[a,i]=x.useState(""),[o,l]=x.useState(!0),[u,f]=x.useState(null),[h,p]=x.useState(!1),[v,m]=x.useState(null),{toast:N}=Er(),{print:w,isLoading:j}=jf();x.useEffect(()=>{_()},[]),x.useEffect(()=>{C()},[a,e]);const _=async()=>{try{l(!0);const{data:F,error:T}=await Ae.from("label_drafts").select("*").order("updated_at",{ascending:!1});if(T)throw T;t(F||[])}catch(F){console.error("Error fetching drafts:",F),N({title:"Error",description:"Failed to load saved drafts",variant:"destructive"})}finally{l(!1)}},C=()=>{if(!a.trim()){n(e);return}const F=a.toLowerCase(),T=e.filter(z=>z.draft_name.toLowerCase().includes(F)||z.form_data.productName?.toLowerCase().includes(F)||z.form_data.categoryName?.toLowerCase().includes(F)||z.form_data.subcategoryName?.toLowerCase().includes(F)||z.form_data.batchNumber?.toLowerCase().includes(F));n(T)},k=async F=>{try{const{error:T}=await Ae.from("label_drafts").delete().eq("id",F);if(T)throw T;N({title:"Draft Deleted",description:"Draft has been removed successfully"}),_()}catch(T){console.error("Error deleting draft:",T),N({title:"Error",description:"Failed to delete draft",variant:"destructive"})}finally{p(!1),m(null)}},E=async F=>{try{const T=F.form_data,z=T.selectedAllergens?.map(B=>({id:B.id,name:B.name,icon:B.icon||null,severity:B.severity}))||[];await Wu({productId:T.productId||"",productName:T.productName||F.draft_name,categoryId:T.categoryId||null,categoryName:T.categoryName||"",preparedBy:"",preparedByName:"",prepDate:T.prepDate||"",expiryDate:T.expiryDate||"",allergens:z,condition:T.condition||"Refrigerated",batchNumber:T.batchNumber||""}),await w({productName:T.productName||F.draft_name,categoryName:T.categoryName||"",subcategoryName:T.subcategoryName||"",preparedDate:T.prepDate||"",useByDate:T.expiryDate||"",allergens:z.map(B=>B.name),storageInstructions:T.condition?`Condition: ${T.condition}`:"",barcode:T.batchNumber})&&N({title:"Label Printed",description:"Draft has been sent to printer"})}catch(T){console.error("Error printing draft:",T),N({title:"Print Error",description:"Failed to print draft",variant:"destructive"})}},I=F=>{m(F),p(!0)},D=F=>{try{return wr(new Date(F),"MMM dd, yyyy HH:mm")}catch{return F}},O=F=>{if(!F)return null;const T={Refrigerated:"bg-blue-100 text-blue-800",Frozen:"bg-cyan-100 text-cyan-800","Room Temperature":"bg-green-100 text-green-800"};return s.jsx(ut,{className:T[F]||"bg-gray-100 text-gray-800",children:F})};return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Draft Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage, view, and print your saved label drafts"})]}),s.jsxs(we,{onClick:_,variant:"outline",size:"sm",children:[s.jsx(yp,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"Total Drafts"}),s.jsx(Ic,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(st,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"Updated Today"}),s.jsx(Va,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(st,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.filter(F=>new Date(F.updated_at).toDateString()===new Date().toDateString()).length})})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(Qt,{className:"text-sm font-medium",children:"Filtered Results"}),s.jsx(Fc,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(st,{children:s.jsx("div",{className:"text-2xl font-bold",children:r.length})})]})]}),s.jsx(rt,{children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(Ml,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(St,{placeholder:"Search drafts by product name, category, batch number...",value:a,onChange:F=>i(F.target.value),className:"pl-10"})]})})}),s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"Saved Drafts"}),s.jsxs(Bs,{children:[r.length," draft",r.length!==1?"s":""," ",a&&"matching your search"]})]}),s.jsx(st,{children:o?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(yp,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ic,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Drafts Found"}),s.jsx("p",{className:"text-muted-foreground",children:a?"Try adjusting your search query":"Start creating labels to save drafts"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(SL,{children:[s.jsx(kL,{children:s.jsxs(Nb,{children:[s.jsx(zd,{children:"Product"}),s.jsx(zd,{children:"Category"}),s.jsx(zd,{children:"Dates"}),s.jsx(zd,{children:"Condition"}),s.jsx(zd,{children:"Updated"}),s.jsx(zd,{className:"text-right",children:"Actions"})]})}),s.jsx(CL,{children:r.map(F=>{const T=F.form_data;return s.jsxs(Nb,{children:[s.jsx(qd,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:T.productName||F.draft_name}),T.batchNumber&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Batch: ",T.batchNumber]})]})}),s.jsx(qd,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:T.categoryName||"-"}),T.subcategoryName&&s.jsx("div",{className:"text-xs text-muted-foreground",children:T.subcategoryName})]})}),s.jsx(qd,{children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:["Prep: ",T.prepDate||"-"]}),s.jsxs("div",{className:"text-red-600 font-medium",children:["Exp: ",T.expiryDate||"-"]})]})}),s.jsx(qd,{children:O(T.condition)}),s.jsx(qd,{className:"text-sm text-muted-foreground",children:D(F.updated_at)}),s.jsx(qd,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>f(F),children:s.jsx(Mc,{className:"w-4 h-4"})}),s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>E(F),disabled:j,children:s.jsx(Sa,{className:"w-4 h-4"})}),s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>I(F.id),children:s.jsx(Dl,{className:"w-4 h-4 text-red-600"})})]})})]},F.id)})})]})})})]}),s.jsx(Tl,{open:h,onOpenChange:p,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Delete Draft"}),s.jsx(Rl,{children:"Are you sure you want to delete this draft? This action cannot be undone."})]}),s.jsxs(zo,{children:[s.jsx(Wo,{children:"Cancel"}),s.jsx(Vo,{onClick:()=>v&&k(v),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),u&&s.jsx(Tl,{open:!!u,onOpenChange:()=>f(null),children:s.jsxs(Uo,{className:"max-w-2xl",children:[s.jsx($o,{children:s.jsxs(qo,{children:["Draft Details: ",u.draft_name]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Product Name"}),s.jsx("p",{className:"text-lg font-semibold",children:u.form_data.productName||u.draft_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),s.jsx("p",{children:O(u.form_data.condition)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),s.jsx("p",{children:u.form_data.categoryName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Subcategory"}),s.jsx("p",{children:u.form_data.subcategoryName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Prepared Date"}),s.jsx("p",{children:u.form_data.prepDate||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expiry Date"}),s.jsx("p",{className:"text-red-600 font-medium",children:u.form_data.expiryDate||"-"})]}),u.form_data.batchNumber&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Batch Number"}),s.jsx("p",{className:"font-mono",children:u.form_data.batchNumber})]}),u.form_data.selectedAllergens&&u.form_data.selectedAllergens.length>0&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Allergens"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:u.form_data.selectedAllergens.map(F=>s.jsxs(ut,{variant:"destructive",children:[F.icon," ",F.name]},F.id))})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground pt-4 border-t",children:["Created: ",D(u.created_at),"  Updated:"," ",D(u.updated_at)]})]}),s.jsxs(zo,{children:[s.jsx(Wo,{children:"Close"}),s.jsxs(Vo,{onClick:()=>E(u),children:[s.jsx(Sa,{className:"w-4 h-4 mr-2"}),"Print Draft"]})]})]})})]})}function rte(){const{toast:e}=Er(),[t,r]=x.useState([]),[n,a]=x.useState(!0),[i,o]=x.useState(!1),[l,u]=x.useState(!1),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,N]=x.useState(""),[w,j]=x.useState("");x.useEffect(()=>{_()},[]);const _=async()=>{try{const{data:D,error:O}=await Ae.from("label_categories").select(`
          id,
          name,
          icon,
          label_subcategories (
            id,
            name,
            icon,
            category_id,
            display_order
          )
        `).order("name");if(O)throw O;r(D)}catch(D){e({title:"Load Failed",description:D.message,variant:"destructive"})}finally{a(!1)}},C=(D,O)=>{h({type:D,data:O}),N(O.name),j(O.icon||""),o(!0)},k=(D,O)=>{h({type:D,data:O?{category_id:O}:null}),N(""),j(""),o(!0)},E=async()=>{if(!m.trim()){e({title:"Validation Error",description:"Name is required",variant:"destructive"});return}try{if(f?.type==="category")if(f.data?.id){const{error:D}=await Ae.from("label_categories").update({name:m,icon:w||null}).eq("id",f.data.id);if(D)throw D}else{const{error:D}=await Ae.from("label_categories").insert({name:m,icon:w||null});if(D)throw D}else if(f?.data?.id){const{error:D}=await Ae.from("label_subcategories").update({name:m,icon:w||null}).eq("id",f.data.id);if(D)throw D}else{const{error:D}=await Ae.from("label_subcategories").insert({category_id:f?.data?.category_id,name:m,icon:w||null});if(D)throw D}e({title:"Success",description:`${f?.type==="category"?"Category":"Subcategory"} ${f?.data?.id?"updated":"created"}`}),o(!1),_()}catch(D){e({title:"Save Failed",description:D.message,variant:"destructive"})}},I=async()=>{if(p)try{if(p.type==="category"){const{error:D}=await Ae.from("label_categories").delete().eq("id",p.id);if(D)throw D}else{const{error:D}=await Ae.from("label_subcategories").delete().eq("id",p.id);if(D)throw D}e({title:"Deleted",description:`${p.type==="category"?"Category":"Subcategory"} "${p.name}" deleted`}),u(!1),v(null),_()}catch(D){e({title:"Delete Failed",description:D.message,variant:"destructive"})}};return n?s.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):s.jsxs("div",{className:"container mx-auto py-8 space-y-6",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Label Categories"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage categories and subcategories for label organization"})]}),s.jsxs(we,{onClick:()=>k("category"),children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add Category"]})]}),s.jsx("div",{className:"space-y-4",children:t.map(D=>s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(Qt,{className:"flex items-center gap-2",children:[D.icon&&s.jsx("span",{className:"text-2xl",children:D.icon}),s.jsx("span",{children:D.name})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(we,{variant:"outline",size:"sm",onClick:()=>k("subcategory",D.id),children:[s.jsx(vn,{className:"w-4 h-4 mr-2"}),"Add Subcategory"]}),s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>C("category",D),children:s.jsx(Rh,{className:"w-4 h-4"})}),s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>{v({type:"category",id:D.id,name:D.name}),u(!0)},children:s.jsx(Dl,{className:"w-4 h-4"})})]})]})}),D.subcategories&&D.subcategories.length>0&&s.jsx(st,{children:s.jsx("div",{className:"space-y-2",children:D.subcategories.map(O=>s.jsxs("div",{className:"flex items-center justify-between p-3 bg-muted rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jD,{className:"w-4 h-4 text-muted-foreground"}),O.icon&&s.jsx("span",{className:"text-xl",children:O.icon}),s.jsx("span",{children:O.name})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>C("subcategory",O),children:s.jsx(Rh,{className:"w-4 h-4"})}),s.jsx(we,{variant:"ghost",size:"sm",onClick:()=>{v({type:"subcategory",id:O.id,name:O.name}),u(!0)},children:s.jsx(Dl,{className:"w-4 h-4"})})]})]},O.id))})})]},D.id))}),s.jsx(ea,{open:i,onOpenChange:o,children:s.jsxs(Us,{children:[s.jsxs($s,{children:[s.jsxs(zs,{children:[f?.data?.id?"Edit":"Create"," ",f?.type==="category"?"Category":"Subcategory"]}),s.jsx(Wa,{children:f?.type==="category"?"Categories group related products together":"Subcategories provide more specific classification"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Name"}),s.jsx(St,{value:m,onChange:D=>N(D.target.value),placeholder:`e.g., ${f?.type==="category"?"Dairy Products":"Cheese"}`})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(ft,{children:"Icon (Emoji)"}),s.jsx(St,{value:w,onChange:D=>j(D.target.value),placeholder:"e.g., ",maxLength:2}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Use a single emoji character (optional)"})]})]}),s.jsxs(Zo,{children:[s.jsx(we,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),s.jsxs(we,{onClick:E,children:[s.jsx(Qk,{className:"w-4 h-4 mr-2"}),"Save"]})]})]})}),s.jsx(Tl,{open:l,onOpenChange:u,children:s.jsxs(Uo,{children:[s.jsxs($o,{children:[s.jsx(qo,{children:"Are you sure?"}),s.jsxs(Rl,{children:["This will permanently delete ",p?.type,' "',p?.name,'".',p?.type==="category"&&" All subcategories will also be deleted.","This action cannot be undone."]})]}),s.jsxs(zo,{children:[s.jsx(Wo,{children:"Cancel"}),s.jsx(Vo,{onClick:I,className:"bg-destructive",children:"Delete"})]})]})})]})}function nte(){const{userId:e}=K7(),t=mf(),{toast:r}=Er(),{context:n}=nd(),{users:a,loading:i,fetchUsers:o}=R0(n?.organization_id),[l,u]=x.useState("overview"),[f,h]=x.useState(null),[p,v]=x.useState(!1);x.useEffect(()=>{n?.organization_id&&e&&o({search:e})},[n?.organization_id,e,o]),x.useEffect(()=>{if(a.length>0&&e){const O=a.find(F=>F.user_id===e);h(O||null)}},[a,e]);const m=O=>O.split(" ").map(F=>F[0]).join("").toUpperCase().slice(0,2),N=O=>({admin:"bg-red-500",owner:"bg-purple-500",leader_chef:"bg-orange-500",cook:"bg-blue-500",barista:"bg-green-500"})[O]||"bg-gray-500",w=O=>({admin:"destructive",owner:"default",leader_chef:"secondary",cook:"outline",barista:"outline"})[O]||"outline",j=O=>{if(!O||O.length===0)return{status:"no_documents",badge:s.jsx(ut,{variant:"outline",children:"No Documents"}),color:"text-muted-foreground"};const F=new Date,T=hs(F,30),z=O.some(B=>B.expiration_date&&Rc(new Date(B.expiration_date),F)),U=O.some(B=>B.expiration_date&&Op(new Date(B.expiration_date),F)&&Rc(new Date(B.expiration_date),T));return z?{status:"expired",badge:s.jsx(ut,{variant:"destructive",children:" Expired Documents"}),color:"text-red-600"}:U?{status:"expiring",badge:s.jsx(ut,{className:"bg-amber-600",children:" Expiring Soon"}),color:"text-amber-600"}:{status:"compliant",badge:s.jsx(ut,{className:"bg-green-600",children:" Compliant"}),color:"text-green-600"}},_=()=>{v(!0)},C=()=>{n?.organization_id&&e&&o({search:e})},k=()=>{r({title:"Are you sure?",description:"Delete user functionality will be implemented with confirmation.",variant:"destructive"})},E=()=>{r({title:"Coming soon!",description:"Document upload will be implemented."})},I=n?.user_role==="admin"||n?.user_role==="owner"||n?.user_id===e;if(i)return s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(rt,{children:s.jsx(st,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})})})});if(!f)return s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(rt,{children:s.jsxs(st,{className:"p-12 text-center space-y-4",children:[s.jsx(Hr,{className:"w-12 h-12 mx-auto text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"User not found"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The user profile you're looking for doesn't exist or you don't have access."})]}),s.jsxs(we,{onClick:()=>t("/people"),variant:"outline",children:[s.jsx(gp,{className:"w-4 h-4 mr-2"}),"Back to People"]})]})})});const D=j(f.user_documents);return s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(we,{variant:"ghost",size:"icon",onClick:()=>t("/people"),children:s.jsx(gp,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Profile"}),s.jsx("p",{className:"text-muted-foreground",children:"View and manage user information"})]}),I&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(we,{variant:"outline",onClick:_,children:[s.jsx(Rh,{className:"w-4 h-4 mr-2"}),"Edit"]}),(n?.user_role==="admin"||n?.user_role==="owner"||n?.user_role==="leader_chef")&&s.jsxs(we,{variant:"destructive",onClick:k,children:[s.jsx(Dl,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),s.jsx(rt,{children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(of,{className:`w-24 h-24 ${N(f.role)} text-white text-2xl`,children:s.jsx(lf,{className:"bg-transparent",children:m(f.display_name)})}),s.jsx("div",{className:"text-center",children:s.jsx(ut,{variant:w(f.role),children:f.role==="leader_chef"?"Leader Chef":f.role})})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:f.display_name}),f.position&&s.jsx("p",{className:"text-muted-foreground",children:f.position})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:D.badge}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Gk,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("a",{href:`mailto:${f.email}`,className:"hover:underline",children:f.email})]}),f.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Kk,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("a",{href:`tel:${f.phone}`,className:"hover:underline",children:f.phone})]}),f.hire_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Va,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Hired ",wr(new Date(f.hire_date),"MMM d, yyyy")]})]}),f.department_id&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Gv,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Dept: ",f.department_id]})]})]})]})]})})}),s.jsxs(fg,{value:l,onValueChange:u,className:"space-y-6",children:[s.jsxs(um,{className:"grid w-full grid-cols-4",children:[s.jsxs(ia,{value:"overview",children:[s.jsx(ff,{className:"w-4 h-4 mr-2"}),"Overview"]}),s.jsxs(ia,{value:"documents",children:[s.jsx(Ic,{className:"w-4 h-4 mr-2"}),"Documents"]}),s.jsxs(ia,{value:"activity",children:[s.jsx(qj,{className:"w-4 h-4 mr-2"}),"Activity"]}),s.jsxs(ia,{value:"settings",children:[s.jsx(Bc,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),s.jsxs(oa,{value:"overview",className:"space-y-6",children:[s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"Personal Information"}),s.jsx(Bs,{children:"Basic user details and contact information"})]}),s.jsx(st,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),s.jsx("p",{className:"mt-1",children:f.display_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsx("p",{className:"mt-1",children:f.email||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsx("p",{className:"mt-1",children:f.phone||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Position"}),s.jsx("p",{className:"mt-1",children:f.position||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),s.jsx("p",{className:"mt-1",children:f.department_id||"Not assigned"})]})]})})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"Employment Information"}),s.jsx(Bs,{children:"Work-related details and status"})]}),s.jsx(st,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),s.jsx("p",{className:"mt-1",children:s.jsx(ut,{variant:w(f.role),children:f.role==="leader_chef"?"Leader Chef":f.role})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Hire Date"}),s.jsx("p",{className:"mt-1",children:f.hire_date?wr(new Date(f.hire_date),"MMM d, yyyy"):"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Time at Company"}),s.jsx("p",{className:"mt-1",children:f.hire_date?Ip(new Date(f.hire_date),{addSuffix:!1}):"Unknown"})]})]})})]}),s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"Compliance Status"}),s.jsx(Bs,{children:"Document compliance and certifications"})]}),s.jsx(st,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[D.status==="compliant"&&s.jsx(Cl,{className:"w-8 h-8 text-green-600"}),D.status==="expiring"&&s.jsx(jn,{className:"w-8 h-8 text-amber-600"}),D.status==="expired"&&s.jsx(Hr,{className:"w-8 h-8 text-red-600"}),s.jsxs("div",{children:[s.jsxs("p",{className:`font-medium ${D.color}`,children:[D.status==="compliant"&&"All Documents Valid",D.status==="expiring"&&"Documents Expiring Soon",D.status==="expired"&&"Expired Documents",D.status==="no_documents"&&"No Documents on File"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.user_documents?.length||0," document(s) on file"]})]})]}),s.jsx(we,{variant:"outline",onClick:()=>u("documents"),children:"View Documents"})]})})]})]}),s.jsx(oa,{value:"documents",className:"space-y-6",children:s.jsxs(rt,{children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(Qt,{children:"Documents & Certifications"}),s.jsx(Bs,{children:"Manage user documents, certificates, and compliance files"})]}),I&&s.jsxs(we,{onClick:E,children:[s.jsx(Ib,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})}),s.jsx(st,{children:!f.user_documents||f.user_documents.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Ic,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"font-medium",children:"No documents on file"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload certificates and compliance documents"})]}):s.jsx("div",{className:"space-y-4",children:f.user_documents.map(O=>{const F=O.expiration_date&&Rc(new Date(O.expiration_date),new Date),T=O.expiration_date&&!F&&Rc(new Date(O.expiration_date),hs(new Date,30));return s.jsx(rt,{children:s.jsx(st,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx(Ic,{className:"w-6 h-6"})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:O.document_name}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:O.document_type.replace("_"," ")}),O.expiration_date&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires: ",wr(new Date(O.expiration_date),"MMM d, yyyy"),!F&&s.jsxs("span",{className:"ml-2",children:["(",Ip(new Date(O.expiration_date),{addSuffix:!0}),")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[F&&s.jsx(ut,{variant:"destructive",className:"text-xs",children:"Expired"}),T&&s.jsx(ut,{className:"bg-amber-600 text-xs",children:"Expiring Soon"}),!F&&!T&&s.jsx(ut,{className:"bg-green-600 text-xs",children:"Valid"})]})]})]}),s.jsx(we,{variant:"ghost",size:"sm",children:s.jsx(Ox,{className:"w-4 h-4"})})]})})},O.id)})})})]})}),s.jsx(oa,{value:"activity",className:"space-y-6",children:s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"Recent Activity"}),s.jsx(Bs,{children:"User actions and timeline"})]}),s.jsx(st,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(qj,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"font-medium",children:"Activity tracking coming soon"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"View task completions, logins, and system actions"})]})})]})}),s.jsx(oa,{value:"settings",className:"space-y-6",children:s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"User Settings"}),s.jsx(Bs,{children:"Manage permissions and preferences"})]}),s.jsx(st,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Bc,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"font-medium",children:"Settings management coming soon"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure notifications, permissions, and preferences"})]})})]})})]}),f&&s.jsx(vL,{open:p,onOpenChange:v,user:f,onSuccess:C})]})}var ste="clover",EL="https://js.stripe.com",ate="".concat(EL,"/").concat(ste,"/stripe.js"),ite=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,ote=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var lte=function(t){return ite.test(t)||ote.test(t)},cte=function(){for(var t=document.querySelectorAll('script[src^="'.concat(EL,'"]')),r=0;r<t.length;r++){var n=t[r];if(lte(n.src))return n}return null},sk=function(t){var r="",n=document.createElement("script");n.src="".concat(ate).concat(r);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(n),n},Ym=null,Av=null,Tv=null,ute=function(t){return function(r){t(new Error("Failed to load Stripe.js",{cause:r}))}},dte=function(t,r){return function(){window.Stripe?t(window.Stripe):r(new Error("Stripe.js not available"))}},fte=function(t){return Ym!==null?Ym:(Ym=new Promise(function(r,n){if(typeof window>"u"||typeof document>"u"){r(null);return}if(window.Stripe){r(window.Stripe);return}try{var a=cte();if(!(a&&t)){if(!a)a=sk(t);else if(a&&Tv!==null&&Av!==null){var i;a.removeEventListener("load",Tv),a.removeEventListener("error",Av),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=sk(t)}}Tv=dte(r,n),Av=ute(n),a.addEventListener("load",Tv),a.addEventListener("error",Av)}catch(o){n(o);return}}),Ym.catch(function(r){return Ym=null,Promise.reject(r)}))},Qm,hte=function(){return Qm||(Qm=fte(null).catch(function(t){return Qm=null,Promise.reject(t)}),Qm)};Promise.resolve().then(function(){return hte()}).catch(function(e){console.warn(e)});const PL={starter:{id:"starter",name:"Starter",description:"Perfect for small restaurants getting started",price:49,currency:"AUD",stripePriceId:"price_1SpMFeRwlvsgBD3Zuq4os28W",features:["Up to 10 team members","Single location","Smart label printing","Recipe management","Basic routine tasks","Expiry tracking","Email support"],maxUsers:10,maxLocations:1,cta:"Start Free Trial"},professional:{id:"professional",name:"Professional",description:"For growing restaurants with multiple teams",price:99,currency:"AUD",stripePriceId:"price_1SpMHdRwlvsgBD3ZDYFBUztF",features:["Up to 50 team members","Up to 3 locations","Everything in Starter","Team communication feed","Knowledge base","Training center","Advanced task templates","Priority email support"],maxUsers:50,maxLocations:3,popular:!0,cta:"Start Free Trial"},enterprise:{id:"enterprise",name:"Enterprise",description:"For restaurant groups and franchises",price:299,currency:"AUD",stripePriceId:"price_1SpMIoRwlvsgBD3ZBcjdKnCk",features:["Unlimited team members","Unlimited locations","Everything in Professional","Multi-location management","API access","Custom integrations","Advanced analytics","Dedicated account manager","24/7 priority support"],maxUsers:999999,maxLocations:999999,cta:"Contact Sales"}};async function mte(e){const{priceId:t,successUrl:r=`${window.location.origin}/onboarding?subscription=success`,cancelUrl:n=`${window.location.origin}/pricing?canceled=true`,trialDays:a=14}=e;try{const i="https://imnecvcvhypnlvujajpn.supabase.co",{supabase:o}=await Al(async()=>{const{supabase:h}=await Promise.resolve().then(()=>dz);return{supabase:h}},void 0),{data:{session:l}}=await o.auth.getSession();if(!l?.access_token)throw new Error("User not authenticated. Please log in.");const u=await fetch(`${i}/functions/v1/stripe-create-checkout`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${l.access_token}`},body:JSON.stringify({priceId:t,successUrl:r,cancelUrl:n,trialDays:a})});if(!u.ok){const h=await u.json();throw new Error(h.message||"Failed to create checkout session")}const{url:f}=await u.json();if(!f)throw new Error("No checkout URL returned from server");window.location.href=f}catch(i){throw console.error("Checkout error:",i),i}}async function pte(e){const t=PL[e];if(!t)throw new Error(`Invalid plan: ${e}`);if(t.id==="enterprise"){window.location.href="/contact-sales";return}await mte({priceId:t.stripePriceId,trialDays:14})}function gte({organizationId:e,onPlanSelected:t}){const[r,n]=x.useState(null),[a,i]=x.useState(e||null),{user:o}=Ga();x.useEffect(()=>{if(e)return;async function f(){if(o?.id)try{const{data:h,error:p}=await Ae.from("profiles").select("organization_id").eq("user_id",o.id).single();if(p)throw p;i(h?.organization_id||null)}catch(h){console.error("Error fetching organization ID:",h)}}f()},[o?.id,e]);const l=async f=>{try{if(n(f),t){t(f);return}await pte(f)}catch(h){console.error("Error selecting plan:",h),$I.error("Failed to start checkout. Please try again.")}finally{n(null)}},u=Object.values(PL);return s.jsxs("div",{className:"container mx-auto py-8",children:[s.jsxs("div",{className:"text-center mb-12",children:[s.jsx("h1",{className:"text-4xl font-bold tracking-tight mb-4",children:"Choose Your Plan"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"Start with a 14-day free trial. No credit card required. Cancel anytime."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-7xl mx-auto",children:u.map(f=>s.jsxs(rt,{className:`relative flex flex-col ${f.popular?"border-primary shadow-lg scale-105 z-10":"border-border"}`,children:[f.popular&&s.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:s.jsxs(ut,{className:"bg-primary text-primary-foreground shadow-md px-4 py-1",children:[s.jsx(Dh,{className:"h-3 w-3 mr-1"}),"Most Popular"]})}),s.jsxs(Wt,{className:"text-center pb-6",children:[s.jsx(Qt,{className:"text-2xl font-bold",children:f.name}),s.jsx(Bs,{className:"text-sm mt-2",children:f.description}),s.jsxs("div",{className:"mt-6",children:[s.jsxs("div",{className:"flex items-baseline justify-center gap-1",children:[s.jsxs("span",{className:"text-5xl font-bold tracking-tight",children:["$",f.price]}),s.jsxs("span",{className:"text-muted-foreground font-medium",children:["/",f.currency,"/mo"]})]}),f.id!=="enterprise"&&s.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"14-day free trial included"})]})]}),s.jsx(st,{className:"flex-1",children:s.jsx("ul",{className:"space-y-3",children:f.features.map((h,p)=>s.jsxs("li",{className:"flex items-start gap-3",children:[s.jsx(Na,{className:"h-5 w-5 text-primary shrink-0 mt-0.5"}),s.jsx("span",{className:"text-sm",children:h})]},p))})}),s.jsx(rP,{className:"pt-6",children:s.jsx(we,{onClick:()=>l(f.id),disabled:r!==null,className:`w-full ${f.popular?"bg-primary hover:bg-primary/90":"bg-secondary hover:bg-secondary/90"}`,size:"lg",children:r===f.id?s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"animate-spin h-4 w-4 border-2 border-current border-t-transparent rounded-full"}),"Loading..."]}):f.cta})})]},f.id))}),s.jsxs("div",{className:"mt-16 max-w-3xl mx-auto",children:[s.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Frequently Asked Questions"}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"What happens after the trial?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"After your 14-day free trial, you'll be charged monthly based on your selected plan. You can cancel anytime before the trial ends without being charged."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Can I change plans later?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Yes! You can upgrade or downgrade your plan at any time from the billing settings. Changes take effect at the start of your next billing cycle."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"What payment methods do you accept?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"We accept all major credit cards (Visa, Mastercard, American Express) and bank transfers through our secure payment processor, Stripe."})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Is my data secure?"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Absolutely. We use industry-standard encryption and security practices. All payment information is processed securely through Stripe - we never store your card details."})]})]})]})]})}function vte(){return s.jsxs("div",{className:"min-h-screen bg-background",children:[s.jsx("div",{className:"border-b",children:s.jsx("div",{className:"container mx-auto py-4",children:s.jsx(Nw,{to:"/dashboard",children:s.jsxs(we,{variant:"ghost",size:"sm",children:[s.jsx(gp,{className:"h-4 w-4 mr-2"}),"Voltar ao Dashboard"]})})})}),s.jsx(gte,{}),s.jsx("footer",{className:"border-t mt-16",children:s.jsxs("div",{className:"container mx-auto py-8 text-center text-sm text-muted-foreground",children:[s.jsx("p",{children:"Tampa APP - Food Safety Management System"}),s.jsxs("p",{className:"mt-2",children:["Secure payments powered by"," ",s.jsx("a",{href:"https://stripe.com",target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:"Stripe"})]})]})})]})}function ak(){const e=mf(),{toast:t}=Er(),{subscription:r,planLimits:n,loading:a,isActive:i,isTrialing:o,isFree:l,trialDaysRemaining:u,daysUntilRenewal:f}=I2(),[h,p]=x.useState(!1),v=()=>{switch(n?.planType){case"starter":return s.jsx(Dh,{className:"h-6 w-6 text-blue-500"});case"professional":return s.jsx(Ac,{className:"h-6 w-6 text-purple-500"});case"enterprise":return s.jsx(Yk,{className:"h-6 w-6 text-orange-500"});default:return s.jsx($k,{className:"h-6 w-6 text-gray-500"})}},m=async()=>{if(!r?.id){t({title:"No Subscription",description:"You don't have an active subscription to manage.",variant:"destructive"});return}try{p(!0);const{data:{user:N}}=await Ae.auth.getUser();if(!N)throw new Error("Not authenticated");const{data:w,error:j}=await Ae.rpc("get_user_subscription",{p_user_id:N.id}).single(),_=w;if(j||!_?.stripe_customer_id)throw new Error("No Stripe customer found");const C="https://imnecvcvhypnlvujajpn.supabase.co",{data:{session:k}}=await Ae.auth.getSession(),E=await fetch(`${C}/functions/v1/stripe-customer-portal`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${k?.access_token}`},body:JSON.stringify({customerId:_.stripe_customer_id,returnUrl:window.location.href})});if(!E.ok)throw new Error("Failed to create portal session");const{url:I}=await E.json();I&&(window.location.href=I)}catch(N){console.error("Error opening portal:",N),t({title:"Error",description:"Failed to open billing portal. Please try again.",variant:"destructive"})}finally{p(!1)}};return a?s.jsx("div",{className:"container mx-auto py-8 px-4",children:s.jsx("div",{className:"max-w-4xl mx-auto",children:s.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:s.jsx(vs,{className:"h-8 w-8 animate-spin text-primary"})})})}):s.jsx("div",{className:"container mx-auto py-8 px-4",children:s.jsxs("div",{className:"max-w-4xl mx-auto",children:[s.jsxs("div",{className:"mb-8",children:[s.jsxs(we,{variant:"ghost",onClick:()=>e("/dashboard"),className:"mb-4",children:[s.jsx(gp,{className:"h-4 w-4 mr-2"}),"Back to Dashboard"]}),s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Billing & Subscription"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your subscription and payment methods"})]}),s.jsxs(rt,{className:"mb-6",children:[s.jsx(Wt,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[v(),s.jsxs("div",{children:[s.jsxs(Qt,{className:"text-2xl capitalize",children:[n?.planType||"Free"," Plan"]}),s.jsxs(Bs,{children:[l&&"Start your free trial today",o&&`Trial ends in ${u} days`,i&&!o&&`Renews in ${f} days`]})]})]}),o&&s.jsxs(ut,{variant:"outline",className:"bg-green-500/10 text-green-700 border-green-500/20",children:[s.jsx(Js,{className:"h-3 w-3 mr-1"}),"Trial Active"]}),i&&!o&&s.jsxs(ut,{variant:"outline",className:"bg-green-500/10 text-green-700 border-green-500/20",children:[s.jsx(Js,{className:"h-3 w-3 mr-1"}),"Active"]}),r?.status==="past_due"&&s.jsxs(ut,{variant:"outline",className:"bg-red-500/10 text-red-700 border-red-500/20",children:[s.jsx(Hr,{className:"h-3 w-3 mr-1"}),"Past Due"]})]})}),s.jsxs(st,{className:"space-y-4",children:[o&&u!==null&&u<=3&&s.jsxs("div",{className:"flex items-start gap-3 p-4 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:[s.jsx(Hr,{className:"h-5 w-5 text-amber-600 mt-0.5 flex-shrink-0"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"font-medium text-amber-900",children:"Your trial is ending soon"}),s.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Add a payment method to continue using ",n?.planType," features after your trial ends."]})]})]}),s.jsx(ss,{}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Plan Limits"}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Team Members"}),s.jsx("p",{className:"text-lg font-semibold",children:n?.maxTeamMembers===-1?"":n?.maxTeamMembers})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Recipes"}),s.jsx("p",{className:"text-lg font-semibold",children:n?.maxRecipes===-1?"":n?.maxRecipes})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Products"}),s.jsx("p",{className:"text-lg font-semibold",children:n?.maxProducts===-1?"":n?.maxProducts})]}),s.jsxs("div",{className:"p-3 bg-muted rounded-lg",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"Suppliers"}),s.jsx("p",{className:"text-lg font-semibold",children:n?.maxSuppliers===-1?"":n?.maxSuppliers})]})]})]}),s.jsx(ss,{}),n&&s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-3",children:"Premium Features"}),s.jsxs("div",{className:"grid gap-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[n.hasAllergenManagement?s.jsx(Js,{className:"h-4 w-4 text-green-600"}):s.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),s.jsx("span",{className:n.hasAllergenManagement?"":"text-muted-foreground",children:"Allergen Management"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n.hasNutritionalCalculator?s.jsx(Js,{className:"h-4 w-4 text-green-600"}):s.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),s.jsx("span",{className:n.hasNutritionalCalculator?"":"text-muted-foreground",children:"Nutritional Calculator"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n.hasCostControl?s.jsx(Js,{className:"h-4 w-4 text-green-600"}):s.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),s.jsx("span",{className:n.hasCostControl?"":"text-muted-foreground",children:"Cost Control & Analytics"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n.hasPrioritySupport?s.jsx(Js,{className:"h-4 w-4 text-green-600"}):s.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),s.jsx("span",{className:n.hasPrioritySupport?"":"text-muted-foreground",children:"Priority Support"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[n.hasApiAccess?s.jsx(Js,{className:"h-4 w-4 text-green-600"}):s.jsx("div",{className:"h-4 w-4 rounded-full border-2 border-gray-300"}),s.jsx("span",{className:n.hasApiAccess?"":"text-muted-foreground",children:"API Access"})]})]})]}),s.jsx(ss,{}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[l?s.jsxs(we,{onClick:()=>e("/pricing"),className:"w-full sm:w-auto",children:[s.jsx(Ac,{className:"h-4 w-4 mr-2"}),"Upgrade Plan"]}):s.jsx(we,{onClick:m,disabled:h,className:"w-full sm:w-auto",children:h?s.jsxs(s.Fragment,{children:[s.jsx(vs,{className:"h-4 w-4 mr-2 animate-spin"}),"Loading..."]}):s.jsxs(s.Fragment,{children:[s.jsx(xD,{className:"h-4 w-4 mr-2"}),"Manage Billing"]})}),!l&&s.jsx(we,{onClick:()=>e("/pricing"),variant:"outline",className:"w-full sm:w-auto",children:"View All Plans"})]})]})]}),r&&s.jsxs(rt,{children:[s.jsxs(Wt,{children:[s.jsx(Qt,{children:"Subscription Details"}),s.jsx(Bs,{children:"Current billing period and payment information"})]}),s.jsxs(st,{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status"}),s.jsx("span",{className:"font-medium capitalize",children:r.status})]}),r.currentPeriodEnd&&s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"text-muted-foreground",children:o?"Trial Ends":"Next Billing Date"}),s.jsx("span",{className:"font-medium",children:new Date(r.currentPeriodEnd).toLocaleDateString()})]}),r.organizationId&&s.jsxs("div",{className:"flex justify-between items-center py-2",children:[s.jsx("span",{className:"text-muted-foreground",children:"Linked to Organization"}),s.jsx(Js,{className:"h-5 w-5 text-green-600"})]})]})]})]})})}const xte=new h7,yte=()=>s.jsx(p7,{client:xte,children:s.jsx(fz,{children:s.jsx(gz,{children:s.jsxs(FC,{children:[s.jsx(bI,{}),s.jsx(eO,{}),s.jsx(xF,{children:s.jsxs(dF,{children:[s.jsx(fs,{path:"/welcome",element:s.jsx(RZ,{})}),s.jsx(fs,{path:"/auth",element:s.jsx(OZ,{})}),s.jsxs(fs,{path:"/",element:s.jsx(xz,{children:s.jsx(pz,{})}),children:[s.jsx(fs,{index:!0,element:s.jsx(hW,{})}),s.jsx(fs,{path:"recipes",element:s.jsx(tJ,{})}),s.jsx(fs,{path:"labeling",element:s.jsx(NZ,{})}),s.jsx(fs,{path:"inventory",element:s.jsx(kZ,{})}),s.jsx(fs,{path:"routine-tasks",element:s.jsx(xee,{})}),s.jsx(fs,{path:"training",element:s.jsx(yee,{})}),s.jsx(fs,{path:"people",element:s.jsx(Uee,{})}),s.jsx(fs,{path:"people/:userId",element:s.jsx(nte,{})}),s.jsx(fs,{path:"feed",element:s.jsx(Kee,{})}),s.jsx(fs,{path:"analytics",element:s.jsx(PZ,{})}),s.jsx(fs,{path:"traffic-light",element:s.jsx(Zee,{})}),s.jsx(fs,{path:"drafts",element:s.jsx(tte,{})}),s.jsx(fs,{path:"label-categories",element:s.jsx(rte,{})}),s.jsx(fs,{path:"pricing",element:s.jsx(vte,{})}),s.jsx(fs,{path:"billing",element:s.jsx(ak,{})}),s.jsx(fs,{path:"settings/billing",element:s.jsx(ak,{})})]}),s.jsx(fs,{path:"*",element:s.jsx(MZ,{})})]})}),s.jsx(Pz,{}),s.jsx(Ez,{})]})})})});g8.createRoot(document.getElementById("root")).render(s.jsx(yte,{}));export{cn as _,wte as c,Ax as g};
