function a8(e,t){for(var r=0;r<t.length;r++){const n=t[r];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in e)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(e,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=r(i);fetch(i.href,a)}})();var PX=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function l0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function C4(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Yy={exports:{}},Pm={},Qy={exports:{}},Cr={};var J5;function o8(){if(J5)return Cr;J5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function v(te){return te===null||typeof te!="object"?null:(te=p&&te[p]||te["@@iterator"],typeof te=="function"?te:null)}var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},j=Object.assign,w={};function _(te,R,V){this.props=te,this.context=R,this.refs=w,this.updater=V||m}_.prototype.isReactComponent={},_.prototype.setState=function(te,R){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,R,"setState")},_.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function S(){}S.prototype=_.prototype;function E(te,R,V){this.props=te,this.context=R,this.refs=w,this.updater=V||m}var k=E.prototype=new S;k.constructor=E,j(k,_.prototype),k.isPureReactComponent=!0;var C=Array.isArray,D=Object.prototype.hasOwnProperty,M={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function U(te,R,V){var Q,re={},Z=null,X=null;if(R!=null)for(Q in R.ref!==void 0&&(X=R.ref),R.key!==void 0&&(Z=""+R.key),R)D.call(R,Q)&&!F.hasOwnProperty(Q)&&(re[Q]=R[Q]);var pe=arguments.length-2;if(pe===1)re.children=V;else if(1<pe){for(var ce=Array(pe),we=0;we<pe;we++)ce[we]=arguments[we+2];re.children=ce}if(te&&te.defaultProps)for(Q in pe=te.defaultProps,pe)re[Q]===void 0&&(re[Q]=pe[Q]);return{$$typeof:e,type:te,key:Z,ref:X,props:re,_owner:M.current}}function I(te,R){return{$$typeof:e,type:te.type,key:R,ref:te.ref,props:te.props,_owner:te._owner}}function K(te){return typeof te=="object"&&te!==null&&te.$$typeof===e}function B(te){var R={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(V){return R[V]})}var O=/\/+/g;function z(te,R){return typeof te=="object"&&te!==null&&te.key!=null?B(""+te.key):R.toString(36)}function q(te,R,V,Q,re){var Z=typeof te;(Z==="undefined"||Z==="boolean")&&(te=null);var X=!1;if(te===null)X=!0;else switch(Z){case"string":case"number":X=!0;break;case"object":switch(te.$$typeof){case e:case t:X=!0}}if(X)return X=te,re=re(X),te=Q===""?"."+z(X,0):Q,C(re)?(V="",te!=null&&(V=te.replace(O,"$&/")+"/"),q(re,R,V,"",function(we){return we})):re!=null&&(K(re)&&(re=I(re,V+(!re.key||X&&X.key===re.key?"":(""+re.key).replace(O,"$&/")+"/")+te)),R.push(re)),1;if(X=0,Q=Q===""?".":Q+":",C(te))for(var pe=0;pe<te.length;pe++){Z=te[pe];var ce=Q+z(Z,pe);X+=q(Z,R,V,ce,re)}else if(ce=v(te),typeof ce=="function")for(te=ce.call(te),pe=0;!(Z=te.next()).done;)Z=Z.value,ce=Q+z(Z,pe++),X+=q(Z,R,V,ce,re);else if(Z==="object")throw R=String(te),Error("Objects are not valid as a React child (found: "+(R==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":R)+"). If you meant to render a collection of children, use an array instead.");return X}function ue(te,R,V){if(te==null)return te;var Q=[],re=0;return q(te,Q,"","",function(Z){return R.call(V,Z,re++)}),Q}function ie(te){if(te._status===-1){var R=te._result;R=R(),R.then(function(V){(te._status===0||te._status===-1)&&(te._status=1,te._result=V)},function(V){(te._status===0||te._status===-1)&&(te._status=2,te._result=V)}),te._status===-1&&(te._status=0,te._result=R)}if(te._status===1)return te._result.default;throw te._result}var le={current:null},G={transition:null},se={ReactCurrentDispatcher:le,ReactCurrentBatchConfig:G,ReactCurrentOwner:M};function xe(){throw Error("act(...) is not supported in production builds of React.")}return Cr.Children={map:ue,forEach:function(te,R,V){ue(te,function(){R.apply(this,arguments)},V)},count:function(te){var R=0;return ue(te,function(){R++}),R},toArray:function(te){return ue(te,function(R){return R})||[]},only:function(te){if(!K(te))throw Error("React.Children.only expected to receive a single React element child.");return te}},Cr.Component=_,Cr.Fragment=r,Cr.Profiler=i,Cr.PureComponent=E,Cr.StrictMode=n,Cr.Suspense=d,Cr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=se,Cr.act=xe,Cr.cloneElement=function(te,R,V){if(te==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+te+".");var Q=j({},te.props),re=te.key,Z=te.ref,X=te._owner;if(R!=null){if(R.ref!==void 0&&(Z=R.ref,X=M.current),R.key!==void 0&&(re=""+R.key),te.type&&te.type.defaultProps)var pe=te.type.defaultProps;for(ce in R)D.call(R,ce)&&!F.hasOwnProperty(ce)&&(Q[ce]=R[ce]===void 0&&pe!==void 0?pe[ce]:R[ce])}var ce=arguments.length-2;if(ce===1)Q.children=V;else if(1<ce){pe=Array(ce);for(var we=0;we<ce;we++)pe[we]=arguments[we+2];Q.children=pe}return{$$typeof:e,type:te.type,key:re,ref:Z,props:Q,_owner:X}},Cr.createContext=function(te){return te={$$typeof:o,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},te.Provider={$$typeof:a,_context:te},te.Consumer=te},Cr.createElement=U,Cr.createFactory=function(te){var R=U.bind(null,te);return R.type=te,R},Cr.createRef=function(){return{current:null}},Cr.forwardRef=function(te){return{$$typeof:l,render:te}},Cr.isValidElement=K,Cr.lazy=function(te){return{$$typeof:h,_payload:{_status:-1,_result:te},_init:ie}},Cr.memo=function(te,R){return{$$typeof:f,type:te,compare:R===void 0?null:R}},Cr.startTransition=function(te){var R=G.transition;G.transition={};try{te()}finally{G.transition=R}},Cr.unstable_act=xe,Cr.useCallback=function(te,R){return le.current.useCallback(te,R)},Cr.useContext=function(te){return le.current.useContext(te)},Cr.useDebugValue=function(){},Cr.useDeferredValue=function(te){return le.current.useDeferredValue(te)},Cr.useEffect=function(te,R){return le.current.useEffect(te,R)},Cr.useId=function(){return le.current.useId()},Cr.useImperativeHandle=function(te,R,V){return le.current.useImperativeHandle(te,R,V)},Cr.useInsertionEffect=function(te,R){return le.current.useInsertionEffect(te,R)},Cr.useLayoutEffect=function(te,R){return le.current.useLayoutEffect(te,R)},Cr.useMemo=function(te,R){return le.current.useMemo(te,R)},Cr.useReducer=function(te,R,V){return le.current.useReducer(te,R,V)},Cr.useRef=function(te){return le.current.useRef(te)},Cr.useState=function(te){return le.current.useState(te)},Cr.useSyncExternalStore=function(te,R,V){return le.current.useSyncExternalStore(te,R,V)},Cr.useTransition=function(){return le.current.useTransition()},Cr.version="18.3.1",Cr}var Z5;function c0(){return Z5||(Z5=1,Qy.exports=o8()),Qy.exports}var X5;function l8(){if(X5)return Pm;X5=1;var e=c0(),t=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,i=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function o(l,d,f){var h,p={},v=null,m=null;f!==void 0&&(v=""+f),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(m=d.ref);for(h in d)n.call(d,h)&&!a.hasOwnProperty(h)&&(p[h]=d[h]);if(l&&l.defaultProps)for(h in d=l.defaultProps,d)p[h]===void 0&&(p[h]=d[h]);return{$$typeof:t,type:l,key:v,ref:m,props:p,_owner:i.current}}return Pm.Fragment=r,Pm.jsx=o,Pm.jsxs=o,Pm}var e_;function c8(){return e_||(e_=1,Yy.exports=l8()),Yy.exports}var s=c8(),kg={},Jy={exports:{}},zi={},Zy={exports:{}},Xy={};var t_;function u8(){return t_||(t_=1,(function(e){function t(G,se){var xe=G.length;G.push(se);e:for(;0<xe;){var te=xe-1>>>1,R=G[te];if(0<i(R,se))G[te]=se,G[xe]=R,xe=te;else break e}}function r(G){return G.length===0?null:G[0]}function n(G){if(G.length===0)return null;var se=G[0],xe=G.pop();if(xe!==se){G[0]=xe;e:for(var te=0,R=G.length,V=R>>>1;te<V;){var Q=2*(te+1)-1,re=G[Q],Z=Q+1,X=G[Z];if(0>i(re,xe))Z<R&&0>i(X,re)?(G[te]=X,G[Z]=xe,te=Z):(G[te]=re,G[Q]=xe,te=Q);else if(Z<R&&0>i(X,xe))G[te]=X,G[Z]=xe,te=Z;else break e}}return se}function i(G,se){var xe=G.sortIndex-se.sortIndex;return xe!==0?xe:G.id-se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var d=[],f=[],h=1,p=null,v=3,m=!1,j=!1,w=!1,_=typeof setTimeout=="function"?setTimeout:null,S=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(G){for(var se=r(f);se!==null;){if(se.callback===null)n(f);else if(se.startTime<=G)n(f),se.sortIndex=se.expirationTime,t(d,se);else break;se=r(f)}}function C(G){if(w=!1,k(G),!j)if(r(d)!==null)j=!0,ie(D);else{var se=r(f);se!==null&&le(C,se.startTime-G)}}function D(G,se){j=!1,w&&(w=!1,S(U),U=-1),m=!0;var xe=v;try{for(k(se),p=r(d);p!==null&&(!(p.expirationTime>se)||G&&!B());){var te=p.callback;if(typeof te=="function"){p.callback=null,v=p.priorityLevel;var R=te(p.expirationTime<=se);se=e.unstable_now(),typeof R=="function"?p.callback=R:p===r(d)&&n(d),k(se)}else n(d);p=r(d)}if(p!==null)var V=!0;else{var Q=r(f);Q!==null&&le(C,Q.startTime-se),V=!1}return V}finally{p=null,v=xe,m=!1}}var M=!1,F=null,U=-1,I=5,K=-1;function B(){return!(e.unstable_now()-K<I)}function O(){if(F!==null){var G=e.unstable_now();K=G;var se=!0;try{se=F(!0,G)}finally{se?z():(M=!1,F=null)}}else M=!1}var z;if(typeof E=="function")z=function(){E(O)};else if(typeof MessageChannel<"u"){var q=new MessageChannel,ue=q.port2;q.port1.onmessage=O,z=function(){ue.postMessage(null)}}else z=function(){_(O,0)};function ie(G){F=G,M||(M=!0,z())}function le(G,se){U=_(function(){G(e.unstable_now())},se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){j||m||(j=!0,ie(D))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return r(d)},e.unstable_next=function(G){switch(v){case 1:case 2:case 3:var se=3;break;default:se=v}var xe=v;v=se;try{return G()}finally{v=xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,se){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var xe=v;v=G;try{return se()}finally{v=xe}},e.unstable_scheduleCallback=function(G,se,xe){var te=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?te+xe:te):xe=te,G){case 1:var R=-1;break;case 2:R=250;break;case 5:R=1073741823;break;case 4:R=1e4;break;default:R=5e3}return R=xe+R,G={id:h++,callback:se,priorityLevel:G,startTime:xe,expirationTime:R,sortIndex:-1},xe>te?(G.sortIndex=xe,t(f,G),r(d)===null&&G===r(f)&&(w?(S(U),U=-1):w=!0,le(C,xe-te))):(G.sortIndex=R,t(d,G),j||m||(j=!0,ie(D))),G},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(G){var se=v;return function(){var xe=v;v=se;try{return G.apply(this,arguments)}finally{v=xe}}}})(Xy)),Xy}var r_;function d8(){return r_||(r_=1,Zy.exports=u8()),Zy.exports}var n_;function f8(){if(n_)return zi;n_=1;var e=c0(),t=d8();function r(c){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+c,g=1;g<arguments.length;g++)u+="&args[]="+encodeURIComponent(arguments[g]);return"Minified React error #"+c+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,i={};function a(c,u){o(c,u),o(c+"Capture",u)}function o(c,u){for(i[c]=u,c=0;c<u.length;c++)n.add(u[c])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,h={},p={};function v(c){return d.call(p,c)?!0:d.call(h,c)?!1:f.test(c)?p[c]=!0:(h[c]=!0,!1)}function m(c,u,g,b){if(g!==null&&g.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return b?!1:g!==null?!g.acceptsBooleans:(c=c.toLowerCase().slice(0,5),c!=="data-"&&c!=="aria-");default:return!1}}function j(c,u,g,b){if(u===null||typeof u>"u"||m(c,u,g,b))return!0;if(b)return!1;if(g!==null)switch(g.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function w(c,u,g,b,P,L,Y){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=b,this.attributeNamespace=P,this.mustUseProperty=g,this.propertyName=c,this.type=u,this.sanitizeURL=L,this.removeEmptyString=Y}var _={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(c){_[c]=new w(c,0,!1,c,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(c){var u=c[0];_[u]=new w(u,1,!1,c[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(c){_[c]=new w(c,2,!1,c.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(c){_[c]=new w(c,2,!1,c,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(c){_[c]=new w(c,3,!1,c.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(c){_[c]=new w(c,3,!0,c,null,!1,!1)}),["capture","download"].forEach(function(c){_[c]=new w(c,4,!1,c,null,!1,!1)}),["cols","rows","size","span"].forEach(function(c){_[c]=new w(c,6,!1,c,null,!1,!1)}),["rowSpan","start"].forEach(function(c){_[c]=new w(c,5,!1,c.toLowerCase(),null,!1,!1)});var S=/[\-:]([a-z])/g;function E(c){return c[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(c){var u=c.replace(S,E);_[u]=new w(u,1,!1,c,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(c){var u=c.replace(S,E);_[u]=new w(u,1,!1,c,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(c){var u=c.replace(S,E);_[u]=new w(u,1,!1,c,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(c){_[c]=new w(c,1,!1,c.toLowerCase(),null,!1,!1)}),_.xlinkHref=new w("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(c){_[c]=new w(c,1,!1,c.toLowerCase(),null,!0,!0)});function k(c,u,g,b){var P=_.hasOwnProperty(u)?_[u]:null;(P!==null?P.type!==0:b||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(j(u,g,P,b)&&(g=null),b||P===null?v(u)&&(g===null?c.removeAttribute(u):c.setAttribute(u,""+g)):P.mustUseProperty?c[P.propertyName]=g===null?P.type===3?!1:"":g:(u=P.attributeName,b=P.attributeNamespace,g===null?c.removeAttribute(u):(P=P.type,g=P===3||P===4&&g===!0?"":""+g,b?c.setAttributeNS(b,u,g):c.setAttribute(u,g))))}var C=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,D=Symbol.for("react.element"),M=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),U=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),B=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),q=Symbol.for("react.suspense_list"),ue=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),le=Symbol.for("react.offscreen"),G=Symbol.iterator;function se(c){return c===null||typeof c!="object"?null:(c=G&&c[G]||c["@@iterator"],typeof c=="function"?c:null)}var xe=Object.assign,te;function R(c){if(te===void 0)try{throw Error()}catch(g){var u=g.stack.trim().match(/\n( *(at )?)/);te=u&&u[1]||""}return`
`+te+c}var V=!1;function Q(c,u){if(!c||V)return"";V=!0;var g=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Fe){var b=Fe}Reflect.construct(c,[],u)}else{try{u.call()}catch(Fe){b=Fe}c.call(u.prototype)}else{try{throw Error()}catch(Fe){b=Fe}c()}}catch(Fe){if(Fe&&b&&typeof Fe.stack=="string"){for(var P=Fe.stack.split(`
`),L=b.stack.split(`
`),Y=P.length-1,ge=L.length-1;1<=Y&&0<=ge&&P[Y]!==L[ge];)ge--;for(;1<=Y&&0<=ge;Y--,ge--)if(P[Y]!==L[ge]){if(Y!==1||ge!==1)do if(Y--,ge--,0>ge||P[Y]!==L[ge]){var Ne=`
`+P[Y].replace(" at new "," at ");return c.displayName&&Ne.includes("<anonymous>")&&(Ne=Ne.replace("<anonymous>",c.displayName)),Ne}while(1<=Y&&0<=ge);break}}}finally{V=!1,Error.prepareStackTrace=g}return(c=c?c.displayName||c.name:"")?R(c):""}function re(c){switch(c.tag){case 5:return R(c.type);case 16:return R("Lazy");case 13:return R("Suspense");case 19:return R("SuspenseList");case 0:case 2:case 15:return c=Q(c.type,!1),c;case 11:return c=Q(c.type.render,!1),c;case 1:return c=Q(c.type,!0),c;default:return""}}function Z(c){if(c==null)return null;if(typeof c=="function")return c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case F:return"Fragment";case M:return"Portal";case I:return"Profiler";case U:return"StrictMode";case z:return"Suspense";case q:return"SuspenseList"}if(typeof c=="object")switch(c.$$typeof){case B:return(c.displayName||"Context")+".Consumer";case K:return(c._context.displayName||"Context")+".Provider";case O:var u=c.render;return c=c.displayName,c||(c=u.displayName||u.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case ue:return u=c.displayName||null,u!==null?u:Z(c.type)||"Memo";case ie:u=c._payload,c=c._init;try{return Z(c(u))}catch{}}return null}function X(c){var u=c.type;switch(c.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return c=u.render,c=c.displayName||c.name||"",u.displayName||(c!==""?"ForwardRef("+c+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Z(u);case 8:return u===U?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function pe(c){switch(typeof c){case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function ce(c){var u=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function we(c){var u=ce(c)?"checked":"value",g=Object.getOwnPropertyDescriptor(c.constructor.prototype,u),b=""+c[u];if(!c.hasOwnProperty(u)&&typeof g<"u"&&typeof g.get=="function"&&typeof g.set=="function"){var P=g.get,L=g.set;return Object.defineProperty(c,u,{configurable:!0,get:function(){return P.call(this)},set:function(Y){b=""+Y,L.call(this,Y)}}),Object.defineProperty(c,u,{enumerable:g.enumerable}),{getValue:function(){return b},setValue:function(Y){b=""+Y},stopTracking:function(){c._valueTracker=null,delete c[u]}}}}function Pe(c){c._valueTracker||(c._valueTracker=we(c))}function ze(c){if(!c)return!1;var u=c._valueTracker;if(!u)return!0;var g=u.getValue(),b="";return c&&(b=ce(c)?c.checked?"true":"false":c.value),c=b,c!==g?(u.setValue(c),!0):!1}function ve(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}function qe(c,u){var g=u.checked;return xe({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:g??c._wrapperState.initialChecked})}function ne(c,u){var g=u.defaultValue==null?"":u.defaultValue,b=u.checked!=null?u.checked:u.defaultChecked;g=pe(u.value!=null?u.value:g),c._wrapperState={initialChecked:b,initialValue:g,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function tt(c,u){u=u.checked,u!=null&&k(c,"checked",u,!1)}function jt(c,u){tt(c,u);var g=pe(u.value),b=u.type;if(g!=null)b==="number"?(g===0&&c.value===""||c.value!=g)&&(c.value=""+g):c.value!==""+g&&(c.value=""+g);else if(b==="submit"||b==="reset"){c.removeAttribute("value");return}u.hasOwnProperty("value")?Xe(c,u.type,g):u.hasOwnProperty("defaultValue")&&Xe(c,u.type,pe(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(c.defaultChecked=!!u.defaultChecked)}function St(c,u,g){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var b=u.type;if(!(b!=="submit"&&b!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+c._wrapperState.initialValue,g||u===c.value||(c.value=u),c.defaultValue=u}g=c.name,g!==""&&(c.name=""),c.defaultChecked=!!c._wrapperState.initialChecked,g!==""&&(c.name=g)}function Xe(c,u,g){(u!=="number"||ve(c.ownerDocument)!==c)&&(g==null?c.defaultValue=""+c._wrapperState.initialValue:c.defaultValue!==""+g&&(c.defaultValue=""+g))}var me=Array.isArray;function ye(c,u,g,b){if(c=c.options,u){u={};for(var P=0;P<g.length;P++)u["$"+g[P]]=!0;for(g=0;g<c.length;g++)P=u.hasOwnProperty("$"+c[g].value),c[g].selected!==P&&(c[g].selected=P),P&&b&&(c[g].defaultSelected=!0)}else{for(g=""+pe(g),u=null,P=0;P<c.length;P++){if(c[P].value===g){c[P].selected=!0,b&&(c[P].defaultSelected=!0);return}u!==null||c[P].disabled||(u=c[P])}u!==null&&(u.selected=!0)}}function Ce(c,u){if(u.dangerouslySetInnerHTML!=null)throw Error(r(91));return xe({},u,{value:void 0,defaultValue:void 0,children:""+c._wrapperState.initialValue})}function Ue(c,u){var g=u.value;if(g==null){if(g=u.children,u=u.defaultValue,g!=null){if(u!=null)throw Error(r(92));if(me(g)){if(1<g.length)throw Error(r(93));g=g[0]}u=g}u==null&&(u=""),g=u}c._wrapperState={initialValue:pe(g)}}function Je(c,u){var g=pe(u.value),b=pe(u.defaultValue);g!=null&&(g=""+g,g!==c.value&&(c.value=g),u.defaultValue==null&&c.defaultValue!==g&&(c.defaultValue=g)),b!=null&&(c.defaultValue=""+b)}function He(c){var u=c.textContent;u===c._wrapperState.initialValue&&u!==""&&u!==null&&(c.value=u)}function Ze(c){switch(c){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ft(c,u){return c==null||c==="http://www.w3.org/1999/xhtml"?Ze(u):c==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":c}var bt,gt=(function(c){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,g,b,P){MSApp.execUnsafeLocalFunction(function(){return c(u,g,b,P)})}:c})(function(c,u){if(c.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in c)c.innerHTML=u;else{for(bt=bt||document.createElement("div"),bt.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=bt.firstChild;c.firstChild;)c.removeChild(c.firstChild);for(;u.firstChild;)c.appendChild(u.firstChild)}});function $t(c,u){if(u){var g=c.firstChild;if(g&&g===c.lastChild&&g.nodeType===3){g.nodeValue=u;return}}c.textContent=u}var xt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Yr=["Webkit","ms","Moz","O"];Object.keys(xt).forEach(function(c){Yr.forEach(function(u){u=u+c.charAt(0).toUpperCase()+c.substring(1),xt[u]=xt[c]})});function ur(c,u,g){return u==null||typeof u=="boolean"||u===""?"":g||typeof u!="number"||u===0||xt.hasOwnProperty(c)&&xt[c]?(""+u).trim():u+"px"}function Gt(c,u){c=c.style;for(var g in u)if(u.hasOwnProperty(g)){var b=g.indexOf("--")===0,P=ur(g,u[g],b);g==="float"&&(g="cssFloat"),b?c.setProperty(g,P):c[g]=P}}var ir=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Nr(c,u){if(u){if(ir[c]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(r(137,c));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(r(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(r(61))}if(u.style!=null&&typeof u.style!="object")throw Error(r(62))}}function Be(c,u){if(c.indexOf("-")===-1)return typeof u.is=="string";switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rr=null;function Vt(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var Yt=null,Rr=null,Qt=null;function Tt(c){if(c=Zc(c)){if(typeof Yt!="function")throw Error(r(280));var u=c.stateNode;u&&(u=pd(u),Yt(c.stateNode,c.type,u))}}function Ar(c){Rr?Qt?Qt.push(c):Qt=[c]:Rr=c}function Ht(){if(Rr){var c=Rr,u=Qt;if(Qt=Rr=null,Tt(c),u)for(c=0;c<u.length;c++)Tt(u[c])}}function nr(c,u){return c(u)}function jr(){}var cn=!1;function Et(c,u,g){if(cn)return c(u,g);cn=!0;try{return nr(c,u,g)}finally{cn=!1,(Rr!==null||Qt!==null)&&(jr(),Ht())}}function Ee(c,u){var g=c.stateNode;if(g===null)return null;var b=pd(g);if(b===null)return null;g=b[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(b=!b.disabled)||(c=c.type,b=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!b;break e;default:c=!1}if(c)return null;if(g&&typeof g!="function")throw Error(r(231,u,typeof g));return g}var nt=!1;if(l)try{var vt={};Object.defineProperty(vt,"passive",{get:function(){nt=!0}}),window.addEventListener("test",vt,vt),window.removeEventListener("test",vt,vt)}catch{nt=!1}function Kt(c,u,g,b,P,L,Y,ge,Ne){var Fe=Array.prototype.slice.call(arguments,3);try{u.apply(g,Fe)}catch(at){this.onError(at)}}var br=!1,Xr=null,_n=!1,ui=null,Fo={onError:function(c){br=!0,Xr=c}};function ta(c,u,g,b,P,L,Y,ge,Ne){br=!1,Xr=null,Kt.apply(Fo,arguments)}function Pa(c,u,g,b,P,L,Y,ge,Ne){if(ta.apply(this,arguments),br){if(br){var Fe=Xr;br=!1,Xr=null}else throw Error(r(198));_n||(_n=!0,ui=Fe)}}function bs(c){var u=c,g=c;if(c.alternate)for(;u.return;)u=u.return;else{c=u;do u=c,(u.flags&4098)!==0&&(g=u.return),c=u.return;while(c)}return u.tag===3?g:null}function Ei(c){if(c.tag===13){var u=c.memoizedState;if(u===null&&(c=c.alternate,c!==null&&(u=c.memoizedState)),u!==null)return u.dehydrated}return null}function di(c){if(bs(c)!==c)throw Error(r(188))}function Cl(c){var u=c.alternate;if(!u){if(u=bs(c),u===null)throw Error(r(188));return u!==c?null:c}for(var g=c,b=u;;){var P=g.return;if(P===null)break;var L=P.alternate;if(L===null){if(b=P.return,b!==null){g=b;continue}break}if(P.child===L.child){for(L=P.child;L;){if(L===g)return di(P),c;if(L===b)return di(P),u;L=L.sibling}throw Error(r(188))}if(g.return!==b.return)g=P,b=L;else{for(var Y=!1,ge=P.child;ge;){if(ge===g){Y=!0,g=P,b=L;break}if(ge===b){Y=!0,b=P,g=L;break}ge=ge.sibling}if(!Y){for(ge=L.child;ge;){if(ge===g){Y=!0,g=L,b=P;break}if(ge===b){Y=!0,b=L,g=P;break}ge=ge.sibling}if(!Y)throw Error(r(189))}}if(g.alternate!==b)throw Error(r(190))}if(g.tag!==3)throw Error(r(188));return g.stateNode.current===g?c:u}function ra(c){return c=Cl(c),c!==null?Bo(c):null}function Bo(c){if(c.tag===5||c.tag===6)return c;for(c=c.child;c!==null;){var u=Bo(c);if(u!==null)return u;c=c.sibling}return null}var El=t.unstable_scheduleCallback,Al=t.unstable_cancelCallback,Pc=t.unstable_shouldYield,nm=t.unstable_requestPaint,fn=t.unstable_now,df=t.unstable_getCurrentPriorityLevel,Tc=t.unstable_ImmediatePriority,fi=t.unstable_UserBlockingPriority,Uo=t.unstable_NormalPriority,ff=t.unstable_LowPriority,Rc=t.unstable_IdlePriority,Pl=null,hi=null;function hf(c){if(hi&&typeof hi.onCommitFiberRoot=="function")try{hi.onCommitFiberRoot(Pl,c,void 0,(c.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:qn,Lc=Math.log,sm=Math.LN2;function qn(c){return c>>>=0,c===0?32:31-(Lc(c)/sm|0)|0}var Tl=64,mi=4194304;function Ta(c){switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return c&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return c}}function Rl(c,u){var g=c.pendingLanes;if(g===0)return 0;var b=0,P=c.suspendedLanes,L=c.pingedLanes,Y=g&268435455;if(Y!==0){var ge=Y&~P;ge!==0?b=Ta(ge):(L&=Y,L!==0&&(b=Ta(L)))}else Y=g&~P,Y!==0?b=Ta(Y):L!==0&&(b=Ta(L));if(b===0)return 0;if(u!==0&&u!==b&&(u&P)===0&&(P=b&-b,L=u&-u,P>=L||P===16&&(L&4194240)!==0))return u;if((b&4)!==0&&(b|=g&16),u=c.entangledLanes,u!==0)for(c=c.entanglements,u&=b;0<u;)g=31-zn(u),P=1<<g,b|=c[g],u&=~P;return b}function Ai(c,u){switch(c){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ts(c,u){for(var g=c.suspendedLanes,b=c.pingedLanes,P=c.expirationTimes,L=c.pendingLanes;0<L;){var Y=31-zn(L),ge=1<<Y,Ne=P[Y];Ne===-1?((ge&g)===0||(ge&b)!==0)&&(P[Y]=Ai(ge,u)):Ne<=u&&(c.expiredLanes|=ge),L&=~ge}}function na(c){return c=c.pendingLanes&-1073741825,c!==0?c:c&1073741824?1073741824:0}function Ju(){var c=Tl;return Tl<<=1,(Tl&4194240)===0&&(Tl=64),c}function Zu(c){for(var u=[],g=0;31>g;g++)u.push(c);return u}function Ll(c,u,g){c.pendingLanes|=u,u!==536870912&&(c.suspendedLanes=0,c.pingedLanes=0),c=c.eventTimes,u=31-zn(u),c[u]=g}function Ra(c,u){var g=c.pendingLanes&~u;c.pendingLanes=u,c.suspendedLanes=0,c.pingedLanes=0,c.expiredLanes&=u,c.mutableReadLanes&=u,c.entangledLanes&=u,u=c.entanglements;var b=c.eventTimes;for(c=c.expirationTimes;0<g;){var P=31-zn(g),L=1<<P;u[P]=0,b[P]=-1,c[P]=-1,g&=~L}}function Dc(c,u){var g=c.entangledLanes|=u;for(c=c.entanglements;g;){var b=31-zn(g),P=1<<b;P&u|c[b]&u&&(c[b]|=u),g&=~P}}var Mr=0;function Dl(c){return c&=-c,1<c?4<c?(c&268435455)!==0?16:536870912:4:1}var $o,Xu,mf,pf,Ic,Oc=!1,Gs=[],La=null,Ks=null,Pi=null,Il=new Map,tr=new Map,Da=[],im="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gf(c,u){switch(c){case"focusin":case"focusout":La=null;break;case"dragenter":case"dragleave":Ks=null;break;case"mouseover":case"mouseout":Pi=null;break;case"pointerover":case"pointerout":Il.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":tr.delete(u.pointerId)}}function pi(c,u,g,b,P,L){return c===null||c.nativeEvent!==L?(c={blockedOn:u,domEventName:g,eventSystemFlags:b,nativeEvent:L,targetContainers:[P]},u!==null&&(u=Zc(u),u!==null&&Xu(u)),c):(c.eventSystemFlags|=b,u=c.targetContainers,P!==null&&u.indexOf(P)===-1&&u.push(P),c)}function Xa(c,u,g,b,P){switch(u){case"focusin":return La=pi(La,c,u,g,b,P),!0;case"dragenter":return Ks=pi(Ks,c,u,g,b,P),!0;case"mouseover":return Pi=pi(Pi,c,u,g,b,P),!0;case"pointerover":var L=P.pointerId;return Il.set(L,pi(Il.get(L)||null,c,u,g,b,P)),!0;case"gotpointercapture":return L=P.pointerId,tr.set(L,pi(tr.get(L)||null,c,u,g,b,P)),!0}return!1}function vf(c){var u=Zo(c.target);if(u!==null){var g=bs(u);if(g!==null){if(u=g.tag,u===13){if(u=Ei(g),u!==null){c.blockedOn=u,Ic(c.priority,function(){mf(g)});return}}else if(u===3&&g.stateNode.current.memoizedState.isDehydrated){c.blockedOn=g.tag===3?g.stateNode.containerInfo:null;return}}}c.blockedOn=null}function Mc(c){if(c.blockedOn!==null)return!1;for(var u=c.targetContainers;0<u.length;){var g=Fl(c.domEventName,c.eventSystemFlags,u[0],c.nativeEvent);if(g===null){g=c.nativeEvent;var b=new g.constructor(g.type,g);rr=b,g.target.dispatchEvent(b),rr=null}else return u=Zc(g),u!==null&&Xu(u),c.blockedOn=g,!1;u.shift()}return!0}function Ol(c,u,g){Mc(c)&&g.delete(u)}function ed(){Oc=!1,La!==null&&Mc(La)&&(La=null),Ks!==null&&Mc(Ks)&&(Ks=null),Pi!==null&&Mc(Pi)&&(Pi=null),Il.forEach(Ol),tr.forEach(Ol)}function sa(c,u){c.blockedOn===u&&(c.blockedOn=null,Oc||(Oc=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,ed)))}function Ml(c){function u(P){return sa(P,c)}if(0<Gs.length){sa(Gs[0],c);for(var g=1;g<Gs.length;g++){var b=Gs[g];b.blockedOn===c&&(b.blockedOn=null)}}for(La!==null&&sa(La,c),Ks!==null&&sa(Ks,c),Pi!==null&&sa(Pi,c),Il.forEach(u),tr.forEach(u),g=0;g<Da.length;g++)b=Da[g],b.blockedOn===c&&(b.blockedOn=null);for(;0<Da.length&&(g=Da[0],g.blockedOn===null);)vf(g),g.blockedOn===null&&Da.shift()}var Ys=C.ReactCurrentBatchConfig,Fc=!0;function td(c,u,g,b){var P=Mr,L=Ys.transition;Ys.transition=null;try{Mr=1,Bc(c,u,g,b)}finally{Mr=P,Ys.transition=L}}function rd(c,u,g,b){var P=Mr,L=Ys.transition;Ys.transition=null;try{Mr=4,Bc(c,u,g,b)}finally{Mr=P,Ys.transition=L}}function Bc(c,u,g,b){if(Fc){var P=Fl(c,u,g,b);if(P===null)fd(c,u,b,Ti,g),gf(c,b);else if(Xa(P,c,u,g,b))b.stopPropagation();else if(gf(c,b),u&4&&-1<im.indexOf(c)){for(;P!==null;){var L=Zc(P);if(L!==null&&$o(L),L=Fl(c,u,g,b),L===null&&fd(c,u,b,Ti,g),L===P)break;P=L}P!==null&&b.stopPropagation()}else fd(c,u,b,null,g)}}var Ti=null;function Fl(c,u,g,b){if(Ti=null,c=Vt(b),c=Zo(c),c!==null)if(u=bs(c),u===null)c=null;else if(g=u.tag,g===13){if(c=Ei(u),c!==null)return c;c=null}else if(g===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;c=null}else u!==c&&(c=null);return Ti=c,null}function Bl(c){switch(c){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(df()){case Tc:return 1;case fi:return 4;case Uo:case ff:return 16;case Rc:return 536870912;default:return 16}default:return 16}}var Ri=null,eo=null,zo=null;function nd(){if(zo)return zo;var c,u=eo,g=u.length,b,P="value"in Ri?Ri.value:Ri.textContent,L=P.length;for(c=0;c<g&&u[c]===P[c];c++);var Y=g-c;for(b=1;b<=Y&&u[g-b]===P[L-b];b++);return zo=P.slice(c,1<b?1-b:void 0)}function Ul(c){var u=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&u===13&&(c=13)):c=u,c===10&&(c=13),32<=c||c===13?c:0}function Li(){return!0}function Ia(){return!1}function As(c){function u(g,b,P,L,Y){this._reactName=g,this._targetInst=P,this.type=b,this.nativeEvent=L,this.target=Y,this.currentTarget=null;for(var ge in c)c.hasOwnProperty(ge)&&(g=c[ge],this[ge]=g?g(L):L[ge]);return this.isDefaultPrevented=(L.defaultPrevented!=null?L.defaultPrevented:L.returnValue===!1)?Li:Ia,this.isPropagationStopped=Ia,this}return xe(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():typeof g.returnValue!="unknown"&&(g.returnValue=!1),this.isDefaultPrevented=Li)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():typeof g.cancelBubble!="unknown"&&(g.cancelBubble=!0),this.isPropagationStopped=Li)},persist:function(){},isPersistent:Li}),u}var Di={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uc=As(Di),A=xe({},Di,{view:0,detail:0}),H=As(A),he,be,Ae,Ke=xe({},A,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$l,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Ae&&(Ae&&c.type==="mousemove"?(he=c.screenX-Ae.screenX,be=c.screenY-Ae.screenY):be=he=0,Ae=c),he)},movementY:function(c){return"movementY"in c?c.movementY:be}}),rt=As(Ke),Rt=xe({},Ke,{dataTransfer:0}),Ft=As(Rt),lr=xe({},A,{relatedTarget:0}),hr=As(lr),Dr=xe({},Di,{animationName:0,elapsedTime:0,pseudoElement:0}),Nn=As(Dr),Vn=xe({},Di,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),un=As(Vn),rs=xe({},Di,{data:0}),Dn=As(rs),_s={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},to={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ia={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ro(c){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(c):(c=ia[c])?!!u[c]:!1}function $l(){return ro}var $c=xe({},A,{key:function(c){if(c.key){var u=_s[c.key]||c.key;if(u!=="Unidentified")return u}return c.type==="keypress"?(c=Ul(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?to[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$l,charCode:function(c){return c.type==="keypress"?Ul(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ul(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),qo=As($c),zl=xe({},Ke,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Vo=As(zl),Wo=xe({},A,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$l}),Ns=As(Wo),ql=xe({},Di,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vl=As(ql),sd=xe({},Ke,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),id=As(sd),Us=[9,13,27,32],aa=l&&"CompositionEvent"in window,Oa=null;l&&"documentMode"in document&&(Oa=document.documentMode);var yf=l&&"TextEvent"in window&&!Oa,gi=l&&(!aa||Oa&&8<Oa&&11>=Oa),Ho=" ",zc=!1;function qc(c,u){switch(c){case"keyup":return Us.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function no(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var Ii=!1;function vi(c,u){switch(c){case"compositionend":return no(u);case"keypress":return u.which!==32?null:(zc=!0,Ho);case"textInput":return c=u.data,c===Ho&&zc?null:c;default:return null}}function yi(c,u){if(Ii)return c==="compositionend"||!aa&&qc(c,u)?(c=nd(),zo=eo=Ri=null,Ii=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return gi&&u.locale!=="ko"?null:u.data;default:return null}}var Go={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ma(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u==="input"?!!Go[c.type]:u==="textarea"}function so(c,u,g,b){Ar(b),u=Nf(u,"onChange"),0<u.length&&(g=new Uc("onChange","change",null,g,b),c.push({event:g,listeners:u}))}var io=null,Fa=null;function In(c){ud(c,0)}function Wl(c){var u=tc(c);if(ze(u))return c}function Ba(c,u){if(c==="change")return u}var oa=!1;if(l){var Hl;if(l){var Gl="oninput"in document;if(!Gl){var Vc=document.createElement("div");Vc.setAttribute("oninput","return;"),Gl=typeof Vc.oninput=="function"}Hl=Gl}else Hl=!1;oa=Hl&&(!document.documentMode||9<document.documentMode)}function Wc(){io&&(io.detachEvent("onpropertychange",ao),Fa=io=null)}function ao(c){if(c.propertyName==="value"&&Wl(Fa)){var u=[];so(u,Fa,c,Vt(c)),Et(In,u)}}function Ko(c,u,g){c==="focusin"?(Wc(),io=u,Fa=g,io.attachEvent("onpropertychange",ao)):c==="focusout"&&Wc()}function Yo(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Wl(Fa)}function Kl(c,u){if(c==="click")return Wl(u)}function Qo(c,u){if(c==="input"||c==="change")return Wl(u)}function Yl(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var Cn=typeof Object.is=="function"?Object.is:Yl;function Qs(c,u){if(Cn(c,u))return!0;if(typeof c!="object"||c===null||typeof u!="object"||u===null)return!1;var g=Object.keys(c),b=Object.keys(u);if(g.length!==b.length)return!1;for(b=0;b<g.length;b++){var P=g[b];if(!d.call(u,P)||!Cn(c[P],u[P]))return!1}return!0}function Br(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function Qr(c,u){var g=Br(c);c=0;for(var b;g;){if(g.nodeType===3){if(b=c+g.textContent.length,c<=u&&b>=u)return{node:g,offset:u-c};c=b}e:{for(;g;){if(g.nextSibling){g=g.nextSibling;break e}g=g.parentNode}g=void 0}g=Br(g)}}function En(c,u){return c&&u?c===u?!0:c&&c.nodeType===3?!1:u&&u.nodeType===3?En(c,u.parentNode):"contains"in c?c.contains(u):c.compareDocumentPosition?!!(c.compareDocumentPosition(u)&16):!1:!1}function Wn(){for(var c=window,u=ve();u instanceof c.HTMLIFrameElement;){try{var g=typeof u.contentWindow.location.href=="string"}catch{g=!1}if(g)c=u.contentWindow;else break;u=ve(c.document)}return u}function la(c){var u=c&&c.nodeName&&c.nodeName.toLowerCase();return u&&(u==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||u==="textarea"||c.contentEditable==="true")}function ad(c){var u=Wn(),g=c.focusedElem,b=c.selectionRange;if(u!==g&&g&&g.ownerDocument&&En(g.ownerDocument.documentElement,g)){if(b!==null&&la(g)){if(u=b.start,c=b.end,c===void 0&&(c=u),"selectionStart"in g)g.selectionStart=u,g.selectionEnd=Math.min(c,g.value.length);else if(c=(u=g.ownerDocument||document)&&u.defaultView||window,c.getSelection){c=c.getSelection();var P=g.textContent.length,L=Math.min(b.start,P);b=b.end===void 0?L:Math.min(b.end,P),!c.extend&&L>b&&(P=b,b=L,L=P),P=Qr(g,L);var Y=Qr(g,b);P&&Y&&(c.rangeCount!==1||c.anchorNode!==P.node||c.anchorOffset!==P.offset||c.focusNode!==Y.node||c.focusOffset!==Y.offset)&&(u=u.createRange(),u.setStart(P.node,P.offset),c.removeAllRanges(),L>b?(c.addRange(u),c.extend(Y.node,Y.offset)):(u.setEnd(Y.node,Y.offset),c.addRange(u)))}}for(u=[],c=g;c=c.parentNode;)c.nodeType===1&&u.push({element:c,left:c.scrollLeft,top:c.scrollTop});for(typeof g.focus=="function"&&g.focus(),g=0;g<u.length;g++)c=u[g],c.element.scrollLeft=c.left,c.element.scrollTop=c.top}}var Hc=l&&"documentMode"in document&&11>=document.documentMode,oo=null,xf=null,Gc=null,wf=!1;function am(c,u,g){var b=g.window===g?g.document:g.nodeType===9?g:g.ownerDocument;wf||oo==null||oo!==ve(b)||(b=oo,"selectionStart"in b&&la(b)?b={start:b.selectionStart,end:b.selectionEnd}:(b=(b.ownerDocument&&b.ownerDocument.defaultView||window).getSelection(),b={anchorNode:b.anchorNode,anchorOffset:b.anchorOffset,focusNode:b.focusNode,focusOffset:b.focusOffset}),Gc&&Qs(Gc,b)||(Gc=b,b=Nf(xf,"onSelect"),0<b.length&&(u=new Uc("onSelect","select",null,u,g),c.push({event:u,listeners:b}),u.target=oo)))}function od(c,u){var g={};return g[c.toLowerCase()]=u.toLowerCase(),g["Webkit"+c]="webkit"+u,g["Moz"+c]="moz"+u,g}var Ql={animationend:od("Animation","AnimationEnd"),animationiteration:od("Animation","AnimationIteration"),animationstart:od("Animation","AnimationStart"),transitionend:od("Transition","TransitionEnd")},Jl={},om={};l&&(om=document.createElement("div").style,"AnimationEvent"in window||(delete Ql.animationend.animation,delete Ql.animationiteration.animation,delete Ql.animationstart.animation),"TransitionEvent"in window||delete Ql.transitionend.transition);function ld(c){if(Jl[c])return Jl[c];if(!Ql[c])return c;var u=Ql[c],g;for(g in u)if(u.hasOwnProperty(g)&&g in om)return Jl[c]=u[g];return c}var lm=ld("animationend"),cm=ld("animationiteration"),um=ld("animationstart"),dm=ld("transitionend"),fm=new Map,hm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ua(c,u){fm.set(c,u),a(u,[c])}for(var Kc=0;Kc<hm.length;Kc++){var $s=hm[Kc],Oi=$s.toLowerCase(),bf=$s[0].toUpperCase()+$s.slice(1);Ua(Oi,"on"+bf)}Ua(lm,"onAnimationEnd"),Ua(cm,"onAnimationIteration"),Ua(um,"onAnimationStart"),Ua("dblclick","onDoubleClick"),Ua("focusin","onFocus"),Ua("focusout","onBlur"),Ua(dm,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),a("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),a("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),a("onBeforeInput",["compositionend","keypress","textInput","paste"]),a("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),a("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Jo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Hp=new Set("cancel close invalid load scroll toggle".split(" ").concat(Jo));function cd(c,u,g){var b=c.type||"unknown-event";c.currentTarget=g,Pa(b,u,void 0,c),c.currentTarget=null}function ud(c,u){u=(u&4)!==0;for(var g=0;g<c.length;g++){var b=c[g],P=b.event;b=b.listeners;e:{var L=void 0;if(u)for(var Y=b.length-1;0<=Y;Y--){var ge=b[Y],Ne=ge.instance,Fe=ge.currentTarget;if(ge=ge.listener,Ne!==L&&P.isPropagationStopped())break e;cd(P,ge,Fe),L=Ne}else for(Y=0;Y<b.length;Y++){if(ge=b[Y],Ne=ge.instance,Fe=ge.currentTarget,ge=ge.listener,Ne!==L&&P.isPropagationStopped())break e;cd(P,ge,Fe),L=Ne}}}if(_n)throw c=ui,_n=!1,ui=null,c}function en(c,u){var g=u[Zs];g===void 0&&(g=u[Zs]=new Set);var b=c+"__bubble";g.has(b)||(dd(u,c,2,!1),g.add(b))}function _f(c,u,g){var b=0;u&&(b|=4),dd(g,c,b,u)}var Yc="_reactListening"+Math.random().toString(36).slice(2);function Zl(c){if(!c[Yc]){c[Yc]=!0,n.forEach(function(g){g!=="selectionchange"&&(Hp.has(g)||_f(g,!1,c),_f(g,!0,c))});var u=c.nodeType===9?c:c.ownerDocument;u===null||u[Yc]||(u[Yc]=!0,_f("selectionchange",!1,u))}}function dd(c,u,g,b){switch(Bl(u)){case 1:var P=td;break;case 4:P=rd;break;default:P=Bc}g=P.bind(null,u,g,c),P=void 0,!nt||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(P=!0),b?P!==void 0?c.addEventListener(u,g,{capture:!0,passive:P}):c.addEventListener(u,g,!0):P!==void 0?c.addEventListener(u,g,{passive:P}):c.addEventListener(u,g,!1)}function fd(c,u,g,b,P){var L=b;if((u&1)===0&&(u&2)===0&&b!==null)e:for(;;){if(b===null)return;var Y=b.tag;if(Y===3||Y===4){var ge=b.stateNode.containerInfo;if(ge===P||ge.nodeType===8&&ge.parentNode===P)break;if(Y===4)for(Y=b.return;Y!==null;){var Ne=Y.tag;if((Ne===3||Ne===4)&&(Ne=Y.stateNode.containerInfo,Ne===P||Ne.nodeType===8&&Ne.parentNode===P))return;Y=Y.return}for(;ge!==null;){if(Y=Zo(ge),Y===null)return;if(Ne=Y.tag,Ne===5||Ne===6){b=L=Y;continue e}ge=ge.parentNode}}b=b.return}Et(function(){var Fe=L,at=Vt(g),ct=[];e:{var st=fm.get(c);if(st!==void 0){var _t=Uc,Dt=c;switch(c){case"keypress":if(Ul(g)===0)break e;case"keydown":case"keyup":_t=qo;break;case"focusin":Dt="focus",_t=hr;break;case"focusout":Dt="blur",_t=hr;break;case"beforeblur":case"afterblur":_t=hr;break;case"click":if(g.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_t=rt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_t=Ft;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_t=Ns;break;case lm:case cm:case um:_t=Nn;break;case dm:_t=Vl;break;case"scroll":_t=H;break;case"wheel":_t=id;break;case"copy":case"cut":case"paste":_t=un;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_t=Vo}var Ot=(u&4)!==0,is=!Ot&&c==="scroll",Le=Ot?st!==null?st+"Capture":null:st;Ot=[];for(var Se=Fe,Ie;Se!==null;){Ie=Se;var ut=Ie.stateNode;if(Ie.tag===5&&ut!==null&&(Ie=ut,Le!==null&&(ut=Ee(Se,Le),ut!=null&&Ot.push(hd(Se,ut,Ie)))),is)break;Se=Se.return}0<Ot.length&&(st=new _t(st,Dt,null,g,at),ct.push({event:st,listeners:Ot}))}}if((u&7)===0){e:{if(st=c==="mouseover"||c==="pointerover",_t=c==="mouseout"||c==="pointerout",st&&g!==rr&&(Dt=g.relatedTarget||g.fromElement)&&(Zo(Dt)||Dt[Ps]))break e;if((_t||st)&&(st=at.window===at?at:(st=at.ownerDocument)?st.defaultView||st.parentWindow:window,_t?(Dt=g.relatedTarget||g.toElement,_t=Fe,Dt=Dt?Zo(Dt):null,Dt!==null&&(is=bs(Dt),Dt!==is||Dt.tag!==5&&Dt.tag!==6)&&(Dt=null)):(_t=null,Dt=Fe),_t!==Dt)){if(Ot=rt,ut="onMouseLeave",Le="onMouseEnter",Se="mouse",(c==="pointerout"||c==="pointerover")&&(Ot=Vo,ut="onPointerLeave",Le="onPointerEnter",Se="pointer"),is=_t==null?st:tc(_t),Ie=Dt==null?st:tc(Dt),st=new Ot(ut,Se+"leave",_t,g,at),st.target=is,st.relatedTarget=Ie,ut=null,Zo(at)===Fe&&(Ot=new Ot(Le,Se+"enter",Dt,g,at),Ot.target=Ie,Ot.relatedTarget=is,ut=Ot),is=ut,_t&&Dt)t:{for(Ot=_t,Le=Dt,Se=0,Ie=Ot;Ie;Ie=Xl(Ie))Se++;for(Ie=0,ut=Le;ut;ut=Xl(ut))Ie++;for(;0<Se-Ie;)Ot=Xl(Ot),Se--;for(;0<Ie-Se;)Le=Xl(Le),Ie--;for(;Se--;){if(Ot===Le||Le!==null&&Ot===Le.alternate)break t;Ot=Xl(Ot),Le=Xl(Le)}Ot=null}else Ot=null;_t!==null&&Gp(ct,st,_t,Ot,!1),Dt!==null&&is!==null&&Gp(ct,is,Dt,Ot,!0)}}e:{if(st=Fe?tc(Fe):window,_t=st.nodeName&&st.nodeName.toLowerCase(),_t==="select"||_t==="input"&&st.type==="file")var zt=Ba;else if(Ma(st))if(oa)zt=Qo;else{zt=Yo;var Jt=Ko}else(_t=st.nodeName)&&_t.toLowerCase()==="input"&&(st.type==="checkbox"||st.type==="radio")&&(zt=Kl);if(zt&&(zt=zt(c,Fe))){so(ct,zt,g,at);break e}Jt&&Jt(c,st,Fe),c==="focusout"&&(Jt=st._wrapperState)&&Jt.controlled&&st.type==="number"&&Xe(st,"number",st.value)}switch(Jt=Fe?tc(Fe):window,c){case"focusin":(Ma(Jt)||Jt.contentEditable==="true")&&(oo=Jt,xf=Fe,Gc=null);break;case"focusout":Gc=xf=oo=null;break;case"mousedown":wf=!0;break;case"contextmenu":case"mouseup":case"dragend":wf=!1,am(ct,g,at);break;case"selectionchange":if(Hc)break;case"keydown":case"keyup":am(ct,g,at)}var Zt;if(aa)e:{switch(c){case"compositionstart":var dr="onCompositionStart";break e;case"compositionend":dr="onCompositionEnd";break e;case"compositionupdate":dr="onCompositionUpdate";break e}dr=void 0}else Ii?qc(c,g)&&(dr="onCompositionEnd"):c==="keydown"&&g.keyCode===229&&(dr="onCompositionStart");dr&&(gi&&g.locale!=="ko"&&(Ii||dr!=="onCompositionStart"?dr==="onCompositionEnd"&&Ii&&(Zt=nd()):(Ri=at,eo="value"in Ri?Ri.value:Ri.textContent,Ii=!0)),Jt=Nf(Fe,dr),0<Jt.length&&(dr=new Dn(dr,c,null,g,at),ct.push({event:dr,listeners:Jt}),Zt?dr.data=Zt:(Zt=no(g),Zt!==null&&(dr.data=Zt)))),(Zt=yf?vi(c,g):yi(c,g))&&(Fe=Nf(Fe,"onBeforeInput"),0<Fe.length&&(at=new Dn("onBeforeInput","beforeinput",null,g,at),ct.push({event:at,listeners:Fe}),at.data=Zt))}ud(ct,u)})}function hd(c,u,g){return{instance:c,listener:u,currentTarget:g}}function Nf(c,u){for(var g=u+"Capture",b=[];c!==null;){var P=c,L=P.stateNode;P.tag===5&&L!==null&&(P=L,L=Ee(c,g),L!=null&&b.unshift(hd(c,L,P)),L=Ee(c,u),L!=null&&b.push(hd(c,L,P))),c=c.return}return b}function Xl(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5);return c||null}function Gp(c,u,g,b,P){for(var L=u._reactName,Y=[];g!==null&&g!==b;){var ge=g,Ne=ge.alternate,Fe=ge.stateNode;if(Ne!==null&&Ne===b)break;ge.tag===5&&Fe!==null&&(ge=Fe,P?(Ne=Ee(g,L),Ne!=null&&Y.unshift(hd(g,Ne,ge))):P||(Ne=Ee(g,L),Ne!=null&&Y.push(hd(g,Ne,ge)))),g=g.return}Y.length!==0&&c.push({event:u,listeners:Y})}var cy=/\r\n?/g,uy=/\u0000|\uFFFD/g;function Kp(c){return(typeof c=="string"?c:""+c).replace(cy,`
`).replace(uy,"")}function jf(c,u,g){if(u=Kp(u),Kp(c)!==u&&g)throw Error(r(425))}function Qc(){}var md=null,ec=null;function mm(c,u){return c==="textarea"||c==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var pm=typeof setTimeout=="function"?setTimeout:void 0,Yp=typeof clearTimeout=="function"?clearTimeout:void 0,Qp=typeof Promise=="function"?Promise:void 0,dy=typeof queueMicrotask=="function"?queueMicrotask:typeof Qp<"u"?function(c){return Qp.resolve(null).then(c).catch(fy)}:pm;function fy(c){setTimeout(function(){throw c})}function gm(c,u){var g=u,b=0;do{var P=g.nextSibling;if(c.removeChild(g),P&&P.nodeType===8)if(g=P.data,g==="/$"){if(b===0){c.removeChild(P),Ml(u);return}b--}else g!=="$"&&g!=="$?"&&g!=="$!"||b++;g=P}while(g);Ml(u)}function zs(c){for(;c!=null;c=c.nextSibling){var u=c.nodeType;if(u===1||u===3)break;if(u===8){if(u=c.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return c}function Mi(c){c=c.previousSibling;for(var u=0;c;){if(c.nodeType===8){var g=c.data;if(g==="$"||g==="$!"||g==="$?"){if(u===0)return c;u--}else g==="/$"&&u++}c=c.previousSibling}return null}var Js=Math.random().toString(36).slice(2),$a="__reactFiber$"+Js,Jc="__reactProps$"+Js,Ps="__reactContainer$"+Js,Zs="__reactEvents$"+Js,hy="__reactListeners$"+Js,my="__reactHandles$"+Js;function Zo(c){var u=c[$a];if(u)return u;for(var g=c.parentNode;g;){if(u=g[Ps]||g[$a]){if(g=u.alternate,u.child!==null||g!==null&&g.child!==null)for(c=Mi(c);c!==null;){if(g=c[$a])return g;c=Mi(c)}return u}c=g,g=c.parentNode}return null}function Zc(c){return c=c[$a]||c[Ps],!c||c.tag!==5&&c.tag!==6&&c.tag!==13&&c.tag!==3?null:c}function tc(c){if(c.tag===5||c.tag===6)return c.stateNode;throw Error(r(33))}function pd(c){return c[Jc]||null}var vm=[],lo=-1;function ca(c){return{current:c}}function Kr(c){0>lo||(c.current=vm[lo],vm[lo]=null,lo--)}function Jr(c,u){lo++,vm[lo]=c.current,c.current=u}var Xo={},js=ca(Xo),Xs=ca(!1),rc=Xo;function Xc(c,u){var g=c.type.contextTypes;if(!g)return Xo;var b=c.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===u)return b.__reactInternalMemoizedMaskedChildContext;var P={},L;for(L in g)P[L]=u[L];return b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=u,c.__reactInternalMemoizedMaskedChildContext=P),P}function ei(c){return c=c.childContextTypes,c!=null}function Sf(){Kr(Xs),Kr(js)}function Jp(c,u,g){if(js.current!==Xo)throw Error(r(168));Jr(js,u),Jr(Xs,g)}function ym(c,u,g){var b=c.stateNode;if(u=u.childContextTypes,typeof b.getChildContext!="function")return g;b=b.getChildContext();for(var P in b)if(!(P in u))throw Error(r(108,X(c)||"Unknown",P));return xe({},g,b)}function nc(c){return c=(c=c.stateNode)&&c.__reactInternalMemoizedMergedChildContext||Xo,rc=js.current,Jr(js,c),Jr(Xs,Xs.current),!0}function Zp(c,u,g){var b=c.stateNode;if(!b)throw Error(r(169));g?(c=ym(c,u,rc),b.__reactInternalMemoizedMergedChildContext=c,Kr(Xs),Kr(js),Jr(js,c)):Kr(Xs),Jr(Xs,g)}var co=null,gd=!1,y=!1;function N(c){co===null?co=[c]:co.push(c)}function T(c){gd=!0,N(c)}function $(){if(!y&&co!==null){y=!0;var c=0,u=Mr;try{var g=co;for(Mr=1;c<g.length;c++){var b=g[c];do b=b(!0);while(b!==null)}co=null,gd=!1}catch(P){throw co!==null&&(co=co.slice(c+1)),El(Tc,$),P}finally{Mr=u,y=!1}}return null}var W=[],J=0,ee=null,ae=0,oe=[],de=0,_e=null,Re=1,fe="";function je(c,u){W[J++]=ae,W[J++]=ee,ee=c,ae=u}function Te(c,u,g){oe[de++]=Re,oe[de++]=fe,oe[de++]=_e,_e=c;var b=Re;c=fe;var P=32-zn(b)-1;b&=~(1<<P),g+=1;var L=32-zn(u)+P;if(30<L){var Y=P-P%5;L=(b&(1<<Y)-1).toString(32),b>>=Y,P-=Y,Re=1<<32-zn(u)+P|g<<P|b,fe=L+c}else Re=1<<L|g<<P|b,fe=c}function Ge(c){c.return!==null&&(je(c,1),Te(c,1,0))}function De(c){for(;c===ee;)ee=W[--J],W[J]=null,ae=W[--J],W[J]=null;for(;c===_e;)_e=oe[--de],oe[de]=null,fe=oe[--de],oe[de]=null,Re=oe[--de],oe[de]=null}var $e=null,We=null,Ye=!1,Qe=null;function Bt(c,u){var g=Ha(5,null,null,0);g.elementType="DELETED",g.stateNode=u,g.return=c,u=c.deletions,u===null?(c.deletions=[g],c.flags|=16):u.push(g)}function kt(c,u){switch(c.tag){case 5:var g=c.type;return u=u.nodeType!==1||g.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(c.stateNode=u,$e=c,We=zs(u.firstChild),!0):!1;case 6:return u=c.pendingProps===""||u.nodeType!==3?null:u,u!==null?(c.stateNode=u,$e=c,We=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(g=_e!==null?{id:Re,overflow:fe}:null,c.memoizedState={dehydrated:u,treeContext:g,retryLane:1073741824},g=Ha(18,null,null,0),g.stateNode=u,g.return=c,c.child=g,$e=c,We=null,!0):!1;default:return!1}}function mr(c){return(c.mode&1)!==0&&(c.flags&128)===0}function Lt(c){if(Ye){var u=We;if(u){var g=u;if(!kt(c,u)){if(mr(c))throw Error(r(418));u=zs(g.nextSibling);var b=$e;u&&kt(c,u)?Bt(b,g):(c.flags=c.flags&-4097|2,Ye=!1,$e=c)}}else{if(mr(c))throw Error(r(418));c.flags=c.flags&-4097|2,Ye=!1,$e=c}}}function kr(c){for(c=c.return;c!==null&&c.tag!==5&&c.tag!==3&&c.tag!==13;)c=c.return;$e=c}function An(c){if(c!==$e)return!1;if(!Ye)return kr(c),Ye=!0,!1;var u;if((u=c.tag!==3)&&!(u=c.tag!==5)&&(u=c.type,u=u!=="head"&&u!=="body"&&!mm(c.type,c.memoizedProps)),u&&(u=We)){if(mr(c))throw gr(),Error(r(418));for(;u;)Bt(c,u),u=zs(u.nextSibling)}if(kr(c),c.tag===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(r(317));e:{for(c=c.nextSibling,u=0;c;){if(c.nodeType===8){var g=c.data;if(g==="/$"){if(u===0){We=zs(c.nextSibling);break e}u--}else g!=="$"&&g!=="$!"&&g!=="$?"||u++}c=c.nextSibling}We=null}}else We=$e?zs(c.stateNode.nextSibling):null;return!0}function gr(){for(var c=We;c;)c=zs(c.nextSibling)}function Ct(){We=$e=null,Ye=!1}function mt(c){Qe===null?Qe=[c]:Qe.push(c)}var On=C.ReactCurrentBatchConfig;function ar(c,u,g){if(c=g.ref,c!==null&&typeof c!="function"&&typeof c!="object"){if(g._owner){if(g=g._owner,g){if(g.tag!==1)throw Error(r(309));var b=g.stateNode}if(!b)throw Error(r(147,c));var P=b,L=""+c;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===L?u.ref:(u=function(Y){var ge=P.refs;Y===null?delete ge[L]:ge[L]=Y},u._stringRef=L,u)}if(typeof c!="string")throw Error(r(284));if(!g._owner)throw Error(r(290,c))}return c}function Sr(c,u){throw c=Object.prototype.toString.call(u),Error(r(31,c==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":c))}function dn(c){var u=c._init;return u(c._payload)}function fs(c){function u(Le,Se){if(c){var Ie=Le.deletions;Ie===null?(Le.deletions=[Se],Le.flags|=16):Ie.push(Se)}}function g(Le,Se){if(!c)return null;for(;Se!==null;)u(Le,Se),Se=Se.sibling;return null}function b(Le,Se){for(Le=new Map;Se!==null;)Se.key!==null?Le.set(Se.key,Se):Le.set(Se.index,Se),Se=Se.sibling;return Le}function P(Le,Se){return Le=cu(Le,Se),Le.index=0,Le.sibling=null,Le}function L(Le,Se,Ie){return Le.index=Ie,c?(Ie=Le.alternate,Ie!==null?(Ie=Ie.index,Ie<Se?(Le.flags|=2,Se):Ie):(Le.flags|=2,Se)):(Le.flags|=1048576,Se)}function Y(Le){return c&&Le.alternate===null&&(Le.flags|=2),Le}function ge(Le,Se,Ie,ut){return Se===null||Se.tag!==6?(Se=qy(Ie,Le.mode,ut),Se.return=Le,Se):(Se=P(Se,Ie),Se.return=Le,Se)}function Ne(Le,Se,Ie,ut){var zt=Ie.type;return zt===F?at(Le,Se,Ie.props.children,ut,Ie.key):Se!==null&&(Se.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===ie&&dn(zt)===Se.type)?(ut=P(Se,Ie.props),ut.ref=ar(Le,Se,Ie),ut.return=Le,ut):(ut=yg(Ie.type,Ie.key,Ie.props,null,Le.mode,ut),ut.ref=ar(Le,Se,Ie),ut.return=Le,ut)}function Fe(Le,Se,Ie,ut){return Se===null||Se.tag!==4||Se.stateNode.containerInfo!==Ie.containerInfo||Se.stateNode.implementation!==Ie.implementation?(Se=Vy(Ie,Le.mode,ut),Se.return=Le,Se):(Se=P(Se,Ie.children||[]),Se.return=Le,Se)}function at(Le,Se,Ie,ut,zt){return Se===null||Se.tag!==7?(Se=jd(Ie,Le.mode,ut,zt),Se.return=Le,Se):(Se=P(Se,Ie),Se.return=Le,Se)}function ct(Le,Se,Ie){if(typeof Se=="string"&&Se!==""||typeof Se=="number")return Se=qy(""+Se,Le.mode,Ie),Se.return=Le,Se;if(typeof Se=="object"&&Se!==null){switch(Se.$$typeof){case D:return Ie=yg(Se.type,Se.key,Se.props,null,Le.mode,Ie),Ie.ref=ar(Le,null,Se),Ie.return=Le,Ie;case M:return Se=Vy(Se,Le.mode,Ie),Se.return=Le,Se;case ie:var ut=Se._init;return ct(Le,ut(Se._payload),Ie)}if(me(Se)||se(Se))return Se=jd(Se,Le.mode,Ie,null),Se.return=Le,Se;Sr(Le,Se)}return null}function st(Le,Se,Ie,ut){var zt=Se!==null?Se.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return zt!==null?null:ge(Le,Se,""+Ie,ut);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case D:return Ie.key===zt?Ne(Le,Se,Ie,ut):null;case M:return Ie.key===zt?Fe(Le,Se,Ie,ut):null;case ie:return zt=Ie._init,st(Le,Se,zt(Ie._payload),ut)}if(me(Ie)||se(Ie))return zt!==null?null:at(Le,Se,Ie,ut,null);Sr(Le,Ie)}return null}function _t(Le,Se,Ie,ut,zt){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Le=Le.get(Ie)||null,ge(Se,Le,""+ut,zt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case D:return Le=Le.get(ut.key===null?Ie:ut.key)||null,Ne(Se,Le,ut,zt);case M:return Le=Le.get(ut.key===null?Ie:ut.key)||null,Fe(Se,Le,ut,zt);case ie:var Jt=ut._init;return _t(Le,Se,Ie,Jt(ut._payload),zt)}if(me(ut)||se(ut))return Le=Le.get(Ie)||null,at(Se,Le,ut,zt,null);Sr(Se,ut)}return null}function Dt(Le,Se,Ie,ut){for(var zt=null,Jt=null,Zt=Se,dr=Se=0,Is=null;Zt!==null&&dr<Ie.length;dr++){Zt.index>dr?(Is=Zt,Zt=null):Is=Zt.sibling;var Wr=st(Le,Zt,Ie[dr],ut);if(Wr===null){Zt===null&&(Zt=Is);break}c&&Zt&&Wr.alternate===null&&u(Le,Zt),Se=L(Wr,Se,dr),Jt===null?zt=Wr:Jt.sibling=Wr,Jt=Wr,Zt=Is}if(dr===Ie.length)return g(Le,Zt),Ye&&je(Le,dr),zt;if(Zt===null){for(;dr<Ie.length;dr++)Zt=ct(Le,Ie[dr],ut),Zt!==null&&(Se=L(Zt,Se,dr),Jt===null?zt=Zt:Jt.sibling=Zt,Jt=Zt);return Ye&&je(Le,dr),zt}for(Zt=b(Le,Zt);dr<Ie.length;dr++)Is=_t(Zt,Le,dr,Ie[dr],ut),Is!==null&&(c&&Is.alternate!==null&&Zt.delete(Is.key===null?dr:Is.key),Se=L(Is,Se,dr),Jt===null?zt=Is:Jt.sibling=Is,Jt=Is);return c&&Zt.forEach(function(uu){return u(Le,uu)}),Ye&&je(Le,dr),zt}function Ot(Le,Se,Ie,ut){var zt=se(Ie);if(typeof zt!="function")throw Error(r(150));if(Ie=zt.call(Ie),Ie==null)throw Error(r(151));for(var Jt=zt=null,Zt=Se,dr=Se=0,Is=null,Wr=Ie.next();Zt!==null&&!Wr.done;dr++,Wr=Ie.next()){Zt.index>dr?(Is=Zt,Zt=null):Is=Zt.sibling;var uu=st(Le,Zt,Wr.value,ut);if(uu===null){Zt===null&&(Zt=Is);break}c&&Zt&&uu.alternate===null&&u(Le,Zt),Se=L(uu,Se,dr),Jt===null?zt=uu:Jt.sibling=uu,Jt=uu,Zt=Is}if(Wr.done)return g(Le,Zt),Ye&&je(Le,dr),zt;if(Zt===null){for(;!Wr.done;dr++,Wr=Ie.next())Wr=ct(Le,Wr.value,ut),Wr!==null&&(Se=L(Wr,Se,dr),Jt===null?zt=Wr:Jt.sibling=Wr,Jt=Wr);return Ye&&je(Le,dr),zt}for(Zt=b(Le,Zt);!Wr.done;dr++,Wr=Ie.next())Wr=_t(Zt,Le,dr,Wr.value,ut),Wr!==null&&(c&&Wr.alternate!==null&&Zt.delete(Wr.key===null?dr:Wr.key),Se=L(Wr,Se,dr),Jt===null?zt=Wr:Jt.sibling=Wr,Jt=Wr);return c&&Zt.forEach(function(i8){return u(Le,i8)}),Ye&&je(Le,dr),zt}function is(Le,Se,Ie,ut){if(typeof Ie=="object"&&Ie!==null&&Ie.type===F&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case D:e:{for(var zt=Ie.key,Jt=Se;Jt!==null;){if(Jt.key===zt){if(zt=Ie.type,zt===F){if(Jt.tag===7){g(Le,Jt.sibling),Se=P(Jt,Ie.props.children),Se.return=Le,Le=Se;break e}}else if(Jt.elementType===zt||typeof zt=="object"&&zt!==null&&zt.$$typeof===ie&&dn(zt)===Jt.type){g(Le,Jt.sibling),Se=P(Jt,Ie.props),Se.ref=ar(Le,Jt,Ie),Se.return=Le,Le=Se;break e}g(Le,Jt);break}else u(Le,Jt);Jt=Jt.sibling}Ie.type===F?(Se=jd(Ie.props.children,Le.mode,ut,Ie.key),Se.return=Le,Le=Se):(ut=yg(Ie.type,Ie.key,Ie.props,null,Le.mode,ut),ut.ref=ar(Le,Se,Ie),ut.return=Le,Le=ut)}return Y(Le);case M:e:{for(Jt=Ie.key;Se!==null;){if(Se.key===Jt)if(Se.tag===4&&Se.stateNode.containerInfo===Ie.containerInfo&&Se.stateNode.implementation===Ie.implementation){g(Le,Se.sibling),Se=P(Se,Ie.children||[]),Se.return=Le,Le=Se;break e}else{g(Le,Se);break}else u(Le,Se);Se=Se.sibling}Se=Vy(Ie,Le.mode,ut),Se.return=Le,Le=Se}return Y(Le);case ie:return Jt=Ie._init,is(Le,Se,Jt(Ie._payload),ut)}if(me(Ie))return Dt(Le,Se,Ie,ut);if(se(Ie))return Ot(Le,Se,Ie,ut);Sr(Le,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,Se!==null&&Se.tag===6?(g(Le,Se.sibling),Se=P(Se,Ie),Se.return=Le,Le=Se):(g(Le,Se),Se=qy(Ie,Le.mode,ut),Se.return=Le,Le=Se),Y(Le)):g(Le,Se)}return is}var Hn=fs(!0),jn=fs(!1),ns=ca(null),hs=null,pn=null,Pr=null;function Ur(){Pr=pn=hs=null}function gn(c){var u=ns.current;Kr(ns),c._currentValue=u}function $r(c,u,g){for(;c!==null;){var b=c.alternate;if((c.childLanes&u)!==u?(c.childLanes|=u,b!==null&&(b.childLanes|=u)):b!==null&&(b.childLanes&u)!==u&&(b.childLanes|=u),c===g)break;c=c.return}}function Pn(c,u){hs=c,Pr=pn=null,c=c.dependencies,c!==null&&c.firstContext!==null&&((c.lanes&u)!==0&&(Bi=!0),c.firstContext=null)}function Tn(c){var u=c._currentValue;if(Pr!==c)if(c={context:c,memoizedValue:u,next:null},pn===null){if(hs===null)throw Error(r(308));pn=c,hs.dependencies={lanes:0,firstContext:c}}else pn=pn.next=c;return u}var tn=null;function Ts(c){tn===null?tn=[c]:tn.push(c)}function Zr(c,u,g,b){var P=u.interleaved;return P===null?(g.next=g,Ts(u)):(g.next=P.next,P.next=g),u.interleaved=g,rn(c,b)}function rn(c,u){c.lanes|=u;var g=c.alternate;for(g!==null&&(g.lanes|=u),g=c,c=c.return;c!==null;)c.childLanes|=u,g=c.alternate,g!==null&&(g.childLanes|=u),g=c,c=c.return;return g.tag===3?g.stateNode:null}var Gn=!1;function Ss(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ti(c,u){c=c.updateQueue,u.updateQueue===c&&(u.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,effects:c.effects})}function Mn(c,u){return{eventTime:c,lane:u,tag:0,payload:null,callback:null,next:null}}function Fn(c,u,g){var b=c.updateQueue;if(b===null)return null;if(b=b.shared,(zr&2)!==0){var P=b.pending;return P===null?u.next=u:(u.next=P.next,P.next=u),b.pending=u,rn(c,g)}return P=b.interleaved,P===null?(u.next=u,Ts(b)):(u.next=P.next,P.next=u),b.interleaved=u,rn(c,g)}function Rs(c,u,g){if(u=u.updateQueue,u!==null&&(u=u.shared,(g&4194240)!==0)){var b=u.lanes;b&=c.pendingLanes,g|=b,u.lanes=g,Dc(c,g)}}function nn(c,u){var g=c.updateQueue,b=c.alternate;if(b!==null&&(b=b.updateQueue,g===b)){var P=null,L=null;if(g=g.firstBaseUpdate,g!==null){do{var Y={eventTime:g.eventTime,lane:g.lane,tag:g.tag,payload:g.payload,callback:g.callback,next:null};L===null?P=L=Y:L=L.next=Y,g=g.next}while(g!==null);L===null?P=L=u:L=L.next=u}else P=L=u;g={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:L,shared:b.shared,effects:b.effects},c.updateQueue=g;return}c=g.lastBaseUpdate,c===null?g.firstBaseUpdate=u:c.next=u,g.lastBaseUpdate=u}function Ls(c,u,g,b){var P=c.updateQueue;Gn=!1;var L=P.firstBaseUpdate,Y=P.lastBaseUpdate,ge=P.shared.pending;if(ge!==null){P.shared.pending=null;var Ne=ge,Fe=Ne.next;Ne.next=null,Y===null?L=Fe:Y.next=Fe,Y=Ne;var at=c.alternate;at!==null&&(at=at.updateQueue,ge=at.lastBaseUpdate,ge!==Y&&(ge===null?at.firstBaseUpdate=Fe:ge.next=Fe,at.lastBaseUpdate=Ne))}if(L!==null){var ct=P.baseState;Y=0,at=Fe=Ne=null,ge=L;do{var st=ge.lane,_t=ge.eventTime;if((b&st)===st){at!==null&&(at=at.next={eventTime:_t,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var Dt=c,Ot=ge;switch(st=u,_t=g,Ot.tag){case 1:if(Dt=Ot.payload,typeof Dt=="function"){ct=Dt.call(_t,ct,st);break e}ct=Dt;break e;case 3:Dt.flags=Dt.flags&-65537|128;case 0:if(Dt=Ot.payload,st=typeof Dt=="function"?Dt.call(_t,ct,st):Dt,st==null)break e;ct=xe({},ct,st);break e;case 2:Gn=!0}}ge.callback!==null&&ge.lane!==0&&(c.flags|=64,st=P.effects,st===null?P.effects=[ge]:st.push(ge))}else _t={eventTime:_t,lane:st,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},at===null?(Fe=at=_t,Ne=ct):at=at.next=_t,Y|=st;if(ge=ge.next,ge===null){if(ge=P.shared.pending,ge===null)break;st=ge,ge=st.next,st.next=null,P.lastBaseUpdate=st,P.shared.pending=null}}while(!0);if(at===null&&(Ne=ct),P.baseState=Ne,P.firstBaseUpdate=Fe,P.lastBaseUpdate=at,u=P.shared.interleaved,u!==null){P=u;do Y|=P.lane,P=P.next;while(P!==u)}else L===null&&(P.shared.lanes=0);wd|=Y,c.lanes=Y,c.memoizedState=ct}}function Fi(c,u,g){if(c=u.effects,u.effects=null,c!==null)for(u=0;u<c.length;u++){var b=c[u],P=b.callback;if(P!==null){if(b.callback=null,b=g,typeof P!="function")throw Error(r(191,P));P.call(b)}}}var ua={},ms=ca(ua),Bn=ca(ua),el=ca(ua);function uo(c){if(c===ua)throw Error(r(174));return c}function eu(c,u){switch(Jr(el,u),Jr(Bn,c),Jr(ms,ua),c=u.nodeType,c){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:ft(null,"");break;default:c=c===8?u.parentNode:u,u=c.namespaceURI||null,c=c.tagName,u=ft(u,c)}Kr(ms),Jr(ms,u)}function za(){Kr(ms),Kr(Bn),Kr(el)}function Xp(c){uo(el.current);var u=uo(ms.current),g=ft(u,c.type);u!==g&&(Jr(Bn,c),Jr(ms,g))}function xm(c){Bn.current===c&&(Kr(ms),Kr(Bn))}var hn=ca(0);function da(c){for(var u=c;u!==null;){if(u.tag===13){var g=u.memoizedState;if(g!==null&&(g=g.dehydrated,g===null||g.data==="$?"||g.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var wm=[];function bm(){for(var c=0;c<wm.length;c++)wm[c]._workInProgressVersionPrimary=null;wm.length=0}var kf=C.ReactCurrentDispatcher,Cf=C.ReactCurrentBatchConfig,qa=0,vn=null,Kn=null,Un=null,tu=!1,fo=!1,ru=0,py=0;function ss(){throw Error(r(321))}function Ef(c,u){if(u===null)return!1;for(var g=0;g<u.length&&g<c.length;g++)if(!Cn(c[g],u[g]))return!1;return!0}function vd(c,u,g,b,P,L){if(qa=L,vn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,kf.current=c===null||c.memoizedState===null?TR:RR,c=g(b,P),fo){L=0;do{if(fo=!1,ru=0,25<=L)throw Error(r(301));L+=1,Un=Kn=null,u.updateQueue=null,kf.current=LR,c=g(b,P)}while(fo)}if(kf.current=sg,u=Kn!==null&&Kn.next!==null,qa=0,Un=Kn=vn=null,tu=!1,u)throw Error(r(300));return c}function Va(){var c=ru!==0;return ru=0,c}function fa(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?vn.memoizedState=Un=c:Un=Un.next=c,Un}function xi(){if(Kn===null){var c=vn.alternate;c=c!==null?c.memoizedState:null}else c=Kn.next;var u=Un===null?vn.memoizedState:Un.next;if(u!==null)Un=u,Kn=c;else{if(c===null)throw Error(r(310));Kn=c,c={memoizedState:Kn.memoizedState,baseState:Kn.baseState,baseQueue:Kn.baseQueue,queue:Kn.queue,next:null},Un===null?vn.memoizedState=Un=c:Un=Un.next=c}return Un}function yd(c,u){return typeof u=="function"?u(c):u}function Af(c){var u=xi(),g=u.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var b=Kn,P=b.baseQueue,L=g.pending;if(L!==null){if(P!==null){var Y=P.next;P.next=L.next,L.next=Y}b.baseQueue=P=L,g.pending=null}if(P!==null){L=P.next,b=b.baseState;var ge=Y=null,Ne=null,Fe=L;do{var at=Fe.lane;if((qa&at)===at)Ne!==null&&(Ne=Ne.next={lane:0,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null}),b=Fe.hasEagerState?Fe.eagerState:c(b,Fe.action);else{var ct={lane:at,action:Fe.action,hasEagerState:Fe.hasEagerState,eagerState:Fe.eagerState,next:null};Ne===null?(ge=Ne=ct,Y=b):Ne=Ne.next=ct,vn.lanes|=at,wd|=at}Fe=Fe.next}while(Fe!==null&&Fe!==L);Ne===null?Y=b:Ne.next=ge,Cn(b,u.memoizedState)||(Bi=!0),u.memoizedState=b,u.baseState=Y,u.baseQueue=Ne,g.lastRenderedState=b}if(c=g.interleaved,c!==null){P=c;do L=P.lane,vn.lanes|=L,wd|=L,P=P.next;while(P!==c)}else P===null&&(g.lanes=0);return[u.memoizedState,g.dispatch]}function tl(c){var u=xi(),g=u.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=c;var b=g.dispatch,P=g.pending,L=u.memoizedState;if(P!==null){g.pending=null;var Y=P=P.next;do L=c(L,Y.action),Y=Y.next;while(Y!==P);Cn(L,u.memoizedState)||(Bi=!0),u.memoizedState=L,u.baseQueue===null&&(u.baseState=L),g.lastRenderedState=L}return[L,b]}function eg(){}function _m(c,u){var g=vn,b=xi(),P=u(),L=!Cn(b.memoizedState,P);if(L&&(b.memoizedState=P,Bi=!0),b=b.queue,Rf(rg.bind(null,g,b,c),[c]),b.getSnapshot!==u||L||Un!==null&&Un.memoizedState.tag&1){if(g.flags|=2048,wi(9,Nm.bind(null,g,b,P,u),void 0,null),Ds===null)throw Error(r(349));(qa&30)!==0||tg(g,u,P)}return P}function tg(c,u,g){c.flags|=16384,c={getSnapshot:u,value:g},u=vn.updateQueue,u===null?(u={lastEffect:null,stores:null},vn.updateQueue=u,u.stores=[c]):(g=u.stores,g===null?u.stores=[c]:g.push(c))}function Nm(c,u,g,b){u.value=g,u.getSnapshot=b,nu(u)&&Pf(c)}function rg(c,u,g){return g(function(){nu(u)&&Pf(c)})}function nu(c){var u=c.getSnapshot;c=c.value;try{var g=u();return!Cn(c,g)}catch{return!0}}function Pf(c){var u=rn(c,1);u!==null&&vo(u,c,1,-1)}function xd(c){var u=fa();return typeof c=="function"&&(c=c()),u.memoizedState=u.baseState=c,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yd,lastRenderedState:c},u.queue=c,c=c.dispatch=PR.bind(null,vn,c),[u.memoizedState,c]}function wi(c,u,g,b){return c={tag:c,create:u,destroy:g,deps:b,next:null},u=vn.updateQueue,u===null?(u={lastEffect:null,stores:null},vn.updateQueue=u,u.lastEffect=c.next=c):(g=u.lastEffect,g===null?u.lastEffect=c.next=c:(b=g.next,g.next=c,c.next=b,u.lastEffect=c)),c}function ho(){return xi().memoizedState}function ha(c,u,g,b){var P=fa();vn.flags|=c,P.memoizedState=wi(1|u,g,void 0,b===void 0?null:b)}function sc(c,u,g,b){var P=xi();b=b===void 0?null:b;var L=void 0;if(Kn!==null){var Y=Kn.memoizedState;if(L=Y.destroy,b!==null&&Ef(b,Y.deps)){P.memoizedState=wi(u,g,L,b);return}}vn.flags|=c,P.memoizedState=wi(1|u,g,L,b)}function Tf(c,u){return ha(8390656,8,c,u)}function Rf(c,u){return sc(2048,8,c,u)}function ng(c,u){return sc(4,2,c,u)}function Lf(c,u){return sc(4,4,c,u)}function Df(c,u){if(typeof u=="function")return c=c(),u(c),function(){u(null)};if(u!=null)return c=c(),u.current=c,function(){u.current=null}}function Yb(c,u,g){return g=g!=null?g.concat([c]):null,sc(4,4,Df.bind(null,u,c),g)}function gy(){}function Qb(c,u){var g=xi();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&Ef(u,b[1])?b[0]:(g.memoizedState=[c,u],c)}function Jb(c,u){var g=xi();u=u===void 0?null:u;var b=g.memoizedState;return b!==null&&u!==null&&Ef(u,b[1])?b[0]:(c=c(),g.memoizedState=[c,u],c)}function Zb(c,u,g){return(qa&21)===0?(c.baseState&&(c.baseState=!1,Bi=!0),c.memoizedState=g):(Cn(g,u)||(g=Ju(),vn.lanes|=g,wd|=g,c.baseState=!0),u)}function ER(c,u){var g=Mr;Mr=g!==0&&4>g?g:4,c(!0);var b=Cf.transition;Cf.transition={};try{c(!1),u()}finally{Mr=g,Cf.transition=b}}function Xb(){return xi().memoizedState}function AR(c,u,g){var b=ou(c);if(g={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null},e5(c))t5(u,g);else if(g=Zr(c,u,g,b),g!==null){var P=_i();vo(g,c,b,P),r5(g,u,b)}}function PR(c,u,g){var b=ou(c),P={lane:b,action:g,hasEagerState:!1,eagerState:null,next:null};if(e5(c))t5(u,P);else{var L=c.alternate;if(c.lanes===0&&(L===null||L.lanes===0)&&(L=u.lastRenderedReducer,L!==null))try{var Y=u.lastRenderedState,ge=L(Y,g);if(P.hasEagerState=!0,P.eagerState=ge,Cn(ge,Y)){var Ne=u.interleaved;Ne===null?(P.next=P,Ts(u)):(P.next=Ne.next,Ne.next=P),u.interleaved=P;return}}catch{}finally{}g=Zr(c,u,P,b),g!==null&&(P=_i(),vo(g,c,b,P),r5(g,u,b))}}function e5(c){var u=c.alternate;return c===vn||u!==null&&u===vn}function t5(c,u){fo=tu=!0;var g=c.pending;g===null?u.next=u:(u.next=g.next,g.next=u),c.pending=u}function r5(c,u,g){if((g&4194240)!==0){var b=u.lanes;b&=c.pendingLanes,g|=b,u.lanes=g,Dc(c,g)}}var sg={readContext:Tn,useCallback:ss,useContext:ss,useEffect:ss,useImperativeHandle:ss,useInsertionEffect:ss,useLayoutEffect:ss,useMemo:ss,useReducer:ss,useRef:ss,useState:ss,useDebugValue:ss,useDeferredValue:ss,useTransition:ss,useMutableSource:ss,useSyncExternalStore:ss,useId:ss,unstable_isNewReconciler:!1},TR={readContext:Tn,useCallback:function(c,u){return fa().memoizedState=[c,u===void 0?null:u],c},useContext:Tn,useEffect:Tf,useImperativeHandle:function(c,u,g){return g=g!=null?g.concat([c]):null,ha(4194308,4,Df.bind(null,u,c),g)},useLayoutEffect:function(c,u){return ha(4194308,4,c,u)},useInsertionEffect:function(c,u){return ha(4,2,c,u)},useMemo:function(c,u){var g=fa();return u=u===void 0?null:u,c=c(),g.memoizedState=[c,u],c},useReducer:function(c,u,g){var b=fa();return u=g!==void 0?g(u):u,b.memoizedState=b.baseState=u,c={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:u},b.queue=c,c=c.dispatch=AR.bind(null,vn,c),[b.memoizedState,c]},useRef:function(c){var u=fa();return c={current:c},u.memoizedState=c},useState:xd,useDebugValue:gy,useDeferredValue:function(c){return fa().memoizedState=c},useTransition:function(){var c=xd(!1),u=c[0];return c=ER.bind(null,c[1]),fa().memoizedState=c,[u,c]},useMutableSource:function(){},useSyncExternalStore:function(c,u,g){var b=vn,P=fa();if(Ye){if(g===void 0)throw Error(r(407));g=g()}else{if(g=u(),Ds===null)throw Error(r(349));(qa&30)!==0||tg(b,u,g)}P.memoizedState=g;var L={value:g,getSnapshot:u};return P.queue=L,Tf(rg.bind(null,b,L,c),[c]),b.flags|=2048,wi(9,Nm.bind(null,b,L,g,u),void 0,null),g},useId:function(){var c=fa(),u=Ds.identifierPrefix;if(Ye){var g=fe,b=Re;g=(b&~(1<<32-zn(b)-1)).toString(32)+g,u=":"+u+"R"+g,g=ru++,0<g&&(u+="H"+g.toString(32)),u+=":"}else g=py++,u=":"+u+"r"+g.toString(32)+":";return c.memoizedState=u},unstable_isNewReconciler:!1},RR={readContext:Tn,useCallback:Qb,useContext:Tn,useEffect:Rf,useImperativeHandle:Yb,useInsertionEffect:ng,useLayoutEffect:Lf,useMemo:Jb,useReducer:Af,useRef:ho,useState:function(){return Af(yd)},useDebugValue:gy,useDeferredValue:function(c){var u=xi();return Zb(u,Kn.memoizedState,c)},useTransition:function(){var c=Af(yd)[0],u=xi().memoizedState;return[c,u]},useMutableSource:eg,useSyncExternalStore:_m,useId:Xb,unstable_isNewReconciler:!1},LR={readContext:Tn,useCallback:Qb,useContext:Tn,useEffect:Rf,useImperativeHandle:Yb,useInsertionEffect:ng,useLayoutEffect:Lf,useMemo:Jb,useReducer:tl,useRef:ho,useState:function(){return tl(yd)},useDebugValue:gy,useDeferredValue:function(c){var u=xi();return Kn===null?u.memoizedState=c:Zb(u,Kn.memoizedState,c)},useTransition:function(){var c=tl(yd)[0],u=xi().memoizedState;return[c,u]},useMutableSource:eg,useSyncExternalStore:_m,useId:Xb,unstable_isNewReconciler:!1};function mo(c,u){if(c&&c.defaultProps){u=xe({},u),c=c.defaultProps;for(var g in c)u[g]===void 0&&(u[g]=c[g]);return u}return u}function vy(c,u,g,b){u=c.memoizedState,g=g(b,u),g=g==null?u:xe({},u,g),c.memoizedState=g,c.lanes===0&&(c.updateQueue.baseState=g)}var ig={isMounted:function(c){return(c=c._reactInternals)?bs(c)===c:!1},enqueueSetState:function(c,u,g){c=c._reactInternals;var b=_i(),P=ou(c),L=Mn(b,P);L.payload=u,g!=null&&(L.callback=g),u=Fn(c,L,P),u!==null&&(vo(u,c,P,b),Rs(u,c,P))},enqueueReplaceState:function(c,u,g){c=c._reactInternals;var b=_i(),P=ou(c),L=Mn(b,P);L.tag=1,L.payload=u,g!=null&&(L.callback=g),u=Fn(c,L,P),u!==null&&(vo(u,c,P,b),Rs(u,c,P))},enqueueForceUpdate:function(c,u){c=c._reactInternals;var g=_i(),b=ou(c),P=Mn(g,b);P.tag=2,u!=null&&(P.callback=u),u=Fn(c,P,b),u!==null&&(vo(u,c,b,g),Rs(u,c,b))}};function n5(c,u,g,b,P,L,Y){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(b,L,Y):u.prototype&&u.prototype.isPureReactComponent?!Qs(g,b)||!Qs(P,L):!0}function s5(c,u,g){var b=!1,P=Xo,L=u.contextType;return typeof L=="object"&&L!==null?L=Tn(L):(P=ei(u)?rc:js.current,b=u.contextTypes,L=(b=b!=null)?Xc(c,P):Xo),u=new u(g,L),c.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=ig,c.stateNode=u,u._reactInternals=c,b&&(c=c.stateNode,c.__reactInternalMemoizedUnmaskedChildContext=P,c.__reactInternalMemoizedMaskedChildContext=L),u}function i5(c,u,g,b){c=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(g,b),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(g,b),u.state!==c&&ig.enqueueReplaceState(u,u.state,null)}function yy(c,u,g,b){var P=c.stateNode;P.props=g,P.state=c.memoizedState,P.refs={},Ss(c);var L=u.contextType;typeof L=="object"&&L!==null?P.context=Tn(L):(L=ei(u)?rc:js.current,P.context=Xc(c,L)),P.state=c.memoizedState,L=u.getDerivedStateFromProps,typeof L=="function"&&(vy(c,u,L,g),P.state=c.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(u=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),u!==P.state&&ig.enqueueReplaceState(P,P.state,null),Ls(c,g,P,b),P.state=c.memoizedState),typeof P.componentDidMount=="function"&&(c.flags|=4194308)}function If(c,u){try{var g="",b=u;do g+=re(b),b=b.return;while(b);var P=g}catch(L){P=`
Error generating stack: `+L.message+`
`+L.stack}return{value:c,source:u,stack:P,digest:null}}function xy(c,u,g){return{value:c,source:null,stack:g??null,digest:u??null}}function wy(c,u){try{console.error(u.value)}catch(g){setTimeout(function(){throw g})}}var DR=typeof WeakMap=="function"?WeakMap:Map;function a5(c,u,g){g=Mn(-1,g),g.tag=3,g.payload={element:null};var b=u.value;return g.callback=function(){fg||(fg=!0,Iy=b),wy(c,u)},g}function o5(c,u,g){g=Mn(-1,g),g.tag=3;var b=c.type.getDerivedStateFromError;if(typeof b=="function"){var P=u.value;g.payload=function(){return b(P)},g.callback=function(){wy(c,u)}}var L=c.stateNode;return L!==null&&typeof L.componentDidCatch=="function"&&(g.callback=function(){wy(c,u),typeof b!="function"&&(iu===null?iu=new Set([this]):iu.add(this));var Y=u.stack;this.componentDidCatch(u.value,{componentStack:Y!==null?Y:""})}),g}function l5(c,u,g){var b=c.pingCache;if(b===null){b=c.pingCache=new DR;var P=new Set;b.set(u,P)}else P=b.get(u),P===void 0&&(P=new Set,b.set(u,P));P.has(g)||(P.add(g),c=KR.bind(null,c,u,g),u.then(c,c))}function c5(c){do{var u;if((u=c.tag===13)&&(u=c.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return c;c=c.return}while(c!==null);return null}function u5(c,u,g,b,P){return(c.mode&1)===0?(c===u?c.flags|=65536:(c.flags|=128,g.flags|=131072,g.flags&=-52805,g.tag===1&&(g.alternate===null?g.tag=17:(u=Mn(-1,1),u.tag=2,Fn(g,u,1))),g.lanes|=1),c):(c.flags|=65536,c.lanes=P,c)}var IR=C.ReactCurrentOwner,Bi=!1;function bi(c,u,g,b){u.child=c===null?jn(u,null,g,b):Hn(u,c.child,g,b)}function d5(c,u,g,b,P){g=g.render;var L=u.ref;return Pn(u,P),b=vd(c,u,g,b,L,P),g=Va(),c!==null&&!Bi?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~P,ic(c,u,P)):(Ye&&g&&Ge(u),u.flags|=1,bi(c,u,b,P),u.child)}function f5(c,u,g,b,P){if(c===null){var L=g.type;return typeof L=="function"&&!zy(L)&&L.defaultProps===void 0&&g.compare===null&&g.defaultProps===void 0?(u.tag=15,u.type=L,h5(c,u,L,b,P)):(c=yg(g.type,null,b,u,u.mode,P),c.ref=u.ref,c.return=u,u.child=c)}if(L=c.child,(c.lanes&P)===0){var Y=L.memoizedProps;if(g=g.compare,g=g!==null?g:Qs,g(Y,b)&&c.ref===u.ref)return ic(c,u,P)}return u.flags|=1,c=cu(L,b),c.ref=u.ref,c.return=u,u.child=c}function h5(c,u,g,b,P){if(c!==null){var L=c.memoizedProps;if(Qs(L,b)&&c.ref===u.ref)if(Bi=!1,u.pendingProps=b=L,(c.lanes&P)!==0)(c.flags&131072)!==0&&(Bi=!0);else return u.lanes=c.lanes,ic(c,u,P)}return by(c,u,g,b,P)}function m5(c,u,g){var b=u.pendingProps,P=b.children,L=c!==null?c.memoizedState:null;if(b.mode==="hidden")if((u.mode&1)===0)u.memoizedState={baseLanes:0,cachePool:null,transitions:null},Jr(Mf,ma),ma|=g;else{if((g&1073741824)===0)return c=L!==null?L.baseLanes|g:g,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:c,cachePool:null,transitions:null},u.updateQueue=null,Jr(Mf,ma),ma|=c,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},b=L!==null?L.baseLanes:g,Jr(Mf,ma),ma|=b}else L!==null?(b=L.baseLanes|g,u.memoizedState=null):b=g,Jr(Mf,ma),ma|=b;return bi(c,u,P,g),u.child}function p5(c,u){var g=u.ref;(c===null&&g!==null||c!==null&&c.ref!==g)&&(u.flags|=512,u.flags|=2097152)}function by(c,u,g,b,P){var L=ei(g)?rc:js.current;return L=Xc(u,L),Pn(u,P),g=vd(c,u,g,b,L,P),b=Va(),c!==null&&!Bi?(u.updateQueue=c.updateQueue,u.flags&=-2053,c.lanes&=~P,ic(c,u,P)):(Ye&&b&&Ge(u),u.flags|=1,bi(c,u,g,P),u.child)}function g5(c,u,g,b,P){if(ei(g)){var L=!0;nc(u)}else L=!1;if(Pn(u,P),u.stateNode===null)og(c,u),s5(u,g,b),yy(u,g,b,P),b=!0;else if(c===null){var Y=u.stateNode,ge=u.memoizedProps;Y.props=ge;var Ne=Y.context,Fe=g.contextType;typeof Fe=="object"&&Fe!==null?Fe=Tn(Fe):(Fe=ei(g)?rc:js.current,Fe=Xc(u,Fe));var at=g.getDerivedStateFromProps,ct=typeof at=="function"||typeof Y.getSnapshotBeforeUpdate=="function";ct||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==b||Ne!==Fe)&&i5(u,Y,b,Fe),Gn=!1;var st=u.memoizedState;Y.state=st,Ls(u,b,Y,P),Ne=u.memoizedState,ge!==b||st!==Ne||Xs.current||Gn?(typeof at=="function"&&(vy(u,g,at,b),Ne=u.memoizedState),(ge=Gn||n5(u,g,ge,b,st,Ne,Fe))?(ct||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(u.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=b,u.memoizedState=Ne),Y.props=b,Y.state=Ne,Y.context=Fe,b=ge):(typeof Y.componentDidMount=="function"&&(u.flags|=4194308),b=!1)}else{Y=u.stateNode,ti(c,u),ge=u.memoizedProps,Fe=u.type===u.elementType?ge:mo(u.type,ge),Y.props=Fe,ct=u.pendingProps,st=Y.context,Ne=g.contextType,typeof Ne=="object"&&Ne!==null?Ne=Tn(Ne):(Ne=ei(g)?rc:js.current,Ne=Xc(u,Ne));var _t=g.getDerivedStateFromProps;(at=typeof _t=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ge!==ct||st!==Ne)&&i5(u,Y,b,Ne),Gn=!1,st=u.memoizedState,Y.state=st,Ls(u,b,Y,P);var Dt=u.memoizedState;ge!==ct||st!==Dt||Xs.current||Gn?(typeof _t=="function"&&(vy(u,g,_t,b),Dt=u.memoizedState),(Fe=Gn||n5(u,g,Fe,b,st,Dt,Ne)||!1)?(at||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(b,Dt,Ne),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(b,Dt,Ne)),typeof Y.componentDidUpdate=="function"&&(u.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(u.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(u.flags|=1024),u.memoizedProps=b,u.memoizedState=Dt),Y.props=b,Y.state=Dt,Y.context=Ne,b=Fe):(typeof Y.componentDidUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(u.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ge===c.memoizedProps&&st===c.memoizedState||(u.flags|=1024),b=!1)}return _y(c,u,g,b,L,P)}function _y(c,u,g,b,P,L){p5(c,u);var Y=(u.flags&128)!==0;if(!b&&!Y)return P&&Zp(u,g,!1),ic(c,u,L);b=u.stateNode,IR.current=u;var ge=Y&&typeof g.getDerivedStateFromError!="function"?null:b.render();return u.flags|=1,c!==null&&Y?(u.child=Hn(u,c.child,null,L),u.child=Hn(u,null,ge,L)):bi(c,u,ge,L),u.memoizedState=b.state,P&&Zp(u,g,!0),u.child}function v5(c){var u=c.stateNode;u.pendingContext?Jp(c,u.pendingContext,u.pendingContext!==u.context):u.context&&Jp(c,u.context,!1),eu(c,u.containerInfo)}function y5(c,u,g,b,P){return Ct(),mt(P),u.flags|=256,bi(c,u,g,b),u.child}var Ny={dehydrated:null,treeContext:null,retryLane:0};function jy(c){return{baseLanes:c,cachePool:null,transitions:null}}function x5(c,u,g){var b=u.pendingProps,P=hn.current,L=!1,Y=(u.flags&128)!==0,ge;if((ge=Y)||(ge=c!==null&&c.memoizedState===null?!1:(P&2)!==0),ge?(L=!0,u.flags&=-129):(c===null||c.memoizedState!==null)&&(P|=1),Jr(hn,P&1),c===null)return Lt(u),c=u.memoizedState,c!==null&&(c=c.dehydrated,c!==null)?((u.mode&1)===0?u.lanes=1:c.data==="$!"?u.lanes=8:u.lanes=1073741824,null):(Y=b.children,c=b.fallback,L?(b=u.mode,L=u.child,Y={mode:"hidden",children:Y},(b&1)===0&&L!==null?(L.childLanes=0,L.pendingProps=Y):L=xg(Y,b,0,null),c=jd(c,b,g,null),L.return=u,c.return=u,L.sibling=c,u.child=L,u.child.memoizedState=jy(g),u.memoizedState=Ny,c):Sy(u,Y));if(P=c.memoizedState,P!==null&&(ge=P.dehydrated,ge!==null))return OR(c,u,Y,b,ge,P,g);if(L){L=b.fallback,Y=u.mode,P=c.child,ge=P.sibling;var Ne={mode:"hidden",children:b.children};return(Y&1)===0&&u.child!==P?(b=u.child,b.childLanes=0,b.pendingProps=Ne,u.deletions=null):(b=cu(P,Ne),b.subtreeFlags=P.subtreeFlags&14680064),ge!==null?L=cu(ge,L):(L=jd(L,Y,g,null),L.flags|=2),L.return=u,b.return=u,b.sibling=L,u.child=b,b=L,L=u.child,Y=c.child.memoizedState,Y=Y===null?jy(g):{baseLanes:Y.baseLanes|g,cachePool:null,transitions:Y.transitions},L.memoizedState=Y,L.childLanes=c.childLanes&~g,u.memoizedState=Ny,b}return L=c.child,c=L.sibling,b=cu(L,{mode:"visible",children:b.children}),(u.mode&1)===0&&(b.lanes=g),b.return=u,b.sibling=null,c!==null&&(g=u.deletions,g===null?(u.deletions=[c],u.flags|=16):g.push(c)),u.child=b,u.memoizedState=null,b}function Sy(c,u){return u=xg({mode:"visible",children:u},c.mode,0,null),u.return=c,c.child=u}function ag(c,u,g,b){return b!==null&&mt(b),Hn(u,c.child,null,g),c=Sy(u,u.pendingProps.children),c.flags|=2,u.memoizedState=null,c}function OR(c,u,g,b,P,L,Y){if(g)return u.flags&256?(u.flags&=-257,b=xy(Error(r(422))),ag(c,u,Y,b)):u.memoizedState!==null?(u.child=c.child,u.flags|=128,null):(L=b.fallback,P=u.mode,b=xg({mode:"visible",children:b.children},P,0,null),L=jd(L,P,Y,null),L.flags|=2,b.return=u,L.return=u,b.sibling=L,u.child=b,(u.mode&1)!==0&&Hn(u,c.child,null,Y),u.child.memoizedState=jy(Y),u.memoizedState=Ny,L);if((u.mode&1)===0)return ag(c,u,Y,null);if(P.data==="$!"){if(b=P.nextSibling&&P.nextSibling.dataset,b)var ge=b.dgst;return b=ge,L=Error(r(419)),b=xy(L,b,void 0),ag(c,u,Y,b)}if(ge=(Y&c.childLanes)!==0,Bi||ge){if(b=Ds,b!==null){switch(Y&-Y){case 4:P=2;break;case 16:P=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:P=32;break;case 536870912:P=268435456;break;default:P=0}P=(P&(b.suspendedLanes|Y))!==0?0:P,P!==0&&P!==L.retryLane&&(L.retryLane=P,rn(c,P),vo(b,c,P,-1))}return $y(),b=xy(Error(r(421))),ag(c,u,Y,b)}return P.data==="$?"?(u.flags|=128,u.child=c.child,u=YR.bind(null,c),P._reactRetry=u,null):(c=L.treeContext,We=zs(P.nextSibling),$e=u,Ye=!0,Qe=null,c!==null&&(oe[de++]=Re,oe[de++]=fe,oe[de++]=_e,Re=c.id,fe=c.overflow,_e=u),u=Sy(u,b.children),u.flags|=4096,u)}function w5(c,u,g){c.lanes|=u;var b=c.alternate;b!==null&&(b.lanes|=u),$r(c.return,u,g)}function ky(c,u,g,b,P){var L=c.memoizedState;L===null?c.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:b,tail:g,tailMode:P}:(L.isBackwards=u,L.rendering=null,L.renderingStartTime=0,L.last=b,L.tail=g,L.tailMode=P)}function b5(c,u,g){var b=u.pendingProps,P=b.revealOrder,L=b.tail;if(bi(c,u,b.children,g),b=hn.current,(b&2)!==0)b=b&1|2,u.flags|=128;else{if(c!==null&&(c.flags&128)!==0)e:for(c=u.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&w5(c,g,u);else if(c.tag===19)w5(c,g,u);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===u)break e;for(;c.sibling===null;){if(c.return===null||c.return===u)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}b&=1}if(Jr(hn,b),(u.mode&1)===0)u.memoizedState=null;else switch(P){case"forwards":for(g=u.child,P=null;g!==null;)c=g.alternate,c!==null&&da(c)===null&&(P=g),g=g.sibling;g=P,g===null?(P=u.child,u.child=null):(P=g.sibling,g.sibling=null),ky(u,!1,P,g,L);break;case"backwards":for(g=null,P=u.child,u.child=null;P!==null;){if(c=P.alternate,c!==null&&da(c)===null){u.child=P;break}c=P.sibling,P.sibling=g,g=P,P=c}ky(u,!0,g,null,L);break;case"together":ky(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function og(c,u){(u.mode&1)===0&&c!==null&&(c.alternate=null,u.alternate=null,u.flags|=2)}function ic(c,u,g){if(c!==null&&(u.dependencies=c.dependencies),wd|=u.lanes,(g&u.childLanes)===0)return null;if(c!==null&&u.child!==c.child)throw Error(r(153));if(u.child!==null){for(c=u.child,g=cu(c,c.pendingProps),u.child=g,g.return=u;c.sibling!==null;)c=c.sibling,g=g.sibling=cu(c,c.pendingProps),g.return=u;g.sibling=null}return u.child}function MR(c,u,g){switch(u.tag){case 3:v5(u),Ct();break;case 5:Xp(u);break;case 1:ei(u.type)&&nc(u);break;case 4:eu(u,u.stateNode.containerInfo);break;case 10:var b=u.type._context,P=u.memoizedProps.value;Jr(ns,b._currentValue),b._currentValue=P;break;case 13:if(b=u.memoizedState,b!==null)return b.dehydrated!==null?(Jr(hn,hn.current&1),u.flags|=128,null):(g&u.child.childLanes)!==0?x5(c,u,g):(Jr(hn,hn.current&1),c=ic(c,u,g),c!==null?c.sibling:null);Jr(hn,hn.current&1);break;case 19:if(b=(g&u.childLanes)!==0,(c.flags&128)!==0){if(b)return b5(c,u,g);u.flags|=128}if(P=u.memoizedState,P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Jr(hn,hn.current),b)break;return null;case 22:case 23:return u.lanes=0,m5(c,u,g)}return ic(c,u,g)}var _5,Cy,N5,j5;_5=function(c,u){for(var g=u.child;g!==null;){if(g.tag===5||g.tag===6)c.appendChild(g.stateNode);else if(g.tag!==4&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===u)break;for(;g.sibling===null;){if(g.return===null||g.return===u)return;g=g.return}g.sibling.return=g.return,g=g.sibling}},Cy=function(){},N5=function(c,u,g,b){var P=c.memoizedProps;if(P!==b){c=u.stateNode,uo(ms.current);var L=null;switch(g){case"input":P=qe(c,P),b=qe(c,b),L=[];break;case"select":P=xe({},P,{value:void 0}),b=xe({},b,{value:void 0}),L=[];break;case"textarea":P=Ce(c,P),b=Ce(c,b),L=[];break;default:typeof P.onClick!="function"&&typeof b.onClick=="function"&&(c.onclick=Qc)}Nr(g,b);var Y;g=null;for(Fe in P)if(!b.hasOwnProperty(Fe)&&P.hasOwnProperty(Fe)&&P[Fe]!=null)if(Fe==="style"){var ge=P[Fe];for(Y in ge)ge.hasOwnProperty(Y)&&(g||(g={}),g[Y]="")}else Fe!=="dangerouslySetInnerHTML"&&Fe!=="children"&&Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&Fe!=="autoFocus"&&(i.hasOwnProperty(Fe)?L||(L=[]):(L=L||[]).push(Fe,null));for(Fe in b){var Ne=b[Fe];if(ge=P?.[Fe],b.hasOwnProperty(Fe)&&Ne!==ge&&(Ne!=null||ge!=null))if(Fe==="style")if(ge){for(Y in ge)!ge.hasOwnProperty(Y)||Ne&&Ne.hasOwnProperty(Y)||(g||(g={}),g[Y]="");for(Y in Ne)Ne.hasOwnProperty(Y)&&ge[Y]!==Ne[Y]&&(g||(g={}),g[Y]=Ne[Y])}else g||(L||(L=[]),L.push(Fe,g)),g=Ne;else Fe==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,ge=ge?ge.__html:void 0,Ne!=null&&ge!==Ne&&(L=L||[]).push(Fe,Ne)):Fe==="children"?typeof Ne!="string"&&typeof Ne!="number"||(L=L||[]).push(Fe,""+Ne):Fe!=="suppressContentEditableWarning"&&Fe!=="suppressHydrationWarning"&&(i.hasOwnProperty(Fe)?(Ne!=null&&Fe==="onScroll"&&en("scroll",c),L||ge===Ne||(L=[])):(L=L||[]).push(Fe,Ne))}g&&(L=L||[]).push("style",g);var Fe=L;(u.updateQueue=Fe)&&(u.flags|=4)}},j5=function(c,u,g,b){g!==b&&(u.flags|=4)};function jm(c,u){if(!Ye)switch(c.tailMode){case"hidden":u=c.tail;for(var g=null;u!==null;)u.alternate!==null&&(g=u),u=u.sibling;g===null?c.tail=null:g.sibling=null;break;case"collapsed":g=c.tail;for(var b=null;g!==null;)g.alternate!==null&&(b=g),g=g.sibling;b===null?u||c.tail===null?c.tail=null:c.tail.sibling=null:b.sibling=null}}function ri(c){var u=c.alternate!==null&&c.alternate.child===c.child,g=0,b=0;if(u)for(var P=c.child;P!==null;)g|=P.lanes|P.childLanes,b|=P.subtreeFlags&14680064,b|=P.flags&14680064,P.return=c,P=P.sibling;else for(P=c.child;P!==null;)g|=P.lanes|P.childLanes,b|=P.subtreeFlags,b|=P.flags,P.return=c,P=P.sibling;return c.subtreeFlags|=b,c.childLanes=g,u}function FR(c,u,g){var b=u.pendingProps;switch(De(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ri(u),null;case 1:return ei(u.type)&&Sf(),ri(u),null;case 3:return b=u.stateNode,za(),Kr(Xs),Kr(js),bm(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(An(u)?u.flags|=4:c===null||c.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,Qe!==null&&(Fy(Qe),Qe=null))),Cy(c,u),ri(u),null;case 5:xm(u);var P=uo(el.current);if(g=u.type,c!==null&&u.stateNode!=null)N5(c,u,g,b,P),c.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!b){if(u.stateNode===null)throw Error(r(166));return ri(u),null}if(c=uo(ms.current),An(u)){b=u.stateNode,g=u.type;var L=u.memoizedProps;switch(b[$a]=u,b[Jc]=L,c=(u.mode&1)!==0,g){case"dialog":en("cancel",b),en("close",b);break;case"iframe":case"object":case"embed":en("load",b);break;case"video":case"audio":for(P=0;P<Jo.length;P++)en(Jo[P],b);break;case"source":en("error",b);break;case"img":case"image":case"link":en("error",b),en("load",b);break;case"details":en("toggle",b);break;case"input":ne(b,L),en("invalid",b);break;case"select":b._wrapperState={wasMultiple:!!L.multiple},en("invalid",b);break;case"textarea":Ue(b,L),en("invalid",b)}Nr(g,L),P=null;for(var Y in L)if(L.hasOwnProperty(Y)){var ge=L[Y];Y==="children"?typeof ge=="string"?b.textContent!==ge&&(L.suppressHydrationWarning!==!0&&jf(b.textContent,ge,c),P=["children",ge]):typeof ge=="number"&&b.textContent!==""+ge&&(L.suppressHydrationWarning!==!0&&jf(b.textContent,ge,c),P=["children",""+ge]):i.hasOwnProperty(Y)&&ge!=null&&Y==="onScroll"&&en("scroll",b)}switch(g){case"input":Pe(b),St(b,L,!0);break;case"textarea":Pe(b),He(b);break;case"select":case"option":break;default:typeof L.onClick=="function"&&(b.onclick=Qc)}b=P,u.updateQueue=b,b!==null&&(u.flags|=4)}else{Y=P.nodeType===9?P:P.ownerDocument,c==="http://www.w3.org/1999/xhtml"&&(c=Ze(g)),c==="http://www.w3.org/1999/xhtml"?g==="script"?(c=Y.createElement("div"),c.innerHTML="<script><\/script>",c=c.removeChild(c.firstChild)):typeof b.is=="string"?c=Y.createElement(g,{is:b.is}):(c=Y.createElement(g),g==="select"&&(Y=c,b.multiple?Y.multiple=!0:b.size&&(Y.size=b.size))):c=Y.createElementNS(c,g),c[$a]=u,c[Jc]=b,_5(c,u,!1,!1),u.stateNode=c;e:{switch(Y=Be(g,b),g){case"dialog":en("cancel",c),en("close",c),P=b;break;case"iframe":case"object":case"embed":en("load",c),P=b;break;case"video":case"audio":for(P=0;P<Jo.length;P++)en(Jo[P],c);P=b;break;case"source":en("error",c),P=b;break;case"img":case"image":case"link":en("error",c),en("load",c),P=b;break;case"details":en("toggle",c),P=b;break;case"input":ne(c,b),P=qe(c,b),en("invalid",c);break;case"option":P=b;break;case"select":c._wrapperState={wasMultiple:!!b.multiple},P=xe({},b,{value:void 0}),en("invalid",c);break;case"textarea":Ue(c,b),P=Ce(c,b),en("invalid",c);break;default:P=b}Nr(g,P),ge=P;for(L in ge)if(ge.hasOwnProperty(L)){var Ne=ge[L];L==="style"?Gt(c,Ne):L==="dangerouslySetInnerHTML"?(Ne=Ne?Ne.__html:void 0,Ne!=null&&gt(c,Ne)):L==="children"?typeof Ne=="string"?(g!=="textarea"||Ne!=="")&&$t(c,Ne):typeof Ne=="number"&&$t(c,""+Ne):L!=="suppressContentEditableWarning"&&L!=="suppressHydrationWarning"&&L!=="autoFocus"&&(i.hasOwnProperty(L)?Ne!=null&&L==="onScroll"&&en("scroll",c):Ne!=null&&k(c,L,Ne,Y))}switch(g){case"input":Pe(c),St(c,b,!1);break;case"textarea":Pe(c),He(c);break;case"option":b.value!=null&&c.setAttribute("value",""+pe(b.value));break;case"select":c.multiple=!!b.multiple,L=b.value,L!=null?ye(c,!!b.multiple,L,!1):b.defaultValue!=null&&ye(c,!!b.multiple,b.defaultValue,!0);break;default:typeof P.onClick=="function"&&(c.onclick=Qc)}switch(g){case"button":case"input":case"select":case"textarea":b=!!b.autoFocus;break e;case"img":b=!0;break e;default:b=!1}}b&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return ri(u),null;case 6:if(c&&u.stateNode!=null)j5(c,u,c.memoizedProps,b);else{if(typeof b!="string"&&u.stateNode===null)throw Error(r(166));if(g=uo(el.current),uo(ms.current),An(u)){if(b=u.stateNode,g=u.memoizedProps,b[$a]=u,(L=b.nodeValue!==g)&&(c=$e,c!==null))switch(c.tag){case 3:jf(b.nodeValue,g,(c.mode&1)!==0);break;case 5:c.memoizedProps.suppressHydrationWarning!==!0&&jf(b.nodeValue,g,(c.mode&1)!==0)}L&&(u.flags|=4)}else b=(g.nodeType===9?g:g.ownerDocument).createTextNode(b),b[$a]=u,u.stateNode=b}return ri(u),null;case 13:if(Kr(hn),b=u.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(Ye&&We!==null&&(u.mode&1)!==0&&(u.flags&128)===0)gr(),Ct(),u.flags|=98560,L=!1;else if(L=An(u),b!==null&&b.dehydrated!==null){if(c===null){if(!L)throw Error(r(318));if(L=u.memoizedState,L=L!==null?L.dehydrated:null,!L)throw Error(r(317));L[$a]=u}else Ct(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;ri(u),L=!1}else Qe!==null&&(Fy(Qe),Qe=null),L=!0;if(!L)return u.flags&65536?u:null}return(u.flags&128)!==0?(u.lanes=g,u):(b=b!==null,b!==(c!==null&&c.memoizedState!==null)&&b&&(u.child.flags|=8192,(u.mode&1)!==0&&(c===null||(hn.current&1)!==0?ks===0&&(ks=3):$y())),u.updateQueue!==null&&(u.flags|=4),ri(u),null);case 4:return za(),Cy(c,u),c===null&&Zl(u.stateNode.containerInfo),ri(u),null;case 10:return gn(u.type._context),ri(u),null;case 17:return ei(u.type)&&Sf(),ri(u),null;case 19:if(Kr(hn),L=u.memoizedState,L===null)return ri(u),null;if(b=(u.flags&128)!==0,Y=L.rendering,Y===null)if(b)jm(L,!1);else{if(ks!==0||c!==null&&(c.flags&128)!==0)for(c=u.child;c!==null;){if(Y=da(c),Y!==null){for(u.flags|=128,jm(L,!1),b=Y.updateQueue,b!==null&&(u.updateQueue=b,u.flags|=4),u.subtreeFlags=0,b=g,g=u.child;g!==null;)L=g,c=b,L.flags&=14680066,Y=L.alternate,Y===null?(L.childLanes=0,L.lanes=c,L.child=null,L.subtreeFlags=0,L.memoizedProps=null,L.memoizedState=null,L.updateQueue=null,L.dependencies=null,L.stateNode=null):(L.childLanes=Y.childLanes,L.lanes=Y.lanes,L.child=Y.child,L.subtreeFlags=0,L.deletions=null,L.memoizedProps=Y.memoizedProps,L.memoizedState=Y.memoizedState,L.updateQueue=Y.updateQueue,L.type=Y.type,c=Y.dependencies,L.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),g=g.sibling;return Jr(hn,hn.current&1|2),u.child}c=c.sibling}L.tail!==null&&fn()>Ff&&(u.flags|=128,b=!0,jm(L,!1),u.lanes=4194304)}else{if(!b)if(c=da(Y),c!==null){if(u.flags|=128,b=!0,g=c.updateQueue,g!==null&&(u.updateQueue=g,u.flags|=4),jm(L,!0),L.tail===null&&L.tailMode==="hidden"&&!Y.alternate&&!Ye)return ri(u),null}else 2*fn()-L.renderingStartTime>Ff&&g!==1073741824&&(u.flags|=128,b=!0,jm(L,!1),u.lanes=4194304);L.isBackwards?(Y.sibling=u.child,u.child=Y):(g=L.last,g!==null?g.sibling=Y:u.child=Y,L.last=Y)}return L.tail!==null?(u=L.tail,L.rendering=u,L.tail=u.sibling,L.renderingStartTime=fn(),u.sibling=null,g=hn.current,Jr(hn,b?g&1|2:g&1),u):(ri(u),null);case 22:case 23:return Uy(),b=u.memoizedState!==null,c!==null&&c.memoizedState!==null!==b&&(u.flags|=8192),b&&(u.mode&1)!==0?(ma&1073741824)!==0&&(ri(u),u.subtreeFlags&6&&(u.flags|=8192)):ri(u),null;case 24:return null;case 25:return null}throw Error(r(156,u.tag))}function BR(c,u){switch(De(u),u.tag){case 1:return ei(u.type)&&Sf(),c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 3:return za(),Kr(Xs),Kr(js),bm(),c=u.flags,(c&65536)!==0&&(c&128)===0?(u.flags=c&-65537|128,u):null;case 5:return xm(u),null;case 13:if(Kr(hn),c=u.memoizedState,c!==null&&c.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Ct()}return c=u.flags,c&65536?(u.flags=c&-65537|128,u):null;case 19:return Kr(hn),null;case 4:return za(),null;case 10:return gn(u.type._context),null;case 22:case 23:return Uy(),null;case 24:return null;default:return null}}var lg=!1,ni=!1,UR=typeof WeakSet=="function"?WeakSet:Set,Pt=null;function Of(c,u){var g=c.ref;if(g!==null)if(typeof g=="function")try{g(null)}catch(b){Yn(c,u,b)}else g.current=null}function Ey(c,u,g){try{g()}catch(b){Yn(c,u,b)}}var S5=!1;function $R(c,u){if(md=Fc,c=Wn(),la(c)){if("selectionStart"in c)var g={start:c.selectionStart,end:c.selectionEnd};else e:{g=(g=c.ownerDocument)&&g.defaultView||window;var b=g.getSelection&&g.getSelection();if(b&&b.rangeCount!==0){g=b.anchorNode;var P=b.anchorOffset,L=b.focusNode;b=b.focusOffset;try{g.nodeType,L.nodeType}catch{g=null;break e}var Y=0,ge=-1,Ne=-1,Fe=0,at=0,ct=c,st=null;t:for(;;){for(var _t;ct!==g||P!==0&&ct.nodeType!==3||(ge=Y+P),ct!==L||b!==0&&ct.nodeType!==3||(Ne=Y+b),ct.nodeType===3&&(Y+=ct.nodeValue.length),(_t=ct.firstChild)!==null;)st=ct,ct=_t;for(;;){if(ct===c)break t;if(st===g&&++Fe===P&&(ge=Y),st===L&&++at===b&&(Ne=Y),(_t=ct.nextSibling)!==null)break;ct=st,st=ct.parentNode}ct=_t}g=ge===-1||Ne===-1?null:{start:ge,end:Ne}}else g=null}g=g||{start:0,end:0}}else g=null;for(ec={focusedElem:c,selectionRange:g},Fc=!1,Pt=u;Pt!==null;)if(u=Pt,c=u.child,(u.subtreeFlags&1028)!==0&&c!==null)c.return=u,Pt=c;else for(;Pt!==null;){u=Pt;try{var Dt=u.alternate;if((u.flags&1024)!==0)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Dt!==null){var Ot=Dt.memoizedProps,is=Dt.memoizedState,Le=u.stateNode,Se=Le.getSnapshotBeforeUpdate(u.elementType===u.type?Ot:mo(u.type,Ot),is);Le.__reactInternalSnapshotBeforeUpdate=Se}break;case 3:var Ie=u.stateNode.containerInfo;Ie.nodeType===1?Ie.textContent="":Ie.nodeType===9&&Ie.documentElement&&Ie.removeChild(Ie.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(r(163))}}catch(ut){Yn(u,u.return,ut)}if(c=u.sibling,c!==null){c.return=u.return,Pt=c;break}Pt=u.return}return Dt=S5,S5=!1,Dt}function Sm(c,u,g){var b=u.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var P=b=b.next;do{if((P.tag&c)===c){var L=P.destroy;P.destroy=void 0,L!==void 0&&Ey(u,g,L)}P=P.next}while(P!==b)}}function cg(c,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var g=u=u.next;do{if((g.tag&c)===c){var b=g.create;g.destroy=b()}g=g.next}while(g!==u)}}function Ay(c){var u=c.ref;if(u!==null){var g=c.stateNode;switch(c.tag){case 5:c=g;break;default:c=g}typeof u=="function"?u(c):u.current=c}}function k5(c){var u=c.alternate;u!==null&&(c.alternate=null,k5(u)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(u=c.stateNode,u!==null&&(delete u[$a],delete u[Jc],delete u[Zs],delete u[hy],delete u[my])),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}function C5(c){return c.tag===5||c.tag===3||c.tag===4}function E5(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||C5(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function Py(c,u,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,u?g.nodeType===8?g.parentNode.insertBefore(c,u):g.insertBefore(c,u):(g.nodeType===8?(u=g.parentNode,u.insertBefore(c,g)):(u=g,u.appendChild(c)),g=g._reactRootContainer,g!=null||u.onclick!==null||(u.onclick=Qc));else if(b!==4&&(c=c.child,c!==null))for(Py(c,u,g),c=c.sibling;c!==null;)Py(c,u,g),c=c.sibling}function Ty(c,u,g){var b=c.tag;if(b===5||b===6)c=c.stateNode,u?g.insertBefore(c,u):g.appendChild(c);else if(b!==4&&(c=c.child,c!==null))for(Ty(c,u,g),c=c.sibling;c!==null;)Ty(c,u,g),c=c.sibling}var qs=null,po=!1;function su(c,u,g){for(g=g.child;g!==null;)A5(c,u,g),g=g.sibling}function A5(c,u,g){if(hi&&typeof hi.onCommitFiberUnmount=="function")try{hi.onCommitFiberUnmount(Pl,g)}catch{}switch(g.tag){case 5:ni||Of(g,u);case 6:var b=qs,P=po;qs=null,su(c,u,g),qs=b,po=P,qs!==null&&(po?(c=qs,g=g.stateNode,c.nodeType===8?c.parentNode.removeChild(g):c.removeChild(g)):qs.removeChild(g.stateNode));break;case 18:qs!==null&&(po?(c=qs,g=g.stateNode,c.nodeType===8?gm(c.parentNode,g):c.nodeType===1&&gm(c,g),Ml(c)):gm(qs,g.stateNode));break;case 4:b=qs,P=po,qs=g.stateNode.containerInfo,po=!0,su(c,u,g),qs=b,po=P;break;case 0:case 11:case 14:case 15:if(!ni&&(b=g.updateQueue,b!==null&&(b=b.lastEffect,b!==null))){P=b=b.next;do{var L=P,Y=L.destroy;L=L.tag,Y!==void 0&&((L&2)!==0||(L&4)!==0)&&Ey(g,u,Y),P=P.next}while(P!==b)}su(c,u,g);break;case 1:if(!ni&&(Of(g,u),b=g.stateNode,typeof b.componentWillUnmount=="function"))try{b.props=g.memoizedProps,b.state=g.memoizedState,b.componentWillUnmount()}catch(ge){Yn(g,u,ge)}su(c,u,g);break;case 21:su(c,u,g);break;case 22:g.mode&1?(ni=(b=ni)||g.memoizedState!==null,su(c,u,g),ni=b):su(c,u,g);break;default:su(c,u,g)}}function P5(c){var u=c.updateQueue;if(u!==null){c.updateQueue=null;var g=c.stateNode;g===null&&(g=c.stateNode=new UR),u.forEach(function(b){var P=QR.bind(null,c,b);g.has(b)||(g.add(b),b.then(P,P))})}}function go(c,u){var g=u.deletions;if(g!==null)for(var b=0;b<g.length;b++){var P=g[b];try{var L=c,Y=u,ge=Y;e:for(;ge!==null;){switch(ge.tag){case 5:qs=ge.stateNode,po=!1;break e;case 3:qs=ge.stateNode.containerInfo,po=!0;break e;case 4:qs=ge.stateNode.containerInfo,po=!0;break e}ge=ge.return}if(qs===null)throw Error(r(160));A5(L,Y,P),qs=null,po=!1;var Ne=P.alternate;Ne!==null&&(Ne.return=null),P.return=null}catch(Fe){Yn(P,u,Fe)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)T5(u,c),u=u.sibling}function T5(c,u){var g=c.alternate,b=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:if(go(u,c),rl(c),b&4){try{Sm(3,c,c.return),cg(3,c)}catch(Ot){Yn(c,c.return,Ot)}try{Sm(5,c,c.return)}catch(Ot){Yn(c,c.return,Ot)}}break;case 1:go(u,c),rl(c),b&512&&g!==null&&Of(g,g.return);break;case 5:if(go(u,c),rl(c),b&512&&g!==null&&Of(g,g.return),c.flags&32){var P=c.stateNode;try{$t(P,"")}catch(Ot){Yn(c,c.return,Ot)}}if(b&4&&(P=c.stateNode,P!=null)){var L=c.memoizedProps,Y=g!==null?g.memoizedProps:L,ge=c.type,Ne=c.updateQueue;if(c.updateQueue=null,Ne!==null)try{ge==="input"&&L.type==="radio"&&L.name!=null&&tt(P,L),Be(ge,Y);var Fe=Be(ge,L);for(Y=0;Y<Ne.length;Y+=2){var at=Ne[Y],ct=Ne[Y+1];at==="style"?Gt(P,ct):at==="dangerouslySetInnerHTML"?gt(P,ct):at==="children"?$t(P,ct):k(P,at,ct,Fe)}switch(ge){case"input":jt(P,L);break;case"textarea":Je(P,L);break;case"select":var st=P._wrapperState.wasMultiple;P._wrapperState.wasMultiple=!!L.multiple;var _t=L.value;_t!=null?ye(P,!!L.multiple,_t,!1):st!==!!L.multiple&&(L.defaultValue!=null?ye(P,!!L.multiple,L.defaultValue,!0):ye(P,!!L.multiple,L.multiple?[]:"",!1))}P[Jc]=L}catch(Ot){Yn(c,c.return,Ot)}}break;case 6:if(go(u,c),rl(c),b&4){if(c.stateNode===null)throw Error(r(162));P=c.stateNode,L=c.memoizedProps;try{P.nodeValue=L}catch(Ot){Yn(c,c.return,Ot)}}break;case 3:if(go(u,c),rl(c),b&4&&g!==null&&g.memoizedState.isDehydrated)try{Ml(u.containerInfo)}catch(Ot){Yn(c,c.return,Ot)}break;case 4:go(u,c),rl(c);break;case 13:go(u,c),rl(c),P=c.child,P.flags&8192&&(L=P.memoizedState!==null,P.stateNode.isHidden=L,!L||P.alternate!==null&&P.alternate.memoizedState!==null||(Dy=fn())),b&4&&P5(c);break;case 22:if(at=g!==null&&g.memoizedState!==null,c.mode&1?(ni=(Fe=ni)||at,go(u,c),ni=Fe):go(u,c),rl(c),b&8192){if(Fe=c.memoizedState!==null,(c.stateNode.isHidden=Fe)&&!at&&(c.mode&1)!==0)for(Pt=c,at=c.child;at!==null;){for(ct=Pt=at;Pt!==null;){switch(st=Pt,_t=st.child,st.tag){case 0:case 11:case 14:case 15:Sm(4,st,st.return);break;case 1:Of(st,st.return);var Dt=st.stateNode;if(typeof Dt.componentWillUnmount=="function"){b=st,g=st.return;try{u=b,Dt.props=u.memoizedProps,Dt.state=u.memoizedState,Dt.componentWillUnmount()}catch(Ot){Yn(b,g,Ot)}}break;case 5:Of(st,st.return);break;case 22:if(st.memoizedState!==null){D5(ct);continue}}_t!==null?(_t.return=st,Pt=_t):D5(ct)}at=at.sibling}e:for(at=null,ct=c;;){if(ct.tag===5){if(at===null){at=ct;try{P=ct.stateNode,Fe?(L=P.style,typeof L.setProperty=="function"?L.setProperty("display","none","important"):L.display="none"):(ge=ct.stateNode,Ne=ct.memoizedProps.style,Y=Ne!=null&&Ne.hasOwnProperty("display")?Ne.display:null,ge.style.display=ur("display",Y))}catch(Ot){Yn(c,c.return,Ot)}}}else if(ct.tag===6){if(at===null)try{ct.stateNode.nodeValue=Fe?"":ct.memoizedProps}catch(Ot){Yn(c,c.return,Ot)}}else if((ct.tag!==22&&ct.tag!==23||ct.memoizedState===null||ct===c)&&ct.child!==null){ct.child.return=ct,ct=ct.child;continue}if(ct===c)break e;for(;ct.sibling===null;){if(ct.return===null||ct.return===c)break e;at===ct&&(at=null),ct=ct.return}at===ct&&(at=null),ct.sibling.return=ct.return,ct=ct.sibling}}break;case 19:go(u,c),rl(c),b&4&&P5(c);break;case 21:break;default:go(u,c),rl(c)}}function rl(c){var u=c.flags;if(u&2){try{e:{for(var g=c.return;g!==null;){if(C5(g)){var b=g;break e}g=g.return}throw Error(r(160))}switch(b.tag){case 5:var P=b.stateNode;b.flags&32&&($t(P,""),b.flags&=-33);var L=E5(c);Ty(c,L,P);break;case 3:case 4:var Y=b.stateNode.containerInfo,ge=E5(c);Py(c,ge,Y);break;default:throw Error(r(161))}}catch(Ne){Yn(c,c.return,Ne)}c.flags&=-3}u&4096&&(c.flags&=-4097)}function zR(c,u,g){Pt=c,R5(c)}function R5(c,u,g){for(var b=(c.mode&1)!==0;Pt!==null;){var P=Pt,L=P.child;if(P.tag===22&&b){var Y=P.memoizedState!==null||lg;if(!Y){var ge=P.alternate,Ne=ge!==null&&ge.memoizedState!==null||ni;ge=lg;var Fe=ni;if(lg=Y,(ni=Ne)&&!Fe)for(Pt=P;Pt!==null;)Y=Pt,Ne=Y.child,Y.tag===22&&Y.memoizedState!==null?I5(P):Ne!==null?(Ne.return=Y,Pt=Ne):I5(P);for(;L!==null;)Pt=L,R5(L),L=L.sibling;Pt=P,lg=ge,ni=Fe}L5(c)}else(P.subtreeFlags&8772)!==0&&L!==null?(L.return=P,Pt=L):L5(c)}}function L5(c){for(;Pt!==null;){var u=Pt;if((u.flags&8772)!==0){var g=u.alternate;try{if((u.flags&8772)!==0)switch(u.tag){case 0:case 11:case 15:ni||cg(5,u);break;case 1:var b=u.stateNode;if(u.flags&4&&!ni)if(g===null)b.componentDidMount();else{var P=u.elementType===u.type?g.memoizedProps:mo(u.type,g.memoizedProps);b.componentDidUpdate(P,g.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var L=u.updateQueue;L!==null&&Fi(u,L,b);break;case 3:var Y=u.updateQueue;if(Y!==null){if(g=null,u.child!==null)switch(u.child.tag){case 5:g=u.child.stateNode;break;case 1:g=u.child.stateNode}Fi(u,Y,g)}break;case 5:var ge=u.stateNode;if(g===null&&u.flags&4){g=ge;var Ne=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":Ne.autoFocus&&g.focus();break;case"img":Ne.src&&(g.src=Ne.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Fe=u.alternate;if(Fe!==null){var at=Fe.memoizedState;if(at!==null){var ct=at.dehydrated;ct!==null&&Ml(ct)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(r(163))}ni||u.flags&512&&Ay(u)}catch(st){Yn(u,u.return,st)}}if(u===c){Pt=null;break}if(g=u.sibling,g!==null){g.return=u.return,Pt=g;break}Pt=u.return}}function D5(c){for(;Pt!==null;){var u=Pt;if(u===c){Pt=null;break}var g=u.sibling;if(g!==null){g.return=u.return,Pt=g;break}Pt=u.return}}function I5(c){for(;Pt!==null;){var u=Pt;try{switch(u.tag){case 0:case 11:case 15:var g=u.return;try{cg(4,u)}catch(Ne){Yn(u,g,Ne)}break;case 1:var b=u.stateNode;if(typeof b.componentDidMount=="function"){var P=u.return;try{b.componentDidMount()}catch(Ne){Yn(u,P,Ne)}}var L=u.return;try{Ay(u)}catch(Ne){Yn(u,L,Ne)}break;case 5:var Y=u.return;try{Ay(u)}catch(Ne){Yn(u,Y,Ne)}}}catch(Ne){Yn(u,u.return,Ne)}if(u===c){Pt=null;break}var ge=u.sibling;if(ge!==null){ge.return=u.return,Pt=ge;break}Pt=u.return}}var qR=Math.ceil,ug=C.ReactCurrentDispatcher,Ry=C.ReactCurrentOwner,Wa=C.ReactCurrentBatchConfig,zr=0,Ds=null,ps=null,Vs=0,ma=0,Mf=ca(0),ks=0,km=null,wd=0,dg=0,Ly=0,Cm=null,Ui=null,Dy=0,Ff=1/0,ac=null,fg=!1,Iy=null,iu=null,hg=!1,au=null,mg=0,Em=0,Oy=null,pg=-1,gg=0;function _i(){return(zr&6)!==0?fn():pg!==-1?pg:pg=fn()}function ou(c){return(c.mode&1)===0?1:(zr&2)!==0&&Vs!==0?Vs&-Vs:On.transition!==null?(gg===0&&(gg=Ju()),gg):(c=Mr,c!==0||(c=window.event,c=c===void 0?16:Bl(c.type)),c)}function vo(c,u,g,b){if(50<Em)throw Em=0,Oy=null,Error(r(185));Ll(c,g,b),((zr&2)===0||c!==Ds)&&(c===Ds&&((zr&2)===0&&(dg|=g),ks===4&&lu(c,Vs)),$i(c,b),g===1&&zr===0&&(u.mode&1)===0&&(Ff=fn()+500,gd&&$()))}function $i(c,u){var g=c.callbackNode;ts(c,u);var b=Rl(c,c===Ds?Vs:0);if(b===0)g!==null&&Al(g),c.callbackNode=null,c.callbackPriority=0;else if(u=b&-b,c.callbackPriority!==u){if(g!=null&&Al(g),u===1)c.tag===0?T(M5.bind(null,c)):N(M5.bind(null,c)),dy(function(){(zr&6)===0&&$()}),g=null;else{switch(Dl(b)){case 1:g=Tc;break;case 4:g=fi;break;case 16:g=Uo;break;case 536870912:g=Rc;break;default:g=Uo}g=W5(g,O5.bind(null,c))}c.callbackPriority=u,c.callbackNode=g}}function O5(c,u){if(pg=-1,gg=0,(zr&6)!==0)throw Error(r(327));var g=c.callbackNode;if(Bf()&&c.callbackNode!==g)return null;var b=Rl(c,c===Ds?Vs:0);if(b===0)return null;if((b&30)!==0||(b&c.expiredLanes)!==0||u)u=vg(c,b);else{u=b;var P=zr;zr|=2;var L=B5();(Ds!==c||Vs!==u)&&(ac=null,Ff=fn()+500,_d(c,u));do try{HR();break}catch(ge){F5(c,ge)}while(!0);Ur(),ug.current=L,zr=P,ps!==null?u=0:(Ds=null,Vs=0,u=ks)}if(u!==0){if(u===2&&(P=na(c),P!==0&&(b=P,u=My(c,P))),u===1)throw g=km,_d(c,0),lu(c,b),$i(c,fn()),g;if(u===6)lu(c,b);else{if(P=c.current.alternate,(b&30)===0&&!VR(P)&&(u=vg(c,b),u===2&&(L=na(c),L!==0&&(b=L,u=My(c,L))),u===1))throw g=km,_d(c,0),lu(c,b),$i(c,fn()),g;switch(c.finishedWork=P,c.finishedLanes=b,u){case 0:case 1:throw Error(r(345));case 2:Nd(c,Ui,ac);break;case 3:if(lu(c,b),(b&130023424)===b&&(u=Dy+500-fn(),10<u)){if(Rl(c,0)!==0)break;if(P=c.suspendedLanes,(P&b)!==b){_i(),c.pingedLanes|=c.suspendedLanes&P;break}c.timeoutHandle=pm(Nd.bind(null,c,Ui,ac),u);break}Nd(c,Ui,ac);break;case 4:if(lu(c,b),(b&4194240)===b)break;for(u=c.eventTimes,P=-1;0<b;){var Y=31-zn(b);L=1<<Y,Y=u[Y],Y>P&&(P=Y),b&=~L}if(b=P,b=fn()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*qR(b/1960))-b,10<b){c.timeoutHandle=pm(Nd.bind(null,c,Ui,ac),b);break}Nd(c,Ui,ac);break;case 5:Nd(c,Ui,ac);break;default:throw Error(r(329))}}}return $i(c,fn()),c.callbackNode===g?O5.bind(null,c):null}function My(c,u){var g=Cm;return c.current.memoizedState.isDehydrated&&(_d(c,u).flags|=256),c=vg(c,u),c!==2&&(u=Ui,Ui=g,u!==null&&Fy(u)),c}function Fy(c){Ui===null?Ui=c:Ui.push.apply(Ui,c)}function VR(c){for(var u=c;;){if(u.flags&16384){var g=u.updateQueue;if(g!==null&&(g=g.stores,g!==null))for(var b=0;b<g.length;b++){var P=g[b],L=P.getSnapshot;P=P.value;try{if(!Cn(L(),P))return!1}catch{return!1}}}if(g=u.child,u.subtreeFlags&16384&&g!==null)g.return=u,u=g;else{if(u===c)break;for(;u.sibling===null;){if(u.return===null||u.return===c)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function lu(c,u){for(u&=~Ly,u&=~dg,c.suspendedLanes|=u,c.pingedLanes&=~u,c=c.expirationTimes;0<u;){var g=31-zn(u),b=1<<g;c[g]=-1,u&=~b}}function M5(c){if((zr&6)!==0)throw Error(r(327));Bf();var u=Rl(c,0);if((u&1)===0)return $i(c,fn()),null;var g=vg(c,u);if(c.tag!==0&&g===2){var b=na(c);b!==0&&(u=b,g=My(c,b))}if(g===1)throw g=km,_d(c,0),lu(c,u),$i(c,fn()),g;if(g===6)throw Error(r(345));return c.finishedWork=c.current.alternate,c.finishedLanes=u,Nd(c,Ui,ac),$i(c,fn()),null}function By(c,u){var g=zr;zr|=1;try{return c(u)}finally{zr=g,zr===0&&(Ff=fn()+500,gd&&$())}}function bd(c){au!==null&&au.tag===0&&(zr&6)===0&&Bf();var u=zr;zr|=1;var g=Wa.transition,b=Mr;try{if(Wa.transition=null,Mr=1,c)return c()}finally{Mr=b,Wa.transition=g,zr=u,(zr&6)===0&&$()}}function Uy(){ma=Mf.current,Kr(Mf)}function _d(c,u){c.finishedWork=null,c.finishedLanes=0;var g=c.timeoutHandle;if(g!==-1&&(c.timeoutHandle=-1,Yp(g)),ps!==null)for(g=ps.return;g!==null;){var b=g;switch(De(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Sf();break;case 3:za(),Kr(Xs),Kr(js),bm();break;case 5:xm(b);break;case 4:za();break;case 13:Kr(hn);break;case 19:Kr(hn);break;case 10:gn(b.type._context);break;case 22:case 23:Uy()}g=g.return}if(Ds=c,ps=c=cu(c.current,null),Vs=ma=u,ks=0,km=null,Ly=dg=wd=0,Ui=Cm=null,tn!==null){for(u=0;u<tn.length;u++)if(g=tn[u],b=g.interleaved,b!==null){g.interleaved=null;var P=b.next,L=g.pending;if(L!==null){var Y=L.next;L.next=P,b.next=Y}g.pending=b}tn=null}return c}function F5(c,u){do{var g=ps;try{if(Ur(),kf.current=sg,tu){for(var b=vn.memoizedState;b!==null;){var P=b.queue;P!==null&&(P.pending=null),b=b.next}tu=!1}if(qa=0,Un=Kn=vn=null,fo=!1,ru=0,Ry.current=null,g===null||g.return===null){ks=1,km=u,ps=null;break}e:{var L=c,Y=g.return,ge=g,Ne=u;if(u=Vs,ge.flags|=32768,Ne!==null&&typeof Ne=="object"&&typeof Ne.then=="function"){var Fe=Ne,at=ge,ct=at.tag;if((at.mode&1)===0&&(ct===0||ct===11||ct===15)){var st=at.alternate;st?(at.updateQueue=st.updateQueue,at.memoizedState=st.memoizedState,at.lanes=st.lanes):(at.updateQueue=null,at.memoizedState=null)}var _t=c5(Y);if(_t!==null){_t.flags&=-257,u5(_t,Y,ge,L,u),_t.mode&1&&l5(L,Fe,u),u=_t,Ne=Fe;var Dt=u.updateQueue;if(Dt===null){var Ot=new Set;Ot.add(Ne),u.updateQueue=Ot}else Dt.add(Ne);break e}else{if((u&1)===0){l5(L,Fe,u),$y();break e}Ne=Error(r(426))}}else if(Ye&&ge.mode&1){var is=c5(Y);if(is!==null){(is.flags&65536)===0&&(is.flags|=256),u5(is,Y,ge,L,u),mt(If(Ne,ge));break e}}L=Ne=If(Ne,ge),ks!==4&&(ks=2),Cm===null?Cm=[L]:Cm.push(L),L=Y;do{switch(L.tag){case 3:L.flags|=65536,u&=-u,L.lanes|=u;var Le=a5(L,Ne,u);nn(L,Le);break e;case 1:ge=Ne;var Se=L.type,Ie=L.stateNode;if((L.flags&128)===0&&(typeof Se.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(iu===null||!iu.has(Ie)))){L.flags|=65536,u&=-u,L.lanes|=u;var ut=o5(L,ge,u);nn(L,ut);break e}}L=L.return}while(L!==null)}$5(g)}catch(zt){u=zt,ps===g&&g!==null&&(ps=g=g.return);continue}break}while(!0)}function B5(){var c=ug.current;return ug.current=sg,c===null?sg:c}function $y(){(ks===0||ks===3||ks===2)&&(ks=4),Ds===null||(wd&268435455)===0&&(dg&268435455)===0||lu(Ds,Vs)}function vg(c,u){var g=zr;zr|=2;var b=B5();(Ds!==c||Vs!==u)&&(ac=null,_d(c,u));do try{WR();break}catch(P){F5(c,P)}while(!0);if(Ur(),zr=g,ug.current=b,ps!==null)throw Error(r(261));return Ds=null,Vs=0,ks}function WR(){for(;ps!==null;)U5(ps)}function HR(){for(;ps!==null&&!Pc();)U5(ps)}function U5(c){var u=V5(c.alternate,c,ma);c.memoizedProps=c.pendingProps,u===null?$5(c):ps=u,Ry.current=null}function $5(c){var u=c;do{var g=u.alternate;if(c=u.return,(u.flags&32768)===0){if(g=FR(g,u,ma),g!==null){ps=g;return}}else{if(g=BR(g,u),g!==null){g.flags&=32767,ps=g;return}if(c!==null)c.flags|=32768,c.subtreeFlags=0,c.deletions=null;else{ks=6,ps=null;return}}if(u=u.sibling,u!==null){ps=u;return}ps=u=c}while(u!==null);ks===0&&(ks=5)}function Nd(c,u,g){var b=Mr,P=Wa.transition;try{Wa.transition=null,Mr=1,GR(c,u,g,b)}finally{Wa.transition=P,Mr=b}return null}function GR(c,u,g,b){do Bf();while(au!==null);if((zr&6)!==0)throw Error(r(327));g=c.finishedWork;var P=c.finishedLanes;if(g===null)return null;if(c.finishedWork=null,c.finishedLanes=0,g===c.current)throw Error(r(177));c.callbackNode=null,c.callbackPriority=0;var L=g.lanes|g.childLanes;if(Ra(c,L),c===Ds&&(ps=Ds=null,Vs=0),(g.subtreeFlags&2064)===0&&(g.flags&2064)===0||hg||(hg=!0,W5(Uo,function(){return Bf(),null})),L=(g.flags&15990)!==0,(g.subtreeFlags&15990)!==0||L){L=Wa.transition,Wa.transition=null;var Y=Mr;Mr=1;var ge=zr;zr|=4,Ry.current=null,$R(c,g),T5(g,c),ad(ec),Fc=!!md,ec=md=null,c.current=g,zR(g),nm(),zr=ge,Mr=Y,Wa.transition=L}else c.current=g;if(hg&&(hg=!1,au=c,mg=P),L=c.pendingLanes,L===0&&(iu=null),hf(g.stateNode),$i(c,fn()),u!==null)for(b=c.onRecoverableError,g=0;g<u.length;g++)P=u[g],b(P.value,{componentStack:P.stack,digest:P.digest});if(fg)throw fg=!1,c=Iy,Iy=null,c;return(mg&1)!==0&&c.tag!==0&&Bf(),L=c.pendingLanes,(L&1)!==0?c===Oy?Em++:(Em=0,Oy=c):Em=0,$(),null}function Bf(){if(au!==null){var c=Dl(mg),u=Wa.transition,g=Mr;try{if(Wa.transition=null,Mr=16>c?16:c,au===null)var b=!1;else{if(c=au,au=null,mg=0,(zr&6)!==0)throw Error(r(331));var P=zr;for(zr|=4,Pt=c.current;Pt!==null;){var L=Pt,Y=L.child;if((Pt.flags&16)!==0){var ge=L.deletions;if(ge!==null){for(var Ne=0;Ne<ge.length;Ne++){var Fe=ge[Ne];for(Pt=Fe;Pt!==null;){var at=Pt;switch(at.tag){case 0:case 11:case 15:Sm(8,at,L)}var ct=at.child;if(ct!==null)ct.return=at,Pt=ct;else for(;Pt!==null;){at=Pt;var st=at.sibling,_t=at.return;if(k5(at),at===Fe){Pt=null;break}if(st!==null){st.return=_t,Pt=st;break}Pt=_t}}}var Dt=L.alternate;if(Dt!==null){var Ot=Dt.child;if(Ot!==null){Dt.child=null;do{var is=Ot.sibling;Ot.sibling=null,Ot=is}while(Ot!==null)}}Pt=L}}if((L.subtreeFlags&2064)!==0&&Y!==null)Y.return=L,Pt=Y;else e:for(;Pt!==null;){if(L=Pt,(L.flags&2048)!==0)switch(L.tag){case 0:case 11:case 15:Sm(9,L,L.return)}var Le=L.sibling;if(Le!==null){Le.return=L.return,Pt=Le;break e}Pt=L.return}}var Se=c.current;for(Pt=Se;Pt!==null;){Y=Pt;var Ie=Y.child;if((Y.subtreeFlags&2064)!==0&&Ie!==null)Ie.return=Y,Pt=Ie;else e:for(Y=Se;Pt!==null;){if(ge=Pt,(ge.flags&2048)!==0)try{switch(ge.tag){case 0:case 11:case 15:cg(9,ge)}}catch(zt){Yn(ge,ge.return,zt)}if(ge===Y){Pt=null;break e}var ut=ge.sibling;if(ut!==null){ut.return=ge.return,Pt=ut;break e}Pt=ge.return}}if(zr=P,$(),hi&&typeof hi.onPostCommitFiberRoot=="function")try{hi.onPostCommitFiberRoot(Pl,c)}catch{}b=!0}return b}finally{Mr=g,Wa.transition=u}}return!1}function z5(c,u,g){u=If(g,u),u=a5(c,u,1),c=Fn(c,u,1),u=_i(),c!==null&&(Ll(c,1,u),$i(c,u))}function Yn(c,u,g){if(c.tag===3)z5(c,c,g);else for(;u!==null;){if(u.tag===3){z5(u,c,g);break}else if(u.tag===1){var b=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(iu===null||!iu.has(b))){c=If(g,c),c=o5(u,c,1),u=Fn(u,c,1),c=_i(),u!==null&&(Ll(u,1,c),$i(u,c));break}}u=u.return}}function KR(c,u,g){var b=c.pingCache;b!==null&&b.delete(u),u=_i(),c.pingedLanes|=c.suspendedLanes&g,Ds===c&&(Vs&g)===g&&(ks===4||ks===3&&(Vs&130023424)===Vs&&500>fn()-Dy?_d(c,0):Ly|=g),$i(c,u)}function q5(c,u){u===0&&((c.mode&1)===0?u=1:(u=mi,mi<<=1,(mi&130023424)===0&&(mi=4194304)));var g=_i();c=rn(c,u),c!==null&&(Ll(c,u,g),$i(c,g))}function YR(c){var u=c.memoizedState,g=0;u!==null&&(g=u.retryLane),q5(c,g)}function QR(c,u){var g=0;switch(c.tag){case 13:var b=c.stateNode,P=c.memoizedState;P!==null&&(g=P.retryLane);break;case 19:b=c.stateNode;break;default:throw Error(r(314))}b!==null&&b.delete(u),q5(c,g)}var V5;V5=function(c,u,g){if(c!==null)if(c.memoizedProps!==u.pendingProps||Xs.current)Bi=!0;else{if((c.lanes&g)===0&&(u.flags&128)===0)return Bi=!1,MR(c,u,g);Bi=(c.flags&131072)!==0}else Bi=!1,Ye&&(u.flags&1048576)!==0&&Te(u,ae,u.index);switch(u.lanes=0,u.tag){case 2:var b=u.type;og(c,u),c=u.pendingProps;var P=Xc(u,js.current);Pn(u,g),P=vd(null,u,b,c,P,g);var L=Va();return u.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,ei(b)?(L=!0,nc(u)):L=!1,u.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Ss(u),P.updater=ig,u.stateNode=P,P._reactInternals=u,yy(u,b,c,g),u=_y(null,u,b,!0,L,g)):(u.tag=0,Ye&&L&&Ge(u),bi(null,u,P,g),u=u.child),u;case 16:b=u.elementType;e:{switch(og(c,u),c=u.pendingProps,P=b._init,b=P(b._payload),u.type=b,P=u.tag=ZR(b),c=mo(b,c),P){case 0:u=by(null,u,b,c,g);break e;case 1:u=g5(null,u,b,c,g);break e;case 11:u=d5(null,u,b,c,g);break e;case 14:u=f5(null,u,b,mo(b.type,c),g);break e}throw Error(r(306,b,""))}return u;case 0:return b=u.type,P=u.pendingProps,P=u.elementType===b?P:mo(b,P),by(c,u,b,P,g);case 1:return b=u.type,P=u.pendingProps,P=u.elementType===b?P:mo(b,P),g5(c,u,b,P,g);case 3:e:{if(v5(u),c===null)throw Error(r(387));b=u.pendingProps,L=u.memoizedState,P=L.element,ti(c,u),Ls(u,b,null,g);var Y=u.memoizedState;if(b=Y.element,L.isDehydrated)if(L={element:b,isDehydrated:!1,cache:Y.cache,pendingSuspenseBoundaries:Y.pendingSuspenseBoundaries,transitions:Y.transitions},u.updateQueue.baseState=L,u.memoizedState=L,u.flags&256){P=If(Error(r(423)),u),u=y5(c,u,b,g,P);break e}else if(b!==P){P=If(Error(r(424)),u),u=y5(c,u,b,g,P);break e}else for(We=zs(u.stateNode.containerInfo.firstChild),$e=u,Ye=!0,Qe=null,g=jn(u,null,b,g),u.child=g;g;)g.flags=g.flags&-3|4096,g=g.sibling;else{if(Ct(),b===P){u=ic(c,u,g);break e}bi(c,u,b,g)}u=u.child}return u;case 5:return Xp(u),c===null&&Lt(u),b=u.type,P=u.pendingProps,L=c!==null?c.memoizedProps:null,Y=P.children,mm(b,P)?Y=null:L!==null&&mm(b,L)&&(u.flags|=32),p5(c,u),bi(c,u,Y,g),u.child;case 6:return c===null&&Lt(u),null;case 13:return x5(c,u,g);case 4:return eu(u,u.stateNode.containerInfo),b=u.pendingProps,c===null?u.child=Hn(u,null,b,g):bi(c,u,b,g),u.child;case 11:return b=u.type,P=u.pendingProps,P=u.elementType===b?P:mo(b,P),d5(c,u,b,P,g);case 7:return bi(c,u,u.pendingProps,g),u.child;case 8:return bi(c,u,u.pendingProps.children,g),u.child;case 12:return bi(c,u,u.pendingProps.children,g),u.child;case 10:e:{if(b=u.type._context,P=u.pendingProps,L=u.memoizedProps,Y=P.value,Jr(ns,b._currentValue),b._currentValue=Y,L!==null)if(Cn(L.value,Y)){if(L.children===P.children&&!Xs.current){u=ic(c,u,g);break e}}else for(L=u.child,L!==null&&(L.return=u);L!==null;){var ge=L.dependencies;if(ge!==null){Y=L.child;for(var Ne=ge.firstContext;Ne!==null;){if(Ne.context===b){if(L.tag===1){Ne=Mn(-1,g&-g),Ne.tag=2;var Fe=L.updateQueue;if(Fe!==null){Fe=Fe.shared;var at=Fe.pending;at===null?Ne.next=Ne:(Ne.next=at.next,at.next=Ne),Fe.pending=Ne}}L.lanes|=g,Ne=L.alternate,Ne!==null&&(Ne.lanes|=g),$r(L.return,g,u),ge.lanes|=g;break}Ne=Ne.next}}else if(L.tag===10)Y=L.type===u.type?null:L.child;else if(L.tag===18){if(Y=L.return,Y===null)throw Error(r(341));Y.lanes|=g,ge=Y.alternate,ge!==null&&(ge.lanes|=g),$r(Y,g,u),Y=L.sibling}else Y=L.child;if(Y!==null)Y.return=L;else for(Y=L;Y!==null;){if(Y===u){Y=null;break}if(L=Y.sibling,L!==null){L.return=Y.return,Y=L;break}Y=Y.return}L=Y}bi(c,u,P.children,g),u=u.child}return u;case 9:return P=u.type,b=u.pendingProps.children,Pn(u,g),P=Tn(P),b=b(P),u.flags|=1,bi(c,u,b,g),u.child;case 14:return b=u.type,P=mo(b,u.pendingProps),P=mo(b.type,P),f5(c,u,b,P,g);case 15:return h5(c,u,u.type,u.pendingProps,g);case 17:return b=u.type,P=u.pendingProps,P=u.elementType===b?P:mo(b,P),og(c,u),u.tag=1,ei(b)?(c=!0,nc(u)):c=!1,Pn(u,g),s5(u,b,P),yy(u,b,P,g),_y(null,u,b,!0,c,g);case 19:return b5(c,u,g);case 22:return m5(c,u,g)}throw Error(r(156,u.tag))};function W5(c,u){return El(c,u)}function JR(c,u,g,b){this.tag=c,this.key=g,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ha(c,u,g,b){return new JR(c,u,g,b)}function zy(c){return c=c.prototype,!(!c||!c.isReactComponent)}function ZR(c){if(typeof c=="function")return zy(c)?1:0;if(c!=null){if(c=c.$$typeof,c===O)return 11;if(c===ue)return 14}return 2}function cu(c,u){var g=c.alternate;return g===null?(g=Ha(c.tag,u,c.key,c.mode),g.elementType=c.elementType,g.type=c.type,g.stateNode=c.stateNode,g.alternate=c,c.alternate=g):(g.pendingProps=u,g.type=c.type,g.flags=0,g.subtreeFlags=0,g.deletions=null),g.flags=c.flags&14680064,g.childLanes=c.childLanes,g.lanes=c.lanes,g.child=c.child,g.memoizedProps=c.memoizedProps,g.memoizedState=c.memoizedState,g.updateQueue=c.updateQueue,u=c.dependencies,g.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},g.sibling=c.sibling,g.index=c.index,g.ref=c.ref,g}function yg(c,u,g,b,P,L){var Y=2;if(b=c,typeof c=="function")zy(c)&&(Y=1);else if(typeof c=="string")Y=5;else e:switch(c){case F:return jd(g.children,P,L,u);case U:Y=8,P|=8;break;case I:return c=Ha(12,g,u,P|2),c.elementType=I,c.lanes=L,c;case z:return c=Ha(13,g,u,P),c.elementType=z,c.lanes=L,c;case q:return c=Ha(19,g,u,P),c.elementType=q,c.lanes=L,c;case le:return xg(g,P,L,u);default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case K:Y=10;break e;case B:Y=9;break e;case O:Y=11;break e;case ue:Y=14;break e;case ie:Y=16,b=null;break e}throw Error(r(130,c==null?c:typeof c,""))}return u=Ha(Y,g,u,P),u.elementType=c,u.type=b,u.lanes=L,u}function jd(c,u,g,b){return c=Ha(7,c,b,u),c.lanes=g,c}function xg(c,u,g,b){return c=Ha(22,c,b,u),c.elementType=le,c.lanes=g,c.stateNode={isHidden:!1},c}function qy(c,u,g){return c=Ha(6,c,null,u),c.lanes=g,c}function Vy(c,u,g){return u=Ha(4,c.children!==null?c.children:[],c.key,u),u.lanes=g,u.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},u}function XR(c,u,g,b,P){this.tag=u,this.containerInfo=c,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Zu(0),this.expirationTimes=Zu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zu(0),this.identifierPrefix=b,this.onRecoverableError=P,this.mutableSourceEagerHydrationData=null}function Wy(c,u,g,b,P,L,Y,ge,Ne){return c=new XR(c,u,g,ge,Ne),u===1?(u=1,L===!0&&(u|=8)):u=0,L=Ha(3,null,null,u),c.current=L,L.stateNode=c,L.memoizedState={element:b,isDehydrated:g,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ss(L),c}function e8(c,u,g){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:M,key:b==null?null:""+b,children:c,containerInfo:u,implementation:g}}function H5(c){if(!c)return Xo;c=c._reactInternals;e:{if(bs(c)!==c||c.tag!==1)throw Error(r(170));var u=c;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(ei(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(r(171))}if(c.tag===1){var g=c.type;if(ei(g))return ym(c,g,u)}return u}function G5(c,u,g,b,P,L,Y,ge,Ne){return c=Wy(g,b,!0,c,P,L,Y,ge,Ne),c.context=H5(null),g=c.current,b=_i(),P=ou(g),L=Mn(b,P),L.callback=u??null,Fn(g,L,P),c.current.lanes=P,Ll(c,P,b),$i(c,b),c}function wg(c,u,g,b){var P=u.current,L=_i(),Y=ou(P);return g=H5(g),u.context===null?u.context=g:u.pendingContext=g,u=Mn(L,Y),u.payload={element:c},b=b===void 0?null:b,b!==null&&(u.callback=b),c=Fn(P,u,Y),c!==null&&(vo(c,P,Y,L),Rs(c,P,Y)),Y}function bg(c){if(c=c.current,!c.child)return null;switch(c.child.tag){case 5:return c.child.stateNode;default:return c.child.stateNode}}function K5(c,u){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var g=c.retryLane;c.retryLane=g!==0&&g<u?g:u}}function Hy(c,u){K5(c,u),(c=c.alternate)&&K5(c,u)}function t8(){return null}var Y5=typeof reportError=="function"?reportError:function(c){console.error(c)};function Gy(c){this._internalRoot=c}_g.prototype.render=Gy.prototype.render=function(c){var u=this._internalRoot;if(u===null)throw Error(r(409));wg(c,u,null,null)},_g.prototype.unmount=Gy.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var u=c.containerInfo;bd(function(){wg(null,c,null,null)}),u[Ps]=null}};function _g(c){this._internalRoot=c}_g.prototype.unstable_scheduleHydration=function(c){if(c){var u=pf();c={blockedOn:null,target:c,priority:u};for(var g=0;g<Da.length&&u!==0&&u<Da[g].priority;g++);Da.splice(g,0,c),g===0&&vf(c)}};function Ky(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function Ng(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11&&(c.nodeType!==8||c.nodeValue!==" react-mount-point-unstable "))}function Q5(){}function r8(c,u,g,b,P){if(P){if(typeof b=="function"){var L=b;b=function(){var Fe=bg(Y);L.call(Fe)}}var Y=G5(u,b,c,0,null,!1,!1,"",Q5);return c._reactRootContainer=Y,c[Ps]=Y.current,Zl(c.nodeType===8?c.parentNode:c),bd(),Y}for(;P=c.lastChild;)c.removeChild(P);if(typeof b=="function"){var ge=b;b=function(){var Fe=bg(Ne);ge.call(Fe)}}var Ne=Wy(c,0,!1,null,null,!1,!1,"",Q5);return c._reactRootContainer=Ne,c[Ps]=Ne.current,Zl(c.nodeType===8?c.parentNode:c),bd(function(){wg(u,Ne,g,b)}),Ne}function jg(c,u,g,b,P){var L=g._reactRootContainer;if(L){var Y=L;if(typeof P=="function"){var ge=P;P=function(){var Ne=bg(Y);ge.call(Ne)}}wg(u,Y,c,P)}else Y=r8(g,u,c,P,b);return bg(Y)}$o=function(c){switch(c.tag){case 3:var u=c.stateNode;if(u.current.memoizedState.isDehydrated){var g=Ta(u.pendingLanes);g!==0&&(Dc(u,g|1),$i(u,fn()),(zr&6)===0&&(Ff=fn()+500,$()))}break;case 13:bd(function(){var b=rn(c,1);if(b!==null){var P=_i();vo(b,c,1,P)}}),Hy(c,1)}},Xu=function(c){if(c.tag===13){var u=rn(c,134217728);if(u!==null){var g=_i();vo(u,c,134217728,g)}Hy(c,134217728)}},mf=function(c){if(c.tag===13){var u=ou(c),g=rn(c,u);if(g!==null){var b=_i();vo(g,c,u,b)}Hy(c,u)}},pf=function(){return Mr},Ic=function(c,u){var g=Mr;try{return Mr=c,u()}finally{Mr=g}},Yt=function(c,u,g){switch(u){case"input":if(jt(c,g),u=g.name,g.type==="radio"&&u!=null){for(g=c;g.parentNode;)g=g.parentNode;for(g=g.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<g.length;u++){var b=g[u];if(b!==c&&b.form===c.form){var P=pd(b);if(!P)throw Error(r(90));ze(b),jt(b,P)}}}break;case"textarea":Je(c,g);break;case"select":u=g.value,u!=null&&ye(c,!!g.multiple,u,!1)}},nr=By,jr=bd;var n8={usingClientEntryPoint:!1,Events:[Zc,tc,pd,Ar,Ht,By]},Am={findFiberByHostInstance:Zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},s8={bundleType:Am.bundleType,version:Am.version,rendererPackageName:Am.rendererPackageName,rendererConfig:Am.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:C.ReactCurrentDispatcher,findHostInstanceByFiber:function(c){return c=ra(c),c===null?null:c.stateNode},findFiberByHostInstance:Am.findFiberByHostInstance||t8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Sg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Sg.isDisabled&&Sg.supportsFiber)try{Pl=Sg.inject(s8),hi=Sg}catch{}}return zi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=n8,zi.createPortal=function(c,u){var g=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ky(u))throw Error(r(200));return e8(c,u,null,g)},zi.createRoot=function(c,u){if(!Ky(c))throw Error(r(299));var g=!1,b="",P=Y5;return u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(b=u.identifierPrefix),u.onRecoverableError!==void 0&&(P=u.onRecoverableError)),u=Wy(c,1,!1,null,null,g,!1,b,P),c[Ps]=u.current,Zl(c.nodeType===8?c.parentNode:c),new Gy(u)},zi.findDOMNode=function(c){if(c==null)return null;if(c.nodeType===1)return c;var u=c._reactInternals;if(u===void 0)throw typeof c.render=="function"?Error(r(188)):(c=Object.keys(c).join(","),Error(r(268,c)));return c=ra(u),c=c===null?null:c.stateNode,c},zi.flushSync=function(c){return bd(c)},zi.hydrate=function(c,u,g){if(!Ng(u))throw Error(r(200));return jg(null,c,u,!0,g)},zi.hydrateRoot=function(c,u,g){if(!Ky(c))throw Error(r(405));var b=g!=null&&g.hydratedSources||null,P=!1,L="",Y=Y5;if(g!=null&&(g.unstable_strictMode===!0&&(P=!0),g.identifierPrefix!==void 0&&(L=g.identifierPrefix),g.onRecoverableError!==void 0&&(Y=g.onRecoverableError)),u=G5(u,null,c,1,g??null,P,!1,L,Y),c[Ps]=u.current,Zl(c),b)for(c=0;c<b.length;c++)g=b[c],P=g._getVersion,P=P(g._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[g,P]:u.mutableSourceEagerHydrationData.push(g,P);return new _g(u)},zi.render=function(c,u,g){if(!Ng(u))throw Error(r(200));return jg(null,c,u,!1,g)},zi.unmountComponentAtNode=function(c){if(!Ng(c))throw Error(r(40));return c._reactRootContainer?(bd(function(){jg(null,null,c,!1,function(){c._reactRootContainer=null,c[Ps]=null})}),!0):!1},zi.unstable_batchedUpdates=By,zi.unstable_renderSubtreeIntoContainer=function(c,u,g,b){if(!Ng(g))throw Error(r(200));if(c==null||c._reactInternals===void 0)throw Error(r(38));return jg(c,u,g,!1,b)},zi.version="18.3.1-next-f1338f8080-20240426",zi}var s_;function E4(){if(s_)return Jy.exports;s_=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Jy.exports=f8(),Jy.exports}var i_;function h8(){if(i_)return kg;i_=1;var e=E4();return kg.createRoot=e.createRoot,kg.hydrateRoot=e.hydrateRoot,kg}var m8=h8(),x=c0();const Ve=l0(x),Zw=a8({__proto__:null,default:Ve},[x]),p8=1,g8=1e6;let ex=0;function v8(){return ex=(ex+1)%Number.MAX_SAFE_INTEGER,ex.toString()}const tx=new Map,a_=e=>{if(tx.has(e))return;const t=setTimeout(()=>{tx.delete(e),Jm({type:"REMOVE_TOAST",toastId:e})},g8);tx.set(e,t)},y8=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,p8)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(r=>r.id===t.toast.id?{...r,...t.toast}:r)};case"DISMISS_TOAST":{const{toastId:r}=t;return r?a_(r):e.toasts.forEach(n=>{a_(n.id)}),{...e,toasts:e.toasts.map(n=>n.id===r||r===void 0?{...n,open:!1}:n)}}case"REMOVE_TOAST":return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(r=>r.id!==t.toastId)}}},cv=[];let uv={toasts:[]};function Jm(e){uv=y8(uv,e),cv.forEach(t=>{t(uv)})}function x8({...e}){const t=v8(),r=i=>Jm({type:"UPDATE_TOAST",toast:{...i,id:t}}),n=()=>Jm({type:"DISMISS_TOAST",toastId:t});return Jm({type:"ADD_TOAST",toast:{...e,id:t,open:!0,onOpenChange:i=>{i||n()}}}),{id:t,dismiss:n,update:r}}function qr(){const[e,t]=x.useState(uv);return x.useEffect(()=>(cv.push(t),()=>{const r=cv.indexOf(t);r>-1&&cv.splice(r,1)}),[e]),{...e,toast:x8,dismiss:r=>Jm({type:"DISMISS_TOAST",toastId:r})}}var Uh=E4();const A4=l0(Uh);function lt(e,t,{checkForDefaultPrevented:r=!0}={}){return function(i){if(e?.(i),r===!1||!i.defaultPrevented)return t?.(i)}}function o_(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function _c(...e){return t=>{let r=!1;const n=e.map(i=>{const a=o_(i,t);return!r&&typeof a=="function"&&(r=!0),a});if(r)return()=>{for(let i=0;i<n.length;i++){const a=n[i];typeof a=="function"?a():o_(e[i],null)}}}}function or(...e){return x.useCallback(_c(...e),e)}function w8(e,t){const r=x.createContext(t),n=a=>{const{children:o,...l}=a,d=x.useMemo(()=>l,Object.values(l));return s.jsx(r.Provider,{value:d,children:o})};n.displayName=e+"Provider";function i(a){const o=x.useContext(r);if(o)return o;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[n,i]}function Fs(e,t=[]){let r=[];function n(a,o){const l=x.createContext(o),d=r.length;r=[...r,o];const f=p=>{const{scope:v,children:m,...j}=p,w=v?.[e]?.[d]||l,_=x.useMemo(()=>j,Object.values(j));return s.jsx(w.Provider,{value:_,children:m})};f.displayName=a+"Provider";function h(p,v){const m=v?.[e]?.[d]||l,j=x.useContext(m);if(j)return j;if(o!==void 0)return o;throw new Error(`\`${p}\` must be used within \`${a}\``)}return[f,h]}const i=()=>{const a=r.map(o=>x.createContext(o));return function(l){const d=l?.[e]||a;return x.useMemo(()=>({[`__scope${e}`]:{...l,[e]:d}}),[l,d])}};return i.scopeName=e,[n,b8(i,...t)]}function b8(...e){const t=e[0];if(e.length===1)return t;const r=()=>{const n=e.map(i=>({useScope:i(),scopeName:i.scopeName}));return function(a){const o=n.reduce((l,{useScope:d,scopeName:f})=>{const p=d(a)[`__scope${f}`];return{...l,...p}},{});return x.useMemo(()=>({[`__scope${t.scopeName}`]:o}),[o])}};return r.scopeName=t.scopeName,r}function Pu(e){const t=_8(e),r=x.forwardRef((n,i)=>{const{children:a,...o}=n,l=x.Children.toArray(a),d=l.find(N8);if(d){const f=d.props.children,h=l.map(p=>p===d?x.Children.count(f)>1?x.Children.only(null):x.isValidElement(f)?f.props.children:null:p);return s.jsx(t,{...o,ref:i,children:x.isValidElement(f)?x.cloneElement(f,void 0,h):null})}return s.jsx(t,{...o,ref:i,children:a})});return r.displayName=`${e}.Slot`,r}var P4=Pu("Slot");function _8(e){const t=x.forwardRef((r,n)=>{const{children:i,...a}=r;if(x.isValidElement(i)){const o=S8(i),l=j8(a,i.props);return i.type!==x.Fragment&&(l.ref=n?_c(n,o):o),x.cloneElement(i,l)}return x.Children.count(i)>1?x.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var T4=Symbol("radix.slottable");function R4(e){const t=({children:r})=>s.jsx(s.Fragment,{children:r});return t.displayName=`${e}.Slottable`,t.__radixId=T4,t}function N8(e){return x.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===T4}function j8(e,t){const r={...t};for(const n in t){const i=e[n],a=t[n];/^on[A-Z]/.test(n)?i&&a?r[n]=(...l)=>{const d=a(...l);return i(...l),d}:i&&(r[n]=i):n==="style"?r[n]={...i,...a}:n==="className"&&(r[n]=[i,a].filter(Boolean).join(" "))}return{...e,...r}}function S8(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}function Cp(e){const t=e+"CollectionProvider",[r,n]=Fs(t),[i,a]=r(t,{collectionRef:{current:null},itemMap:new Map}),o=w=>{const{scope:_,children:S}=w,E=Ve.useRef(null),k=Ve.useRef(new Map).current;return s.jsx(i,{scope:_,itemMap:k,collectionRef:E,children:S})};o.displayName=t;const l=e+"CollectionSlot",d=Pu(l),f=Ve.forwardRef((w,_)=>{const{scope:S,children:E}=w,k=a(l,S),C=or(_,k.collectionRef);return s.jsx(d,{ref:C,children:E})});f.displayName=l;const h=e+"CollectionItemSlot",p="data-radix-collection-item",v=Pu(h),m=Ve.forwardRef((w,_)=>{const{scope:S,children:E,...k}=w,C=Ve.useRef(null),D=or(_,C),M=a(h,S);return Ve.useEffect(()=>(M.itemMap.set(C,{ref:C,...k}),()=>void M.itemMap.delete(C))),s.jsx(v,{[p]:"",ref:D,children:E})});m.displayName=h;function j(w){const _=a(e+"CollectionConsumer",w);return Ve.useCallback(()=>{const E=_.collectionRef.current;if(!E)return[];const k=Array.from(E.querySelectorAll(`[${p}]`));return Array.from(_.itemMap.values()).sort((M,F)=>k.indexOf(M.ref.current)-k.indexOf(F.ref.current))},[_.collectionRef,_.itemMap])}return[{Provider:o,Slot:f,ItemSlot:m},j,n]}var k8=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],yt=k8.reduce((e,t)=>{const r=Pu(`Primitive.${t}`),n=x.forwardRef((i,a)=>{const{asChild:o,...l}=i,d=o?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),s.jsx(d,{...l,ref:a})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function Xw(e,t){e&&Uh.flushSync(()=>e.dispatchEvent(t))}function Zn(e){const t=x.useRef(e);return x.useEffect(()=>{t.current=e}),x.useMemo(()=>(...r)=>t.current?.(...r),[])}function C8(e,t=globalThis?.document){const r=Zn(e);x.useEffect(()=>{const n=i=>{i.key==="Escape"&&r(i)};return t.addEventListener("keydown",n,{capture:!0}),()=>t.removeEventListener("keydown",n,{capture:!0})},[r,t])}var E8="DismissableLayer",T1="dismissableLayer.update",A8="dismissableLayer.pointerDownOutside",P8="dismissableLayer.focusOutside",l_,L4=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Xd=x.forwardRef((e,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:n,onPointerDownOutside:i,onFocusOutside:a,onInteractOutside:o,onDismiss:l,...d}=e,f=x.useContext(L4),[h,p]=x.useState(null),v=h?.ownerDocument??globalThis?.document,[,m]=x.useState({}),j=or(t,F=>p(F)),w=Array.from(f.layers),[_]=[...f.layersWithOutsidePointerEventsDisabled].slice(-1),S=w.indexOf(_),E=h?w.indexOf(h):-1,k=f.layersWithOutsidePointerEventsDisabled.size>0,C=E>=S,D=R8(F=>{const U=F.target,I=[...f.branches].some(K=>K.contains(U));!C||I||(i?.(F),o?.(F),F.defaultPrevented||l?.())},v),M=L8(F=>{const U=F.target;[...f.branches].some(K=>K.contains(U))||(a?.(F),o?.(F),F.defaultPrevented||l?.())},v);return C8(F=>{E===f.layers.size-1&&(n?.(F),!F.defaultPrevented&&l&&(F.preventDefault(),l()))},v),x.useEffect(()=>{if(h)return r&&(f.layersWithOutsidePointerEventsDisabled.size===0&&(l_=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),f.layersWithOutsidePointerEventsDisabled.add(h)),f.layers.add(h),c_(),()=>{r&&f.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=l_)}},[h,v,r,f]),x.useEffect(()=>()=>{h&&(f.layers.delete(h),f.layersWithOutsidePointerEventsDisabled.delete(h),c_())},[h,f]),x.useEffect(()=>{const F=()=>m({});return document.addEventListener(T1,F),()=>document.removeEventListener(T1,F)},[]),s.jsx(yt.div,{...d,ref:j,style:{pointerEvents:k?C?"auto":"none":void 0,...e.style},onFocusCapture:lt(e.onFocusCapture,M.onFocusCapture),onBlurCapture:lt(e.onBlurCapture,M.onBlurCapture),onPointerDownCapture:lt(e.onPointerDownCapture,D.onPointerDownCapture)})});Xd.displayName=E8;var T8="DismissableLayerBranch",D4=x.forwardRef((e,t)=>{const r=x.useContext(L4),n=x.useRef(null),i=or(t,n);return x.useEffect(()=>{const a=n.current;if(a)return r.branches.add(a),()=>{r.branches.delete(a)}},[r.branches]),s.jsx(yt.div,{...e,ref:i})});D4.displayName=T8;function R8(e,t=globalThis?.document){const r=Zn(e),n=x.useRef(!1),i=x.useRef(()=>{});return x.useEffect(()=>{const a=l=>{if(l.target&&!n.current){let d=function(){I4(A8,r,f,{discrete:!0})};const f={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",i.current),i.current=d,t.addEventListener("click",i.current,{once:!0})):d()}else t.removeEventListener("click",i.current);n.current=!1},o=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(o),t.removeEventListener("pointerdown",a),t.removeEventListener("click",i.current)}},[t,r]),{onPointerDownCapture:()=>n.current=!0}}function L8(e,t=globalThis?.document){const r=Zn(e),n=x.useRef(!1);return x.useEffect(()=>{const i=a=>{a.target&&!n.current&&I4(P8,r,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",i),()=>t.removeEventListener("focusin",i)},[t,r]),{onFocusCapture:()=>n.current=!0,onBlurCapture:()=>n.current=!1}}function c_(){const e=new CustomEvent(T1);document.dispatchEvent(e)}function I4(e,t,r,{discrete:n}){const i=r.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Xw(i,a):i.dispatchEvent(a)}var D8=Xd,I8=D4,us=globalThis?.document?x.useLayoutEffect:()=>{},O8="Portal",$h=x.forwardRef((e,t)=>{const{container:r,...n}=e,[i,a]=x.useState(!1);us(()=>a(!0),[]);const o=r||i&&globalThis?.document?.body;return o?A4.createPortal(s.jsx(yt.div,{...n,ref:t}),o):null});$h.displayName=O8;function M8(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var Bs=e=>{const{present:t,children:r}=e,n=F8(t),i=typeof r=="function"?r({present:n.isPresent}):x.Children.only(r),a=or(n.ref,B8(i));return typeof r=="function"||n.isPresent?x.cloneElement(i,{ref:a}):null};Bs.displayName="Presence";function F8(e){const[t,r]=x.useState(),n=x.useRef(null),i=x.useRef(e),a=x.useRef("none"),o=e?"mounted":"unmounted",[l,d]=M8(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const f=Cg(n.current);a.current=l==="mounted"?f:"none"},[l]),us(()=>{const f=n.current,h=i.current;if(h!==e){const v=a.current,m=Cg(f);e?d("MOUNT"):m==="none"||f?.display==="none"?d("UNMOUNT"):d(h&&v!==m?"ANIMATION_OUT":"UNMOUNT"),i.current=e}},[e,d]),us(()=>{if(t){let f;const h=t.ownerDocument.defaultView??window,p=m=>{const w=Cg(n.current).includes(CSS.escape(m.animationName));if(m.target===t&&w&&(d("ANIMATION_END"),!i.current)){const _=t.style.animationFillMode;t.style.animationFillMode="forwards",f=h.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=_)})}},v=m=>{m.target===t&&(a.current=Cg(n.current))};return t.addEventListener("animationstart",v),t.addEventListener("animationcancel",p),t.addEventListener("animationend",p),()=>{h.clearTimeout(f),t.removeEventListener("animationstart",v),t.removeEventListener("animationcancel",p),t.removeEventListener("animationend",p)}}else d("ANIMATION_END")},[t,d]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:x.useCallback(f=>{n.current=f?getComputedStyle(f):null,r(f)},[])}}function Cg(e){return e?.animationName||"none"}function B8(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var U8=Zw[" useInsertionEffect ".trim().toString()]||us;function Yi({prop:e,defaultProp:t,onChange:r=()=>{},caller:n}){const[i,a,o]=$8({defaultProp:t,onChange:r}),l=e!==void 0,d=l?e:i;{const h=x.useRef(e!==void 0);x.useEffect(()=>{const p=h.current;p!==l&&console.warn(`${n} is changing from ${p?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),h.current=l},[l,n])}const f=x.useCallback(h=>{if(l){const p=z8(h)?h(e):h;p!==e&&o.current?.(p)}else a(h)},[l,e,a,o]);return[d,f]}function $8({defaultProp:e,onChange:t}){const[r,n]=x.useState(e),i=x.useRef(r),a=x.useRef(t);return U8(()=>{a.current=t},[t]),x.useEffect(()=>{i.current!==r&&(a.current?.(r),i.current=r)},[r,i]),[r,n,a]}function z8(e){return typeof e=="function"}var O4=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),q8="VisuallyHidden",u0=x.forwardRef((e,t)=>s.jsx(yt.span,{...e,ref:t,style:{...O4,...e.style}}));u0.displayName=q8;var V8=u0,e2="ToastProvider",[t2,W8,H8]=Cp("Toast"),[M4]=Fs("Toast",[H8]),[G8,d0]=M4(e2),F4=e=>{const{__scopeToast:t,label:r="Notification",duration:n=5e3,swipeDirection:i="right",swipeThreshold:a=50,children:o}=e,[l,d]=x.useState(null),[f,h]=x.useState(0),p=x.useRef(!1),v=x.useRef(!1);return r.trim()||console.error(`Invalid prop \`label\` supplied to \`${e2}\`. Expected non-empty \`string\`.`),s.jsx(t2.Provider,{scope:t,children:s.jsx(G8,{scope:t,label:r,duration:n,swipeDirection:i,swipeThreshold:a,toastCount:f,viewport:l,onViewportChange:d,onToastAdd:x.useCallback(()=>h(m=>m+1),[]),onToastRemove:x.useCallback(()=>h(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:p,isClosePausedRef:v,children:o})})};F4.displayName=e2;var B4="ToastViewport",K8=["F8"],R1="toast.viewportPause",L1="toast.viewportResume",U4=x.forwardRef((e,t)=>{const{__scopeToast:r,hotkey:n=K8,label:i="Notifications ({hotkey})",...a}=e,o=d0(B4,r),l=W8(r),d=x.useRef(null),f=x.useRef(null),h=x.useRef(null),p=x.useRef(null),v=or(t,p,o.onViewportChange),m=n.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=o.toastCount>0;x.useEffect(()=>{const _=S=>{n.length!==0&&n.every(k=>S[k]||S.code===k)&&p.current?.focus()};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[n]),x.useEffect(()=>{const _=d.current,S=p.current;if(j&&_&&S){const E=()=>{if(!o.isClosePausedRef.current){const M=new CustomEvent(R1);S.dispatchEvent(M),o.isClosePausedRef.current=!0}},k=()=>{if(o.isClosePausedRef.current){const M=new CustomEvent(L1);S.dispatchEvent(M),o.isClosePausedRef.current=!1}},C=M=>{!_.contains(M.relatedTarget)&&k()},D=()=>{_.contains(document.activeElement)||k()};return _.addEventListener("focusin",E),_.addEventListener("focusout",C),_.addEventListener("pointermove",E),_.addEventListener("pointerleave",D),window.addEventListener("blur",E),window.addEventListener("focus",k),()=>{_.removeEventListener("focusin",E),_.removeEventListener("focusout",C),_.removeEventListener("pointermove",E),_.removeEventListener("pointerleave",D),window.removeEventListener("blur",E),window.removeEventListener("focus",k)}}},[j,o.isClosePausedRef]);const w=x.useCallback(({tabbingDirection:_})=>{const E=l().map(k=>{const C=k.ref.current,D=[C,...oL(C)];return _==="forwards"?D:D.reverse()});return(_==="forwards"?E.reverse():E).flat()},[l]);return x.useEffect(()=>{const _=p.current;if(_){const S=E=>{const k=E.altKey||E.ctrlKey||E.metaKey;if(E.key==="Tab"&&!k){const D=document.activeElement,M=E.shiftKey;if(E.target===_&&M){f.current?.focus();return}const I=w({tabbingDirection:M?"backwards":"forwards"}),K=I.findIndex(B=>B===D);rx(I.slice(K+1))?E.preventDefault():M?f.current?.focus():h.current?.focus()}};return _.addEventListener("keydown",S),()=>_.removeEventListener("keydown",S)}},[l,w]),s.jsxs(I8,{ref:d,role:"region","aria-label":i.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&s.jsx(D1,{ref:f,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"forwards"});rx(_)}}),s.jsx(t2.Slot,{scope:r,children:s.jsx(yt.ol,{tabIndex:-1,...a,ref:v})}),j&&s.jsx(D1,{ref:h,onFocusFromOutsideViewport:()=>{const _=w({tabbingDirection:"backwards"});rx(_)}})]})});U4.displayName=B4;var $4="ToastFocusProxy",D1=x.forwardRef((e,t)=>{const{__scopeToast:r,onFocusFromOutsideViewport:n,...i}=e,a=d0($4,r);return s.jsx(u0,{tabIndex:0,...i,ref:t,style:{position:"fixed"},onFocus:o=>{const l=o.relatedTarget;!a.viewport?.contains(l)&&n()}})});D1.displayName=$4;var Ep="Toast",Y8="toast.swipeStart",Q8="toast.swipeMove",J8="toast.swipeCancel",Z8="toast.swipeEnd",z4=x.forwardRef((e,t)=>{const{forceMount:r,open:n,defaultOpen:i,onOpenChange:a,...o}=e,[l,d]=Yi({prop:n,defaultProp:i??!0,onChange:a,caller:Ep});return s.jsx(Bs,{present:r||l,children:s.jsx(tL,{open:l,...o,ref:t,onClose:()=>d(!1),onPause:Zn(e.onPause),onResume:Zn(e.onResume),onSwipeStart:lt(e.onSwipeStart,f=>{f.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:lt(e.onSwipeMove,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","move"),f.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${p}px`)}),onSwipeCancel:lt(e.onSwipeCancel,f=>{f.currentTarget.setAttribute("data-swipe","cancel"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:lt(e.onSwipeEnd,f=>{const{x:h,y:p}=f.detail.delta;f.currentTarget.setAttribute("data-swipe","end"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),f.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),f.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${h}px`),f.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${p}px`),d(!1)})})})});z4.displayName=Ep;var[X8,eL]=M4(Ep,{onClose(){}}),tL=x.forwardRef((e,t)=>{const{__scopeToast:r,type:n="foreground",duration:i,open:a,onClose:o,onEscapeKeyDown:l,onPause:d,onResume:f,onSwipeStart:h,onSwipeMove:p,onSwipeCancel:v,onSwipeEnd:m,...j}=e,w=d0(Ep,r),[_,S]=x.useState(null),E=or(t,q=>S(q)),k=x.useRef(null),C=x.useRef(null),D=i||w.duration,M=x.useRef(0),F=x.useRef(D),U=x.useRef(0),{onToastAdd:I,onToastRemove:K}=w,B=Zn(()=>{_?.contains(document.activeElement)&&w.viewport?.focus(),o()}),O=x.useCallback(q=>{!q||q===1/0||(window.clearTimeout(U.current),M.current=new Date().getTime(),U.current=window.setTimeout(B,q))},[B]);x.useEffect(()=>{const q=w.viewport;if(q){const ue=()=>{O(F.current),f?.()},ie=()=>{const le=new Date().getTime()-M.current;F.current=F.current-le,window.clearTimeout(U.current),d?.()};return q.addEventListener(R1,ie),q.addEventListener(L1,ue),()=>{q.removeEventListener(R1,ie),q.removeEventListener(L1,ue)}}},[w.viewport,D,d,f,O]),x.useEffect(()=>{a&&!w.isClosePausedRef.current&&O(D)},[a,D,w.isClosePausedRef,O]),x.useEffect(()=>(I(),()=>K()),[I,K]);const z=x.useMemo(()=>_?Y4(_):null,[_]);return w.viewport?s.jsxs(s.Fragment,{children:[z&&s.jsx(rL,{__scopeToast:r,role:"status","aria-live":n==="foreground"?"assertive":"polite",children:z}),s.jsx(X8,{scope:r,onClose:B,children:Uh.createPortal(s.jsx(t2.ItemSlot,{scope:r,children:s.jsx(D8,{asChild:!0,onEscapeKeyDown:lt(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||B(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:s.jsx(yt.li,{tabIndex:0,"data-state":a?"open":"closed","data-swipe-direction":w.swipeDirection,...j,ref:E,style:{userSelect:"none",touchAction:"none",...e.style},onKeyDown:lt(e.onKeyDown,q=>{q.key==="Escape"&&(l?.(q.nativeEvent),q.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,B()))}),onPointerDown:lt(e.onPointerDown,q=>{q.button===0&&(k.current={x:q.clientX,y:q.clientY})}),onPointerMove:lt(e.onPointerMove,q=>{if(!k.current)return;const ue=q.clientX-k.current.x,ie=q.clientY-k.current.y,le=!!C.current,G=["left","right"].includes(w.swipeDirection),se=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,xe=G?se(0,ue):0,te=G?0:se(0,ie),R=q.pointerType==="touch"?10:2,V={x:xe,y:te},Q={originalEvent:q,delta:V};le?(C.current=V,Eg(Q8,p,Q,{discrete:!1})):u_(V,w.swipeDirection,R)?(C.current=V,Eg(Y8,h,Q,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(ue)>R||Math.abs(ie)>R)&&(k.current=null)}),onPointerUp:lt(e.onPointerUp,q=>{const ue=C.current,ie=q.target;if(ie.hasPointerCapture(q.pointerId)&&ie.releasePointerCapture(q.pointerId),C.current=null,k.current=null,ue){const le=q.currentTarget,G={originalEvent:q,delta:ue};u_(ue,w.swipeDirection,w.swipeThreshold)?Eg(Z8,m,G,{discrete:!0}):Eg(J8,v,G,{discrete:!0}),le.addEventListener("click",se=>se.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),rL=e=>{const{__scopeToast:t,children:r,...n}=e,i=d0(Ep,t),[a,o]=x.useState(!1),[l,d]=x.useState(!1);return iL(()=>o(!0)),x.useEffect(()=>{const f=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(f)},[]),l?null:s.jsx($h,{asChild:!0,children:s.jsx(u0,{...n,children:a&&s.jsxs(s.Fragment,{children:[i.label," ",r]})})})},nL="ToastTitle",q4=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(yt.div,{...n,ref:t})});q4.displayName=nL;var sL="ToastDescription",V4=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e;return s.jsx(yt.div,{...n,ref:t})});V4.displayName=sL;var W4="ToastAction",H4=x.forwardRef((e,t)=>{const{altText:r,...n}=e;return r.trim()?s.jsx(K4,{altText:r,asChild:!0,children:s.jsx(r2,{...n,ref:t})}):(console.error(`Invalid prop \`altText\` supplied to \`${W4}\`. Expected non-empty \`string\`.`),null)});H4.displayName=W4;var G4="ToastClose",r2=x.forwardRef((e,t)=>{const{__scopeToast:r,...n}=e,i=eL(G4,r);return s.jsx(K4,{asChild:!0,children:s.jsx(yt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,i.onClose)})})});r2.displayName=G4;var K4=x.forwardRef((e,t)=>{const{__scopeToast:r,altText:n,...i}=e;return s.jsx(yt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":n||void 0,...i,ref:t})});function Y4(e){const t=[];return Array.from(e.childNodes).forEach(n=>{if(n.nodeType===n.TEXT_NODE&&n.textContent&&t.push(n.textContent),aL(n)){const i=n.ariaHidden||n.hidden||n.style.display==="none",a=n.dataset.radixToastAnnounceExclude==="";if(!i)if(a){const o=n.dataset.radixToastAnnounceAlt;o&&t.push(o)}else t.push(...Y4(n))}}),t}function Eg(e,t,r,{discrete:n}){const i=r.originalEvent.currentTarget,a=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t&&i.addEventListener(e,t,{once:!0}),n?Xw(i,a):i.dispatchEvent(a)}var u_=(e,t,r=0)=>{const n=Math.abs(e.x),i=Math.abs(e.y),a=n>i;return t==="left"||t==="right"?a&&n>r:!a&&i>r};function iL(e=()=>{}){const t=Zn(e);us(()=>{let r=0,n=0;return r=window.requestAnimationFrame(()=>n=window.requestAnimationFrame(t)),()=>{window.cancelAnimationFrame(r),window.cancelAnimationFrame(n)}},[t])}function aL(e){return e.nodeType===e.ELEMENT_NODE}function oL(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function rx(e){const t=document.activeElement;return e.some(r=>r===t?!0:(r.focus(),document.activeElement!==t))}var lL=F4,Q4=U4,J4=z4,Z4=q4,X4=V4,ek=H4,tk=r2;function rk(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=rk(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function nk(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=rk(e))&&(n&&(n+=" "),n+=t);return n}const d_=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,f_=nk,zh=(e,t)=>r=>{var n;if(t?.variants==null)return f_(e,r?.class,r?.className);const{variants:i,defaultVariants:a}=t,o=Object.keys(i).map(f=>{const h=r?.[f],p=a?.[f];if(h===null)return null;const v=d_(h)||d_(p);return i[f][v]}),l=r&&Object.entries(r).reduce((f,h)=>{let[p,v]=h;return v===void 0||(f[p]=v),f},{}),d=t==null||(n=t.compoundVariants)===null||n===void 0?void 0:n.reduce((f,h)=>{let{class:p,className:v,...m}=h;return Object.entries(m).every(j=>{let[w,_]=j;return Array.isArray(_)?_.includes({...a,...l}[w]):{...a,...l}[w]===_})?[...f,p,v]:f},[]);return f_(e,o,d,r?.class,r?.className)};const cL=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),sk=(...e)=>e.filter((t,r,n)=>!!t&&t.trim()!==""&&n.indexOf(t)===r).join(" ").trim();var uL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dL=x.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:i="",children:a,iconNode:o,...l},d)=>x.createElement("svg",{ref:d,...uL,width:t,height:t,stroke:e,strokeWidth:n?Number(r)*24/Number(t):r,className:sk("lucide",i),...l},[...o.map(([f,h])=>x.createElement(f,h)),...Array.isArray(a)?a:[a]]));const ht=(e,t)=>{const r=x.forwardRef(({className:n,...i},a)=>x.createElement(dL,{ref:a,iconNode:t,className:sk(`lucide-${cL(e)}`,n),...i}));return r.displayName=`${e}`,r};const h_=ht("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);const I1=ht("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);const fh=ht("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);const fL=ht("ArrowUpDown",[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]]);const hL=ht("BellDot",[["path",{d:"M19.4 14.9C20.2 16.4 21 17 21 17H3s3-2 3-9c0-3.3 2.7-6 6-6 .7 0 1.3.1 1.9.3",key:"xcehk"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["circle",{cx:"18",cy:"8",r:"3",key:"1g0gzu"}]]);const Nv=ht("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);const mL=ht("BookOpen",[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]]);const O1=ht("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);const pL=ht("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);const Ya=ht("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);const n2=ht("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const ip=ht("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);const ji=ht("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);const f0=ht("ChefHat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]);const s2=ht("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);const ik=ht("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);const jv=ht("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);const ak=ht("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);const Ag=ht("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]);const wn=ht("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);const cl=ht("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);const Nc=ht("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);const h0=ht("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);const gL=ht("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);const ok=ht("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);const Xn=ht("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);const i2=ht("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);const lk=ht("EllipsisVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);const Sv=ht("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);const Tu=ht("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const hh=ht("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);const vL=ht("FileWarning",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const jc=ht("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);const m_=ht("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);const ck=ht("FolderTree",[["path",{d:"M20 10a1 1 0 0 0 1-1V6a1 1 0 0 0-1-1h-2.5a1 1 0 0 1-.8-.4l-.9-1.2A1 1 0 0 0 15 3h-2a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"hod4my"}],["path",{d:"M20 21a1 1 0 0 0 1-1v-3a1 1 0 0 0-1-1h-2.9a1 1 0 0 1-.88-.55l-.42-.85a1 1 0 0 0-.92-.6H13a1 1 0 0 0-1 1v5a1 1 0 0 0 1 1Z",key:"w4yl2u"}],["path",{d:"M3 5a2 2 0 0 0 2 2h3",key:"f2jnh7"}],["path",{d:"M3 3v13a2 2 0 0 0 2 2h3",key:"k8epm1"}]]);const yL=ht("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]);const xL=ht("GraduationCap",[["path",{d:"M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z",key:"j76jl0"}],["path",{d:"M22 10v6",key:"1lu8f3"}],["path",{d:"M6 12.5V16a6 3 0 0 0 12 0v-3.5",key:"1r8lef"}]]);const uk=ht("Grid3x3",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]]);const p_=ht("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);const wL=ht("Inbox",[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]]);const dk=ht("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);const bL=ht("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);const a2=ht("List",[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]]);const Si=ht("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);const fk=ht("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);const _L=ht("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);const hk=ht("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);const NL=ht("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);const dv=ht("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const o2=ht("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);const jL=ht("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);const ki=ht("Package",[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["path",{d:"m3.3 7 7.703 4.734a2 2 0 0 0 1.994 0L20.7 7",key:"yx3hmr"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]]);const SL=ht("Pause",[["rect",{x:"14",y:"4",width:"4",height:"16",rx:"1",key:"zuxfzm"}],["rect",{x:"6",y:"4",width:"4",height:"16",rx:"1",key:"1okwgv"}]]);const mk=ht("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);const M1=ht("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);const Ln=ht("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);const Hi=ht("Printer",[["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["path",{d:"M6 9V3a1 1 0 0 1 1-1h10a1 1 0 0 1 1 1v6",key:"1itne7"}],["rect",{x:"6",y:"14",width:"12",height:"8",rx:"1",key:"1ue0tg"}]]);const kL=ht("QrCode",[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]]);const ap=ht("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);const CL=ht("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);const EL=ht("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]);const _l=ht("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);const Sc=ht("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);const ef=ht("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);const m0=ht("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]);const AL=ht("Star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);const PL=ht("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);const TL=ht("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);const pk=ht("Tags",[["path",{d:"m15 5 6.3 6.3a2.4 2.4 0 0 1 0 3.4L17 19",key:"1cbfv1"}],["path",{d:"M9.586 5.586A2 2 0 0 0 8.172 5H3a1 1 0 0 0-1 1v5.172a2 2 0 0 0 .586 1.414L8.29 18.29a2.426 2.426 0 0 0 3.42 0l3.58-3.58a2.426 2.426 0 0 0 0-3.42z",key:"135mg7"}],["circle",{cx:"6.5",cy:"9.5",r:".5",fill:"currentColor",key:"5pm5xn"}]]);const gk=ht("Thermometer",[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]]);const F1=ht("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);const Uu=ht("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);const g_=ht("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]);const Nh=ht("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);const es=ht("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);const vk=ht("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);const RL=ht("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]]);const Ru=ht("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);const Ao=ht("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);const LL=ht("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]);const xn=ht("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);const v_=ht("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);const B1=ht("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);const DL=ht("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]),l2="-",IL=e=>{const t=ML(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:o=>{const l=o.split(l2);return l[0]===""&&l.length!==1&&l.shift(),yk(l,t)||OL(o)},getConflictingClassGroupIds:(o,l)=>{const d=r[o]||[];return l&&n[o]?[...d,...n[o]]:d}}},yk=(e,t)=>{if(e.length===0)return t.classGroupId;const r=e[0],n=t.nextPart.get(r),i=n?yk(e.slice(1),n):void 0;if(i)return i;if(t.validators.length===0)return;const a=e.join(l2);return t.validators.find(({validator:o})=>o(a))?.classGroupId},y_=/^\[(.+)\]$/,OL=e=>{if(y_.test(e)){const t=y_.exec(e)[1],r=t?.substring(0,t.indexOf(":"));if(r)return"arbitrary.."+r}},ML=e=>{const{theme:t,prefix:r}=e,n={nextPart:new Map,validators:[]};return BL(Object.entries(e.classGroups),r).forEach(([a,o])=>{U1(o,n,a,t)}),n},U1=(e,t,r,n)=>{e.forEach(i=>{if(typeof i=="string"){const a=i===""?t:x_(t,i);a.classGroupId=r;return}if(typeof i=="function"){if(FL(i)){U1(i(n),t,r,n);return}t.validators.push({validator:i,classGroupId:r});return}Object.entries(i).forEach(([a,o])=>{U1(o,x_(t,a),r,n)})})},x_=(e,t)=>{let r=e;return t.split(l2).forEach(n=>{r.nextPart.has(n)||r.nextPart.set(n,{nextPart:new Map,validators:[]}),r=r.nextPart.get(n)}),r},FL=e=>e.isThemeGetter,BL=(e,t)=>t?e.map(([r,n])=>{const i=n.map(a=>typeof a=="string"?t+a:typeof a=="object"?Object.fromEntries(Object.entries(a).map(([o,l])=>[t+o,l])):a);return[r,i]}):e,UL=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=new Map,n=new Map;const i=(a,o)=>{r.set(a,o),t++,t>e&&(t=0,n=r,r=new Map)};return{get(a){let o=r.get(a);if(o!==void 0)return o;if((o=n.get(a))!==void 0)return i(a,o),o},set(a,o){r.has(a)?r.set(a,o):i(a,o)}}},xk="!",$L=e=>{const{separator:t,experimentalParseClassName:r}=e,n=t.length===1,i=t[0],a=t.length,o=l=>{const d=[];let f=0,h=0,p;for(let _=0;_<l.length;_++){let S=l[_];if(f===0){if(S===i&&(n||l.slice(_,_+a)===t)){d.push(l.slice(h,_)),h=_+a;continue}if(S==="/"){p=_;continue}}S==="["?f++:S==="]"&&f--}const v=d.length===0?l:l.substring(h),m=v.startsWith(xk),j=m?v.substring(1):v,w=p&&p>h?p-h:void 0;return{modifiers:d,hasImportantModifier:m,baseClassName:j,maybePostfixModifierPosition:w}};return r?l=>r({className:l,parseClassName:o}):o},zL=e=>{if(e.length<=1)return e;const t=[];let r=[];return e.forEach(n=>{n[0]==="["?(t.push(...r.sort(),n),r=[]):r.push(n)}),t.push(...r.sort()),t},qL=e=>({cache:UL(e.cacheSize),parseClassName:$L(e),...IL(e)}),VL=/\s+/,WL=(e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:i}=t,a=[],o=e.trim().split(VL);let l="";for(let d=o.length-1;d>=0;d-=1){const f=o[d],{modifiers:h,hasImportantModifier:p,baseClassName:v,maybePostfixModifierPosition:m}=r(f);let j=!!m,w=n(j?v.substring(0,m):v);if(!w){if(!j){l=f+(l.length>0?" "+l:l);continue}if(w=n(v),!w){l=f+(l.length>0?" "+l:l);continue}j=!1}const _=zL(h).join(":"),S=p?_+xk:_,E=S+w;if(a.includes(E))continue;a.push(E);const k=i(w,j);for(let C=0;C<k.length;++C){const D=k[C];a.push(S+D)}l=f+(l.length>0?" "+l:l)}return l};function HL(){let e=0,t,r,n="";for(;e<arguments.length;)(t=arguments[e++])&&(r=wk(t))&&(n&&(n+=" "),n+=r);return n}const wk=e=>{if(typeof e=="string")return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=wk(e[n]))&&(r&&(r+=" "),r+=t);return r};function GL(e,...t){let r,n,i,a=o;function o(d){const f=t.reduce((h,p)=>p(h),e());return r=qL(f),n=r.cache.get,i=r.cache.set,a=l,l(d)}function l(d){const f=n(d);if(f)return f;const h=WL(d,r);return i(d,h),h}return function(){return a(HL.apply(null,arguments))}}const Sn=e=>{const t=r=>r[e]||[];return t.isThemeGetter=!0,t},bk=/^\[(?:([a-z-]+):)?(.+)\]$/i,KL=/^\d+\/\d+$/,YL=new Set(["px","full","screen"]),QL=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,JL=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,ZL=/^(rgba?|hsla?|hwb|(ok)?(lab|lch))\(.+\)$/,XL=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,eD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,oc=e=>mh(e)||YL.has(e)||KL.test(e),du=e=>qh(e,"length",lD),mh=e=>!!e&&!Number.isNaN(Number(e)),nx=e=>qh(e,"number",mh),Tm=e=>!!e&&Number.isInteger(Number(e)),tD=e=>e.endsWith("%")&&mh(e.slice(0,-1)),_r=e=>bk.test(e),fu=e=>QL.test(e),rD=new Set(["length","size","percentage"]),nD=e=>qh(e,rD,_k),sD=e=>qh(e,"position",_k),iD=new Set(["image","url"]),aD=e=>qh(e,iD,uD),oD=e=>qh(e,"",cD),Rm=()=>!0,qh=(e,t,r)=>{const n=bk.exec(e);return n?n[1]?typeof t=="string"?n[1]===t:t.has(n[1]):r(n[2]):!1},lD=e=>JL.test(e)&&!ZL.test(e),_k=()=>!1,cD=e=>XL.test(e),uD=e=>eD.test(e),dD=()=>{const e=Sn("colors"),t=Sn("spacing"),r=Sn("blur"),n=Sn("brightness"),i=Sn("borderColor"),a=Sn("borderRadius"),o=Sn("borderSpacing"),l=Sn("borderWidth"),d=Sn("contrast"),f=Sn("grayscale"),h=Sn("hueRotate"),p=Sn("invert"),v=Sn("gap"),m=Sn("gradientColorStops"),j=Sn("gradientColorStopPositions"),w=Sn("inset"),_=Sn("margin"),S=Sn("opacity"),E=Sn("padding"),k=Sn("saturate"),C=Sn("scale"),D=Sn("sepia"),M=Sn("skew"),F=Sn("space"),U=Sn("translate"),I=()=>["auto","contain","none"],K=()=>["auto","hidden","clip","visible","scroll"],B=()=>["auto",_r,t],O=()=>[_r,t],z=()=>["",oc,du],q=()=>["auto",mh,_r],ue=()=>["bottom","center","left","left-bottom","left-top","right","right-bottom","right-top","top"],ie=()=>["solid","dashed","dotted","double","none"],le=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],G=()=>["start","end","center","between","around","evenly","stretch"],se=()=>["","0",_r],xe=()=>["auto","avoid","all","avoid-page","page","left","right","column"],te=()=>[mh,_r];return{cacheSize:500,separator:":",theme:{colors:[Rm],spacing:[oc,du],blur:["none","",fu,_r],brightness:te(),borderColor:[e],borderRadius:["none","","full",fu,_r],borderSpacing:O(),borderWidth:z(),contrast:te(),grayscale:se(),hueRotate:te(),invert:se(),gap:O(),gradientColorStops:[e],gradientColorStopPositions:[tD,du],inset:B(),margin:B(),opacity:te(),padding:O(),saturate:te(),scale:te(),sepia:se(),skew:te(),space:O(),translate:O()},classGroups:{aspect:[{aspect:["auto","square","video",_r]}],container:["container"],columns:[{columns:[fu]}],"break-after":[{"break-after":xe()}],"break-before":[{"break-before":xe()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:[...ue(),_r]}],overflow:[{overflow:K()}],"overflow-x":[{"overflow-x":K()}],"overflow-y":[{"overflow-y":K()}],overscroll:[{overscroll:I()}],"overscroll-x":[{"overscroll-x":I()}],"overscroll-y":[{"overscroll-y":I()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:[w]}],"inset-x":[{"inset-x":[w]}],"inset-y":[{"inset-y":[w]}],start:[{start:[w]}],end:[{end:[w]}],top:[{top:[w]}],right:[{right:[w]}],bottom:[{bottom:[w]}],left:[{left:[w]}],visibility:["visible","invisible","collapse"],z:[{z:["auto",Tm,_r]}],basis:[{basis:B()}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["wrap","wrap-reverse","nowrap"]}],flex:[{flex:["1","auto","initial","none",_r]}],grow:[{grow:se()}],shrink:[{shrink:se()}],order:[{order:["first","last","none",Tm,_r]}],"grid-cols":[{"grid-cols":[Rm]}],"col-start-end":[{col:["auto",{span:["full",Tm,_r]},_r]}],"col-start":[{"col-start":q()}],"col-end":[{"col-end":q()}],"grid-rows":[{"grid-rows":[Rm]}],"row-start-end":[{row:["auto",{span:[Tm,_r]},_r]}],"row-start":[{"row-start":q()}],"row-end":[{"row-end":q()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":["auto","min","max","fr",_r]}],"auto-rows":[{"auto-rows":["auto","min","max","fr",_r]}],gap:[{gap:[v]}],"gap-x":[{"gap-x":[v]}],"gap-y":[{"gap-y":[v]}],"justify-content":[{justify:["normal",...G()]}],"justify-items":[{"justify-items":["start","end","center","stretch"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch"]}],"align-content":[{content:["normal",...G(),"baseline"]}],"align-items":[{items:["start","end","center","baseline","stretch"]}],"align-self":[{self:["auto","start","end","center","stretch","baseline"]}],"place-content":[{"place-content":[...G(),"baseline"]}],"place-items":[{"place-items":["start","end","center","baseline","stretch"]}],"place-self":[{"place-self":["auto","start","end","center","stretch"]}],p:[{p:[E]}],px:[{px:[E]}],py:[{py:[E]}],ps:[{ps:[E]}],pe:[{pe:[E]}],pt:[{pt:[E]}],pr:[{pr:[E]}],pb:[{pb:[E]}],pl:[{pl:[E]}],m:[{m:[_]}],mx:[{mx:[_]}],my:[{my:[_]}],ms:[{ms:[_]}],me:[{me:[_]}],mt:[{mt:[_]}],mr:[{mr:[_]}],mb:[{mb:[_]}],ml:[{ml:[_]}],"space-x":[{"space-x":[F]}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":[F]}],"space-y-reverse":["space-y-reverse"],w:[{w:["auto","min","max","fit","svw","lvw","dvw",_r,t]}],"min-w":[{"min-w":[_r,t,"min","max","fit"]}],"max-w":[{"max-w":[_r,t,"none","full","min","max","fit","prose",{screen:[fu]},fu]}],h:[{h:[_r,t,"auto","min","max","fit","svh","lvh","dvh"]}],"min-h":[{"min-h":[_r,t,"min","max","fit","svh","lvh","dvh"]}],"max-h":[{"max-h":[_r,t,"min","max","fit","svh","lvh","dvh"]}],size:[{size:[_r,t,"auto","min","max","fit"]}],"font-size":[{text:["base",fu,du]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:["thin","extralight","light","normal","medium","semibold","bold","extrabold","black",nx]}],"font-family":[{font:[Rm]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:["tighter","tight","normal","wide","wider","widest",_r]}],"line-clamp":[{"line-clamp":["none",mh,nx]}],leading:[{leading:["none","tight","snug","normal","relaxed","loose",oc,_r]}],"list-image":[{"list-image":["none",_r]}],"list-style-type":[{list:["none","disc","decimal",_r]}],"list-style-position":[{list:["inside","outside"]}],"placeholder-color":[{placeholder:[e]}],"placeholder-opacity":[{"placeholder-opacity":[S]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"text-color":[{text:[e]}],"text-opacity":[{"text-opacity":[S]}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ie(),"wavy"]}],"text-decoration-thickness":[{decoration:["auto","from-font",oc,du]}],"underline-offset":[{"underline-offset":["auto",oc,_r]}],"text-decoration-color":[{decoration:[e]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:O()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",_r]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",_r]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-opacity":[{"bg-opacity":[S]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:[...ue(),sD]}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","round","space"]}]}],"bg-size":[{bg:["auto","cover","contain",nD]}],"bg-image":[{bg:["none",{"gradient-to":["t","tr","r","br","b","bl","l","tl"]},aD]}],"bg-color":[{bg:[e]}],"gradient-from-pos":[{from:[j]}],"gradient-via-pos":[{via:[j]}],"gradient-to-pos":[{to:[j]}],"gradient-from":[{from:[m]}],"gradient-via":[{via:[m]}],"gradient-to":[{to:[m]}],rounded:[{rounded:[a]}],"rounded-s":[{"rounded-s":[a]}],"rounded-e":[{"rounded-e":[a]}],"rounded-t":[{"rounded-t":[a]}],"rounded-r":[{"rounded-r":[a]}],"rounded-b":[{"rounded-b":[a]}],"rounded-l":[{"rounded-l":[a]}],"rounded-ss":[{"rounded-ss":[a]}],"rounded-se":[{"rounded-se":[a]}],"rounded-ee":[{"rounded-ee":[a]}],"rounded-es":[{"rounded-es":[a]}],"rounded-tl":[{"rounded-tl":[a]}],"rounded-tr":[{"rounded-tr":[a]}],"rounded-br":[{"rounded-br":[a]}],"rounded-bl":[{"rounded-bl":[a]}],"border-w":[{border:[l]}],"border-w-x":[{"border-x":[l]}],"border-w-y":[{"border-y":[l]}],"border-w-s":[{"border-s":[l]}],"border-w-e":[{"border-e":[l]}],"border-w-t":[{"border-t":[l]}],"border-w-r":[{"border-r":[l]}],"border-w-b":[{"border-b":[l]}],"border-w-l":[{"border-l":[l]}],"border-opacity":[{"border-opacity":[S]}],"border-style":[{border:[...ie(),"hidden"]}],"divide-x":[{"divide-x":[l]}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":[l]}],"divide-y-reverse":["divide-y-reverse"],"divide-opacity":[{"divide-opacity":[S]}],"divide-style":[{divide:ie()}],"border-color":[{border:[i]}],"border-color-x":[{"border-x":[i]}],"border-color-y":[{"border-y":[i]}],"border-color-s":[{"border-s":[i]}],"border-color-e":[{"border-e":[i]}],"border-color-t":[{"border-t":[i]}],"border-color-r":[{"border-r":[i]}],"border-color-b":[{"border-b":[i]}],"border-color-l":[{"border-l":[i]}],"divide-color":[{divide:[i]}],"outline-style":[{outline:["",...ie()]}],"outline-offset":[{"outline-offset":[oc,_r]}],"outline-w":[{outline:[oc,du]}],"outline-color":[{outline:[e]}],"ring-w":[{ring:z()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:[e]}],"ring-opacity":[{"ring-opacity":[S]}],"ring-offset-w":[{"ring-offset":[oc,du]}],"ring-offset-color":[{"ring-offset":[e]}],shadow:[{shadow:["","inner","none",fu,oD]}],"shadow-color":[{shadow:[Rm]}],opacity:[{opacity:[S]}],"mix-blend":[{"mix-blend":[...le(),"plus-lighter","plus-darker"]}],"bg-blend":[{"bg-blend":le()}],filter:[{filter:["","none"]}],blur:[{blur:[r]}],brightness:[{brightness:[n]}],contrast:[{contrast:[d]}],"drop-shadow":[{"drop-shadow":["","none",fu,_r]}],grayscale:[{grayscale:[f]}],"hue-rotate":[{"hue-rotate":[h]}],invert:[{invert:[p]}],saturate:[{saturate:[k]}],sepia:[{sepia:[D]}],"backdrop-filter":[{"backdrop-filter":["","none"]}],"backdrop-blur":[{"backdrop-blur":[r]}],"backdrop-brightness":[{"backdrop-brightness":[n]}],"backdrop-contrast":[{"backdrop-contrast":[d]}],"backdrop-grayscale":[{"backdrop-grayscale":[f]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[h]}],"backdrop-invert":[{"backdrop-invert":[p]}],"backdrop-opacity":[{"backdrop-opacity":[S]}],"backdrop-saturate":[{"backdrop-saturate":[k]}],"backdrop-sepia":[{"backdrop-sepia":[D]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":[o]}],"border-spacing-x":[{"border-spacing-x":[o]}],"border-spacing-y":[{"border-spacing-y":[o]}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["none","all","","colors","opacity","shadow","transform",_r]}],duration:[{duration:te()}],ease:[{ease:["linear","in","out","in-out",_r]}],delay:[{delay:te()}],animate:[{animate:["none","spin","ping","pulse","bounce",_r]}],transform:[{transform:["","gpu","none"]}],scale:[{scale:[C]}],"scale-x":[{"scale-x":[C]}],"scale-y":[{"scale-y":[C]}],rotate:[{rotate:[Tm,_r]}],"translate-x":[{"translate-x":[U]}],"translate-y":[{"translate-y":[U]}],"skew-x":[{"skew-x":[M]}],"skew-y":[{"skew-y":[M]}],"transform-origin":[{origin:["center","top","top-right","right","bottom-right","bottom","bottom-left","left","top-left",_r]}],accent:[{accent:["auto",e]}],appearance:[{appearance:["none","auto"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",_r]}],"caret-color":[{caret:[e]}],"pointer-events":[{"pointer-events":["none","auto"]}],resize:[{resize:["none","y","x",""]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":O()}],"scroll-mx":[{"scroll-mx":O()}],"scroll-my":[{"scroll-my":O()}],"scroll-ms":[{"scroll-ms":O()}],"scroll-me":[{"scroll-me":O()}],"scroll-mt":[{"scroll-mt":O()}],"scroll-mr":[{"scroll-mr":O()}],"scroll-mb":[{"scroll-mb":O()}],"scroll-ml":[{"scroll-ml":O()}],"scroll-p":[{"scroll-p":O()}],"scroll-px":[{"scroll-px":O()}],"scroll-py":[{"scroll-py":O()}],"scroll-ps":[{"scroll-ps":O()}],"scroll-pe":[{"scroll-pe":O()}],"scroll-pt":[{"scroll-pt":O()}],"scroll-pr":[{"scroll-pr":O()}],"scroll-pb":[{"scroll-pb":O()}],"scroll-pl":[{"scroll-pl":O()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",_r]}],fill:[{fill:[e,"none"]}],"stroke-w":[{stroke:[oc,du,nx]}],stroke:[{stroke:[e,"none"]}],sr:["sr-only","not-sr-only"],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]}}},fD=GL(dD);function Me(...e){return fD(nk(e))}const hD=lL,Nk=x.forwardRef(({className:e,...t},r)=>s.jsx(Q4,{ref:r,className:Me("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",e),...t}));Nk.displayName=Q4.displayName;const mD=zh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),jk=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx(J4,{ref:n,className:Me(mD({variant:t}),e),...r}));jk.displayName=J4.displayName;const pD=x.forwardRef(({className:e,...t},r)=>s.jsx(ek,{ref:r,className:Me("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",e),...t}));pD.displayName=ek.displayName;const Sk=x.forwardRef(({className:e,...t},r)=>s.jsx(tk,{ref:r,className:Me("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",e),"toast-close":"",...t,children:s.jsx(xn,{className:"h-4 w-4"})}));Sk.displayName=tk.displayName;const kk=x.forwardRef(({className:e,...t},r)=>s.jsx(Z4,{ref:r,className:Me("text-sm font-semibold",e),...t}));kk.displayName=Z4.displayName;const Ck=x.forwardRef(({className:e,...t},r)=>s.jsx(X4,{ref:r,className:Me("text-sm opacity-90",e),...t}));Ck.displayName=X4.displayName;function gD(){const{toasts:e}=qr();return s.jsxs(hD,{children:[e.map(function({id:t,title:r,description:n,action:i,...a}){return s.jsxs(jk,{...a,children:[s.jsxs("div",{className:"grid gap-1",children:[r&&s.jsx(kk,{children:r}),n&&s.jsx(Ck,{children:n})]}),i,s.jsx(Sk,{})]},t)}),s.jsx(Nk,{})]})}var w_=["light","dark"],vD="(prefers-color-scheme: dark)",yD=x.createContext(void 0),xD={setTheme:e=>{},themes:[]},wD=()=>{var e;return(e=x.useContext(yD))!=null?e:xD};x.memo(({forcedTheme:e,storageKey:t,attribute:r,enableSystem:n,enableColorScheme:i,defaultTheme:a,value:o,attrs:l,nonce:d})=>{let f=a==="system",h=r==="class"?`var d=document.documentElement,c=d.classList;${`c.remove(${l.map(j=>`'${j}'`).join(",")})`};`:`var d=document.documentElement,n='${r}',s='setAttribute';`,p=i?w_.includes(a)&&a?`if(e==='light'||e==='dark'||!e)d.style.colorScheme=e||'${a}'`:"if(e==='light'||e==='dark')d.style.colorScheme=e":"",v=(j,w=!1,_=!0)=>{let S=o?o[j]:j,E=w?j+"|| ''":`'${S}'`,k="";return i&&_&&!w&&w_.includes(j)&&(k+=`d.style.colorScheme = '${j}';`),r==="class"?w||S?k+=`c.add(${E})`:k+="null":S&&(k+=`d[s](n,${E})`),k},m=e?`!function(){${h}${v(e)}}()`:n?`!function(){try{${h}var e=localStorage.getItem('${t}');if('system'===e||(!e&&${f})){var t='${vD}',m=window.matchMedia(t);if(m.media!==t||m.matches){${v("dark")}}else{${v("light")}}}else if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}${f?"":"else{"+v(a,!1,!1)+"}"}${p}}catch(e){}}()`:`!function(){try{${h}var e=localStorage.getItem('${t}');if(e){${o?`var x=${JSON.stringify(o)};`:""}${v(o?"x[e]":"e",!0)}}else{${v(a,!1,!1)};}${p}}catch(t){}}();`;return x.createElement("script",{nonce:d,dangerouslySetInnerHTML:{__html:m}})});var bD=e=>{switch(e){case"success":return jD;case"info":return kD;case"warning":return SD;case"error":return CD;default:return null}},_D=Array(12).fill(0),ND=({visible:e,className:t})=>Ve.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},Ve.createElement("div",{className:"sonner-spinner"},_D.map((r,n)=>Ve.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${n}`})))),jD=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),SD=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),kD=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),CD=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ve.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),ED=Ve.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ve.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ve.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),AD=()=>{let[e,t]=Ve.useState(document.hidden);return Ve.useEffect(()=>{let r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),e},$1=1,PD=class{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{let r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;let{message:n,...i}=t,a=typeof t?.id=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:$1++,o=this.toasts.find(d=>d.id===a),l=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(a)&&this.dismissedToasts.delete(a),o?this.toasts=this.toasts.map(d=>d.id===a?(this.publish({...d,...t,id:a,title:n}),{...d,...t,id:a,dismissible:l,title:n}):d):this.addToast({title:n,...i,dismissible:l,id:a}),a},this.dismiss=t=>(this.dismissedToasts.add(t),t||this.toasts.forEach(r=>{this.subscribers.forEach(n=>n({id:r.id,dismiss:!0}))}),this.subscribers.forEach(r=>r({id:t,dismiss:!0})),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let n;r.loading!==void 0&&(n=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));let i=t instanceof Promise?t:t(),a=n!==void 0,o,l=i.then(async f=>{if(o=["resolve",f],Ve.isValidElement(f))a=!1,this.create({id:n,type:"default",message:f});else if(RD(f)&&!f.ok){a=!1;let h=typeof r.error=="function"?await r.error(`HTTP error! status: ${f.status}`):r.error,p=typeof r.description=="function"?await r.description(`HTTP error! status: ${f.status}`):r.description;this.create({id:n,type:"error",message:h,description:p})}else if(r.success!==void 0){a=!1;let h=typeof r.success=="function"?await r.success(f):r.success,p=typeof r.description=="function"?await r.description(f):r.description;this.create({id:n,type:"success",message:h,description:p})}}).catch(async f=>{if(o=["reject",f],r.error!==void 0){a=!1;let h=typeof r.error=="function"?await r.error(f):r.error,p=typeof r.description=="function"?await r.description(f):r.description;this.create({id:n,type:"error",message:h,description:p})}}).finally(()=>{var f;a&&(this.dismiss(n),n=void 0),(f=r.finally)==null||f.call(r)}),d=()=>new Promise((f,h)=>l.then(()=>o[0]==="reject"?h(o[1]):f(o[1])).catch(h));return typeof n!="string"&&typeof n!="number"?{unwrap:d}:Object.assign(n,{unwrap:d})},this.custom=(t,r)=>{let n=r?.id||$1++;return this.create({jsx:t(n),id:n,...r}),n},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}},Vi=new PD,TD=(e,t)=>{let r=t?.id||$1++;return Vi.addToast({title:e,...t,id:r}),r},RD=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",LD=TD,DD=()=>Vi.toasts,ID=()=>Vi.getActiveToasts();Object.assign(LD,{success:Vi.success,info:Vi.info,warning:Vi.warning,error:Vi.error,custom:Vi.custom,message:Vi.message,promise:Vi.promise,dismiss:Vi.dismiss,loading:Vi.loading},{getHistory:DD,getToasts:ID});function OD(e,{insertAt:t}={}){if(typeof document>"u")return;let r=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t==="top"&&r.firstChild?r.insertBefore(n,r.firstChild):r.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}OD(`:where(html[dir="ltr"]),:where([data-sonner-toaster][dir="ltr"]){--toast-icon-margin-start: -3px;--toast-icon-margin-end: 4px;--toast-svg-margin-start: -1px;--toast-svg-margin-end: 0px;--toast-button-margin-start: auto;--toast-button-margin-end: 0;--toast-close-button-start: 0;--toast-close-button-end: unset;--toast-close-button-transform: translate(-35%, -35%)}:where(html[dir="rtl"]),:where([data-sonner-toaster][dir="rtl"]){--toast-icon-margin-start: 4px;--toast-icon-margin-end: -3px;--toast-svg-margin-start: 0px;--toast-svg-margin-end: -1px;--toast-button-margin-start: 0;--toast-button-margin-end: auto;--toast-close-button-start: unset;--toast-close-button-end: 0;--toast-close-button-transform: translate(35%, -35%)}:where([data-sonner-toaster]){position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1: hsl(0, 0%, 99%);--gray2: hsl(0, 0%, 97.3%);--gray3: hsl(0, 0%, 95.1%);--gray4: hsl(0, 0%, 93%);--gray5: hsl(0, 0%, 90.9%);--gray6: hsl(0, 0%, 88.7%);--gray7: hsl(0, 0%, 85.8%);--gray8: hsl(0, 0%, 78%);--gray9: hsl(0, 0%, 56.1%);--gray10: hsl(0, 0%, 52.3%);--gray11: hsl(0, 0%, 43.5%);--gray12: hsl(0, 0%, 9%);--border-radius: 8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:none;z-index:999999999;transition:transform .4s ease}:where([data-sonner-toaster][data-lifted="true"]){transform:translateY(-10px)}@media (hover: none) and (pointer: coarse){:where([data-sonner-toaster][data-lifted="true"]){transform:none}}:where([data-sonner-toaster][data-x-position="right"]){right:var(--offset-right)}:where([data-sonner-toaster][data-x-position="left"]){left:var(--offset-left)}:where([data-sonner-toaster][data-x-position="center"]){left:50%;transform:translate(-50%)}:where([data-sonner-toaster][data-y-position="top"]){top:var(--offset-top)}:where([data-sonner-toaster][data-y-position="bottom"]){bottom:var(--offset-bottom)}:where([data-sonner-toast]){--y: translateY(100%);--lift-amount: calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);filter:blur(0);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:none;overflow-wrap:anywhere}:where([data-sonner-toast][data-styled="true"]){padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px #0000001a;width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}:where([data-sonner-toast]:focus-visible){box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast][data-y-position="top"]){top:0;--y: translateY(-100%);--lift: 1;--lift-amount: calc(1 * var(--gap))}:where([data-sonner-toast][data-y-position="bottom"]){bottom:0;--y: translateY(100%);--lift: -1;--lift-amount: calc(var(--lift) * var(--gap))}:where([data-sonner-toast]) :where([data-description]){font-weight:400;line-height:1.4;color:inherit}:where([data-sonner-toast]) :where([data-title]){font-weight:500;line-height:1.5;color:inherit}:where([data-sonner-toast]) :where([data-icon]){display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}:where([data-sonner-toast][data-promise="true"]) :where([data-icon])>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}:where([data-sonner-toast]) :where([data-icon])>*{flex-shrink:0}:where([data-sonner-toast]) :where([data-icon]) svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}:where([data-sonner-toast]) :where([data-content]){display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;cursor:pointer;outline:none;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}:where([data-sonner-toast]) :where([data-button]):focus-visible{box-shadow:0 0 0 2px #0006}:where([data-sonner-toast]) :where([data-button]):first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}:where([data-sonner-toast]) :where([data-cancel]){color:var(--normal-text);background:rgba(0,0,0,.08)}:where([data-sonner-toast][data-theme="dark"]) :where([data-cancel]){background:rgba(255,255,255,.3)}:where([data-sonner-toast]) :where([data-close-button]){position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast] [data-close-button]{background:var(--gray1)}:where([data-sonner-toast]) :where([data-close-button]):focus-visible{box-shadow:0 4px 12px #0000001a,0 0 0 2px #0003}:where([data-sonner-toast]) :where([data-disabled="true"]){cursor:not-allowed}:where([data-sonner-toast]):hover :where([data-close-button]):hover{background:var(--gray2);border-color:var(--gray5)}:where([data-sonner-toast][data-swiping="true"]):before{content:"";position:absolute;left:-50%;right:-50%;height:100%;z-index:-1}:where([data-sonner-toast][data-y-position="top"][data-swiping="true"]):before{bottom:50%;transform:scaleY(3) translateY(50%)}:where([data-sonner-toast][data-y-position="bottom"][data-swiping="true"]):before{top:50%;transform:scaleY(3) translateY(-50%)}:where([data-sonner-toast][data-swiping="false"][data-removed="true"]):before{content:"";position:absolute;inset:0;transform:scaleY(2)}:where([data-sonner-toast]):after{content:"";position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}:where([data-sonner-toast][data-mounted="true"]){--y: translateY(0);opacity:1}:where([data-sonner-toast][data-expanded="false"][data-front="false"]){--scale: var(--toasts-before) * .05 + 1;--y: translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}:where([data-sonner-toast])>*{transition:opacity .4s}:where([data-sonner-toast][data-expanded="false"][data-front="false"][data-styled="true"])>*{opacity:0}:where([data-sonner-toast][data-visible="false"]){opacity:0;pointer-events:none}:where([data-sonner-toast][data-mounted="true"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}:where([data-sonner-toast][data-removed="true"][data-front="true"][data-swipe-out="false"]){--y: translateY(calc(var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="true"]){--y: translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}:where([data-sonner-toast][data-removed="true"][data-front="false"][data-swipe-out="false"][data-expanded="false"]){--y: translateY(40%);opacity:0;transition:transform .5s,opacity .2s}:where([data-sonner-toast][data-removed="true"][data-front="false"]):before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y, 0px)) translate(var(--swipe-amount-x, 0px));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{0%{transform:var(--y) translate(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translate(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{0%{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width: 600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-theme=light]{--normal-bg: #fff;--normal-border: var(--gray4);--normal-text: var(--gray12);--success-bg: hsl(143, 85%, 96%);--success-border: hsl(145, 92%, 91%);--success-text: hsl(140, 100%, 27%);--info-bg: hsl(208, 100%, 97%);--info-border: hsl(221, 91%, 91%);--info-text: hsl(210, 92%, 45%);--warning-bg: hsl(49, 100%, 97%);--warning-border: hsl(49, 91%, 91%);--warning-text: hsl(31, 92%, 45%);--error-bg: hsl(359, 100%, 97%);--error-border: hsl(359, 100%, 94%);--error-text: hsl(360, 100%, 45%)}[data-sonner-toaster][data-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg: #000;--normal-border: hsl(0, 0%, 20%);--normal-text: var(--gray1)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg: #fff;--normal-border: var(--gray3);--normal-text: var(--gray12)}[data-sonner-toaster][data-theme=dark]{--normal-bg: #000;--normal-bg-hover: hsl(0, 0%, 12%);--normal-border: hsl(0, 0%, 20%);--normal-border-hover: hsl(0, 0%, 25%);--normal-text: var(--gray1);--success-bg: hsl(150, 100%, 6%);--success-border: hsl(147, 100%, 12%);--success-text: hsl(150, 86%, 65%);--info-bg: hsl(215, 100%, 6%);--info-border: hsl(223, 100%, 12%);--info-text: hsl(216, 87%, 65%);--warning-bg: hsl(64, 100%, 6%);--warning-border: hsl(60, 100%, 12%);--warning-text: hsl(46, 87%, 65%);--error-bg: hsl(358, 76%, 10%);--error-border: hsl(357, 89%, 16%);--error-text: hsl(358, 100%, 81%)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success],[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info],[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning],[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error],[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size: 16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:nth-child(1){animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}to{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}to{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}to{opacity:.15}}@media (prefers-reduced-motion){[data-sonner-toast],[data-sonner-toast]>*,.sonner-loading-bar{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}
`);function Pg(e){return e.label!==void 0}var MD=3,FD="32px",BD="16px",b_=4e3,UD=356,$D=14,zD=20,qD=200;function yo(...e){return e.filter(Boolean).join(" ")}function VD(e){let[t,r]=e.split("-"),n=[];return t&&n.push(t),r&&n.push(r),n}var WD=e=>{var t,r,n,i,a,o,l,d,f,h,p;let{invert:v,toast:m,unstyled:j,interacting:w,setHeights:_,visibleToasts:S,heights:E,index:k,toasts:C,expanded:D,removeToast:M,defaultRichColors:F,closeButton:U,style:I,cancelButtonStyle:K,actionButtonStyle:B,className:O="",descriptionClassName:z="",duration:q,position:ue,gap:ie,loadingIcon:le,expandByDefault:G,classNames:se,icons:xe,closeButtonAriaLabel:te="Close toast",pauseWhenPageIsHidden:R}=e,[V,Q]=Ve.useState(null),[re,Z]=Ve.useState(null),[X,pe]=Ve.useState(!1),[ce,we]=Ve.useState(!1),[Pe,ze]=Ve.useState(!1),[ve,qe]=Ve.useState(!1),[ne,tt]=Ve.useState(!1),[jt,St]=Ve.useState(0),[Xe,me]=Ve.useState(0),ye=Ve.useRef(m.duration||q||b_),Ce=Ve.useRef(null),Ue=Ve.useRef(null),Je=k===0,He=k+1<=S,Ze=m.type,ft=m.dismissible!==!1,bt=m.className||"",gt=m.descriptionClassName||"",$t=Ve.useMemo(()=>E.findIndex(Ht=>Ht.toastId===m.id)||0,[E,m.id]),xt=Ve.useMemo(()=>{var Ht;return(Ht=m.closeButton)!=null?Ht:U},[m.closeButton,U]),Yr=Ve.useMemo(()=>m.duration||q||b_,[m.duration,q]),ur=Ve.useRef(0),Gt=Ve.useRef(0),ir=Ve.useRef(0),Nr=Ve.useRef(null),[Be,rr]=ue.split("-"),Vt=Ve.useMemo(()=>E.reduce((Ht,nr,jr)=>jr>=$t?Ht:Ht+nr.height,0),[E,$t]),Yt=AD(),Rr=m.invert||v,Qt=Ze==="loading";Gt.current=Ve.useMemo(()=>$t*ie+Vt,[$t,Vt]),Ve.useEffect(()=>{ye.current=Yr},[Yr]),Ve.useEffect(()=>{pe(!0)},[]),Ve.useEffect(()=>{let Ht=Ue.current;if(Ht){let nr=Ht.getBoundingClientRect().height;return me(nr),_(jr=>[{toastId:m.id,height:nr,position:m.position},...jr]),()=>_(jr=>jr.filter(cn=>cn.toastId!==m.id))}},[_,m.id]),Ve.useLayoutEffect(()=>{if(!X)return;let Ht=Ue.current,nr=Ht.style.height;Ht.style.height="auto";let jr=Ht.getBoundingClientRect().height;Ht.style.height=nr,me(jr),_(cn=>cn.find(Et=>Et.toastId===m.id)?cn.map(Et=>Et.toastId===m.id?{...Et,height:jr}:Et):[{toastId:m.id,height:jr,position:m.position},...cn])},[X,m.title,m.description,_,m.id]);let Tt=Ve.useCallback(()=>{we(!0),St(Gt.current),_(Ht=>Ht.filter(nr=>nr.toastId!==m.id)),setTimeout(()=>{M(m)},qD)},[m,M,_,Gt]);Ve.useEffect(()=>{if(m.promise&&Ze==="loading"||m.duration===1/0||m.type==="loading")return;let Ht;return D||w||R&&Yt?(()=>{if(ir.current<ur.current){let nr=new Date().getTime()-ur.current;ye.current=ye.current-nr}ir.current=new Date().getTime()})():ye.current!==1/0&&(ur.current=new Date().getTime(),Ht=setTimeout(()=>{var nr;(nr=m.onAutoClose)==null||nr.call(m,m),Tt()},ye.current)),()=>clearTimeout(Ht)},[D,w,m,Ze,R,Yt,Tt]),Ve.useEffect(()=>{m.delete&&Tt()},[Tt,m.delete]);function Ar(){var Ht,nr,jr;return xe!=null&&xe.loading?Ve.createElement("div",{className:yo(se?.loader,(Ht=m?.classNames)==null?void 0:Ht.loader,"sonner-loader"),"data-visible":Ze==="loading"},xe.loading):le?Ve.createElement("div",{className:yo(se?.loader,(nr=m?.classNames)==null?void 0:nr.loader,"sonner-loader"),"data-visible":Ze==="loading"},le):Ve.createElement(ND,{className:yo(se?.loader,(jr=m?.classNames)==null?void 0:jr.loader),visible:Ze==="loading"})}return Ve.createElement("li",{tabIndex:0,ref:Ue,className:yo(O,bt,se?.toast,(t=m?.classNames)==null?void 0:t.toast,se?.default,se?.[Ze],(r=m?.classNames)==null?void 0:r[Ze]),"data-sonner-toast":"","data-rich-colors":(n=m.richColors)!=null?n:F,"data-styled":!(m.jsx||m.unstyled||j),"data-mounted":X,"data-promise":!!m.promise,"data-swiped":ne,"data-removed":ce,"data-visible":He,"data-y-position":Be,"data-x-position":rr,"data-index":k,"data-front":Je,"data-swiping":Pe,"data-dismissible":ft,"data-type":Ze,"data-invert":Rr,"data-swipe-out":ve,"data-swipe-direction":re,"data-expanded":!!(D||G&&X),style:{"--index":k,"--toasts-before":k,"--z-index":C.length-k,"--offset":`${ce?jt:Gt.current}px`,"--initial-height":G?"auto":`${Xe}px`,...I,...m.style},onDragEnd:()=>{ze(!1),Q(null),Nr.current=null},onPointerDown:Ht=>{Qt||!ft||(Ce.current=new Date,St(Gt.current),Ht.target.setPointerCapture(Ht.pointerId),Ht.target.tagName!=="BUTTON"&&(ze(!0),Nr.current={x:Ht.clientX,y:Ht.clientY}))},onPointerUp:()=>{var Ht,nr,jr,cn;if(ve||!ft)return;Nr.current=null;let Et=Number(((Ht=Ue.current)==null?void 0:Ht.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ee=Number(((nr=Ue.current)==null?void 0:nr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),nt=new Date().getTime()-((jr=Ce.current)==null?void 0:jr.getTime()),vt=V==="x"?Et:Ee,Kt=Math.abs(vt)/nt;if(Math.abs(vt)>=zD||Kt>.11){St(Gt.current),(cn=m.onDismiss)==null||cn.call(m,m),Z(V==="x"?Et>0?"right":"left":Ee>0?"down":"up"),Tt(),qe(!0),tt(!1);return}ze(!1),Q(null)},onPointerMove:Ht=>{var nr,jr,cn,Et;if(!Nr.current||!ft||((nr=window.getSelection())==null?void 0:nr.toString().length)>0)return;let Ee=Ht.clientY-Nr.current.y,nt=Ht.clientX-Nr.current.x,vt=(jr=e.swipeDirections)!=null?jr:VD(ue);!V&&(Math.abs(nt)>1||Math.abs(Ee)>1)&&Q(Math.abs(nt)>Math.abs(Ee)?"x":"y");let Kt={x:0,y:0};V==="y"?(vt.includes("top")||vt.includes("bottom"))&&(vt.includes("top")&&Ee<0||vt.includes("bottom")&&Ee>0)&&(Kt.y=Ee):V==="x"&&(vt.includes("left")||vt.includes("right"))&&(vt.includes("left")&&nt<0||vt.includes("right")&&nt>0)&&(Kt.x=nt),(Math.abs(Kt.x)>0||Math.abs(Kt.y)>0)&&tt(!0),(cn=Ue.current)==null||cn.style.setProperty("--swipe-amount-x",`${Kt.x}px`),(Et=Ue.current)==null||Et.style.setProperty("--swipe-amount-y",`${Kt.y}px`)}},xt&&!m.jsx?Ve.createElement("button",{"aria-label":te,"data-disabled":Qt,"data-close-button":!0,onClick:Qt||!ft?()=>{}:()=>{var Ht;Tt(),(Ht=m.onDismiss)==null||Ht.call(m,m)},className:yo(se?.closeButton,(i=m?.classNames)==null?void 0:i.closeButton)},(a=xe?.close)!=null?a:ED):null,m.jsx||x.isValidElement(m.title)?m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title:Ve.createElement(Ve.Fragment,null,Ze||m.icon||m.promise?Ve.createElement("div",{"data-icon":"",className:yo(se?.icon,(o=m?.classNames)==null?void 0:o.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ar():null,m.type!=="loading"?m.icon||xe?.[Ze]||bD(Ze):null):null,Ve.createElement("div",{"data-content":"",className:yo(se?.content,(l=m?.classNames)==null?void 0:l.content)},Ve.createElement("div",{"data-title":"",className:yo(se?.title,(d=m?.classNames)==null?void 0:d.title)},typeof m.title=="function"?m.title():m.title),m.description?Ve.createElement("div",{"data-description":"",className:yo(z,gt,se?.description,(f=m?.classNames)==null?void 0:f.description)},typeof m.description=="function"?m.description():m.description):null),x.isValidElement(m.cancel)?m.cancel:m.cancel&&Pg(m.cancel)?Ve.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||K,onClick:Ht=>{var nr,jr;Pg(m.cancel)&&ft&&((jr=(nr=m.cancel).onClick)==null||jr.call(nr,Ht),Tt())},className:yo(se?.cancelButton,(h=m?.classNames)==null?void 0:h.cancelButton)},m.cancel.label):null,x.isValidElement(m.action)?m.action:m.action&&Pg(m.action)?Ve.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||B,onClick:Ht=>{var nr,jr;Pg(m.action)&&((jr=(nr=m.action).onClick)==null||jr.call(nr,Ht),!Ht.defaultPrevented&&Tt())},className:yo(se?.actionButton,(p=m?.classNames)==null?void 0:p.actionButton)},m.action.label):null))};function __(){if(typeof window>"u"||typeof document>"u")return"ltr";let e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function HD(e,t){let r={};return[e,t].forEach((n,i)=>{let a=i===1,o=a?"--mobile-offset":"--offset",l=a?BD:FD;function d(f){["top","right","bottom","left"].forEach(h=>{r[`${o}-${h}`]=typeof f=="number"?`${f}px`:f})}typeof n=="number"||typeof n=="string"?d(n):typeof n=="object"?["top","right","bottom","left"].forEach(f=>{n[f]===void 0?r[`${o}-${f}`]=l:r[`${o}-${f}`]=typeof n[f]=="number"?`${n[f]}px`:n[f]}):d(l)}),r}var GD=x.forwardRef(function(e,t){let{invert:r,position:n="bottom-right",hotkey:i=["altKey","KeyT"],expand:a,closeButton:o,className:l,offset:d,mobileOffset:f,theme:h="light",richColors:p,duration:v,style:m,visibleToasts:j=MD,toastOptions:w,dir:_=__(),gap:S=$D,loadingIcon:E,icons:k,containerAriaLabel:C="Notifications",pauseWhenPageIsHidden:D}=e,[M,F]=Ve.useState([]),U=Ve.useMemo(()=>Array.from(new Set([n].concat(M.filter(R=>R.position).map(R=>R.position)))),[M,n]),[I,K]=Ve.useState([]),[B,O]=Ve.useState(!1),[z,q]=Ve.useState(!1),[ue,ie]=Ve.useState(h!=="system"?h:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),le=Ve.useRef(null),G=i.join("+").replace(/Key/g,"").replace(/Digit/g,""),se=Ve.useRef(null),xe=Ve.useRef(!1),te=Ve.useCallback(R=>{F(V=>{var Q;return(Q=V.find(re=>re.id===R.id))!=null&&Q.delete||Vi.dismiss(R.id),V.filter(({id:re})=>re!==R.id)})},[]);return Ve.useEffect(()=>Vi.subscribe(R=>{if(R.dismiss){F(V=>V.map(Q=>Q.id===R.id?{...Q,delete:!0}:Q));return}setTimeout(()=>{A4.flushSync(()=>{F(V=>{let Q=V.findIndex(re=>re.id===R.id);return Q!==-1?[...V.slice(0,Q),{...V[Q],...R},...V.slice(Q+1)]:[R,...V]})})})}),[]),Ve.useEffect(()=>{if(h!=="system"){ie(h);return}if(h==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?ie("dark"):ie("light")),typeof window>"u")return;let R=window.matchMedia("(prefers-color-scheme: dark)");try{R.addEventListener("change",({matches:V})=>{ie(V?"dark":"light")})}catch{R.addListener(({matches:Q})=>{try{ie(Q?"dark":"light")}catch(re){console.error(re)}})}},[h]),Ve.useEffect(()=>{M.length<=1&&O(!1)},[M]),Ve.useEffect(()=>{let R=V=>{var Q,re;i.every(Z=>V[Z]||V.code===Z)&&(O(!0),(Q=le.current)==null||Q.focus()),V.code==="Escape"&&(document.activeElement===le.current||(re=le.current)!=null&&re.contains(document.activeElement))&&O(!1)};return document.addEventListener("keydown",R),()=>document.removeEventListener("keydown",R)},[i]),Ve.useEffect(()=>{if(le.current)return()=>{se.current&&(se.current.focus({preventScroll:!0}),se.current=null,xe.current=!1)}},[le.current]),Ve.createElement("section",{ref:t,"aria-label":`${C} ${G}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},U.map((R,V)=>{var Q;let[re,Z]=R.split("-");return M.length?Ve.createElement("ol",{key:R,dir:_==="auto"?__():_,tabIndex:-1,ref:le,className:l,"data-sonner-toaster":!0,"data-theme":ue,"data-y-position":re,"data-lifted":B&&M.length>1&&!a,"data-x-position":Z,style:{"--front-toast-height":`${((Q=I[0])==null?void 0:Q.height)||0}px`,"--width":`${UD}px`,"--gap":`${S}px`,...m,...HD(d,f)},onBlur:X=>{xe.current&&!X.currentTarget.contains(X.relatedTarget)&&(xe.current=!1,se.current&&(se.current.focus({preventScroll:!0}),se.current=null))},onFocus:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||xe.current||(xe.current=!0,se.current=X.relatedTarget)},onMouseEnter:()=>O(!0),onMouseMove:()=>O(!0),onMouseLeave:()=>{z||O(!1)},onDragEnd:()=>O(!1),onPointerDown:X=>{X.target instanceof HTMLElement&&X.target.dataset.dismissible==="false"||q(!0)},onPointerUp:()=>q(!1)},M.filter(X=>!X.position&&V===0||X.position===R).map((X,pe)=>{var ce,we;return Ve.createElement(WD,{key:X.id,icons:k,index:pe,toast:X,defaultRichColors:p,duration:(ce=w?.duration)!=null?ce:v,className:w?.className,descriptionClassName:w?.descriptionClassName,invert:r,visibleToasts:j,closeButton:(we=w?.closeButton)!=null?we:o,interacting:z,position:R,style:w?.style,unstyled:w?.unstyled,classNames:w?.classNames,cancelButtonStyle:w?.cancelButtonStyle,actionButtonStyle:w?.actionButtonStyle,removeToast:te,toasts:M.filter(Pe=>Pe.position==X.position),heights:I.filter(Pe=>Pe.position==X.position),setHeights:K,expandByDefault:a,gap:S,loadingIcon:E,expanded:B,pauseWhenPageIsHidden:D,swipeDirections:e.swipeDirections})})):null}))});const KD=({...e})=>{const{theme:t="system"}=wD();return s.jsx(GD,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...e})};var YD=Zw[" useId ".trim().toString()]||(()=>{}),QD=0;function Ms(e){const[t,r]=x.useState(YD());return us(()=>{r(n=>n??String(QD++))},[e]),t?`radix-${t}`:""}const JD=["top","right","bottom","left"],Lu=Math.min,ya=Math.max,kv=Math.round,Tg=Math.floor,ul=e=>({x:e,y:e}),ZD={left:"right",right:"left",bottom:"top",top:"bottom"},XD={start:"end",end:"start"};function z1(e,t,r){return ya(e,Lu(t,r))}function kc(e,t){return typeof e=="function"?e(t):e}function Cc(e){return e.split("-")[0]}function Vh(e){return e.split("-")[1]}function c2(e){return e==="x"?"y":"x"}function u2(e){return e==="y"?"height":"width"}const eI=new Set(["top","bottom"]);function al(e){return eI.has(Cc(e))?"y":"x"}function d2(e){return c2(al(e))}function tI(e,t,r){r===void 0&&(r=!1);const n=Vh(e),i=d2(e),a=u2(i);let o=i==="x"?n===(r?"end":"start")?"right":"left":n==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(o=Cv(o)),[o,Cv(o)]}function rI(e){const t=Cv(e);return[q1(e),t,q1(t)]}function q1(e){return e.replace(/start|end/g,t=>XD[t])}const N_=["left","right"],j_=["right","left"],nI=["top","bottom"],sI=["bottom","top"];function iI(e,t,r){switch(e){case"top":case"bottom":return r?t?j_:N_:t?N_:j_;case"left":case"right":return t?nI:sI;default:return[]}}function aI(e,t,r,n){const i=Vh(e);let a=iI(Cc(e),r==="start",n);return i&&(a=a.map(o=>o+"-"+i),t&&(a=a.concat(a.map(q1)))),a}function Cv(e){return e.replace(/left|right|bottom|top/g,t=>ZD[t])}function oI(e){return{top:0,right:0,bottom:0,left:0,...e}}function Ek(e){return typeof e!="number"?oI(e):{top:e,right:e,bottom:e,left:e}}function Ev(e){const{x:t,y:r,width:n,height:i}=e;return{width:n,height:i,top:r,left:t,right:t+n,bottom:r+i,x:t,y:r}}function S_(e,t,r){let{reference:n,floating:i}=e;const a=al(t),o=d2(t),l=u2(o),d=Cc(t),f=a==="y",h=n.x+n.width/2-i.width/2,p=n.y+n.height/2-i.height/2,v=n[l]/2-i[l]/2;let m;switch(d){case"top":m={x:h,y:n.y-i.height};break;case"bottom":m={x:h,y:n.y+n.height};break;case"right":m={x:n.x+n.width,y:p};break;case"left":m={x:n.x-i.width,y:p};break;default:m={x:n.x,y:n.y}}switch(Vh(t)){case"start":m[o]-=v*(r&&f?-1:1);break;case"end":m[o]+=v*(r&&f?-1:1);break}return m}const lI=async(e,t,r)=>{const{placement:n="bottom",strategy:i="absolute",middleware:a=[],platform:o}=r,l=a.filter(Boolean),d=await(o.isRTL==null?void 0:o.isRTL(t));let f=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:h,y:p}=S_(f,n,d),v=n,m={},j=0;for(let w=0;w<l.length;w++){const{name:_,fn:S}=l[w],{x:E,y:k,data:C,reset:D}=await S({x:h,y:p,initialPlacement:n,placement:v,strategy:i,middlewareData:m,rects:f,platform:o,elements:{reference:e,floating:t}});h=E??h,p=k??p,m={...m,[_]:{...m[_],...C}},D&&j<=50&&(j++,typeof D=="object"&&(D.placement&&(v=D.placement),D.rects&&(f=D.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):D.rects),{x:h,y:p}=S_(f,v,d)),w=-1)}return{x:h,y:p,placement:v,strategy:i,middlewareData:m}};async function op(e,t){var r;t===void 0&&(t={});const{x:n,y:i,platform:a,rects:o,elements:l,strategy:d}=e,{boundary:f="clippingAncestors",rootBoundary:h="viewport",elementContext:p="floating",altBoundary:v=!1,padding:m=0}=kc(t,e),j=Ek(m),_=l[v?p==="floating"?"reference":"floating":p],S=Ev(await a.getClippingRect({element:(r=await(a.isElement==null?void 0:a.isElement(_)))==null||r?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:f,rootBoundary:h,strategy:d})),E=p==="floating"?{x:n,y:i,width:o.floating.width,height:o.floating.height}:o.reference,k=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),C=await(a.isElement==null?void 0:a.isElement(k))?await(a.getScale==null?void 0:a.getScale(k))||{x:1,y:1}:{x:1,y:1},D=Ev(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:E,offsetParent:k,strategy:d}):E);return{top:(S.top-D.top+j.top)/C.y,bottom:(D.bottom-S.bottom+j.bottom)/C.y,left:(S.left-D.left+j.left)/C.x,right:(D.right-S.right+j.right)/C.x}}const cI=e=>({name:"arrow",options:e,async fn(t){const{x:r,y:n,placement:i,rects:a,platform:o,elements:l,middlewareData:d}=t,{element:f,padding:h=0}=kc(e,t)||{};if(f==null)return{};const p=Ek(h),v={x:r,y:n},m=d2(i),j=u2(m),w=await o.getDimensions(f),_=m==="y",S=_?"top":"left",E=_?"bottom":"right",k=_?"clientHeight":"clientWidth",C=a.reference[j]+a.reference[m]-v[m]-a.floating[j],D=v[m]-a.reference[m],M=await(o.getOffsetParent==null?void 0:o.getOffsetParent(f));let F=M?M[k]:0;(!F||!await(o.isElement==null?void 0:o.isElement(M)))&&(F=l.floating[k]||a.floating[j]);const U=C/2-D/2,I=F/2-w[j]/2-1,K=Lu(p[S],I),B=Lu(p[E],I),O=K,z=F-w[j]-B,q=F/2-w[j]/2+U,ue=z1(O,q,z),ie=!d.arrow&&Vh(i)!=null&&q!==ue&&a.reference[j]/2-(q<O?K:B)-w[j]/2<0,le=ie?q<O?q-O:q-z:0;return{[m]:v[m]+le,data:{[m]:ue,centerOffset:q-ue-le,...ie&&{alignmentOffset:le}},reset:ie}}}),uI=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var r,n;const{placement:i,middlewareData:a,rects:o,initialPlacement:l,platform:d,elements:f}=t,{mainAxis:h=!0,crossAxis:p=!0,fallbackPlacements:v,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:w=!0,..._}=kc(e,t);if((r=a.arrow)!=null&&r.alignmentOffset)return{};const S=Cc(i),E=al(l),k=Cc(l)===l,C=await(d.isRTL==null?void 0:d.isRTL(f.floating)),D=v||(k||!w?[Cv(l)]:rI(l)),M=j!=="none";!v&&M&&D.push(...aI(l,w,j,C));const F=[l,...D],U=await op(t,_),I=[];let K=((n=a.flip)==null?void 0:n.overflows)||[];if(h&&I.push(U[S]),p){const q=tI(i,o,C);I.push(U[q[0]],U[q[1]])}if(K=[...K,{placement:i,overflows:I}],!I.every(q=>q<=0)){var B,O;const q=(((B=a.flip)==null?void 0:B.index)||0)+1,ue=F[q];if(ue&&(!(p==="alignment"?E!==al(ue):!1)||K.every(G=>al(G.placement)===E?G.overflows[0]>0:!0)))return{data:{index:q,overflows:K},reset:{placement:ue}};let ie=(O=K.filter(le=>le.overflows[0]<=0).sort((le,G)=>le.overflows[1]-G.overflows[1])[0])==null?void 0:O.placement;if(!ie)switch(m){case"bestFit":{var z;const le=(z=K.filter(G=>{if(M){const se=al(G.placement);return se===E||se==="y"}return!0}).map(G=>[G.placement,G.overflows.filter(se=>se>0).reduce((se,xe)=>se+xe,0)]).sort((G,se)=>G[1]-se[1])[0])==null?void 0:z[0];le&&(ie=le);break}case"initialPlacement":ie=l;break}if(i!==ie)return{reset:{placement:ie}}}return{}}}};function k_(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function C_(e){return JD.some(t=>e[t]>=0)}const dI=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:r}=t,{strategy:n="referenceHidden",...i}=kc(e,t);switch(n){case"referenceHidden":{const a=await op(t,{...i,elementContext:"reference"}),o=k_(a,r.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:C_(o)}}}case"escaped":{const a=await op(t,{...i,altBoundary:!0}),o=k_(a,r.floating);return{data:{escapedOffsets:o,escaped:C_(o)}}}default:return{}}}}},Ak=new Set(["left","top"]);async function fI(e,t){const{placement:r,platform:n,elements:i}=e,a=await(n.isRTL==null?void 0:n.isRTL(i.floating)),o=Cc(r),l=Vh(r),d=al(r)==="y",f=Ak.has(o)?-1:1,h=a&&d?-1:1,p=kc(t,e);let{mainAxis:v,crossAxis:m,alignmentAxis:j}=typeof p=="number"?{mainAxis:p,crossAxis:0,alignmentAxis:null}:{mainAxis:p.mainAxis||0,crossAxis:p.crossAxis||0,alignmentAxis:p.alignmentAxis};return l&&typeof j=="number"&&(m=l==="end"?j*-1:j),d?{x:m*h,y:v*f}:{x:v*f,y:m*h}}const hI=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var r,n;const{x:i,y:a,placement:o,middlewareData:l}=t,d=await fI(t,e);return o===((r=l.offset)==null?void 0:r.placement)&&(n=l.arrow)!=null&&n.alignmentOffset?{}:{x:i+d.x,y:a+d.y,data:{...d,placement:o}}}}},mI=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:r,y:n,placement:i}=t,{mainAxis:a=!0,crossAxis:o=!1,limiter:l={fn:_=>{let{x:S,y:E}=_;return{x:S,y:E}}},...d}=kc(e,t),f={x:r,y:n},h=await op(t,d),p=al(Cc(i)),v=c2(p);let m=f[v],j=f[p];if(a){const _=v==="y"?"top":"left",S=v==="y"?"bottom":"right",E=m+h[_],k=m-h[S];m=z1(E,m,k)}if(o){const _=p==="y"?"top":"left",S=p==="y"?"bottom":"right",E=j+h[_],k=j-h[S];j=z1(E,j,k)}const w=l.fn({...t,[v]:m,[p]:j});return{...w,data:{x:w.x-r,y:w.y-n,enabled:{[v]:a,[p]:o}}}}}},pI=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:r,y:n,placement:i,rects:a,middlewareData:o}=t,{offset:l=0,mainAxis:d=!0,crossAxis:f=!0}=kc(e,t),h={x:r,y:n},p=al(i),v=c2(p);let m=h[v],j=h[p];const w=kc(l,t),_=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(d){const k=v==="y"?"height":"width",C=a.reference[v]-a.floating[k]+_.mainAxis,D=a.reference[v]+a.reference[k]-_.mainAxis;m<C?m=C:m>D&&(m=D)}if(f){var S,E;const k=v==="y"?"width":"height",C=Ak.has(Cc(i)),D=a.reference[p]-a.floating[k]+(C&&((S=o.offset)==null?void 0:S[p])||0)+(C?0:_.crossAxis),M=a.reference[p]+a.reference[k]+(C?0:((E=o.offset)==null?void 0:E[p])||0)-(C?_.crossAxis:0);j<D?j=D:j>M&&(j=M)}return{[v]:m,[p]:j}}}},gI=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var r,n;const{placement:i,rects:a,platform:o,elements:l}=t,{apply:d=()=>{},...f}=kc(e,t),h=await op(t,f),p=Cc(i),v=Vh(i),m=al(i)==="y",{width:j,height:w}=a.floating;let _,S;p==="top"||p==="bottom"?(_=p,S=v===(await(o.isRTL==null?void 0:o.isRTL(l.floating))?"start":"end")?"left":"right"):(S=p,_=v==="end"?"top":"bottom");const E=w-h.top-h.bottom,k=j-h.left-h.right,C=Lu(w-h[_],E),D=Lu(j-h[S],k),M=!t.middlewareData.shift;let F=C,U=D;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(U=k),(n=t.middlewareData.shift)!=null&&n.enabled.y&&(F=E),M&&!v){const K=ya(h.left,0),B=ya(h.right,0),O=ya(h.top,0),z=ya(h.bottom,0);m?U=j-2*(K!==0||B!==0?K+B:ya(h.left,h.right)):F=w-2*(O!==0||z!==0?O+z:ya(h.top,h.bottom))}await d({...t,availableWidth:U,availableHeight:F});const I=await o.getDimensions(l.floating);return j!==I.width||w!==I.height?{reset:{rects:!0}}:{}}}};function p0(){return typeof window<"u"}function Wh(e){return Pk(e)?(e.nodeName||"").toLowerCase():"#document"}function ka(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Nl(e){var t;return(t=(Pk(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Pk(e){return p0()?e instanceof Node||e instanceof ka(e).Node:!1}function Po(e){return p0()?e instanceof Element||e instanceof ka(e).Element:!1}function xl(e){return p0()?e instanceof HTMLElement||e instanceof ka(e).HTMLElement:!1}function E_(e){return!p0()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof ka(e).ShadowRoot}const vI=new Set(["inline","contents"]);function Ap(e){const{overflow:t,overflowX:r,overflowY:n,display:i}=To(e);return/auto|scroll|overlay|hidden|clip/.test(t+n+r)&&!vI.has(i)}const yI=new Set(["table","td","th"]);function xI(e){return yI.has(Wh(e))}const wI=[":popover-open",":modal"];function g0(e){return wI.some(t=>{try{return e.matches(t)}catch{return!1}})}const bI=["transform","translate","scale","rotate","perspective"],_I=["transform","translate","scale","rotate","perspective","filter"],NI=["paint","layout","strict","content"];function f2(e){const t=h2(),r=Po(e)?To(e):e;return bI.some(n=>r[n]?r[n]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||_I.some(n=>(r.willChange||"").includes(n))||NI.some(n=>(r.contain||"").includes(n))}function jI(e){let t=Du(e);for(;xl(t)&&!jh(t);){if(f2(t))return t;if(g0(t))return null;t=Du(t)}return null}function h2(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const SI=new Set(["html","body","#document"]);function jh(e){return SI.has(Wh(e))}function To(e){return ka(e).getComputedStyle(e)}function v0(e){return Po(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Du(e){if(Wh(e)==="html")return e;const t=e.assignedSlot||e.parentNode||E_(e)&&e.host||Nl(e);return E_(t)?t.host:t}function Tk(e){const t=Du(e);return jh(t)?e.ownerDocument?e.ownerDocument.body:e.body:xl(t)&&Ap(t)?t:Tk(t)}function lp(e,t,r){var n;t===void 0&&(t=[]),r===void 0&&(r=!0);const i=Tk(e),a=i===((n=e.ownerDocument)==null?void 0:n.body),o=ka(i);if(a){const l=V1(o);return t.concat(o,o.visualViewport||[],Ap(i)?i:[],l&&r?lp(l):[])}return t.concat(i,lp(i,[],r))}function V1(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Rk(e){const t=To(e);let r=parseFloat(t.width)||0,n=parseFloat(t.height)||0;const i=xl(e),a=i?e.offsetWidth:r,o=i?e.offsetHeight:n,l=kv(r)!==a||kv(n)!==o;return l&&(r=a,n=o),{width:r,height:n,$:l}}function m2(e){return Po(e)?e:e.contextElement}function ph(e){const t=m2(e);if(!xl(t))return ul(1);const r=t.getBoundingClientRect(),{width:n,height:i,$:a}=Rk(t);let o=(a?kv(r.width):r.width)/n,l=(a?kv(r.height):r.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!l||!Number.isFinite(l))&&(l=1),{x:o,y:l}}const kI=ul(0);function Lk(e){const t=ka(e);return!h2()||!t.visualViewport?kI:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function CI(e,t,r){return t===void 0&&(t=!1),!r||t&&r!==ka(e)?!1:t}function $d(e,t,r,n){t===void 0&&(t=!1),r===void 0&&(r=!1);const i=e.getBoundingClientRect(),a=m2(e);let o=ul(1);t&&(n?Po(n)&&(o=ph(n)):o=ph(e));const l=CI(a,r,n)?Lk(a):ul(0);let d=(i.left+l.x)/o.x,f=(i.top+l.y)/o.y,h=i.width/o.x,p=i.height/o.y;if(a){const v=ka(a),m=n&&Po(n)?ka(n):n;let j=v,w=V1(j);for(;w&&n&&m!==j;){const _=ph(w),S=w.getBoundingClientRect(),E=To(w),k=S.left+(w.clientLeft+parseFloat(E.paddingLeft))*_.x,C=S.top+(w.clientTop+parseFloat(E.paddingTop))*_.y;d*=_.x,f*=_.y,h*=_.x,p*=_.y,d+=k,f+=C,j=ka(w),w=V1(j)}}return Ev({width:h,height:p,x:d,y:f})}function y0(e,t){const r=v0(e).scrollLeft;return t?t.left+r:$d(Nl(e)).left+r}function Dk(e,t){const r=e.getBoundingClientRect(),n=r.left+t.scrollLeft-y0(e,r),i=r.top+t.scrollTop;return{x:n,y:i}}function EI(e){let{elements:t,rect:r,offsetParent:n,strategy:i}=e;const a=i==="fixed",o=Nl(n),l=t?g0(t.floating):!1;if(n===o||l&&a)return r;let d={scrollLeft:0,scrollTop:0},f=ul(1);const h=ul(0),p=xl(n);if((p||!p&&!a)&&((Wh(n)!=="body"||Ap(o))&&(d=v0(n)),xl(n))){const m=$d(n);f=ph(n),h.x=m.x+n.clientLeft,h.y=m.y+n.clientTop}const v=o&&!p&&!a?Dk(o,d):ul(0);return{width:r.width*f.x,height:r.height*f.y,x:r.x*f.x-d.scrollLeft*f.x+h.x+v.x,y:r.y*f.y-d.scrollTop*f.y+h.y+v.y}}function AI(e){return Array.from(e.getClientRects())}function PI(e){const t=Nl(e),r=v0(e),n=e.ownerDocument.body,i=ya(t.scrollWidth,t.clientWidth,n.scrollWidth,n.clientWidth),a=ya(t.scrollHeight,t.clientHeight,n.scrollHeight,n.clientHeight);let o=-r.scrollLeft+y0(e);const l=-r.scrollTop;return To(n).direction==="rtl"&&(o+=ya(t.clientWidth,n.clientWidth)-i),{width:i,height:a,x:o,y:l}}const A_=25;function TI(e,t){const r=ka(e),n=Nl(e),i=r.visualViewport;let a=n.clientWidth,o=n.clientHeight,l=0,d=0;if(i){a=i.width,o=i.height;const h=h2();(!h||h&&t==="fixed")&&(l=i.offsetLeft,d=i.offsetTop)}const f=y0(n);if(f<=0){const h=n.ownerDocument,p=h.body,v=getComputedStyle(p),m=h.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,j=Math.abs(n.clientWidth-p.clientWidth-m);j<=A_&&(a-=j)}else f<=A_&&(a+=f);return{width:a,height:o,x:l,y:d}}const RI=new Set(["absolute","fixed"]);function LI(e,t){const r=$d(e,!0,t==="fixed"),n=r.top+e.clientTop,i=r.left+e.clientLeft,a=xl(e)?ph(e):ul(1),o=e.clientWidth*a.x,l=e.clientHeight*a.y,d=i*a.x,f=n*a.y;return{width:o,height:l,x:d,y:f}}function P_(e,t,r){let n;if(t==="viewport")n=TI(e,r);else if(t==="document")n=PI(Nl(e));else if(Po(t))n=LI(t,r);else{const i=Lk(e);n={x:t.x-i.x,y:t.y-i.y,width:t.width,height:t.height}}return Ev(n)}function Ik(e,t){const r=Du(e);return r===t||!Po(r)||jh(r)?!1:To(r).position==="fixed"||Ik(r,t)}function DI(e,t){const r=t.get(e);if(r)return r;let n=lp(e,[],!1).filter(l=>Po(l)&&Wh(l)!=="body"),i=null;const a=To(e).position==="fixed";let o=a?Du(e):e;for(;Po(o)&&!jh(o);){const l=To(o),d=f2(o);!d&&l.position==="fixed"&&(i=null),(a?!d&&!i:!d&&l.position==="static"&&!!i&&RI.has(i.position)||Ap(o)&&!d&&Ik(e,o))?n=n.filter(h=>h!==o):i=l,o=Du(o)}return t.set(e,n),n}function II(e){let{element:t,boundary:r,rootBoundary:n,strategy:i}=e;const o=[...r==="clippingAncestors"?g0(t)?[]:DI(t,this._c):[].concat(r),n],l=o[0],d=o.reduce((f,h)=>{const p=P_(t,h,i);return f.top=ya(p.top,f.top),f.right=Lu(p.right,f.right),f.bottom=Lu(p.bottom,f.bottom),f.left=ya(p.left,f.left),f},P_(t,l,i));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function OI(e){const{width:t,height:r}=Rk(e);return{width:t,height:r}}function MI(e,t,r){const n=xl(t),i=Nl(t),a=r==="fixed",o=$d(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const d=ul(0);function f(){d.x=y0(i)}if(n||!n&&!a)if((Wh(t)!=="body"||Ap(i))&&(l=v0(t)),n){const m=$d(t,!0,a,t);d.x=m.x+t.clientLeft,d.y=m.y+t.clientTop}else i&&f();a&&!n&&i&&f();const h=i&&!n&&!a?Dk(i,l):ul(0),p=o.left+l.scrollLeft-d.x-h.x,v=o.top+l.scrollTop-d.y-h.y;return{x:p,y:v,width:o.width,height:o.height}}function sx(e){return To(e).position==="static"}function T_(e,t){if(!xl(e)||To(e).position==="fixed")return null;if(t)return t(e);let r=e.offsetParent;return Nl(e)===r&&(r=r.ownerDocument.body),r}function Ok(e,t){const r=ka(e);if(g0(e))return r;if(!xl(e)){let i=Du(e);for(;i&&!jh(i);){if(Po(i)&&!sx(i))return i;i=Du(i)}return r}let n=T_(e,t);for(;n&&xI(n)&&sx(n);)n=T_(n,t);return n&&jh(n)&&sx(n)&&!f2(n)?r:n||jI(e)||r}const FI=async function(e){const t=this.getOffsetParent||Ok,r=this.getDimensions,n=await r(e.floating);return{reference:MI(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:n.width,height:n.height}}};function BI(e){return To(e).direction==="rtl"}const UI={convertOffsetParentRelativeRectToViewportRelativeRect:EI,getDocumentElement:Nl,getClippingRect:II,getOffsetParent:Ok,getElementRects:FI,getClientRects:AI,getDimensions:OI,getScale:ph,isElement:Po,isRTL:BI};function Mk(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function $I(e,t){let r=null,n;const i=Nl(e);function a(){var l;clearTimeout(n),(l=r)==null||l.disconnect(),r=null}function o(l,d){l===void 0&&(l=!1),d===void 0&&(d=1),a();const f=e.getBoundingClientRect(),{left:h,top:p,width:v,height:m}=f;if(l||t(),!v||!m)return;const j=Tg(p),w=Tg(i.clientWidth-(h+v)),_=Tg(i.clientHeight-(p+m)),S=Tg(h),k={rootMargin:-j+"px "+-w+"px "+-_+"px "+-S+"px",threshold:ya(0,Lu(1,d))||1};let C=!0;function D(M){const F=M[0].intersectionRatio;if(F!==d){if(!C)return o();F?o(!1,F):n=setTimeout(()=>{o(!1,1e-7)},1e3)}F===1&&!Mk(f,e.getBoundingClientRect())&&o(),C=!1}try{r=new IntersectionObserver(D,{...k,root:i.ownerDocument})}catch{r=new IntersectionObserver(D,k)}r.observe(e)}return o(!0),a}function zI(e,t,r,n){n===void 0&&(n={});const{ancestorScroll:i=!0,ancestorResize:a=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:d=!1}=n,f=m2(e),h=i||a?[...f?lp(f):[],...lp(t)]:[];h.forEach(S=>{i&&S.addEventListener("scroll",r,{passive:!0}),a&&S.addEventListener("resize",r)});const p=f&&l?$I(f,r):null;let v=-1,m=null;o&&(m=new ResizeObserver(S=>{let[E]=S;E&&E.target===f&&m&&(m.unobserve(t),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var k;(k=m)==null||k.observe(t)})),r()}),f&&!d&&m.observe(f),m.observe(t));let j,w=d?$d(e):null;d&&_();function _(){const S=$d(e);w&&!Mk(w,S)&&r(),w=S,j=requestAnimationFrame(_)}return r(),()=>{var S;h.forEach(E=>{i&&E.removeEventListener("scroll",r),a&&E.removeEventListener("resize",r)}),p?.(),(S=m)==null||S.disconnect(),m=null,d&&cancelAnimationFrame(j)}}const qI=hI,VI=mI,WI=uI,HI=gI,GI=dI,R_=cI,KI=pI,YI=(e,t,r)=>{const n=new Map,i={platform:UI,...r},a={...i.platform,_c:n};return lI(e,t,{...i,platform:a})};var QI=typeof document<"u",JI=function(){},fv=QI?x.useLayoutEffect:JI;function Av(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let r,n,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(r=e.length,r!==t.length)return!1;for(n=r;n--!==0;)if(!Av(e[n],t[n]))return!1;return!0}if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!{}.hasOwnProperty.call(t,i[n]))return!1;for(n=r;n--!==0;){const a=i[n];if(!(a==="_owner"&&e.$$typeof)&&!Av(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function Fk(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function L_(e,t){const r=Fk(e);return Math.round(t*r)/r}function ix(e){const t=x.useRef(e);return fv(()=>{t.current=e}),t}function ZI(e){e===void 0&&(e={});const{placement:t="bottom",strategy:r="absolute",middleware:n=[],platform:i,elements:{reference:a,floating:o}={},transform:l=!0,whileElementsMounted:d,open:f}=e,[h,p]=x.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[v,m]=x.useState(n);Av(v,n)||m(n);const[j,w]=x.useState(null),[_,S]=x.useState(null),E=x.useCallback(G=>{G!==M.current&&(M.current=G,w(G))},[]),k=x.useCallback(G=>{G!==F.current&&(F.current=G,S(G))},[]),C=a||j,D=o||_,M=x.useRef(null),F=x.useRef(null),U=x.useRef(h),I=d!=null,K=ix(d),B=ix(i),O=ix(f),z=x.useCallback(()=>{if(!M.current||!F.current)return;const G={placement:t,strategy:r,middleware:v};B.current&&(G.platform=B.current),YI(M.current,F.current,G).then(se=>{const xe={...se,isPositioned:O.current!==!1};q.current&&!Av(U.current,xe)&&(U.current=xe,Uh.flushSync(()=>{p(xe)}))})},[v,t,r,B,O]);fv(()=>{f===!1&&U.current.isPositioned&&(U.current.isPositioned=!1,p(G=>({...G,isPositioned:!1})))},[f]);const q=x.useRef(!1);fv(()=>(q.current=!0,()=>{q.current=!1}),[]),fv(()=>{if(C&&(M.current=C),D&&(F.current=D),C&&D){if(K.current)return K.current(C,D,z);z()}},[C,D,z,K,I]);const ue=x.useMemo(()=>({reference:M,floating:F,setReference:E,setFloating:k}),[E,k]),ie=x.useMemo(()=>({reference:C,floating:D}),[C,D]),le=x.useMemo(()=>{const G={position:r,left:0,top:0};if(!ie.floating)return G;const se=L_(ie.floating,h.x),xe=L_(ie.floating,h.y);return l?{...G,transform:"translate("+se+"px, "+xe+"px)",...Fk(ie.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:se,top:xe}},[r,l,ie.floating,h.x,h.y]);return x.useMemo(()=>({...h,update:z,refs:ue,elements:ie,floatingStyles:le}),[h,z,ue,ie,le])}const XI=e=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:e,fn(r){const{element:n,padding:i}=typeof e=="function"?e(r):e;return n&&t(n)?n.current!=null?R_({element:n.current,padding:i}).fn(r):{}:n?R_({element:n,padding:i}).fn(r):{}}}},eO=(e,t)=>({...qI(e),options:[e,t]}),tO=(e,t)=>({...VI(e),options:[e,t]}),rO=(e,t)=>({...KI(e),options:[e,t]}),nO=(e,t)=>({...WI(e),options:[e,t]}),sO=(e,t)=>({...HI(e),options:[e,t]}),iO=(e,t)=>({...GI(e),options:[e,t]}),aO=(e,t)=>({...XI(e),options:[e,t]});var oO="Arrow",Bk=x.forwardRef((e,t)=>{const{children:r,width:n=10,height:i=5,...a}=e;return s.jsx(yt.svg,{...a,ref:t,width:n,height:i,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?r:s.jsx("polygon",{points:"0,0 30,0 15,10"})})});Bk.displayName=oO;var lO=Bk;function p2(e){const[t,r]=x.useState(void 0);return us(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});const n=new ResizeObserver(i=>{if(!Array.isArray(i)||!i.length)return;const a=i[0];let o,l;if("borderBoxSize"in a){const d=a.borderBoxSize,f=Array.isArray(d)?d[0]:d;o=f.inlineSize,l=f.blockSize}else o=e.offsetWidth,l=e.offsetHeight;r({width:o,height:l})});return n.observe(e,{box:"border-box"}),()=>n.unobserve(e)}else r(void 0)},[e]),t}var g2="Popper",[Uk,$u]=Fs(g2),[cO,$k]=Uk(g2),zk=e=>{const{__scopePopper:t,children:r}=e,[n,i]=x.useState(null);return s.jsx(cO,{scope:t,anchor:n,onAnchorChange:i,children:r})};zk.displayName=g2;var qk="PopperAnchor",Vk=x.forwardRef((e,t)=>{const{__scopePopper:r,virtualRef:n,...i}=e,a=$k(qk,r),o=x.useRef(null),l=or(t,o),d=x.useRef(null);return x.useEffect(()=>{const f=d.current;d.current=n?.current||o.current,f!==d.current&&a.onAnchorChange(d.current)}),n?null:s.jsx(yt.div,{...i,ref:l})});Vk.displayName=qk;var v2="PopperContent",[uO,dO]=Uk(v2),Wk=x.forwardRef((e,t)=>{const{__scopePopper:r,side:n="bottom",sideOffset:i=0,align:a="center",alignOffset:o=0,arrowPadding:l=0,avoidCollisions:d=!0,collisionBoundary:f=[],collisionPadding:h=0,sticky:p="partial",hideWhenDetached:v=!1,updatePositionStrategy:m="optimized",onPlaced:j,...w}=e,_=$k(v2,r),[S,E]=x.useState(null),k=or(t,X=>E(X)),[C,D]=x.useState(null),M=p2(C),F=M?.width??0,U=M?.height??0,I=n+(a!=="center"?"-"+a:""),K=typeof h=="number"?h:{top:0,right:0,bottom:0,left:0,...h},B=Array.isArray(f)?f:[f],O=B.length>0,z={padding:K,boundary:B.filter(hO),altBoundary:O},{refs:q,floatingStyles:ue,placement:ie,isPositioned:le,middlewareData:G}=ZI({strategy:"fixed",placement:I,whileElementsMounted:(...X)=>zI(...X,{animationFrame:m==="always"}),elements:{reference:_.anchor},middleware:[eO({mainAxis:i+U,alignmentAxis:o}),d&&tO({mainAxis:!0,crossAxis:!1,limiter:p==="partial"?rO():void 0,...z}),d&&nO({...z}),sO({...z,apply:({elements:X,rects:pe,availableWidth:ce,availableHeight:we})=>{const{width:Pe,height:ze}=pe.reference,ve=X.floating.style;ve.setProperty("--radix-popper-available-width",`${ce}px`),ve.setProperty("--radix-popper-available-height",`${we}px`),ve.setProperty("--radix-popper-anchor-width",`${Pe}px`),ve.setProperty("--radix-popper-anchor-height",`${ze}px`)}}),C&&aO({element:C,padding:l}),mO({arrowWidth:F,arrowHeight:U}),v&&iO({strategy:"referenceHidden",...z})]}),[se,xe]=Kk(ie),te=Zn(j);us(()=>{le&&te?.()},[le,te]);const R=G.arrow?.x,V=G.arrow?.y,Q=G.arrow?.centerOffset!==0,[re,Z]=x.useState();return us(()=>{S&&Z(window.getComputedStyle(S).zIndex)},[S]),s.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...ue,transform:le?ue.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:re,"--radix-popper-transform-origin":[G.transformOrigin?.x,G.transformOrigin?.y].join(" "),...G.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:s.jsx(uO,{scope:r,placedSide:se,onArrowChange:D,arrowX:R,arrowY:V,shouldHideArrow:Q,children:s.jsx(yt.div,{"data-side":se,"data-align":xe,...w,ref:k,style:{...w.style,animation:le?void 0:"none"}})})})});Wk.displayName=v2;var Hk="PopperArrow",fO={top:"bottom",right:"left",bottom:"top",left:"right"},Gk=x.forwardRef(function(t,r){const{__scopePopper:n,...i}=t,a=dO(Hk,n),o=fO[a.placedSide];return s.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[o]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:s.jsx(lO,{...i,ref:r,style:{...i.style,display:"block"}})})});Gk.displayName=Hk;function hO(e){return e!==null}var mO=e=>({name:"transformOrigin",options:e,fn(t){const{placement:r,rects:n,middlewareData:i}=t,o=i.arrow?.centerOffset!==0,l=o?0:e.arrowWidth,d=o?0:e.arrowHeight,[f,h]=Kk(r),p={start:"0%",center:"50%",end:"100%"}[h],v=(i.arrow?.x??0)+l/2,m=(i.arrow?.y??0)+d/2;let j="",w="";return f==="bottom"?(j=o?p:`${v}px`,w=`${-d}px`):f==="top"?(j=o?p:`${v}px`,w=`${n.floating.height+d}px`):f==="right"?(j=`${-d}px`,w=o?p:`${m}px`):f==="left"&&(j=`${n.floating.width+d}px`,w=o?p:`${m}px`),{data:{x:j,y:w}}}});function Kk(e){const[t,r="center"]=e.split("-");return[t,r]}var x0=zk,Pp=Vk,w0=Wk,b0=Gk,[_0]=Fs("Tooltip",[$u]),N0=$u(),Yk="TooltipProvider",pO=700,W1="tooltip.open",[gO,y2]=_0(Yk),Qk=e=>{const{__scopeTooltip:t,delayDuration:r=pO,skipDelayDuration:n=300,disableHoverableContent:i=!1,children:a}=e,o=x.useRef(!0),l=x.useRef(!1),d=x.useRef(0);return x.useEffect(()=>{const f=d.current;return()=>window.clearTimeout(f)},[]),s.jsx(gO,{scope:t,isOpenDelayedRef:o,delayDuration:r,onOpen:x.useCallback(()=>{window.clearTimeout(d.current),o.current=!1},[]),onClose:x.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>o.current=!0,n)},[n]),isPointerInTransitRef:l,onPointerInTransitChange:x.useCallback(f=>{l.current=f},[]),disableHoverableContent:i,children:a})};Qk.displayName=Yk;var cp="Tooltip",[vO,j0]=_0(cp),Jk=e=>{const{__scopeTooltip:t,children:r,open:n,defaultOpen:i,onOpenChange:a,disableHoverableContent:o,delayDuration:l}=e,d=y2(cp,e.__scopeTooltip),f=N0(t),[h,p]=x.useState(null),v=Ms(),m=x.useRef(0),j=o??d.disableHoverableContent,w=l??d.delayDuration,_=x.useRef(!1),[S,E]=Yi({prop:n,defaultProp:i??!1,onChange:F=>{F?(d.onOpen(),document.dispatchEvent(new CustomEvent(W1))):d.onClose(),a?.(F)},caller:cp}),k=x.useMemo(()=>S?_.current?"delayed-open":"instant-open":"closed",[S]),C=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,_.current=!1,E(!0)},[E]),D=x.useCallback(()=>{window.clearTimeout(m.current),m.current=0,E(!1)},[E]),M=x.useCallback(()=>{window.clearTimeout(m.current),m.current=window.setTimeout(()=>{_.current=!0,E(!0),m.current=0},w)},[w,E]);return x.useEffect(()=>()=>{m.current&&(window.clearTimeout(m.current),m.current=0)},[]),s.jsx(x0,{...f,children:s.jsx(vO,{scope:t,contentId:v,open:S,stateAttribute:k,trigger:h,onTriggerChange:p,onTriggerEnter:x.useCallback(()=>{d.isOpenDelayedRef.current?M():C()},[d.isOpenDelayedRef,M,C]),onTriggerLeave:x.useCallback(()=>{j?D():(window.clearTimeout(m.current),m.current=0)},[D,j]),onOpen:C,onClose:D,disableHoverableContent:j,children:r})})};Jk.displayName=cp;var H1="TooltipTrigger",Zk=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=j0(H1,r),a=y2(H1,r),o=N0(r),l=x.useRef(null),d=or(t,l,i.onTriggerChange),f=x.useRef(!1),h=x.useRef(!1),p=x.useCallback(()=>f.current=!1,[]);return x.useEffect(()=>()=>document.removeEventListener("pointerup",p),[p]),s.jsx(Pp,{asChild:!0,...o,children:s.jsx(yt.button,{"aria-describedby":i.open?i.contentId:void 0,"data-state":i.stateAttribute,...n,ref:d,onPointerMove:lt(e.onPointerMove,v=>{v.pointerType!=="touch"&&!h.current&&!a.isPointerInTransitRef.current&&(i.onTriggerEnter(),h.current=!0)}),onPointerLeave:lt(e.onPointerLeave,()=>{i.onTriggerLeave(),h.current=!1}),onPointerDown:lt(e.onPointerDown,()=>{i.open&&i.onClose(),f.current=!0,document.addEventListener("pointerup",p,{once:!0})}),onFocus:lt(e.onFocus,()=>{f.current||i.onOpen()}),onBlur:lt(e.onBlur,i.onClose),onClick:lt(e.onClick,i.onClose)})})});Zk.displayName=H1;var yO="TooltipPortal",[RX,xO]=_0(yO,{forceMount:void 0}),Sh="TooltipContent",Xk=x.forwardRef((e,t)=>{const r=xO(Sh,e.__scopeTooltip),{forceMount:n=r.forceMount,side:i="top",...a}=e,o=j0(Sh,e.__scopeTooltip);return s.jsx(Bs,{present:n||o.open,children:o.disableHoverableContent?s.jsx(e3,{side:i,...a,ref:t}):s.jsx(wO,{side:i,...a,ref:t})})}),wO=x.forwardRef((e,t)=>{const r=j0(Sh,e.__scopeTooltip),n=y2(Sh,e.__scopeTooltip),i=x.useRef(null),a=or(t,i),[o,l]=x.useState(null),{trigger:d,onClose:f}=r,h=i.current,{onPointerInTransitChange:p}=n,v=x.useCallback(()=>{l(null),p(!1)},[p]),m=x.useCallback((j,w)=>{const _=j.currentTarget,S={x:j.clientX,y:j.clientY},E=SO(S,_.getBoundingClientRect()),k=kO(S,E),C=CO(w.getBoundingClientRect()),D=AO([...k,...C]);l(D),p(!0)},[p]);return x.useEffect(()=>()=>v(),[v]),x.useEffect(()=>{if(d&&h){const j=_=>m(_,h),w=_=>m(_,d);return d.addEventListener("pointerleave",j),h.addEventListener("pointerleave",w),()=>{d.removeEventListener("pointerleave",j),h.removeEventListener("pointerleave",w)}}},[d,h,m,v]),x.useEffect(()=>{if(o){const j=w=>{const _=w.target,S={x:w.clientX,y:w.clientY},E=d?.contains(_)||h?.contains(_),k=!EO(S,o);E?v():k&&(v(),f())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,h,o,f,v]),s.jsx(e3,{...e,ref:a})}),[bO,_O]=_0(cp,{isInside:!1}),NO=R4("TooltipContent"),e3=x.forwardRef((e,t)=>{const{__scopeTooltip:r,children:n,"aria-label":i,onEscapeKeyDown:a,onPointerDownOutside:o,...l}=e,d=j0(Sh,r),f=N0(r),{onClose:h}=d;return x.useEffect(()=>(document.addEventListener(W1,h),()=>document.removeEventListener(W1,h)),[h]),x.useEffect(()=>{if(d.trigger){const p=v=>{v.target?.contains(d.trigger)&&h()};return window.addEventListener("scroll",p,{capture:!0}),()=>window.removeEventListener("scroll",p,{capture:!0})}},[d.trigger,h]),s.jsx(Xd,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:p=>p.preventDefault(),onDismiss:h,children:s.jsxs(w0,{"data-state":d.stateAttribute,...f,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[s.jsx(NO,{children:n}),s.jsx(bO,{scope:r,isInside:!0,children:s.jsx(V8,{id:d.contentId,role:"tooltip",children:i||n})})]})})});Xk.displayName=Sh;var t3="TooltipArrow",jO=x.forwardRef((e,t)=>{const{__scopeTooltip:r,...n}=e,i=N0(r);return _O(t3,r).isInside?null:s.jsx(b0,{...i,...n,ref:t})});jO.displayName=t3;function SO(e,t){const r=Math.abs(t.top-e.y),n=Math.abs(t.bottom-e.y),i=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(r,n,i,a)){case a:return"left";case i:return"right";case r:return"top";case n:return"bottom";default:throw new Error("unreachable")}}function kO(e,t,r=5){const n=[];switch(t){case"top":n.push({x:e.x-r,y:e.y+r},{x:e.x+r,y:e.y+r});break;case"bottom":n.push({x:e.x-r,y:e.y-r},{x:e.x+r,y:e.y-r});break;case"left":n.push({x:e.x+r,y:e.y-r},{x:e.x+r,y:e.y+r});break;case"right":n.push({x:e.x-r,y:e.y-r},{x:e.x-r,y:e.y+r});break}return n}function CO(e){const{top:t,right:r,bottom:n,left:i}=e;return[{x:i,y:t},{x:r,y:t},{x:r,y:n},{x:i,y:n}]}function EO(e,t){const{x:r,y:n}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],d=t[o],f=l.x,h=l.y,p=d.x,v=d.y;h>n!=v>n&&r<(p-f)*(n-h)/(v-h)+f&&(i=!i)}return i}function AO(e){const t=e.slice();return t.sort((r,n)=>r.x<n.x?-1:r.x>n.x?1:r.y<n.y?-1:r.y>n.y?1:0),PO(t)}function PO(e){if(e.length<=1)return e.slice();const t=[];for(let n=0;n<e.length;n++){const i=e[n];for(;t.length>=2;){const a=t[t.length-1],o=t[t.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))t.pop();else break}t.push(i)}t.pop();const r=[];for(let n=e.length-1;n>=0;n--){const i=e[n];for(;r.length>=2;){const a=r[r.length-1],o=r[r.length-2];if((a.x-o.x)*(i.y-o.y)>=(a.y-o.y)*(i.x-o.x))r.pop();else break}r.push(i)}return r.pop(),t.length===1&&r.length===1&&t[0].x===r[0].x&&t[0].y===r[0].y?t:t.concat(r)}var TO=Qk,RO=Jk,LO=Zk,r3=Xk;const n3=TO,DO=RO,IO=LO,s3=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(r3,{ref:n,sideOffset:t,className:Me("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r}));s3.displayName=r3.displayName;var S0=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},OO={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},MO=class{#e=OO;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}},G1=new MO;function FO(e){setTimeout(e,0)}var k0=typeof window>"u"||"Deno"in globalThis;function _o(){}function BO(e,t){return typeof e=="function"?e(t):e}function UO(e){return typeof e=="number"&&e>=0&&e!==1/0}function $O(e,t){return Math.max(e+(t||0)-Date.now(),0)}function K1(e,t){return typeof e=="function"?e(t):e}function zO(e,t){return typeof e=="function"?e(t):e}function D_(e,t){const{type:r="all",exact:n,fetchStatus:i,predicate:a,queryKey:o,stale:l}=e;if(o){if(n){if(t.queryHash!==x2(o,t.options))return!1}else if(!dp(t.queryKey,o))return!1}if(r!=="all"){const d=t.isActive();if(r==="active"&&!d||r==="inactive"&&d)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||i&&i!==t.state.fetchStatus||a&&!a(t))}function I_(e,t){const{exact:r,status:n,predicate:i,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(up(t.options.mutationKey)!==up(a))return!1}else if(!dp(t.options.mutationKey,a))return!1}return!(n&&t.state.status!==n||i&&!i(t))}function x2(e,t){return(t?.queryKeyHashFn||up)(e)}function up(e){return JSON.stringify(e,(t,r)=>Y1(r)?Object.keys(r).sort().reduce((n,i)=>(n[i]=r[i],n),{}):r)}function dp(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(r=>dp(e[r],t[r])):!1}var qO=Object.prototype.hasOwnProperty;function i3(e,t){if(e===t)return e;const r=O_(e)&&O_(t);if(!r&&!(Y1(e)&&Y1(t)))return t;const i=(r?e:Object.keys(e)).length,a=r?t:Object.keys(t),o=a.length,l=r?new Array(o):{};let d=0;for(let f=0;f<o;f++){const h=r?f:a[f],p=e[h],v=t[h];if(p===v){l[h]=p,(r?f<i:qO.call(e,h))&&d++;continue}if(p===null||v===null||typeof p!="object"||typeof v!="object"){l[h]=v;continue}const m=i3(p,v);l[h]=m,m===p&&d++}return i===o&&d===i?e:l}function O_(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Y1(e){if(!M_(e))return!1;const t=e.constructor;if(t===void 0)return!0;const r=t.prototype;return!(!M_(r)||!r.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function M_(e){return Object.prototype.toString.call(e)==="[object Object]"}function VO(e){return new Promise(t=>{G1.setTimeout(t,e)})}function WO(e,t,r){return typeof r.structuralSharing=="function"?r.structuralSharing(e,t):r.structuralSharing!==!1?i3(e,t):t}function HO(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function GO(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var w2=Symbol();function a3(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===w2?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}var KO=class extends S0{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!k0&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},o3=new KO;function YO(){let e,t;const r=new Promise((i,a)=>{e=i,t=a});r.status="pending",r.catch(()=>{});function n(i){Object.assign(r,i),delete r.resolve,delete r.reject}return r.resolve=i=>{n({status:"fulfilled",value:i}),e(i)},r.reject=i=>{n({status:"rejected",reason:i}),t(i)},r}var QO=FO;function JO(){let e=[],t=0,r=l=>{l()},n=l=>{l()},i=QO;const a=l=>{t?e.push(l):i(()=>{r(l)})},o=()=>{const l=e;e=[],l.length&&i(()=>{n(()=>{l.forEach(d=>{r(d)})})})};return{batch:l=>{let d;t++;try{d=l()}finally{t--,t||o()}return d},batchCalls:l=>(...d)=>{a(()=>{l(...d)})},schedule:a,setNotifyFunction:l=>{r=l},setBatchNotifyFunction:l=>{n=l},setScheduler:l=>{i=l}}}var Ni=JO(),ZO=class extends S0{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!k0&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(r=>{r(e)}))}isOnline(){return this.#e}},Pv=new ZO;function XO(e){return Math.min(1e3*2**e,3e4)}function l3(e){return(e??"online")==="online"?Pv.isOnline():!0}var Q1=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function c3(e){let t=!1,r=0,n;const i=YO(),a=()=>i.status!=="pending",o=w=>{if(!a()){const _=new Q1(w);v(_),e.onCancel?.(_)}},l=()=>{t=!0},d=()=>{t=!1},f=()=>o3.isFocused()&&(e.networkMode==="always"||Pv.isOnline())&&e.canRun(),h=()=>l3(e.networkMode)&&e.canRun(),p=w=>{a()||(n?.(),i.resolve(w))},v=w=>{a()||(n?.(),i.reject(w))},m=()=>new Promise(w=>{n=_=>{(a()||f())&&w(_)},e.onPause?.()}).then(()=>{n=void 0,a()||e.onContinue?.()}),j=()=>{if(a())return;let w;const _=r===0?e.initialPromise:void 0;try{w=_??e.fn()}catch(S){w=Promise.reject(S)}Promise.resolve(w).then(p).catch(S=>{if(a())return;const E=e.retry??(k0?0:3),k=e.retryDelay??XO,C=typeof k=="function"?k(r,S):k,D=E===!0||typeof E=="number"&&r<E||typeof E=="function"&&E(r,S);if(t||!D){v(S);return}r++,e.onFail?.(r,S),VO(C).then(()=>f()?void 0:m()).then(()=>{t?v(S):j()})})};return{promise:i,status:()=>i.status,cancel:o,continue:()=>(n?.(),i),cancelRetry:l,continueRetry:d,canStart:h,start:()=>(h()?j():m().then(j),i)}}var u3=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),UO(this.gcTime)&&(this.#e=G1.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(k0?1/0:300*1e3))}clearGcTimeout(){this.#e&&(G1.clearTimeout(this.#e),this.#e=void 0)}},eM=class extends u3{#e;#t;#r;#s;#n;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#s=e.client,this.#r=this.#s.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=F_(this.options),this.state=e.state??this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){if(this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const t=F_(this.options);t.data!==void 0&&(this.setData(t.data,{updatedAt:t.dataUpdatedAt,manual:!0}),this.#e=t)}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const r=WO(this.state.data,e,this.options);return this.#i({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#i({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(_o).catch(_o):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>zO(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===w2||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>K1(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!$O(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#i({type:"invalidate"})}async fetch(e,t){if(this.state.fetchStatus!=="idle"&&this.#n?.status()!=="rejected"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(d=>d.options.queryFn);l&&this.setOptions(l.options)}const r=new AbortController,n=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,r.signal)})},i=()=>{const l=a3(this.options,t),f=(()=>{const h={client:this.#s,queryKey:this.queryKey,meta:this.meta};return n(h),h})();return this.#o=!1,this.options.persister?this.options.persister(l,f,this):l(f)},o=(()=>{const l={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#s,state:this.state,fetchFn:i};return n(l),l})();this.options.behavior?.onFetch(o,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==o.fetchOptions?.meta)&&this.#i({type:"fetch",meta:o.fetchOptions?.meta}),this.#n=c3({initialPromise:t?.initialPromise,fn:o.fetchFn,onCancel:l=>{l instanceof Q1&&l.revert&&this.setState({...this.#t,fetchStatus:"idle"}),r.abort()},onFail:(l,d)=>{this.#i({type:"failed",failureCount:l,error:d})},onPause:()=>{this.#i({type:"pause"})},onContinue:()=>{this.#i({type:"continue"})},retry:o.options.retry,retryDelay:o.options.retryDelay,networkMode:o.options.networkMode,canRun:()=>!0});try{const l=await this.#n.start();if(l===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),l}catch(l){if(l instanceof Q1){if(l.silent)return this.#n.promise;if(l.revert){if(this.state.data===void 0)throw l;return this.state.data}}throw this.#i({type:"error",error:l}),this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this),l}finally{this.scheduleGc()}}#i(e){const t=r=>{switch(e.type){case"failed":return{...r,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...r,fetchStatus:"paused"};case"continue":return{...r,fetchStatus:"fetching"};case"fetch":return{...r,...tM(r.data,this.options),fetchMeta:e.meta??null};case"success":const n={...r,data:e.data,dataUpdateCount:r.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#t=e.manual?n:void 0,n;case"error":const i=e.error;return{...r,error:i,errorUpdateCount:r.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:r.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error"};case"invalidate":return{...r,isInvalidated:!0};case"setState":return{...r,...e.state}}};this.state=t(this.state),Ni.batch(()=>{this.observers.forEach(r=>{r.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function tM(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:l3(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function F_(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,r=t!==void 0,n=r?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}function B_(e){return{onFetch:(t,r)=>{const n=t.options,i=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],o=t.state.data?.pageParams||[];let l={pages:[],pageParams:[]},d=0;const f=async()=>{let h=!1;const p=j=>{Object.defineProperty(j,"signal",{enumerable:!0,get:()=>(t.signal.aborted?h=!0:t.signal.addEventListener("abort",()=>{h=!0}),t.signal)})},v=a3(t.options,t.fetchOptions),m=async(j,w,_)=>{if(h)return Promise.reject();if(w==null&&j.pages.length)return Promise.resolve(j);const E=(()=>{const M={client:t.client,queryKey:t.queryKey,pageParam:w,direction:_?"backward":"forward",meta:t.options.meta};return p(M),M})(),k=await v(E),{maxPages:C}=t.options,D=_?GO:HO;return{pages:D(j.pages,k,C),pageParams:D(j.pageParams,w,C)}};if(i&&a.length){const j=i==="backward",w=j?rM:U_,_={pages:a,pageParams:o},S=w(n,_);l=await m(_,S,j)}else{const j=e??a.length;do{const w=d===0?o[0]??n.initialPageParam:U_(n,l);if(d>0&&w==null)break;l=await m(l,w),d++}while(d<j)}return l};t.options.persister?t.fetchFn=()=>t.options.persister?.(f,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=f}}}function U_(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function rM(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var nM=class extends u3{#e;#t;#r;#s;constructor(e){super(),this.#e=e.client,this.mutationId=e.mutationId,this.#r=e.mutationCache,this.#t=[],this.state=e.state||sM(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(t=>t!==e),this.scheduleGc(),this.#r.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#r.remove(this))}continue(){return this.#s?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#n({type:"continue"})},r={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#s=c3({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(a,o)=>{this.#n({type:"failed",failureCount:a,error:o})},onPause:()=>{this.#n({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#r.canRun(this)});const n=this.state.status==="pending",i=!this.#s.canStart();try{if(n)t();else{this.#n({type:"pending",variables:e,isPaused:i}),await this.#r.config.onMutate?.(e,this,r);const o=await this.options.onMutate?.(e,r);o!==this.state.context&&this.#n({type:"pending",context:o,variables:e,isPaused:i})}const a=await this.#s.start();return await this.#r.config.onSuccess?.(a,e,this.state.context,this,r),await this.options.onSuccess?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(a,null,e,this.state.context,r),this.#n({type:"success",data:a}),a}catch(a){try{throw await this.#r.config.onError?.(a,e,this.state.context,this,r),await this.options.onError?.(a,e,this.state.context,r),await this.#r.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r),await this.options.onSettled?.(void 0,a,e,this.state.context,r),a}finally{this.#n({type:"error",error:a})}}finally{this.#r.runNext(this)}}#n(e){const t=r=>{switch(e.type){case"failed":return{...r,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...r,isPaused:!0};case"continue":return{...r,isPaused:!1};case"pending":return{...r,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...r,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...r,data:void 0,error:e.error,failureCount:r.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Ni.batch(()=>{this.#t.forEach(r=>{r.onMutationUpdate(e)}),this.#r.notify({mutation:this,type:"updated",action:e})})}};function sM(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var iM=class extends S0{constructor(e={}){super(),this.config=e,this.#e=new Set,this.#t=new Map,this.#r=0}#e;#t;#r;build(e,t,r){const n=new nM({client:e,mutationCache:this,mutationId:++this.#r,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#e.add(e);const t=Rg(e);if(typeof t=="string"){const r=this.#t.get(t);r?r.push(e):this.#t.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#e.delete(e)){const t=Rg(e);if(typeof t=="string"){const r=this.#t.get(t);if(r)if(r.length>1){const n=r.indexOf(e);n!==-1&&r.splice(n,1)}else r[0]===e&&this.#t.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Rg(e);if(typeof t=="string"){const n=this.#t.get(t)?.find(i=>i.state.status==="pending");return!n||n===e}else return!0}runNext(e){const t=Rg(e);return typeof t=="string"?this.#t.get(t)?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Ni.batch(()=>{this.#e.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#e.clear(),this.#t.clear()})}getAll(){return Array.from(this.#e)}find(e){const t={exact:!0,...e};return this.getAll().find(r=>I_(t,r))}findAll(e={}){return this.getAll().filter(t=>I_(e,t))}notify(e){Ni.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Ni.batch(()=>Promise.all(e.map(t=>t.continue().catch(_o))))}};function Rg(e){return e.options.scope?.id}var aM=class extends S0{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,r){const n=t.queryKey,i=t.queryHash??x2(n,t);let a=this.get(i);return a||(a=new eM({client:e,queryKey:n,queryHash:i,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Ni.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(r=>D_(t,r))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(r=>D_(e,r)):t}notify(e){Ni.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Ni.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Ni.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},oM=class{#e;#t;#r;#s;#n;#a;#o;#i;constructor(e={}){this.#e=e.queryCache||new aM,this.#t=e.mutationCache||new iM,this.#r=e.defaultOptions||{},this.#s=new Map,this.#n=new Map,this.#a=0}mount(){this.#a++,this.#a===1&&(this.#o=o3.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=Pv.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#a--,this.#a===0&&(this.#o?.(),this.#o=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#e.build(this,t),n=r.state.data;return n===void 0?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(K1(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:r})=>{const n=r.data;return[t,n]})}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(n.queryHash)?.state.data,o=BO(t,a);if(o!==void 0)return this.#e.build(this,n).setData(o,{...r,manual:!0})}setQueriesData(e,t,r){return Ni.batch(()=>this.#e.findAll(e).map(({queryKey:n})=>[n,this.setQueryData(n,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Ni.batch(()=>{t.findAll(e).forEach(r=>{t.remove(r)})})}resetQueries(e,t){const r=this.#e;return Ni.batch(()=>(r.findAll(e).forEach(n=>{n.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Ni.batch(()=>this.#e.findAll(e).map(i=>i.cancel(r)));return Promise.all(n).then(_o).catch(_o)}invalidateQueries(e,t={}){return Ni.batch(()=>(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Ni.batch(()=>this.#e.findAll(e).filter(i=>!i.isDisabled()&&!i.isStatic()).map(i=>{let a=i.fetch(void 0,r);return r.throwOnError||(a=a.catch(_o)),i.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(n).then(_o)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const r=this.#e.build(this,t);return r.isStaleByTime(K1(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(_o).catch(_o)}fetchInfiniteQuery(e){return e.behavior=B_(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(_o).catch(_o)}ensureInfiniteQueryData(e){return e.behavior=B_(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Pv.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#s.set(up(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#s.values()],r={};return t.forEach(n=>{dp(e,n.queryKey)&&Object.assign(r,n.defaultOptions)}),r}setMutationDefaults(e,t){this.#n.set(up(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#n.values()],r={};return t.forEach(n=>{dp(e,n.mutationKey)&&Object.assign(r,n.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=x2(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===w2&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},lM=x.createContext(void 0),cM=({client:e,children:t})=>(x.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),s.jsx(lM.Provider,{value:e,children:t}));function fp(){return fp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},fp.apply(this,arguments)}var ju;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ju||(ju={}));const $_="popstate";function uM(e){e===void 0&&(e={});function t(n,i){let{pathname:a,search:o,hash:l}=n.location;return J1("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function r(n,i){return typeof i=="string"?i:Tv(i)}return fM(t,r,null,e)}function cs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function d3(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function dM(){return Math.random().toString(36).substr(2,8)}function z_(e,t){return{usr:e.state,key:e.key,idx:t}}function J1(e,t,r,n){return r===void 0&&(r=null),fp({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Hh(t):t,{state:r,key:t&&t.key||n||dM()})}function Tv(e){let{pathname:t="/",search:r="",hash:n=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Hh(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let n=e.indexOf("?");n>=0&&(t.search=e.substr(n),e=e.substr(0,n)),e&&(t.pathname=e)}return t}function fM(e,t,r,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=ju.Pop,d=null,f=h();f==null&&(f=0,o.replaceState(fp({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=ju.Pop;let _=h(),S=_==null?null:_-f;f=_,d&&d({action:l,location:w.location,delta:S})}function v(_,S){l=ju.Push;let E=J1(w.location,_,S);f=h()+1;let k=z_(E,f),C=w.createHref(E);try{o.pushState(k,"",C)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;i.location.assign(C)}a&&d&&d({action:l,location:w.location,delta:1})}function m(_,S){l=ju.Replace;let E=J1(w.location,_,S);f=h();let k=z_(E,f),C=w.createHref(E);o.replaceState(k,"",C),a&&d&&d({action:l,location:w.location,delta:0})}function j(_){let S=i.location.origin!=="null"?i.location.origin:i.location.href,E=typeof _=="string"?_:Tv(_);return E=E.replace(/ $/,"%20"),cs(S,"No window.location.(origin|href) available to create URL for href: "+E),new URL(E,S)}let w={get action(){return l},get location(){return e(i,o)},listen(_){if(d)throw new Error("A history only accepts one active listener");return i.addEventListener($_,p),d=_,()=>{i.removeEventListener($_,p),d=null}},createHref(_){return t(i,_)},createURL:j,encodeLocation(_){let S=j(_);return{pathname:S.pathname,search:S.search,hash:S.hash}},push:v,replace:m,go(_){return o.go(_)}};return w}var q_;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(q_||(q_={}));function hM(e,t,r){return r===void 0&&(r="/"),mM(e,t,r)}function mM(e,t,r,n){let i=typeof t=="string"?Hh(t):t,a=b2(i.pathname||"/",r);if(a==null)return null;let o=f3(e);pM(o);let l=null;for(let d=0;l==null&&d<o.length;++d){let f=CM(a);l=jM(o[d],f)}return l}function f3(e,t,r,n){t===void 0&&(t=[]),r===void 0&&(r=[]),n===void 0&&(n="");let i=(a,o,l)=>{let d={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};d.relativePath.startsWith("/")&&(cs(d.relativePath.startsWith(n),'Absolute route path "'+d.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),d.relativePath=d.relativePath.slice(n.length));let f=Cu([n,d.relativePath]),h=r.concat(d);a.children&&a.children.length>0&&(cs(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),f3(a.children,t,h,f)),!(a.path==null&&!a.index)&&t.push({path:f,score:_M(f,a.index),routesMeta:h})};return e.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let d of h3(a.path))i(a,o,d)}),t}function h3(e){let t=e.split("/");if(t.length===0)return[];let[r,...n]=t,i=r.endsWith("?"),a=r.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=h3(n.join("/")),l=[];return l.push(...o.map(d=>d===""?a:[a,d].join("/"))),i&&l.push(...o),l.map(d=>e.startsWith("/")&&d===""?"/":d)}function pM(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:NM(t.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gM=/^:[\w-]+$/,vM=3,yM=2,xM=1,wM=10,bM=-2,V_=e=>e==="*";function _M(e,t){let r=e.split("/"),n=r.length;return r.some(V_)&&(n+=bM),t&&(n+=yM),r.filter(i=>!V_(i)).reduce((i,a)=>i+(gM.test(a)?vM:a===""?xM:wM),n)}function NM(e,t){return e.length===t.length&&e.slice(0,-1).every((n,i)=>n===t[i])?e[e.length-1]-t[t.length-1]:0}function jM(e,t,r){let{routesMeta:n}=e,i={},a="/",o=[];for(let l=0;l<n.length;++l){let d=n[l],f=l===n.length-1,h=a==="/"?t:t.slice(a.length)||"/",p=SM({path:d.relativePath,caseSensitive:d.caseSensitive,end:f},h),v=d.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Cu([a,p.pathname]),pathnameBase:TM(Cu([a,p.pathnameBase])),route:v}),p.pathnameBase!=="/"&&(a=Cu([a,p.pathnameBase]))}return o}function SM(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,n]=kM(e.path,e.caseSensitive,e.end),i=t.match(r);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((f,h,p)=>{let{paramName:v,isOptional:m}=h;if(v==="*"){let w=l[p]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const j=l[p];return m&&!j?f[v]=void 0:f[v]=(j||"").replace(/%2F/g,"/"),f},{}),pathname:a,pathnameBase:o,pattern:e}}function kM(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),d3(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let n=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,d)=>(n.push({paramName:l,isOptional:d!=null}),d?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),n]}function CM(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return d3(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function b2(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,n=e.charAt(r);return n&&n!=="/"?null:e.slice(r)||"/"}function EM(e,t){t===void 0&&(t="/");let{pathname:r,search:n="",hash:i=""}=typeof e=="string"?Hh(e):e;return{pathname:r?r.startsWith("/")?r:AM(r,t):t,search:RM(n),hash:LM(i)}}function AM(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?r.length>1&&r.pop():i!=="."&&r.push(i)}),r.length>1?r.join("/"):"/"}function ax(e,t,r,n){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PM(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function _2(e,t){let r=PM(e);return t?r.map((n,i)=>i===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function N2(e,t,r,n){n===void 0&&(n=!1);let i;typeof e=="string"?i=Hh(e):(i=fp({},e),cs(!i.pathname||!i.pathname.includes("?"),ax("?","pathname","search",i)),cs(!i.pathname||!i.pathname.includes("#"),ax("#","pathname","hash",i)),cs(!i.search||!i.search.includes("#"),ax("#","search","hash",i)));let a=e===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=r;else{let p=t.length-1;if(!n&&o.startsWith("..")){let v=o.split("/");for(;v[0]==="..";)v.shift(),p-=1;i.pathname=v.join("/")}l=p>=0?t[p]:"/"}let d=EM(i,l),f=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&r.endsWith("/");return!d.pathname.endsWith("/")&&(f||h)&&(d.pathname+="/"),d}const Cu=e=>e.join("/").replace(/\/\/+/g,"/"),TM=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),RM=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,LM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function DM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const m3=["post","put","patch","delete"];new Set(m3);const IM=["get",...m3];new Set(IM);function hp(){return hp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},hp.apply(this,arguments)}const j2=x.createContext(null),OM=x.createContext(null),zu=x.createContext(null),C0=x.createContext(null),jl=x.createContext({outlet:null,matches:[],isDataRoute:!1}),p3=x.createContext(null);function MM(e,t){let{relative:r}=t===void 0?{}:t;Gh()||cs(!1);let{basename:n,navigator:i}=x.useContext(zu),{hash:a,pathname:o,search:l}=v3(e,{relative:r}),d=o;return n!=="/"&&(d=o==="/"?n:Cu([n,o])),i.createHref({pathname:d,search:l,hash:a})}function Gh(){return x.useContext(C0)!=null}function tf(){return Gh()||cs(!1),x.useContext(C0).location}function g3(e){x.useContext(zu).static||x.useLayoutEffect(e)}function E0(){let{isDataRoute:e}=x.useContext(jl);return e?XM():FM()}function FM(){Gh()||cs(!1);let e=x.useContext(j2),{basename:t,future:r,navigator:n}=x.useContext(zu),{matches:i}=x.useContext(jl),{pathname:a}=tf(),o=JSON.stringify(_2(i,r.v7_relativeSplatPath)),l=x.useRef(!1);return g3(()=>{l.current=!0}),x.useCallback(function(f,h){if(h===void 0&&(h={}),!l.current)return;if(typeof f=="number"){n.go(f);return}let p=N2(f,JSON.parse(o),a,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Cu([t,p.pathname])),(h.replace?n.replace:n.push)(p,h.state,h)},[t,n,o,a,e])}const BM=x.createContext(null);function UM(e){let t=x.useContext(jl).outlet;return t&&x.createElement(BM.Provider,{value:e},t)}function $M(){let{matches:e}=x.useContext(jl),t=e[e.length-1];return t?t.params:{}}function v3(e,t){let{relative:r}=t===void 0?{}:t,{future:n}=x.useContext(zu),{matches:i}=x.useContext(jl),{pathname:a}=tf(),o=JSON.stringify(_2(i,n.v7_relativeSplatPath));return x.useMemo(()=>N2(e,JSON.parse(o),a,r==="path"),[e,o,a,r])}function zM(e,t){return qM(e,t)}function qM(e,t,r,n){Gh()||cs(!1);let{navigator:i}=x.useContext(zu),{matches:a}=x.useContext(jl),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let d=o?o.pathnameBase:"/";o&&o.route;let f=tf(),h;if(t){var p;let _=typeof t=="string"?Hh(t):t;d==="/"||(p=_.pathname)!=null&&p.startsWith(d)||cs(!1),h=_}else h=f;let v=h.pathname||"/",m=v;if(d!=="/"){let _=d.replace(/^\//,"").split("/");m="/"+v.replace(/^\//,"").split("/").slice(_.length).join("/")}let j=hM(e,{pathname:m}),w=KM(j&&j.map(_=>Object.assign({},_,{params:Object.assign({},l,_.params),pathname:Cu([d,i.encodeLocation?i.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?d:Cu([d,i.encodeLocation?i.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),a,r,n);return t&&w?x.createElement(C0.Provider,{value:{location:hp({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:ju.Pop}},w):w}function VM(){let e=ZM(),t=DM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},t),r?x.createElement("pre",{style:i},r):null,null)}const WM=x.createElement(VM,null);class HM extends x.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error!==void 0?x.createElement(jl.Provider,{value:this.props.routeContext},x.createElement(p3.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GM(e){let{routeContext:t,match:r,children:n}=e,i=x.useContext(j2);return i&&i.static&&i.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=r.route.id),x.createElement(jl.Provider,{value:t},n)}function KM(e,t,r,n){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),n===void 0&&(n=null),e==null){var a;if(!r)return null;if(r.errors)e=r.matches;else if((a=n)!=null&&a.v7_partialHydration&&t.length===0&&!r.initialized&&r.matches.length>0)e=r.matches;else return null}let o=e,l=(i=r)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||cs(!1),o=o.slice(0,Math.min(o.length,h+1))}let d=!1,f=-1;if(r&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:v,errors:m}=r,j=p.route.loader&&v[p.route.id]===void 0&&(!m||m[p.route.id]===void 0);if(p.route.lazy||j){d=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,p,v)=>{let m,j=!1,w=null,_=null;r&&(m=l&&p.route.id?l[p.route.id]:void 0,w=p.route.errorElement||WM,d&&(f<0&&v===0?(e7("route-fallback"),j=!0,_=null):f===v&&(j=!0,_=p.route.hydrateFallbackElement||null)));let S=t.concat(o.slice(0,v+1)),E=()=>{let k;return m?k=w:j?k=_:p.route.Component?k=x.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,x.createElement(GM,{match:p,routeContext:{outlet:h,matches:S,isDataRoute:r!=null},children:k})};return r&&(p.route.ErrorBoundary||p.route.errorElement||v===0)?x.createElement(HM,{location:r.location,revalidation:r.revalidation,component:w,error:m,children:E(),routeContext:{outlet:null,matches:S,isDataRoute:!0}}):E()},null)}var y3=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(y3||{}),x3=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(x3||{});function YM(e){let t=x.useContext(j2);return t||cs(!1),t}function QM(e){let t=x.useContext(OM);return t||cs(!1),t}function JM(e){let t=x.useContext(jl);return t||cs(!1),t}function w3(e){let t=JM(),r=t.matches[t.matches.length-1];return r.route.id||cs(!1),r.route.id}function ZM(){var e;let t=x.useContext(p3),r=QM(),n=w3();return t!==void 0?t:(e=r.errors)==null?void 0:e[n]}function XM(){let{router:e}=YM(y3.UseNavigateStable),t=w3(x3.UseNavigateStable),r=x.useRef(!1);return g3(()=>{r.current=!0}),x.useCallback(function(i,a){a===void 0&&(a={}),r.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,hp({fromRouteId:t},a)))},[e,t])}const W_={};function e7(e,t,r){W_[e]||(W_[e]=!0)}function t7(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function b3(e){let{to:t,replace:r,state:n,relative:i}=e;Gh()||cs(!1);let{future:a,static:o}=x.useContext(zu),{matches:l}=x.useContext(jl),{pathname:d}=tf(),f=E0(),h=N2(t,_2(l,a.v7_relativeSplatPath),d,i==="path"),p=JSON.stringify(h);return x.useEffect(()=>f(JSON.parse(p),{replace:r,state:n,relative:i}),[f,p,i,r,n]),null}function r7(e){return UM(e.context)}function Ws(e){cs(!1)}function n7(e){let{basename:t="/",children:r=null,location:n,navigationType:i=ju.Pop,navigator:a,static:o=!1,future:l}=e;Gh()&&cs(!1);let d=t.replace(/^\/*/,"/"),f=x.useMemo(()=>({basename:d,navigator:a,static:o,future:hp({v7_relativeSplatPath:!1},l)}),[d,l,a,o]);typeof n=="string"&&(n=Hh(n));let{pathname:h="/",search:p="",hash:v="",state:m=null,key:j="default"}=n,w=x.useMemo(()=>{let _=b2(h,d);return _==null?null:{location:{pathname:_,search:p,hash:v,state:m,key:j},navigationType:i}},[d,h,p,v,m,j,i]);return w==null?null:x.createElement(zu.Provider,{value:f},x.createElement(C0.Provider,{children:r,value:w}))}function s7(e){let{children:t,location:r}=e;return zM(Z1(t),r)}new Promise(()=>{});function Z1(e,t){t===void 0&&(t=[]);let r=[];return x.Children.forEach(e,(n,i)=>{if(!x.isValidElement(n))return;let a=[...t,i];if(n.type===x.Fragment){r.push.apply(r,Z1(n.props.children,a));return}n.type!==Ws&&cs(!1),!n.props.index||!n.props.children||cs(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Z1(n.props.children,a)),r.push(o)}),r}function X1(){return X1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},X1.apply(this,arguments)}function i7(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,a;for(a=0;a<n.length;a++)i=n[a],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function a7(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function o7(e,t){return e.button===0&&(!t||t==="_self")&&!a7(e)}const l7=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],c7="6";try{window.__reactRouterVersion=c7}catch{}const u7="startTransition",H_=Zw[u7];function d7(e){let{basename:t,children:r,future:n,window:i}=e,a=x.useRef();a.current==null&&(a.current=uM({window:i,v5Compat:!0}));let o=a.current,[l,d]=x.useState({action:o.action,location:o.location}),{v7_startTransition:f}=n||{},h=x.useCallback(p=>{f&&H_?H_(()=>d(p)):d(p)},[d,f]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.useEffect(()=>t7(n),[n]),x.createElement(n7,{basename:t,children:r,location:l.location,navigationType:l.action,navigator:o,future:n})}const f7=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",h7=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,G_=x.forwardRef(function(t,r){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:d,to:f,preventScrollReset:h,viewTransition:p}=t,v=i7(t,l7),{basename:m}=x.useContext(zu),j,w=!1;if(typeof f=="string"&&h7.test(f)&&(j=f,f7))try{let k=new URL(window.location.href),C=f.startsWith("//")?new URL(k.protocol+f):new URL(f),D=b2(C.pathname,m);C.origin===k.origin&&D!=null?f=D+C.search+C.hash:w=!0}catch{}let _=MM(f,{relative:i}),S=m7(f,{replace:o,state:l,target:d,preventScrollReset:h,relative:i,viewTransition:p});function E(k){n&&n(k),k.defaultPrevented||S(k)}return x.createElement("a",X1({},v,{href:j||_,onClick:w||a?n:E,ref:r,target:d}))});var K_;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(K_||(K_={}));var Y_;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Y_||(Y_={}));function m7(e,t){let{target:r,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=t===void 0?{}:t,d=E0(),f=tf(),h=v3(e,{relative:o});return x.useCallback(p=>{if(o7(p,r)){p.preventDefault();let v=n!==void 0?n:Tv(f)===Tv(h);d(e,{replace:v,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[f,d,h,n,i,r,e,a,o,l])}const mp=zh("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-all duration-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary-light shadow-card hover:shadow-card-hover",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary-light shadow-card hover:shadow-card-hover",warning:"bg-warning text-warning-foreground hover:bg-warning-light shadow-card hover:shadow-card-hover",success:"bg-success text-success-foreground hover:bg-success/90 shadow-card hover:shadow-card-hover",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90 shadow-card hover:shadow-card-hover",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline",hero:"bg-gradient-hero text-primary-foreground hover:opacity-90 shadow-card-hover font-semibold",gradient:"bg-gradient-primary text-primary-foreground hover:opacity-90 shadow-card hover:shadow-card-hover"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),ke=x.forwardRef(({className:e,variant:t,size:r,asChild:n=!1,...i},a)=>{const o=n?P4:"button";return s.jsx(o,{className:Me(mp({variant:t,size:r,className:e})),ref:a,...i})});ke.displayName="Button";var p7=x.createContext(void 0);function rf(e){const t=x.useContext(p7);return e||t||"ltr"}var ox=0;function A0(){x.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??Q_()),document.body.insertAdjacentElement("beforeend",e[1]??Q_()),ox++,()=>{ox===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),ox--}},[])}function Q_(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var lx="focusScope.autoFocusOnMount",cx="focusScope.autoFocusOnUnmount",J_={bubbles:!1,cancelable:!0},g7="FocusScope",Tp=x.forwardRef((e,t)=>{const{loop:r=!1,trapped:n=!1,onMountAutoFocus:i,onUnmountAutoFocus:a,...o}=e,[l,d]=x.useState(null),f=Zn(i),h=Zn(a),p=x.useRef(null),v=or(t,w=>d(w)),m=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(n){let w=function(k){if(m.paused||!l)return;const C=k.target;l.contains(C)?p.current=C:wu(p.current,{select:!0})},_=function(k){if(m.paused||!l)return;const C=k.relatedTarget;C!==null&&(l.contains(C)||wu(p.current,{select:!0}))},S=function(k){if(document.activeElement===document.body)for(const D of k)D.removedNodes.length>0&&wu(l)};document.addEventListener("focusin",w),document.addEventListener("focusout",_);const E=new MutationObserver(S);return l&&E.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",w),document.removeEventListener("focusout",_),E.disconnect()}}},[n,l,m.paused]),x.useEffect(()=>{if(l){X_.add(m);const w=document.activeElement;if(!l.contains(w)){const S=new CustomEvent(lx,J_);l.addEventListener(lx,f),l.dispatchEvent(S),S.defaultPrevented||(v7(_7(_3(l)),{select:!0}),document.activeElement===w&&wu(l))}return()=>{l.removeEventListener(lx,f),setTimeout(()=>{const S=new CustomEvent(cx,J_);l.addEventListener(cx,h),l.dispatchEvent(S),S.defaultPrevented||wu(w??document.body,{select:!0}),l.removeEventListener(cx,h),X_.remove(m)},0)}}},[l,f,h,m]);const j=x.useCallback(w=>{if(!r&&!n||m.paused)return;const _=w.key==="Tab"&&!w.altKey&&!w.ctrlKey&&!w.metaKey,S=document.activeElement;if(_&&S){const E=w.currentTarget,[k,C]=y7(E);k&&C?!w.shiftKey&&S===C?(w.preventDefault(),r&&wu(k,{select:!0})):w.shiftKey&&S===k&&(w.preventDefault(),r&&wu(C,{select:!0})):S===E&&w.preventDefault()}},[r,n,m.paused]);return s.jsx(yt.div,{tabIndex:-1,...o,ref:v,onKeyDown:j})});Tp.displayName=g7;function v7(e,{select:t=!1}={}){const r=document.activeElement;for(const n of e)if(wu(n,{select:t}),document.activeElement!==r)return}function y7(e){const t=_3(e),r=Z_(t,e),n=Z_(t.reverse(),e);return[r,n]}function _3(e){const t=[],r=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:n=>{const i=n.tagName==="INPUT"&&n.type==="hidden";return n.disabled||n.hidden||i?NodeFilter.FILTER_SKIP:n.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function Z_(e,t){for(const r of e)if(!x7(r,{upTo:t}))return r}function x7(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function w7(e){return e instanceof HTMLInputElement&&"select"in e}function wu(e,{select:t=!1}={}){if(e&&e.focus){const r=document.activeElement;e.focus({preventScroll:!0}),e!==r&&w7(e)&&t&&e.select()}}var X_=b7();function b7(){let e=[];return{add(t){const r=e[0];t!==r&&r?.pause(),e=eN(e,t),e.unshift(t)},remove(t){e=eN(e,t),e[0]?.resume()}}}function eN(e,t){const r=[...e],n=r.indexOf(t);return n!==-1&&r.splice(n,1),r}function _7(e){return e.filter(t=>t.tagName!=="A")}var ux="rovingFocusGroup.onEntryFocus",N7={bubbles:!1,cancelable:!0},Rp="RovingFocusGroup",[ew,N3,j7]=Cp(Rp),[S7,Kh]=Fs(Rp,[j7]),[k7,C7]=S7(Rp),j3=x.forwardRef((e,t)=>s.jsx(ew.Provider,{scope:e.__scopeRovingFocusGroup,children:s.jsx(ew.Slot,{scope:e.__scopeRovingFocusGroup,children:s.jsx(E7,{...e,ref:t})})}));j3.displayName=Rp;var E7=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,orientation:n,loop:i=!1,dir:a,currentTabStopId:o,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:d,onEntryFocus:f,preventScrollOnEntryFocus:h=!1,...p}=e,v=x.useRef(null),m=or(t,v),j=rf(a),[w,_]=Yi({prop:o,defaultProp:l??null,onChange:d,caller:Rp}),[S,E]=x.useState(!1),k=Zn(f),C=N3(r),D=x.useRef(!1),[M,F]=x.useState(0);return x.useEffect(()=>{const U=v.current;if(U)return U.addEventListener(ux,k),()=>U.removeEventListener(ux,k)},[k]),s.jsx(k7,{scope:r,orientation:n,dir:j,loop:i,currentTabStopId:w,onItemFocus:x.useCallback(U=>_(U),[_]),onItemShiftTab:x.useCallback(()=>E(!0),[]),onFocusableItemAdd:x.useCallback(()=>F(U=>U+1),[]),onFocusableItemRemove:x.useCallback(()=>F(U=>U-1),[]),children:s.jsx(yt.div,{tabIndex:S||M===0?-1:0,"data-orientation":n,...p,ref:m,style:{outline:"none",...e.style},onMouseDown:lt(e.onMouseDown,()=>{D.current=!0}),onFocus:lt(e.onFocus,U=>{const I=!D.current;if(U.target===U.currentTarget&&I&&!S){const K=new CustomEvent(ux,N7);if(U.currentTarget.dispatchEvent(K),!K.defaultPrevented){const B=C().filter(ie=>ie.focusable),O=B.find(ie=>ie.active),z=B.find(ie=>ie.id===w),ue=[O,z,...B].filter(Boolean).map(ie=>ie.ref.current);C3(ue,h)}}D.current=!1}),onBlur:lt(e.onBlur,()=>E(!1))})})}),S3="RovingFocusGroupItem",k3=x.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:r,focusable:n=!0,active:i=!1,tabStopId:a,children:o,...l}=e,d=Ms(),f=a||d,h=C7(S3,r),p=h.currentTabStopId===f,v=N3(r),{onFocusableItemAdd:m,onFocusableItemRemove:j,currentTabStopId:w}=h;return x.useEffect(()=>{if(n)return m(),()=>j()},[n,m,j]),s.jsx(ew.ItemSlot,{scope:r,id:f,focusable:n,active:i,children:s.jsx(yt.span,{tabIndex:p?0:-1,"data-orientation":h.orientation,...l,ref:t,onMouseDown:lt(e.onMouseDown,_=>{n?h.onItemFocus(f):_.preventDefault()}),onFocus:lt(e.onFocus,()=>h.onItemFocus(f)),onKeyDown:lt(e.onKeyDown,_=>{if(_.key==="Tab"&&_.shiftKey){h.onItemShiftTab();return}if(_.target!==_.currentTarget)return;const S=T7(_,h.orientation,h.dir);if(S!==void 0){if(_.metaKey||_.ctrlKey||_.altKey||_.shiftKey)return;_.preventDefault();let k=v().filter(C=>C.focusable).map(C=>C.ref.current);if(S==="last")k.reverse();else if(S==="prev"||S==="next"){S==="prev"&&k.reverse();const C=k.indexOf(_.currentTarget);k=h.loop?R7(k,C+1):k.slice(C+1)}setTimeout(()=>C3(k))}}),children:typeof o=="function"?o({isCurrentTabStop:p,hasTabStop:w!=null}):o})})});k3.displayName=S3;var A7={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function P7(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function T7(e,t,r){const n=P7(e.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(n))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(n)))return A7[n]}function C3(e,t=!1){const r=document.activeElement;for(const n of e)if(n===r||(n.focus({preventScroll:t}),document.activeElement!==r))return}function R7(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var S2=j3,k2=k3,L7=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Uf=new WeakMap,Lg=new WeakMap,Dg={},dx=0,E3=function(e){return e&&(e.host||E3(e.parentNode))},D7=function(e,t){return t.map(function(r){if(e.contains(r))return r;var n=E3(r);return n&&e.contains(n)?n:(console.error("aria-hidden",r,"in not contained inside",e,". Doing nothing"),null)}).filter(function(r){return!!r})},I7=function(e,t,r,n){var i=D7(t,Array.isArray(e)?e:[e]);Dg[r]||(Dg[r]=new WeakMap);var a=Dg[r],o=[],l=new Set,d=new Set(i),f=function(p){!p||l.has(p)||(l.add(p),f(p.parentNode))};i.forEach(f);var h=function(p){!p||d.has(p)||Array.prototype.forEach.call(p.children,function(v){if(l.has(v))h(v);else try{var m=v.getAttribute(n),j=m!==null&&m!=="false",w=(Uf.get(v)||0)+1,_=(a.get(v)||0)+1;Uf.set(v,w),a.set(v,_),o.push(v),w===1&&j&&Lg.set(v,!0),_===1&&v.setAttribute(r,"true"),j||v.setAttribute(n,"true")}catch(S){console.error("aria-hidden: cannot operate on ",v,S)}})};return h(t),l.clear(),dx++,function(){o.forEach(function(p){var v=Uf.get(p)-1,m=a.get(p)-1;Uf.set(p,v),a.set(p,m),v||(Lg.has(p)||p.removeAttribute(n),Lg.delete(p)),m||p.removeAttribute(r)}),dx--,dx||(Uf=new WeakMap,Uf=new WeakMap,Lg=new WeakMap,Dg={})}},P0=function(e,t,r){r===void 0&&(r="data-aria-hidden");var n=Array.from(Array.isArray(e)?e:[e]),i=L7(e);return i?(n.push.apply(n,Array.from(i.querySelectorAll("[aria-live], script"))),I7(n,i,r,"aria-hidden")):function(){return null}},tw=function(e,t){return tw=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(r[i]=n[i])},tw(e,t)};function A3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");tw(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Ga=function(){return Ga=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},Ga.apply(this,arguments)};function qu(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function P3(e,t,r,n){var i=arguments.length,a=i<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(e,t,r,n);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,r,a):o(t,r))||a);return i>3&&a&&Object.defineProperty(t,r,a),a}function T3(e,t){return function(r,n){t(r,n,e)}}function R3(e,t,r,n,i,a){function o(S){if(S!==void 0&&typeof S!="function")throw new TypeError("Function expected");return S}for(var l=n.kind,d=l==="getter"?"get":l==="setter"?"set":"value",f=!t&&e?n.static?e:e.prototype:null,h=t||(f?Object.getOwnPropertyDescriptor(f,n.name):{}),p,v=!1,m=r.length-1;m>=0;m--){var j={};for(var w in n)j[w]=w==="access"?{}:n[w];for(var w in n.access)j.access[w]=n.access[w];j.addInitializer=function(S){if(v)throw new TypeError("Cannot add initializers after decoration has completed");a.push(o(S||null))};var _=(0,r[m])(l==="accessor"?{get:h.get,set:h.set}:h[d],j);if(l==="accessor"){if(_===void 0)continue;if(_===null||typeof _!="object")throw new TypeError("Object expected");(p=o(_.get))&&(h.get=p),(p=o(_.set))&&(h.set=p),(p=o(_.init))&&i.unshift(p)}else(p=o(_))&&(l==="field"?i.unshift(p):h[d]=p)}f&&Object.defineProperty(f,n.name,h),v=!0}function L3(e,t,r){for(var n=arguments.length>2,i=0;i<t.length;i++)r=n?t[i].call(e,r):t[i].call(e);return n?r:void 0}function D3(e){return typeof e=="symbol"?e:"".concat(e)}function I3(e,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function O3(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ut(e,t,r,n){function i(a){return a instanceof r?a:new r(function(o){o(a)})}return new(r||(r=Promise))(function(a,o){function l(h){try{f(n.next(h))}catch(p){o(p)}}function d(h){try{f(n.throw(h))}catch(p){o(p)}}function f(h){h.done?a(h.value):i(h.value).then(l,d)}f((n=n.apply(e,t||[])).next())})}function M3(e,t){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,o=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return o.next=l(0),o.throw=l(1),o.return=l(2),typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(f){return function(h){return d([f,h])}}function d(f){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,f[0]&&(r=0)),r;)try{if(n=1,i&&(a=f[0]&2?i.return:f[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,f[1])).done)return a;switch(i=0,a&&(f=[f[0]&2,a.value]),f[0]){case 0:case 1:a=f;break;case 4:return r.label++,{value:f[1],done:!1};case 5:r.label++,i=f[1],f=[0];continue;case 7:f=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(f[0]===6||f[0]===2)){r=0;continue}if(f[0]===3&&(!a||f[1]>a[0]&&f[1]<a[3])){r.label=f[1];break}if(f[0]===6&&r.label<a[1]){r.label=a[1],a=f;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(f);break}a[2]&&r.ops.pop(),r.trys.pop();continue}f=t.call(e,r)}catch(h){f=[6,h],i=0}finally{n=a=0}if(f[0]&5)throw f[1];return{value:f[0]?f[1]:void 0,done:!0}}}var T0=Object.create?(function(e,t,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);(!i||("get"in i?!t.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}):(function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]});function F3(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&T0(t,e,r)}function Rv(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function C2(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),i,a=[],o;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return a}function B3(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(C2(arguments[t]));return e}function U3(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),i=0,t=0;t<r;t++)for(var a=arguments[t],o=0,l=a.length;o<l;o++,i++)n[i]=a[o];return n}function E2(e,t,r){if(r||arguments.length===2)for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function kh(e){return this instanceof kh?(this.v=e,this):new kh(e)}function $3(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),l("next"),l("throw"),l("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(m){return function(j){return Promise.resolve(j).then(m,p)}}function l(m,j){n[m]&&(i[m]=function(w){return new Promise(function(_,S){a.push([m,w,_,S])>1||d(m,w)})},j&&(i[m]=j(i[m])))}function d(m,j){try{f(n[m](j))}catch(w){v(a[0][3],w)}}function f(m){m.value instanceof kh?Promise.resolve(m.value.v).then(h,p):v(a[0][2],m)}function h(m){d("next",m)}function p(m){d("throw",m)}function v(m,j){m(j),a.shift(),a.length&&d(a[0][0],a[0][1])}}function z3(e){var t,r;return t={},n("next"),n("throw",function(i){throw i}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(i,a){t[i]=e[i]?function(o){return(r=!r)?{value:kh(e[i](o)),done:!1}:a?a(o):o}:a}}function q3(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Rv=="function"?Rv(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=e[a]&&function(o){return new Promise(function(l,d){o=e[a](o),i(l,d,o.done,o.value)})}}function i(a,o,l,d){Promise.resolve(d).then(function(f){a({value:f,done:l})},o)}}function V3(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var O7=Object.create?(function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}):function(e,t){e.default=t},rw=function(e){return rw=Object.getOwnPropertyNames||function(t){var r=[];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[r.length]=n);return r},rw(e)};function W3(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r=rw(e),n=0;n<r.length;n++)r[n]!=="default"&&T0(t,e,r[n]);return O7(t,e),t}function H3(e){return e&&e.__esModule?e:{default:e}}function G3(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)}function K3(e,t,r,n,i){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?i.call(e,r):i?i.value=r:t.set(e,r),r}function Y3(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}function Q3(e,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var n,i;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(n===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(i=n)}if(typeof n!="function")throw new TypeError("Object not disposable.");i&&(n=function(){try{i.call(this)}catch(a){return Promise.reject(a)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var M7=typeof SuppressedError=="function"?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function J3(e){function t(a){e.error=e.hasError?new M7(a,e.error,"An error was suppressed during disposal."):a,e.hasError=!0}var r,n=0;function i(){for(;r=e.stack.pop();)try{if(!r.async&&n===1)return n=0,e.stack.push(r),Promise.resolve().then(i);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(i,function(o){return t(o),i()})}else n|=1}catch(o){t(o)}if(n===1)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}return i()}function Z3(e,t){return typeof e=="string"&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,n,i,a,o){return n?t?".jsx":".js":i&&(!a||!o)?r:i+a+"."+o.toLowerCase()+"js"}):e}const F7={__extends:A3,__assign:Ga,__rest:qu,__decorate:P3,__param:T3,__esDecorate:R3,__runInitializers:L3,__propKey:D3,__setFunctionName:I3,__metadata:O3,__awaiter:Ut,__generator:M3,__createBinding:T0,__exportStar:F3,__values:Rv,__read:C2,__spread:B3,__spreadArrays:U3,__spreadArray:E2,__await:kh,__asyncGenerator:$3,__asyncDelegator:z3,__asyncValues:q3,__makeTemplateObject:V3,__importStar:W3,__importDefault:H3,__classPrivateFieldGet:G3,__classPrivateFieldSet:K3,__classPrivateFieldIn:Y3,__addDisposableResource:Q3,__disposeResources:J3,__rewriteRelativeImportExtension:Z3},B7=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:Q3,get __assign(){return Ga},__asyncDelegator:z3,__asyncGenerator:$3,__asyncValues:q3,__await:kh,__awaiter:Ut,__classPrivateFieldGet:G3,__classPrivateFieldIn:Y3,__classPrivateFieldSet:K3,__createBinding:T0,__decorate:P3,__disposeResources:J3,__esDecorate:R3,__exportStar:F3,__extends:A3,__generator:M3,__importDefault:H3,__importStar:W3,__makeTemplateObject:V3,__metadata:O3,__param:T3,__propKey:D3,__read:C2,__rest:qu,__rewriteRelativeImportExtension:Z3,__runInitializers:L3,__setFunctionName:I3,__spread:B3,__spreadArray:E2,__spreadArrays:U3,__values:Rv,default:F7},Symbol.toStringTag,{value:"Module"}));var hv="right-scroll-bar-position",mv="width-before-scroll-bar",U7="with-scroll-bars-hidden",$7="--removed-body-scroll-bar-size";function fx(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function z7(e,t){var r=x.useState(function(){return{value:e,callback:t,facade:{get current(){return r.value},set current(n){var i=r.value;i!==n&&(r.value=n,r.callback(n,i))}}}})[0];return r.callback=t,r.facade}var q7=typeof window<"u"?x.useLayoutEffect:x.useEffect,tN=new WeakMap;function V7(e,t){var r=z7(null,function(n){return e.forEach(function(i){return fx(i,n)})});return q7(function(){var n=tN.get(r);if(n){var i=new Set(n),a=new Set(e),o=r.current;i.forEach(function(l){a.has(l)||fx(l,null)}),a.forEach(function(l){i.has(l)||fx(l,o)})}tN.set(r,e)},[e]),r}function W7(e){return e}function H7(e,t){t===void 0&&(t=W7);var r=[],n=!1,i={read:function(){if(n)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:e},useMedium:function(a){var o=t(a,n);return r.push(o),function(){r=r.filter(function(l){return l!==o})}},assignSyncMedium:function(a){for(n=!0;r.length;){var o=r;r=[],o.forEach(a)}r={push:function(l){return a(l)},filter:function(){return r}}},assignMedium:function(a){n=!0;var o=[];if(r.length){var l=r;r=[],l.forEach(a),o=r}var d=function(){var h=o;o=[],h.forEach(a)},f=function(){return Promise.resolve().then(d)};f(),r={push:function(h){o.push(h),f()},filter:function(h){return o=o.filter(h),r}}}};return i}function G7(e){e===void 0&&(e={});var t=H7(null);return t.options=Ga({async:!0,ssr:!1},e),t}var X3=function(e){var t=e.sideCar,r=qu(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var n=t.read();if(!n)throw new Error("Sidecar medium not found");return x.createElement(n,Ga({},r))};X3.isSideCarExport=!0;function K7(e,t){return e.useMedium(t),X3}var eC=G7(),hx=function(){},R0=x.forwardRef(function(e,t){var r=x.useRef(null),n=x.useState({onScrollCapture:hx,onWheelCapture:hx,onTouchMoveCapture:hx}),i=n[0],a=n[1],o=e.forwardProps,l=e.children,d=e.className,f=e.removeScrollBar,h=e.enabled,p=e.shards,v=e.sideCar,m=e.noRelative,j=e.noIsolation,w=e.inert,_=e.allowPinchZoom,S=e.as,E=S===void 0?"div":S,k=e.gapMode,C=qu(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),D=v,M=V7([r,t]),F=Ga(Ga({},C),i);return x.createElement(x.Fragment,null,h&&x.createElement(D,{sideCar:eC,removeScrollBar:f,shards:p,noRelative:m,noIsolation:j,inert:w,setCallbacks:a,allowPinchZoom:!!_,lockRef:r,gapMode:k}),o?x.cloneElement(x.Children.only(l),Ga(Ga({},F),{ref:M})):x.createElement(E,Ga({},F,{className:d,ref:M}),l))});R0.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};R0.classNames={fullWidth:mv,zeroRight:hv};var Y7=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Q7(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Y7();return t&&e.setAttribute("nonce",t),e}function J7(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Z7(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var X7=function(){var e=0,t=null;return{add:function(r){e==0&&(t=Q7())&&(J7(t,r),Z7(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},eF=function(){var e=X7();return function(t,r){x.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&r])}},tC=function(){var e=eF(),t=function(r){var n=r.styles,i=r.dynamic;return e(n,i),null};return t},tF={left:0,top:0,right:0,gap:0},mx=function(e){return parseInt(e||"",10)||0},rF=function(e){var t=window.getComputedStyle(document.body),r=t[e==="padding"?"paddingLeft":"marginLeft"],n=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[mx(r),mx(n),mx(i)]},nF=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return tF;var t=rF(e),r=document.documentElement.clientWidth,n=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,n-r+t[2]-t[0])}},sF=tC(),gh="data-scroll-locked",iF=function(e,t,r,n){var i=e.left,a=e.top,o=e.right,l=e.gap;return r===void 0&&(r="margin"),`
  .`.concat(U7,` {
   overflow: hidden `).concat(n,`;
   padding-right: `).concat(l,"px ").concat(n,`;
  }
  body[`).concat(gh,`] {
    overflow: hidden `).concat(n,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(n,";"),r==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(n,`;
    `),r==="padding"&&"padding-right: ".concat(l,"px ").concat(n,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(hv,` {
    right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(mv,` {
    margin-right: `).concat(l,"px ").concat(n,`;
  }
  
  .`).concat(hv," .").concat(hv,` {
    right: 0 `).concat(n,`;
  }
  
  .`).concat(mv," .").concat(mv,` {
    margin-right: 0 `).concat(n,`;
  }
  
  body[`).concat(gh,`] {
    `).concat($7,": ").concat(l,`px;
  }
`)},rN=function(){var e=parseInt(document.body.getAttribute(gh)||"0",10);return isFinite(e)?e:0},aF=function(){x.useEffect(function(){return document.body.setAttribute(gh,(rN()+1).toString()),function(){var e=rN()-1;e<=0?document.body.removeAttribute(gh):document.body.setAttribute(gh,e.toString())}},[])},oF=function(e){var t=e.noRelative,r=e.noImportant,n=e.gapMode,i=n===void 0?"margin":n;aF();var a=x.useMemo(function(){return nF(i)},[i]);return x.createElement(sF,{styles:iF(a,!t,i,r?"":"!important")})},nw=!1;if(typeof window<"u")try{var Ig=Object.defineProperty({},"passive",{get:function(){return nw=!0,!0}});window.addEventListener("test",Ig,Ig),window.removeEventListener("test",Ig,Ig)}catch{nw=!1}var $f=nw?{passive:!1}:!1,lF=function(e){return e.tagName==="TEXTAREA"},rC=function(e,t){if(!(e instanceof Element))return!1;var r=window.getComputedStyle(e);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!lF(e)&&r[t]==="visible")},cF=function(e){return rC(e,"overflowY")},uF=function(e){return rC(e,"overflowX")},nN=function(e,t){var r=t.ownerDocument,n=t;do{typeof ShadowRoot<"u"&&n instanceof ShadowRoot&&(n=n.host);var i=nC(e,n);if(i){var a=sC(e,n),o=a[1],l=a[2];if(o>l)return!0}n=n.parentNode}while(n&&n!==r.body);return!1},dF=function(e){var t=e.scrollTop,r=e.scrollHeight,n=e.clientHeight;return[t,r,n]},fF=function(e){var t=e.scrollLeft,r=e.scrollWidth,n=e.clientWidth;return[t,r,n]},nC=function(e,t){return e==="v"?cF(t):uF(t)},sC=function(e,t){return e==="v"?dF(t):fF(t)},hF=function(e,t){return e==="h"&&t==="rtl"?-1:1},mF=function(e,t,r,n,i){var a=hF(e,window.getComputedStyle(t).direction),o=a*n,l=r.target,d=t.contains(l),f=!1,h=o>0,p=0,v=0;do{if(!l)break;var m=sC(e,l),j=m[0],w=m[1],_=m[2],S=w-_-a*j;(j||S)&&nC(e,l)&&(p+=S,v+=j);var E=l.parentNode;l=E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE?E.host:E}while(!d&&l!==document.body||d&&(t.contains(l)||t===l));return(h&&Math.abs(p)<1||!h&&Math.abs(v)<1)&&(f=!0),f},Og=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},sN=function(e){return[e.deltaX,e.deltaY]},iN=function(e){return e&&"current"in e?e.current:e},pF=function(e,t){return e[0]===t[0]&&e[1]===t[1]},gF=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},vF=0,zf=[];function yF(e){var t=x.useRef([]),r=x.useRef([0,0]),n=x.useRef(),i=x.useState(vF++)[0],a=x.useState(tC)[0],o=x.useRef(e);x.useEffect(function(){o.current=e},[e]),x.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var w=E2([e.lockRef.current],(e.shards||[]).map(iN),!0).filter(Boolean);return w.forEach(function(_){return _.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),w.forEach(function(_){return _.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var l=x.useCallback(function(w,_){if("touches"in w&&w.touches.length===2||w.type==="wheel"&&w.ctrlKey)return!o.current.allowPinchZoom;var S=Og(w),E=r.current,k="deltaX"in w?w.deltaX:E[0]-S[0],C="deltaY"in w?w.deltaY:E[1]-S[1],D,M=w.target,F=Math.abs(k)>Math.abs(C)?"h":"v";if("touches"in w&&F==="h"&&M.type==="range")return!1;var U=nN(F,M);if(!U)return!0;if(U?D=F:(D=F==="v"?"h":"v",U=nN(F,M)),!U)return!1;if(!n.current&&"changedTouches"in w&&(k||C)&&(n.current=D),!D)return!0;var I=n.current||D;return mF(I,_,w,I==="h"?k:C)},[]),d=x.useCallback(function(w){var _=w;if(!(!zf.length||zf[zf.length-1]!==a)){var S="deltaY"in _?sN(_):Og(_),E=t.current.filter(function(D){return D.name===_.type&&(D.target===_.target||_.target===D.shadowParent)&&pF(D.delta,S)})[0];if(E&&E.should){_.cancelable&&_.preventDefault();return}if(!E){var k=(o.current.shards||[]).map(iN).filter(Boolean).filter(function(D){return D.contains(_.target)}),C=k.length>0?l(_,k[0]):!o.current.noIsolation;C&&_.cancelable&&_.preventDefault()}}},[]),f=x.useCallback(function(w,_,S,E){var k={name:w,delta:_,target:S,should:E,shadowParent:xF(S)};t.current.push(k),setTimeout(function(){t.current=t.current.filter(function(C){return C!==k})},1)},[]),h=x.useCallback(function(w){r.current=Og(w),n.current=void 0},[]),p=x.useCallback(function(w){f(w.type,sN(w),w.target,l(w,e.lockRef.current))},[]),v=x.useCallback(function(w){f(w.type,Og(w),w.target,l(w,e.lockRef.current))},[]);x.useEffect(function(){return zf.push(a),e.setCallbacks({onScrollCapture:p,onWheelCapture:p,onTouchMoveCapture:v}),document.addEventListener("wheel",d,$f),document.addEventListener("touchmove",d,$f),document.addEventListener("touchstart",h,$f),function(){zf=zf.filter(function(w){return w!==a}),document.removeEventListener("wheel",d,$f),document.removeEventListener("touchmove",d,$f),document.removeEventListener("touchstart",h,$f)}},[]);var m=e.removeScrollBar,j=e.inert;return x.createElement(x.Fragment,null,j?x.createElement(a,{styles:gF(i)}):null,m?x.createElement(oF,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function xF(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const wF=K7(eC,yF);var Lp=x.forwardRef(function(e,t){return x.createElement(R0,Ga({},e,{ref:t,sideCar:wF}))});Lp.classNames=R0.classNames;var sw=["Enter"," "],bF=["ArrowDown","PageUp","Home"],iC=["ArrowUp","PageDown","End"],_F=[...bF,...iC],NF={ltr:[...sw,"ArrowRight"],rtl:[...sw,"ArrowLeft"]},jF={ltr:["ArrowLeft"],rtl:["ArrowRight"]},Dp="Menu",[pp,SF,kF]=Cp(Dp),[nf,aC]=Fs(Dp,[kF,$u,Kh]),L0=$u(),oC=Kh(),[CF,sf]=nf(Dp),[EF,Ip]=nf(Dp),lC=e=>{const{__scopeMenu:t,open:r=!1,children:n,dir:i,onOpenChange:a,modal:o=!0}=e,l=L0(t),[d,f]=x.useState(null),h=x.useRef(!1),p=Zn(a),v=rf(i);return x.useEffect(()=>{const m=()=>{h.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>h.current=!1;return document.addEventListener("keydown",m,{capture:!0}),()=>{document.removeEventListener("keydown",m,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),s.jsx(x0,{...l,children:s.jsx(CF,{scope:t,open:r,onOpenChange:p,content:d,onContentChange:f,children:s.jsx(EF,{scope:t,onClose:x.useCallback(()=>p(!1),[p]),isUsingKeyboardRef:h,dir:v,modal:o,children:n})})})};lC.displayName=Dp;var AF="MenuAnchor",A2=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=L0(r);return s.jsx(Pp,{...i,...n,ref:t})});A2.displayName=AF;var P2="MenuPortal",[PF,cC]=nf(P2,{forceMount:void 0}),uC=e=>{const{__scopeMenu:t,forceMount:r,children:n,container:i}=e,a=sf(P2,t);return s.jsx(PF,{scope:t,forceMount:r,children:s.jsx(Bs,{present:r||a.open,children:s.jsx($h,{asChild:!0,container:i,children:n})})})};uC.displayName=P2;var Ka="MenuContent",[TF,T2]=nf(Ka),dC=x.forwardRef((e,t)=>{const r=cC(Ka,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=sf(Ka,e.__scopeMenu),o=Ip(Ka,e.__scopeMenu);return s.jsx(pp.Provider,{scope:e.__scopeMenu,children:s.jsx(Bs,{present:n||a.open,children:s.jsx(pp.Slot,{scope:e.__scopeMenu,children:o.modal?s.jsx(RF,{...i,ref:t}):s.jsx(LF,{...i,ref:t})})})})}),RF=x.forwardRef((e,t)=>{const r=sf(Ka,e.__scopeMenu),n=x.useRef(null),i=or(t,n);return x.useEffect(()=>{const a=n.current;if(a)return P0(a)},[]),s.jsx(R2,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:lt(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),LF=x.forwardRef((e,t)=>{const r=sf(Ka,e.__scopeMenu);return s.jsx(R2,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),DF=Pu("MenuContent.ScrollLock"),R2=x.forwardRef((e,t)=>{const{__scopeMenu:r,loop:n=!1,trapFocus:i,onOpenAutoFocus:a,onCloseAutoFocus:o,disableOutsidePointerEvents:l,onEntryFocus:d,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:m,disableOutsideScroll:j,...w}=e,_=sf(Ka,r),S=Ip(Ka,r),E=L0(r),k=oC(r),C=SF(r),[D,M]=x.useState(null),F=x.useRef(null),U=or(t,F,_.onContentChange),I=x.useRef(0),K=x.useRef(""),B=x.useRef(0),O=x.useRef(null),z=x.useRef("right"),q=x.useRef(0),ue=j?Lp:x.Fragment,ie=j?{as:DF,allowPinchZoom:!0}:void 0,le=se=>{const xe=K.current+se,te=C().filter(X=>!X.disabled),R=document.activeElement,V=te.find(X=>X.ref.current===R)?.textValue,Q=te.map(X=>X.textValue),re=HF(Q,xe,V),Z=te.find(X=>X.textValue===re)?.ref.current;(function X(pe){K.current=pe,window.clearTimeout(I.current),pe!==""&&(I.current=window.setTimeout(()=>X(""),1e3))})(xe),Z&&setTimeout(()=>Z.focus())};x.useEffect(()=>()=>window.clearTimeout(I.current),[]),A0();const G=x.useCallback(se=>z.current===O.current?.side&&KF(se,O.current?.area),[]);return s.jsx(TF,{scope:r,searchRef:K,onItemEnter:x.useCallback(se=>{G(se)&&se.preventDefault()},[G]),onItemLeave:x.useCallback(se=>{G(se)||(F.current?.focus(),M(null))},[G]),onTriggerLeave:x.useCallback(se=>{G(se)&&se.preventDefault()},[G]),pointerGraceTimerRef:B,onPointerGraceIntentChange:x.useCallback(se=>{O.current=se},[]),children:s.jsx(ue,{...ie,children:s.jsx(Tp,{asChild:!0,trapped:i,onMountAutoFocus:lt(a,se=>{se.preventDefault(),F.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:o,children:s.jsx(Xd,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:f,onPointerDownOutside:h,onFocusOutside:p,onInteractOutside:v,onDismiss:m,children:s.jsx(S2,{asChild:!0,...k,dir:S.dir,orientation:"vertical",loop:n,currentTabStopId:D,onCurrentTabStopIdChange:M,onEntryFocus:lt(d,se=>{S.isUsingKeyboardRef.current||se.preventDefault()}),preventScrollOnEntryFocus:!0,children:s.jsx(w0,{role:"menu","aria-orientation":"vertical","data-state":CC(_.open),"data-radix-menu-content":"",dir:S.dir,...E,...w,ref:U,style:{outline:"none",...w.style},onKeyDown:lt(w.onKeyDown,se=>{const te=se.target.closest("[data-radix-menu-content]")===se.currentTarget,R=se.ctrlKey||se.altKey||se.metaKey,V=se.key.length===1;te&&(se.key==="Tab"&&se.preventDefault(),!R&&V&&le(se.key));const Q=F.current;if(se.target!==Q||!_F.includes(se.key))return;se.preventDefault();const Z=C().filter(X=>!X.disabled).map(X=>X.ref.current);iC.includes(se.key)&&Z.reverse(),VF(Z)}),onBlur:lt(e.onBlur,se=>{se.currentTarget.contains(se.target)||(window.clearTimeout(I.current),K.current="")}),onPointerMove:lt(e.onPointerMove,gp(se=>{const xe=se.target,te=q.current!==se.clientX;if(se.currentTarget.contains(xe)&&te){const R=se.clientX>q.current?"right":"left";z.current=R,q.current=se.clientX}}))})})})})})})});dC.displayName=Ka;var IF="MenuGroup",L2=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(yt.div,{role:"group",...n,ref:t})});L2.displayName=IF;var OF="MenuLabel",fC=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(yt.div,{...n,ref:t})});fC.displayName=OF;var Lv="MenuItem",aN="menu.itemSelect",D0=x.forwardRef((e,t)=>{const{disabled:r=!1,onSelect:n,...i}=e,a=x.useRef(null),o=Ip(Lv,e.__scopeMenu),l=T2(Lv,e.__scopeMenu),d=or(t,a),f=x.useRef(!1),h=()=>{const p=a.current;if(!r&&p){const v=new CustomEvent(aN,{bubbles:!0,cancelable:!0});p.addEventListener(aN,m=>n?.(m),{once:!0}),Xw(p,v),v.defaultPrevented?f.current=!1:o.onClose()}};return s.jsx(hC,{...i,ref:d,disabled:r,onClick:lt(e.onClick,h),onPointerDown:p=>{e.onPointerDown?.(p),f.current=!0},onPointerUp:lt(e.onPointerUp,p=>{f.current||p.currentTarget?.click()}),onKeyDown:lt(e.onKeyDown,p=>{const v=l.searchRef.current!=="";r||v&&p.key===" "||sw.includes(p.key)&&(p.currentTarget.click(),p.preventDefault())})})});D0.displayName=Lv;var hC=x.forwardRef((e,t)=>{const{__scopeMenu:r,disabled:n=!1,textValue:i,...a}=e,o=T2(Lv,r),l=oC(r),d=x.useRef(null),f=or(t,d),[h,p]=x.useState(!1),[v,m]=x.useState("");return x.useEffect(()=>{const j=d.current;j&&m((j.textContent??"").trim())},[a.children]),s.jsx(pp.ItemSlot,{scope:r,disabled:n,textValue:i??v,children:s.jsx(k2,{asChild:!0,...l,focusable:!n,children:s.jsx(yt.div,{role:"menuitem","data-highlighted":h?"":void 0,"aria-disabled":n||void 0,"data-disabled":n?"":void 0,...a,ref:f,onPointerMove:lt(e.onPointerMove,gp(j=>{n?o.onItemLeave(j):(o.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:lt(e.onPointerLeave,gp(j=>o.onItemLeave(j))),onFocus:lt(e.onFocus,()=>p(!0)),onBlur:lt(e.onBlur,()=>p(!1))})})})}),MF="MenuCheckboxItem",mC=x.forwardRef((e,t)=>{const{checked:r=!1,onCheckedChange:n,...i}=e;return s.jsx(xC,{scope:e.__scopeMenu,checked:r,children:s.jsx(D0,{role:"menuitemcheckbox","aria-checked":Dv(r)?"mixed":r,...i,ref:t,"data-state":I2(r),onSelect:lt(i.onSelect,()=>n?.(Dv(r)?!0:!r),{checkForDefaultPrevented:!1})})})});mC.displayName=MF;var pC="MenuRadioGroup",[FF,BF]=nf(pC,{value:void 0,onValueChange:()=>{}}),gC=x.forwardRef((e,t)=>{const{value:r,onValueChange:n,...i}=e,a=Zn(n);return s.jsx(FF,{scope:e.__scopeMenu,value:r,onValueChange:a,children:s.jsx(L2,{...i,ref:t})})});gC.displayName=pC;var vC="MenuRadioItem",yC=x.forwardRef((e,t)=>{const{value:r,...n}=e,i=BF(vC,e.__scopeMenu),a=r===i.value;return s.jsx(xC,{scope:e.__scopeMenu,checked:a,children:s.jsx(D0,{role:"menuitemradio","aria-checked":a,...n,ref:t,"data-state":I2(a),onSelect:lt(n.onSelect,()=>i.onValueChange?.(r),{checkForDefaultPrevented:!1})})})});yC.displayName=vC;var D2="MenuItemIndicator",[xC,UF]=nf(D2,{checked:!1}),wC=x.forwardRef((e,t)=>{const{__scopeMenu:r,forceMount:n,...i}=e,a=UF(D2,r);return s.jsx(Bs,{present:n||Dv(a.checked)||a.checked===!0,children:s.jsx(yt.span,{...i,ref:t,"data-state":I2(a.checked)})})});wC.displayName=D2;var $F="MenuSeparator",bC=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e;return s.jsx(yt.div,{role:"separator","aria-orientation":"horizontal",...n,ref:t})});bC.displayName=$F;var zF="MenuArrow",_C=x.forwardRef((e,t)=>{const{__scopeMenu:r,...n}=e,i=L0(r);return s.jsx(b0,{...i,...n,ref:t})});_C.displayName=zF;var qF="MenuSub",[LX,NC]=nf(qF),$m="MenuSubTrigger",jC=x.forwardRef((e,t)=>{const r=sf($m,e.__scopeMenu),n=Ip($m,e.__scopeMenu),i=NC($m,e.__scopeMenu),a=T2($m,e.__scopeMenu),o=x.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:d}=a,f={__scopeMenu:e.__scopeMenu},h=x.useCallback(()=>{o.current&&window.clearTimeout(o.current),o.current=null},[]);return x.useEffect(()=>h,[h]),x.useEffect(()=>{const p=l.current;return()=>{window.clearTimeout(p),d(null)}},[l,d]),s.jsx(A2,{asChild:!0,...f,children:s.jsx(hC,{id:i.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":i.contentId,"data-state":CC(r.open),...e,ref:_c(t,i.onTriggerChange),onClick:p=>{e.onClick?.(p),!(e.disabled||p.defaultPrevented)&&(p.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:lt(e.onPointerMove,gp(p=>{a.onItemEnter(p),!p.defaultPrevented&&!e.disabled&&!r.open&&!o.current&&(a.onPointerGraceIntentChange(null),o.current=window.setTimeout(()=>{r.onOpenChange(!0),h()},100))})),onPointerLeave:lt(e.onPointerLeave,gp(p=>{h();const v=r.content?.getBoundingClientRect();if(v){const m=r.content?.dataset.side,j=m==="right",w=j?-5:5,_=v[j?"left":"right"],S=v[j?"right":"left"];a.onPointerGraceIntentChange({area:[{x:p.clientX+w,y:p.clientY},{x:_,y:v.top},{x:S,y:v.top},{x:S,y:v.bottom},{x:_,y:v.bottom}],side:m}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(p),p.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:lt(e.onKeyDown,p=>{const v=a.searchRef.current!=="";e.disabled||v&&p.key===" "||NF[n.dir].includes(p.key)&&(r.onOpenChange(!0),r.content?.focus(),p.preventDefault())})})})});jC.displayName=$m;var SC="MenuSubContent",kC=x.forwardRef((e,t)=>{const r=cC(Ka,e.__scopeMenu),{forceMount:n=r.forceMount,...i}=e,a=sf(Ka,e.__scopeMenu),o=Ip(Ka,e.__scopeMenu),l=NC(SC,e.__scopeMenu),d=x.useRef(null),f=or(t,d);return s.jsx(pp.Provider,{scope:e.__scopeMenu,children:s.jsx(Bs,{present:n||a.open,children:s.jsx(pp.Slot,{scope:e.__scopeMenu,children:s.jsx(R2,{id:l.contentId,"aria-labelledby":l.triggerId,...i,ref:f,align:"start",side:o.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:h=>{o.isUsingKeyboardRef.current&&d.current?.focus(),h.preventDefault()},onCloseAutoFocus:h=>h.preventDefault(),onFocusOutside:lt(e.onFocusOutside,h=>{h.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:lt(e.onEscapeKeyDown,h=>{o.onClose(),h.preventDefault()}),onKeyDown:lt(e.onKeyDown,h=>{const p=h.currentTarget.contains(h.target),v=jF[o.dir].includes(h.key);p&&v&&(a.onOpenChange(!1),l.trigger?.focus(),h.preventDefault())})})})})})});kC.displayName=SC;function CC(e){return e?"open":"closed"}function Dv(e){return e==="indeterminate"}function I2(e){return Dv(e)?"indeterminate":e?"checked":"unchecked"}function VF(e){const t=document.activeElement;for(const r of e)if(r===t||(r.focus(),document.activeElement!==t))return}function WF(e,t){return e.map((r,n)=>e[(t+n)%e.length])}function HF(e,t,r){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=WF(e,Math.max(a,0));i.length===1&&(o=o.filter(f=>f!==r));const d=o.find(f=>f.toLowerCase().startsWith(i.toLowerCase()));return d!==r?d:void 0}function GF(e,t){const{x:r,y:n}=e;let i=!1;for(let a=0,o=t.length-1;a<t.length;o=a++){const l=t[a],d=t[o],f=l.x,h=l.y,p=d.x,v=d.y;h>n!=v>n&&r<(p-f)*(n-h)/(v-h)+f&&(i=!i)}return i}function KF(e,t){if(!t)return!1;const r={x:e.clientX,y:e.clientY};return GF(r,t)}function gp(e){return t=>t.pointerType==="mouse"?e(t):void 0}var YF=lC,QF=A2,JF=uC,ZF=dC,XF=L2,e9=fC,t9=D0,r9=mC,n9=gC,s9=yC,i9=wC,a9=bC,o9=_C,l9=jC,c9=kC,I0="DropdownMenu",[u9]=Fs(I0,[aC]),Ci=aC(),[d9,EC]=u9(I0),AC=e=>{const{__scopeDropdownMenu:t,children:r,dir:n,open:i,defaultOpen:a,onOpenChange:o,modal:l=!0}=e,d=Ci(t),f=x.useRef(null),[h,p]=Yi({prop:i,defaultProp:a??!1,onChange:o,caller:I0});return s.jsx(d9,{scope:t,triggerId:Ms(),triggerRef:f,contentId:Ms(),open:h,onOpenChange:p,onOpenToggle:x.useCallback(()=>p(v=>!v),[p]),modal:l,children:s.jsx(YF,{...d,open:h,onOpenChange:p,dir:n,modal:l,children:r})})};AC.displayName=I0;var PC="DropdownMenuTrigger",TC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,disabled:n=!1,...i}=e,a=EC(PC,r),o=Ci(r);return s.jsx(QF,{asChild:!0,...o,children:s.jsx(yt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":n?"":void 0,disabled:n,...i,ref:_c(t,a.triggerRef),onPointerDown:lt(e.onPointerDown,l=>{!n&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:lt(e.onKeyDown,l=>{n||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});TC.displayName=PC;var f9="DropdownMenuPortal",RC=e=>{const{__scopeDropdownMenu:t,...r}=e,n=Ci(t);return s.jsx(JF,{...n,...r})};RC.displayName=f9;var LC="DropdownMenuContent",DC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=EC(LC,r),a=Ci(r),o=x.useRef(!1);return s.jsx(ZF,{id:i.contentId,"aria-labelledby":i.triggerId,...a,...n,ref:t,onCloseAutoFocus:lt(e.onCloseAutoFocus,l=>{o.current||i.triggerRef.current?.focus(),o.current=!1,l.preventDefault()}),onInteractOutside:lt(e.onInteractOutside,l=>{const d=l.detail.originalEvent,f=d.button===0&&d.ctrlKey===!0,h=d.button===2||f;(!i.modal||h)&&(o.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});DC.displayName=LC;var h9="DropdownMenuGroup",m9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(XF,{...i,...n,ref:t})});m9.displayName=h9;var p9="DropdownMenuLabel",IC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(e9,{...i,...n,ref:t})});IC.displayName=p9;var g9="DropdownMenuItem",OC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(t9,{...i,...n,ref:t})});OC.displayName=g9;var v9="DropdownMenuCheckboxItem",MC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(r9,{...i,...n,ref:t})});MC.displayName=v9;var y9="DropdownMenuRadioGroup",x9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(n9,{...i,...n,ref:t})});x9.displayName=y9;var w9="DropdownMenuRadioItem",FC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(s9,{...i,...n,ref:t})});FC.displayName=w9;var b9="DropdownMenuItemIndicator",BC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(i9,{...i,...n,ref:t})});BC.displayName=b9;var _9="DropdownMenuSeparator",UC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(a9,{...i,...n,ref:t})});UC.displayName=_9;var N9="DropdownMenuArrow",j9=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(o9,{...i,...n,ref:t})});j9.displayName=N9;var S9="DropdownMenuSubTrigger",$C=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(l9,{...i,...n,ref:t})});$C.displayName=S9;var k9="DropdownMenuSubContent",zC=x.forwardRef((e,t)=>{const{__scopeDropdownMenu:r,...n}=e,i=Ci(r);return s.jsx(c9,{...i,...n,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});zC.displayName=k9;var C9=AC,E9=TC,A9=RC,qC=DC,VC=IC,WC=OC,HC=MC,GC=FC,KC=BC,YC=UC,QC=$C,JC=zC;const O2=C9,M2=E9,P9=x.forwardRef(({className:e,inset:t,children:r,...n},i)=>s.jsxs(QC,{ref:i,className:Me("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",t&&"pl-8",e),...n,children:[r,s.jsx(jv,{className:"ml-auto h-4 w-4"})]}));P9.displayName=QC.displayName;const T9=x.forwardRef(({className:e,...t},r)=>s.jsx(JC,{ref:r,className:Me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...t}));T9.displayName=JC.displayName;const O0=x.forwardRef(({className:e,sideOffset:t=4,...r},n)=>s.jsx(A9,{children:s.jsx(qC,{ref:n,sideOffset:t,className:Me("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));O0.displayName=qC.displayName;const dl=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(WC,{ref:n,className:Me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t&&"pl-8",e),...r}));dl.displayName=WC.displayName;const R9=x.forwardRef(({className:e,children:t,checked:r,...n},i)=>s.jsxs(HC,{ref:i,className:Me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),checked:r,...n,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(KC,{children:s.jsx(ji,{className:"h-4 w-4"})})}),t]}));R9.displayName=HC.displayName;const L9=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(GC,{ref:n,className:Me("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(KC,{children:s.jsx(gL,{className:"h-2 w-2 fill-current"})})}),t]}));L9.displayName=GC.displayName;const ZC=x.forwardRef(({className:e,inset:t,...r},n)=>s.jsx(VC,{ref:n,className:Me("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",e),...r}));ZC.displayName=VC.displayName;const iw=x.forwardRef(({className:e,...t},r)=>s.jsx(YC,{ref:r,className:Me("-mx-1 my-1 h-px bg-muted",e),...t}));iw.displayName=YC.displayName;const D9="modulepreload",I9=function(e){return"/"+e},oN={},xc=function(t,r,n){let i=Promise.resolve();if(r&&r.length>0){let d=function(f){return Promise.all(f.map(h=>Promise.resolve(h).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=o?.nonce||o?.getAttribute("nonce");i=d(r.map(f=>{if(f=I9(f),f in oN)return;oN[f]=!0;const h=f.endsWith(".css"),p=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${p}`))return;const v=document.createElement("link");if(v.rel=h?"stylesheet":D9,h||(v.as="script"),v.crossOrigin="",v.href=f,l&&v.setAttribute("nonce",l),document.head.appendChild(v),h)return new Promise((m,j)=>{v.addEventListener("load",m),v.addEventListener("error",()=>j(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return t().catch(a)})},O9=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xc(async()=>{const{default:n}=await Promise.resolve().then(()=>af);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)};class F2 extends Error{constructor(t,r="FunctionsError",n){super(t),this.name=r,this.context=n}}class lN extends F2{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class cN extends F2{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class uN extends F2{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var aw;(function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"})(aw||(aw={}));class M9{constructor(t,{headers:r={},customFetch:n,region:i=aw.Any}={}){this.url=t,this.headers=r,this.region=i,this.fetch=O9(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return Ut(this,arguments,void 0,function*(r,n={}){var i;try{const{headers:a,method:o,body:l,signal:d}=n;let f={},{region:h}=n;h||(h=this.region);const p=new URL(`${this.url}/${r}`);h&&h!=="any"&&(f["x-region"]=h,p.searchParams.set("forceFunctionRegion",h));let v;l&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?typeof Blob<"u"&&l instanceof Blob||l instanceof ArrayBuffer?(f["Content-Type"]="application/octet-stream",v=l):typeof l=="string"?(f["Content-Type"]="text/plain",v=l):typeof FormData<"u"&&l instanceof FormData?v=l:(f["Content-Type"]="application/json",v=JSON.stringify(l)):v=l;const m=yield this.fetch(p.toString(),{method:o||"POST",headers:Object.assign(Object.assign(Object.assign({},f),this.headers),a),body:v,signal:d}).catch(S=>{throw S.name==="AbortError"?S:new lN(S)}),j=m.headers.get("x-relay-error");if(j&&j==="true")throw new cN(m);if(!m.ok)throw new uN(m);let w=((i=m.headers.get("Content-Type"))!==null&&i!==void 0?i:"text/plain").split(";")[0].trim(),_;return w==="application/json"?_=yield m.json():w==="application/octet-stream"||w==="application/pdf"?_=yield m.blob():w==="text/event-stream"?_=m:w==="multipart/form-data"?_=yield m.formData():_=yield m.text(),{data:_,error:null,response:m}}catch(a){return a instanceof Error&&a.name==="AbortError"?{data:null,error:new lN(a)}:{data:null,error:a,response:a instanceof uN||a instanceof cN?a.context:void 0}}})}}var si={};const Yh=C4(B7);var Mg={},Fg={},Bg={},Ug={},$g={},F9=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Ch=F9();const B9=Ch.fetch,XC=Ch.fetch.bind(Ch),eE=Ch.Headers,U9=Ch.Request,$9=Ch.Response,af=Object.freeze(Object.defineProperty({__proto__:null,Headers:eE,Request:U9,Response:$9,default:XC,fetch:B9},Symbol.toStringTag,{value:"Module"})),z9=C4(af);var zg={},dN;function tE(){if(dN)return zg;dN=1,Object.defineProperty(zg,"__esModule",{value:!0});class e extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return zg.default=e,zg}var fN;function rE(){if(fN)return $g;fN=1,Object.defineProperty($g,"__esModule",{value:!0});const e=Yh,t=e.__importDefault(z9),r=e.__importDefault(tE());class n{constructor(a){var o,l;this.shouldThrowOnError=!1,this.method=a.method,this.url=a.url,this.headers=new Headers(a.headers),this.schema=a.schema,this.body=a.body,this.shouldThrowOnError=(o=a.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=a.signal,this.isMaybeSingle=(l=a.isMaybeSingle)!==null&&l!==void 0?l:!1,a.fetch?this.fetch=a.fetch:typeof fetch>"u"?this.fetch=t.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(a,o){return this.headers=new Headers(this.headers),this.headers.set(a,o),this}then(a,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const l=this.fetch;let d=l(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async f=>{var h,p,v,m;let j=null,w=null,_=null,S=f.status,E=f.statusText;if(f.ok){if(this.method!=="HEAD"){const M=await f.text();M===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((h=this.headers.get("Accept"))===null||h===void 0)&&h.includes("application/vnd.pgrst.plan+text"))?w=M:w=JSON.parse(M))}const C=(p=this.headers.get("Prefer"))===null||p===void 0?void 0:p.match(/count=(exact|planned|estimated)/),D=(v=f.headers.get("content-range"))===null||v===void 0?void 0:v.split("/");C&&D&&D.length>1&&(_=parseInt(D[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(w)&&(w.length>1?(j={code:"PGRST116",details:`Results contain ${w.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},w=null,_=null,S=406,E="Not Acceptable"):w.length===1?w=w[0]:w=null)}else{const C=await f.text();try{j=JSON.parse(C),Array.isArray(j)&&f.status===404&&(w=[],j=null,S=200,E="OK")}catch{f.status===404&&C===""?(S=204,E="No Content"):j={message:C}}if(j&&this.isMaybeSingle&&(!((m=j?.details)===null||m===void 0)&&m.includes("0 rows"))&&(j=null,S=200,E="OK"),j&&this.shouldThrowOnError)throw new r.default(j)}return{error:j,data:w,count:_,status:S,statusText:E}});return this.shouldThrowOnError||(d=d.catch(f=>{var h,p,v;return{error:{message:`${(h=f?.name)!==null&&h!==void 0?h:"FetchError"}: ${f?.message}`,details:`${(p=f?.stack)!==null&&p!==void 0?p:""}`,hint:"",code:`${(v=f?.code)!==null&&v!==void 0?v:""}`},data:null,count:null,status:0,statusText:""}})),d.then(a,o)}returns(){return this}overrideTypes(){return this}}return $g.default=n,$g}var hN;function nE(){if(hN)return Ug;hN=1,Object.defineProperty(Ug,"__esModule",{value:!0});const t=Yh.__importDefault(rE());class r extends t.default{select(i){let a=!1;const o=(i??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(i,{ascending:a=!0,nullsFirst:o,foreignTable:l,referencedTable:d=l}={}){const f=d?`${d}.order`:"order",h=this.url.searchParams.get(f);return this.url.searchParams.set(f,`${h?`${h},`:""}${i}.${a?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(i,{foreignTable:a,referencedTable:o=a}={}){const l=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(l,`${i}`),this}range(i,a,{foreignTable:o,referencedTable:l=o}={}){const d=typeof l>"u"?"offset":`${l}.offset`,f=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${i}`),this.url.searchParams.set(f,`${a-i+1}`),this}abortSignal(i){return this.signal=i,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:i=!1,verbose:a=!1,settings:o=!1,buffers:l=!1,wal:d=!1,format:f="text"}={}){var h;const p=[i?"analyze":null,a?"verbose":null,o?"settings":null,l?"buffers":null,d?"wal":null].filter(Boolean).join("|"),v=(h=this.headers.get("Accept"))!==null&&h!==void 0?h:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${f}; for="${v}"; options=${p};`),f==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(i){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${i}`),this}}return Ug.default=r,Ug}var mN;function B2(){if(mN)return Bg;mN=1,Object.defineProperty(Bg,"__esModule",{value:!0});const t=Yh.__importDefault(nE());class r extends t.default{eq(i,a){return this.url.searchParams.append(i,`eq.${a}`),this}neq(i,a){return this.url.searchParams.append(i,`neq.${a}`),this}gt(i,a){return this.url.searchParams.append(i,`gt.${a}`),this}gte(i,a){return this.url.searchParams.append(i,`gte.${a}`),this}lt(i,a){return this.url.searchParams.append(i,`lt.${a}`),this}lte(i,a){return this.url.searchParams.append(i,`lte.${a}`),this}like(i,a){return this.url.searchParams.append(i,`like.${a}`),this}likeAllOf(i,a){return this.url.searchParams.append(i,`like(all).{${a.join(",")}}`),this}likeAnyOf(i,a){return this.url.searchParams.append(i,`like(any).{${a.join(",")}}`),this}ilike(i,a){return this.url.searchParams.append(i,`ilike.${a}`),this}ilikeAllOf(i,a){return this.url.searchParams.append(i,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(i,a){return this.url.searchParams.append(i,`ilike(any).{${a.join(",")}}`),this}is(i,a){return this.url.searchParams.append(i,`is.${a}`),this}in(i,a){const o=Array.from(new Set(a)).map(l=>typeof l=="string"&&new RegExp("[,()]").test(l)?`"${l}"`:`${l}`).join(",");return this.url.searchParams.append(i,`in.(${o})`),this}contains(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cs.{${a.join(",")}}`):this.url.searchParams.append(i,`cs.${JSON.stringify(a)}`),this}containedBy(i,a){return typeof a=="string"?this.url.searchParams.append(i,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(i,`cd.{${a.join(",")}}`):this.url.searchParams.append(i,`cd.${JSON.stringify(a)}`),this}rangeGt(i,a){return this.url.searchParams.append(i,`sr.${a}`),this}rangeGte(i,a){return this.url.searchParams.append(i,`nxl.${a}`),this}rangeLt(i,a){return this.url.searchParams.append(i,`sl.${a}`),this}rangeLte(i,a){return this.url.searchParams.append(i,`nxr.${a}`),this}rangeAdjacent(i,a){return this.url.searchParams.append(i,`adj.${a}`),this}overlaps(i,a){return typeof a=="string"?this.url.searchParams.append(i,`ov.${a}`):this.url.searchParams.append(i,`ov.{${a.join(",")}}`),this}textSearch(i,a,{config:o,type:l}={}){let d="";l==="plain"?d="pl":l==="phrase"?d="ph":l==="websearch"&&(d="w");const f=o===void 0?"":`(${o})`;return this.url.searchParams.append(i,`${d}fts${f}.${a}`),this}match(i){return Object.entries(i).forEach(([a,o])=>{this.url.searchParams.append(a,`eq.${o}`)}),this}not(i,a,o){return this.url.searchParams.append(i,`not.${a}.${o}`),this}or(i,{foreignTable:a,referencedTable:o=a}={}){const l=o?`${o}.or`:"or";return this.url.searchParams.append(l,`(${i})`),this}filter(i,a,o){return this.url.searchParams.append(i,`${a}.${o}`),this}}return Bg.default=r,Bg}var pN;function sE(){if(pN)return Fg;pN=1,Object.defineProperty(Fg,"__esModule",{value:!0});const t=Yh.__importDefault(B2());class r{constructor(i,{headers:a={},schema:o,fetch:l}){this.url=i,this.headers=new Headers(a),this.schema=o,this.fetch=l}select(i,a){const{head:o=!1,count:l}=a??{},d=o?"HEAD":"GET";let f=!1;const h=(i??"*").split("").map(p=>/\s/.test(p)&&!f?"":(p==='"'&&(f=!f),p)).join("");return this.url.searchParams.set("select",h),l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(i,{count:a,defaultToNull:o=!0}={}){var l;const d="POST";if(a&&this.headers.append("Prefer",`count=${a}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const f=i.reduce((h,p)=>h.concat(Object.keys(p)),[]);if(f.length>0){const h=[...new Set(f)].map(p=>`"${p}"`);this.url.searchParams.set("columns",h.join(","))}}return new t.default({method:d,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}upsert(i,{onConflict:a,ignoreDuplicates:o=!1,count:l,defaultToNull:d=!0}={}){var f;const h="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),a!==void 0&&this.url.searchParams.set("on_conflict",a),l&&this.headers.append("Prefer",`count=${l}`),d||this.headers.append("Prefer","missing=default"),Array.isArray(i)){const p=i.reduce((v,m)=>v.concat(Object.keys(m)),[]);if(p.length>0){const v=[...new Set(p)].map(m=>`"${m}"`);this.url.searchParams.set("columns",v.join(","))}}return new t.default({method:h,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(f=this.fetch)!==null&&f!==void 0?f:fetch})}update(i,{count:a}={}){var o;const l="PATCH";return a&&this.headers.append("Prefer",`count=${a}`),new t.default({method:l,url:this.url,headers:this.headers,schema:this.schema,body:i,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:i}={}){var a;const o="DELETE";return i&&this.headers.append("Prefer",`count=${i}`),new t.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}}return Fg.default=r,Fg}var gN;function q9(){if(gN)return Mg;gN=1,Object.defineProperty(Mg,"__esModule",{value:!0});const e=Yh,t=e.__importDefault(sE()),r=e.__importDefault(B2());class n{constructor(a,{headers:o={},schema:l,fetch:d}={}){this.url=a,this.headers=new Headers(o),this.schemaName=l,this.fetch=d}from(a){const o=new URL(`${this.url}/${a}`);return new t.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(a){return new n(this.url,{headers:this.headers,schema:a,fetch:this.fetch})}rpc(a,o={},{head:l=!1,get:d=!1,count:f}={}){var h;let p;const v=new URL(`${this.url}/rpc/${a}`);let m;l||d?(p=l?"HEAD":"GET",Object.entries(o).filter(([w,_])=>_!==void 0).map(([w,_])=>[w,Array.isArray(_)?`{${_.join(",")}}`:`${_}`]).forEach(([w,_])=>{v.searchParams.append(w,_)})):(p="POST",m=o);const j=new Headers(this.headers);return f&&j.set("Prefer",`count=${f}`),new r.default({method:p,url:v,headers:j,schema:this.schemaName,body:m,fetch:(h=this.fetch)!==null&&h!==void 0?h:fetch})}}return Mg.default=n,Mg}var vN;function V9(){if(vN)return si;vN=1,Object.defineProperty(si,"__esModule",{value:!0}),si.PostgrestError=si.PostgrestBuilder=si.PostgrestTransformBuilder=si.PostgrestFilterBuilder=si.PostgrestQueryBuilder=si.PostgrestClient=void 0;const e=Yh,t=e.__importDefault(q9());si.PostgrestClient=t.default;const r=e.__importDefault(sE());si.PostgrestQueryBuilder=r.default;const n=e.__importDefault(B2());si.PostgrestFilterBuilder=n.default;const i=e.__importDefault(nE());si.PostgrestTransformBuilder=i.default;const a=e.__importDefault(rE());si.PostgrestBuilder=a.default;const o=e.__importDefault(tE());return si.PostgrestError=o.default,si.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:i.default,PostgrestBuilder:a.default,PostgrestError:o.default},si}var W9=V9();const H9=l0(W9),{PostgrestClient:G9,PostgrestQueryBuilder:DX,PostgrestFilterBuilder:IX,PostgrestTransformBuilder:OX,PostgrestBuilder:MX,PostgrestError:FX}=H9;class K9{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,i=parseInt(n.replace(/^v/,"").split(".")[0]);return i>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${i} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${i} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const n=this.getWebSocketConstructor();return new n(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const Y9="2.76.1",Q9=`realtime-js/${Y9}`,J9="1.0.0",ow=1e4,Z9=1e3,X9=100;var Zm;(function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"})(Zm||(Zm={}));var Cs;(function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"})(Cs||(Cs={}));var jo;(function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"})(jo||(jo={}));var lw;(function(e){e.websocket="websocket"})(lw||(lw={}));var Rd;(function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"})(Rd||(Rd={}));class eB{constructor(){this.HEADER_LENGTH=1}decode(t,r){return t.constructor===ArrayBuffer?r(this._binaryDecode(t)):r(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){const r=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,r,n)}_decodeBroadcast(t,r,n){const i=r.getUint8(1),a=r.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(t.slice(o,o+i));o=o+i;const d=n.decode(t.slice(o,o+a));o=o+a;const f=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:l,event:d,payload:f}}}class iE{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var yn;(function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"})(yn||(yn={}));const yN=(e,t,r={})=>{var n;const i=(n=r.skipTypes)!==null&&n!==void 0?n:[];return t?Object.keys(t).reduce((a,o)=>(a[o]=tB(o,e,t,i),a),{}):{}},tB=(e,t,r,n)=>{const i=t.find(l=>l.name===e),a=i?.type,o=r[e];return a&&!n.includes(a)?aE(a,o):cw(o)},aE=(e,t)=>{if(e.charAt(0)==="_"){const r=e.slice(1,e.length);return iB(t,r)}switch(e){case yn.bool:return rB(t);case yn.float4:case yn.float8:case yn.int2:case yn.int4:case yn.int8:case yn.numeric:case yn.oid:return nB(t);case yn.json:case yn.jsonb:return sB(t);case yn.timestamp:return aB(t);case yn.abstime:case yn.date:case yn.daterange:case yn.int4range:case yn.int8range:case yn.money:case yn.reltime:case yn.text:case yn.time:case yn.timestamptz:case yn.timetz:case yn.tsrange:case yn.tstzrange:return cw(t);default:return cw(t)}},cw=e=>e,rB=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},nB=e=>{if(typeof e=="string"){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},sB=e=>{if(typeof e=="string")try{return JSON.parse(e)}catch(t){return console.log(`JSON parse error: ${t}`),e}return e},iB=(e,t)=>{if(typeof e!="string")return e;const r=e.length-1,n=e[r];if(e[0]==="{"&&n==="}"){let a;const o=e.slice(1,r);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>aE(t,l))}return e},aB=e=>typeof e=="string"?e.replace(" ","T"):e,oE=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class px{constructor(t,r,n={},i=ow){this.channel=t,this.event=r,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var n;return this._hasReceived(t)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var xN;(function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"})(xN||(xN={}));class Xm{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=r?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Xm.syncState(this.state,i,a,o),this.pendingDiffs.forEach(d=>{this.state=Xm.syncDiff(this.state,d,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},i=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=Xm.syncDiff(this.state,i,a,o),l())}),this.onJoin((i,a,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:a,newPresences:o})}),this.onLeave((i,a,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,n,i){const a=this.cloneDeep(t),o=this.transformState(r),l={},d={};return this.map(a,(f,h)=>{o[f]||(d[f]=h)}),this.map(o,(f,h)=>{const p=a[f];if(p){const v=h.map(_=>_.presence_ref),m=p.map(_=>_.presence_ref),j=h.filter(_=>m.indexOf(_.presence_ref)<0),w=p.filter(_=>v.indexOf(_.presence_ref)<0);j.length>0&&(l[f]=j),w.length>0&&(d[f]=w)}else l[f]=h}),this.syncDiff(a,{joins:l,leaves:d},n,i)}static syncDiff(t,r,n,i){const{joins:a,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(a,(l,d)=>{var f;const h=(f=t[l])!==null&&f!==void 0?f:[];if(t[l]=this.cloneDeep(d),h.length>0){const p=t[l].map(m=>m.presence_ref),v=h.filter(m=>p.indexOf(m.presence_ref)<0);t[l].unshift(...v)}n(l,h,d)}),this.map(o,(l,d)=>{let f=t[l];if(!f)return;const h=d.map(p=>p.presence_ref);f=f.filter(p=>h.indexOf(p.presence_ref)<0),t[l]=f,i(l,f,d),f.length===0&&delete t[l]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(n=>r(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,n)=>{const i=t[n];return"metas"in i?r[n]=i.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):r[n]=i,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var wN;(function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"})(wN||(wN={}));var ep;(function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"})(ep||(ep={}));var gc;(function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"})(gc||(gc={}));class U2{constructor(t,r={config:{}},n){var i,a;if(this.topic=t,this.params=r,this.socket=n,this.bindings={},this.state=Cs.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new px(this,jo.join,this.params,this.timeout),this.rejoinTimer=new iE(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Cs.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(o=>o.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Cs.closed,this.socket._remove(this)}),this._onError(o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",o=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,o),this.state=Cs.errored,this.rejoinTimer.scheduleTimeout())}),this._on(jo.reply,{},(o,l)=>{this._trigger(this._replyEventName(l),o)}),this.presence=new Xm(this),this.broadcastEndpointURL=oE(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((a=(i=this.params.config)===null||i===void 0?void 0:i.broadcast)===null||a===void 0)&&a.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var n,i,a;if(this.socket.isConnected()||this.socket.connect(),this.state==Cs.closed){const{config:{broadcast:o,presence:l,private:d}}=this.params,f=(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(m=>m.filter))!==null&&i!==void 0?i:[],h=!!this.bindings[ep.PRESENCE]&&this.bindings[ep.PRESENCE].length>0||((a=this.params.config.presence)===null||a===void 0?void 0:a.enabled)===!0,p={},v={broadcast:o,presence:Object.assign(Object.assign({},l),{enabled:h}),postgres_changes:f,private:d};this.socket.accessTokenValue&&(p.access_token=this.socket.accessTokenValue),this._onError(m=>t?.(gc.CHANNEL_ERROR,m)),this._onClose(()=>t?.(gc.CLOSED)),this.updateJoinPayload(Object.assign({config:v},p)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:m})=>{var j;if(this.socket.setAuth(),m===void 0){t?.(gc.SUBSCRIBED);return}else{const w=this.bindings.postgres_changes,_=(j=w?.length)!==null&&j!==void 0?j:0,S=[];for(let E=0;E<_;E++){const k=w[E],{filter:{event:C,schema:D,table:M,filter:F}}=k,U=m&&m[E];if(U&&U.event===C&&U.schema===D&&U.table===M&&U.filter===F)S.push(Object.assign(Object.assign({},k),{id:U.id}));else{this.unsubscribe(),this.state=Cs.errored,t?.(gc.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,t&&t(gc.SUBSCRIBED);return}}).receive("error",m=>{this.state=Cs.errored,t?.(gc.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{t?.(gc.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,n){return this.state===Cs.joined&&t===ep.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,n)}async httpSend(t,r,n={}){var i;const a=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const o={method:"POST",headers:{Authorization:a,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},l=await this._fetchWithTimeout(this.broadcastEndpointURL,o,(i=n.timeout)!==null&&i!==void 0?i:this.timeout);if(l.status===202)return{success:!0};let d=l.statusText;try{const f=await l.json();d=f.error||f.message||d}catch{}return Promise.reject(new Error(d))}async send(t,r={}){var n,i;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:a,payload:o}=t,d={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const f=await this._fetchWithTimeout(this.broadcastEndpointURL,d,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((i=f.body)===null||i===void 0?void 0:i.cancel()),f.ok?"ok":"error"}catch(f){return f.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,d;const f=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((d=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||d===void 0)&&d.ack)&&a("ok"),f.receive("ok",()=>a("ok")),f.receive("error",()=>a("error")),f.receive("timeout",()=>a("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Cs.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(jo.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(i=>{n=new px(this,jo.leave,{},t),n.receive("ok",()=>{r(),i("ok")}).receive("timeout",()=>{r(),i("timed out")}).receive("error",()=>{i("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n?.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Cs.closed,this.bindings={}}async _fetchWithTimeout(t,r,n){const i=new AbortController,a=setTimeout(()=>i.abort(),n),o=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:i.signal}));return clearTimeout(a),o}_push(t,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new px(this,t,r,n);return this._canPush()?i.send():this._addToPushBuffer(i),i}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>X9){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,n){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,n){var i,a;const o=t.toLocaleLowerCase(),{close:l,error:d,leave:f,join:h}=jo;if(n&&[l,d,f,h].indexOf(o)>=0&&n!==this._joinRef())return;let v=this._onMessage(o,r,n);if(r&&!v)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(m=>{var j,w,_;return((j=m.filter)===null||j===void 0?void 0:j.event)==="*"||((_=(w=m.filter)===null||w===void 0?void 0:w.event)===null||_===void 0?void 0:_.toLocaleLowerCase())===o}).map(m=>m.callback(v,n)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var j,w,_,S,E,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const C=m.id,D=(j=m.filter)===null||j===void 0?void 0:j.event;return C&&((w=r.ids)===null||w===void 0?void 0:w.includes(C))&&(D==="*"||D?.toLocaleLowerCase()===((_=r.data)===null||_===void 0?void 0:_.type.toLocaleLowerCase()))}else{const C=(E=(S=m?.filter)===null||S===void 0?void 0:S.event)===null||E===void 0?void 0:E.toLocaleLowerCase();return C==="*"||C===((k=r?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof v=="object"&&"ids"in v){const j=v.data,{schema:w,table:_,commit_timestamp:S,type:E,errors:k}=j;v=Object.assign(Object.assign({},{schema:w,table:_,commit_timestamp:S,eventType:E,new:{},old:{},errors:k}),this._getPayloadRecords(j))}m.callback(v,n)})}_isClosed(){return this.state===Cs.closed}_isJoined(){return this.state===Cs.joined}_isJoining(){return this.state===Cs.joining}_isLeaving(){return this.state===Cs.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,n){const i=t.toLocaleLowerCase(),a={type:i,filter:r,callback:n};return this.bindings[i]?this.bindings[i].push(a):this.bindings[i]=[a],this}_off(t,r){const n=t.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(i=>{var a;return!(((a=i.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&U2.isEqual(i.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const n in t)if(t[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(jo.close,{},t)}_onError(t){this._on(jo.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Cs.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=yN(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=yN(t.columns,t.old_record)),r}}const gx=()=>{},qg={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},oB=[1e3,2e3,5e3,1e4],lB=1e4,cB=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class uB{constructor(t,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=ow,this.transport=null,this.heartbeatIntervalMs=qg.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=gx,this.ref=0,this.reconnectTimer=null,this.logger=gx,this.conn=null,this.sendBuffer=[],this.serializer=new eB,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=i=>{let a;return i?a=i:typeof fetch>"u"?a=(...o)=>xc(async()=>{const{default:l}=await Promise.resolve().then(()=>af);return{default:l}},void 0).then(({default:l})=>l(...o)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):a=fetch,(...o)=>a(...o)},!(!((n=r?.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${lw.websocket}`,this.httpEndpoint=oE(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=K9.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:J9}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},t?this.conn.close(t,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,n){this.logger(t,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Zm.connecting:return Rd.Connecting;case Zm.open:return Rd.Open;case Zm.closing:return Rd.Closing;default:return Rd.Closed}}isConnected(){return this.connectionState()===Rd.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const n=`realtime:${t}`,i=this.getChannels().find(a=>a.topic===n);if(i)return i;{const a=new U2(`realtime:${t}`,r,this);return this.channels.push(a),a}}push(t){const{topic:r,event:n,payload:i,ref:a}=t,o=()=>{this.encode(t,l=>{var d;(d=this.conn)===null||d===void 0||d.send(l)})};this.log("push",`${r} ${n} (${a})`,i),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(Z9,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},qg.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(f){this.log("error","error in heartbeat callback",f)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:i,payload:a,ref:o}=r,l=o?`(${o})`:"",d=a.status||"";this.log("receive",`${d} ${n} ${i} ${l}`.trim(),a),this.channels.filter(f=>f._isMember(n)).forEach(f=>f._trigger(i,a,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(jo.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const n=t.match(/\?/)?"&":"?",i=new URLSearchParams(r);return`${t}${n}${i}`}_workerObjectUrl(t){let r;if(t)r=t;else{const n=new Blob([cB],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const i={access_token:r,version:Q9};r&&n.updateJoinPayload(i),n.joinedOnce&&n._isJoined()&&n._push(jo.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(n=>{try{n(r)}catch(i){this.log("error",`error in ${t} callback`,i)}})}catch(n){this.log("error",`error triggering ${t} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new iE(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},qg.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,n,i,a,o,l,d,f,h;if(this.transport=(r=t?.transport)!==null&&r!==void 0?r:null,this.timeout=(n=t?.timeout)!==null&&n!==void 0?n:ow,this.heartbeatIntervalMs=(i=t?.heartbeatIntervalMs)!==null&&i!==void 0?i:qg.HEARTBEAT_INTERVAL,this.worker=(a=t?.worker)!==null&&a!==void 0?a:!1,this.accessToken=(o=t?.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(l=t?.heartbeatCallback)!==null&&l!==void 0?l:gx,t?.params&&(this.params=t.params),t?.logger&&(this.logger=t.logger),(t?.logLevel||t?.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(d=t?.reconnectAfterMs)!==null&&d!==void 0?d:(p=>oB[p-1]||lB),this.encode=(f=t?.encode)!==null&&f!==void 0?f:((p,v)=>v(JSON.stringify(p))),this.decode=(h=t?.decode)!==null&&h!==void 0?h:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t?.workerUrl}}}class $2 extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function $n(e){return typeof e=="object"&&e!==null&&"__isStorageError"in e}class dB extends $2{constructor(t,r,n){super(t),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class uw extends $2{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const z2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xc(async()=>{const{default:n}=await Promise.resolve().then(()=>af);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},fB=()=>Ut(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield xc(()=>Promise.resolve().then(()=>af),void 0)).Response:Response}),dw=e=>{if(Array.isArray(e))return e.map(r=>dw(r));if(typeof e=="function"||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([r,n])=>{const i=r.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));t[i]=dw(n)}),t},hB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},vx=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),mB=(e,t,r)=>Ut(void 0,void 0,void 0,function*(){const n=yield fB();e instanceof n&&!r?.noResolveJson?e.json().then(i=>{const a=e.status||500,o=i?.statusCode||a+"";t(new dB(vx(i),a,o))}).catch(i=>{t(new uw(vx(i),i))}):t(new uw(vx(e),e))}),pB=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"||!n?i:(hB(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,t?.duplex&&(i.duplex=t.duplex),Object.assign(Object.assign({},i),r))};function Op(e,t,r,n,i,a){return Ut(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,pB(t,n,i,a)).then(d=>{if(!d.ok)throw d;return n?.noResolveJson?d:d.json()}).then(d=>o(d)).catch(d=>mB(d,l,n))})})}function vp(e,t,r,n){return Ut(this,void 0,void 0,function*(){return Op(e,"GET",t,r,n)})}function No(e,t,r,n,i){return Ut(this,void 0,void 0,function*(){return Op(e,"POST",t,n,i,r)})}function fw(e,t,r,n,i){return Ut(this,void 0,void 0,function*(){return Op(e,"PUT",t,n,i,r)})}function gB(e,t,r,n){return Ut(this,void 0,void 0,function*(){return Op(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function q2(e,t,r,n,i){return Ut(this,void 0,void 0,function*(){return Op(e,"DELETE",t,n,i,r)})}class vB{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return Ut(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($n(t))return{data:null,error:t};throw t}})}}var lE;class yB{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[lE]="BlobDownloadBuilder",this.promise=null}asStream(){return new vB(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return Ut(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($n(t))return{data:null,error:t};throw t}})}}lE=Symbol.toStringTag;const xB={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},bN={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class wB{constructor(t,r={},n,i){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=n,this.fetch=z2(i)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,n,i){return Ut(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},bN),i);let l=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)});const d=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),d&&a.append("metadata",this.encodeMetadata(d))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,d&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(d)))),i?.headers&&(l=Object.assign(Object.assign({},l),i.headers));const f=this._removeEmptyFolders(r),h=this._getFinalPath(f),p=yield(t=="PUT"?fw:No)(this.fetch,`${this.url}/object/${h}`,a,Object.assign({headers:l},o?.duplex?{duplex:o.duplex}:{}));return{data:{path:f,id:p.Id,fullPath:p.Key},error:null}}catch(a){if(this.shouldThrowOnError)throw a;if($n(a))return{data:null,error:a};throw a}})}upload(t,r,n){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,n)})}uploadToSignedUrl(t,r,n,i){return Ut(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(t),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",r);try{let d;const f=Object.assign({upsert:bN.upsert},i),h=Object.assign(Object.assign({},this.headers),{"x-upsert":String(f.upsert)});typeof Blob<"u"&&n instanceof Blob?(d=new FormData,d.append("cacheControl",f.cacheControl),d.append("",n)):typeof FormData<"u"&&n instanceof FormData?(d=n,d.append("cacheControl",f.cacheControl)):(d=n,h["cache-control"]=`max-age=${f.cacheControl}`,h["content-type"]=f.contentType);const p=yield fw(this.fetch,l.toString(),d,{headers:h});return{data:{path:a,fullPath:p.Key},error:null}}catch(d){if(this.shouldThrowOnError)throw d;if($n(d))return{data:null,error:d};throw d}})}createSignedUploadUrl(t,r){return Ut(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t);const i=Object.assign({},this.headers);r?.upsert&&(i["x-upsert"]="true");const a=yield No(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new $2("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:l},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}update(t,r,n){return Ut(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,n)})}move(t,r,n){return Ut(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}copy(t,r,n){return Ut(this,void 0,void 0,function*(){try{return{data:{path:(yield No(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}createSignedUrl(t,r,n){return Ut(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),a=yield No(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:r},n?.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}createSignedUrls(t,r,n){return Ut(this,void 0,void 0,function*(){try{const i=yield No(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),a=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}download(t,r){const i=typeof r?.transform<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString(r?.transform||{}),o=a?`?${a}`:"",l=this._getFinalPath(t),d=()=>vp(this.fetch,`${this.url}/${i}/${l}${o}`,{headers:this.headers,noResolveJson:!0});return new yB(d,this.shouldThrowOnError)}info(t){return Ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const n=yield vp(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:dw(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}exists(t){return Ut(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield gB(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n)&&n instanceof uw){const i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,r){const n=this._getFinalPath(t),i=[],a=r?.download?`download=${r.download===!0?"":r.download}`:"";a!==""&&i.push(a);const l=typeof r?.transform<"u"?"render/image":"object",d=this.transformOptsToQueryString(r?.transform||{});d!==""&&i.push(d);let f=i.join("&");return f!==""&&(f=`?${f}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${f}`)}}}remove(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield q2(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}list(t,r,n){return Ut(this,void 0,void 0,function*(){try{const i=Object.assign(Object.assign(Object.assign({},xB),r),{prefix:t||""});return{data:yield No(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}listV2(t,r){return Ut(this,void 0,void 0,function*(){try{const n=Object.assign({},t);return{data:yield No(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const cE="2.76.1",uE={"X-Client-Info":`storage-js/${cE}`};class bB{constructor(t,r={},n,i){this.shouldThrowOnError=!1;const a=new URL(t);i?.useNewHostname&&/supabase\.(co|in|red)$/.test(a.hostname)&&!a.hostname.includes("storage.supabase.")&&(a.hostname=a.hostname.replace("supabase.","storage.supabase.")),this.url=a.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uE),r),this.fetch=z2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return Ut(this,void 0,void 0,function*(){try{return{data:yield vp(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if($n(t))return{data:null,error:t};throw t}})}getBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield vp(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}createBucket(t){return Ut(this,arguments,void 0,function*(r,n={public:!1}){try{return{data:yield No(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:n.type,public:n.public,file_size_limit:n.fileSizeLimit,allowed_mime_types:n.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if($n(i))return{data:null,error:i};throw i}})}updateBucket(t,r){return Ut(this,void 0,void 0,function*(){try{return{data:yield fw(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if($n(n))return{data:null,error:n};throw n}})}emptyBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield q2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}}class _B{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},uE),r),this.fetch=z2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield No(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}listBuckets(t){return Ut(this,void 0,void 0,function*(){try{const r=new URLSearchParams;t?.limit!==void 0&&r.set("limit",t.limit.toString()),t?.offset!==void 0&&r.set("offset",t.offset.toString()),t?.sortColumn&&r.set("sortColumn",t.sortColumn),t?.sortOrder&&r.set("sortOrder",t.sortOrder),t?.search&&r.set("search",t.search);const n=r.toString(),i=n?`${this.url}/bucket?${n}`:`${this.url}/bucket`,a=yield vp(this.fetch,i,{headers:this.headers});return{data:Array.isArray(a)?a.filter(l=>l.type==="ANALYTICS"):[],error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield q2(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if($n(r))return{data:null,error:r};throw r}})}}const V2={"X-Client-Info":`storage-js/${cE}`,"Content-Type":"application/json"};class dE extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function wa(e){return typeof e=="object"&&e!==null&&"__isStorageVectorsError"in e}class yx extends dE{constructor(t,r,n){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class NB extends dE{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var _N;(function(e){e.InternalError="InternalError",e.S3VectorConflictException="S3VectorConflictException",e.S3VectorNotFoundException="S3VectorNotFoundException",e.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",e.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",e.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(_N||(_N={}));const W2=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xc(async()=>{const{default:n}=await Promise.resolve().then(()=>af);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},jB=e=>{if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},NN=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),SB=(e,t,r)=>Ut(void 0,void 0,void 0,function*(){if(e&&typeof e=="object"&&"status"in e&&"ok"in e&&typeof e.status=="number"&&!r?.noResolveJson){const i=e.status||500,a=e;if(typeof a.json=="function")a.json().then(o=>{const l=o?.statusCode||o?.code||i+"";t(new yx(NN(o),i,l))}).catch(()=>{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new yx(l,i,o))});else{const o=i+"",l=a.statusText||`HTTP ${i} error`;t(new yx(l,i,o))}}else t(new NB(NN(e),e))}),kB=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return n?(jB(n)?(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),i.body=JSON.stringify(n)):i.body=n,Object.assign(Object.assign({},i),r)):i};function CB(e,t,r,n,i,a){return Ut(this,void 0,void 0,function*(){return new Promise((o,l)=>{e(r,kB(t,n,i,a)).then(d=>{if(!d.ok)throw d;if(n?.noResolveJson)return d;const f=d.headers.get("content-type");return!f||!f.includes("application/json")?{}:d.json()}).then(d=>o(d)).catch(d=>SB(d,l,n))})})}function ba(e,t,r,n,i){return Ut(this,void 0,void 0,function*(){return CB(e,"POST",t,n,i,r)})}class EB{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},V2),r),this.fetch=W2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ba(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}getIndex(t,r){return Ut(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wa(n))return{data:null,error:n};throw n}})}listIndexes(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ba(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(wa(n))return{data:null,error:n};throw n}})}}class AB{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},V2),r),this.fetch=W2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return Ut(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ba(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}getVectors(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}listVectors(t){return Ut(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ba(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}queryVectors(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}deleteVectors(t){return Ut(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ba(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}}class PB{constructor(t,r={},n){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},V2),r),this.fetch=W2(n)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ba(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}getBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:yield ba(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}listBuckets(){return Ut(this,arguments,void 0,function*(t={}){try{return{data:yield ba(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}deleteBucket(t){return Ut(this,void 0,void 0,function*(){try{return{data:(yield ba(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(wa(r))return{data:null,error:r};throw r}})}}class TB extends PB{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new RB(this.url,this.headers,t,this.fetch)}}class RB extends EB{constructor(t,r,n,i){super(t,r,i),this.vectorBucketName=n}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return Ut(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return Ut(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return Ut(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return Ut(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new LB(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class LB extends AB{constructor(t,r,n,i,a){super(t,r,a),this.vectorBucketName=n,this.indexName=i}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return Ut(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return Ut(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return Ut(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return Ut(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return Ut(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class DB extends bB{constructor(t,r={},n,i){super(t,r,n,i)}from(t){return new wB(this.url,this.headers,t,this.fetch)}get vectors(){return new TB(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new _B(this.url+"/iceberg",this.headers,this.fetch)}}const IB="2.76.1";let zm="";typeof Deno<"u"?zm="deno":typeof document<"u"?zm="web":typeof navigator<"u"&&navigator.product==="ReactNative"?zm="react-native":zm="node";const OB={"X-Client-Info":`supabase-js-${zm}/${IB}`},MB={headers:OB},FB={schema:"public"},BB={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},UB={},$B=e=>{let t;return e?t=e:typeof fetch>"u"?t=XC:t=fetch,(...r)=>t(...r)},zB=()=>typeof Headers>"u"?eE:Headers,qB=(e,t,r)=>{const n=$B(r),i=zB();return async(a,o)=>{var l;const d=(l=await t())!==null&&l!==void 0?l:e;let f=new i(o?.headers);return f.has("apikey")||f.set("apikey",e),f.has("Authorization")||f.set("Authorization",`Bearer ${d}`),n(a,Object.assign(Object.assign({},o),{headers:f}))}};function VB(e){return e.endsWith("/")?e:e+"/"}function WB(e,t){var r,n;const{db:i,auth:a,realtime:o,global:l}=e,{db:d,auth:f,realtime:h,global:p}=t,v={db:Object.assign(Object.assign({},d),i),auth:Object.assign(Object.assign({},f),a),realtime:Object.assign(Object.assign({},h),o),storage:{},global:Object.assign(Object.assign(Object.assign({},p),l),{headers:Object.assign(Object.assign({},(r=p?.headers)!==null&&r!==void 0?r:{}),(n=l?.headers)!==null&&n!==void 0?n:{})}),accessToken:async()=>""};return e.accessToken?v.accessToken=e.accessToken:delete v.accessToken,v}function HB(e){const t=e?.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(VB(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const fE="2.76.1",eh=30*1e3,hw=3,xx=hw*eh,GB="http://localhost:9999",KB="supabase.auth.token",YB={"X-Client-Info":`gotrue-js/${fE}`},mw="X-Supabase-Api-Version",hE={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},QB=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,JB=600*1e3;class yp extends Error{constructor(t,r,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Xt(e){return typeof e=="object"&&e!==null&&"__isAuthError"in e}class ZB extends yp{constructor(t,r,n){super(t,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function XB(e){return Xt(e)&&e.name==="AuthApiError"}class Ld extends yp{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Vu extends yp{constructor(t,r,n,i){super(t,n,i),this.name=r,this.status=n}}class bu extends Vu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function eU(e){return Xt(e)&&e.name==="AuthSessionMissingError"}class qf extends Vu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Vg extends Vu{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class Wg extends Vu{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function tU(e){return Xt(e)&&e.name==="AuthImplicitGrantRedirectError"}class jN extends Vu{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class pw extends Vu{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function wx(e){return Xt(e)&&e.name==="AuthRetryableFetchError"}class SN extends Vu{constructor(t,r,n){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class gw extends Vu{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const Iv="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),kN=` 	
\r=`.split(""),rU=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<kN.length;t+=1)e[kN[t].charCodeAt(0)]=-2;for(let t=0;t<Iv.length;t+=1)e[Iv[t].charCodeAt(0)]=t;return e})();function CN(e,t,r){if(e!==null)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Iv[n]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const n=t.queue>>t.queuedBits-6&63;r(Iv[n]),t.queuedBits-=6}}function mE(e,t,r){const n=rU[e];if(n>-1)for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}}function EN(e){const t=[],r=o=>{t.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},a=o=>{iU(o,n,r)};for(let o=0;o<e.length;o+=1)mE(e.charCodeAt(o),i,a);return t.join("")}function nU(e,t){if(e<=127){t(e);return}else if(e<=2047){t(192|e>>6),t(128|e&63);return}else if(e<=65535){t(224|e>>12),t(128|e>>6&63),t(128|e&63);return}else if(e<=1114111){t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),t(128|e&63);return}throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}function sU(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const i=(n-55296)*1024&65535;n=(e.charCodeAt(r+1)-56320&65535|i)+65536,r+=1}nU(n,t)}}function iU(e,t,r){if(t.utf8seq===0){if(e<=127){r(e);return}for(let n=1;n<6;n+=1)if((e>>7-n&1)===0){t.utf8seq=n;break}if(t.utf8seq===2)t.codepoint=e&31;else if(t.utf8seq===3)t.codepoint=e&15;else if(t.utf8seq===4)t.codepoint=e&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|e&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function vh(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};for(let i=0;i<e.length;i+=1)mE(e.charCodeAt(i),r,n);return new Uint8Array(t)}function aU(e){const t=[];return sU(e,r=>t.push(r)),new Uint8Array(t)}function Id(e){const t=[],r={queue:0,queuedBits:0},n=i=>{t.push(i)};return e.forEach(i=>CN(i,r,n)),CN(null,r,n),t.join("")}function oU(e){return Math.round(Date.now()/1e3)+e}function lU(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e=="x"?t:t&3|8).toString(16)})}const ga=()=>typeof window<"u"&&typeof document<"u",Sd={tested:!1,writable:!1},pE=()=>{if(!ga())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Sd.tested)return Sd.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Sd.tested=!0,Sd.writable=!0}catch{Sd.tested=!0,Sd.writable=!1}return Sd.writable};function cU(e){const t={},r=new URL(e);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((i,a)=>{t[a]=i})}catch{}return r.searchParams.forEach((n,i)=>{t[i]=n}),t}const gE=e=>{let t;return e?t=e:typeof fetch>"u"?t=(...r)=>xc(async()=>{const{default:n}=await Promise.resolve().then(()=>af);return{default:n}},void 0).then(({default:n})=>n(...r)):t=fetch,(...r)=>t(...r)},uU=e=>typeof e=="object"&&e!==null&&"status"in e&&"ok"in e&&"json"in e&&typeof e.json=="function",th=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},kd=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},hu=async(e,t)=>{await e.removeItem(t)};class M0{constructor(){this.promise=new M0.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}M0.promiseConstructor=Promise;function bx(e){const t=e.split(".");if(t.length!==3)throw new gw("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!QB.test(t[n]))throw new gw("JWT not in base64url format");return{header:JSON.parse(EN(t[0])),payload:JSON.parse(EN(t[1])),signature:vh(t[2]),raw:{header:t[0],payload:t[1]}}}async function dU(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}function fU(e,t){return new Promise((n,i)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await e(a);if(!t(a,null,o)){n(o);return}}catch(o){if(!t(a,o)){i(o);return}}})()})}function hU(e){return("0"+e.toString(16)).substr(-2)}function mU(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let i="";for(let a=0;a<56;a++)i+=r.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,hU).join("")}async function pU(e){const r=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",r),i=new Uint8Array(n);return Array.from(i).map(a=>String.fromCharCode(a)).join("")}async function gU(e){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),e;const r=await pU(e);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Vf(e,t,r=!1){const n=mU();let i=n;r&&(i+="/PASSWORD_RECOVERY"),await th(e,`${t}-code-verifier`,i);const a=await gU(n);return[a,n===a?"plain":"s256"]}const vU=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function yU(e){const t=e.headers.get(mw);if(!t||!t.match(vU))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function xU(e){if(!e)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(e<=t)throw new Error("JWT has expired")}function wU(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const bU=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Wf(e){if(!bU.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function _x(){const e={};return new Proxy(e,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function AN(e){return JSON.parse(JSON.stringify(e))}const Cd=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),_U=[502,503,504];async function PN(e){var t;if(!uU(e))throw new pw(Cd(e),0);if(_U.includes(e.status))throw new pw(Cd(e),e.status);let r;try{r=await e.json()}catch(a){throw new Ld(Cd(a),a)}let n;const i=yU(e);if(i&&i.getTime()>=hE["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new SN(Cd(r),e.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new bu}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new SN(Cd(r),e.status,r.weak_password.reasons);throw new ZB(Cd(r),e.status||500,n)}const NU=(e,t,r,n)=>{const i={method:e,headers:t?.headers||{}};return e==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};async function yr(e,t,r,n){var i;const a=Object.assign({},n?.headers);a[mw]||(a[mw]=hE["2024-01-01"].name),n?.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",d=await jU(e,t,r+l,{headers:a,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(d):{data:Object.assign({},d),error:null}}async function jU(e,t,r,n,i,a){const o=NU(t,n,i,a);let l;try{l=await e(r,Object.assign({},o))}catch(d){throw console.error(d),new pw(Cd(d),0)}if(l.ok||await PN(l),n?.noResolveJson)return l;try{return await l.json()}catch(d){await PN(d)}}function wo(e){var t;let r=null;CU(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=oU(e.expires_in)));const n=(t=e.user)!==null&&t!==void 0?t:e;return{data:{session:r,user:n},error:null}}function TN(e){const t=wo(e);return!t.error&&e.weak_password&&typeof e.weak_password=="object"&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&typeof e.weak_password.message=="string"&&e.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(t.data.weak_password=e.weak_password),t}function Nu(e){var t;return{data:{user:(t=e.user)!==null&&t!==void 0?t:e},error:null}}function SU(e){return{data:e,error:null}}function kU(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a}=e,o=qu(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:a},d=Object.assign({},o);return{data:{properties:l,user:d},error:null}}function RN(e){return e}function CU(e){return e.access_token&&e.refresh_token&&e.expires_in}const Nx=["global","local","others"];class EU{constructor({url:t="",headers:r={},fetch:n}){this.url=t,this.headers=r,this.fetch=gE(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=Nx[0]){if(Nx.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Nx.join(", ")}`);try{return await yr(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Xt(n))return{data:null,error:n};throw n}}async inviteUserByEmail(t,r={}){try{return await yr(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:Nu})}catch(n){if(Xt(n))return{data:{user:null},error:n};throw n}}async generateLink(t){try{const{options:r}=t,n=qu(t,["options"]),i=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),await yr(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:kU,redirectTo:r?.redirectTo})}catch(r){if(Xt(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await yr(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:Nu})}catch(r){if(Xt(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,n,i,a,o,l,d;try{const f={nextPage:null,lastPage:0,total:0},h=await yr(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:RN});if(h.error)throw h.error;const p=await h.json(),v=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(d=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return m.length>0&&(m.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);f[`${_}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Xt(f))return{data:{users:[]},error:f};throw f}}async getUserById(t){Wf(t);try{return await yr(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:Nu})}catch(r){if(Xt(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){Wf(t);try{return await yr(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:Nu})}catch(n){if(Xt(n))return{data:{user:null},error:n};throw n}}async deleteUser(t,r=!1){Wf(t);try{return await yr(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:Nu})}catch(n){if(Xt(n))return{data:{user:null},error:n};throw n}}async _listFactors(t){Wf(t.userId);try{const{data:r,error:n}=await yr(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:r,error:n}}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _deleteFactor(t){Wf(t.userId),Wf(t.id);try{return{data:await yr(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,n,i,a,o,l,d;try{const f={nextPage:null,lastPage:0,total:0},h=await yr(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=t?.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(a=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&a!==void 0?a:""},xform:RN});if(h.error)throw h.error;const p=await h.json(),v=(o=h.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(d=(l=h.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&d!==void 0?d:[];return m.length>0&&(m.forEach(j=>{const w=parseInt(j.split(";")[0].split("=")[1].substring(0,1)),_=JSON.parse(j.split(";")[1].split("=")[1]);f[`${_}Page`]=w}),f.total=parseInt(v)),{data:Object.assign(Object.assign({},p),f),error:null}}catch(f){if(Xt(f))return{data:{clients:[]},error:f};throw f}}async _createOAuthClient(t){try{return await yr(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await yr(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(t){try{return await yr(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await yr(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}}function LN(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Hf={debug:!!(globalThis&&pE()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class vE extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class AU extends vE{}async function PU(e,t,r){Hf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",e,t);const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Hf.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",e)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async i=>{if(i){Hf.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",e,i.name);try{return await r()}finally{Hf.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",e,i.name)}}else{if(t===0)throw Hf.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",e),new AU(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Hf.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function TU(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function yE(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function RU(e){return parseInt(e,16)}function LU(e){const t=new TextEncoder().encode(e);return"0x"+Array.from(t,n=>n.toString(16).padStart(2,"0")).join("")}function DU(e){var t;const{chainId:r,domain:n,expirationTime:i,issuedAt:a=new Date,nonce:o,notBefore:l,requestId:d,resources:f,scheme:h,uri:p,version:v}=e;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(o&&o.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${o}`);if(!p)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(v!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${v}`);if(!((t=e.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`)}const m=yE(e.address),j=h?`${h}://${n}`:n,w=e.statement?`${e.statement}
`:"",_=`${j} wants you to sign in with your Ethereum account:
${m}

${w}`;let S=`URI: ${p}
Version: ${v}
Chain ID: ${r}${o?`
Nonce: ${o}`:""}
Issued At: ${a.toISOString()}`;if(i&&(S+=`
Expiration Time: ${i.toISOString()}`),l&&(S+=`
Not Before: ${l.toISOString()}`),d&&(S+=`
Request ID: ${d}`),f){let E=`
Resources:`;for(const k of f){if(!k||typeof k!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${k}`);E+=`
- ${k}`}S+=E}return`${_}
${S}`}class vs extends Error{constructor({message:t,code:r,cause:n,name:i}){var a;super(t,{cause:n}),this.__isWebAuthnError=!0,this.name=(a=i??(n instanceof Error?n.name:void 0))!==null&&a!==void 0?a:"Unknown Error",this.code=r}}class Ov extends vs{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function IU({error:e,options:t}){var r,n,i;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vs({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if(e.name==="ConstraintError"){if(((r=a.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new vs({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if(t.mediation==="conditional"&&((n=a.authenticatorSelection)===null||n===void 0?void 0:n.userVerification)==="required")return new vs({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if(((i=a.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new vs({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if(e.name==="InvalidStateError")return new vs({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if(e.name==="NotAllowedError")return new vs({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="NotSupportedError")return a.pubKeyCredParams.filter(l=>l.type==="public-key").length===0?new vs({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new vs({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e});if(e.name==="SecurityError"){const o=window.location.hostname;if(xE(o)){if(a.rp.id!==o)return new vs({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="TypeError"){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new vs({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if(e.name==="UnknownError")return new vs({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function OU({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(e.name==="AbortError"){if(t.signal instanceof AbortSignal)return new vs({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if(e.name==="NotAllowedError")return new vs({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if(e.name==="SecurityError"){const n=window.location.hostname;if(xE(n)){if(r.rpId!==n)return new vs({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else return new vs({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e})}else if(e.name==="UnknownError")return new vs({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new vs({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}class MU{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const FU=new MU;function BU(e){if(!e)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,i=qu(e,["challenge","user","excludeCredentials"]),a=vh(t).buffer,o=Object.assign(Object.assign({},r),{id:vh(r.id).buffer}),l=Object.assign(Object.assign({},i),{challenge:a,user:o});if(n&&n.length>0){l.excludeCredentials=new Array(n.length);for(let d=0;d<n.length;d++){const f=n[d];l.excludeCredentials[d]=Object.assign(Object.assign({},f),{id:vh(f.id).buffer,type:f.type||"public-key",transports:f.transports})}}return l}function UU(e){if(!e)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=qu(e,["challenge","allowCredentials"]),i=vh(t).buffer,a=Object.assign(Object.assign({},n),{challenge:i});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let o=0;o<r.length;o++){const l=r[o];a.allowCredentials[o]=Object.assign(Object.assign({},l),{id:vh(l.id).buffer,type:l.type||"public-key",transports:l.transports})}}return a}function $U(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Id(new Uint8Array(e.response.attestationObject)),clientDataJSON:Id(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function zU(e){var t;if("toJSON"in e&&typeof e.toJSON=="function")return e.toJSON();const r=e,n=e.getClientExtensionResults(),i=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Id(new Uint8Array(i.authenticatorData)),clientDataJSON:Id(new Uint8Array(i.clientDataJSON)),signature:Id(new Uint8Array(i.signature)),userHandle:i.userHandle?Id(new Uint8Array(i.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function xE(e){return e==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function DN(){var e,t;return!!(ga()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((e=navigator?.credentials)===null||e===void 0?void 0:e.create)=="function"&&typeof((t=navigator?.credentials)===null||t===void 0?void 0:t.get)=="function")}async function qU(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ov("Browser returned unexpected credential type",t)}:{data:null,error:new Ov("Empty credential response",t)}}catch(t){return{data:null,error:IU({error:t,options:e})}}}async function VU(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Ov("Browser returned unexpected credential type",t)}:{data:null,error:new Ov("Empty credential response",t)}}catch(t){return{data:null,error:OU({error:t,options:e})}}}const WU={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"none"},HU={userVerification:"preferred",hints:["security-key"]};function Mv(...e){const t=i=>i!==null&&typeof i=="object"&&!Array.isArray(i),r=i=>i instanceof ArrayBuffer||ArrayBuffer.isView(i),n={};for(const i of e)if(i)for(const a in i){const o=i[a];if(o!==void 0)if(Array.isArray(o))n[a]=o;else if(r(o))n[a]=o;else if(t(o)){const l=n[a];t(l)?n[a]=Mv(l,o):n[a]=Mv(o)}else n[a]=o}return n}function GU(e,t){return Mv(WU,e,t||{})}function KU(e,t){return Mv(HU,e,t||{})}class YU{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:n,signal:i},a){try{const{data:o,error:l}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!o)return{data:null,error:l};const d=i??FU.createNewAbortSignal();if(o.webauthn.type==="create"){const{user:f}=o.webauthn.credential_options.publicKey;f.name||(f.name=`${f.id}:${n}`),f.displayName||(f.displayName=f.name)}switch(o.webauthn.type){case"create":{const f=GU(o.webauthn.credential_options.publicKey,a?.create),{data:h,error:p}=await qU({publicKey:f,signal:d});return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}case"request":{const f=KU(o.webauthn.credential_options.publicKey,a?.request),{data:h,error:p}=await VU(Object.assign(Object.assign({},o.webauthn.credential_options),{publicKey:f,signal:d}));return h?{data:{factorId:t,challengeId:o.id,webauthn:{type:o.webauthn.type,credential_response:h}},error:null}:{data:null,error:p}}}}catch(o){return Xt(o)?{data:null,error:o}:{data:null,error:new Ld("Unexpected error in challenge",o)}}}async _verify({challengeId:t,factorId:r,webauthn:n}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:n})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i}},a){if(!r)return{data:null,error:new yp("rpId is required for WebAuthn authentication")};try{if(!DN())return{data:null,error:new Ld("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:n},signal:i},{request:a});if(!o)return{data:null,error:l};const{webauthn:d}=o;return this._verify({factorId:t,challengeId:o.challengeId,webauthn:{type:d.type,rpId:r,rpOrigins:n,credential_response:d.credential_response}})}catch(o){return Xt(o)?{data:null,error:o}:{data:null,error:new Ld("Unexpected error in authenticate",o)}}}async _register({friendlyName:t,rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:n=typeof window<"u"?[window.location.origin]:void 0,signal:i},a){if(!r)return{data:null,error:new yp("rpId is required for WebAuthn registration")};try{if(!DN())return{data:null,error:new Ld("Browser does not support WebAuthn",null)};const{data:o,error:l}=await this._enroll({friendlyName:t});if(!o)return await this.client.mfa.listFactors().then(h=>{var p;return(p=h.data)===null||p===void 0?void 0:p.all.find(v=>v.factor_type==="webauthn"&&v.friendly_name===t&&v.status!=="unverified")}).then(h=>h?this.client.mfa.unenroll({factorId:h?.id}):void 0),{data:null,error:l};const{data:d,error:f}=await this._challenge({factorId:o.id,friendlyName:o.friendly_name,webauthn:{rpId:r,rpOrigins:n},signal:i},{create:a});return d?this._verify({factorId:o.id,challengeId:d.challengeId,webauthn:{rpId:r,rpOrigins:n,type:d.webauthn.type,credential_response:d.webauthn.credential_response}}):{data:null,error:f}}catch(o){return Xt(o)?{data:null,error:o}:{data:null,error:new Ld("Unexpected error in register",o)}}}}TU();const QU={url:GB,storageKey:KB,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:YB,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function IN(e,t,r){return await r()}const Gf={};class xp{get jwks(){var t,r;return(r=(t=Gf[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){Gf[this.storageKey]=Object.assign(Object.assign({},Gf[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=Gf[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){Gf[this.storageKey]=Object.assign(Object.assign({},Gf[this.storageKey]),{cachedAt:t})}constructor(t){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=xp.nextInstanceID,xp.nextInstanceID+=1,this.instanceID>0&&ga()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const i=Object.assign(Object.assign({},QU),t);if(this.logDebugMessages=!!i.debug,typeof i.debug=="function"&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new EU({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=gE(i.fetch),this.lock=i.lock||IN,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:ga()&&(!((r=globalThis?.navigator)===null||r===void 0)&&r.locks)?this.lock=PU:this.lock=IN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new YU(this)},this.persistSession?(i.storage?this.storage=i.storage:pE()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=LN(this.memoryStorage)),i.userStorage&&(this.userStorage=i.userStorage)):(this.memoryStorage={},this.storage=LN(this.memoryStorage)),ga()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...t){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fE}) ${new Date().toISOString()}`,...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{const r=cU(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),ga()&&this.detectSessionInUrl&&n!=="none"){const{data:i,error:a}=await this._getSessionFromURL(r,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),tU(a)){const d=(t=a.details)===null||t===void 0?void 0:t.code;if(d==="identity_already_exists"||d==="identity_not_found"||d==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=i;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Xt(r)?{error:r}:{error:new Ld("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,n,i;try{const a=await yr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=t?.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(i=t?.options)===null||i===void 0?void 0:i.captchaToken}},xform:wo}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Xt(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(t){var r,n,i;try{let a;if("email"in t){const{email:h,password:p,options:v}=t;let m=null,j=null;this.flowType==="pkce"&&([m,j]=await Vf(this.storage,this.storageKey)),a=await yr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:v?.emailRedirectTo,body:{email:h,password:p,data:(r=v?.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:v?.captchaToken},code_challenge:m,code_challenge_method:j},xform:wo})}else if("phone"in t){const{phone:h,password:p,options:v}=t;a=await yr(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:p,data:(n=v?.data)!==null&&n!==void 0?n:{},channel:(i=v?.channel)!==null&&i!==void 0?i:"sms",gotrue_meta_security:{captcha_token:v?.captchaToken}},xform:wo})}else throw new Vg("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const d=o.session,f=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(a){if(Xt(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(t){try{let r;if("email"in t){const{email:a,password:o,options:l}=t;r=await yr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:TN})}else if("phone"in t){const{phone:a,password:o,options:l}=t;r=await yr(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:TN})}else throw new Vg("You must provide either an email or phone number and a password");const{data:n,error:i}=r;return i?{data:{user:null,session:null},error:i}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new qf}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:i})}catch(r){if(Xt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(t){var r,n,i,a;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=t.options)===null||n===void 0?void 0:n.scopes,queryParams:(i=t.options)===null||i===void 0?void 0:i.queryParams,skipBrowserRedirect:(a=t.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,n,i,a,o,l,d,f,h,p,v;let m,j;if("message"in t)m=t.message,j=t.signature;else{const{chain:w,wallet:_,statement:S,options:E}=t;let k;if(ga())if(typeof _=="object")k=_;else{const I=window;if("ethereum"in I&&typeof I.ethereum=="object"&&"request"in I.ethereum&&typeof I.ethereum.request=="function")k=I.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof _!="object"||!E?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=_}const C=new URL((r=E?.url)!==null&&r!==void 0?r:window.location.href),D=await k.request({method:"eth_requestAccounts"}).then(I=>I).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!D||D.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const M=yE(D[0]);let F=(n=E?.signInWithEthereum)===null||n===void 0?void 0:n.chainId;if(!F){const I=await k.request({method:"eth_chainId"});F=RU(I)}const U={domain:C.host,address:M,statement:S,uri:C.href,version:"1",chainId:F,nonce:(i=E?.signInWithEthereum)===null||i===void 0?void 0:i.nonce,issuedAt:(o=(a=E?.signInWithEthereum)===null||a===void 0?void 0:a.issuedAt)!==null&&o!==void 0?o:new Date,expirationTime:(l=E?.signInWithEthereum)===null||l===void 0?void 0:l.expirationTime,notBefore:(d=E?.signInWithEthereum)===null||d===void 0?void 0:d.notBefore,requestId:(f=E?.signInWithEthereum)===null||f===void 0?void 0:f.requestId,resources:(h=E?.signInWithEthereum)===null||h===void 0?void 0:h.resources};m=DU(U),j=await k.request({method:"personal_sign",params:[LU(m),M]})}try{const{data:w,error:_}=await yr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:m,signature:j},!((p=t.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:(v=t.options)===null||v===void 0?void 0:v.captchaToken}}:null),xform:wo});if(_)throw _;return!w||!w.session||!w.user?{data:{user:null,session:null},error:new qf}:(w.session&&(await this._saveSession(w.session),await this._notifyAllSubscribers("SIGNED_IN",w.session)),{data:Object.assign({},w),error:_})}catch(w){if(Xt(w))return{data:{user:null,session:null},error:w};throw w}}async signInWithSolana(t){var r,n,i,a,o,l,d,f,h,p,v,m;let j,w;if("message"in t)j=t.message,w=t.signature;else{const{chain:_,wallet:S,statement:E,options:k}=t;let C;if(ga())if(typeof S=="object")C=S;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))C=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!k?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");C=S}const D=new URL((r=k?.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in C&&C.signIn){const M=await C.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},k?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),E?{statement:E}:null));let F;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")F=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)F=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in F&&"signature"in F&&(typeof F.signedMessage=="string"||F.signedMessage instanceof Uint8Array)&&F.signature instanceof Uint8Array)j=typeof F.signedMessage=="string"?F.signedMessage:new TextDecoder().decode(F.signedMessage),w=F.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in C)||typeof C.signMessage!="function"||!("publicKey"in C)||typeof C!="object"||!C.publicKey||!("toBase58"in C.publicKey)||typeof C.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");j=[`${D.host} wants you to sign in with your Solana account:`,C.publicKey.toBase58(),...E?["",E,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(i=(n=k?.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&i!==void 0?i:new Date().toISOString()}`,...!((a=k?.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${k.signInWithSolana.notBefore}`]:[],...!((o=k?.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${k.signInWithSolana.expirationTime}`]:[],...!((l=k?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${k.signInWithSolana.chainId}`]:[],...!((d=k?.signInWithSolana)===null||d===void 0)&&d.nonce?[`Nonce: ${k.signInWithSolana.nonce}`]:[],...!((f=k?.signInWithSolana)===null||f===void 0)&&f.requestId?[`Request ID: ${k.signInWithSolana.requestId}`]:[],...!((p=(h=k?.signInWithSolana)===null||h===void 0?void 0:h.resources)===null||p===void 0)&&p.length?["Resources",...k.signInWithSolana.resources.map(F=>`- ${F}`)]:[]].join(`
`);const M=await C.signMessage(new TextEncoder().encode(j),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");w=M}}try{const{data:_,error:S}=await yr(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:j,signature:Id(w)},!((v=t.options)===null||v===void 0)&&v.captchaToken?{gotrue_meta_security:{captcha_token:(m=t.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:wo});if(S)throw S;return!_||!_.session||!_.user?{data:{user:null,session:null},error:new qf}:(_.session&&(await this._saveSession(_.session),await this._notifyAllSubscribers("SIGNED_IN",_.session)),{data:Object.assign({},_),error:S})}catch(_){if(Xt(_))return{data:{user:null,session:null},error:_};throw _}}async _exchangeCodeForSession(t){const r=await kd(this.storage,`${this.storageKey}-code-verifier`),[n,i]=(r??"").split("/");try{const{data:a,error:o}=await yr(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:n},xform:wo});if(await hu(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new qf}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:i??null}),error:o})}catch(a){if(Xt(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(t){try{const{options:r,provider:n,token:i,access_token:a,nonce:o}=t,l=await yr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:i,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:r?.captchaToken}},xform:wo}),{data:d,error:f}=l;return f?{data:{user:null,session:null},error:f}:!d||!d.session||!d.user?{data:{user:null,session:null},error:new qf}:(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),{data:d,error:f})}catch(r){if(Xt(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(t){var r,n,i,a,o;try{if("email"in t){const{email:l,options:d}=t;let f=null,h=null;this.flowType==="pkce"&&([f,h]=await Vf(this.storage,this.storageKey));const{error:p}=await yr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(r=d?.data)!==null&&r!==void 0?r:{},create_user:(n=d?.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},code_challenge:f,code_challenge_method:h},redirectTo:d?.emailRedirectTo});return{data:{user:null,session:null},error:p}}if("phone"in t){const{phone:l,options:d}=t,{data:f,error:h}=await yr(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(i=d?.data)!==null&&i!==void 0?i:{},create_user:(a=d?.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:d?.captchaToken},channel:(o=d?.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:f?.message_id},error:h}}throw new Vg("You must provide either an email or phone number.")}catch(l){if(Xt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(t){var r,n;try{let i,a;"options"in t&&(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo,a=(n=t.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await yr(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:a}}),redirectTo:i,xform:wo});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const d=o.session,f=o.user;return d?.access_token&&(await this._saveSession(d),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",d)),{data:{user:f,session:d},error:null}}catch(i){if(Xt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithSSO(t){var r,n,i;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Vf(this.storage,this.storageKey)),await yr(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(n=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((i=t?.options)===null||i===void 0)&&i.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:SU})}catch(a){if(Xt(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;if(n)throw n;if(!r)throw new bu;const{error:i}=await yr(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:i}})}catch(t){if(Xt(t))return{data:{user:null,session:null},error:t};throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:n,type:i,options:a}=t,{error:o}=await yr(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}},redirectTo:a?.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in t){const{phone:n,type:i,options:a}=t,{data:o,error:l}=await yr(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:i,gotrue_meta_security:{captcha_token:a?.captchaToken}}});return{data:{user:null,session:null,messageId:o?.message_id},error:l}}throw new Vg("You must provide either an email or phone number and a type")}catch(r){if(Xt(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),i=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await i}catch{}})()),i}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const i=[...this.pendingInLock];await Promise.all(i),this.pendingInLock.splice(0,i.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await kd(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const n=t.expires_at?t.expires_at*1e3-Date.now()<xx:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",t.expires_at),!n){if(this.userStorage){const o=await kd(this.userStorage,this.storageKey+"-user");o?.user?t.user=o.user:t.user=_x()}if(this.storage.isServer&&t.user){let o=this.suppressGetSessionWarning;t=new Proxy(t,{get:(d,f,h)=>(!o&&f==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(d,f,h))})}return{data:{session:t},error:null}}const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{session:null},error:a}:{data:{session:i},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await yr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:Nu}):await this._useSession(async r=>{var n,i,a;const{data:o,error:l}=r;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new bu}:await yr(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&a!==void 0?a:void 0,xform:Nu})})}catch(r){if(Xt(r))return eU(r)&&(await this._removeSession(),await hu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async n=>{const{data:i,error:a}=n;if(a)throw a;if(!i.session)throw new bu;const o=i.session;let l=null,d=null;this.flowType==="pkce"&&t.email!=null&&([l,d]=await Vf(this.storage,this.storageKey));const{data:f,error:h}=await yr(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r?.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:l,code_challenge_method:d}),jwt:o.access_token,xform:Nu});if(h)throw h;return o.user=f.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Xt(n))return{data:{user:null},error:n};throw n}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new bu;const r=Date.now()/1e3;let n=r,i=!0,a=null;const{payload:o}=bx(t.access_token);if(o.exp&&(n=o.exp,i=n<=r),i){const{data:l,error:d}=await this._callRefreshToken(t.refresh_token);if(d)return{data:{user:null,session:null},error:d};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:d}=await this._getUser(t.access_token);if(d)throw d;a={access_token:t.access_token,refresh_token:t.refresh_token,user:l.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(r){if(Xt(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var n;if(!t){const{data:o,error:l}=r;if(l)throw l;t=(n=o.session)!==null&&n!==void 0?n:void 0}if(!t?.refresh_token)throw new bu;const{data:i,error:a}=await this._callRefreshToken(t.refresh_token);return a?{data:{user:null,session:null},error:a}:i?{data:{user:i.user,session:i},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Xt(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(t,r){try{if(!ga())throw new Wg("No browser detected.");if(t.error||t.error_description||t.error_code)throw new Wg(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new jN("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Wg("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new jN("No code detected.");const{data:E,error:k}=await this._exchangeCodeForSession(t.code);if(k)throw k;const C=new URL(window.location.href);return C.searchParams.delete("code"),window.history.replaceState(window.history.state,"",C.toString()),{data:{session:E.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:i,access_token:a,refresh_token:o,expires_in:l,expires_at:d,token_type:f}=t;if(!a||!l||!o||!f)throw new Wg("No session defined in URL");const h=Math.round(Date.now()/1e3),p=parseInt(l);let v=h+p;d&&(v=parseInt(d));const m=v-h;m*1e3<=eh&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${p}s`);const j=v-p;h-j>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",j,v,h):h-j<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",j,v,h);const{data:w,error:_}=await this._getUser(a);if(_)throw _;const S={provider_token:n,provider_refresh_token:i,access_token:a,expires_in:p,expires_at:v,refresh_token:o,token_type:f,user:w.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:t.type},error:null}}catch(n){if(Xt(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await kd(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{error:a};const o=(n=i.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,t);if(l&&!(XB(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return t!=="others"&&(await this._removeSession(),await hu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(t){const r=lU(),n={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(t){return await this._useSession(async r=>{var n,i;try{const{data:{session:a},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(t))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",t,"session",a)}catch(a){await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",a),console.error(a)}})}async resetPasswordForEmail(t,r={}){let n=null,i=null;this.flowType==="pkce"&&([n,i]=await Vf(this.storage,this.storageKey,!0));try{return await yr(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:n,code_challenge_method:i,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(a){if(Xt(a))return{data:null,error:a};throw a}}async getUserIdentities(){var t;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null}}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:n,error:i}=await this._useSession(async a=>{var o,l,d,f,h;const{data:p,error:v}=a;if(v)throw v;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(o=t.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=t.options)===null||l===void 0?void 0:l.scopes,queryParams:(d=t.options)===null||d===void 0?void 0:d.queryParams,skipBrowserRedirect:!0});return await yr(this.fetch,"GET",m,{headers:this.headers,jwt:(h=(f=p.session)===null||f===void 0?void 0:f.access_token)!==null&&h!==void 0?h:void 0})});if(i)throw i;return ga()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n?.url),{data:{provider:t.provider,url:n?.url},error:null}}catch(n){if(Xt(n))return{data:{provider:t.provider,url:null},error:n};throw n}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var n;try{const{error:i,data:{session:a}}=r;if(i)throw i;const{options:o,provider:l,token:d,access_token:f,nonce:h}=t,p=await yr(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(n=a?.access_token)!==null&&n!==void 0?n:void 0,body:{provider:l,id_token:d,access_token:f,nonce:h,link_identity:!0,gotrue_meta_security:{captcha_token:o?.captchaToken}},xform:wo}),{data:v,error:m}=p;return m?{data:{user:null,session:null},error:m}:!v||!v.session||!v.user?{data:{user:null,session:null},error:new qf}:(v.session&&(await this._saveSession(v.session),await this._notifyAllSubscribers("USER_UPDATED",v.session)),{data:v,error:m})}catch(i){if(Xt(i))return{data:{user:null,session:null},error:i};throw i}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)throw o;return await yr(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(i=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&i!==void 0?i:void 0})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await fU(async i=>(i>0&&await dU(200*Math.pow(2,i-1)),this._debug(r,"refreshing attempt",i),await yr(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:wo})),(i,a)=>{const o=200*Math.pow(2,i);return a&&wx(a)&&Date.now()+o-n<eh})}catch(n){if(this._debug(r,"error",n),Xt(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",n),ga()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:t,url:n},error:null}}async _recoverAndRefresh(){var t,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const i=await kd(this.storage,this.storageKey);if(i&&this.userStorage){let o=await kd(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:i.user},await th(this.userStorage,this.storageKey+"-user",o)),i.user=(t=o?.user)!==null&&t!==void 0?t:_x()}else if(i&&!i.user&&!i.user){const o=await kd(this.storage,this.storageKey+"-user");o&&o?.user?(i.user=o.user,await hu(this.storage,this.storageKey+"-user"),await th(this.storage,this.storageKey,i)):i.user=_x()}if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&await this._removeSession();return}const a=((r=i.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<xx;if(this._debug(n,`session has${a?"":" not"} expired with margin of ${xx}s`),a){if(this.autoRefreshToken&&i.refresh_token){const{error:o}=await this._callRefreshToken(i.refresh_token);o&&(console.error(o),wx(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(i.user&&i.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:l}=await this._getUser(i.access_token);!l&&o?.user?(i.user=o.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}}async _callRefreshToken(t){var r,n;if(!t)throw new bu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const i=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(i,"begin");try{this.refreshingDeferred=new M0;const{data:a,error:o}=await this._refreshAccessToken(t);if(o)throw o;if(!a.session)throw new bu;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={data:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(i,"error",a),Xt(a)){const o={data:null,error:a};return wx(a)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(i,"end")}}async _notifyAllSubscribers(t,r,n=!0){const i=`#_notifyAllSubscribers(${t})`;this._debug(i,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:t,session:r});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(t,r)}catch(d){a.push(d)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(i,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await th(this.userStorage,this.storageKey+"-user",{user:r.user});const i=Object.assign({},r);delete i.user;const a=AN(i);await th(this.storage,this.storageKey,a)}else{const i=AN(r);await th(this.storage,this.storageKey,i)}}async _removeSession(){this._debug("#_removeSession()"),await hu(this.storage,this.storageKey),await hu(this.storage,this.storageKey+"-code-verifier"),await hu(this.storage,this.storageKey+"-user"),this.userStorage&&await hu(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&ga()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),eh);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const i=Math.floor((n.expires_at*1e3-t)/eh);this._debug("#_autoRefreshTokenTick()",`access token expires in ${i} ticks, a tick lasts ${eh}ms, refresh threshold is ${hw} ticks`),i<=hw&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof vE)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!ga()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,n){const i=[`provider=${encodeURIComponent(r)}`];if(n?.redirectTo&&i.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n?.scopes&&i.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Vf(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});i.push(l.toString())}if(n?.queryParams){const a=new URLSearchParams(n.queryParams);i.push(a.toString())}return n?.skipBrowserRedirect&&i.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${t}?${i.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;return a?{data:null,error:a}:await yr(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _enroll(t){try{return await this._useSession(async r=>{var n,i;const{data:a,error:o}=r;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:d,error:f}=await yr(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a?.session)===null||n===void 0?void 0:n.access_token});return f?{data:null,error:f}:(t.factorType==="totp"&&d.type==="totp"&&(!((i=d?.totp)===null||i===void 0)&&i.qr_code)&&(d.totp.qr_code=`data:image/svg+xml;utf-8,${d.totp.qr_code}`),{data:d,error:null})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?$U(t.webauthn.credential_response):zU(t.webauthn.credential_response)})}:{code:t.code}),{data:l,error:d}=await yr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:o,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+l.expires_in},l)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",l),{data:l,error:d})})}catch(r){if(Xt(r))return{data:null,error:r};throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:i,error:a}=r;if(a)return{data:null,error:a};const o=await yr(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(n=i?.session)===null||n===void 0?void 0:n.access_token});if(o.error)return o;const{data:l}=o;if(l.type!=="webauthn")return{data:l,error:null};switch(l.webauthn.type){case"create":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:BU(l.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},l),{webauthn:Object.assign(Object.assign({},l.webauthn),{credential_options:Object.assign(Object.assign({},l.webauthn.credential_options),{publicKey:UU(l.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(Xt(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(t){const{data:r,error:n}=await this._challenge({factorId:t.factorId});return n?{data:null,error:n}:await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:n}=await this.getUser();if(n)return{data:null,error:n};const i={all:[],phone:[],totp:[],webauthn:[]};for(const a of(t=r?.factors)!==null&&t!==void 0?t:[])i.all.push(a),a.status==="verified"&&i[a.factor_type].push(a);return{data:i,error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async t=>{var r,n;const{data:{session:i},error:a}=t;if(a)return{data:null,error:a};if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=bx(i.access_token);let l=null;o.aal&&(l=o.aal);let d=l;((n=(r=i.user.factors)===null||r===void 0?void 0:r.filter(p=>p.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(d="aal2");const h=o.amr||[];return{data:{currentLevel:l,nextLevel:d,currentAuthenticationMethods:h},error:null}}))}async fetchJwk(t,r={keys:[]}){let n=r.keys.find(l=>l.kid===t);if(n)return n;const i=Date.now();if(n=this.jwks.keys.find(l=>l.kid===t),n&&this.jwks_cached_at+JB>i)return n;const{data:a,error:o}=await yr(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!a.keys||a.keys.length===0||(this.jwks=a,this.jwks_cached_at=i,n=a.keys.find(l=>l.kid===t),!n)?null:n}async getClaims(t,r={}){try{let n=t;if(!n){const{data:m,error:j}=await this.getSession();if(j||!m.session)return{data:null,error:j};n=m.session.access_token}const{header:i,payload:a,signature:o,raw:{header:l,payload:d}}=bx(n);r?.allowExpired||xU(a.exp);const f=!i.alg||i.alg.startsWith("HS")||!i.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(i.kid,r?.keys?{keys:r.keys}:r?.jwks);if(!f){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:i,signature:o},error:null}}const h=wU(i.alg),p=await crypto.subtle.importKey("jwk",f,h,!0,["verify"]);if(!await crypto.subtle.verify(h,p,o,aU(`${l}.${d}`)))throw new gw("Invalid JWT signature");return{data:{claims:a,header:i,signature:o},error:null}}catch(n){if(Xt(n))return{data:null,error:n};throw n}}}xp.nextInstanceID=0;const JU=xp;class ZU extends JU{constructor(t){super(t)}}class XU{constructor(t,r,n){var i,a,o;this.supabaseUrl=t,this.supabaseKey=r;const l=HB(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const d=`sb-${l.hostname.split(".")[0]}-auth-token`,f={db:FB,realtime:UB,auth:Object.assign(Object.assign({},BB),{storageKey:d}),global:MB},h=WB(n??{},f);this.storageKey=(i=h.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(p,v)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(v)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=qB(r,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new G9(new URL("rest/v1",l).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),this.storage=new DB(this.storageUrl.href,this.headers,this.fetch,n?.storage),h.accessToken||this._listenForAuthEvents()}get functions(){return new M9(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},n={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,n)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:n}=await this.auth.getSession();return(r=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,storageKey:o,flowType:l,lock:d,debug:f},h,p){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new ZU({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),h),storageKey:o,autoRefreshToken:t,persistSession:r,detectSessionInUrl:n,storage:i,userStorage:a,flowType:l,lock:d,debug:f,fetch:p,hasCustomAuthorizationHeader:Object.keys(this.headers).some(m=>m.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new uB(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n?.access_token)})}_handleTokenChanged(t,r,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.changedAccessToken=n,this.realtime.setAuth(n)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const e$=(e,t,r)=>new XU(e,t,r);function t$(){if(typeof window<"u"||typeof process>"u")return!1;const e=process.version;if(e==null)return!1;const t=e.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}t$()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const r$="https://imnecvcvhypnlvujajpn.supabase.co",n$="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImltbmVjdmN2aHlwbmx2dWphanBuIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU2OTI4NzMsImV4cCI6MjA3MTI2ODg3M30.NEeQADbjV6kTF2mZfESk2rbpyoFPa3aQzWZ4rgddUoI",Oe=e$(r$,n$,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0}}),wE=x.createContext(void 0),s$=({children:e})=>{const[t,r]=x.useState(null),[n,i]=x.useState(null),[a,o]=x.useState(!0),[l,d]=x.useState(()=>{const S=sessionStorage.getItem("selected_team_member");return S?JSON.parse(S):null}),[f,h]=x.useState(!1);x.useEffect(()=>{const{data:{subscription:S}}=Oe.auth.onAuthStateChange((E,k)=>{if(i(k),r(k?.user??null),k?.user?.email){const C=k.user.email.toLowerCase();h(["cook@","barista@","manager@","chef@"].some(M=>C.startsWith(M)))}else h(!1);o(!1),E==="SIGNED_OUT"&&(d(null),sessionStorage.removeItem("selected_team_member"))});return Oe.auth.getSession().then(({data:{session:E}})=>{if(i(E),r(E?.user??null),E?.user?.email){const k=E.user.email.toLowerCase();h(["cook@","barista@","manager@","chef@"].some(D=>k.startsWith(D)))}else h(!1);o(!1)}),()=>S.unsubscribe()},[]);const _={user:t,session:n,loading:a,signUp:async(S,E,k)=>{const C=`${window.location.origin}/`,{error:D}=await Oe.auth.signUp({email:S,password:E,options:{emailRedirectTo:C,data:k?{display_name:k}:void 0}});return{error:D}},signIn:async(S,E)=>{const{error:k}=await Oe.auth.signInWithPassword({email:S,password:E});return{error:k}},signOut:async()=>{d(null),sessionStorage.removeItem("selected_team_member"),await Oe.auth.signOut()},selectedTeamMember:l,selectTeamMember:S=>{d(S),sessionStorage.setItem("selected_team_member",JSON.stringify(S))},clearTeamMember:()=>{d(null),sessionStorage.removeItem("selected_team_member")},isSharedAccount:f};return s.jsx(wE.Provider,{value:_,children:e})},Aa=()=>{const e=x.useContext(wE);if(e===void 0)throw new Error("useAuth must be used within an AuthProvider");return e};function i$(){const[e,t]=x.useState("light");x.useEffect(()=>{const n=localStorage.getItem("theme"),i=window.matchMedia("(prefers-color-scheme: dark)").matches,a=n||(i?"dark":"light");t(a),document.documentElement.classList.toggle("dark",a==="dark")},[]);const r=()=>{const n=e==="light"?"dark":"light";t(n),localStorage.setItem("theme",n),document.documentElement.classList.toggle("dark",n==="dark")};return s.jsx(ke,{variant:"ghost",size:"icon",onClick:r,className:"w-9 h-9",title:`Switch to ${e==="light"?"dark":"light"} mode`,children:e==="light"?s.jsx(jL,{className:"h-4 w-4"}):s.jsx(PL,{className:"h-4 w-4"})})}const Wu=()=>{const[e,t]=x.useState(null),[r,n]=x.useState(!0),[i,a]=x.useState(null),{toast:o}=qr(),l=async()=>{try{n(!0),a(null);const{data:{user:j},error:w}=await Oe.auth.getUser();if(w)throw new Error(`Authentication failed: ${w.message}`);if(!j)throw new Error("No authenticated user");console.log("[useUserRole] Fetching role for user:",j.id);const{data:_,error:S}=await Oe.from("user_roles").select("role").eq("user_id",j.id).order("role",{ascending:!0}).limit(1).maybeSingle();if(S)throw new Error(`Failed to fetch user role: ${S.message}`);if(!_){console.warn("[useUserRole] No role found for user. Defaulting to staff."),t("staff");return}console.log("[useUserRole] User role:",_.role),t(_.role)}catch(j){const w=j;console.error("[useUserRole] Error fetching user role:",w),a(w),o({title:"Error loading user role",description:w.message,variant:"destructive"})}finally{n(!1)}};return x.useEffect(()=>{l()},[]),x.useEffect(()=>{const{data:{subscription:j}}=Oe.auth.onAuthStateChange((w,_)=>{_?.user?l():t(null)});return()=>{j.unsubscribe()}},[]),{role:e,loading:r,error:i,isAdmin:e==="admin",isManager:e==="manager",isLeaderChef:e==="leader_chef",isStaff:e==="staff",canManageTeamMembers:e==="admin"||e==="manager"||e==="leader_chef",canEditWithoutPIN:e==="admin"||e==="manager",refetch:l}};function Qh(){const[e,t]=x.useState(null),[r,n]=x.useState(null),[i,a]=x.useState(null),[o,l]=x.useState(!0),[d,f]=x.useState(null);x.useEffect(()=>{h()},[]);const h=async()=>{try{l(!0),f(null);const{data:{user:v}}=await Oe.auth.getUser();if(!v)throw new Error("No authenticated user");const{data:m,error:j}=await Oe.rpc("get_current_user_context");if(j)throw j;if(m&&Array.isArray(m)&&m.length>0){const w=m[0];if(t(w),w.organization_id){const{data:_,error:S}=await Oe.from("organizations").select("*").eq("id",w.organization_id).single();!S&&_&&n(_)}if(w.department_id){const{data:_,error:S}=await Oe.from("departments").select("*").eq("id",w.department_id).single();!S&&_&&a(_)}}}catch(v){console.error("Error fetching user context:",v),f(v)}finally{l(!1)}};return{context:e,organization:r,department:i,loading:o,error:d,refresh:()=>{h()}}}function a$(){const[e,t]=x.useState(null),[r,n]=x.useState(!0);return x.useEffect(()=>{(async()=>{try{const{data:{user:a}}=await Oe.auth.getUser();if(a){const{data:o}=await Oe.from("profiles").select("organization_id").eq("user_id",a.id).single();o?.organization_id&&t(o.organization_id)}}catch(a){console.error("Error fetching organization ID:",a)}finally{n(!1)}})()},[]),{organizationId:e,loading:r}}const wp=({className:e="w-5 h-5",removeBackground:t=!1})=>t?s.jsx("img",{src:"/tampa-logo.png",alt:"Tampa APP",className:e,style:{objectFit:"contain"}}):s.jsx("div",{className:"bg-gradient-primary rounded-lg flex items-center justify-center p-1",children:s.jsx("img",{src:"/tampa-logo.png",alt:"Tampa APP",className:e,style:{objectFit:"contain"}})}),ON=[{name:"Dashboard",href:"/",icon:ip},{name:"Recipes",href:"/recipes",icon:ok},{name:"Labeling",href:"/labeling",icon:pk},{name:"Drafts",href:"/drafts",icon:hh},{name:"Inventory",href:"/inventory",icon:ki},{name:"Routine Tasks",href:"/routine-tasks",icon:Ya},{name:"Training",href:"/training",icon:xL},{name:"People",href:"/people",icon:Ao},{name:"Feed",href:"/feed",icon:Nv},{name:"Product Traffic Light",href:"/traffic-light",icon:bL},{name:"Analytics",href:"/analytics",icon:ip},{name:"Settings",href:"/settings",icon:Sc}];function o$(){const[e,t]=x.useState(!1),r=tf(),{signOut:n,user:i}=Aa(),{toast:a}=qr(),{role:o,loading:l}=Wu(),{organization:d,department:f,loading:h}=Qh(),p=async()=>{await n(),a({title:"Signed out",description:"You have been successfully signed out."})};return s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-muted/40",children:[s.jsxs("div",{className:Me("fixed inset-0 z-50 lg:hidden",e?"block":"hidden"),children:[s.jsx("div",{className:"fixed inset-0 bg-background/80 backdrop-blur-sm",onClick:()=>t(!1)}),s.jsxs("div",{className:"fixed inset-y-0 left-0 w-64 bg-card border-r shadow-modal",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wp,{className:"w-8 h-8"}),s.jsx("h1",{className:"font-bold text-lg",children:"Tampa APP"})]}),s.jsx(ke,{variant:"ghost",size:"icon",onClick:()=>t(!1),children:s.jsx(xn,{className:"w-5 h-5"})})]}),s.jsx("nav",{className:"p-4 space-y-2",children:ON.map(v=>{const m=r.pathname===v.href;return s.jsxs("a",{href:v.href,className:Me("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",m?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[s.jsx(v.icon,{className:"w-5 h-5"}),v.name]},v.name)})})]})]}),s.jsx("div",{className:"hidden lg:fixed lg:inset-y-0 lg:w-64 lg:flex lg:flex-col",children:s.jsxs("div",{className:"flex flex-col flex-1 bg-card border-r shadow-card",children:[s.jsxs("div",{className:"flex items-center gap-2 p-6 border-b",children:[s.jsx(wp,{className:"w-8 h-8"}),s.jsx("h1",{className:"font-bold text-lg",children:"Tampa APP"})]}),s.jsx("nav",{className:"flex-1 p-4 space-y-2",children:ON.map(v=>{const m=r.pathname===v.href;return s.jsxs("a",{href:v.href,className:Me("flex items-center gap-3 px-3 py-2 rounded-lg text-sm font-medium transition-colors",m?"bg-primary text-primary-foreground shadow-card":"text-muted-foreground hover:text-foreground hover:bg-accent"),children:[s.jsx(v.icon,{className:"w-5 h-5"}),v.name]},v.name)})})]})}),s.jsxs("div",{className:"lg:pl-64",children:[s.jsxs("div",{className:"sticky top-0 z-40 flex h-16 shrink-0 items-center gap-x-4 border-b bg-card/80 backdrop-blur-sm px-4 shadow-sm sm:gap-x-6 sm:px-6 lg:px-8",children:[s.jsx(ke,{variant:"ghost",size:"icon",className:"lg:hidden",onClick:()=>t(!0),children:s.jsx(NL,{className:"w-5 h-5"})}),s.jsx("div",{className:"flex flex-1 gap-x-4 self-stretch lg:gap-x-6",children:s.jsxs("div",{className:"flex flex-1 items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[!h&&s.jsxs(s.Fragment,{children:[d&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Organization:"}),s.jsx("span",{className:"font-medium",children:d.name})]}),f&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Department:"}),s.jsx("span",{className:"font-medium",children:f.name})]})]}),h&&s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading..."})})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(i$,{}),s.jsxs(O2,{children:[s.jsx(M2,{asChild:!0,children:s.jsxs(ke,{variant:"outline",size:"sm",className:"flex items-center gap-2",children:[s.jsx(Ru,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:i?.email?.split("@")[0]||"User"})]})}),s.jsxs(O0,{align:"end",className:"w-56",children:[s.jsx(ZC,{children:s.jsxs("div",{className:"flex flex-col space-y-1",children:[s.jsx("p",{className:"text-sm font-medium leading-none",children:i?.email}),!l&&o&&s.jsx("p",{className:"text-xs leading-none text-muted-foreground capitalize",children:o.replace("_"," ")})]})}),s.jsx(iw,{}),s.jsx(dl,{asChild:!0,children:s.jsxs(G_,{to:"/people",className:"flex items-center cursor-pointer",children:[s.jsx(Ao,{className:"w-4 h-4 mr-2"}),"Team Members"]})}),s.jsx(dl,{asChild:!0,children:s.jsxs(G_,{to:"/settings",className:"flex items-center cursor-pointer",children:[s.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Settings"]})}),s.jsx(iw,{}),s.jsxs(dl,{onClick:p,className:"text-red-600 focus:text-red-600 cursor-pointer",children:[s.jsx(_L,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]})})]}),s.jsx("main",{className:"py-8",children:s.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:s.jsx(r7,{})})})]})]})}const Hg="tampa_print_queue",MN="1.0",bE=x.createContext(void 0);function l$({children:e}){const{toast:t}=qr(),[r,n]=x.useState(!1),[i,a]=x.useState([]);x.useEffect(()=>{try{const f=localStorage.getItem(Hg);if(f){const h=JSON.parse(f);if(h.version!==MN){console.warn("Queue version mismatch, clearing old queue"),localStorage.removeItem(Hg);return}const p=new Date,v=h.items.filter(m=>{const j=new Date(m.addedAt);return(p.getTime()-j.getTime())/(1e3*60*60*24)<7});v.length!==h.items.length&&console.log(`Removed ${h.items.length-v.length} expired items`),console.log("PrintQueueProvider: Loading items from storage:",v.length),a(v)}}catch(f){console.error("Failed to load print queue:",f),t({title:"Queue Load Error",description:"Failed to restore print queue. Starting fresh.",variant:"destructive"}),localStorage.removeItem(Hg)}},[t]),x.useEffect(()=>{try{const f={version:MN,lastUpdated:new Date().toISOString(),items:i};console.log("PrintQueueProvider: Saving items to storage:",i.length),localStorage.setItem(Hg,JSON.stringify(f))}catch(f){console.error("Failed to save print queue:",f)}},[i]);const o=x.useCallback(()=>{n(!0)},[]),l=x.useCallback(()=>{n(!1)},[]),d=x.useCallback(()=>{n(f=>!f)},[]);return s.jsx(bE.Provider,{value:{isOpen:r,items:i,openQueue:o,closeQueue:l,toggleQueue:d,setItems:a},children:e})}function c$(){const e=x.useContext(bE);if(e===void 0)throw new Error("usePrintQueueContext must be used within a PrintQueueProvider");return e}const u$=({children:e})=>{const{user:t,loading:r}=Aa();return r?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-muted/20 to-muted/40",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):t?s.jsx(s.Fragment,{children:e}):s.jsx(b3,{to:"/auth",replace:!0})},d$=zh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function pt({className:e,variant:t,...r}){return s.jsx("div",{className:Me(d$({variant:t}),e),...r})}const FN=e=>{let t;const r=new Set,n=(f,h)=>{const p=typeof f=="function"?f(t):f;if(!Object.is(p,t)){const v=t;t=h??(typeof p!="object"||p===null)?p:Object.assign({},t,p),r.forEach(m=>m(t,v))}},i=()=>t,l={setState:n,getState:i,getInitialState:()=>d,subscribe:f=>(r.add(f),()=>r.delete(f))},d=t=e(n,i,l);return l},f$=(e=>e?FN(e):FN),h$=e=>e;function m$(e,t=h$){const r=Ve.useSyncExternalStore(e.subscribe,Ve.useCallback(()=>t(e.getState()),[e,t]),Ve.useCallback(()=>t(e.getInitialState()),[e,t]));return Ve.useDebugValue(r),r}const p$=e=>{const t=f$(e),r=n=>m$(t,n);return Object.assign(r,t),r},g$=(e=>p$);function v$(e,t){let r;try{r=e()}catch{return}return{getItem:i=>{var a;const o=d=>d===null?null:JSON.parse(d,void 0),l=(a=r.getItem(i))!=null?a:null;return l instanceof Promise?l.then(o):o(l)},setItem:(i,a)=>r.setItem(i,JSON.stringify(a,void 0)),removeItem:i=>r.removeItem(i)}}const vw=e=>t=>{try{const r=e(t);return r instanceof Promise?r:{then(n){return vw(n)(r)},catch(n){return this}}}catch(r){return{then(n){return this},catch(n){return vw(n)(r)}}}},y$=(e,t)=>(r,n,i)=>{let a={storage:v$(()=>localStorage),partialize:w=>w,version:0,merge:(w,_)=>({..._,...w}),...t},o=!1;const l=new Set,d=new Set;let f=a.storage;if(!f)return e((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),r(...w)},n,i);const h=()=>{const w=a.partialize({...n()});return f.setItem(a.name,{state:w,version:a.version})},p=i.setState;i.setState=(w,_)=>(p(w,_),h());const v=e((...w)=>(r(...w),h()),n,i);i.getInitialState=()=>v;let m;const j=()=>{var w,_;if(!f)return;o=!1,l.forEach(E=>{var k;return E((k=n())!=null?k:v)});const S=((_=a.onRehydrateStorage)==null?void 0:_.call(a,(w=n())!=null?w:v))||void 0;return vw(f.getItem.bind(f))(a.name).then(E=>{if(E)if(typeof E.version=="number"&&E.version!==a.version){if(a.migrate){const k=a.migrate(E.state,E.version);return k instanceof Promise?k.then(C=>[!0,C]):[!0,k]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,E.state];return[!1,void 0]}).then(E=>{var k;const[C,D]=E;if(m=a.merge(D,(k=n())!=null?k:v),r(m,!0),C)return h()}).then(()=>{S?.(m,void 0),m=n(),o=!0,d.forEach(E=>E(m))}).catch(E=>{S?.(void 0,E)})};return i.persist={setOptions:w=>{a={...a,...w},w.storage&&(f=w.storage)},clearStorage:()=>{f?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>j(),hasHydrated:()=>o,onHydrate:w=>(l.add(w),()=>{l.delete(w)}),onFinishHydration:w=>(d.add(w),()=>{d.delete(w)})},a.skipHydration||j(),m||v},x$=y$,H2=g$()(x$((e,t)=>({timers:[],addTimer:r=>{const n=crypto.randomUUID(),i={...r,id:n,elapsedTime:0};return e(a=>({timers:[...a.timers,i]})),n},pauseTimer:r=>{e(n=>({timers:n.timers.map(i=>i.id===r?{...i,isRunning:!1}:i)}))},resumeTimer:r=>{e(n=>({timers:n.timers.map(i=>i.id===r?{...i,isRunning:!0,startTime:Date.now()-i.elapsedTime}:i)}))},updateTimer:(r,n)=>{e(i=>({timers:i.timers.map(a=>a.id===r?{...a,elapsedTime:n}:a)}))},removeTimer:r=>{e(n=>({timers:n.timers.filter(i=>i.id!==r)}))},getActiveTimers:()=>t().timers.filter(r=>r.isRunning),getTimerById:r=>t().timers.find(n=>n.id===r)}),{name:"timer-storage"}));function w$(){const{getActiveTimers:e}=H2(),t=e();if(t.length===0)return null;const r=n=>{const i=Math.floor(n/1e3),a=Math.floor(i/3600),o=Math.floor(i%3600/60),l=i%60;return`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}`};return s.jsx("div",{className:"fixed bottom-4 right-4 z-50 space-y-2",children:t.map(n=>s.jsxs(pt,{variant:"secondary",className:"px-3 py-2 text-sm animate-pulse",children:[s.jsx(F1,{className:"w-4 h-4 mr-2"}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{className:"font-medium",children:n.recipeName}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[n.staffName," - ",r(n.elapsedTime)]})]})]},n.id))})}function b$(){const{timers:e,updateTimer:t}=H2();return x.useEffect(()=>{const r=setInterval(()=>{e.forEach(n=>{if(n.isRunning){const i=Date.now()-n.startTime;t(n.id,i)}})},1e3);return()=>clearInterval(r)},[e,t]),null}function Gi({title:e,value:t,change:r,changeType:n="neutral",icon:i,className:a,flags:o}){return s.jsx("div",{className:Me("bg-card rounded-lg border shadow-card hover:shadow-card-hover transition-shadow p-6",a),children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:e}),s.jsx("p",{className:"text-2xl font-bold text-foreground mt-2",children:t}),r&&s.jsx("p",{className:Me("text-sm mt-2 font-medium",n==="positive"&&"text-success",n==="negative"&&"text-destructive",n==="neutral"&&"text-muted-foreground"),children:r}),o&&s.jsxs("div",{className:"flex gap-3 mt-2",children:[o.yellow!==void 0&&o.yellow>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(m_,{className:"w-4 h-4 text-yellow-500",fill:"currentColor"}),s.jsx("span",{className:"text-xs font-medium text-yellow-600 dark:text-yellow-400",children:o.yellow})]}),o.green!==void 0&&o.green>0&&s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(m_,{className:"w-4 h-4 text-green-500",fill:"currentColor"}),s.jsx("span",{className:"text-xs font-medium text-green-600 dark:text-green-400",children:o.green})]})]})]}),s.jsx("div",{className:"flex-shrink-0",children:s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx(i,{className:"w-6 h-6 text-primary"})})})]})})}const it=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Me("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));it.displayName="Card";const sr=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Me("flex flex-col space-y-1.5 p-6",e),...t}));sr.displayName="CardHeader";const pr=x.forwardRef(({className:e,...t},r)=>s.jsx("h3",{ref:r,className:Me("text-2xl font-semibold leading-none tracking-tight",e),...t}));pr.displayName="CardTitle";const xa=x.forwardRef(({className:e,...t},r)=>s.jsx("p",{ref:r,className:Me("text-sm text-muted-foreground",e),...t}));xa.displayName="CardDescription";const ot=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Me("p-6 pt-0",e),...t}));ot.displayName="CardContent";const _$=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Me("flex items-center p-6 pt-0",e),...t}));_$.displayName="CardFooter";const G2=6048e5,N$=864e5,_E=6e4,NE=36e5,Gg=43200,BN=1440,UN=Symbol.for("constructDateFrom");function ds(e,t){return typeof e=="function"?e(t):e&&typeof e=="object"&&UN in e?e[UN](t):e instanceof Date?new e.constructor(t):new Date(t)}function Tr(e,t){return ds(t||e,e)}function xs(e,t,r){const n=Tr(e,r?.in);return isNaN(t)?ds(r?.in||e,NaN):(t&&n.setDate(n.getDate()+t),n)}function Ro(e,t,r){const n=Tr(e,r?.in);if(isNaN(t))return ds(r?.in||e,NaN);if(!t)return n;const i=n.getDate(),a=ds(r?.in||e,n.getTime());a.setMonth(n.getMonth()+t+1,0);const o=a.getDate();return i>=o?a:(n.setFullYear(a.getFullYear(),a.getMonth(),i),n)}let j$={};function Jh(){return j$}function wl(e,t){const r=Jh(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Tr(e,t?.in),a=i.getDay(),o=(a<n?7:0)+a-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function zd(e,t){return wl(e,{...t,weekStartsOn:1})}function jE(e,t){const r=Tr(e,t?.in),n=r.getFullYear(),i=ds(r,0);i.setFullYear(n+1,0,4),i.setHours(0,0,0,0);const a=zd(i),o=ds(r,0);o.setFullYear(n,0,4),o.setHours(0,0,0,0);const l=zd(o);return r.getTime()>=a.getTime()?n+1:r.getTime()>=l.getTime()?n:n-1}function Eh(e){const t=Tr(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Hu(e,...t){const r=ds.bind(null,e||t.find(n=>typeof n=="object"));return t.map(r)}function qd(e,t){const r=Tr(e,t?.in);return r.setHours(0,0,0,0),r}function ol(e,t,r){const[n,i]=Hu(r?.in,e,t),a=qd(n),o=qd(i),l=+a-Eh(a),d=+o-Eh(o);return Math.round((l-d)/N$)}function S$(e,t){const r=jE(e,t),n=ds(e,0);return n.setFullYear(r,0,4),n.setHours(0,0,0,0),zd(n)}function yw(e,t,r){return xs(e,t*7,r)}function k$(e,t,r){return Ro(e,t*12,r)}function C$(e,t){let r,n=t?.in;return e.forEach(i=>{!n&&typeof i=="object"&&(n=ds.bind(null,i));const a=Tr(i,n);(!r||r<a||isNaN(+a))&&(r=a)}),ds(n,r||NaN)}function E$(e,t){let r,n=t?.in;return e.forEach(i=>{!n&&typeof i=="object"&&(n=ds.bind(null,i));const a=Tr(i,n);(!r||r>a||isNaN(+a))&&(r=a)}),ds(n,r||NaN)}function pv(e,t){const r=+Tr(e)-+Tr(t);return r<0?-1:r>0?1:r}function K2(e){return ds(e,Date.now())}function ci(e,t,r){const[n,i]=Hu(r?.in,e,t);return+qd(n)==+qd(i)}function Y2(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function A$(e){return!(!Y2(e)&&typeof e!="number"||isNaN(+Tr(e)))}function Ah(e,t,r){const[n,i]=Hu(r?.in,e,t),a=n.getFullYear()-i.getFullYear(),o=n.getMonth()-i.getMonth();return a*12+o}function P$(e,t,r){const[n,i]=Hu(r?.in,e,t),a=wl(n,r),o=wl(i,r),l=+a-Eh(a),d=+o-Eh(o);return Math.round((l-d)/G2)}function T$(e){return t=>{const n=(e?Math[e]:Math.trunc)(t);return n===0?0:n}}function R$(e,t){return+Tr(e)-+Tr(t)}function L$(e,t){const r=Tr(e,t?.in);return r.setHours(23,59,59,999),r}function F0(e,t){const r=Tr(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(23,59,59,999),r}function D$(e,t){const r=Tr(e,t?.in);return+L$(r,t)==+F0(r,t)}function I$(e,t,r){const[n,i,a]=Hu(r?.in,e,e,t),o=pv(i,a),l=Math.abs(Ah(i,a));if(l<1)return 0;i.getMonth()===1&&i.getDate()>27&&i.setDate(30),i.setMonth(i.getMonth()-o*l);let d=pv(i,a)===-o;D$(n)&&l===1&&pv(n,a)===1&&(d=!1);const f=o*(l-+d);return f===0?0:f}function O$(e,t,r){const n=R$(e,t)/1e3;return T$(r?.roundingMethod)(n)}function Ki(e,t){const r=Tr(e,t?.in);return r.setDate(1),r.setHours(0,0,0,0),r}function SE(e,t){const r=Tr(e,t?.in);return r.setFullYear(r.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Q2(e,t){const r=Jh(),n=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,i=Tr(e,t?.in),a=i.getDay(),o=(a<n?-7:0)+6-(a-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}function kE(e,t){return Q2(e,{...t,weekStartsOn:1})}const M$={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},F$=(e,t,r)=>{let n;const i=M$[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r?.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function jx(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const B$={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},U$={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},$$={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},z$={date:jx({formats:B$,defaultWidth:"full"}),time:jx({formats:U$,defaultWidth:"full"}),dateTime:jx({formats:$$,defaultWidth:"full"})},q$={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},V$=(e,t,r,n)=>q$[e];function Lm(e){return(t,r)=>{const n=r?.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r?.width?String(r.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r?.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[o]}const a=e.argumentCallback?e.argumentCallback(t):t;return i[a]}}const W$={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},H$={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},G$={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},K$={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Y$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Q$={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},J$=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},Z$={ordinalNumber:J$,era:Lm({values:W$,defaultWidth:"wide"}),quarter:Lm({values:H$,defaultWidth:"wide",argumentCallback:e=>e-1}),month:Lm({values:G$,defaultWidth:"wide"}),day:Lm({values:K$,defaultWidth:"wide"}),dayPeriod:Lm({values:Y$,defaultWidth:"wide",formattingValues:Q$,defaultFormattingWidth:"wide"})};function Dm(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],a=t.match(i);if(!a)return null;const o=a[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],d=Array.isArray(l)?ez(l,p=>p.test(o)):X$(l,p=>p.test(o));let f;f=e.valueCallback?e.valueCallback(d):d,f=r.valueCallback?r.valueCallback(f):f;const h=t.slice(o.length);return{value:f,rest:h}}}function X$(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function ez(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function tz(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],a=t.match(e.parsePattern);if(!a)return null;let o=e.valueCallback?e.valueCallback(a[0]):a[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const rz=/^(\d+)(th|st|nd|rd)?/i,nz=/\d+/i,sz={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},iz={any:[/^b/i,/^(a|c)/i]},az={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},oz={any:[/1/i,/2/i,/3/i,/4/i]},lz={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},cz={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},uz={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},dz={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},fz={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},hz={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},mz={ordinalNumber:tz({matchPattern:rz,parsePattern:nz,valueCallback:e=>parseInt(e,10)}),era:Dm({matchPatterns:sz,defaultMatchWidth:"wide",parsePatterns:iz,defaultParseWidth:"any"}),quarter:Dm({matchPatterns:az,defaultMatchWidth:"wide",parsePatterns:oz,defaultParseWidth:"any",valueCallback:e=>e+1}),month:Dm({matchPatterns:lz,defaultMatchWidth:"wide",parsePatterns:cz,defaultParseWidth:"any"}),day:Dm({matchPatterns:uz,defaultMatchWidth:"wide",parsePatterns:dz,defaultParseWidth:"any"}),dayPeriod:Dm({matchPatterns:fz,defaultMatchWidth:"any",parsePatterns:hz,defaultParseWidth:"any"})},J2={code:"en-US",formatDistance:F$,formatLong:z$,formatRelative:V$,localize:Z$,match:mz,options:{weekStartsOn:0,firstWeekContainsDate:1}};function pz(e,t){const r=Tr(e,t?.in);return ol(r,SE(r))+1}function CE(e,t){const r=Tr(e,t?.in),n=+zd(r)-+S$(r);return Math.round(n/G2)+1}function EE(e,t){const r=Tr(e,t?.in),n=r.getFullYear(),i=Jh(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=ds(t?.in||e,0);o.setFullYear(n+1,0,a),o.setHours(0,0,0,0);const l=wl(o,t),d=ds(t?.in||e,0);d.setFullYear(n,0,a),d.setHours(0,0,0,0);const f=wl(d,t);return+r>=+l?n+1:+r>=+f?n:n-1}function gz(e,t){const r=Jh(),n=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,i=EE(e,t),a=ds(t?.in||e,0);return a.setFullYear(i,0,n),a.setHours(0,0,0,0),wl(a,t)}function AE(e,t){const r=Tr(e,t?.in),n=+wl(r,t)-+gz(r,t);return Math.round(n/G2)+1}function an(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const mu={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return an(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):an(r+1,2)},d(e,t){return an(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return an(e.getHours()%12||12,t.length)},H(e,t){return an(e.getHours(),t.length)},m(e,t){return an(e.getMinutes(),t.length)},s(e,t){return an(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return an(i,t.length)}},Kf={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},$N={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return mu.y(e,t)},Y:function(e,t,r,n){const i=EE(e,n),a=i>0?i:1-i;if(t==="YY"){const o=a%100;return an(o,2)}return t==="Yo"?r.ordinalNumber(a,{unit:"year"}):an(a,t.length)},R:function(e,t){const r=jE(e);return an(r,t.length)},u:function(e,t){const r=e.getFullYear();return an(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return an(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return an(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return mu.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return an(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=AE(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):an(i,t.length)},I:function(e,t,r){const n=CE(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):an(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):mu.d(e,t)},D:function(e,t,r){const n=pz(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):an(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(a);case"ee":return an(a,2);case"eo":return r.ordinalNumber(a,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),a=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(a);case"cc":return an(a,t.length);case"co":return r.ordinalNumber(a,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return an(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=Kf.noon:n===0?i=Kf.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=Kf.evening:n>=12?i=Kf.afternoon:n>=4?i=Kf.morning:i=Kf.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return mu.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):mu.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):an(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):an(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):mu.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):mu.s(e,t)},S:function(e,t){return mu.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return qN(n);case"XXXX":case"XX":return Ed(n);case"XXXXX":case"XXX":default:return Ed(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return qN(n);case"xxxx":case"xx":return Ed(n);case"xxxxx":case"xxx":default:return Ed(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+zN(n,":");case"OOOO":default:return"GMT"+Ed(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+zN(n,":");case"zzzz":default:return"GMT"+Ed(n,":")}},t:function(e,t,r){const n=Math.trunc(+e/1e3);return an(n,t.length)},T:function(e,t,r){return an(+e,t.length)}};function zN(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),a=n%60;return a===0?r+String(i):r+String(i)+t+an(a,2)}function qN(e,t){return e%60===0?(e>0?"-":"+")+an(Math.abs(e)/60,2):Ed(e,t)}function Ed(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=an(Math.trunc(n/60),2),a=an(n%60,2);return r+i+t+a}const VN=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},PE=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},vz=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return VN(e,t);let a;switch(n){case"P":a=t.dateTime({width:"short"});break;case"PP":a=t.dateTime({width:"medium"});break;case"PPP":a=t.dateTime({width:"long"});break;case"PPPP":default:a=t.dateTime({width:"full"});break}return a.replace("{{date}}",VN(n,t)).replace("{{time}}",PE(i,t))},yz={p:PE,P:vz},xz=/^D+$/,wz=/^Y+$/,bz=["D","DD","YY","YYYY"];function _z(e){return xz.test(e)}function Nz(e){return wz.test(e)}function jz(e,t,r){const n=Sz(e,t,r);if(console.warn(n),bz.includes(e))throw new RangeError(n)}function Sz(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const kz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ez=/^'([^]*?)'?$/,Az=/''/g,Pz=/[a-zA-Z]/;function on(e,t,r){const n=Jh(),i=r?.locale??n.locale??J2,a=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,l=Tr(e,r?.in);if(!A$(l))throw new RangeError("Invalid time value");let d=t.match(Cz).map(h=>{const p=h[0];if(p==="p"||p==="P"){const v=yz[p];return v(h,i.formatLong)}return h}).join("").match(kz).map(h=>{if(h==="''")return{isToken:!1,value:"'"};const p=h[0];if(p==="'")return{isToken:!1,value:Tz(h)};if($N[p])return{isToken:!0,value:h};if(p.match(Pz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+p+"`");return{isToken:!1,value:h}});i.localize.preprocessor&&(d=i.localize.preprocessor(l,d));const f={firstWeekContainsDate:a,weekStartsOn:o,locale:i};return d.map(h=>{if(!h.isToken)return h.value;const p=h.value;(!r?.useAdditionalWeekYearTokens&&Nz(p)||!r?.useAdditionalDayOfYearTokens&&_z(p))&&jz(p,t,String(e));const v=$N[p[0]];return v(l,p,i.localize,f)}).join("")}function Tz(e){const t=e.match(Ez);return t?t[1].replace(Az,"'"):e}function Rz(e,t,r){const n=Jh(),i=r?.locale??n.locale??J2,a=2520,o=pv(e,t);if(isNaN(o))throw new RangeError("Invalid time value");const l=Object.assign({},r,{addSuffix:r?.addSuffix,comparison:o}),[d,f]=Hu(r?.in,...o>0?[t,e]:[e,t]),h=O$(f,d),p=(Eh(f)-Eh(d))/1e3,v=Math.round((h-p)/60);let m;if(v<2)return r?.includeSeconds?h<5?i.formatDistance("lessThanXSeconds",5,l):h<10?i.formatDistance("lessThanXSeconds",10,l):h<20?i.formatDistance("lessThanXSeconds",20,l):h<40?i.formatDistance("halfAMinute",0,l):h<60?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",1,l):v===0?i.formatDistance("lessThanXMinutes",1,l):i.formatDistance("xMinutes",v,l);if(v<45)return i.formatDistance("xMinutes",v,l);if(v<90)return i.formatDistance("aboutXHours",1,l);if(v<BN){const j=Math.round(v/60);return i.formatDistance("aboutXHours",j,l)}else{if(v<a)return i.formatDistance("xDays",1,l);if(v<Gg){const j=Math.round(v/BN);return i.formatDistance("xDays",j,l)}else if(v<Gg*2)return m=Math.round(v/Gg),i.formatDistance("aboutXMonths",m,l)}if(m=I$(f,d),m<12){const j=Math.round(v/Gg);return i.formatDistance("xMonths",j,l)}else{const j=m%12,w=Math.trunc(m/12);return j<3?i.formatDistance("aboutXYears",w,l):j<9?i.formatDistance("overXYears",w,l):i.formatDistance("almostXYears",w+1,l)}}function Fv(e,t){return Rz(e,K2(e),t)}function Lz(e,t){const r=Tr(e,t?.in),n=r.getFullYear(),i=r.getMonth(),a=ds(r,0);return a.setFullYear(n,i+1,0),a.setHours(0,0,0,0),a.getDate()}function Dz(e){return Math.trunc(+Tr(e)/1e3)}function Iz(e,t){const r=Tr(e,t?.in),n=r.getMonth();return r.setFullYear(r.getFullYear(),n+1,0),r.setHours(0,0,0,0),Tr(r,t?.in)}function Oz(e,t){const r=Tr(e,t?.in);return P$(Iz(r,t),Ki(r,t),t)+1}function Ph(e,t){return+Tr(e)>+Tr(t)}function Od(e,t){return+Tr(e)<+Tr(t)}function Z2(e,t,r){const[n,i]=Hu(r?.in,e,t);return n.getFullYear()===i.getFullYear()&&n.getMonth()===i.getMonth()}function Mz(e,t,r){const[n,i]=Hu(r?.in,e,t);return n.getFullYear()===i.getFullYear()}function Fz(e,t){return ci(ds(e,e),K2(e))}function Bz(e,t){return ci(e,xs(K2(e),1),t)}function Sx(e,t,r){return xs(e,-t,r)}function Uz(e,t){const r=()=>ds(t?.in,NaN),i=Vz(e);let a;if(i.date){const f=Wz(i.date,2);a=Hz(f.restDateString,f.year)}if(!a||isNaN(+a))return r();const o=+a;let l=0,d;if(i.time&&(l=Gz(i.time),isNaN(l)))return r();if(i.timezone){if(d=Kz(i.timezone),isNaN(d))return r()}else{const f=new Date(o+l),h=Tr(0,t?.in);return h.setFullYear(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()),h.setHours(f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds(),f.getUTCMilliseconds()),h}return Tr(o+l+d,t?.in)}const Kg={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},$z=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,zz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,qz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Vz(e){const t={},r=e.split(Kg.dateTimeDelimiter);let n;if(r.length>2)return t;if(/:/.test(r[0])?n=r[0]:(t.date=r[0],n=r[1],Kg.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Kg.timeZoneDelimiter)[0],n=e.substr(t.date.length,e.length))),n){const i=Kg.timezone.exec(n);i?(t.time=n.replace(i[1],""),t.timezone=i[1]):t.time=n}return t}function Wz(e,t){const r=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),n=e.match(r);if(!n)return{year:NaN,restDateString:""};const i=n[1]?parseInt(n[1]):null,a=n[2]?parseInt(n[2]):null;return{year:a===null?i:a*100,restDateString:e.slice((n[1]||n[2]).length)}}function Hz(e,t){if(t===null)return new Date(NaN);const r=e.match($z);if(!r)return new Date(NaN);const n=!!r[4],i=Im(r[1]),a=Im(r[2])-1,o=Im(r[3]),l=Im(r[4]),d=Im(r[5])-1;if(n)return Xz(t,l,d)?Yz(t,l,d):new Date(NaN);{const f=new Date(0);return!Jz(t,a,o)||!Zz(t,i)?new Date(NaN):(f.setUTCFullYear(t,a,Math.max(i,o)),f)}}function Im(e){return e?parseInt(e):1}function Gz(e){const t=e.match(zz);if(!t)return NaN;const r=kx(t[1]),n=kx(t[2]),i=kx(t[3]);return eq(r,n,i)?r*NE+n*_E+i*1e3:NaN}function kx(e){return e&&parseFloat(e.replace(",","."))||0}function Kz(e){if(e==="Z")return 0;const t=e.match(qz);if(!t)return 0;const r=t[1]==="+"?-1:1,n=parseInt(t[2]),i=t[3]&&parseInt(t[3])||0;return tq(n,i)?r*(n*NE+i*_E):NaN}function Yz(e,t,r){const n=new Date(0);n.setUTCFullYear(e,0,4);const i=n.getUTCDay()||7,a=(t-1)*7+r+1-i;return n.setUTCDate(n.getUTCDate()+a),n}const Qz=[31,null,31,30,31,30,31,31,30,31,30,31];function TE(e){return e%400===0||e%4===0&&e%100!==0}function Jz(e,t,r){return t>=0&&t<=11&&r>=1&&r<=(Qz[t]||(TE(e)?29:28))}function Zz(e,t){return t>=1&&t<=(TE(e)?366:365)}function Xz(e,t,r){return t>=1&&t<=53&&r>=0&&r<=6}function eq(e,t,r){return e===24?t===0&&r===0:r>=0&&r<60&&t>=0&&t<60&&e>=0&&e<25}function tq(e,t){return t>=0&&t<=59}function Cx(e,t,r){const n=Tr(e,r?.in),i=n.getFullYear(),a=n.getDate(),o=ds(e,0);o.setFullYear(i,t,15),o.setHours(0,0,0,0);const l=Lz(o);return n.setMonth(t,Math.min(a,l)),n}function WN(e,t,r){const n=Tr(e,r?.in);return isNaN(+n)?ds(e,NaN):(n.setFullYear(t),n)}function rq({items:e}){const t=qd(new Date),r=e.filter(a=>{const o=new Date(a.expiry_date);return Od(o,t)}).reduce((a,o)=>a+(o.label_count||1),0),n=e.filter(a=>Fz(new Date(a.expiry_date))).reduce((a,o)=>a+(o.label_count||1),0),i=e.filter(a=>Bz(new Date(a.expiry_date))).reduce((a,o)=>a+(o.label_count||1),0);return s.jsxs(it,{className:"shadow-card hover:shadow-card-hover transition-shadow",children:[s.jsx(sr,{children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx(es,{className:"w-4 h-4 text-primary"})}),s.jsx(pr,{className:"text-lg",children:"Active Alerts"})]})}),s.jsx(ot,{children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"flex items-center justify-between p-4 bg-destructive/5 dark:bg-destructive/20 rounded-lg border border-destructive/10 dark:border-destructive/30 backdrop-blur-sm hover:bg-destructive/10 dark:hover:bg-destructive/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pt,{variant:"destructive",className:"text-xs",children:"Yesterday"}),s.jsx("span",{className:"text-sm font-medium",children:"Expired"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-destructive",children:r}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"labels"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-warning/5 dark:bg-warning/20 rounded-lg border border-warning/10 dark:border-warning/30 backdrop-blur-sm hover:bg-warning/10 dark:hover:bg-warning/30 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pt,{variant:"default",className:"text-xs bg-warning text-warning-foreground",children:"Today"}),s.jsx("span",{className:"text-sm font-medium",children:"About to expire"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-warning",children:n}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"labels"})]})]}),s.jsxs("div",{className:"flex items-center justify-between p-4 bg-success/10 rounded-lg border border-success/20 backdrop-blur-sm hover:bg-success/20 transition-all",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(pt,{variant:"secondary",className:"text-xs",children:"Tomorrow"}),s.jsx("span",{className:"text-sm font-medium",children:"Will expire"})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"text-2xl font-bold text-success",children:i}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"labels"})]})]})]})})]})}const Yg=e=>{const t=new Date,r=new Date(e),n=Math.floor((r.getTime()-t.getTime())/(1e3*60*60));return n<0?{status:"expired",hoursUntilExpiry:n,message:`Expired ${Math.abs(n)} hours ago`}:n<=24?{status:"warning",hoursUntilExpiry:n,message:`Expires in ${n} hours`}:n<=72?{status:"good",hoursUntilExpiry:n,message:`Expires in ${Math.floor(n/24)} days`}:{status:"good",hoursUntilExpiry:n,message:`Fresh for ${Math.floor(n/24)} days`}};function RE(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:i}=qr(),a=async()=>{try{const{data:l,error:d}=await Oe.from("prepared_items").select(`
          *,
          recipes (
            name,
            allergens
          )
        `).order("expires_at",{ascending:!0});if(d){console.error("Error fetching prepared items:",d),i({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"});return}t(l||[])}catch(l){console.error("Error:",l),i({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"})}finally{n(!1)}};x.useEffect(()=>{a()},[]);const o=e.filter(l=>Yg(l.expires_at).hoursUntilExpiry<=72);if(o.filter(l=>Yg(l.expires_at).status==="expired").length,o.filter(l=>Yg(l.expires_at).status==="warning").length,o.filter(l=>{const d=Yg(l.expires_at);return d.status==="good"&&d.hoursUntilExpiry<=72}).length,r)return s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"w-5 h-5"}),"Expiry Alerts"]})}),s.jsx(ot,{children:s.jsx("div",{className:"flex items-center justify-center h-32",children:s.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-primary"})})})]})}var B0="Dialog",[LE,DE]=Fs(B0),[nq,Io]=LE(B0),IE=e=>{const{__scopeDialog:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!0}=e,l=x.useRef(null),d=x.useRef(null),[f,h]=Yi({prop:n,defaultProp:i??!1,onChange:a,caller:B0});return s.jsx(nq,{scope:t,triggerRef:l,contentRef:d,contentId:Ms(),titleId:Ms(),descriptionId:Ms(),open:f,onOpenChange:h,onOpenToggle:x.useCallback(()=>h(p=>!p),[h]),modal:o,children:r})};IE.displayName=B0;var OE="DialogTrigger",ME=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Io(OE,r),a=or(t,i.triggerRef);return s.jsx(yt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":tb(i.open),...n,ref:a,onClick:lt(e.onClick,i.onOpenToggle)})});ME.displayName=OE;var X2="DialogPortal",[sq,FE]=LE(X2,{forceMount:void 0}),BE=e=>{const{__scopeDialog:t,forceMount:r,children:n,container:i}=e,a=Io(X2,t);return s.jsx(sq,{scope:t,forceMount:r,children:x.Children.map(n,o=>s.jsx(Bs,{present:r||a.open,children:s.jsx($h,{asChild:!0,container:i,children:o})}))})};BE.displayName=X2;var Bv="DialogOverlay",UE=x.forwardRef((e,t)=>{const r=FE(Bv,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Io(Bv,e.__scopeDialog);return a.modal?s.jsx(Bs,{present:n||a.open,children:s.jsx(aq,{...i,ref:t})}):null});UE.displayName=Bv;var iq=Pu("DialogOverlay.RemoveScroll"),aq=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Io(Bv,r);return s.jsx(Lp,{as:iq,allowPinchZoom:!0,shards:[i.contentRef],children:s.jsx(yt.div,{"data-state":tb(i.open),...n,ref:t,style:{pointerEvents:"auto",...n.style}})})}),Vd="DialogContent",$E=x.forwardRef((e,t)=>{const r=FE(Vd,e.__scopeDialog),{forceMount:n=r.forceMount,...i}=e,a=Io(Vd,e.__scopeDialog);return s.jsx(Bs,{present:n||a.open,children:a.modal?s.jsx(oq,{...i,ref:t}):s.jsx(lq,{...i,ref:t})})});$E.displayName=Vd;var oq=x.forwardRef((e,t)=>{const r=Io(Vd,e.__scopeDialog),n=x.useRef(null),i=or(t,r.contentRef,n);return x.useEffect(()=>{const a=n.current;if(a)return P0(a)},[]),s.jsx(zE,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(e.onCloseAutoFocus,a=>{a.preventDefault(),r.triggerRef.current?.focus()}),onPointerDownOutside:lt(e.onPointerDownOutside,a=>{const o=a.detail.originalEvent,l=o.button===0&&o.ctrlKey===!0;(o.button===2||l)&&a.preventDefault()}),onFocusOutside:lt(e.onFocusOutside,a=>a.preventDefault())})}),lq=x.forwardRef((e,t)=>{const r=Io(Vd,e.__scopeDialog),n=x.useRef(!1),i=x.useRef(!1);return s.jsx(zE,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;r.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),zE=x.forwardRef((e,t)=>{const{__scopeDialog:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,...o}=e,l=Io(Vd,r),d=x.useRef(null),f=or(t,d);return A0(),s.jsxs(s.Fragment,{children:[s.jsx(Tp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Xd,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":tb(l.open),...o,ref:f,onDismiss:()=>l.onOpenChange(!1)})}),s.jsxs(s.Fragment,{children:[s.jsx(uq,{titleId:l.titleId}),s.jsx(fq,{contentRef:d,descriptionId:l.descriptionId})]})]})}),eb="DialogTitle",qE=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Io(eb,r);return s.jsx(yt.h2,{id:i.titleId,...n,ref:t})});qE.displayName=eb;var VE="DialogDescription",WE=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Io(VE,r);return s.jsx(yt.p,{id:i.descriptionId,...n,ref:t})});WE.displayName=VE;var HE="DialogClose",GE=x.forwardRef((e,t)=>{const{__scopeDialog:r,...n}=e,i=Io(HE,r);return s.jsx(yt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,()=>i.onOpenChange(!1))})});GE.displayName=HE;function tb(e){return e?"open":"closed"}var KE="DialogTitleWarning",[cq,YE]=w8(KE,{contentName:Vd,titleName:eb,docsSlug:"dialog"}),uq=({titleId:e})=>{const t=YE(KE),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return x.useEffect(()=>{e&&(document.getElementById(e)||console.error(r))},[r,e]),null},dq="DialogDescriptionWarning",fq=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${YE(dq).contentName}}.`;return x.useEffect(()=>{const i=e.current?.getAttribute("aria-describedby");t&&i&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},rb=IE,QE=ME,nb=BE,U0=UE,$0=$E,sb=qE,ib=WE,ab=GE;const Ca=rb,hq=QE,mq=nb,JE=x.forwardRef(({className:e,...t},r)=>s.jsx(U0,{ref:r,className:Me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));JE.displayName=U0.displayName;const Qi=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(mq,{children:[s.jsx(JE,{}),s.jsxs($0,{ref:n,className:Me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,s.jsxs(ab,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[s.jsx(xn,{className:"h-4 w-4"}),s.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Qi.displayName=$0.displayName;const Ji=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});Ji.displayName="DialogHeader";const Zh=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});Zh.displayName="DialogFooter";const Zi=x.forwardRef(({className:e,...t},r)=>s.jsx(sb,{ref:r,className:Me("text-lg font-semibold leading-none tracking-tight",e),...t}));Zi.displayName=sb.displayName;const bl=x.forwardRef(({className:e,...t},r)=>s.jsx(ib,{ref:r,className:Me("text-sm text-muted-foreground",e),...t}));bl.displayName=ib.displayName;const er=x.forwardRef(({className:e,type:t,...r},n)=>s.jsx("input",{type:t,className:Me("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:n,...r}));er.displayName="Input";var pq="Label",ZE=x.forwardRef((e,t)=>s.jsx(yt.label,{...e,ref:t,onMouseDown:r=>{r.target.closest("button, input, select, textarea")||(e.onMouseDown?.(r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));ZE.displayName=pq;var XE=ZE;const gq=zh("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),At=x.forwardRef(({className:e,...t},r)=>s.jsx(XE,{ref:r,className:Me(gq(),e),...t}));At.displayName=XE.displayName;function bp(e,[t,r]){return Math.min(r,Math.max(t,e))}function ob(e){const t=x.useRef({value:e,previous:e});return x.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var vq=[" ","Enter","ArrowUp","ArrowDown"],yq=[" ","Enter"],Wd="Select",[z0,q0,xq]=Cp(Wd),[Xh]=Fs(Wd,[xq,$u]),V0=$u(),[wq,Gu]=Xh(Wd),[bq,_q]=Xh(Wd),eA=e=>{const{__scopeSelect:t,children:r,open:n,defaultOpen:i,onOpenChange:a,value:o,defaultValue:l,onValueChange:d,dir:f,name:h,autoComplete:p,disabled:v,required:m,form:j}=e,w=V0(t),[_,S]=x.useState(null),[E,k]=x.useState(null),[C,D]=x.useState(!1),M=rf(f),[F,U]=Yi({prop:n,defaultProp:i??!1,onChange:a,caller:Wd}),[I,K]=Yi({prop:o,defaultProp:l,onChange:d,caller:Wd}),B=x.useRef(null),O=_?j||!!_.closest("form"):!0,[z,q]=x.useState(new Set),ue=Array.from(z).map(ie=>ie.props.value).join(";");return s.jsx(x0,{...w,children:s.jsxs(wq,{required:m,scope:t,trigger:_,onTriggerChange:S,valueNode:E,onValueNodeChange:k,valueNodeHasChildren:C,onValueNodeHasChildrenChange:D,contentId:Ms(),value:I,onValueChange:K,open:F,onOpenChange:U,dir:M,triggerPointerDownPosRef:B,disabled:v,children:[s.jsx(z0.Provider,{scope:t,children:s.jsx(bq,{scope:e.__scopeSelect,onNativeOptionAdd:x.useCallback(ie=>{q(le=>new Set(le).add(ie))},[]),onNativeOptionRemove:x.useCallback(ie=>{q(le=>{const G=new Set(le);return G.delete(ie),G})},[]),children:r})}),O?s.jsxs(jA,{"aria-hidden":!0,required:m,tabIndex:-1,name:h,autoComplete:p,value:I,onChange:ie=>K(ie.target.value),disabled:v,form:j,children:[I===void 0?s.jsx("option",{value:""}):null,Array.from(z)]},ue):null]})})};eA.displayName=Wd;var tA="SelectTrigger",rA=x.forwardRef((e,t)=>{const{__scopeSelect:r,disabled:n=!1,...i}=e,a=V0(r),o=Gu(tA,r),l=o.disabled||n,d=or(t,o.onTriggerChange),f=q0(r),h=x.useRef("touch"),[p,v,m]=kA(w=>{const _=f().filter(k=>!k.disabled),S=_.find(k=>k.value===o.value),E=CA(_,w,S);E!==void 0&&o.onValueChange(E.value)}),j=w=>{l||(o.onOpenChange(!0),m()),w&&(o.triggerPointerDownPosRef.current={x:Math.round(w.pageX),y:Math.round(w.pageY)})};return s.jsx(Pp,{asChild:!0,...a,children:s.jsx(yt.button,{type:"button",role:"combobox","aria-controls":o.contentId,"aria-expanded":o.open,"aria-required":o.required,"aria-autocomplete":"none",dir:o.dir,"data-state":o.open?"open":"closed",disabled:l,"data-disabled":l?"":void 0,"data-placeholder":SA(o.value)?"":void 0,...i,ref:d,onClick:lt(i.onClick,w=>{w.currentTarget.focus(),h.current!=="mouse"&&j(w)}),onPointerDown:lt(i.onPointerDown,w=>{h.current=w.pointerType;const _=w.target;_.hasPointerCapture(w.pointerId)&&_.releasePointerCapture(w.pointerId),w.button===0&&w.ctrlKey===!1&&w.pointerType==="mouse"&&(j(w),w.preventDefault())}),onKeyDown:lt(i.onKeyDown,w=>{const _=p.current!=="";!(w.ctrlKey||w.altKey||w.metaKey)&&w.key.length===1&&v(w.key),!(_&&w.key===" ")&&vq.includes(w.key)&&(j(),w.preventDefault())})})})});rA.displayName=tA;var nA="SelectValue",sA=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,children:a,placeholder:o="",...l}=e,d=Gu(nA,r),{onValueNodeHasChildrenChange:f}=d,h=a!==void 0,p=or(t,d.onValueNodeChange);return us(()=>{f(h)},[f,h]),s.jsx(yt.span,{...l,ref:p,style:{pointerEvents:"none"},children:SA(d.value)?s.jsx(s.Fragment,{children:o}):a})});sA.displayName=nA;var Nq="SelectIcon",iA=x.forwardRef((e,t)=>{const{__scopeSelect:r,children:n,...i}=e;return s.jsx(yt.span,{"aria-hidden":!0,...i,ref:t,children:n||""})});iA.displayName=Nq;var jq="SelectPortal",aA=e=>s.jsx($h,{asChild:!0,...e});aA.displayName=jq;var Hd="SelectContent",oA=x.forwardRef((e,t)=>{const r=Gu(Hd,e.__scopeSelect),[n,i]=x.useState();if(us(()=>{i(new DocumentFragment)},[]),!r.open){const a=n;return a?Uh.createPortal(s.jsx(lA,{scope:e.__scopeSelect,children:s.jsx(z0.Slot,{scope:e.__scopeSelect,children:s.jsx("div",{children:e.children})})}),a):null}return s.jsx(cA,{...e,ref:t})});oA.displayName=Hd;var bo=10,[lA,Ku]=Xh(Hd),Sq="SelectContentImpl",kq=Pu("SelectContent.RemoveScroll"),cA=x.forwardRef((e,t)=>{const{__scopeSelect:r,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:a,onPointerDownOutside:o,side:l,sideOffset:d,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:v,collisionPadding:m,sticky:j,hideWhenDetached:w,avoidCollisions:_,...S}=e,E=Gu(Hd,r),[k,C]=x.useState(null),[D,M]=x.useState(null),F=or(t,X=>C(X)),[U,I]=x.useState(null),[K,B]=x.useState(null),O=q0(r),[z,q]=x.useState(!1),ue=x.useRef(!1);x.useEffect(()=>{if(k)return P0(k)},[k]),A0();const ie=x.useCallback(X=>{const[pe,...ce]=O().map(ze=>ze.ref.current),[we]=ce.slice(-1),Pe=document.activeElement;for(const ze of X)if(ze===Pe||(ze?.scrollIntoView({block:"nearest"}),ze===pe&&D&&(D.scrollTop=0),ze===we&&D&&(D.scrollTop=D.scrollHeight),ze?.focus(),document.activeElement!==Pe))return},[O,D]),le=x.useCallback(()=>ie([U,k]),[ie,U,k]);x.useEffect(()=>{z&&le()},[z,le]);const{onOpenChange:G,triggerPointerDownPosRef:se}=E;x.useEffect(()=>{if(k){let X={x:0,y:0};const pe=we=>{X={x:Math.abs(Math.round(we.pageX)-(se.current?.x??0)),y:Math.abs(Math.round(we.pageY)-(se.current?.y??0))}},ce=we=>{X.x<=10&&X.y<=10?we.preventDefault():k.contains(we.target)||G(!1),document.removeEventListener("pointermove",pe),se.current=null};return se.current!==null&&(document.addEventListener("pointermove",pe),document.addEventListener("pointerup",ce,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",pe),document.removeEventListener("pointerup",ce,{capture:!0})}}},[k,G,se]),x.useEffect(()=>{const X=()=>G(!1);return window.addEventListener("blur",X),window.addEventListener("resize",X),()=>{window.removeEventListener("blur",X),window.removeEventListener("resize",X)}},[G]);const[xe,te]=kA(X=>{const pe=O().filter(Pe=>!Pe.disabled),ce=pe.find(Pe=>Pe.ref.current===document.activeElement),we=CA(pe,X,ce);we&&setTimeout(()=>we.ref.current.focus())}),R=x.useCallback((X,pe,ce)=>{const we=!ue.current&&!ce;(E.value!==void 0&&E.value===pe||we)&&(I(X),we&&(ue.current=!0))},[E.value]),V=x.useCallback(()=>k?.focus(),[k]),Q=x.useCallback((X,pe,ce)=>{const we=!ue.current&&!ce;(E.value!==void 0&&E.value===pe||we)&&B(X)},[E.value]),re=n==="popper"?xw:uA,Z=re===xw?{side:l,sideOffset:d,align:f,alignOffset:h,arrowPadding:p,collisionBoundary:v,collisionPadding:m,sticky:j,hideWhenDetached:w,avoidCollisions:_}:{};return s.jsx(lA,{scope:r,content:k,viewport:D,onViewportChange:M,itemRefCallback:R,selectedItem:U,onItemLeave:V,itemTextRefCallback:Q,focusSelectedItem:le,selectedItemText:K,position:n,isPositioned:z,searchRef:xe,children:s.jsx(Lp,{as:kq,allowPinchZoom:!0,children:s.jsx(Tp,{asChild:!0,trapped:E.open,onMountAutoFocus:X=>{X.preventDefault()},onUnmountAutoFocus:lt(i,X=>{E.trigger?.focus({preventScroll:!0}),X.preventDefault()}),children:s.jsx(Xd,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:a,onPointerDownOutside:o,onFocusOutside:X=>X.preventDefault(),onDismiss:()=>E.onOpenChange(!1),children:s.jsx(re,{role:"listbox",id:E.contentId,"data-state":E.open?"open":"closed",dir:E.dir,onContextMenu:X=>X.preventDefault(),...S,...Z,onPlaced:()=>q(!0),ref:F,style:{display:"flex",flexDirection:"column",outline:"none",...S.style},onKeyDown:lt(S.onKeyDown,X=>{const pe=X.ctrlKey||X.altKey||X.metaKey;if(X.key==="Tab"&&X.preventDefault(),!pe&&X.key.length===1&&te(X.key),["ArrowUp","ArrowDown","Home","End"].includes(X.key)){let we=O().filter(Pe=>!Pe.disabled).map(Pe=>Pe.ref.current);if(["ArrowUp","End"].includes(X.key)&&(we=we.slice().reverse()),["ArrowUp","ArrowDown"].includes(X.key)){const Pe=X.target,ze=we.indexOf(Pe);we=we.slice(ze+1)}setTimeout(()=>ie(we)),X.preventDefault()}})})})})})})});cA.displayName=Sq;var Cq="SelectItemAlignedPosition",uA=x.forwardRef((e,t)=>{const{__scopeSelect:r,onPlaced:n,...i}=e,a=Gu(Hd,r),o=Ku(Hd,r),[l,d]=x.useState(null),[f,h]=x.useState(null),p=or(t,F=>h(F)),v=q0(r),m=x.useRef(!1),j=x.useRef(!0),{viewport:w,selectedItem:_,selectedItemText:S,focusSelectedItem:E}=o,k=x.useCallback(()=>{if(a.trigger&&a.valueNode&&l&&f&&w&&_&&S){const F=a.trigger.getBoundingClientRect(),U=f.getBoundingClientRect(),I=a.valueNode.getBoundingClientRect(),K=S.getBoundingClientRect();if(a.dir!=="rtl"){const Pe=K.left-U.left,ze=I.left-Pe,ve=F.left-ze,qe=F.width+ve,ne=Math.max(qe,U.width),tt=window.innerWidth-bo,jt=bp(ze,[bo,Math.max(bo,tt-ne)]);l.style.minWidth=qe+"px",l.style.left=jt+"px"}else{const Pe=U.right-K.right,ze=window.innerWidth-I.right-Pe,ve=window.innerWidth-F.right-ze,qe=F.width+ve,ne=Math.max(qe,U.width),tt=window.innerWidth-bo,jt=bp(ze,[bo,Math.max(bo,tt-ne)]);l.style.minWidth=qe+"px",l.style.right=jt+"px"}const B=v(),O=window.innerHeight-bo*2,z=w.scrollHeight,q=window.getComputedStyle(f),ue=parseInt(q.borderTopWidth,10),ie=parseInt(q.paddingTop,10),le=parseInt(q.borderBottomWidth,10),G=parseInt(q.paddingBottom,10),se=ue+ie+z+G+le,xe=Math.min(_.offsetHeight*5,se),te=window.getComputedStyle(w),R=parseInt(te.paddingTop,10),V=parseInt(te.paddingBottom,10),Q=F.top+F.height/2-bo,re=O-Q,Z=_.offsetHeight/2,X=_.offsetTop+Z,pe=ue+ie+X,ce=se-pe;if(pe<=Q){const Pe=B.length>0&&_===B[B.length-1].ref.current;l.style.bottom="0px";const ze=f.clientHeight-w.offsetTop-w.offsetHeight,ve=Math.max(re,Z+(Pe?V:0)+ze+le),qe=pe+ve;l.style.height=qe+"px"}else{const Pe=B.length>0&&_===B[0].ref.current;l.style.top="0px";const ve=Math.max(Q,ue+w.offsetTop+(Pe?R:0)+Z)+ce;l.style.height=ve+"px",w.scrollTop=pe-Q+w.offsetTop}l.style.margin=`${bo}px 0`,l.style.minHeight=xe+"px",l.style.maxHeight=O+"px",n?.(),requestAnimationFrame(()=>m.current=!0)}},[v,a.trigger,a.valueNode,l,f,w,_,S,a.dir,n]);us(()=>k(),[k]);const[C,D]=x.useState();us(()=>{f&&D(window.getComputedStyle(f).zIndex)},[f]);const M=x.useCallback(F=>{F&&j.current===!0&&(k(),E?.(),j.current=!1)},[k,E]);return s.jsx(Aq,{scope:r,contentWrapper:l,shouldExpandOnScrollRef:m,onScrollButtonChange:M,children:s.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:C},children:s.jsx(yt.div,{...i,ref:p,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});uA.displayName=Cq;var Eq="SelectPopperPosition",xw=x.forwardRef((e,t)=>{const{__scopeSelect:r,align:n="start",collisionPadding:i=bo,...a}=e,o=V0(r);return s.jsx(w0,{...o,...a,ref:t,align:n,collisionPadding:i,style:{boxSizing:"border-box",...a.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});xw.displayName=Eq;var[Aq,lb]=Xh(Hd,{}),ww="SelectViewport",dA=x.forwardRef((e,t)=>{const{__scopeSelect:r,nonce:n,...i}=e,a=Ku(ww,r),o=lb(ww,r),l=or(t,a.onViewportChange),d=x.useRef(0);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),s.jsx(z0.Slot,{scope:r,children:s.jsx(yt.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:l,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:lt(i.onScroll,f=>{const h=f.currentTarget,{contentWrapper:p,shouldExpandOnScrollRef:v}=o;if(v?.current&&p){const m=Math.abs(d.current-h.scrollTop);if(m>0){const j=window.innerHeight-bo*2,w=parseFloat(p.style.minHeight),_=parseFloat(p.style.height),S=Math.max(w,_);if(S<j){const E=S+m,k=Math.min(j,E),C=E-k;p.style.height=k+"px",p.style.bottom==="0px"&&(h.scrollTop=C>0?C:0,p.style.justifyContent="flex-end")}}}d.current=h.scrollTop})})})]})});dA.displayName=ww;var fA="SelectGroup",[Pq,Tq]=Xh(fA),Rq=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Ms();return s.jsx(Pq,{scope:r,id:i,children:s.jsx(yt.div,{role:"group","aria-labelledby":i,...n,ref:t})})});Rq.displayName=fA;var hA="SelectLabel",mA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=Tq(hA,r);return s.jsx(yt.div,{id:i.id,...n,ref:t})});mA.displayName=hA;var Uv="SelectItem",[Lq,pA]=Xh(Uv),gA=x.forwardRef((e,t)=>{const{__scopeSelect:r,value:n,disabled:i=!1,textValue:a,...o}=e,l=Gu(Uv,r),d=Ku(Uv,r),f=l.value===n,[h,p]=x.useState(a??""),[v,m]=x.useState(!1),j=or(t,E=>d.itemRefCallback?.(E,n,i)),w=Ms(),_=x.useRef("touch"),S=()=>{i||(l.onValueChange(n),l.onOpenChange(!1))};if(n==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return s.jsx(Lq,{scope:r,value:n,disabled:i,textId:w,isSelected:f,onItemTextChange:x.useCallback(E=>{p(k=>k||(E?.textContent??"").trim())},[]),children:s.jsx(z0.ItemSlot,{scope:r,value:n,disabled:i,textValue:h,children:s.jsx(yt.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":f&&v,"data-state":f?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...o,ref:j,onFocus:lt(o.onFocus,()=>m(!0)),onBlur:lt(o.onBlur,()=>m(!1)),onClick:lt(o.onClick,()=>{_.current!=="mouse"&&S()}),onPointerUp:lt(o.onPointerUp,()=>{_.current==="mouse"&&S()}),onPointerDown:lt(o.onPointerDown,E=>{_.current=E.pointerType}),onPointerMove:lt(o.onPointerMove,E=>{_.current=E.pointerType,i?d.onItemLeave?.():_.current==="mouse"&&E.currentTarget.focus({preventScroll:!0})}),onPointerLeave:lt(o.onPointerLeave,E=>{E.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:lt(o.onKeyDown,E=>{d.searchRef?.current!==""&&E.key===" "||(yq.includes(E.key)&&S(),E.key===" "&&E.preventDefault())})})})})});gA.displayName=Uv;var qm="SelectItemText",vA=x.forwardRef((e,t)=>{const{__scopeSelect:r,className:n,style:i,...a}=e,o=Gu(qm,r),l=Ku(qm,r),d=pA(qm,r),f=_q(qm,r),[h,p]=x.useState(null),v=or(t,S=>p(S),d.onItemTextChange,S=>l.itemTextRefCallback?.(S,d.value,d.disabled)),m=h?.textContent,j=x.useMemo(()=>s.jsx("option",{value:d.value,disabled:d.disabled,children:m},d.value),[d.disabled,d.value,m]),{onNativeOptionAdd:w,onNativeOptionRemove:_}=f;return us(()=>(w(j),()=>_(j)),[w,_,j]),s.jsxs(s.Fragment,{children:[s.jsx(yt.span,{id:d.textId,...a,ref:v}),d.isSelected&&o.valueNode&&!o.valueNodeHasChildren?Uh.createPortal(a.children,o.valueNode):null]})});vA.displayName=qm;var yA="SelectItemIndicator",xA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return pA(yA,r).isSelected?s.jsx(yt.span,{"aria-hidden":!0,...n,ref:t}):null});xA.displayName=yA;var bw="SelectScrollUpButton",wA=x.forwardRef((e,t)=>{const r=Ku(bw,e.__scopeSelect),n=lb(bw,e.__scopeSelect),[i,a]=x.useState(!1),o=or(t,n.onScrollButtonChange);return us(()=>{if(r.viewport&&r.isPositioned){let l=function(){const f=d.scrollTop>0;a(f)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(_A,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop-d.offsetHeight)}}):null});wA.displayName=bw;var _w="SelectScrollDownButton",bA=x.forwardRef((e,t)=>{const r=Ku(_w,e.__scopeSelect),n=lb(_w,e.__scopeSelect),[i,a]=x.useState(!1),o=or(t,n.onScrollButtonChange);return us(()=>{if(r.viewport&&r.isPositioned){let l=function(){const f=d.scrollHeight-d.clientHeight,h=Math.ceil(d.scrollTop)<f;a(h)};const d=r.viewport;return l(),d.addEventListener("scroll",l),()=>d.removeEventListener("scroll",l)}},[r.viewport,r.isPositioned]),i?s.jsx(_A,{...e,ref:o,onAutoScroll:()=>{const{viewport:l,selectedItem:d}=r;l&&d&&(l.scrollTop=l.scrollTop+d.offsetHeight)}}):null});bA.displayName=_w;var _A=x.forwardRef((e,t)=>{const{__scopeSelect:r,onAutoScroll:n,...i}=e,a=Ku("SelectScrollButton",r),o=x.useRef(null),l=q0(r),d=x.useCallback(()=>{o.current!==null&&(window.clearInterval(o.current),o.current=null)},[]);return x.useEffect(()=>()=>d(),[d]),us(()=>{l().find(h=>h.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[l]),s.jsx(yt.div,{"aria-hidden":!0,...i,ref:t,style:{flexShrink:0,...i.style},onPointerDown:lt(i.onPointerDown,()=>{o.current===null&&(o.current=window.setInterval(n,50))}),onPointerMove:lt(i.onPointerMove,()=>{a.onItemLeave?.(),o.current===null&&(o.current=window.setInterval(n,50))}),onPointerLeave:lt(i.onPointerLeave,()=>{d()})})}),Dq="SelectSeparator",NA=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e;return s.jsx(yt.div,{"aria-hidden":!0,...n,ref:t})});NA.displayName=Dq;var Nw="SelectArrow",Iq=x.forwardRef((e,t)=>{const{__scopeSelect:r,...n}=e,i=V0(r),a=Gu(Nw,r),o=Ku(Nw,r);return a.open&&o.position==="popper"?s.jsx(b0,{...i,...n,ref:t}):null});Iq.displayName=Nw;var Oq="SelectBubbleInput",jA=x.forwardRef(({__scopeSelect:e,value:t,...r},n)=>{const i=x.useRef(null),a=or(n,i),o=ob(t);return x.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLSelectElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&h){const p=new Event("change",{bubbles:!0});h.call(l,t),l.dispatchEvent(p)}},[o,t]),s.jsx(yt.select,{...r,style:{...O4,...r.style},ref:a,defaultValue:t})});jA.displayName=Oq;function SA(e){return e===""||e===void 0}function kA(e){const t=Zn(e),r=x.useRef(""),n=x.useRef(0),i=x.useCallback(o=>{const l=r.current+o;t(l),(function d(f){r.current=f,window.clearTimeout(n.current),f!==""&&(n.current=window.setTimeout(()=>d(""),1e3))})(l)},[t]),a=x.useCallback(()=>{r.current="",window.clearTimeout(n.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),[r,i,a]}function CA(e,t,r){const i=t.length>1&&Array.from(t).every(f=>f===t[0])?t[0]:t,a=r?e.indexOf(r):-1;let o=Mq(e,Math.max(a,0));i.length===1&&(o=o.filter(f=>f!==r));const d=o.find(f=>f.textValue.toLowerCase().startsWith(i.toLowerCase()));return d!==r?d:void 0}function Mq(e,t){return e.map((r,n)=>e[(t+n)%e.length])}var Fq=eA,EA=rA,Bq=sA,Uq=iA,$q=aA,AA=oA,zq=dA,PA=mA,TA=gA,qq=vA,Vq=xA,RA=wA,LA=bA,DA=NA;const Ir=Fq,Or=Bq,Lr=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(EA,{ref:n,className:Me("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",e),...r,children:[t,s.jsx(Uq,{asChild:!0,children:s.jsx(s2,{className:"h-4 w-4 opacity-50"})})]}));Lr.displayName=EA.displayName;const IA=x.forwardRef(({className:e,...t},r)=>s.jsx(RA,{ref:r,className:Me("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(ak,{className:"h-4 w-4"})}));IA.displayName=RA.displayName;const OA=x.forwardRef(({className:e,...t},r)=>s.jsx(LA,{ref:r,className:Me("flex cursor-default items-center justify-center py-1",e),...t,children:s.jsx(s2,{className:"h-4 w-4"})}));OA.displayName=LA.displayName;const Fr=x.forwardRef(({className:e,children:t,position:r="popper",...n},i)=>s.jsx($q,{children:s.jsxs(AA,{ref:i,className:Me("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:r,...n,children:[s.jsx(IA,{}),s.jsx(zq,{className:Me("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),s.jsx(OA,{})]})}));Fr.displayName=AA.displayName;const Wq=x.forwardRef(({className:e,...t},r)=>s.jsx(PA,{ref:r,className:Me("py-1.5 pl-8 pr-2 text-sm font-semibold",e),...t}));Wq.displayName=PA.displayName;const et=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(TA,{ref:n,className:Me("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",e),...r,children:[s.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:s.jsx(Vq,{children:s.jsx(ji,{className:"h-4 w-4"})})}),s.jsx(qq,{children:t})]}));et.displayName=TA.displayName;const Hq=x.forwardRef(({className:e,...t},r)=>s.jsx(DA,{ref:r,className:Me("-mx-1 my-1 h-px bg-muted",e),...t}));Hq.displayName=DA.displayName;const Gq=["Kitchen Staff","Prep Cook","Line Cook","Sous Chef","Head Chef","Kitchen Manager"];function Kq(){const[e,t]=x.useState([]),[r,n]=x.useState(!1),[i,a]=x.useState({name:"",role:"Kitchen Staff"}),[o,l]=x.useState(!1),{user:d}=Aa(),{isAdmin:f,isManager:h}=Wu(),{toast:p}=qr();x.useEffect(()=>{v()},[]);const v=async()=>{try{const{data:w,error:_}=await Oe.from("staff").select("*").order("name");if(_)throw _;t(w||[])}catch(w){console.error("Error fetching staff:",w),p({title:"Error",description:"Failed to fetch staff list",variant:"destructive"})}},m=async w=>{if(w.preventDefault(),!(!d||!i.name.trim())){l(!0);try{const{data:_}=await Oe.from("profiles").select("organization_id").eq("user_id",d.id).single(),{error:S}=await Oe.from("staff").insert({name:i.name.trim(),role:i.role,organization_id:_?.organization_id,is_active:!0});if(S)throw S;p({title:"Success",description:"Staff member added successfully"}),a({name:"",role:"Kitchen Staff"}),n(!1),v()}catch(_){console.error("Error adding staff:",_),p({title:"Error",description:"Failed to add staff member",variant:"destructive"})}finally{l(!1)}}},j=async(w,_)=>{try{const{error:S}=await Oe.from("staff").update({is_active:!_}).eq("id",w);if(S)throw S;p({title:"Success",description:`Staff member ${_?"deactivated":"activated"}`}),v()}catch(S){console.error("Error updating staff status:",S),p({title:"Error",description:"Failed to update staff status",variant:"destructive"})}};return!f&&!h?null:s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"w-5 h-5"}),"Staff Management"]}),s.jsxs(ke,{onClick:()=>n(!0),children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Add Staff Member"]})]})}),s.jsx(ot,{children:s.jsx("div",{className:"space-y-4",children:e.length===0?s.jsxs("div",{className:"text-center py-8",children:[s.jsx(Ao,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"No staff members found"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Add your first staff member to get started"})]}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:e.map(w=>s.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:w.name}),s.jsx("p",{className:"text-sm text-muted-foreground",children:w.role})]}),s.jsx(pt,{variant:w.is_active?"default":"secondary",children:w.is_active?"Active":"Inactive"})]}),s.jsx("div",{className:"flex gap-2",children:s.jsx(ke,{size:"sm",variant:w.is_active?"outline":"default",onClick:()=>j(w.id,w.is_active),children:w.is_active?"Deactivate":"Activate"})})]},w.id))})})}),s.jsx(Ca,{open:r,onOpenChange:n,children:s.jsxs(Qi,{className:"max-w-md",children:[s.jsx(Ji,{children:s.jsx(Zi,{children:"Add New Staff Member"})}),s.jsxs("form",{onSubmit:m,className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(At,{htmlFor:"staffName",children:"Staff Name *"}),s.jsx(er,{id:"staffName",value:i.name,onChange:w=>a({...i,name:w.target.value}),placeholder:"Enter staff member's name",required:!0})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"staffRole",children:"Role"}),s.jsxs(Ir,{value:i.role,onValueChange:w=>a({...i,role:w}),children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsx(Fr,{className:"bg-background opacity-100",children:Gq.map(w=>s.jsx(et,{value:w,className:"bg-background opacity-100",children:w},w))})]})]}),s.jsxs("div",{className:"flex justify-end gap-3 pt-4",children:[s.jsx(ke,{type:"button",variant:"outline",onClick:()=>n(!1),disabled:o,children:"Cancel"}),s.jsx(ke,{type:"submit",disabled:o||!i.name.trim(),children:o?"Adding...":"Add Staff Member"})]})]})]})})]})}function Yq(){const[e,t]=x.useState(null),[r,n]=x.useState(!0),{user:i}=Aa(),{roles:a,highestRole:o,loading:l,isAdmin:d}=Wu(),{toast:f}=qr();x.useEffect(()=>{h()},[i]);const h=async()=>{if(i)try{const{data:p,error:v}=await Oe.from("profiles").select("organization_id, display_name, phone, position").eq("user_id",i.id).single();if(v)throw v;t(p)}catch(p){console.error("Error fetching user profile:",p),f({title:"Error",description:"Failed to fetch user profile",variant:"destructive"})}finally{n(!1)}};if(!(r||l))return s.jsxs("div",{className:"space-y-6",children:[s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Sc,{className:"w-5 h-5"}),"User Profile & Roles"]})}),s.jsx(ot,{children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Display Name"}),s.jsx("p",{className:"font-medium",children:e?.display_name||"Not set"})]}),e?.position&&s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Position"}),s.jsx("p",{className:"font-medium",children:e.position})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Assigned Roles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:a.length>0?a.map(p=>s.jsxs(pt,{variant:p==="admin"?"default":"secondary",className:"flex items-center gap-1",children:[s.jsx(ef,{className:"w-3 h-3"}),p]},p)):s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(wn,{className:"w-4 h-4"}),"No roles assigned"]})})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Highest Role"}),s.jsx("p",{className:"font-medium",children:o||"None"})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"User ID"}),s.jsx("p",{className:"font-mono text-xs",children:i?.id})]})]}),d&&s.jsx("div",{className:"p-3 bg-green-50 border border-green-200 rounded-lg",children:s.jsx("p",{className:"text-green-800 text-sm font-medium",children:" You have admin access - Staff management is available below"})}),!a.length&&s.jsx("div",{className:"p-3 bg-amber-50 border border-amber-200 rounded-lg",children:s.jsxs("p",{className:"text-amber-800 text-sm",children:[s.jsx("strong",{children:"Note:"})," You don't have any roles assigned yet. Contact an administrator to assign you a role."]})})]})})]}),d&&s.jsx(Kq,{})]})}function Qq(){const[e,t]=x.useState([]),[r,n]=x.useState(""),[i,a]=x.useState(""),[o,l]=x.useState("kg"),[d,f]=x.useState("spoilage"),[h,p]=x.useState(""),{toast:v}=qr();x.useEffect(()=>{m()},[]);const m=async()=>{const{data:_,error:S}=await Oe.from("waste_logs").select("*").order("logged_at",{ascending:!1}).limit(10);!S&&_&&t(_)},j=async()=>{if(!r||!i){v({title:"Error",description:"Please fill in all required fields",variant:"destructive"});return}const{data:{user:_}}=await Oe.auth.getUser();if(!_)return;const{data:S}=await Oe.from("profiles").select("organization_id").eq("user_id",_.id).single(),{error:E}=await Oe.from("waste_logs").insert({organization_id:S?.organization_id,logged_by:_.id,item_name:r,quantity:parseFloat(i),unit:o,reason:d,estimated_cost:h?parseFloat(h):null});E?v({title:"Error",description:"Failed to log waste",variant:"destructive"}):(v({title:"Success",description:"Waste logged successfully"}),n(""),a(""),p(""),m())},w=e.reduce((_,S)=>_+(S.estimated_cost||0),0);return s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Uu,{className:"w-5 h-5"}),"Waste Tracker"]})}),s.jsxs(ot,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsx(er,{placeholder:"Item name",value:r,onChange:_=>n(_.target.value)}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(er,{type:"number",placeholder:"Quantity",value:i,onChange:_=>a(_.target.value)}),s.jsxs(Ir,{value:o,onValueChange:l,children:[s.jsx(Lr,{className:"w-24",children:s.jsx(Or,{})}),s.jsxs(Fr,{className:"bg-background opacity-100",children:[s.jsx(et,{value:"kg",className:"bg-background opacity-100",children:"kg"}),s.jsx(et,{value:"l",className:"bg-background opacity-100",children:"L"}),s.jsx(et,{value:"pcs",className:"bg-background opacity-100",children:"pcs"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs(Ir,{value:d,onValueChange:f,children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsxs(Fr,{className:"bg-background opacity-100",children:[s.jsx(et,{value:"spoilage",className:"bg-background opacity-100",children:"Spoilage"}),s.jsx(et,{value:"overcooking",className:"bg-background opacity-100",children:"Overcooking"}),s.jsx(et,{value:"expired",className:"bg-background opacity-100",children:"Expired"}),s.jsx(et,{value:"contamination",className:"bg-background opacity-100",children:"Contamination"})]})]}),s.jsx(er,{type:"number",placeholder:"Estimated cost (optional)",value:h,onChange:_=>p(_.target.value)})]}),s.jsx(ke,{onClick:j,className:"w-full",children:"Log Waste"}),s.jsxs("div",{className:"pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Total Cost (Recent)"}),s.jsxs("span",{className:"text-lg font-bold text-destructive",children:["$",w.toFixed(2)]})]}),s.jsx("div",{className:"space-y-2",children:e.slice(0,3).map(_=>s.jsxs("div",{className:"text-sm flex justify-between",children:[s.jsxs("span",{className:"text-muted-foreground",children:[_.item_name," (",_.quantity," ",_.unit,")"]}),s.jsxs("span",{className:"text-destructive",children:["$",(_.estimated_cost||0).toFixed(2)]})]},_.id))})]})]})]})}function Jq(){const[e,t]=x.useState([]),[r,n]=x.useState(null);x.useEffect(()=>{i()},[]);const i=async()=>{const{data:l}=await Oe.from("compliance_checks").select("*").order("checked_at",{ascending:!1}).limit(5);if(l){t(l);const d=l.length,f=l.filter(v=>v.status==="passed").length,h=l.filter(v=>v.status==="failed").length,p=l.filter(v=>v.status==="needs_attention").length;n({total_checks:d,passed_count:f,failed_count:h,needs_attention_count:p})}},a=l=>{switch(l){case"passed":return s.jsx(Nc,{className:"h-4 w-4 text-green-500"});case"failed":return s.jsx(h0,{className:"h-4 w-4 text-red-500"});case"needs_attention":return s.jsx(wn,{className:"h-4 w-4 text-yellow-500"});default:return s.jsx(wn,{className:"h-4 w-4 text-gray-500"})}},o=l=>{const d={passed:"default",failed:"destructive",needs_attention:"secondary"};return s.jsx(pt,{variant:d[l]||"default",children:l.replace("_"," ")})};return s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(ef,{className:"h-5 w-5"}),"Compliance Reports"]})}),s.jsx(ot,{children:r&&s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Checks"}),s.jsx("p",{className:"text-2xl font-bold",children:r.total_checks})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Passed"}),s.jsx("p",{className:"text-2xl font-bold text-success",children:r.passed_count})]})]}),s.jsx("div",{className:"space-y-2",children:e.map(l=>s.jsxs("div",{className:"flex items-center justify-between p-2 rounded border",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[a(l.status),s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium",children:l.check_type}),s.jsx("p",{className:"text-xs text-muted-foreground",children:l.area})]})]}),o(l.status)]},l.id))})]})})]})}var cb="Progress",ub=100,[Zq]=Fs(cb),[Xq,eV]=Zq(cb),MA=x.forwardRef((e,t)=>{const{__scopeProgress:r,value:n=null,max:i,getValueLabel:a=tV,...o}=e;(i||i===0)&&!HN(i)&&console.error(rV(`${i}`,"Progress"));const l=HN(i)?i:ub;n!==null&&!GN(n,l)&&console.error(nV(`${n}`,"Progress"));const d=GN(n,l)?n:null,f=$v(d)?a(d,l):void 0;return s.jsx(Xq,{scope:r,value:d,max:l,children:s.jsx(yt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":$v(d)?d:void 0,"aria-valuetext":f,role:"progressbar","data-state":UA(d,l),"data-value":d??void 0,"data-max":l,...o,ref:t})})});MA.displayName=cb;var FA="ProgressIndicator",BA=x.forwardRef((e,t)=>{const{__scopeProgress:r,...n}=e,i=eV(FA,r);return s.jsx(yt.div,{"data-state":UA(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...n,ref:t})});BA.displayName=FA;function tV(e,t){return`${Math.round(e/t*100)}%`}function UA(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function $v(e){return typeof e=="number"}function HN(e){return $v(e)&&!isNaN(e)&&e>0}function GN(e,t){return $v(e)&&!isNaN(e)&&e<=t&&e>=0}function rV(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${ub}\`.`}function nV(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${ub} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var $A=MA,sV=BA;const zv=x.forwardRef(({className:e,value:t,...r},n)=>s.jsx($A,{ref:n,className:Me("relative h-4 w-full overflow-hidden rounded-full bg-secondary",e),...r,children:s.jsx(sV,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));zv.displayName=$A.displayName;function iV(){const[e,t]=x.useState([]),[r,n]=x.useState(!0);x.useEffect(()=>{i()},[]);const i=async()=>{const{data:l,error:d}=await Oe.from("efficiency_analytics").select("*").limit(5);!d&&l&&t(l),n(!1)},a=l=>l<=1.1?"text-green-500":l<=1.3?"text-yellow-500":"text-red-500",o=l=>l<=1.1?"Excellent":l<=1.3?"Good":"Needs Improvement";return r?s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Nh,{className:"h-5 w-5"}),"Efficiency Metrics"]})}),s.jsx(ot,{children:s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})})]}):s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Nh,{className:"h-5 w-5"}),"Production Efficiency"]})}),s.jsx(ot,{children:e.length===0?s.jsx("p",{className:"text-sm text-muted-foreground",children:"No production data yet"}):s.jsx("div",{className:"space-y-4",children:e.map((l,d)=>{const f=l.time_efficiency_ratio||1,h=(l.avg_quality||0)/5*100;return s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-sm",children:l.recipe_name}),s.jsx("span",{className:`text-xs font-medium ${a(f)}`,children:o(f)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("div",{className:"flex-1",children:s.jsx(zv,{value:Math.min(1/f*100,100)})}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[(f*100).toFixed(0),"% of planned time"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(AL,{className:"h-4 w-4 text-muted-foreground"}),s.jsx("div",{className:"flex-1",children:s.jsx(zv,{value:h})}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[l.avg_quality?.toFixed(1),"/5.0"]})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[l.production_count," batches  ",l.total_produced," units produced"]})]},d)})})})]})}function aV(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),[i,a]=x.useState(0),{user:o}=Aa(),{toast:l}=qr();x.useEffect(()=>{d(),f()},[]);const d=async()=>{try{n(!0);const{data:h,error:p}=await Oe.from("prepared_items").select(`
          *,
          recipes:recipe_id (
            name,
            hold_time_days,
            allergens
          )
        `).order("prepared_at",{ascending:!1}).limit(10);if(p)throw p;const v=h?.map(m=>{const j=m.recipes,w=xs(new Date(m.prepared_at),j.hold_time_days||3),_=Ph(new Date,xs(w,-1)),S=Ph(new Date,w);return{...m,recipe_name:j?.name||"Unknown Recipe",expiry_date:w,status:S?"expired":_?"expiring":"good",allergens:j?.allergens||[]}})||[];t(v)}catch(h){console.error("Error fetching recent activity:",h),l({title:"Error",description:"Failed to fetch recent activity",variant:"destructive"})}finally{n(!1)}},f=async()=>{try{const{data:h,error:p}=await Oe.from("waste_logs").select("estimated_cost");if(p)throw p;const v=h?.reduce((m,j)=>m+(j.estimated_cost||0),0)||0;a(v)}catch(h){console.error("Error fetching waste total:",h)}};return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Kitchen Dashboard"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Monitor your kitchen operations and food safety"})]}),s.jsx("div",{className:"flex gap-3",children:s.jsx(ke,{variant:"hero",children:"Generate Report"})})]}),s.jsx(rq,{items:e}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx(Gi,{title:"Compliance Score",value:"98.5%",change:"+0.3% this week",changeType:"positive",icon:cl}),s.jsx(Gi,{title:"Total Waste Cost",value:`$${i.toFixed(2)}`,icon:Nh})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-secondary/10 rounded-lg flex items-center justify-center",children:s.jsx(gk,{className:"w-4 h-4 text-secondary"})}),s.jsx("h3",{className:"font-semibold",children:"Temperature Alerts"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-success/10 rounded-lg border border-success/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Walk-in Cooler"}),s.jsx("span",{className:"text-sm text-success",children:"3C"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Normal range"})]}),s.jsxs("div",{className:"p-3 bg-warning/10 rounded-lg border border-warning/20",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"text-sm font-medium",children:"Freezer Unit 2"}),s.jsx("span",{className:"text-sm text-warning",children:"-17C"})]}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Slightly high"})]})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-accent/50 rounded-lg flex items-center justify-center",children:s.jsx(Ya,{className:"w-4 h-4 text-accent-foreground"})}),s.jsx("h3",{className:"font-semibold",children:"Daily Routine"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Opening Checklist"}),s.jsx("span",{className:"text-sm text-success font-medium",children:"Complete"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Temperature Logs"}),s.jsx("span",{className:"text-sm text-warning font-medium",children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsx("span",{className:"text-sm",children:"Cleaning Tasks"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled"})]})]})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-primary/10 rounded-lg flex items-center justify-center",children:s.jsx(Xn,{className:"w-4 h-4 text-primary"})}),s.jsx("h3",{className:"font-semibold",children:"Today's Schedule"})]}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Morning Prep"}),s.jsx("span",{className:"text-sm text-success font-medium",children:"Complete"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-border/50",children:[s.jsx("span",{className:"text-sm",children:"Lunch Service"}),s.jsx("span",{className:"text-sm text-warning font-medium",children:"In Progress"})]}),s.jsxs("div",{className:"flex items-center justify-between py-2",children:[s.jsx("span",{className:"text-sm",children:"Evening Prep"}),s.jsx("span",{className:"text-sm text-muted-foreground",children:"Scheduled"})]})]})]})]}),s.jsx("div",{className:"grid grid-cols-1 gap-6",children:s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[s.jsx("div",{className:"w-8 h-8 bg-accent/50 rounded-lg flex items-center justify-center",children:s.jsx(f0,{className:"w-4 h-4 text-accent-foreground"})}),s.jsx("h3",{className:"font-semibold",children:"Recent Preparations"})]}),s.jsx("div",{className:"space-y-3",children:r?s.jsx("div",{className:"text-sm text-muted-foreground",children:"Loading activity..."}):e.length===0?s.jsx("div",{className:"text-sm text-muted-foreground",children:"No recent activity"}):e.slice(0,3).map((h,p)=>s.jsxs("div",{className:"text-sm",children:[s.jsx("p",{className:"font-medium",children:h.recipe_name}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("p",{className:"text-muted-foreground",children:["Expires: ",on(new Date(h.expiry_date),"dd/MM HH:mm")]}),s.jsx(pt,{variant:h.status==="expired"?"destructive":h.status==="expiring"?"default":"secondary",className:"text-xs",children:h.status==="expired"?"Expired":h.status==="expiring"?"Expiring":"Fresh"})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:on(new Date(h.prepared_at),"MMM dd, HH:mm")})]},p))})]})}),s.jsx(Yq,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[s.jsx(Qq,{}),s.jsx(Jq,{}),s.jsx(iV,{})]}),s.jsx(RE,{})]})}const W0=x.forwardRef(({className:e,...t},r)=>s.jsx("textarea",{className:Me("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:r,...t}));W0.displayName="Textarea";var H0="Checkbox",[oV]=Fs(H0),[lV,db]=oV(H0);function cV(e){const{__scopeCheckbox:t,checked:r,children:n,defaultChecked:i,disabled:a,form:o,name:l,onCheckedChange:d,required:f,value:h="on",internal_do_not_use_render:p}=e,[v,m]=Yi({prop:r,defaultProp:i??!1,onChange:d,caller:H0}),[j,w]=x.useState(null),[_,S]=x.useState(null),E=x.useRef(!1),k=j?!!o||!!j.closest("form"):!0,C={checked:v,disabled:a,setChecked:m,control:j,setControl:w,name:l,form:o,value:h,hasConsumerStoppedPropagationRef:E,required:f,defaultChecked:Eu(i)?!1:i,isFormControl:k,bubbleInput:_,setBubbleInput:S};return s.jsx(lV,{scope:t,...C,children:uV(p)?p(C):n})}var zA="CheckboxTrigger",qA=x.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:r,...n},i)=>{const{control:a,value:o,disabled:l,checked:d,required:f,setControl:h,setChecked:p,hasConsumerStoppedPropagationRef:v,isFormControl:m,bubbleInput:j}=db(zA,e),w=or(i,h),_=x.useRef(d);return x.useEffect(()=>{const S=a?.form;if(S){const E=()=>p(_.current);return S.addEventListener("reset",E),()=>S.removeEventListener("reset",E)}},[a,p]),s.jsx(yt.button,{type:"button",role:"checkbox","aria-checked":Eu(d)?"mixed":d,"aria-required":f,"data-state":KA(d),"data-disabled":l?"":void 0,disabled:l,value:o,...n,ref:w,onKeyDown:lt(t,S=>{S.key==="Enter"&&S.preventDefault()}),onClick:lt(r,S=>{p(E=>Eu(E)?!0:!E),j&&m&&(v.current=S.isPropagationStopped(),v.current||S.stopPropagation())})})});qA.displayName=zA;var fb=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,name:n,checked:i,defaultChecked:a,required:o,disabled:l,value:d,onCheckedChange:f,form:h,...p}=e;return s.jsx(cV,{__scopeCheckbox:r,checked:i,defaultChecked:a,disabled:l,required:o,onCheckedChange:f,name:n,form:h,value:d,internal_do_not_use_render:({isFormControl:v})=>s.jsxs(s.Fragment,{children:[s.jsx(qA,{...p,ref:t,__scopeCheckbox:r}),v&&s.jsx(GA,{__scopeCheckbox:r})]})})});fb.displayName=H0;var VA="CheckboxIndicator",WA=x.forwardRef((e,t)=>{const{__scopeCheckbox:r,forceMount:n,...i}=e,a=db(VA,r);return s.jsx(Bs,{present:n||Eu(a.checked)||a.checked===!0,children:s.jsx(yt.span,{"data-state":KA(a.checked),"data-disabled":a.disabled?"":void 0,...i,ref:t,style:{pointerEvents:"none",...e.style}})})});WA.displayName=VA;var HA="CheckboxBubbleInput",GA=x.forwardRef(({__scopeCheckbox:e,...t},r)=>{const{control:n,hasConsumerStoppedPropagationRef:i,checked:a,defaultChecked:o,required:l,disabled:d,name:f,value:h,form:p,bubbleInput:v,setBubbleInput:m}=db(HA,e),j=or(r,m),w=ob(a),_=p2(n);x.useEffect(()=>{const E=v;if(!E)return;const k=window.HTMLInputElement.prototype,D=Object.getOwnPropertyDescriptor(k,"checked").set,M=!i.current;if(w!==a&&D){const F=new Event("click",{bubbles:M});E.indeterminate=Eu(a),D.call(E,Eu(a)?!1:a),E.dispatchEvent(F)}},[v,w,a,i]);const S=x.useRef(Eu(a)?!1:a);return s.jsx(yt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:o??S.current,required:l,disabled:d,name:f,value:h,form:p,...t,tabIndex:-1,ref:j,style:{...t.style,..._,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});GA.displayName=HA;function uV(e){return typeof e=="function"}function Eu(e){return e==="indeterminate"}function KA(e){return Eu(e)?"indeterminate":e?"checked":"unchecked"}const hb=x.forwardRef(({className:e,...t},r)=>s.jsx(fb,{ref:r,className:Me("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",e),...t,children:s.jsx(WA,{className:Me("flex items-center justify-center text-current"),children:s.jsx(ji,{className:"h-4 w-4"})})}));hb.displayName=fb.displayName;const dV=["Dairy","Eggs","Fish","Shellfish","Tree Nuts","Peanuts","Wheat","Gluten","Soybeans","Sesame","Lupin","Sulphites","Mustard","Celery"],fV=["Vegan","Vegetarian","Halal","Kosher","Gluten-Free","Dairy-Free","Nut-Free"],hV=["Entrees","Mains","Desserts","Sides","Sauces","Beverages","Bakery","Other"];function mV({open:e,onOpenChange:t,onSuccess:r,recipeToEdit:n}){const[i,a]=x.useState({name:"",yieldAmount:"",yieldUnit:"servings",holdTimeDays:"3",category:"Mains",estimatedPrepMinutes:"30",serviceGapMinutes:"0"}),[o,l]=x.useState([]),[d,f]=x.useState(""),[h,p]=x.useState([]),[v,m]=x.useState(""),[j,w]=x.useState([]),[_,S]=x.useState(""),[E,k]=x.useState([]),[C,D]=x.useState(!1),{user:M}=Aa(),{toast:F}=qr();x.useEffect(()=>{n?(a({name:n.name||"",yieldAmount:n.yield_amount?.toString()||"",yieldUnit:n.yield_unit||"servings",holdTimeDays:n.hold_time_days?.toString()||"3",category:n.category||"Mains",estimatedPrepMinutes:n.estimated_prep_minutes?.toString()||"30",serviceGapMinutes:n.service_gap_minutes?.toString()||"0"}),l(n.ingredients||[]),p(n.prep_steps||[]),w(n.allergens||[]),k(n.dietary_requirements||[])):U()},[n,e]);const U=()=>{a({name:"",yieldAmount:"",yieldUnit:"servings",holdTimeDays:"3",category:"Mains",estimatedPrepMinutes:"30",serviceGapMinutes:"0"}),l([]),f(""),p([]),m(""),w([]),S(""),k([])},I=()=>{d.trim()&&(l([...o,d.trim()]),f(""))},K=ie=>{l(o.filter((le,G)=>G!==ie))},B=()=>{v.trim()&&(p([...h,v.trim()]),m(""))},O=ie=>{p(h.filter((le,G)=>G!==ie))},z=ie=>{w(le=>le.includes(ie)?le.filter(G=>G!==ie):[...le,ie])},q=()=>{_.trim()&&!j.includes(_.trim())&&(w([...j,_.trim()]),S(""))},ue=async ie=>{if(ie.preventDefault(),!!M){if(!i.name.trim()||o.length===0||h.length===0){F({title:"Validation Error",description:"Please fill in all required fields",variant:"destructive"});return}D(!0);try{const{data:le}=await Oe.from("profiles").select("organization_id").eq("user_id",M.id).single(),G={name:i.name.trim(),ingredients:o,prep_steps:h,allergens:j,dietary_requirements:E,yield_amount:parseInt(i.yieldAmount)||1,yield_unit:i.yieldUnit,hold_time_days:parseInt(i.holdTimeDays)||3,category:i.category,estimated_prep_minutes:parseInt(i.estimatedPrepMinutes)||30,service_gap_minutes:parseInt(i.serviceGapMinutes)||0};let se;if(n?se=(await Oe.from("recipes").update(G).eq("id",n.id)).error:se=(await Oe.from("recipes").insert({...G,created_by:M.id,organization_id:le?.organization_id})).error,se)throw se;F({title:"Success",description:n?"Recipe updated successfully":"Recipe created successfully"}),U(),t(!1),r()}catch(le){console.error("Error creating recipe:",le),F({title:"Error",description:"Failed to create recipe",variant:"destructive"})}finally{D(!1)}}};return s.jsx(Ca,{open:e,onOpenChange:t,children:s.jsxs(Qi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Ji,{children:s.jsx(Zi,{children:n?"Edit Recipe":"Create New Recipe"})}),s.jsxs("form",{onSubmit:ue,className:"space-y-6",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"md:col-span-2",children:[s.jsx(At,{htmlFor:"name",children:"Recipe Name *"}),s.jsx(er,{id:"name",value:i.name,onChange:ie=>a({...i,name:ie.target.value}),placeholder:"Enter recipe name",required:!0})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"category",children:"Category"}),s.jsxs(Ir,{value:i.category,onValueChange:ie=>a({...i,category:ie}),children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsx(Fr,{className:"bg-background opacity-100",children:hV.map(ie=>s.jsx(et,{value:ie,className:"bg-background opacity-100",children:ie},ie))})]})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"holdTime",children:"Hold Time (days) *"}),s.jsx(er,{id:"holdTime",type:"number",value:i.holdTimeDays,onChange:ie=>a({...i,holdTimeDays:ie.target.value}),placeholder:"3",min:"1",required:!0})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[s.jsxs("div",{children:[s.jsx(At,{htmlFor:"yield",children:"Yield *"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(er,{id:"yield",type:"number",value:i.yieldAmount,onChange:ie=>a({...i,yieldAmount:ie.target.value}),placeholder:"Amount",min:"1",required:!0}),s.jsxs(Ir,{value:i.yieldUnit,onValueChange:ie=>a({...i,yieldUnit:ie}),children:[s.jsx(Lr,{className:"w-32",children:s.jsx(Or,{})}),s.jsxs(Fr,{className:"bg-background opacity-100",children:[s.jsx(et,{value:"servings",className:"bg-background opacity-100",children:"servings"}),s.jsx(et,{value:"portions",className:"bg-background opacity-100",children:"portions"}),s.jsx(et,{value:"litres",className:"bg-background opacity-100",children:"litres"}),s.jsx(et,{value:"kg",className:"bg-background opacity-100",children:"kg"})]})]})]})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"prepTime",children:"Est. Prep Time (minutes)"}),s.jsx(er,{id:"prepTime",type:"number",value:i.estimatedPrepMinutes,onChange:ie=>a({...i,estimatedPrepMinutes:ie.target.value}),placeholder:"30",min:"1"})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"serviceGap",children:"Service Gap (minutes)"}),s.jsx(er,{id:"serviceGap",type:"number",value:i.serviceGapMinutes,onChange:ie=>a({...i,serviceGapMinutes:ie.target.value}),placeholder:"0",min:"0"})]})]}),s.jsxs("div",{children:[s.jsx(At,{children:"Ingredients *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(er,{value:d,onChange:ie=>f(ie.target.value),placeholder:"Add ingredient",onKeyPress:ie=>ie.key==="Enter"&&(ie.preventDefault(),I())}),s.jsx(ke,{type:"button",onClick:I,size:"sm",children:s.jsx(Ln,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:o.map((ie,le)=>s.jsxs(pt,{variant:"secondary",className:"gap-1",children:[ie,s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>K(le)})]},le))})]}),s.jsxs("div",{children:[s.jsx(At,{children:"Preparation Steps *"}),s.jsxs("div",{className:"flex gap-2 mb-2",children:[s.jsx(W0,{value:v,onChange:ie=>m(ie.target.value),placeholder:"Add preparation step",className:"min-h-[60px]"}),s.jsx(ke,{type:"button",onClick:B,size:"sm",children:s.jsx(Ln,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"space-y-2",children:h.map((ie,le)=>s.jsxs("div",{className:"flex items-start gap-2 p-3 bg-muted rounded-lg",children:[s.jsxs("span",{className:"font-medium text-sm text-muted-foreground",children:[le+1,"."]}),s.jsx("span",{className:"flex-1 text-sm",children:ie}),s.jsx(xn,{className:"w-4 h-4 cursor-pointer text-muted-foreground hover:text-destructive",onClick:()=>O(le)})]},le))})]}),s.jsxs("div",{children:[s.jsx(At,{children:"Allergens"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2 mb-4",children:dV.map(ie=>s.jsx(ke,{type:"button",variant:j.includes(ie)?"default":"outline",size:"sm",onClick:()=>z(ie),children:ie},ie))}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(er,{value:_,onChange:ie=>S(ie.target.value),placeholder:"Add custom allergen",onKeyPress:ie=>ie.key==="Enter"&&(ie.preventDefault(),q())}),s.jsx(ke,{type:"button",onClick:q,size:"sm",variant:"outline",children:s.jsx(Ln,{className:"w-4 h-4"})})]})]}),s.jsxs("div",{children:[s.jsx(At,{children:"Dietary Requirements"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:fV.map(ie=>s.jsxs("div",{className:"flex items-center space-x-2",children:[s.jsx(hb,{id:ie,checked:E.includes(ie),onCheckedChange:le=>{k(le?[...E,ie]:E.filter(G=>G!==ie))}}),s.jsx(At,{htmlFor:ie,className:"text-sm font-normal",children:ie})]},ie))})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(ke,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:C,children:"Cancel"}),s.jsx(ke,{type:"submit",disabled:C,children:C?n?"Updating...":"Creating...":n?"Update Recipe":"Create Recipe"})]})]})]})})}var YA="AlertDialog",[pV]=Fs(YA,[DE]),Ac=DE(),QA=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ac(t);return s.jsx(rb,{...n,...r,modal:!0})};QA.displayName=YA;var gV="AlertDialogTrigger",vV=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=Ac(r);return s.jsx(QE,{...i,...n,ref:t})});vV.displayName=gV;var yV="AlertDialogPortal",JA=e=>{const{__scopeAlertDialog:t,...r}=e,n=Ac(t);return s.jsx(nb,{...n,...r})};JA.displayName=yV;var xV="AlertDialogOverlay",ZA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=Ac(r);return s.jsx(U0,{...i,...n,ref:t})});ZA.displayName=xV;var yh="AlertDialogContent",[wV,bV]=pV(yh),_V=R4("AlertDialogContent"),XA=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,children:n,...i}=e,a=Ac(r),o=x.useRef(null),l=or(t,o),d=x.useRef(null);return s.jsx(cq,{contentName:yh,titleName:eP,docsSlug:"alert-dialog",children:s.jsx(wV,{scope:r,cancelRef:d,children:s.jsxs($0,{role:"alertdialog",...a,...i,ref:l,onOpenAutoFocus:lt(i.onOpenAutoFocus,f=>{f.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:f=>f.preventDefault(),onInteractOutside:f=>f.preventDefault(),children:[s.jsx(_V,{children:n}),s.jsx(jV,{contentRef:o})]})})})});XA.displayName=yh;var eP="AlertDialogTitle",tP=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=Ac(r);return s.jsx(sb,{...i,...n,ref:t})});tP.displayName=eP;var rP="AlertDialogDescription",nP=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=Ac(r);return s.jsx(ib,{...i,...n,ref:t})});nP.displayName=rP;var NV="AlertDialogAction",sP=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,i=Ac(r);return s.jsx(ab,{...i,...n,ref:t})});sP.displayName=NV;var iP="AlertDialogCancel",aP=x.forwardRef((e,t)=>{const{__scopeAlertDialog:r,...n}=e,{cancelRef:i}=bV(iP,r),a=Ac(r),o=or(t,i);return s.jsx(ab,{...a,...n,ref:o})});aP.displayName=iP;var jV=({contentRef:e})=>{const t=`\`${yh}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${yh}\` by passing a \`${rP}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${yh}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return x.useEffect(()=>{document.getElementById(e.current?.getAttribute("aria-describedby"))||console.warn(t)},[t,e]),null},SV=QA,kV=JA,oP=ZA,lP=XA,cP=sP,uP=aP,dP=tP,fP=nP;const wc=SV,CV=kV,hP=x.forwardRef(({className:e,...t},r)=>s.jsx(oP,{className:Me("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t,ref:r}));hP.displayName=oP.displayName;const fl=x.forwardRef(({className:e,...t},r)=>s.jsxs(CV,{children:[s.jsx(hP,{}),s.jsx(lP,{ref:r,className:Me("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t})]}));fl.displayName=lP.displayName;const hl=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col space-y-2 text-center sm:text-left",e),...t});hl.displayName="AlertDialogHeader";const ml=({className:e,...t})=>s.jsx("div",{className:Me("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});ml.displayName="AlertDialogFooter";const pl=x.forwardRef(({className:e,...t},r)=>s.jsx(dP,{ref:r,className:Me("text-lg font-semibold",e),...t}));pl.displayName=dP.displayName;const bc=x.forwardRef(({className:e,...t},r)=>s.jsx(fP,{ref:r,className:Me("text-sm text-muted-foreground",e),...t}));bc.displayName=fP.displayName;const gl=x.forwardRef(({className:e,...t},r)=>s.jsx(cP,{ref:r,className:Me(mp(),e),...t}));gl.displayName=cP.displayName;const vl=x.forwardRef(({className:e,...t},r)=>s.jsx(uP,{ref:r,className:Me(mp({variant:"outline"}),"mt-2 sm:mt-0",e),...t}));vl.displayName=uP.displayName;var Yf={},Ex,KN;function EV(){return KN||(KN=1,Ex=function(){return typeof Promise=="function"&&Promise.prototype&&Promise.prototype.then}),Ex}var Ax={},pu={},YN;function of(){if(YN)return pu;YN=1;let e;const t=[0,26,44,70,100,134,172,196,242,292,346,404,466,532,581,655,733,815,901,991,1085,1156,1258,1364,1474,1588,1706,1828,1921,2051,2185,2323,2465,2611,2761,2876,3034,3196,3362,3532,3706];return pu.getSymbolSize=function(n){if(!n)throw new Error('"version" cannot be null or undefined');if(n<1||n>40)throw new Error('"version" should be in range from 1 to 40');return n*4+17},pu.getSymbolTotalCodewords=function(n){return t[n]},pu.getBCHDigit=function(r){let n=0;for(;r!==0;)n++,r>>>=1;return n},pu.setToSJISFunction=function(n){if(typeof n!="function")throw new Error('"toSJISFunc" is not a valid function.');e=n},pu.isKanjiModeEnabled=function(){return typeof e<"u"},pu.toSJIS=function(n){return e(n)},pu}var Px={},QN;function mb(){return QN||(QN=1,(function(e){e.L={bit:1},e.M={bit:0},e.Q={bit:3},e.H={bit:2};function t(r){if(typeof r!="string")throw new Error("Param is not a string");switch(r.toLowerCase()){case"l":case"low":return e.L;case"m":case"medium":return e.M;case"q":case"quartile":return e.Q;case"h":case"high":return e.H;default:throw new Error("Unknown EC Level: "+r)}}e.isValid=function(n){return n&&typeof n.bit<"u"&&n.bit>=0&&n.bit<4},e.from=function(n,i){if(e.isValid(n))return n;try{return t(n)}catch{return i}}})(Px)),Px}var Tx,JN;function AV(){if(JN)return Tx;JN=1;function e(){this.buffer=[],this.length=0}return e.prototype={get:function(t){const r=Math.floor(t/8);return(this.buffer[r]>>>7-t%8&1)===1},put:function(t,r){for(let n=0;n<r;n++)this.putBit((t>>>r-n-1&1)===1)},getLengthInBits:function(){return this.length},putBit:function(t){const r=Math.floor(this.length/8);this.buffer.length<=r&&this.buffer.push(0),t&&(this.buffer[r]|=128>>>this.length%8),this.length++}},Tx=e,Tx}var Rx,ZN;function PV(){if(ZN)return Rx;ZN=1;function e(t){if(!t||t<1)throw new Error("BitMatrix size must be defined and greater than 0");this.size=t,this.data=new Uint8Array(t*t),this.reservedBit=new Uint8Array(t*t)}return e.prototype.set=function(t,r,n,i){const a=t*this.size+r;this.data[a]=n,i&&(this.reservedBit[a]=!0)},e.prototype.get=function(t,r){return this.data[t*this.size+r]},e.prototype.xor=function(t,r,n){this.data[t*this.size+r]^=n},e.prototype.isReserved=function(t,r){return this.reservedBit[t*this.size+r]},Rx=e,Rx}var Lx={},XN;function TV(){return XN||(XN=1,(function(e){const t=of().getSymbolSize;e.getRowColCoords=function(n){if(n===1)return[];const i=Math.floor(n/7)+2,a=t(n),o=a===145?26:Math.ceil((a-13)/(2*i-2))*2,l=[a-7];for(let d=1;d<i-1;d++)l[d]=l[d-1]-o;return l.push(6),l.reverse()},e.getPositions=function(n){const i=[],a=e.getRowColCoords(n),o=a.length;for(let l=0;l<o;l++)for(let d=0;d<o;d++)l===0&&d===0||l===0&&d===o-1||l===o-1&&d===0||i.push([a[l],a[d]]);return i}})(Lx)),Lx}var Dx={},ej;function RV(){if(ej)return Dx;ej=1;const e=of().getSymbolSize,t=7;return Dx.getPositions=function(n){const i=e(n);return[[0,0],[i-t,0],[0,i-t]]},Dx}var Ix={},tj;function LV(){return tj||(tj=1,(function(e){e.Patterns={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7};const t={N1:3,N2:3,N3:40,N4:10};e.isValid=function(i){return i!=null&&i!==""&&!isNaN(i)&&i>=0&&i<=7},e.from=function(i){return e.isValid(i)?parseInt(i,10):void 0},e.getPenaltyN1=function(i){const a=i.size;let o=0,l=0,d=0,f=null,h=null;for(let p=0;p<a;p++){l=d=0,f=h=null;for(let v=0;v<a;v++){let m=i.get(p,v);m===f?l++:(l>=5&&(o+=t.N1+(l-5)),f=m,l=1),m=i.get(v,p),m===h?d++:(d>=5&&(o+=t.N1+(d-5)),h=m,d=1)}l>=5&&(o+=t.N1+(l-5)),d>=5&&(o+=t.N1+(d-5))}return o},e.getPenaltyN2=function(i){const a=i.size;let o=0;for(let l=0;l<a-1;l++)for(let d=0;d<a-1;d++){const f=i.get(l,d)+i.get(l,d+1)+i.get(l+1,d)+i.get(l+1,d+1);(f===4||f===0)&&o++}return o*t.N2},e.getPenaltyN3=function(i){const a=i.size;let o=0,l=0,d=0;for(let f=0;f<a;f++){l=d=0;for(let h=0;h<a;h++)l=l<<1&2047|i.get(f,h),h>=10&&(l===1488||l===93)&&o++,d=d<<1&2047|i.get(h,f),h>=10&&(d===1488||d===93)&&o++}return o*t.N3},e.getPenaltyN4=function(i){let a=0;const o=i.data.length;for(let d=0;d<o;d++)a+=i.data[d];return Math.abs(Math.ceil(a*100/o/5)-10)*t.N4};function r(n,i,a){switch(n){case e.Patterns.PATTERN000:return(i+a)%2===0;case e.Patterns.PATTERN001:return i%2===0;case e.Patterns.PATTERN010:return a%3===0;case e.Patterns.PATTERN011:return(i+a)%3===0;case e.Patterns.PATTERN100:return(Math.floor(i/2)+Math.floor(a/3))%2===0;case e.Patterns.PATTERN101:return i*a%2+i*a%3===0;case e.Patterns.PATTERN110:return(i*a%2+i*a%3)%2===0;case e.Patterns.PATTERN111:return(i*a%3+(i+a)%2)%2===0;default:throw new Error("bad maskPattern:"+n)}}e.applyMask=function(i,a){const o=a.size;for(let l=0;l<o;l++)for(let d=0;d<o;d++)a.isReserved(d,l)||a.xor(d,l,r(i,d,l))},e.getBestMask=function(i,a){const o=Object.keys(e.Patterns).length;let l=0,d=1/0;for(let f=0;f<o;f++){a(f),e.applyMask(f,i);const h=e.getPenaltyN1(i)+e.getPenaltyN2(i)+e.getPenaltyN3(i)+e.getPenaltyN4(i);e.applyMask(f,i),h<d&&(d=h,l=f)}return l}})(Ix)),Ix}var Qg={},rj;function mP(){if(rj)return Qg;rj=1;const e=mb(),t=[1,1,1,1,1,1,1,1,1,1,2,2,1,2,2,4,1,2,4,4,2,4,4,4,2,4,6,5,2,4,6,6,2,5,8,8,4,5,8,8,4,5,8,11,4,8,10,11,4,9,12,16,4,9,16,16,6,10,12,18,6,10,17,16,6,11,16,19,6,13,18,21,7,14,21,25,8,16,20,25,8,17,23,25,9,17,23,34,9,18,25,30,10,20,27,32,12,21,29,35,12,23,34,37,12,25,34,40,13,26,35,42,14,28,38,45,15,29,40,48,16,31,43,51,17,33,45,54,18,35,48,57,19,37,51,60,19,38,53,63,20,40,56,66,21,43,59,70,22,45,62,74,24,47,65,77,25,49,68,81],r=[7,10,13,17,10,16,22,28,15,26,36,44,20,36,52,64,26,48,72,88,36,64,96,112,40,72,108,130,48,88,132,156,60,110,160,192,72,130,192,224,80,150,224,264,96,176,260,308,104,198,288,352,120,216,320,384,132,240,360,432,144,280,408,480,168,308,448,532,180,338,504,588,196,364,546,650,224,416,600,700,224,442,644,750,252,476,690,816,270,504,750,900,300,560,810,960,312,588,870,1050,336,644,952,1110,360,700,1020,1200,390,728,1050,1260,420,784,1140,1350,450,812,1200,1440,480,868,1290,1530,510,924,1350,1620,540,980,1440,1710,570,1036,1530,1800,570,1064,1590,1890,600,1120,1680,1980,630,1204,1770,2100,660,1260,1860,2220,720,1316,1950,2310,750,1372,2040,2430];return Qg.getBlocksCount=function(i,a){switch(a){case e.L:return t[(i-1)*4+0];case e.M:return t[(i-1)*4+1];case e.Q:return t[(i-1)*4+2];case e.H:return t[(i-1)*4+3];default:return}},Qg.getTotalCodewordsCount=function(i,a){switch(a){case e.L:return r[(i-1)*4+0];case e.M:return r[(i-1)*4+1];case e.Q:return r[(i-1)*4+2];case e.H:return r[(i-1)*4+3];default:return}},Qg}var Ox={},Om={},nj;function DV(){if(nj)return Om;nj=1;const e=new Uint8Array(512),t=new Uint8Array(256);return(function(){let n=1;for(let i=0;i<255;i++)e[i]=n,t[n]=i,n<<=1,n&256&&(n^=285);for(let i=255;i<512;i++)e[i]=e[i-255]})(),Om.log=function(n){if(n<1)throw new Error("log("+n+")");return t[n]},Om.exp=function(n){return e[n]},Om.mul=function(n,i){return n===0||i===0?0:e[t[n]+t[i]]},Om}var sj;function IV(){return sj||(sj=1,(function(e){const t=DV();e.mul=function(n,i){const a=new Uint8Array(n.length+i.length-1);for(let o=0;o<n.length;o++)for(let l=0;l<i.length;l++)a[o+l]^=t.mul(n[o],i[l]);return a},e.mod=function(n,i){let a=new Uint8Array(n);for(;a.length-i.length>=0;){const o=a[0];for(let d=0;d<i.length;d++)a[d]^=t.mul(i[d],o);let l=0;for(;l<a.length&&a[l]===0;)l++;a=a.slice(l)}return a},e.generateECPolynomial=function(n){let i=new Uint8Array([1]);for(let a=0;a<n;a++)i=e.mul(i,new Uint8Array([1,t.exp(a)]));return i}})(Ox)),Ox}var Mx,ij;function OV(){if(ij)return Mx;ij=1;const e=IV();function t(r){this.genPoly=void 0,this.degree=r,this.degree&&this.initialize(this.degree)}return t.prototype.initialize=function(n){this.degree=n,this.genPoly=e.generateECPolynomial(this.degree)},t.prototype.encode=function(n){if(!this.genPoly)throw new Error("Encoder not initialized");const i=new Uint8Array(n.length+this.degree);i.set(n);const a=e.mod(i,this.genPoly),o=this.degree-a.length;if(o>0){const l=new Uint8Array(this.degree);return l.set(a,o),l}return a},Mx=t,Mx}var Fx={},Bx={},Ux={},aj;function pP(){return aj||(aj=1,Ux.isValid=function(t){return!isNaN(t)&&t>=1&&t<=40}),Ux}var nl={},oj;function gP(){if(oj)return nl;oj=1;const e="[0-9]+",t="[A-Z $%*+\\-./:]+";let r="(?:[u3000-u303F]|[u3040-u309F]|[u30A0-u30FF]|[uFF00-uFFEF]|[u4E00-u9FAF]|[u2605-u2606]|[u2190-u2195]|u203B|[u2010u2015u2018u2019u2025u2026u201Cu201Du2225u2260]|[u0391-u0451]|[u00A7u00A8u00B1u00B4u00D7u00F7])+";r=r.replace(/u/g,"\\u");const n="(?:(?![A-Z0-9 $%*+\\-./:]|"+r+`)(?:.|[\r
]))+`;nl.KANJI=new RegExp(r,"g"),nl.BYTE_KANJI=new RegExp("[^A-Z0-9 $%*+\\-./:]+","g"),nl.BYTE=new RegExp(n,"g"),nl.NUMERIC=new RegExp(e,"g"),nl.ALPHANUMERIC=new RegExp(t,"g");const i=new RegExp("^"+r+"$"),a=new RegExp("^"+e+"$"),o=new RegExp("^[A-Z0-9 $%*+\\-./:]+$");return nl.testKanji=function(d){return i.test(d)},nl.testNumeric=function(d){return a.test(d)},nl.testAlphanumeric=function(d){return o.test(d)},nl}var lj;function lf(){return lj||(lj=1,(function(e){const t=pP(),r=gP();e.NUMERIC={id:"Numeric",bit:1,ccBits:[10,12,14]},e.ALPHANUMERIC={id:"Alphanumeric",bit:2,ccBits:[9,11,13]},e.BYTE={id:"Byte",bit:4,ccBits:[8,16,16]},e.KANJI={id:"Kanji",bit:8,ccBits:[8,10,12]},e.MIXED={bit:-1},e.getCharCountIndicator=function(a,o){if(!a.ccBits)throw new Error("Invalid mode: "+a);if(!t.isValid(o))throw new Error("Invalid version: "+o);return o>=1&&o<10?a.ccBits[0]:o<27?a.ccBits[1]:a.ccBits[2]},e.getBestModeForData=function(a){return r.testNumeric(a)?e.NUMERIC:r.testAlphanumeric(a)?e.ALPHANUMERIC:r.testKanji(a)?e.KANJI:e.BYTE},e.toString=function(a){if(a&&a.id)return a.id;throw new Error("Invalid mode")},e.isValid=function(a){return a&&a.bit&&a.ccBits};function n(i){if(typeof i!="string")throw new Error("Param is not a string");switch(i.toLowerCase()){case"numeric":return e.NUMERIC;case"alphanumeric":return e.ALPHANUMERIC;case"kanji":return e.KANJI;case"byte":return e.BYTE;default:throw new Error("Unknown mode: "+i)}}e.from=function(a,o){if(e.isValid(a))return a;try{return n(a)}catch{return o}}})(Bx)),Bx}var cj;function MV(){return cj||(cj=1,(function(e){const t=of(),r=mP(),n=mb(),i=lf(),a=pP(),o=7973,l=t.getBCHDigit(o);function d(v,m,j){for(let w=1;w<=40;w++)if(m<=e.getCapacity(w,j,v))return w}function f(v,m){return i.getCharCountIndicator(v,m)+4}function h(v,m){let j=0;return v.forEach(function(w){const _=f(w.mode,m);j+=_+w.getBitsLength()}),j}function p(v,m){for(let j=1;j<=40;j++)if(h(v,j)<=e.getCapacity(j,m,i.MIXED))return j}e.from=function(m,j){return a.isValid(m)?parseInt(m,10):j},e.getCapacity=function(m,j,w){if(!a.isValid(m))throw new Error("Invalid QR Code version");typeof w>"u"&&(w=i.BYTE);const _=t.getSymbolTotalCodewords(m),S=r.getTotalCodewordsCount(m,j),E=(_-S)*8;if(w===i.MIXED)return E;const k=E-f(w,m);switch(w){case i.NUMERIC:return Math.floor(k/10*3);case i.ALPHANUMERIC:return Math.floor(k/11*2);case i.KANJI:return Math.floor(k/13);case i.BYTE:default:return Math.floor(k/8)}},e.getBestVersionForData=function(m,j){let w;const _=n.from(j,n.M);if(Array.isArray(m)){if(m.length>1)return p(m,_);if(m.length===0)return 1;w=m[0]}else w=m;return d(w.mode,w.getLength(),_)},e.getEncodedBits=function(m){if(!a.isValid(m)||m<7)throw new Error("Invalid QR Code version");let j=m<<12;for(;t.getBCHDigit(j)-l>=0;)j^=o<<t.getBCHDigit(j)-l;return m<<12|j}})(Fx)),Fx}var $x={},uj;function FV(){if(uj)return $x;uj=1;const e=of(),t=1335,r=21522,n=e.getBCHDigit(t);return $x.getEncodedBits=function(a,o){const l=a.bit<<3|o;let d=l<<10;for(;e.getBCHDigit(d)-n>=0;)d^=t<<e.getBCHDigit(d)-n;return(l<<10|d)^r},$x}var zx={},qx,dj;function BV(){if(dj)return qx;dj=1;const e=lf();function t(r){this.mode=e.NUMERIC,this.data=r.toString()}return t.getBitsLength=function(n){return 10*Math.floor(n/3)+(n%3?n%3*3+1:0)},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(n){let i,a,o;for(i=0;i+3<=this.data.length;i+=3)a=this.data.substr(i,3),o=parseInt(a,10),n.put(o,10);const l=this.data.length-i;l>0&&(a=this.data.substr(i),o=parseInt(a,10),n.put(o,l*3+1))},qx=t,qx}var Vx,fj;function UV(){if(fj)return Vx;fj=1;const e=lf(),t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"," ","$","%","*","+","-",".","/",":"];function r(n){this.mode=e.ALPHANUMERIC,this.data=n}return r.getBitsLength=function(i){return 11*Math.floor(i/2)+6*(i%2)},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(i){let a;for(a=0;a+2<=this.data.length;a+=2){let o=t.indexOf(this.data[a])*45;o+=t.indexOf(this.data[a+1]),i.put(o,11)}this.data.length%2&&i.put(t.indexOf(this.data[a]),6)},Vx=r,Vx}var Wx,hj;function $V(){if(hj)return Wx;hj=1;const e=lf();function t(r){this.mode=e.BYTE,typeof r=="string"?this.data=new TextEncoder().encode(r):this.data=new Uint8Array(r)}return t.getBitsLength=function(n){return n*8},t.prototype.getLength=function(){return this.data.length},t.prototype.getBitsLength=function(){return t.getBitsLength(this.data.length)},t.prototype.write=function(r){for(let n=0,i=this.data.length;n<i;n++)r.put(this.data[n],8)},Wx=t,Wx}var Hx,mj;function zV(){if(mj)return Hx;mj=1;const e=lf(),t=of();function r(n){this.mode=e.KANJI,this.data=n}return r.getBitsLength=function(i){return i*13},r.prototype.getLength=function(){return this.data.length},r.prototype.getBitsLength=function(){return r.getBitsLength(this.data.length)},r.prototype.write=function(n){let i;for(i=0;i<this.data.length;i++){let a=t.toSJIS(this.data[i]);if(a>=33088&&a<=40956)a-=33088;else if(a>=57408&&a<=60351)a-=49472;else throw new Error("Invalid SJIS character: "+this.data[i]+`
Make sure your charset is UTF-8`);a=(a>>>8&255)*192+(a&255),n.put(a,13)}},Hx=r,Hx}var Gx={exports:{}},pj;function qV(){return pj||(pj=1,(function(e){var t={single_source_shortest_paths:function(r,n,i){var a={},o={};o[n]=0;var l=t.PriorityQueue.make();l.push(n,0);for(var d,f,h,p,v,m,j,w,_;!l.empty();){d=l.pop(),f=d.value,p=d.cost,v=r[f]||{};for(h in v)v.hasOwnProperty(h)&&(m=v[h],j=p+m,w=o[h],_=typeof o[h]>"u",(_||w>j)&&(o[h]=j,l.push(h,j),a[h]=f))}if(typeof i<"u"&&typeof o[i]>"u"){var S=["Could not find a path from ",n," to ",i,"."].join("");throw new Error(S)}return a},extract_shortest_path_from_predecessor_list:function(r,n){for(var i=[],a=n;a;)i.push(a),r[a],a=r[a];return i.reverse(),i},find_path:function(r,n,i){var a=t.single_source_shortest_paths(r,n,i);return t.extract_shortest_path_from_predecessor_list(a,i)},PriorityQueue:{make:function(r){var n=t.PriorityQueue,i={},a;r=r||{};for(a in n)n.hasOwnProperty(a)&&(i[a]=n[a]);return i.queue=[],i.sorter=r.sorter||n.default_sorter,i},default_sorter:function(r,n){return r.cost-n.cost},push:function(r,n){var i={value:r,cost:n};this.queue.push(i),this.queue.sort(this.sorter)},pop:function(){return this.queue.shift()},empty:function(){return this.queue.length===0}}};e.exports=t})(Gx)),Gx.exports}var gj;function VV(){return gj||(gj=1,(function(e){const t=lf(),r=BV(),n=UV(),i=$V(),a=zV(),o=gP(),l=of(),d=qV();function f(S){return unescape(encodeURIComponent(S)).length}function h(S,E,k){const C=[];let D;for(;(D=S.exec(k))!==null;)C.push({data:D[0],index:D.index,mode:E,length:D[0].length});return C}function p(S){const E=h(o.NUMERIC,t.NUMERIC,S),k=h(o.ALPHANUMERIC,t.ALPHANUMERIC,S);let C,D;return l.isKanjiModeEnabled()?(C=h(o.BYTE,t.BYTE,S),D=h(o.KANJI,t.KANJI,S)):(C=h(o.BYTE_KANJI,t.BYTE,S),D=[]),E.concat(k,C,D).sort(function(F,U){return F.index-U.index}).map(function(F){return{data:F.data,mode:F.mode,length:F.length}})}function v(S,E){switch(E){case t.NUMERIC:return r.getBitsLength(S);case t.ALPHANUMERIC:return n.getBitsLength(S);case t.KANJI:return a.getBitsLength(S);case t.BYTE:return i.getBitsLength(S)}}function m(S){return S.reduce(function(E,k){const C=E.length-1>=0?E[E.length-1]:null;return C&&C.mode===k.mode?(E[E.length-1].data+=k.data,E):(E.push(k),E)},[])}function j(S){const E=[];for(let k=0;k<S.length;k++){const C=S[k];switch(C.mode){case t.NUMERIC:E.push([C,{data:C.data,mode:t.ALPHANUMERIC,length:C.length},{data:C.data,mode:t.BYTE,length:C.length}]);break;case t.ALPHANUMERIC:E.push([C,{data:C.data,mode:t.BYTE,length:C.length}]);break;case t.KANJI:E.push([C,{data:C.data,mode:t.BYTE,length:f(C.data)}]);break;case t.BYTE:E.push([{data:C.data,mode:t.BYTE,length:f(C.data)}])}}return E}function w(S,E){const k={},C={start:{}};let D=["start"];for(let M=0;M<S.length;M++){const F=S[M],U=[];for(let I=0;I<F.length;I++){const K=F[I],B=""+M+I;U.push(B),k[B]={node:K,lastCount:0},C[B]={};for(let O=0;O<D.length;O++){const z=D[O];k[z]&&k[z].node.mode===K.mode?(C[z][B]=v(k[z].lastCount+K.length,K.mode)-v(k[z].lastCount,K.mode),k[z].lastCount+=K.length):(k[z]&&(k[z].lastCount=K.length),C[z][B]=v(K.length,K.mode)+4+t.getCharCountIndicator(K.mode,E))}}D=U}for(let M=0;M<D.length;M++)C[D[M]].end=0;return{map:C,table:k}}function _(S,E){let k;const C=t.getBestModeForData(S);if(k=t.from(E,C),k!==t.BYTE&&k.bit<C.bit)throw new Error('"'+S+'" cannot be encoded with mode '+t.toString(k)+`.
 Suggested mode is: `+t.toString(C));switch(k===t.KANJI&&!l.isKanjiModeEnabled()&&(k=t.BYTE),k){case t.NUMERIC:return new r(S);case t.ALPHANUMERIC:return new n(S);case t.KANJI:return new a(S);case t.BYTE:return new i(S)}}e.fromArray=function(E){return E.reduce(function(k,C){return typeof C=="string"?k.push(_(C,null)):C.data&&k.push(_(C.data,C.mode)),k},[])},e.fromString=function(E,k){const C=p(E,l.isKanjiModeEnabled()),D=j(C),M=w(D,k),F=d.find_path(M.map,"start","end"),U=[];for(let I=1;I<F.length-1;I++)U.push(M.table[F[I]].node);return e.fromArray(m(U))},e.rawSplit=function(E){return e.fromArray(p(E,l.isKanjiModeEnabled()))}})(zx)),zx}var vj;function WV(){if(vj)return Ax;vj=1;const e=of(),t=mb(),r=AV(),n=PV(),i=TV(),a=RV(),o=LV(),l=mP(),d=OV(),f=MV(),h=FV(),p=lf(),v=VV();function m(M,F){const U=M.size,I=a.getPositions(F);for(let K=0;K<I.length;K++){const B=I[K][0],O=I[K][1];for(let z=-1;z<=7;z++)if(!(B+z<=-1||U<=B+z))for(let q=-1;q<=7;q++)O+q<=-1||U<=O+q||(z>=0&&z<=6&&(q===0||q===6)||q>=0&&q<=6&&(z===0||z===6)||z>=2&&z<=4&&q>=2&&q<=4?M.set(B+z,O+q,!0,!0):M.set(B+z,O+q,!1,!0))}}function j(M){const F=M.size;for(let U=8;U<F-8;U++){const I=U%2===0;M.set(U,6,I,!0),M.set(6,U,I,!0)}}function w(M,F){const U=i.getPositions(F);for(let I=0;I<U.length;I++){const K=U[I][0],B=U[I][1];for(let O=-2;O<=2;O++)for(let z=-2;z<=2;z++)O===-2||O===2||z===-2||z===2||O===0&&z===0?M.set(K+O,B+z,!0,!0):M.set(K+O,B+z,!1,!0)}}function _(M,F){const U=M.size,I=f.getEncodedBits(F);let K,B,O;for(let z=0;z<18;z++)K=Math.floor(z/3),B=z%3+U-8-3,O=(I>>z&1)===1,M.set(K,B,O,!0),M.set(B,K,O,!0)}function S(M,F,U){const I=M.size,K=h.getEncodedBits(F,U);let B,O;for(B=0;B<15;B++)O=(K>>B&1)===1,B<6?M.set(B,8,O,!0):B<8?M.set(B+1,8,O,!0):M.set(I-15+B,8,O,!0),B<8?M.set(8,I-B-1,O,!0):B<9?M.set(8,15-B-1+1,O,!0):M.set(8,15-B-1,O,!0);M.set(I-8,8,1,!0)}function E(M,F){const U=M.size;let I=-1,K=U-1,B=7,O=0;for(let z=U-1;z>0;z-=2)for(z===6&&z--;;){for(let q=0;q<2;q++)if(!M.isReserved(K,z-q)){let ue=!1;O<F.length&&(ue=(F[O]>>>B&1)===1),M.set(K,z-q,ue),B--,B===-1&&(O++,B=7)}if(K+=I,K<0||U<=K){K-=I,I=-I;break}}}function k(M,F,U){const I=new r;U.forEach(function(q){I.put(q.mode.bit,4),I.put(q.getLength(),p.getCharCountIndicator(q.mode,M)),q.write(I)});const K=e.getSymbolTotalCodewords(M),B=l.getTotalCodewordsCount(M,F),O=(K-B)*8;for(I.getLengthInBits()+4<=O&&I.put(0,4);I.getLengthInBits()%8!==0;)I.putBit(0);const z=(O-I.getLengthInBits())/8;for(let q=0;q<z;q++)I.put(q%2?17:236,8);return C(I,M,F)}function C(M,F,U){const I=e.getSymbolTotalCodewords(F),K=l.getTotalCodewordsCount(F,U),B=I-K,O=l.getBlocksCount(F,U),z=I%O,q=O-z,ue=Math.floor(I/O),ie=Math.floor(B/O),le=ie+1,G=ue-ie,se=new d(G);let xe=0;const te=new Array(O),R=new Array(O);let V=0;const Q=new Uint8Array(M.buffer);for(let ce=0;ce<O;ce++){const we=ce<q?ie:le;te[ce]=Q.slice(xe,xe+we),R[ce]=se.encode(te[ce]),xe+=we,V=Math.max(V,we)}const re=new Uint8Array(I);let Z=0,X,pe;for(X=0;X<V;X++)for(pe=0;pe<O;pe++)X<te[pe].length&&(re[Z++]=te[pe][X]);for(X=0;X<G;X++)for(pe=0;pe<O;pe++)re[Z++]=R[pe][X];return re}function D(M,F,U,I){let K;if(Array.isArray(M))K=v.fromArray(M);else if(typeof M=="string"){let ue=F;if(!ue){const ie=v.rawSplit(M);ue=f.getBestVersionForData(ie,U)}K=v.fromString(M,ue||40)}else throw new Error("Invalid data");const B=f.getBestVersionForData(K,U);if(!B)throw new Error("The amount of data is too big to be stored in a QR Code");if(!F)F=B;else if(F<B)throw new Error(`
The chosen QR Code version cannot contain this amount of data.
Minimum version required to store current data is: `+B+`.
`);const O=k(F,U,K),z=e.getSymbolSize(F),q=new n(z);return m(q,F),j(q),w(q,F),S(q,U,0),F>=7&&_(q,F),E(q,O),isNaN(I)&&(I=o.getBestMask(q,S.bind(null,q,U))),o.applyMask(I,q),S(q,U,I),{modules:q,version:F,errorCorrectionLevel:U,maskPattern:I,segments:K}}return Ax.create=function(F,U){if(typeof F>"u"||F==="")throw new Error("No input text");let I=t.M,K,B;return typeof U<"u"&&(I=t.from(U.errorCorrectionLevel,t.M),K=f.from(U.version),B=o.from(U.maskPattern),U.toSJISFunc&&e.setToSJISFunction(U.toSJISFunc)),D(F,K,I,B)},Ax}var Kx={},Yx={},yj;function vP(){return yj||(yj=1,(function(e){function t(r){if(typeof r=="number"&&(r=r.toString()),typeof r!="string")throw new Error("Color should be defined as hex string");let n=r.slice().replace("#","").split("");if(n.length<3||n.length===5||n.length>8)throw new Error("Invalid hex color: "+r);(n.length===3||n.length===4)&&(n=Array.prototype.concat.apply([],n.map(function(a){return[a,a]}))),n.length===6&&n.push("F","F");const i=parseInt(n.join(""),16);return{r:i>>24&255,g:i>>16&255,b:i>>8&255,a:i&255,hex:"#"+n.slice(0,6).join("")}}e.getOptions=function(n){n||(n={}),n.color||(n.color={});const i=typeof n.margin>"u"||n.margin===null||n.margin<0?4:n.margin,a=n.width&&n.width>=21?n.width:void 0,o=n.scale||4;return{width:a,scale:a?4:o,margin:i,color:{dark:t(n.color.dark||"#000000ff"),light:t(n.color.light||"#ffffffff")},type:n.type,rendererOpts:n.rendererOpts||{}}},e.getScale=function(n,i){return i.width&&i.width>=n+i.margin*2?i.width/(n+i.margin*2):i.scale},e.getImageWidth=function(n,i){const a=e.getScale(n,i);return Math.floor((n+i.margin*2)*a)},e.qrToImageData=function(n,i,a){const o=i.modules.size,l=i.modules.data,d=e.getScale(o,a),f=Math.floor((o+a.margin*2)*d),h=a.margin*d,p=[a.color.light,a.color.dark];for(let v=0;v<f;v++)for(let m=0;m<f;m++){let j=(v*f+m)*4,w=a.color.light;if(v>=h&&m>=h&&v<f-h&&m<f-h){const _=Math.floor((v-h)/d),S=Math.floor((m-h)/d);w=p[l[_*o+S]?1:0]}n[j++]=w.r,n[j++]=w.g,n[j++]=w.b,n[j]=w.a}}})(Yx)),Yx}var xj;function HV(){return xj||(xj=1,(function(e){const t=vP();function r(i,a,o){i.clearRect(0,0,a.width,a.height),a.style||(a.style={}),a.height=o,a.width=o,a.style.height=o+"px",a.style.width=o+"px"}function n(){try{return document.createElement("canvas")}catch{throw new Error("You need to specify a canvas element")}}e.render=function(a,o,l){let d=l,f=o;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),o||(f=n()),d=t.getOptions(d);const h=t.getImageWidth(a.modules.size,d),p=f.getContext("2d"),v=p.createImageData(h,h);return t.qrToImageData(v.data,a,d),r(p,f,h),p.putImageData(v,0,0),f},e.renderToDataURL=function(a,o,l){let d=l;typeof d>"u"&&(!o||!o.getContext)&&(d=o,o=void 0),d||(d={});const f=e.render(a,o,d),h=d.type||"image/png",p=d.rendererOpts||{};return f.toDataURL(h,p.quality)}})(Kx)),Kx}var Qx={},wj;function GV(){if(wj)return Qx;wj=1;const e=vP();function t(i,a){const o=i.a/255,l=a+'="'+i.hex+'"';return o<1?l+" "+a+'-opacity="'+o.toFixed(2).slice(1)+'"':l}function r(i,a,o){let l=i+a;return typeof o<"u"&&(l+=" "+o),l}function n(i,a,o){let l="",d=0,f=!1,h=0;for(let p=0;p<i.length;p++){const v=Math.floor(p%a),m=Math.floor(p/a);!v&&!f&&(f=!0),i[p]?(h++,p>0&&v>0&&i[p-1]||(l+=f?r("M",v+o,.5+m+o):r("m",d,0),d=0,f=!1),v+1<a&&i[p+1]||(l+=r("h",h),h=0)):d++}return l}return Qx.render=function(a,o,l){const d=e.getOptions(o),f=a.modules.size,h=a.modules.data,p=f+d.margin*2,v=d.color.light.a?"<path "+t(d.color.light,"fill")+' d="M0 0h'+p+"v"+p+'H0z"/>':"",m="<path "+t(d.color.dark,"stroke")+' d="'+n(h,f,d.margin)+'"/>',j='viewBox="0 0 '+p+" "+p+'"',_='<svg xmlns="http://www.w3.org/2000/svg" '+(d.width?'width="'+d.width+'" height="'+d.width+'" ':"")+j+' shape-rendering="crispEdges">'+v+m+`</svg>
`;return typeof l=="function"&&l(null,_),_},Qx}var bj;function KV(){if(bj)return Yf;bj=1;const e=EV(),t=WV(),r=HV(),n=GV();function i(a,o,l,d,f){const h=[].slice.call(arguments,1),p=h.length,v=typeof h[p-1]=="function";if(!v&&!e())throw new Error("Callback required as last argument");if(v){if(p<2)throw new Error("Too few arguments provided");p===2?(f=l,l=o,o=d=void 0):p===3&&(o.getContext&&typeof f>"u"?(f=d,d=void 0):(f=d,d=l,l=o,o=void 0))}else{if(p<1)throw new Error("Too few arguments provided");return p===1?(l=o,o=d=void 0):p===2&&!o.getContext&&(d=l,l=o,o=void 0),new Promise(function(m,j){try{const w=t.create(l,d);m(a(w,o,d))}catch(w){j(w)}})}try{const m=t.create(l,d);f(null,a(m,o,d))}catch(m){f(m)}}return Yf.create=t.create,Yf.toCanvas=i.bind(null,r.render),Yf.toDataURL=i.bind(null,r.renderToDataURL),Yf.toString=i.bind(null,function(a,o,l){return n.render(a,l)}),Yf}var YV=KV();const yP=l0(YV),QV=async(e,t=1)=>{const r=JSON.stringify({recipeId:e.recipeId,recipeName:e.recipeName,batchSize:e.batchSize,calculatedYield:e.calculatedYield,yieldUnit:e.yieldUnit,expiryDate:e.expiryDate,allergens:e.allergens,dietaryRequirements:e.dietaryRequirements}),n=await yP.toDataURL(r,{width:120,margin:1}),i=l=>new Date(l).toLocaleDateString("en-US",{day:"2-digit",month:"2-digit",year:"numeric"}),a=`
    <div style="
      width: 4in;
      height: 3in;
      border: 2px solid #000;
      padding: 12px;
      font-family: Arial, sans-serif;
      font-size: 12px;
      line-height: 1.3;
      box-sizing: border-box;
      page-break-after: always;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    ">
      <!-- Header with Recipe Name and QR Code -->
      <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 8px;">
        <div style="flex: 1; margin-right: 10px;">
          <h2 style="margin: 0; font-size: 16px; font-weight: bold; text-transform: uppercase;">
            ${e.recipeName}
          </h2>
          <div style="font-size: 11px; color: #666; margin-top: 2px;">
            Batch: ${e.batchSize} ${e.batchUnit}
          </div>
        </div>
        <img src="${n}" alt="QR Code" style="width: 60px; height: 60px;" />
      </div>

      <!-- Yield Information -->
      <div style="margin-bottom: 8px;">
        <div style="font-weight: bold; font-size: 14px;">
          YIELD: ${e.calculatedYield} ${e.yieldUnit}
        </div>
      </div>

      <!-- Date Information -->
      <div style="margin-bottom: 8px;">
        <div style="display: flex; justify-content: space-between;">
          <span><strong>Prepared:</strong> ${i(e.preparedDate)}</span>
          <span><strong>Use By:</strong> ${i(e.expiryDate)}</span>
        </div>
      </div>

      <!-- Allergens Section -->
      ${e.allergens.length>0?`
        <div style="margin-bottom: 8px;">
          <div style="font-weight: bold; color: #d32f2f; margin-bottom: 4px;">
             ALLERGENS:
          </div>
          <div style="background: #ffebee; padding: 4px 6px; border-radius: 4px; font-weight: bold; color: #d32f2f;">
            ${e.allergens.join(", ").toUpperCase()}
          </div>
        </div>
      `:""}

      <!-- Dietary Requirements -->
      ${e.dietaryRequirements.length>0?`
        <div style="margin-bottom: 8px;">
          <div style="font-weight: bold; color: #2e7d32; margin-bottom: 4px;">
             DIETARY:
          </div>
          <div style="background: #e8f5e8; padding: 4px 6px; border-radius: 4px; color: #2e7d32;">
            ${e.dietaryRequirements.join(", ")}
          </div>
        </div>
      `:""}

      <!-- Footer -->
      <div style="font-size: 10px; color: #666; text-align: center; border-top: 1px solid #ddd; padding-top: 4px;">
        Prepared by: ${e.staffName}
      </div>
    </div>
  `;return`
    <!DOCTYPE html>
    <html>
    <head>
      <title>Food Safety Labels</title>
      <style>
        @page {
          margin: 0.5in;
          size: letter;
        }
        body {
          margin: 0;
          padding: 0;
          font-family: Arial, sans-serif;
        }
        @media print {
          .no-print {
            display: none;
          }
        }
      </style>
    </head>
    <body>
      ${Array(t).fill(a).join(`
`)}
    </body>
    </html>
  `};function JV({open:e,onOpenChange:t,recipe:r}){const[n,i]=x.useState("details"),[a,o]=x.useState(1),[l,d]=x.useState("batch"),[f,h]=x.useState(""),[p,v]=x.useState([]),[m,j]=x.useState(""),[w,_]=x.useState(!1),[S,E]=x.useState(""),[k,C]=x.useState(null),[D,M]=x.useState(1),{user:F}=Aa(),{toast:U}=qr(),{addTimer:I,pauseTimer:K,resumeTimer:B,removeTimer:O,getTimerById:z}=H2();x.useEffect(()=>{e&&(i("details"),o(1),d("batch"),h(""),j(""),E(""),C(null),M(1),q())},[e]);const q=x.useCallback(async()=>{try{const{data:V}=await Oe.from("profiles").select("organization_id").eq("user_id",F?.id).single(),{data:Q,error:re}=await Oe.from("staff").select("id, name, role").eq("is_active",!0).eq("organization_id",V?.organization_id);if(re)throw re;v(Q||[])}catch(V){console.error("Error fetching staff:",V)}},[F?.id]),ue=m?z(m):null,ie=ue?.isRunning||!1,le=ue?.elapsedTime||0,G=async()=>{if(!(!f||!r))try{const{data:V}=await Oe.from("profiles").select("organization_id").eq("user_id",F?.id).single(),Q=p.find(pe=>pe.id===f);if(!Q)return;const{data:re,error:Z}=await Oe.from("prep_sessions").insert({recipe_id:r.id,staff_id:f,batch_size:a,organization_id:V?.organization_id,started_at:new Date().toISOString()}).select().single();if(Z)throw Z;const X=I({recipeId:r.id,recipeName:r.name,staffId:f,staffName:Q.name,startTime:Date.now(),isRunning:!0,batchSize:a,batchUnit:l,sessionId:re.id});E(re.id),j(X),i("timer"),U({title:"Preparation Started",description:`${r.name} preparation timer started`})}catch(V){console.error("Error starting prep:",V),U({title:"Error",description:"Failed to start preparation",variant:"destructive"})}},se=async()=>{if(!(!r||!S||!m))try{const V=new Date,Q=new Date(V);Q.setDate(Q.getDate()+(r.hold_time_days||3));const{data:re}=await Oe.from("profiles").select("organization_id").eq("user_id",F?.id).single();await Oe.from("prep_sessions").update({completed_at:new Date().toISOString(),actual_prep_minutes:Math.round(le/6e4)}).eq("id",S);const{data:Z,error:X}=await Oe.from("prepared_items").insert({recipe_id:r.id,batch_size:a,expires_at:Q.toISOString(),prep_session_id:S,staff_id:f,prepared_by:F?.id||"",organization_id:re?.organization_id,label_count:D,prepared_at:V.toISOString()}).select().single();if(X)throw X;C(Z),O(m),j(""),i("label"),U({title:"Preparation Completed",description:"Recipe preparation finished successfully"})}catch(V){console.error("Error completing prep:",V),U({title:"Error",description:"Failed to complete preparation",variant:"destructive"})}},xe=async()=>{if(!r||!k)return;const V=new Date(k.expires_at),Q=new Date(k.prepared_at),re=p.find(pe=>pe.id===f),Z=r.yield_amount*a,X={recipeName:r.name,batchSize:a,batchUnit:l,calculatedYield:Z,yieldUnit:r.yield_unit,expiryDate:V.toISOString(),preparedDate:Q.toISOString(),allergens:r.allergens||[],dietaryRequirements:r.dietary_requirements||[],staffName:re?.name||"Unknown",recipeId:r.id};try{const pe=await QV(X,D),ce=window.open("","_blank");ce&&(ce.document.write(pe),ce.document.close(),ce.focus(),ce.print()),U({title:"Labels Generated",description:`${D} label(s) ready for printing with QR codes`})}catch(pe){console.error("Error generating labels:",pe),U({title:"Error",description:"Failed to generate labels",variant:"destructive"})}},te=()=>{m&&ie?_(!0):t(!1)},R=V=>{const Q=Math.floor(V/1e3),re=Math.floor(Q/3600),Z=Math.floor(Q%3600/60),X=Q%60;return`${re.toString().padStart(2,"0")}:${Z.toString().padStart(2,"0")}:${X.toString().padStart(2,"0")}`};return r?s.jsxs(s.Fragment,{children:[s.jsx(Ca,{open:e,onOpenChange:te,children:s.jsxs(Qi,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Ji,{children:s.jsxs(Zi,{className:"flex items-center gap-2",children:[n==="details"&&s.jsxs(s.Fragment,{children:[s.jsx(ki,{className:"w-5 h-5"}),"Prepare Recipe: ",r.name]}),n==="timer"&&s.jsxs(s.Fragment,{children:[s.jsx(F1,{className:"w-5 h-5"}),"Preparation Timer"]}),n==="label"&&s.jsxs(s.Fragment,{children:[s.jsx(cl,{className:"w-5 h-5 text-green-600"}),"Generate Labels"]})]})}),n==="details"&&s.jsxs("div",{className:"space-y-6",children:[s.jsxs(it,{children:[s.jsx(sr,{children:s.jsx(pr,{className:"text-lg",children:r.name})}),s.jsxs(ot,{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Est. Prep: ",r.estimated_prep_minutes," min"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(F1,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Hold Time: ",r.hold_time_days," days"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ki,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Yield: ",r.yield_amount," ",r.yield_unit]})]})]}),r.allergens&&r.allergens.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2 text-amber-600",children:"Allergens:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:r.allergens.map(V=>s.jsx(pt,{variant:"destructive",className:"text-xs",children:V},V))})]}),r.dietary_requirements&&r.dietary_requirements.length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium mb-2 text-green-600",children:"Dietary Requirements:"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:r.dietary_requirements.map(V=>s.jsx(pt,{variant:"secondary",className:"text-xs",children:V},V))})]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsxs("div",{children:[s.jsx(At,{htmlFor:"staff",children:"Staff Member *"}),s.jsxs(Ir,{value:f,onValueChange:h,children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select staff member"})}),s.jsx(Fr,{className:"bg-background opacity-100",children:p.map(V=>s.jsx(et,{value:V.id,className:"bg-background opacity-100",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"w-4 h-4"}),s.jsx("span",{children:V.name}),s.jsx(pt,{variant:"outline",className:"text-xs",children:V.role})]})},V.id))})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{children:[s.jsx(At,{htmlFor:"batchSize",children:"Batch Size"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(er,{id:"batchSize",type:"number",min:"0.1",step:"0.1",value:a,onChange:V=>o(parseFloat(V.target.value)||1),placeholder:"1"}),s.jsxs(Ir,{value:l,onValueChange:d,children:[s.jsx(Lr,{className:"w-32",children:s.jsx(Or,{})}),s.jsxs(Fr,{className:"bg-background opacity-100",children:[s.jsx(et,{value:"batch",className:"bg-background opacity-100",children:"batch"}),s.jsx(et,{value:"half",className:"bg-background opacity-100",children:"half"}),s.jsx(et,{value:"double",className:"bg-background opacity-100",children:"double"})]})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground mt-1",children:["Calculated yield: ",(r.yield_amount*a).toFixed(1)," ",r.yield_unit]})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"labelCount",children:"Number of Labels"}),s.jsx(er,{id:"labelCount",type:"number",min:"1",max:"20",value:D,onChange:V=>M(parseInt(V.target.value)||1),placeholder:"1"})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(ke,{variant:"outline",onClick:te,children:"Cancel"}),s.jsxs(ke,{onClick:G,disabled:!f,children:[s.jsx(M1,{className:"w-4 h-4 mr-2"}),"Start Preparation"]})]})]}),n==="timer"&&s.jsxs("div",{className:"space-y-6 text-center",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("div",{className:"text-6xl font-mono font-bold text-primary",children:R(le)}),s.jsxs("div",{className:"text-lg text-muted-foreground",children:["Preparing ",r.name]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Batch: ",a," ",l,"  Yield: ",(r.yield_amount*a).toFixed(1)," ",r.yield_unit]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{variant:ie?"outline":"default",onClick:()=>{m&&(ie?K(m):B(m))},className:"flex-1",children:ie?s.jsxs(s.Fragment,{children:[s.jsx(SL,{className:"w-4 h-4 mr-2"}),"Pause"]}):s.jsxs(s.Fragment,{children:[s.jsx(M1,{className:"w-4 h-4 mr-2"}),le>0?"Resume":"Start"]})}),s.jsxs(ke,{onClick:se,variant:"default",className:"flex-1",children:[s.jsx(cl,{className:"w-4 h-4 mr-2"}),"Complete"]})]})]}),n==="label"&&k&&s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"text-center",children:s.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-green-50 text-green-700 rounded-lg mb-4",children:[s.jsx(cl,{className:"w-5 h-5"}),s.jsx("span",{className:"font-medium",children:"Preparation Complete!"})]})}),s.jsxs(it,{children:[s.jsx(sr,{children:s.jsx(pr,{className:"text-lg",children:r.name})}),s.jsx(ot,{className:"space-y-3",children:s.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Staff:"})," ",p.find(V=>V.id===f)?.name]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Batch Size:"})," ",a," ",l]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Calculated Yield:"})," ",(r.yield_amount*a).toFixed(1)," ",r.yield_unit]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prep Time:"})," ",R(le)]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium",children:"Prepared:"})," ",new Date(k.prepared_at).toLocaleDateString()]}),s.jsxs("div",{children:[s.jsx("span",{className:"font-medium text-red-600",children:"Expires:"})," ",new Date(k.expires_at).toLocaleDateString()]})]})})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"labelCount",children:"Number of Labels to Print"}),s.jsx(er,{id:"labelCount",type:"number",min:"1",max:"20",value:D,onChange:V=>M(parseInt(V.target.value)||1),placeholder:"1"}),s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Each label will include QR code, allergens, dietary info, and calculated yield"})]}),s.jsxs("div",{className:"flex justify-end gap-3",children:[s.jsx(ke,{variant:"outline",onClick:te,children:"Close"}),s.jsxs(ke,{onClick:xe,children:[s.jsx(ki,{className:"w-4 h-4 mr-2"}),"Print ",D," Label",D>1?"s":""]})]})]})]})}),s.jsx(wc,{open:w,onOpenChange:_,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Timer is Running"}),s.jsx(bc,{children:"The preparation timer is currently running. The timer will continue in the background when you close this dialog. You can return to monitor the timer later."})]}),s.jsxs(ml,{children:[s.jsx(vl,{onClick:()=>_(!1),children:"Cancel"}),s.jsx(gl,{onClick:()=>{_(!1),t(!1)},children:"Continue"})]})]})})]}):null}const ZV=["All Categories","Entrees","Mains","Desserts","Sides","Sauces","Beverages","Bakery","Other"];function XV(){const[e,t]=x.useState([]),[r,n]=x.useState(""),[i,a]=x.useState("All Categories"),[o,l]=x.useState(!1),[d,f]=x.useState(!1),[h,p]=x.useState(null),[v,m]=x.useState(null),[j,w]=x.useState(null),[_,S]=x.useState(!0),{user:E}=Aa(),{hasRole:k,roles:C,loading:D}=Wu(),{toast:M}=qr(),F=k("admin")||k("leader_chef");x.useEffect(()=>{console.log(" Recipe Permissions Debug:",{userId:E?.id,roles:C,rolesLoading:D,hasAdminRole:k("admin"),hasLeaderChefRole:k("leader_chef"),canManageRecipes:F})},[E,C,D,F]),x.useEffect(()=>{U()},[]);const U=async()=>{try{const{data:z,error:q}=await Oe.from("recipes").select("*").order("created_at",{ascending:!1});if(q)throw q;const ue=new Set;z?.forEach(se=>{se.created_by&&ue.add(se.created_by),se.updated_by&&ue.add(se.updated_by)});const{data:ie}=await Oe.from("profiles").select("user_id, display_name").in("user_id",Array.from(ue)),le=new Map(ie?.map(se=>[se.user_id,se.display_name])||[]),G=z?.map(se=>({...se,creator:se.created_by?{display_name:le.get(se.created_by)||"Unknown"}:null,updater:se.updated_by?{display_name:le.get(se.updated_by)||"Unknown"}:null}));t(G||[])}catch(z){console.error("Error fetching recipes:",z),M({title:"Error",description:"Failed to fetch recipes",variant:"destructive"})}finally{S(!1)}},I=async()=>{if(v)try{const{error:z}=await Oe.from("recipes").delete().eq("id",v.id);if(z)throw z;M({title:"Success",description:"Recipe deleted successfully"}),U()}catch(z){console.error("Error deleting recipe:",z),M({title:"Error",description:"Failed to delete recipe",variant:"destructive"})}finally{m(null)}},K=z=>{w(z),l(!0)},B=z=>{p(z),f(!0)},O=e.filter(z=>{const q=z.name.toLowerCase().includes(r.toLowerCase())||(z.allergens||[]).some(ie=>ie.toLowerCase().includes(r.toLowerCase()))||(z.dietary_requirements||[]).some(ie=>ie.toLowerCase().includes(r.toLowerCase())),ue=i==="All Categories"||z.category===i;return q&&ue});return _?s.jsxs("div",{className:"space-y-6",children:[s.jsx("div",{className:"flex justify-between items-center",children:s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recipes"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your recipe collection"})]})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(z=>s.jsxs(it,{className:"animate-pulse",children:[s.jsx(sr,{children:s.jsx("div",{className:"h-6 bg-muted rounded w-3/4"})}),s.jsx(ot,{children:s.jsxs("div",{className:"space-y-2",children:[s.jsx("div",{className:"h-4 bg-muted rounded"}),s.jsx("div",{className:"h-4 bg-muted rounded w-2/3"})]})})]},z))})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsx(it,{className:"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-200",children:s.jsx(ot,{className:"pt-4",children:s.jsxs("p",{className:"text-sm font-mono",children:[s.jsx("strong",{children:"Debug Info:"})," User ID: ",E?.id?.slice(0,8),"... | Roles: [",C.join(", ")||"none","] | Can Manage: ",F?" YES":" NO"," | Loading: ",D?"Yes":"No"]})})}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Recipes"}),s.jsx("p",{className:"text-muted-foreground",children:F?"Manage your recipe collection":"Browse available recipes"})]}),F&&s.jsxs(ke,{onClick:()=>{w(null),l(!0)},children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Create Recipe"]})]}),s.jsxs("div",{className:"flex items-center space-x-4",children:[s.jsxs("div",{className:"relative flex-1 max-w-sm",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(er,{placeholder:"Search recipes, allergens, or dietary...",value:r,onChange:z=>n(z.target.value),className:"pl-10"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(jc,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs(Ir,{value:i,onValueChange:a,children:[s.jsx(Lr,{className:"w-48",children:s.jsx(Or,{})}),s.jsx(Fr,{className:"bg-background opacity-100",children:ZV.map(z=>s.jsx(et,{value:z,className:"bg-background opacity-100",children:z},z))})]})]})]}),O.length===0?s.jsx(it,{children:s.jsx(ot,{className:"flex flex-col items-center justify-center py-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"w-16 h-16 bg-muted rounded-full flex items-center justify-center mx-auto",children:s.jsx(Xn,{className:"w-8 h-8 text-muted-foreground"})}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"No recipes found"}),s.jsx("p",{className:"text-muted-foreground",children:r?"Try adjusting your search terms":F?"Get started by creating your first recipe":"No recipes available yet"})]}),!r&&F&&s.jsxs(ke,{onClick:()=>{w(null),l(!0)},children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Create Recipe"]})]})})}):s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map(z=>s.jsxs(it,{className:"hover:shadow-card transition-shadow cursor-pointer",children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-start justify-between",children:[s.jsx("span",{className:"line-clamp-2",children:z.name}),(z.allergens||[]).length>0&&s.jsx(es,{className:"w-5 h-5 text-amber-500 flex-shrink-0 ml-2"})]})}),s.jsxs(ot,{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx(pt,{variant:"outline",className:"text-xs",children:z.category}),s.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground",children:[s.jsx(Xn,{className:"w-3 h-3"}),s.jsxs("span",{children:[(z.estimated_prep_minutes||0)+(z.service_gap_minutes||0),"min"]})]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Ao,{className:"w-4 h-4"}),s.jsxs("span",{children:[z.yield_amount," ",z.yield_unit]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"w-4 h-4"}),s.jsxs("span",{children:[z.prep_steps?.length||0," steps"]})]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"w-4 h-4"}),s.jsxs("span",{children:[z.hold_time_days,"d hold"]})]})]}),s.jsxs("div",{children:[s.jsxs("h4",{className:"font-medium text-sm mb-2",children:["Ingredients (",z.ingredients?.length||0,")"]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[z.ingredients?.slice(0,3)?.join(", "),z.ingredients?.length>3&&s.jsxs("span",{children:[" + ",z.ingredients.length-3," more"]})]})]}),(z.allergens||[]).length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-2 text-red-600",children:"Allergens"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(z.allergens||[]).map(q=>s.jsx(pt,{variant:"destructive",className:"text-xs font-bold",children:q},q))})]}),(z.dietary_requirements||[]).length>0&&s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium text-sm mb-2 text-green-600",children:"Dietary"}),s.jsx("div",{className:"flex flex-wrap gap-1",children:(z.dietary_requirements||[]).map(q=>s.jsx(pt,{variant:"secondary",className:"text-xs",children:q},q))})]}),s.jsxs("div",{className:"pt-2 border-t space-y-2 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ya,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Created at:"}),s.jsx("span",{children:on(new Date(z.created_at),"MMM dd, yyyy 'at' HH:mm")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ru,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Created by:"}),s.jsx("span",{children:z.creator?.display_name||"Unknown"})]}),z.updated_by&&z.updated_at!==z.created_at&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ya,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Last Updated:"}),s.jsx("span",{children:on(new Date(z.updated_at),"MMM dd, yyyy 'at' HH:mm")})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ru,{className:"w-3 h-3"}),s.jsx("span",{className:"font-medium",children:"Last Updated by:"}),s.jsx("span",{children:z.updater?.display_name||"Unknown"})]})]})]}),s.jsxs("div",{className:"pt-2 space-y-2",children:[s.jsxs(ke,{size:"sm",onClick:()=>B(z),className:"w-full",children:[s.jsx(f0,{className:"w-4 h-4 mr-2"}),"Prepare Recipe"]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ke,{size:"sm",variant:"outline",className:"flex-1",onClick:()=>{M({title:"Coming Soon",description:"Recipe comments feature will be available soon"})},children:[s.jsx(dv,{className:"w-4 h-4 mr-2"}),"Notes"]}),F&&s.jsxs(s.Fragment,{children:[s.jsx(ke,{size:"sm",variant:"outline",onClick:q=>{q.stopPropagation(),K(z)},children:s.jsx(m0,{className:"w-4 h-4"})}),s.jsx(ke,{size:"sm",variant:"destructive",onClick:q=>{q.stopPropagation(),m(z)},children:s.jsx(Uu,{className:"w-4 h-4"})})]})]})]})]})]},z.id))}),s.jsx(mV,{open:o,onOpenChange:z=>{l(z),z||w(null)},onSuccess:()=>{U(),w(null)},recipeToEdit:j}),s.jsx(JV,{open:d,onOpenChange:f,recipe:h}),s.jsx(wc,{open:!!v,onOpenChange:()=>m(null),children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Are you sure?"}),s.jsxs(bc,{children:['This will permanently delete the recipe "',v?.name,'". This action cannot be undone.']})]}),s.jsxs(ml,{children:[s.jsx(vl,{children:"Cancel"}),s.jsx(gl,{onClick:I,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Recipe"})]})]})})]})}var _j=1,eW=.9,tW=.8,rW=.17,Jx=.1,Zx=.999,nW=.9999,sW=.99,iW=/[\\\/_+.#"@\[\(\{&]/,aW=/[\\\/_+.#"@\[\(\{&]/g,oW=/[\s-]/,xP=/[\s-]/g;function jw(e,t,r,n,i,a,o){if(a===t.length)return i===e.length?_j:sW;var l=`${i},${a}`;if(o[l]!==void 0)return o[l];for(var d=n.charAt(a),f=r.indexOf(d,i),h=0,p,v,m,j;f>=0;)p=jw(e,t,r,n,f+1,a+1,o),p>h&&(f===i?p*=_j:iW.test(e.charAt(f-1))?(p*=tW,m=e.slice(i,f-1).match(aW),m&&i>0&&(p*=Math.pow(Zx,m.length))):oW.test(e.charAt(f-1))?(p*=eW,j=e.slice(i,f-1).match(xP),j&&i>0&&(p*=Math.pow(Zx,j.length))):(p*=rW,i>0&&(p*=Math.pow(Zx,f-i))),e.charAt(f)!==t.charAt(a)&&(p*=nW)),(p<Jx&&r.charAt(f-1)===n.charAt(a+1)||n.charAt(a+1)===n.charAt(a)&&r.charAt(f-1)!==n.charAt(a))&&(v=jw(e,t,r,n,f+1,a+2,o),v*Jx>p&&(p=v*Jx)),p>h&&(h=p),f=r.indexOf(d,f+1);return o[l]=h,h}function Nj(e){return e.toLowerCase().replace(xP," ")}function lW(e,t,r){return e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,jw(e,t,Nj(e),Nj(t),0,0,{})}var Mm='[cmdk-group=""]',Xx='[cmdk-group-items=""]',cW='[cmdk-group-heading=""]',wP='[cmdk-item=""]',jj=`${wP}:not([aria-disabled="true"])`,Sw="cmdk-item-select",rh="data-value",uW=(e,t,r)=>lW(e,t,r),bP=x.createContext(void 0),Mp=()=>x.useContext(bP),_P=x.createContext(void 0),pb=()=>x.useContext(_P),NP=x.createContext(void 0),jP=x.forwardRef((e,t)=>{let r=nh(()=>{var R,V;return{search:"",value:(V=(R=e.value)!=null?R:e.defaultValue)!=null?V:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),n=nh(()=>new Set),i=nh(()=>new Map),a=nh(()=>new Map),o=nh(()=>new Set),l=SP(e),{label:d,children:f,value:h,onValueChange:p,filter:v,shouldFilter:m,loop:j,disablePointerSelection:w=!1,vimBindings:_=!0,...S}=e,E=Ms(),k=Ms(),C=Ms(),D=x.useRef(null),M=bW();Gd(()=>{if(h!==void 0){let R=h.trim();r.current.value=R,F.emit()}},[h]),Gd(()=>{M(6,z)},[]);let F=x.useMemo(()=>({subscribe:R=>(o.current.add(R),()=>o.current.delete(R)),snapshot:()=>r.current,setState:(R,V,Q)=>{var re,Z,X,pe;if(!Object.is(r.current[R],V)){if(r.current[R]=V,R==="search")O(),K(),M(1,B);else if(R==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ce=document.getElementById(C);ce?ce.focus():(re=document.getElementById(E))==null||re.focus()}if(M(7,()=>{var ce;r.current.selectedItemId=(ce=q())==null?void 0:ce.id,F.emit()}),Q||M(5,z),((Z=l.current)==null?void 0:Z.value)!==void 0){let ce=V??"";(pe=(X=l.current).onValueChange)==null||pe.call(X,ce);return}}F.emit()}},emit:()=>{o.current.forEach(R=>R())}}),[]),U=x.useMemo(()=>({value:(R,V,Q)=>{var re;V!==((re=a.current.get(R))==null?void 0:re.value)&&(a.current.set(R,{value:V,keywords:Q}),r.current.filtered.items.set(R,I(V,Q)),M(2,()=>{K(),F.emit()}))},item:(R,V)=>(n.current.add(R),V&&(i.current.has(V)?i.current.get(V).add(R):i.current.set(V,new Set([R]))),M(3,()=>{O(),K(),r.current.value||B(),F.emit()}),()=>{a.current.delete(R),n.current.delete(R),r.current.filtered.items.delete(R);let Q=q();M(4,()=>{O(),Q?.getAttribute("id")===R&&B(),F.emit()})}),group:R=>(i.current.has(R)||i.current.set(R,new Set),()=>{a.current.delete(R),i.current.delete(R)}),filter:()=>l.current.shouldFilter,label:d||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:E,inputId:C,labelId:k,listInnerRef:D}),[]);function I(R,V){var Q,re;let Z=(re=(Q=l.current)==null?void 0:Q.filter)!=null?re:uW;return R?Z(R,r.current.search,V):0}function K(){if(!r.current.search||l.current.shouldFilter===!1)return;let R=r.current.filtered.items,V=[];r.current.filtered.groups.forEach(re=>{let Z=i.current.get(re),X=0;Z.forEach(pe=>{let ce=R.get(pe);X=Math.max(ce,X)}),V.push([re,X])});let Q=D.current;ue().sort((re,Z)=>{var X,pe;let ce=re.getAttribute("id"),we=Z.getAttribute("id");return((X=R.get(we))!=null?X:0)-((pe=R.get(ce))!=null?pe:0)}).forEach(re=>{let Z=re.closest(Xx);Z?Z.appendChild(re.parentElement===Z?re:re.closest(`${Xx} > *`)):Q.appendChild(re.parentElement===Q?re:re.closest(`${Xx} > *`))}),V.sort((re,Z)=>Z[1]-re[1]).forEach(re=>{var Z;let X=(Z=D.current)==null?void 0:Z.querySelector(`${Mm}[${rh}="${encodeURIComponent(re[0])}"]`);X?.parentElement.appendChild(X)})}function B(){let R=ue().find(Q=>Q.getAttribute("aria-disabled")!=="true"),V=R?.getAttribute(rh);F.setState("value",V||void 0)}function O(){var R,V,Q,re;if(!r.current.search||l.current.shouldFilter===!1){r.current.filtered.count=n.current.size;return}r.current.filtered.groups=new Set;let Z=0;for(let X of n.current){let pe=(V=(R=a.current.get(X))==null?void 0:R.value)!=null?V:"",ce=(re=(Q=a.current.get(X))==null?void 0:Q.keywords)!=null?re:[],we=I(pe,ce);r.current.filtered.items.set(X,we),we>0&&Z++}for(let[X,pe]of i.current)for(let ce of pe)if(r.current.filtered.items.get(ce)>0){r.current.filtered.groups.add(X);break}r.current.filtered.count=Z}function z(){var R,V,Q;let re=q();re&&(((R=re.parentElement)==null?void 0:R.firstChild)===re&&((Q=(V=re.closest(Mm))==null?void 0:V.querySelector(cW))==null||Q.scrollIntoView({block:"nearest"})),re.scrollIntoView({block:"nearest"}))}function q(){var R;return(R=D.current)==null?void 0:R.querySelector(`${wP}[aria-selected="true"]`)}function ue(){var R;return Array.from(((R=D.current)==null?void 0:R.querySelectorAll(jj))||[])}function ie(R){let V=ue()[R];V&&F.setState("value",V.getAttribute(rh))}function le(R){var V;let Q=q(),re=ue(),Z=re.findIndex(pe=>pe===Q),X=re[Z+R];(V=l.current)!=null&&V.loop&&(X=Z+R<0?re[re.length-1]:Z+R===re.length?re[0]:re[Z+R]),X&&F.setState("value",X.getAttribute(rh))}function G(R){let V=q(),Q=V?.closest(Mm),re;for(;Q&&!re;)Q=R>0?xW(Q,Mm):wW(Q,Mm),re=Q?.querySelector(jj);re?F.setState("value",re.getAttribute(rh)):le(R)}let se=()=>ie(ue().length-1),xe=R=>{R.preventDefault(),R.metaKey?se():R.altKey?G(1):le(1)},te=R=>{R.preventDefault(),R.metaKey?ie(0):R.altKey?G(-1):le(-1)};return x.createElement(yt.div,{ref:t,tabIndex:-1,...S,"cmdk-root":"",onKeyDown:R=>{var V;(V=S.onKeyDown)==null||V.call(S,R);let Q=R.nativeEvent.isComposing||R.keyCode===229;if(!(R.defaultPrevented||Q))switch(R.key){case"n":case"j":{_&&R.ctrlKey&&xe(R);break}case"ArrowDown":{xe(R);break}case"p":case"k":{_&&R.ctrlKey&&te(R);break}case"ArrowUp":{te(R);break}case"Home":{R.preventDefault(),ie(0);break}case"End":{R.preventDefault(),se();break}case"Enter":{R.preventDefault();let re=q();if(re){let Z=new Event(Sw);re.dispatchEvent(Z)}}}}},x.createElement("label",{"cmdk-label":"",htmlFor:U.inputId,id:U.labelId,style:NW},d),G0(e,R=>x.createElement(_P.Provider,{value:F},x.createElement(bP.Provider,{value:U},R))))}),dW=x.forwardRef((e,t)=>{var r,n;let i=Ms(),a=x.useRef(null),o=x.useContext(NP),l=Mp(),d=SP(e),f=(n=(r=d.current)==null?void 0:r.forceMount)!=null?n:o?.forceMount;Gd(()=>{if(!f)return l.item(i,o?.id)},[f]);let h=kP(i,a,[e.value,e.children,a],e.keywords),p=pb(),v=Iu(M=>M.value&&M.value===h.current),m=Iu(M=>f||l.filter()===!1?!0:M.search?M.filtered.items.get(i)>0:!0);x.useEffect(()=>{let M=a.current;if(!(!M||e.disabled))return M.addEventListener(Sw,j),()=>M.removeEventListener(Sw,j)},[m,e.onSelect,e.disabled]);function j(){var M,F;w(),(F=(M=d.current).onSelect)==null||F.call(M,h.current)}function w(){p.setState("value",h.current,!0)}if(!m)return null;let{disabled:_,value:S,onSelect:E,forceMount:k,keywords:C,...D}=e;return x.createElement(yt.div,{ref:_c(a,t),...D,id:i,"cmdk-item":"",role:"option","aria-disabled":!!_,"aria-selected":!!v,"data-disabled":!!_,"data-selected":!!v,onPointerMove:_||l.getDisablePointerSelection()?void 0:w,onClick:_?void 0:j},e.children)}),fW=x.forwardRef((e,t)=>{let{heading:r,children:n,forceMount:i,...a}=e,o=Ms(),l=x.useRef(null),d=x.useRef(null),f=Ms(),h=Mp(),p=Iu(m=>i||h.filter()===!1?!0:m.search?m.filtered.groups.has(o):!0);Gd(()=>h.group(o),[]),kP(o,l,[e.value,e.heading,d]);let v=x.useMemo(()=>({id:o,forceMount:i}),[i]);return x.createElement(yt.div,{ref:_c(l,t),...a,"cmdk-group":"",role:"presentation",hidden:p?void 0:!0},r&&x.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:f},r),G0(e,m=>x.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?f:void 0},x.createElement(NP.Provider,{value:v},m))))}),hW=x.forwardRef((e,t)=>{let{alwaysRender:r,...n}=e,i=x.useRef(null),a=Iu(o=>!o.search);return!r&&!a?null:x.createElement(yt.div,{ref:_c(i,t),...n,"cmdk-separator":"",role:"separator"})}),mW=x.forwardRef((e,t)=>{let{onValueChange:r,...n}=e,i=e.value!=null,a=pb(),o=Iu(f=>f.search),l=Iu(f=>f.selectedItemId),d=Mp();return x.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),x.createElement(yt.input,{ref:t,...n,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":l,id:d.inputId,type:"text",value:i?e.value:o,onChange:f=>{i||a.setState("search",f.target.value),r?.(f.target.value)}})}),pW=x.forwardRef((e,t)=>{let{children:r,label:n="Suggestions",...i}=e,a=x.useRef(null),o=x.useRef(null),l=Iu(f=>f.selectedItemId),d=Mp();return x.useEffect(()=>{if(o.current&&a.current){let f=o.current,h=a.current,p,v=new ResizeObserver(()=>{p=requestAnimationFrame(()=>{let m=f.offsetHeight;h.style.setProperty("--cmdk-list-height",m.toFixed(1)+"px")})});return v.observe(f),()=>{cancelAnimationFrame(p),v.unobserve(f)}}},[]),x.createElement(yt.div,{ref:_c(a,t),...i,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":n,id:d.listId},G0(e,f=>x.createElement("div",{ref:_c(o,d.listInnerRef),"cmdk-list-sizer":""},f)))}),gW=x.forwardRef((e,t)=>{let{open:r,onOpenChange:n,overlayClassName:i,contentClassName:a,container:o,...l}=e;return x.createElement(rb,{open:r,onOpenChange:n},x.createElement(nb,{container:o},x.createElement(U0,{"cmdk-overlay":"",className:i}),x.createElement($0,{"aria-label":e.label,"cmdk-dialog":"",className:a},x.createElement(jP,{ref:t,...l}))))}),vW=x.forwardRef((e,t)=>Iu(r=>r.filtered.count===0)?x.createElement(yt.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),yW=x.forwardRef((e,t)=>{let{progress:r,children:n,label:i="Loading...",...a}=e;return x.createElement(yt.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":i},G0(e,o=>x.createElement("div",{"aria-hidden":!0},o)))}),Xi=Object.assign(jP,{List:pW,Item:dW,Input:mW,Group:fW,Separator:hW,Dialog:gW,Empty:vW,Loading:yW});function xW(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}function wW(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}function SP(e){let t=x.useRef(e);return Gd(()=>{t.current=e}),t}var Gd=typeof window>"u"?x.useEffect:x.useLayoutEffect;function nh(e){let t=x.useRef();return t.current===void 0&&(t.current=e()),t}function Iu(e){let t=pb(),r=()=>e(t.snapshot());return x.useSyncExternalStore(t.subscribe,r,r)}function kP(e,t,r,n=[]){let i=x.useRef(),a=Mp();return Gd(()=>{var o;let l=(()=>{var f;for(let h of r){if(typeof h=="string")return h.trim();if(typeof h=="object"&&"current"in h)return h.current?(f=h.current.textContent)==null?void 0:f.trim():i.current}})(),d=n.map(f=>f.trim());a.value(e,l,d),(o=t.current)==null||o.setAttribute(rh,l),i.current=l}),i}var bW=()=>{let[e,t]=x.useState(),r=nh(()=>new Map);return Gd(()=>{r.current.forEach(n=>n()),r.current=new Map},[e]),(n,i)=>{r.current.set(n,i),t({})}};function _W(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function G0({asChild:e,children:t},r){return e&&x.isValidElement(t)?x.cloneElement(_W(t),{ref:t.ref},r(t.props.children)):r(t)}var NW={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const Vm=x.forwardRef(({className:e,...t},r)=>s.jsx(Xi,{ref:r,className:Me("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));Vm.displayName=Xi.displayName;const Wm=x.forwardRef(({className:e,...t},r)=>s.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[s.jsx(_l,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),s.jsx(Xi.Input,{ref:r,className:Me("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));Wm.displayName=Xi.Input.displayName;const Hm=x.forwardRef(({className:e,...t},r)=>s.jsx(Xi.List,{ref:r,className:Me("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));Hm.displayName=Xi.List.displayName;const Gm=x.forwardRef((e,t)=>s.jsx(Xi.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Gm.displayName=Xi.Empty.displayName;const Km=x.forwardRef(({className:e,...t},r)=>s.jsx(Xi.Group,{ref:r,className:Me("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));Km.displayName=Xi.Group.displayName;const jW=x.forwardRef(({className:e,...t},r)=>s.jsx(Xi.Separator,{ref:r,className:Me("-mx-1 h-px bg-border",e),...t}));jW.displayName=Xi.Separator.displayName;const sh=x.forwardRef(({className:e,...t},r)=>s.jsx(Xi.Item,{ref:r,className:Me("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",e),...t}));sh.displayName=Xi.Item.displayName;var K0="Popover",[CP]=Fs(K0,[$u]),Fp=$u(),[SW,Yu]=CP(K0),EP=e=>{const{__scopePopover:t,children:r,open:n,defaultOpen:i,onOpenChange:a,modal:o=!1}=e,l=Fp(t),d=x.useRef(null),[f,h]=x.useState(!1),[p,v]=Yi({prop:n,defaultProp:i??!1,onChange:a,caller:K0});return s.jsx(x0,{...l,children:s.jsx(SW,{scope:t,contentId:Ms(),triggerRef:d,open:p,onOpenChange:v,onOpenToggle:x.useCallback(()=>v(m=>!m),[v]),hasCustomAnchor:f,onCustomAnchorAdd:x.useCallback(()=>h(!0),[]),onCustomAnchorRemove:x.useCallback(()=>h(!1),[]),modal:o,children:r})})};EP.displayName=K0;var AP="PopoverAnchor",kW=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Yu(AP,r),a=Fp(r),{onCustomAnchorAdd:o,onCustomAnchorRemove:l}=i;return x.useEffect(()=>(o(),()=>l()),[o,l]),s.jsx(Pp,{...a,...n,ref:t})});kW.displayName=AP;var PP="PopoverTrigger",TP=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Yu(PP,r),a=Fp(r),o=or(t,i.triggerRef),l=s.jsx(yt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":i.open,"aria-controls":i.contentId,"data-state":OP(i.open),...n,ref:o,onClick:lt(e.onClick,i.onOpenToggle)});return i.hasCustomAnchor?l:s.jsx(Pp,{asChild:!0,...a,children:l})});TP.displayName=PP;var gb="PopoverPortal",[CW,EW]=CP(gb,{forceMount:void 0}),RP=e=>{const{__scopePopover:t,forceMount:r,children:n,container:i}=e,a=Yu(gb,t);return s.jsx(CW,{scope:t,forceMount:r,children:s.jsx(Bs,{present:r||a.open,children:s.jsx($h,{asChild:!0,container:i,children:n})})})};RP.displayName=gb;var Th="PopoverContent",LP=x.forwardRef((e,t)=>{const r=EW(Th,e.__scopePopover),{forceMount:n=r.forceMount,...i}=e,a=Yu(Th,e.__scopePopover);return s.jsx(Bs,{present:n||a.open,children:a.modal?s.jsx(PW,{...i,ref:t}):s.jsx(TW,{...i,ref:t})})});LP.displayName=Th;var AW=Pu("PopoverContent.RemoveScroll"),PW=x.forwardRef((e,t)=>{const r=Yu(Th,e.__scopePopover),n=x.useRef(null),i=or(t,n),a=x.useRef(!1);return x.useEffect(()=>{const o=n.current;if(o)return P0(o)},[]),s.jsx(Lp,{as:AW,allowPinchZoom:!0,children:s.jsx(DP,{...e,ref:i,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:lt(e.onCloseAutoFocus,o=>{o.preventDefault(),a.current||r.triggerRef.current?.focus()}),onPointerDownOutside:lt(e.onPointerDownOutside,o=>{const l=o.detail.originalEvent,d=l.button===0&&l.ctrlKey===!0,f=l.button===2||d;a.current=f},{checkForDefaultPrevented:!1}),onFocusOutside:lt(e.onFocusOutside,o=>o.preventDefault(),{checkForDefaultPrevented:!1})})})}),TW=x.forwardRef((e,t)=>{const r=Yu(Th,e.__scopePopover),n=x.useRef(!1),i=x.useRef(!1);return s.jsx(DP,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(n.current||r.triggerRef.current?.focus(),a.preventDefault()),n.current=!1,i.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(n.current=!0,a.detail.originalEvent.type==="pointerdown"&&(i.current=!0));const o=a.target;r.triggerRef.current?.contains(o)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&i.current&&a.preventDefault()}})}),DP=x.forwardRef((e,t)=>{const{__scopePopover:r,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:a,disableOutsidePointerEvents:o,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:f,onInteractOutside:h,...p}=e,v=Yu(Th,r),m=Fp(r);return A0(),s.jsx(Tp,{asChild:!0,loop:!0,trapped:n,onMountAutoFocus:i,onUnmountAutoFocus:a,children:s.jsx(Xd,{asChild:!0,disableOutsidePointerEvents:o,onInteractOutside:h,onEscapeKeyDown:l,onPointerDownOutside:d,onFocusOutside:f,onDismiss:()=>v.onOpenChange(!1),children:s.jsx(w0,{"data-state":OP(v.open),role:"dialog",id:v.contentId,...m,...p,ref:t,style:{...p.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),IP="PopoverClose",RW=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Yu(IP,r);return s.jsx(yt.button,{type:"button",...n,ref:t,onClick:lt(e.onClick,()=>i.onOpenChange(!1))})});RW.displayName=IP;var LW="PopoverArrow",DW=x.forwardRef((e,t)=>{const{__scopePopover:r,...n}=e,i=Fp(r);return s.jsx(b0,{...i,...n,ref:t})});DW.displayName=LW;function OP(e){return e?"open":"closed"}var IW=EP,OW=TP,MW=RP,MP=LP;const ch=IW,uh=OW,Md=x.forwardRef(({className:e,align:t="center",sideOffset:r=4,...n},i)=>s.jsx(MW,{children:s.jsx(MP,{ref:i,align:t,sideOffset:r,className:Me("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...n})}));Md.displayName=MP.displayName;async function vb(e,t,r,n){console.log(" PDF Renderer - Received data.organizationDetails:",t.organizationDetails),console.log(" PDF Renderer - Full data object keys:",Object.keys(t)),e.clearRect(0,0,r,n),e.fillStyle="#ffffff",e.fillRect(0,0,r,n);const i=40,a=r-i*2,o=680,l=i+50;e.strokeStyle="#e9ecef",e.lineWidth=1,e.strokeRect(0,0,r,n),e.strokeStyle="#212529",e.lineWidth=3,e.strokeRect(i,l,a,o);const d=20;let f=l+d;const h=i+d,p=a-d*2;e.strokeStyle="#212529",e.lineWidth=2,e.strokeRect(h,f,p,60),e.fillStyle="#212529",e.font='bold 28px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.textAlign="left";const v=t.productName||"Product Name";if(e.fillText(v,h+10,f+40),t.quantity&&t.unit&&(e.font='bold 24px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.textAlign="right",e.fillText(`${t.quantity} ${t.unit}`,h+p-10,f+40),e.textAlign="left"),f+=65,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=25,e.fillStyle="#212529",e.font='bold 22px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.condition?.toUpperCase()||"N/A",h,f),f+=35,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=25,e.fillStyle="#212529",e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Manufacturing Date:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.prepDate||"N/A",h+210,f),f+=30,e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Expiry Date:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.expiryDate||"N/A",h+210,f),f+=30,t.batchNumber&&t.batchNumber.trim()!==""&&(e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Batch:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.batchNumber,h+210,f),f+=30),t.categoryName&&t.categoryName!=="Quick Print"&&(e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Category:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.categoryName,h+210,f),f+=30),t.organizationDetails?.foodSafetyRegistration&&(e.font='18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Food Safety Reg:",h,f),e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.organizationDetails.foodSafetyRegistration,h+210,f),f+=30),e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=20,t.allergens&&t.allergens.length>0){const _=t.allergens.map(C=>C.name).join(", ");e.fillStyle="#212529",e.font='bold 16px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText("Allergens:",h,f),f+=25,e.font='14px "Century Gothic", "Trebuchet MS", "Arial", sans-serif';const S=p-150,E=_.split(" ");let k="";for(let C=0;C<E.length;C++){const D=k+E[C]+" ";e.measureText(D).width>S&&C>0?(e.fillText(k,h,f),k=E[C]+" ",f+=22):k=D}e.fillText(k,h,f),f+=30,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=20}if(e.fillStyle="#212529",e.font='bold 18px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(`Prepared By: ${(t.preparedByName||"Unknown").toUpperCase()}`,h,f),f+=35,e.strokeStyle="#212529",e.lineWidth=1,e.beginPath(),e.moveTo(h,f),e.lineTo(h+p,f),e.stroke(),f+=20,t.organizationDetails){if(e.fillStyle="#212529",e.font='bold 16px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(t.organizationDetails.name.toUpperCase(),h,f),f+=24,t.organizationDetails.phone&&(e.font='13px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(`Tel: ${t.organizationDetails.phone}`,h,f),f+=20),t.organizationDetails.address){let _=[];try{const S=typeof t.organizationDetails.address=="string"?JSON.parse(t.organizationDetails.address):t.organizationDetails.address,E=`${S.street||""}, ${S.number||""}`.trim(),k=`${S.city||""} - ${S.state||""}, ${S.postalCode||""}`.trim();_=[E,k].filter(C=>C.length>3)}catch{_=[String(t.organizationDetails.address)]}e.font='12px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',_.forEach(S=>{e.fillText(S,h,f),f+=18})}t.organizationDetails.foodSafetyRegistration&&(e.font='13px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.fillText(`Food Safety Reg: ${t.organizationDetails.foodSafetyRegistration}`,h,f),f+=20)}const m=110,j=i+a-d-m,w=l+o-d-m-10;try{const _=JSON.stringify({labelId:t.labelId||null,product:t.productName,prep:t.prepDate,exp:t.expiryDate,batch:t.batchNumber,by:t.preparedByName}),S=await yP.toDataURL(_,{width:m,margin:1,color:{dark:"#000000",light:"#ffffff"}}),E=new Image;E.src=S,await new Promise(k=>{E.onload=()=>{e.drawImage(E,j,w,m,m),k()},E.onerror=()=>{Sj(e,j,w,m),k()}})}catch{Sj(e,j,w,m)}if(t.labelId){const _=l+o-d-5;e.fillStyle="#495057",e.font='bold 11px "Courier New", monospace',e.textAlign="left";const S=t.labelId.substring(0,8).toUpperCase();e.fillText(`#${S}`,h,_)}e.fillStyle="#adb5bd",e.font='10px "Century Gothic", "Trebuchet MS", "Arial", sans-serif',e.textAlign="center",e.fillText("Generated by Food Safe Sync - Suflex Label Design (A4 Format)",r/2,n-20),e.fillText("Page 1 of 1",r/2,n-10),e.textAlign="left"}function Sj(e,t,r,n){e.strokeStyle="#dee2e6",e.lineWidth=2,e.strokeRect(t,r,n,n),e.fillStyle="#adb5bd",e.font="12px Arial";const i=e.textAlign;e.textAlign="center",e.fillText("QR CODE",t+n/2,r+n/2),e.textAlign=i}async function FW(e,t,r,n){await vb(e,t,r,n)}function BW({labelData:e,format:t,scale:r=1,className:n=""}){const i=x.useRef(null),[a,o]=x.useState(!1),l=x.useRef(),d=async()=>{const f=i.current;if(!f)return;const h=f.getContext("2d");if(!h)return;o(!0);let p=600,v=848;(t==="pdf"||t==="zebra"||t==="generic")&&(p=600,v=848),f.width=p*r,f.height=v*r,h.clearRect(0,0,f.width,f.height),h.save(),h.scale(r,r);try{await vb(h,e,p,v)}catch(m){console.error("Error rendering label preview:",m),h.fillStyle="#dc3545",h.font="16px sans-serif",h.textAlign="center",h.fillText("Error rendering preview",p/2,v/2)}finally{h.restore(),o(!1)}};return x.useEffect(()=>(l.current&&clearTimeout(l.current),l.current=setTimeout(()=>{d()},300),()=>{l.current&&clearTimeout(l.current)}),[e,t,r]),s.jsxs("div",{className:`relative flex items-center justify-center bg-muted/30 rounded-lg p-4 overflow-auto ${n}`,children:[a&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-background/50 rounded-lg z-10",children:s.jsx(Si,{className:"w-8 h-8 animate-spin text-primary"})}),s.jsx("canvas",{ref:i,className:"border border-border rounded shadow-sm bg-white",style:{maxWidth:"100%",height:"auto"}})]})}function UW(e,t){return x.useReducer((r,n)=>t[r][n]??r,e)}var yb="ScrollArea",[FP]=Fs(yb),[$W,Ja]=FP(yb),BP=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,type:n="hover",dir:i,scrollHideDelay:a=600,...o}=e,[l,d]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState(null),[m,j]=x.useState(null),[w,_]=x.useState(null),[S,E]=x.useState(0),[k,C]=x.useState(0),[D,M]=x.useState(!1),[F,U]=x.useState(!1),I=or(t,B=>d(B)),K=rf(i);return s.jsx($W,{scope:r,type:n,dir:K,scrollHideDelay:a,scrollArea:l,viewport:f,onViewportChange:h,content:p,onContentChange:v,scrollbarX:m,onScrollbarXChange:j,scrollbarXEnabled:D,onScrollbarXEnabledChange:M,scrollbarY:w,onScrollbarYChange:_,scrollbarYEnabled:F,onScrollbarYEnabledChange:U,onCornerWidthChange:E,onCornerHeightChange:C,children:s.jsx(yt.div,{dir:K,...o,ref:I,style:{position:"relative","--radix-scroll-area-corner-width":S+"px","--radix-scroll-area-corner-height":k+"px",...e.style}})})});BP.displayName=yb;var UP="ScrollAreaViewport",$P=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,children:n,nonce:i,...a}=e,o=Ja(UP,r),l=x.useRef(null),d=or(t,l,o.onViewportChange);return s.jsxs(s.Fragment,{children:[s.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),s.jsx(yt.div,{"data-radix-scroll-area-viewport":"",...a,ref:d,style:{overflowX:o.scrollbarXEnabled?"scroll":"hidden",overflowY:o.scrollbarYEnabled?"scroll":"hidden",...e.style},children:s.jsx("div",{ref:o.onContentChange,style:{minWidth:"100%",display:"table"},children:n})})]})});$P.displayName=UP;var Sl="ScrollAreaScrollbar",xb=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Ja(Sl,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:o}=i,l=e.orientation==="horizontal";return x.useEffect(()=>(l?a(!0):o(!0),()=>{l?a(!1):o(!1)}),[l,a,o]),i.type==="hover"?s.jsx(zW,{...n,ref:t,forceMount:r}):i.type==="scroll"?s.jsx(qW,{...n,ref:t,forceMount:r}):i.type==="auto"?s.jsx(zP,{...n,ref:t,forceMount:r}):i.type==="always"?s.jsx(wb,{...n,ref:t}):null});xb.displayName=Sl;var zW=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Ja(Sl,e.__scopeScrollArea),[a,o]=x.useState(!1);return x.useEffect(()=>{const l=i.scrollArea;let d=0;if(l){const f=()=>{window.clearTimeout(d),o(!0)},h=()=>{d=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return l.addEventListener("pointerenter",f),l.addEventListener("pointerleave",h),()=>{window.clearTimeout(d),l.removeEventListener("pointerenter",f),l.removeEventListener("pointerleave",h)}}},[i.scrollArea,i.scrollHideDelay]),s.jsx(Bs,{present:r||a,children:s.jsx(zP,{"data-state":a?"visible":"hidden",...n,ref:t})})}),qW=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=Ja(Sl,e.__scopeScrollArea),a=e.orientation==="horizontal",o=Q0(()=>d("SCROLL_END"),100),[l,d]=UW("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return x.useEffect(()=>{if(l==="idle"){const f=window.setTimeout(()=>d("HIDE"),i.scrollHideDelay);return()=>window.clearTimeout(f)}},[l,i.scrollHideDelay,d]),x.useEffect(()=>{const f=i.viewport,h=a?"scrollLeft":"scrollTop";if(f){let p=f[h];const v=()=>{const m=f[h];p!==m&&(d("SCROLL"),o()),p=m};return f.addEventListener("scroll",v),()=>f.removeEventListener("scroll",v)}},[i.viewport,a,d,o]),s.jsx(Bs,{present:r||l!=="hidden",children:s.jsx(wb,{"data-state":l==="hidden"?"hidden":"visible",...n,ref:t,onPointerEnter:lt(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:lt(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),zP=x.forwardRef((e,t)=>{const r=Ja(Sl,e.__scopeScrollArea),{forceMount:n,...i}=e,[a,o]=x.useState(!1),l=e.orientation==="horizontal",d=Q0(()=>{if(r.viewport){const f=r.viewport.offsetWidth<r.viewport.scrollWidth,h=r.viewport.offsetHeight<r.viewport.scrollHeight;o(l?f:h)}},10);return Rh(r.viewport,d),Rh(r.content,d),s.jsx(Bs,{present:n||a,children:s.jsx(wb,{"data-state":a?"visible":"hidden",...i,ref:t})})}),wb=x.forwardRef((e,t)=>{const{orientation:r="vertical",...n}=e,i=Ja(Sl,e.__scopeScrollArea),a=x.useRef(null),o=x.useRef(0),[l,d]=x.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),f=GP(l.viewport,l.content),h={...n,sizes:l,onSizesChange:d,hasThumb:f>0&&f<1,onThumbChange:v=>a.current=v,onThumbPointerUp:()=>o.current=0,onThumbPointerDown:v=>o.current=v};function p(v,m){return YW(v,o.current,l,m)}return r==="horizontal"?s.jsx(VW,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollLeft,m=kj(v,l,i.dir);a.current.style.transform=`translate3d(${m}px, 0, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollLeft=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollLeft=p(v,i.dir))}}):r==="vertical"?s.jsx(WW,{...h,ref:t,onThumbPositionChange:()=>{if(i.viewport&&a.current){const v=i.viewport.scrollTop,m=kj(v,l);a.current.style.transform=`translate3d(0, ${m}px, 0)`}},onWheelScroll:v=>{i.viewport&&(i.viewport.scrollTop=v)},onDragScroll:v=>{i.viewport&&(i.viewport.scrollTop=p(v))}}):null}),VW=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,a=Ja(Sl,e.__scopeScrollArea),[o,l]=x.useState(),d=x.useRef(null),f=or(t,d,a.onScrollbarXChange);return x.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(VP,{"data-orientation":"horizontal",...i,ref:f,sizes:r,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":Y0(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.x),onDragScroll:h=>e.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(a.viewport){const v=a.viewport.scrollLeft+h.deltaX;e.onWheelScroll(v),YP(v,p)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&n({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:Vv(o.paddingLeft),paddingEnd:Vv(o.paddingRight)}})}})}),WW=x.forwardRef((e,t)=>{const{sizes:r,onSizesChange:n,...i}=e,a=Ja(Sl,e.__scopeScrollArea),[o,l]=x.useState(),d=x.useRef(null),f=or(t,d,a.onScrollbarYChange);return x.useEffect(()=>{d.current&&l(getComputedStyle(d.current))},[d]),s.jsx(VP,{"data-orientation":"vertical",...i,ref:f,sizes:r,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":Y0(r)+"px",...e.style},onThumbPointerDown:h=>e.onThumbPointerDown(h.y),onDragScroll:h=>e.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(a.viewport){const v=a.viewport.scrollTop+h.deltaY;e.onWheelScroll(v),YP(v,p)&&h.preventDefault()}},onResize:()=>{d.current&&a.viewport&&o&&n({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:Vv(o.paddingTop),paddingEnd:Vv(o.paddingBottom)}})}})}),[HW,qP]=FP(Sl),VP=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,sizes:n,hasThumb:i,onThumbChange:a,onThumbPointerUp:o,onThumbPointerDown:l,onThumbPositionChange:d,onDragScroll:f,onWheelScroll:h,onResize:p,...v}=e,m=Ja(Sl,r),[j,w]=x.useState(null),_=or(t,I=>w(I)),S=x.useRef(null),E=x.useRef(""),k=m.viewport,C=n.content-n.viewport,D=Zn(h),M=Zn(d),F=Q0(p,10);function U(I){if(S.current){const K=I.clientX-S.current.left,B=I.clientY-S.current.top;f({x:K,y:B})}}return x.useEffect(()=>{const I=K=>{const B=K.target;j?.contains(B)&&D(K,C)};return document.addEventListener("wheel",I,{passive:!1}),()=>document.removeEventListener("wheel",I,{passive:!1})},[k,j,C,D]),x.useEffect(M,[n,M]),Rh(j,F),Rh(m.content,F),s.jsx(HW,{scope:r,scrollbar:j,hasThumb:i,onThumbChange:Zn(a),onThumbPointerUp:Zn(o),onThumbPositionChange:M,onThumbPointerDown:Zn(l),children:s.jsx(yt.div,{...v,ref:_,style:{position:"absolute",...v.style},onPointerDown:lt(e.onPointerDown,I=>{I.button===0&&(I.target.setPointerCapture(I.pointerId),S.current=j.getBoundingClientRect(),E.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",m.viewport&&(m.viewport.style.scrollBehavior="auto"),U(I))}),onPointerMove:lt(e.onPointerMove,U),onPointerUp:lt(e.onPointerUp,I=>{const K=I.target;K.hasPointerCapture(I.pointerId)&&K.releasePointerCapture(I.pointerId),document.body.style.webkitUserSelect=E.current,m.viewport&&(m.viewport.style.scrollBehavior=""),S.current=null})})})}),qv="ScrollAreaThumb",WP=x.forwardRef((e,t)=>{const{forceMount:r,...n}=e,i=qP(qv,e.__scopeScrollArea);return s.jsx(Bs,{present:r||i.hasThumb,children:s.jsx(GW,{ref:t,...n})})}),GW=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,style:n,...i}=e,a=Ja(qv,r),o=qP(qv,r),{onThumbPositionChange:l}=o,d=or(t,p=>o.onThumbChange(p)),f=x.useRef(void 0),h=Q0(()=>{f.current&&(f.current(),f.current=void 0)},100);return x.useEffect(()=>{const p=a.viewport;if(p){const v=()=>{if(h(),!f.current){const m=QW(p,l);f.current=m,l()}};return l(),p.addEventListener("scroll",v),()=>p.removeEventListener("scroll",v)}},[a.viewport,h,l]),s.jsx(yt.div,{"data-state":o.hasThumb?"visible":"hidden",...i,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...n},onPointerDownCapture:lt(e.onPointerDownCapture,p=>{const m=p.target.getBoundingClientRect(),j=p.clientX-m.left,w=p.clientY-m.top;o.onThumbPointerDown({x:j,y:w})}),onPointerUp:lt(e.onPointerUp,o.onThumbPointerUp)})});WP.displayName=qv;var bb="ScrollAreaCorner",HP=x.forwardRef((e,t)=>{const r=Ja(bb,e.__scopeScrollArea),n=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&n?s.jsx(KW,{...e,ref:t}):null});HP.displayName=bb;var KW=x.forwardRef((e,t)=>{const{__scopeScrollArea:r,...n}=e,i=Ja(bb,r),[a,o]=x.useState(0),[l,d]=x.useState(0),f=!!(a&&l);return Rh(i.scrollbarX,()=>{const h=i.scrollbarX?.offsetHeight||0;i.onCornerHeightChange(h),d(h)}),Rh(i.scrollbarY,()=>{const h=i.scrollbarY?.offsetWidth||0;i.onCornerWidthChange(h),o(h)}),f?s.jsx(yt.div,{...n,ref:t,style:{width:a,height:l,position:"absolute",right:i.dir==="ltr"?0:void 0,left:i.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function Vv(e){return e?parseInt(e,10):0}function GP(e,t){const r=e/t;return isNaN(r)?0:r}function Y0(e){const t=GP(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,n=(e.scrollbar.size-r)*t;return Math.max(n,18)}function YW(e,t,r,n="ltr"){const i=Y0(r),a=i/2,o=t||a,l=i-o,d=r.scrollbar.paddingStart+o,f=r.scrollbar.size-r.scrollbar.paddingEnd-l,h=r.content-r.viewport,p=n==="ltr"?[0,h]:[h*-1,0];return KP([d,f],p)(e)}function kj(e,t,r="ltr"){const n=Y0(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-i,o=t.content-t.viewport,l=a-n,d=r==="ltr"?[0,o]:[o*-1,0],f=bp(e,d);return KP([0,o],[0,l])(f)}function KP(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function YP(e,t){return e>0&&e<t}var QW=(e,t=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},n=0;return(function i(){const a={left:e.scrollLeft,top:e.scrollTop},o=r.left!==a.left,l=r.top!==a.top;(o||l)&&t(),r=a,n=window.requestAnimationFrame(i)})(),()=>window.cancelAnimationFrame(n)};function Q0(e,t){const r=Zn(e),n=x.useRef(0);return x.useEffect(()=>()=>window.clearTimeout(n.current),[]),x.useCallback(()=>{window.clearTimeout(n.current),n.current=window.setTimeout(r,t)},[r,t])}function Rh(e,t){const r=Zn(t);us(()=>{let n=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(n),n=window.requestAnimationFrame(r)});return i.observe(e),()=>{window.cancelAnimationFrame(n),i.unobserve(e)}}},[e,r])}var QP=BP,JW=$P,ZW=HP;const J0=x.forwardRef(({className:e,children:t,...r},n)=>s.jsxs(QP,{ref:n,className:Me("relative overflow-hidden",e),...r,children:[s.jsx(JW,{className:"h-full w-full rounded-[inherit]",children:t}),s.jsx(_b,{}),s.jsx(ZW,{})]}));J0.displayName=QP.displayName;const _b=x.forwardRef(({className:e,orientation:t="vertical",...r},n)=>s.jsx(xb,{ref:n,orientation:t,className:Me("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:s.jsx(WP,{className:"relative flex-1 rounded-full bg-border"})}));_b.displayName=xb.displayName;var XW="Separator",Cj="horizontal",eH=["horizontal","vertical"],JP=x.forwardRef((e,t)=>{const{decorative:r,orientation:n=Cj,...i}=e,a=tH(n)?n:Cj,l=r?{role:"none"}:{"aria-orientation":a==="vertical"?a:void 0,role:"separator"};return s.jsx(yt.div,{"data-orientation":a,...l,...i,ref:t})});JP.displayName=XW;function tH(e){return eH.includes(e)}var ZP=JP;const Hs=x.forwardRef(({className:e,orientation:t="horizontal",decorative:r=!0,...n},i)=>s.jsx(ZP,{ref:i,decorative:r,orientation:t,className:Me("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",e),...n}));Hs.displayName=ZP.displayName;function XP(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:i}=qr();x.useEffect(()=>{a()},[]);const a=async()=>{try{n(!0);const{data:v,error:m}=await Oe.from("allergens").select("*").order("is_common",{ascending:!1}).order("severity").order("name");if(m)throw m;t(v||[])}catch(v){console.error("Error fetching allergens:",v),i({title:"Error",description:"Failed to load allergens",variant:"destructive"})}finally{n(!1)}},o=async v=>{try{const{data:m,error:j}=await Oe.from("product_allergens").select(`
          allergen_id,
          allergens (*)
        `).eq("product_id",v);if(j)throw j;return(m||[]).map(w=>w.allergens).filter(Boolean)}catch(m){return console.error("Error fetching product allergens:",m),[]}};return{allergens:e,loading:r,getProductAllergens:o,addProductAllergen:async(v,m)=>{try{const{error:j}=await Oe.from("product_allergens").insert({product_id:v,allergen_id:m});if(j)throw j;return i({title:"Success",description:"Allergen added to product"}),!0}catch(j){return console.error("Error adding product allergen:",j),j.code==="23505"?i({title:"Info",description:"This allergen is already added to the product"}):i({title:"Error",description:"Failed to add allergen",variant:"destructive"}),!1}},removeProductAllergen:async(v,m)=>{try{const{error:j}=await Oe.from("product_allergens").delete().eq("product_id",v).eq("allergen_id",m);if(j)throw j;return i({title:"Success",description:"Allergen removed from product"}),!0}catch(j){return console.error("Error removing product allergen:",j),i({title:"Error",description:"Failed to remove allergen",variant:"destructive"}),!1}},updateProductAllergens:async(v,m)=>{try{const w=(await o(v)).map(E=>E.id),_=m.filter(E=>!w.includes(E)),S=w.filter(E=>!m.includes(E));if(S.length>0){const{error:E}=await Oe.from("product_allergens").delete().eq("product_id",v).in("allergen_id",S);if(E)throw E}if(_.length>0){const{error:E}=await Oe.from("product_allergens").insert(_.map(k=>({product_id:v,allergen_id:k})));if(E)throw E}return i({title:"Success",description:"Product allergens updated"}),!0}catch(j){return console.error("Error updating product allergens:",j),i({title:"Error",description:"Failed to update allergens",variant:"destructive"}),!1}},getCommonAllergens:()=>e.filter(v=>v.is_common),getCriticalAllergens:()=>e.filter(v=>v.severity==="critical"),refetch:a}}const rH=e=>{switch(e){case"critical":return s.jsx(wn,{className:"h-4 w-4 text-red-500"});case"warning":return s.jsx(es,{className:"h-4 w-4 text-yellow-500"});case"info":return s.jsx(dk,{className:"h-4 w-4 text-blue-500"});default:return null}},e6=e=>{switch(e){case"critical":return"bg-red-100 text-red-800 border-red-300 hover:bg-red-200";case"warning":return"bg-yellow-100 text-yellow-800 border-yellow-300 hover:bg-yellow-200";case"info":return"bg-blue-100 text-blue-800 border-blue-300 hover:bg-blue-200";default:return"bg-gray-100 text-gray-800 border-gray-300 hover:bg-gray-200"}};function nH({selectedAllergenIds:e=[],onChange:t,disabled:r=!1,showCommonOnly:n=!1,className:i="",productId:a}){const{allergens:o,loading:l,getProductAllergens:d}=XP(),[f,h]=x.useState(!1),[p,v]=x.useState(!1);x.useEffect(()=>{a&&m()},[a]);const m=async()=>{if(a){v(!0);try{const C=(await d(a)).map(D=>D.id);t(C)}catch(k){console.error("Error loading product allergens:",k)}finally{v(!1)}}},j=k=>{if(r)return;const C=e.includes(k)?e.filter(D=>D!==k):[...e,k];t(C)},w=()=>{r||t([])},_=n||!f?o.filter(k=>k.is_common):o,S=o.filter(k=>e.includes(k.id)),E={critical:_.filter(k=>k.severity==="critical"),warning:_.filter(k=>k.severity==="warning"),info:_.filter(k=>k.severity==="info")};return l||p?s.jsx("div",{className:Me("space-y-4",i),children:s.jsxs("div",{className:"animate-pulse",children:[s.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 mb-4"}),s.jsx("div",{className:"grid grid-cols-2 gap-2",children:[1,2,3,4].map(k=>s.jsx("div",{className:"h-10 bg-gray-200 rounded"},k))})]})}):s.jsxs("div",{className:Me("space-y-4",i),children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(At,{className:"text-base font-semibold flex items-center gap-2",children:[s.jsx(wn,{className:"h-5 w-5"}),"Allergens"]}),s.jsxs("div",{className:"flex gap-2",children:[e.length>0&&s.jsx(ke,{type:"button",variant:"ghost",size:"sm",onClick:w,disabled:r,children:"Clear All"}),!n&&s.jsx(ke,{type:"button",variant:"outline",size:"sm",onClick:()=>h(!f),disabled:r,children:f?"Common Only":"Show All"})]})]}),S.length>0&&s.jsxs(it,{className:"bg-yellow-50 border-yellow-200",children:[s.jsx(sr,{className:"pb-3",children:s.jsxs(pr,{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(es,{className:"h-4 w-4 text-yellow-600"}),"Selected Allergens (",S.length,")"]})}),s.jsx(ot,{children:s.jsx("div",{className:"flex flex-wrap gap-2",children:S.map(k=>s.jsxs(pt,{variant:"secondary",className:Me("text-sm py-1 px-3 cursor-pointer",e6(k.severity)),onClick:()=>!r&&j(k.id),children:[k.icon&&s.jsx("span",{className:"mr-1",children:k.icon}),k.name,!r&&s.jsx(xn,{className:"h-3 w-3 ml-1 inline"})]},k.id))})})]}),s.jsx(J0,{className:"h-[300px] rounded-md border p-4",children:s.jsxs("div",{className:"space-y-4",children:[E.critical.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(wn,{className:"h-4 w-4 text-red-500"}),s.jsx("h4",{className:"text-sm font-semibold text-red-700",children:"Critical Allergens"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.critical.map(k=>s.jsx(e1,{allergen:k,checked:e.includes(k.id),onCheckedChange:()=>j(k.id),disabled:r},k.id))}),s.jsx(Hs,{className:"mt-4"})]}),E.warning.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(es,{className:"h-4 w-4 text-yellow-500"}),s.jsx("h4",{className:"text-sm font-semibold text-yellow-700",children:"Common Allergens"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.warning.map(k=>s.jsx(e1,{allergen:k,checked:e.includes(k.id),onCheckedChange:()=>j(k.id),disabled:r},k.id))}),s.jsx(Hs,{className:"mt-4"})]}),E.info.length>0&&s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[s.jsx(dk,{className:"h-4 w-4 text-blue-500"}),s.jsx("h4",{className:"text-sm font-semibold text-blue-700",children:"Other Allergens"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:E.info.map(k=>s.jsx(e1,{allergen:k,checked:e.includes(k.id),onCheckedChange:()=>j(k.id),disabled:r},k.id))})]})]})}),s.jsx("p",{className:"text-xs text-muted-foreground",children:n||!f?"Showing FDA/EU recognized major allergens (Top 14)":"Showing all allergens including less common ones"})]})}function e1({allergen:e,checked:t,onCheckedChange:r,disabled:n}){return s.jsxs("div",{className:Me("flex items-center space-x-3 rounded-md border p-3 transition-colors cursor-pointer",t?e6(e.severity):"hover:bg-accent",n&&"opacity-50 cursor-not-allowed"),onClick:()=>!n&&r(),children:[s.jsx(hb,{checked:t,onCheckedChange:r,disabled:n,id:`allergen-${e.id}`}),s.jsxs("label",{htmlFor:`allergen-${e.id}`,className:"flex-1 cursor-pointer flex items-center gap-2 text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:[e.icon&&s.jsx("span",{className:"text-lg",children:e.icon}),s.jsx("span",{children:e.name}),e.severity&&s.jsx("span",{className:"ml-auto",children:rH(e.severity)})]})]})}const sH=zh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),So=x.forwardRef(({className:e,variant:t,...r},n)=>s.jsx("div",{ref:n,role:"alert",className:Me(sH({variant:t}),e),...r}));So.displayName="Alert";const Fd=x.forwardRef(({className:e,...t},r)=>s.jsx("h5",{ref:r,className:Me("mb-1 font-medium leading-none tracking-tight",e),...t}));Fd.displayName="AlertTitle";const ko=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{ref:r,className:Me("text-sm [&_p]:leading-relaxed",e),...t}));ko.displayName="AlertDescription";function Hr({className:e,...t}){return s.jsx("div",{className:Me("animate-pulse rounded-md bg-muted",e),...t})}function iH({similarProducts:e,isLoading:t,isDuplicate:r,error:n,onSelectProduct:i,onProceedAnyway:a,showProceedButton:o=!0}){if(!t&&e.length===0&&!n)return null;if(t)return s.jsx(it,{className:"border-blue-200 bg-blue-50",children:s.jsx(ot,{className:"pt-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(Hr,{className:"h-5 w-5 rounded-full"}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(Hr,{className:"h-4 w-48"}),s.jsx(Hr,{className:"h-3 w-full"}),s.jsx(Hr,{className:"h-3 w-3/4"})]})]})})});if(n)return s.jsxs(So,{variant:"destructive",children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(Fd,{children:"Error Checking Duplicates"}),s.jsx(ko,{className:"text-sm",children:n})]});if(e.length===0)return null;const d=Math.max(...e.map(f=>f.similarity_score))>=.85||r;return s.jsxs(So,{variant:d?"destructive":"default",className:d?"border-red-500":"border-yellow-500 bg-yellow-50",children:[s.jsx(wn,{className:`h-4 w-4 ${d?"":"text-yellow-600"}`}),s.jsx(Fd,{className:"mb-3",children:d?" Potential Duplicate Product Detected":"Similar Products Found"}),s.jsx(ko,{children:s.jsxs("div",{className:"space-y-3",children:[s.jsx("p",{className:"text-sm",children:d?"A very similar product already exists. Please review before creating:":`Found ${e.length} similar product${e.length>1?"s":""}. Consider using an existing product:`}),s.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:e.map(f=>s.jsx(it,{className:"border-gray-200 hover:border-gray-300 transition-colors",children:s.jsx(ot,{className:"p-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex-1 space-y-1",children:[s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"font-medium text-sm",children:f.product_name}),s.jsxs(pt,{variant:f.similarity_score>=.85?"destructive":f.similarity_score>=.6?"default":"secondary",className:"text-xs",children:[Math.round(f.similarity_score*100),"% match"]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-600",children:[s.jsx(TL,{className:"h-3 w-3"}),s.jsxs("span",{children:[f.category_name,f.subcategory_name&&`  ${f.subcategory_name}`]})]}),s.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[f.allergen_count>0&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-base",children:""}),f.allergen_count," allergen",f.allergen_count>1?"s":""]}),f.last_printed&&s.jsxs("span",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"h-3 w-3"}),"Last printed:"," ",on(new Date(f.last_printed),"MMM d, yyyy")]}),!f.last_printed&&s.jsxs("span",{className:"flex items-center gap-1 text-gray-400",children:[s.jsx(Xn,{className:"h-3 w-3"}),"Never printed"]})]})]}),i&&s.jsxs(ke,{size:"sm",variant:"outline",onClick:()=>i(f),className:"shrink-0",children:[s.jsx(Nc,{className:"h-4 w-4 mr-1"}),"Use This"]})]})})},f.product_id))}),o&&a&&s.jsx("div",{className:"flex gap-2 pt-2",children:s.jsx(ke,{size:"sm",variant:d?"destructive":"default",onClick:a,className:"w-full",children:d?"Create New Product Anyway":"Proceed with New Product"})})]})})]})}function aH({productName:e,organizationId:t,minSimilarity:r=.3,debounceMs:n=500,excludeProductId:i}){const[a,o]=x.useState([]),[l,d]=x.useState(!1),[f,h]=x.useState(!1),[p,v]=x.useState(null);x.useEffect(()=>{if(!e||e.trim().length<3||!t){o([]),h(!1);return}const _=setTimeout(async()=>{await m()},n);return()=>clearTimeout(_)},[e,t,r,i]);const m=async()=>{d(!0),v(null);try{const{data:_,error:S}=await Oe.rpc("find_similar_products",{search_name:e.trim(),org_id:t,min_similarity:r});if(S)throw new Error(`Failed to fetch similar products: ${S.message}`);let E=_||[];i&&(E=E.filter(k=>k.product_id!==i)),o(E)}catch(_){const S=_ instanceof Error?_.message:"Unknown error";v(S),console.error("Error fetching similar products:",_),o([])}finally{d(!1)}};return{similarProducts:a,isLoading:l,isDuplicate:f,error:p,checkDuplicate:async()=>{if(!e||e.trim().length<3||!t)return h(!1),!1;try{const{data:_,error:S}=await Oe.rpc("is_duplicate_product",{check_name:e.trim(),org_id:t,exclude_id:i||null});if(S)throw new Error(`Failed to check duplicate: ${S.message}`);const E=_===!0;return h(E),E}catch(_){const S=_ instanceof Error?_.message:"Unknown error";return v(S),console.error("Error checking duplicate:",_),!1}},refreshSimilarProducts:async()=>{await m()}}}const oH=e=>{const{labelId:t,productName:r,categoryName:n,condition:i,prepDate:a,expiryDate:o,preparedByName:l,quantity:d,unit:f,allergens:h,organizationDetails:p}=e,v=JSON.stringify({labelId:t||null,product:r,prep:a,exp:o,batch:e.batchNumber,by:l}),m=h&&h.length>0?h.map(_=>_.name).join(", "):"";let j="";if(p?.address)try{const _=typeof p.address=="string"?JSON.parse(p.address):p.address;j=`${_.street||""}, ${_.number||""}
${_.city||""} - ${_.state||""}, ${_.postalCode||""}`}catch{j=String(p.address)}return`
^XA
^CF0,30
~TA000
~JSN
^LT0
^MNW
^MTT
^PON
^PMN
^LH0,0
^JMA
^PR4,4
~SD15
^JUS
^LRN
^CI27
^PA0,1,1,0
^XZ

^XA
^MMT
^PW600
^LL600
^LS0

^FO20,20^GB560,60,3^FS
^FO30,30^A0N,45,45^FD${r}^FS

^FO20,90^GB560,1,1^FS

^FO30,100^A0N,24,24^FD${i.toUpperCase()}${d?` / ${d} ${f||""}`:""}^FS

^FO20,130^GB560,1,1^FS

^FO30,140^A0N,20,20^FDManufacturing Date:^FS
^FO230,140^A0N,20,20^FD${a}^FS

^FO30,165^A0N,20,20^FDExpiry Date:^FS
^FO230,165^A0N,20,20^FD${o}^FS

${e.batchNumber?`
^FO30,190^A0N,20,20^FDBatch:^FS
^FO150,190^A0N,20,20^FD${e.batchNumber}^FS
`:""}

${n&&n!=="Quick Print"?`
^FO30,215^A0N,20,20^FDCategory:^FS
^FO150,215^A0N,20,20^FD${n}^FS
`:""}

${p?.foodSafetyRegistration?`
^FO30,240^A0N,20,20^FDFood Safety Reg:^FS
^FO200,240^A0N,20,20^FD${p.foodSafetyRegistration}^FS
`:""}

^FO20,270^GB560,1,1^FS

${h&&h.length>0?`
^FO30,280^A0N,18,18^FDAllergens:^FS
^FO30,300^A0N,16,16^FD${m.length>50?m.substring(0,50)+"...":m}^FS
^FO20,325^GB560,1,1^FS
`:""}

^FO30,${h&&h.length>0?"335":"280"}^A0N,20,20^FDPrepared By: ${l.toUpperCase()}^FS

^FO20,${h&&h.length>0?"365":"310"}^GB560,1,1^FS

${p?`
^FO30,${h&&h.length>0?"375":"320"}^A0N,18,18^FD${p.name.toUpperCase()}^FS
${p.phone?`^FO30,${h&&h.length>0?"395":"340"}^A0N,14,14^FDTel: ${p.phone}^FS`:""}
${j?`
^FO30,${h&&h.length>0?"415":"360"}^A0N,12,12^FD${j.split(`
`)[0]}^FS
^FO30,${h&&h.length>0?"430":"375"}^A0N,12,12^FD${j.split(`
`)[1]||""}^FS
`:""}
${p.foodSafetyRegistration?`^FO30,${h&&h.length>0?"445":"390"}^A0N,13,13^FDFood Safety Reg: ${p.foodSafetyRegistration}^FS`:""}
`:""}

${t?`^FO30,${p?.foodSafetyRegistration?h&&h.length>0?"465":"410":p?h&&h.length>0?"445":"390":h&&h.length>0?"390":"335"}^A0N,11,11^FD#${t.substring(0,8).toUpperCase()}^FS`:""}

^FO480,${h&&h.length>0?"380":"320"}^BQN,2,4^FDQA,${v}^FS

^XZ
`},Ou=async e=>{try{if(!e.preparedBy||e.preparedBy.trim()===""){const o=new Error("VALIDATION ERROR: prepared_by is a required field. Every label must identify who prepared it for food safety compliance and audit trail.");throw console.error(o.message,e),o}if(!e.organizationId||e.organizationId.trim()===""){const o=new Error("VALIDATION ERROR: organizationId is required for Row Level Security.");throw console.error(o.message,e),o}const t=e.allergens?.map(o=>o.name)||[],r=e.productId&&e.productId.trim()!==""?e.productId:null,n=e.categoryId&&e.categoryId.trim()!==""?e.categoryId:null,{data:i,error:a}=await Oe.from("printed_labels").insert({product_id:r,product_name:e.productName,category_id:n,category_name:e.categoryName,prepared_by:e.preparedBy,prepared_by_name:e.preparedByName,prep_date:e.prepDate,expiry_date:e.expiryDate,condition:e.condition,quantity:e.quantity||null,unit:e.unit||null,organization_id:e.organizationId,allergens:t.length>0?t:null}).select().single();if(a)throw console.error("Error saving label to database:",a),a;return console.log("Label saved to database:",i),i?.id||null}catch(t){throw console.error("Failed to save label:",t),t}},lH=async(e,t=1)=>new Promise((r,n)=>{try{const i=new WebSocket("ws://127.0.0.1:9100/");i.onopen=()=>{console.log("Connected to printer");const a=e.replace("^XZ",`^PQ${t}^XZ`);i.send(a),console.log("Label sent to printer")},i.onmessage=()=>{console.log("Printer acknowledged"),i.close(),r()},i.onclose=()=>{console.log("Printer connection closed"),r()},i.onerror=a=>{console.error("Printer WebSocket Error:",a),i.close(),n(new Error("Failed to connect to printer. Make sure Zebra Browser Print is running."))},setTimeout(()=>{i.readyState!==WebSocket.CLOSED&&(i.close(),n(new Error("Printer connection timeout")))},5e3)}catch(i){console.error("Error setting up printer connection:",i),n(i)}}),cH=async e=>{try{const t=await Ou(e),r={...e,labelId:t||void 0},n=oH(r),i=e.quantity?parseInt(e.quantity):1;return await lH(n,i),{success:!0,labelId:t||void 0}}catch(t){return console.error("Error printing label:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error occurred"}}};class uH{type="generic";name;capabilities;settings;constructor(t="Browser Print",r){this.name=t,this.settings={type:"generic",name:t,paperWidth:102,paperHeight:152,defaultQuantity:1,...r},this.capabilities={supportsZPL:!1,supportsPDF:!1,supportsColor:!0,maxWidth:1e3,maxHeight:1500}}async connect(){return!0}async disconnect(){}isConnected(){return!0}async print(t){try{const r=window.open("","_blank");if(!r)throw new Error("Popup blocked - please allow popups for printing");const n=await this.generateHTML(t);return r.document.write(n),r.document.close(),r.onload=()=>{r.print(),setTimeout(()=>r.close(),100)},!0}catch(r){return console.error("Browser print error:",r),!1}}async printBatch(t){try{const r=window.open("","_blank");if(!r)throw new Error("Popup blocked - please allow popups for printing");const n=await Promise.all(t.map(async(a,o)=>await this.generateHTML(a,!0)+(o<t.length-1?'<div class="page-break"></div>':""))),i=`
        <!DOCTYPE html>
        <html>
          <head>
            <style>
              @page { size: ${this.settings.paperWidth}mm ${this.settings.paperHeight}mm; margin: 0; }
              body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
              .page-break { page-break-after: always; }
            </style>
          </head>
          <body>${n.join("")}</body>
        </html>
      `;return r.document.write(i),r.document.close(),r.onload=()=>{r.print(),setTimeout(()=>r.close(),100)},!0}catch(r){return console.error("Browser batch print error:",r),!1}}getSettings(){return{...this.settings}}async updateSettings(t){this.settings={...this.settings,...t}}async getStatus(){return{isReady:!0,paperOut:!1}}async generateHTML(t,r=!1){try{const n=await this.convertToLabelPrintData(t),i=await Ou(n),a={labelId:i||void 0,categoryId:n.categoryId||"",categoryName:n.categoryName,subcategoryId:void 0,subcategoryName:t.subcategoryName,productId:n.productId,productName:n.productName,condition:n.condition,preparedBy:n.preparedBy,preparedByName:n.preparedByName,prepDate:n.prepDate,expiryDate:n.expiryDate,quantity:n.quantity||"",unit:n.unit||"",batchNumber:n.batchNumber,allergens:n.allergens,organizationDetails:n.organizationDetails},o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Failed to get canvas context");const d=600,f=848;o.width=d,o.height=f,await FW(l,a,d,f);const h=o.toDataURL("image/png"),{paperWidth:p,paperHeight:v}=this.settings,m=r?"":`
        <!DOCTYPE html>
        <html>
          <head>
            <style>
              @page { size: ${p}mm ${v}mm; margin: 0; }
              body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
              img { width: 100%; height: 100%; object-fit: contain; }
            </style>
          </head>
          <body>
      `,j=r?"":`
          </body>
        </html>
      `;return console.log(`Generic label rendered successfully. LabelId: ${i}`),`
        ${m}
        <div style="width: ${p}mm; height: ${v}mm; display: flex; align-items: center; justify-content: center;">
          <img src="${h}" alt="Label: ${a.productName}" />
        </div>
        ${j}
      `}catch(n){throw console.error("Error generating HTML for generic printer:",n),n}}async convertToLabelPrintData(t){const{data:{user:r}}=await Oe.auth.getUser();let n=t.organizationId,i=t.preparedBy,a=t.preparedByName;if(r&&(!n||!i)){const{data:f}=await Oe.from("profiles").select("organization_id, display_name").eq("user_id",r.id).single();f&&(n=n||f.organization_id,i=i||r.id,a=a||f.display_name||"Unknown")}if(!n)throw new Error("Organization ID is required for printing");if(!i||!a)throw new Error("Prepared by information is required for printing");let o;try{const{data:f}=await Oe.from("organizations").select("name, address, phone, email, food_safety_registration").eq("id",n).single();f&&(o={name:f.name,address:f.address||void 0,phone:f.phone||void 0,email:f.email||void 0,foodSafetyRegistration:f.food_safety_registration||void 0})}catch(f){console.warn("Could not fetch organization details:",f)}const l=t.condition||t.storageInstructions||"Refrigerate";return{productId:t.productId||null,productName:t.productName,categoryId:t.categoryId||null,categoryName:t.categoryName||"General",preparedBy:i,preparedByName:a,prepDate:t.preparedDate,expiryDate:t.useByDate,condition:l,organizationId:n,organizationDetails:o,quantity:t.quantity,unit:t.unit,batchNumber:t.barcode||"",allergens:t.allergens?.map(f=>({id:"",name:typeof f=="string"?f:f.name||"",icon:null,severity:"low"}))}}}function ln(e){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ln(e)}var Lo=Uint8Array,Na=Uint16Array,Nb=Int32Array,jb=new Lo([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Sb=new Lo([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ej=new Lo([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),t6=function(e,t){for(var r=new Na(31),n=0;n<31;++n)r[n]=t+=1<<e[n-1];for(var i=new Nb(r[30]),n=1;n<30;++n)for(var a=r[n];a<r[n+1];++a)i[a]=a-r[n]<<5|n;return{b:r,r:i}},r6=t6(jb,2),dH=r6.b,kw=r6.r;dH[28]=258,kw[258]=28;var fH=t6(Sb,0),Aj=fH.r,Cw=new Na(32768);for(var kn=0;kn<32768;++kn){var gu=(kn&43690)>>1|(kn&21845)<<1;gu=(gu&52428)>>2|(gu&13107)<<2,gu=(gu&61680)>>4|(gu&3855)<<4,Cw[kn]=((gu&65280)>>8|(gu&255)<<8)>>1}var tp=(function(e,t,r){for(var n=e.length,i=0,a=new Na(t);i<n;++i)e[i]&&++a[e[i]-1];var o=new Na(t);for(i=1;i<t;++i)o[i]=o[i-1]+a[i-1]<<1;var l;if(r){l=new Na(1<<t);var d=15-t;for(i=0;i<n;++i)if(e[i])for(var f=i<<4|e[i],h=t-e[i],p=o[e[i]-1]++<<h,v=p|(1<<h)-1;p<=v;++p)l[Cw[p]>>d]=f}else for(l=new Na(n),i=0;i<n;++i)e[i]&&(l[i]=Cw[o[e[i]-1]++]>>15-e[i]);return l}),Kd=new Lo(288);for(var kn=0;kn<144;++kn)Kd[kn]=8;for(var kn=144;kn<256;++kn)Kd[kn]=9;for(var kn=256;kn<280;++kn)Kd[kn]=7;for(var kn=280;kn<288;++kn)Kd[kn]=8;var Wv=new Lo(32);for(var kn=0;kn<32;++kn)Wv[kn]=5;var hH=tp(Kd,9,0),mH=tp(Wv,5,0),n6=function(e){return(e+7)/8|0},pH=function(e,t,r){return(r==null||r>e.length)&&(r=e.length),new Lo(e.subarray(t,r))},lc=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8},Fm=function(e,t,r){r<<=t&7;var n=t/8|0;e[n]|=r,e[n+1]|=r>>8,e[n+2]|=r>>16},t1=function(e,t){for(var r=[],n=0;n<e.length;++n)e[n]&&r.push({s:n,f:e[n]});var i=r.length,a=r.slice();if(!i)return{t:i6,l:0};if(i==1){var o=new Lo(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(D,M){return D.f-M.f}),r.push({s:-1,f:25001});var l=r[0],d=r[1],f=0,h=1,p=2;for(r[0]={s:-1,f:l.f+d.f,l,r:d};h!=i-1;)l=r[r[f].f<r[p].f?f++:p++],d=r[f!=h&&r[f].f<r[p].f?f++:p++],r[h++]={s:-1,f:l.f+d.f,l,r:d};for(var v=a[0].s,n=1;n<i;++n)a[n].s>v&&(v=a[n].s);var m=new Na(v+1),j=Ew(r[h-1],m,0);if(j>t){var n=0,w=0,_=j-t,S=1<<_;for(a.sort(function(M,F){return m[F.s]-m[M.s]||M.f-F.f});n<i;++n){var E=a[n].s;if(m[E]>t)w+=S-(1<<j-m[E]),m[E]=t;else break}for(w>>=_;w>0;){var k=a[n].s;m[k]<t?w-=1<<t-m[k]++-1:++n}for(;n>=0&&w;--n){var C=a[n].s;m[C]==t&&(--m[C],++w)}j=t}return{t:new Lo(m),l:j}},Ew=function(e,t,r){return e.s==-1?Math.max(Ew(e.l,t,r+1),Ew(e.r,t,r+1)):t[e.s]=r},Pj=function(e){for(var t=e.length;t&&!e[--t];);for(var r=new Na(++t),n=0,i=e[0],a=1,o=function(d){r[n++]=d},l=1;l<=t;++l)if(e[l]==i&&l!=t)++a;else{if(!i&&a>2){for(;a>138;a-=138)o(32754);a>2&&(o(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(o(i),--a;a>6;a-=6)o(8304);a>2&&(o(a-3<<5|8208),a=0)}for(;a--;)o(i);a=1,i=e[l]}return{c:r.subarray(0,n),n:t}},Bm=function(e,t){for(var r=0,n=0;n<t.length;++n)r+=e[n]*t[n];return r},s6=function(e,t,r){var n=r.length,i=n6(t+2);e[i]=n&255,e[i+1]=n>>8,e[i+2]=e[i]^255,e[i+3]=e[i+1]^255;for(var a=0;a<n;++a)e[i+a+4]=r[a];return(i+4+n)*8},Tj=function(e,t,r,n,i,a,o,l,d,f,h){lc(t,h++,r),++i[256];for(var p=t1(i,15),v=p.t,m=p.l,j=t1(a,15),w=j.t,_=j.l,S=Pj(v),E=S.c,k=S.n,C=Pj(w),D=C.c,M=C.n,F=new Na(19),U=0;U<E.length;++U)++F[E[U]&31];for(var U=0;U<D.length;++U)++F[D[U]&31];for(var I=t1(F,7),K=I.t,B=I.l,O=19;O>4&&!K[Ej[O-1]];--O);var z=f+5<<3,q=Bm(i,Kd)+Bm(a,Wv)+o,ue=Bm(i,v)+Bm(a,w)+o+14+3*O+Bm(F,K)+2*F[16]+3*F[17]+7*F[18];if(d>=0&&z<=q&&z<=ue)return s6(t,h,e.subarray(d,d+f));var ie,le,G,se;if(lc(t,h,1+(ue<q)),h+=2,ue<q){ie=tp(v,m,0),le=v,G=tp(w,_,0),se=w;var xe=tp(K,B,0);lc(t,h,k-257),lc(t,h+5,M-1),lc(t,h+10,O-4),h+=14;for(var U=0;U<O;++U)lc(t,h+3*U,K[Ej[U]]);h+=3*O;for(var te=[E,D],R=0;R<2;++R)for(var V=te[R],U=0;U<V.length;++U){var Q=V[U]&31;lc(t,h,xe[Q]),h+=K[Q],Q>15&&(lc(t,h,V[U]>>5&127),h+=V[U]>>12)}}else ie=hH,le=Kd,G=mH,se=Wv;for(var U=0;U<l;++U){var re=n[U];if(re>255){var Q=re>>18&31;Fm(t,h,ie[Q+257]),h+=le[Q+257],Q>7&&(lc(t,h,re>>23&31),h+=jb[Q]);var Z=re&31;Fm(t,h,G[Z]),h+=se[Z],Z>3&&(Fm(t,h,re>>5&8191),h+=Sb[Z])}else Fm(t,h,ie[re]),h+=le[re]}return Fm(t,h,ie[256]),h+le[256]},gH=new Nb([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),i6=new Lo(0),vH=function(e,t,r,n,i,a){var o=a.z||e.length,l=new Lo(n+o+5*(1+Math.ceil(o/7e3))+i),d=l.subarray(n,l.length-i),f=a.l,h=(a.r||0)&7;if(t){h&&(d[0]=a.r>>3);for(var p=gH[t-1],v=p>>13,m=p&8191,j=(1<<r)-1,w=a.p||new Na(32768),_=a.h||new Na(j+1),S=Math.ceil(r/3),E=2*S,k=function(qe){return(e[qe]^e[qe+1]<<S^e[qe+2]<<E)&j},C=new Nb(25e3),D=new Na(288),M=new Na(32),F=0,U=0,I=a.i||0,K=0,B=a.w||0,O=0;I+2<o;++I){var z=k(I),q=I&32767,ue=_[z];if(w[q]=ue,_[z]=q,B<=I){var ie=o-I;if((F>7e3||K>24576)&&(ie>423||!f)){h=Tj(e,d,0,C,D,M,U,K,O,I-O,h),K=F=U=0,O=I;for(var le=0;le<286;++le)D[le]=0;for(var le=0;le<30;++le)M[le]=0}var G=2,se=0,xe=m,te=q-ue&32767;if(ie>2&&z==k(I-te))for(var R=Math.min(v,ie)-1,V=Math.min(32767,I),Q=Math.min(258,ie);te<=V&&--xe&&q!=ue;){if(e[I+G]==e[I+G-te]){for(var re=0;re<Q&&e[I+re]==e[I+re-te];++re);if(re>G){if(G=re,se=te,re>R)break;for(var Z=Math.min(te,re-2),X=0,le=0;le<Z;++le){var pe=I-te+le&32767,ce=w[pe],we=pe-ce&32767;we>X&&(X=we,ue=pe)}}}q=ue,ue=w[q],te+=q-ue&32767}if(se){C[K++]=268435456|kw[G]<<18|Aj[se];var Pe=kw[G]&31,ze=Aj[se]&31;U+=jb[Pe]+Sb[ze],++D[257+Pe],++M[ze],B=I+G,++F}else C[K++]=e[I],++D[e[I]]}}for(I=Math.max(I,B);I<o;++I)C[K++]=e[I],++D[e[I]];h=Tj(e,d,f,C,D,M,U,K,O,I-O,h),f||(a.r=h&7|d[h/8|0]<<3,h-=7,a.h=_,a.p=w,a.i=I,a.w=B)}else{for(var I=a.w||0;I<o+f;I+=65535){var ve=I+65535;ve>=o&&(d[h/8|0]=f,ve=o),h=s6(d,h+1,e.subarray(I,ve))}a.i=o}return pH(l,0,n+n6(h)+i)},a6=function(){var e=1,t=0;return{p:function(r){for(var n=e,i=t,a=r.length|0,o=0;o!=a;){for(var l=Math.min(o+2655,a);o<l;++o)i+=n+=r[o];n=(n&65535)+15*(n>>16),i=(i&65535)+15*(i>>16)}e=n,t=i},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},yH=function(e,t,r,n,i){if(!i&&(i={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),o=new Lo(a.length+e.length);o.set(a),o.set(e,a.length),e=o,i.w=a.length}return vH(e,t.level==null?6:t.level,t.mem==null?i.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,r,n,i)},o6=function(e,t,r){for(;r;++t)e[t]=r,r>>>=8},xH=function(e,t){var r=t.level,n=r==0?0:r<6?1:r==9?3:2;if(e[0]=120,e[1]=n<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var i=a6();i.p(t.dictionary),o6(e,2,i.d())}};function Aw(e,t){t||(t={});var r=a6();r.p(e);var n=yH(e,t,t.dictionary?6:2,4);return xH(n,t),o6(n,n.length-4,r.d()),n}var wH=typeof TextDecoder<"u"&&new TextDecoder,bH=0;try{wH.decode(i6,{stream:!0}),bH=1}catch{}function _H(e){if(Array.isArray(e))return e}function NH(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,a,o,l=[],d=!0,f=!1;try{if(a=(r=r.call(e)).next,t!==0)for(;!(d=(n=a.call(r)).done)&&(l.push(n.value),l.length!==t);d=!0);}catch(h){f=!0,i=h}finally{try{if(!d&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(f)throw i}}return l}}function Rj(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function jH(e,t){if(e){if(typeof e=="string")return Rj(e,t);var r={}.toString.call(e).slice(8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Array.from(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Rj(e,t):void 0}}function SH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lj(e,t){return _H(e)||NH(e,t)||jH(e,t)||SH()}function Dj(e,t="utf8"){return new TextDecoder(t).decode(e)}const kH=new TextEncoder;function CH(e){return kH.encode(e)}const EH=1024*8,AH=(()=>{const e=new Uint8Array(4),t=new Uint32Array(e.buffer);return!((t[0]=1)&e[0])})(),r1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class kb{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(t=EH,r={}){let n=!1;typeof t=="number"?t=new ArrayBuffer(t):(n=!0,this.lastWrittenByte=t.byteLength);const i=r.offset?r.offset>>>0:0,a=t.byteLength-i;let o=i;(ArrayBuffer.isView(t)||t instanceof kb)&&(t.byteLength!==t.buffer.byteLength&&(o=t.byteOffset+i),t=t.buffer),n?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=t,this.length=a,this.byteLength=a,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,a),this._mark=0,this._marks=[]}available(t=1){return this.offset+t<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(t=1){return this.offset+=t,this}back(t=1){return this.offset-=t,this}seek(t){return this.offset=t,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const t=this._marks.pop();if(t===void 0)throw new Error("Mark stack empty");return this.seek(t),this}rewind(){return this.offset=0,this}ensureAvailable(t=1){if(!this.available(t)){const n=(this.offset+t)*2,i=new Uint8Array(n);i.set(new Uint8Array(this.buffer)),this.buffer=i.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(t=1){return this.readArray(t,"uint8")}readArray(t,r){const n=r1[r].BYTES_PER_ELEMENT*t,i=this.byteOffset+this.offset,a=this.buffer.slice(i,i+n);if(this.littleEndian===AH&&r!=="uint8"&&r!=="int8"){const l=new Uint8Array(this.buffer.slice(i,i+n));l.reverse();const d=new r1[r](l.buffer);return this.offset+=n,d.reverse(),d}const o=new r1[r](a);return this.offset+=n,o}readInt16(){const t=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,t}readUint16(){const t=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,t}readInt32(){const t=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,t}readUint32(){const t=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat32(){const t=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,t}readFloat64(){const t=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,t}readBigInt64(){const t=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,t}readBigUint64(){const t=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,t}readChar(){return String.fromCharCode(this.readInt8())}readChars(t=1){let r="";for(let n=0;n<t;n++)r+=this.readChar();return r}readUtf8(t=1){return Dj(this.readBytes(t))}decodeText(t=1,r="utf8"){return Dj(this.readBytes(t),r)}writeBoolean(t){return this.writeUint8(t?255:0),this}writeInt8(t){return this.ensureAvailable(1),this._data.setInt8(this.offset++,t),this._updateLastWrittenByte(),this}writeUint8(t){return this.ensureAvailable(1),this._data.setUint8(this.offset++,t),this._updateLastWrittenByte(),this}writeByte(t){return this.writeUint8(t)}writeBytes(t){this.ensureAvailable(t.length);for(let r=0;r<t.length;r++)this._data.setUint8(this.offset++,t[r]);return this._updateLastWrittenByte(),this}writeInt16(t){return this.ensureAvailable(2),this._data.setInt16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(t){return this.ensureAvailable(2),this._data.setUint16(this.offset,t,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(t){return this.ensureAvailable(4),this._data.setInt32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(t){return this.ensureAvailable(4),this._data.setUint32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(t){return this.ensureAvailable(4),this._data.setFloat32(this.offset,t,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(t){return this.ensureAvailable(8),this._data.setFloat64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(t){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(t){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,t,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(t){return this.writeUint8(t.charCodeAt(0))}writeChars(t){for(let r=0;r<t.length;r++)this.writeUint8(t.charCodeAt(r));return this}writeUtf8(t){return this.writeBytes(CH(t))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function em(e){let t=e.length;for(;--t>=0;)e[t]=0}const PH=3,TH=258,l6=29,RH=256,LH=RH+1+l6,c6=30,DH=512,IH=new Array((LH+2)*2);em(IH);const OH=new Array(c6*2);em(OH);const MH=new Array(DH);em(MH);const FH=new Array(TH-PH+1);em(FH);const BH=new Array(l6);em(BH);const UH=new Array(c6);em(UH);const $H=(e,t,r,n)=>{let i=e&65535|0,a=e>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do i=i+t[n++]|0,a=a+i|0;while(--o);i%=65521,a%=65521}return i|a<<16|0};var Pw=$H;const zH=()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t},qH=new Uint32Array(zH()),VH=(e,t,r,n)=>{const i=qH,a=n+r;e^=-1;for(let o=n;o<a;o++)e=e>>>8^i[(e^t[o])&255];return e^-1};var sl=VH,Tw={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},u6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const WH=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var HH=function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)WH(r,n)&&(e[n]=r[n])}}return e},GH=e=>{let t=0;for(let n=0,i=e.length;n<i;n++)t+=e[n].length;const r=new Uint8Array(t);for(let n=0,i=0,a=e.length;n<a;n++){let o=e[n];r.set(o,i),i+=o.length}return r},d6={assign:HH,flattenChunks:GH};let f6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{f6=!1}const _p=new Uint8Array(256);for(let e=0;e<256;e++)_p[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;_p[254]=_p[254]=1;var KH=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,i,a,o=e.length,l=0;for(i=0;i<o;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(l),a=0,i=0;a<l;i++)r=e.charCodeAt(i),(r&64512)===55296&&i+1<o&&(n=e.charCodeAt(i+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),i++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};const YH=(e,t)=>{if(t<65534&&e.subarray&&f6)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r};var QH=(e,t)=>{const r=t||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let n,i;const a=new Array(r*2);for(i=0,n=0;n<r;){let o=e[n++];if(o<128){a[i++]=o;continue}let l=_p[o];if(l>4){a[i++]=65533,n+=l-1;continue}for(o&=l===2?31:l===3?15:7;l>1&&n<r;)o=o<<6|e[n++]&63,l--;if(l>1){a[i++]=65533;continue}o<65536?a[i++]=o:(o-=65536,a[i++]=55296|o>>10&1023,a[i++]=56320|o&1023)}return YH(a,i)},JH=(e,t)=>{t=t||e.length,t>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+_p[e[r]]>t?r:t},Rw={string2buf:KH,buf2string:QH,utf8border:JH};function ZH(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var XH=ZH;const Jg=16209,eG=16191;var tG=function(t,r){let n,i,a,o,l,d,f,h,p,v,m,j,w,_,S,E,k,C,D,M,F,U,I,K;const B=t.state;n=t.next_in,I=t.input,i=n+(t.avail_in-5),a=t.next_out,K=t.output,o=a-(r-t.avail_out),l=a+(t.avail_out-257),d=B.dmax,f=B.wsize,h=B.whave,p=B.wnext,v=B.window,m=B.hold,j=B.bits,w=B.lencode,_=B.distcode,S=(1<<B.lenbits)-1,E=(1<<B.distbits)-1;e:do{j<15&&(m+=I[n++]<<j,j+=8,m+=I[n++]<<j,j+=8),k=w[m&S];t:for(;;){if(C=k>>>24,m>>>=C,j-=C,C=k>>>16&255,C===0)K[a++]=k&65535;else if(C&16){D=k&65535,C&=15,C&&(j<C&&(m+=I[n++]<<j,j+=8),D+=m&(1<<C)-1,m>>>=C,j-=C),j<15&&(m+=I[n++]<<j,j+=8,m+=I[n++]<<j,j+=8),k=_[m&E];r:for(;;){if(C=k>>>24,m>>>=C,j-=C,C=k>>>16&255,C&16){if(M=k&65535,C&=15,j<C&&(m+=I[n++]<<j,j+=8,j<C&&(m+=I[n++]<<j,j+=8)),M+=m&(1<<C)-1,M>d){t.msg="invalid distance too far back",B.mode=Jg;break e}if(m>>>=C,j-=C,C=a-o,M>C){if(C=M-C,C>h&&B.sane){t.msg="invalid distance too far back",B.mode=Jg;break e}if(F=0,U=v,p===0){if(F+=f-C,C<D){D-=C;do K[a++]=v[F++];while(--C);F=a-M,U=K}}else if(p<C){if(F+=f+p-C,C-=p,C<D){D-=C;do K[a++]=v[F++];while(--C);if(F=0,p<D){C=p,D-=C;do K[a++]=v[F++];while(--C);F=a-M,U=K}}}else if(F+=p-C,C<D){D-=C;do K[a++]=v[F++];while(--C);F=a-M,U=K}for(;D>2;)K[a++]=U[F++],K[a++]=U[F++],K[a++]=U[F++],D-=3;D&&(K[a++]=U[F++],D>1&&(K[a++]=U[F++]))}else{F=a-M;do K[a++]=K[F++],K[a++]=K[F++],K[a++]=K[F++],D-=3;while(D>2);D&&(K[a++]=K[F++],D>1&&(K[a++]=K[F++]))}}else if((C&64)===0){k=_[(k&65535)+(m&(1<<C)-1)];continue r}else{t.msg="invalid distance code",B.mode=Jg;break e}break}}else if((C&64)===0){k=w[(k&65535)+(m&(1<<C)-1)];continue t}else if(C&32){B.mode=eG;break e}else{t.msg="invalid literal/length code",B.mode=Jg;break e}break}}while(n<i&&a<l);D=j>>3,n-=D,j-=D<<3,m&=(1<<j)-1,t.next_in=n,t.next_out=a,t.avail_in=n<i?5+(i-n):5-(n-i),t.avail_out=a<l?257+(l-a):257-(a-l),B.hold=m,B.bits=j};const Qf=15,Ij=852,Oj=592,Mj=0,n1=1,Fj=2,rG=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),nG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),sG=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iG=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),aG=(e,t,r,n,i,a,o,l)=>{const d=l.bits;let f=0,h=0,p=0,v=0,m=0,j=0,w=0,_=0,S=0,E=0,k,C,D,M,F,U=null,I;const K=new Uint16Array(Qf+1),B=new Uint16Array(Qf+1);let O=null,z,q,ue;for(f=0;f<=Qf;f++)K[f]=0;for(h=0;h<n;h++)K[t[r+h]]++;for(m=d,v=Qf;v>=1&&K[v]===0;v--);if(m>v&&(m=v),v===0)return i[a++]=1<<24|64<<16|0,i[a++]=1<<24|64<<16|0,l.bits=1,0;for(p=1;p<v&&K[p]===0;p++);for(m<p&&(m=p),_=1,f=1;f<=Qf;f++)if(_<<=1,_-=K[f],_<0)return-1;if(_>0&&(e===Mj||v!==1))return-1;for(B[1]=0,f=1;f<Qf;f++)B[f+1]=B[f]+K[f];for(h=0;h<n;h++)t[r+h]!==0&&(o[B[t[r+h]]++]=h);if(e===Mj?(U=O=o,I=20):e===n1?(U=rG,O=nG,I=257):(U=sG,O=iG,I=0),E=0,h=0,f=p,F=a,j=m,w=0,D=-1,S=1<<m,M=S-1,e===n1&&S>Ij||e===Fj&&S>Oj)return 1;for(;;){z=f-w,o[h]+1<I?(q=0,ue=o[h]):o[h]>=I?(q=O[o[h]-I],ue=U[o[h]-I]):(q=96,ue=0),k=1<<f-w,C=1<<j,p=C;do C-=k,i[F+(E>>w)+C]=z<<24|q<<16|ue|0;while(C!==0);for(k=1<<f-1;E&k;)k>>=1;if(k!==0?(E&=k-1,E+=k):E=0,h++,--K[f]===0){if(f===v)break;f=t[r+o[h]]}if(f>m&&(E&M)!==D){for(w===0&&(w=m),F+=p,j=f-w,_=1<<j;j+w<v&&(_-=K[j+w],!(_<=0));)j++,_<<=1;if(S+=1<<j,e===n1&&S>Ij||e===Fj&&S>Oj)return 1;D=E&M,i[D]=m<<24|j<<16|F-a|0}}return E!==0&&(i[F+E]=f-w<<24|64<<16|0),l.bits=m,0};var rp=aG;const oG=0,h6=1,m6=2,{Z_FINISH:Bj,Z_BLOCK:lG,Z_TREES:Zg,Z_OK:Yd,Z_STREAM_END:cG,Z_NEED_DICT:uG,Z_STREAM_ERROR:Qa,Z_DATA_ERROR:p6,Z_MEM_ERROR:g6,Z_BUF_ERROR:dG,Z_DEFLATED:Uj}=u6,Z0=16180,$j=16181,zj=16182,qj=16183,Vj=16184,Wj=16185,Hj=16186,Gj=16187,Kj=16188,Yj=16189,Hv=16190,cc=16191,s1=16192,Qj=16193,i1=16194,Jj=16195,Zj=16196,Xj=16197,eS=16198,Xg=16199,ev=16200,tS=16201,rS=16202,nS=16203,sS=16204,iS=16205,a1=16206,aS=16207,oS=16208,Rn=16209,v6=16210,y6=16211,fG=852,hG=592,mG=15,pG=mG,lS=e=>(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24);function gG(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const cf=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<Z0||t.mode>y6?1:0},x6=e=>{if(cf(e))return Qa;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=Z0,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(fG),t.distcode=t.distdyn=new Int32Array(hG),t.sane=1,t.back=-1,Yd},w6=e=>{if(cf(e))return Qa;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,x6(e)},b6=(e,t)=>{let r;if(cf(e))return Qa;const n=e.state;return t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15)?Qa:(n.window!==null&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,w6(e))},_6=(e,t)=>{if(!e)return Qa;const r=new gG;e.state=r,r.strm=e,r.window=null,r.mode=Z0;const n=b6(e,t);return n!==Yd&&(e.state=null),n},vG=e=>_6(e,pG);let cS=!0,o1,l1;const yG=e=>{if(cS){o1=new Int32Array(512),l1=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(rp(h6,e.lens,0,288,o1,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;rp(m6,e.lens,0,32,l1,0,e.work,{bits:5}),cS=!1}e.lencode=o1,e.lenbits=9,e.distcode=l1,e.distbits=5},N6=(e,t,r,n)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),n>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>n&&(i=n),a.window.set(t.subarray(r-n,r-n+i),a.wnext),n-=i,n?(a.window.set(t.subarray(r-n,r),0),a.wnext=n,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0},xG=(e,t)=>{let r,n,i,a,o,l,d,f,h,p,v,m,j,w,_=0,S,E,k,C,D,M,F,U;const I=new Uint8Array(4);let K,B;const O=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(cf(e)||!e.output||!e.input&&e.avail_in!==0)return Qa;r=e.state,r.mode===cc&&(r.mode=s1),o=e.next_out,i=e.output,d=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,f=r.hold,h=r.bits,p=l,v=d,U=Yd;e:for(;;)switch(r.mode){case Z0:if(r.wrap===0){r.mode=s1;break}for(;h<16;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(r.wrap&2&&f===35615){r.wbits===0&&(r.wbits=15),r.check=0,I[0]=f&255,I[1]=f>>>8&255,r.check=sl(r.check,I,2,0),f=0,h=0,r.mode=$j;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((f&255)<<8)+(f>>8))%31){e.msg="incorrect header check",r.mode=Rn;break}if((f&15)!==Uj){e.msg="unknown compression method",r.mode=Rn;break}if(f>>>=4,h-=4,F=(f&15)+8,r.wbits===0&&(r.wbits=F),F>15||F>r.wbits){e.msg="invalid window size",r.mode=Rn;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=f&512?Yj:cc,f=0,h=0;break;case $j:for(;h<16;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(r.flags=f,(r.flags&255)!==Uj){e.msg="unknown compression method",r.mode=Rn;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=Rn;break}r.head&&(r.head.text=f>>8&1),r.flags&512&&r.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,r.check=sl(r.check,I,2,0)),f=0,h=0,r.mode=zj;case zj:for(;h<32;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}r.head&&(r.head.time=f),r.flags&512&&r.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,I[2]=f>>>16&255,I[3]=f>>>24&255,r.check=sl(r.check,I,4,0)),f=0,h=0,r.mode=qj;case qj:for(;h<16;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}r.head&&(r.head.xflags=f&255,r.head.os=f>>8),r.flags&512&&r.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,r.check=sl(r.check,I,2,0)),f=0,h=0,r.mode=Vj;case Vj:if(r.flags&1024){for(;h<16;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}r.length=f,r.head&&(r.head.extra_len=f),r.flags&512&&r.wrap&4&&(I[0]=f&255,I[1]=f>>>8&255,r.check=sl(r.check,I,2,0)),f=0,h=0}else r.head&&(r.head.extra=null);r.mode=Wj;case Wj:if(r.flags&1024&&(m=r.length,m>l&&(m=l),m&&(r.head&&(F=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(a,a+m),F)),r.flags&512&&r.wrap&4&&(r.check=sl(r.check,n,m,a)),l-=m,a+=m,r.length-=m),r.length))break e;r.length=0,r.mode=Hj;case Hj:if(r.flags&2048){if(l===0)break e;m=0;do F=n[a+m++],r.head&&F&&r.length<65536&&(r.head.name+=String.fromCharCode(F));while(F&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=sl(r.check,n,m,a)),l-=m,a+=m,F)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Gj;case Gj:if(r.flags&4096){if(l===0)break e;m=0;do F=n[a+m++],r.head&&F&&r.length<65536&&(r.head.comment+=String.fromCharCode(F));while(F&&m<l);if(r.flags&512&&r.wrap&4&&(r.check=sl(r.check,n,m,a)),l-=m,a+=m,F)break e}else r.head&&(r.head.comment=null);r.mode=Kj;case Kj:if(r.flags&512){for(;h<16;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(r.wrap&4&&f!==(r.check&65535)){e.msg="header crc mismatch",r.mode=Rn;break}f=0,h=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=cc;break;case Yj:for(;h<32;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}e.adler=r.check=lS(f),f=0,h=0,r.mode=Hv;case Hv:if(r.havedict===0)return e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=l,r.hold=f,r.bits=h,uG;e.adler=r.check=1,r.mode=cc;case cc:if(t===lG||t===Zg)break e;case s1:if(r.last){f>>>=h&7,h-=h&7,r.mode=a1;break}for(;h<3;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}switch(r.last=f&1,f>>>=1,h-=1,f&3){case 0:r.mode=Qj;break;case 1:if(yG(r),r.mode=Xg,t===Zg){f>>>=2,h-=2;break e}break;case 2:r.mode=Zj;break;case 3:e.msg="invalid block type",r.mode=Rn}f>>>=2,h-=2;break;case Qj:for(f>>>=h&7,h-=h&7;h<32;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if((f&65535)!==(f>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Rn;break}if(r.length=f&65535,f=0,h=0,r.mode=i1,t===Zg)break e;case i1:r.mode=Jj;case Jj:if(m=r.length,m){if(m>l&&(m=l),m>d&&(m=d),m===0)break e;i.set(n.subarray(a,a+m),o),l-=m,a+=m,d-=m,o+=m,r.length-=m;break}r.mode=cc;break;case Zj:for(;h<14;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(r.nlen=(f&31)+257,f>>>=5,h-=5,r.ndist=(f&31)+1,f>>>=5,h-=5,r.ncode=(f&15)+4,f>>>=4,h-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Rn;break}r.have=0,r.mode=Xj;case Xj:for(;r.have<r.ncode;){for(;h<3;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}r.lens[O[r.have++]]=f&7,f>>>=3,h-=3}for(;r.have<19;)r.lens[O[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,K={bits:r.lenbits},U=rp(oG,r.lens,0,19,r.lencode,0,r.work,K),r.lenbits=K.bits,U){e.msg="invalid code lengths set",r.mode=Rn;break}r.have=0,r.mode=eS;case eS:for(;r.have<r.nlen+r.ndist;){for(;_=r.lencode[f&(1<<r.lenbits)-1],S=_>>>24,E=_>>>16&255,k=_&65535,!(S<=h);){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(k<16)f>>>=S,h-=S,r.lens[r.have++]=k;else{if(k===16){for(B=S+2;h<B;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(f>>>=S,h-=S,r.have===0){e.msg="invalid bit length repeat",r.mode=Rn;break}F=r.lens[r.have-1],m=3+(f&3),f>>>=2,h-=2}else if(k===17){for(B=S+3;h<B;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}f>>>=S,h-=S,F=0,m=3+(f&7),f>>>=3,h-=3}else{for(B=S+7;h<B;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}f>>>=S,h-=S,F=0,m=11+(f&127),f>>>=7,h-=7}if(r.have+m>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Rn;break}for(;m--;)r.lens[r.have++]=F}}if(r.mode===Rn)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=Rn;break}if(r.lenbits=9,K={bits:r.lenbits},U=rp(h6,r.lens,0,r.nlen,r.lencode,0,r.work,K),r.lenbits=K.bits,U){e.msg="invalid literal/lengths set",r.mode=Rn;break}if(r.distbits=6,r.distcode=r.distdyn,K={bits:r.distbits},U=rp(m6,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,K),r.distbits=K.bits,U){e.msg="invalid distances set",r.mode=Rn;break}if(r.mode=Xg,t===Zg)break e;case Xg:r.mode=ev;case ev:if(l>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=l,r.hold=f,r.bits=h,tG(e,v),o=e.next_out,i=e.output,d=e.avail_out,a=e.next_in,n=e.input,l=e.avail_in,f=r.hold,h=r.bits,r.mode===cc&&(r.back=-1);break}for(r.back=0;_=r.lencode[f&(1<<r.lenbits)-1],S=_>>>24,E=_>>>16&255,k=_&65535,!(S<=h);){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(E&&(E&240)===0){for(C=S,D=E,M=k;_=r.lencode[M+((f&(1<<C+D)-1)>>C)],S=_>>>24,E=_>>>16&255,k=_&65535,!(C+S<=h);){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}f>>>=C,h-=C,r.back+=C}if(f>>>=S,h-=S,r.back+=S,r.length=k,E===0){r.mode=iS;break}if(E&32){r.back=-1,r.mode=cc;break}if(E&64){e.msg="invalid literal/length code",r.mode=Rn;break}r.extra=E&15,r.mode=tS;case tS:if(r.extra){for(B=r.extra;h<B;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}r.length+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=rS;case rS:for(;_=r.distcode[f&(1<<r.distbits)-1],S=_>>>24,E=_>>>16&255,k=_&65535,!(S<=h);){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if((E&240)===0){for(C=S,D=E,M=k;_=r.distcode[M+((f&(1<<C+D)-1)>>C)],S=_>>>24,E=_>>>16&255,k=_&65535,!(C+S<=h);){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}f>>>=C,h-=C,r.back+=C}if(f>>>=S,h-=S,r.back+=S,E&64){e.msg="invalid distance code",r.mode=Rn;break}r.offset=k,r.extra=E&15,r.mode=nS;case nS:if(r.extra){for(B=r.extra;h<B;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}r.offset+=f&(1<<r.extra)-1,f>>>=r.extra,h-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Rn;break}r.mode=sS;case sS:if(d===0)break e;if(m=v-d,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Rn;break}m>r.wnext?(m-=r.wnext,j=r.wsize-m):j=r.wnext-m,m>r.length&&(m=r.length),w=r.window}else w=i,j=o-r.offset,m=r.length;m>d&&(m=d),d-=m,r.length-=m;do i[o++]=w[j++];while(--m);r.length===0&&(r.mode=ev);break;case iS:if(d===0)break e;i[o++]=r.length,d--,r.mode=ev;break;case a1:if(r.wrap){for(;h<32;){if(l===0)break e;l--,f|=n[a++]<<h,h+=8}if(v-=d,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?sl(r.check,i,v,o-v):Pw(r.check,i,v,o-v)),v=d,r.wrap&4&&(r.flags?f:lS(f))!==r.check){e.msg="incorrect data check",r.mode=Rn;break}f=0,h=0}r.mode=aS;case aS:if(r.wrap&&r.flags){for(;h<32;){if(l===0)break e;l--,f+=n[a++]<<h,h+=8}if(r.wrap&4&&f!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=Rn;break}f=0,h=0}r.mode=oS;case oS:U=cG;break e;case Rn:U=p6;break e;case v6:return g6;case y6:default:return Qa}return e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=l,r.hold=f,r.bits=h,(r.wsize||v!==e.avail_out&&r.mode<Rn&&(r.mode<a1||t!==Bj))&&N6(e,e.output,e.next_out,v-e.avail_out),p-=e.avail_in,v-=e.avail_out,e.total_in+=p,e.total_out+=v,r.total+=v,r.wrap&4&&v&&(e.adler=r.check=r.flags?sl(r.check,i,v,e.next_out-v):Pw(r.check,i,v,e.next_out-v)),e.data_type=r.bits+(r.last?64:0)+(r.mode===cc?128:0)+(r.mode===Xg||r.mode===i1?256:0),(p===0&&v===0||t===Bj)&&U===Yd&&(U=dG),U},wG=e=>{if(cf(e))return Qa;let t=e.state;return t.window&&(t.window=null),e.state=null,Yd},bG=(e,t)=>{if(cf(e))return Qa;const r=e.state;return(r.wrap&2)===0?Qa:(r.head=t,t.done=!1,Yd)},_G=(e,t)=>{const r=t.length;let n,i,a;return cf(e)||(n=e.state,n.wrap!==0&&n.mode!==Hv)?Qa:n.mode===Hv&&(i=1,i=Pw(i,t,r,0),i!==n.check)?p6:(a=N6(e,t,r,r),a?(n.mode=v6,g6):(n.havedict=1,Yd))};var NG=w6,jG=b6,SG=x6,kG=vG,CG=_6,EG=xG,AG=wG,PG=bG,TG=_G,RG="pako inflate (from Nodeca project)",vc={inflateReset:NG,inflateReset2:jG,inflateResetKeep:SG,inflateInit:kG,inflateInit2:CG,inflate:EG,inflateEnd:AG,inflateGetHeader:PG,inflateSetDictionary:TG,inflateInfo:RG};function LG(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var DG=LG;const j6=Object.prototype.toString,{Z_NO_FLUSH:IG,Z_FINISH:OG,Z_OK:Np,Z_STREAM_END:c1,Z_NEED_DICT:u1,Z_STREAM_ERROR:MG,Z_DATA_ERROR:uS,Z_MEM_ERROR:FG}=u6;function Bp(e){this.options=d6.assign({chunkSize:1024*64,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15)===0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new XH,this.strm.avail_out=0;let r=vc.inflateInit2(this.strm,t.windowBits);if(r!==Np)throw new Error(Tw[r]);if(this.header=new DG,vc.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Rw.string2buf(t.dictionary):j6.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=vc.inflateSetDictionary(this.strm,t.dictionary),r!==Np)))throw new Error(Tw[r])}Bp.prototype.push=function(e,t){const r=this.strm,n=this.options.chunkSize,i=this.options.dictionary;let a,o,l;if(this.ended)return!1;for(t===~~t?o=t:o=t===!0?OG:IG,j6.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),a=vc.inflate(r,o),a===u1&&i&&(a=vc.inflateSetDictionary(r,i),a===Np?a=vc.inflate(r,o):a===uS&&(a=u1));r.avail_in>0&&a===c1&&r.state.wrap>0&&e[r.next_in]!==0;)vc.inflateReset(r),a=vc.inflate(r,o);switch(a){case MG:case uS:case u1:case FG:return this.onEnd(a),this.ended=!0,!1}if(l=r.avail_out,r.next_out&&(r.avail_out===0||a===c1))if(this.options.to==="string"){let d=Rw.utf8border(r.output,r.next_out),f=r.next_out-d,h=Rw.buf2string(r.output,d);r.next_out=f,r.avail_out=n-f,f&&r.output.set(r.output.subarray(d,d+f),0),this.onData(h)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(a===Np&&l===0)){if(a===c1)return a=vc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Bp.prototype.onData=function(e){this.chunks.push(e)};Bp.prototype.onEnd=function(e){e===Np&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=d6.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function BG(e,t){const r=new Bp(t);if(r.push(e),r.err)throw r.msg||Tw[r.err];return r.result}var UG=Bp,$G=BG,zG={Inflate:UG,inflate:$G};const{Inflate:qG,inflate:VG}=zG;var dS=qG,WG=VG;const S6=[];for(let e=0;e<256;e++){let t=e;for(let r=0;r<8;r++)t&1?t=3988292384^t>>>1:t=t>>>1;S6[e]=t}const fS=4294967295;function HG(e,t,r){let n=e;for(let i=0;i<r;i++)n=S6[(n^t[i])&255]^n>>>8;return n}function GG(e,t){return(HG(fS,e,t)^fS)>>>0}function hS(e,t,r){const n=e.readUint32(),i=GG(new Uint8Array(e.buffer,e.byteOffset+e.offset-t-4,t),t);if(i!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${i}`)}function k6(e,t,r){for(let n=0;n<r;n++)t[n]=e[n]}function C6(e,t,r,n){let i=0;for(;i<n;i++)t[i]=e[i];for(;i<r;i++)t[i]=e[i]+t[i-n]&255}function E6(e,t,r,n){let i=0;if(r.length===0)for(;i<n;i++)t[i]=e[i];else for(;i<n;i++)t[i]=e[i]+r[i]&255}function A6(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+(t[a-i]>>1)&255}else{for(;a<i;a++)t[a]=e[a]+(r[a]>>1)&255;for(;a<n;a++)t[a]=e[a]+(t[a-i]+r[a]>>1)&255}}function P6(e,t,r,n,i){let a=0;if(r.length===0){for(;a<i;a++)t[a]=e[a];for(;a<n;a++)t[a]=e[a]+t[a-i]&255}else{for(;a<i;a++)t[a]=e[a]+r[a]&255;for(;a<n;a++)t[a]=e[a]+KG(t[a-i],r[a],r[a-i])&255}}function KG(e,t,r){const n=e+t-r,i=Math.abs(n-e),a=Math.abs(n-t),o=Math.abs(n-r);return i<=a&&i<=o?e:a<=o?t:r}function YG(e,t,r,n,i,a){switch(e){case 0:k6(t,r,i);break;case 1:C6(t,r,i,a);break;case 2:E6(t,r,n,i);break;case 3:A6(t,r,n,i,a);break;case 4:P6(t,r,n,i,a);break;default:throw new Error(`Unsupported filter: ${e}`)}}const QG=new Uint16Array([255]),JG=new Uint8Array(QG.buffer),ZG=JG[0]===255;function XG(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],l=Math.ceil(a/8)*i,d=new Uint8Array(n*r*l);let f=0;for(let h=0;h<7;h++){const p=o[h],v=Math.ceil((r-p.x)/p.xStep),m=Math.ceil((n-p.y)/p.yStep);if(v<=0||m<=0)continue;const j=v*l,w=new Uint8Array(j);for(let _=0;_<m;_++){const S=t[f++],E=t.subarray(f,f+j);f+=j;const k=new Uint8Array(j);YG(S,E,k,w,j,l),w.set(k);for(let C=0;C<v;C++){const D=p.x+C*p.xStep,M=p.y+_*p.yStep;if(!(D>=r||M>=n))for(let F=0;F<l;F++)d[(M*r+D)*l+F]=k[C*l+F]}}}if(a===16){const h=new Uint16Array(d.buffer);if(ZG)for(let p=0;p<h.length;p++)h[p]=eK(h[p]);return h}else return d}function eK(e){return(e&255)<<8|e>>8&255}const tK=new Uint16Array([255]),rK=new Uint8Array(tK.buffer),nK=rK[0]===255,sK=new Uint8Array(0);function mS(e){const{data:t,width:r,height:n,channels:i,depth:a}=e,o=Math.ceil(a/8)*i,l=Math.ceil(a/8*i*r),d=new Uint8Array(n*l);let f=sK,h=0,p,v;for(let m=0;m<n;m++){switch(p=t.subarray(h+1,h+1+l),v=d.subarray(m*l,(m+1)*l),t[h]){case 0:k6(p,v,l);break;case 1:C6(p,v,l,o);break;case 2:E6(p,v,f,l);break;case 3:A6(p,v,f,l,o);break;case 4:P6(p,v,f,l,o);break;default:throw new Error(`Unsupported filter: ${t[h]}`)}f=v,h+=l+1}if(a===16){const m=new Uint16Array(d.buffer);if(nK)for(let j=0;j<m.length;j++)m[j]=iK(m[j]);return m}else return d}function iK(e){return(e&255)<<8|e>>8&255}const gv=Uint8Array.of(137,80,78,71,13,10,26,10);function pS(e){if(!aK(e.readBytes(gv.length)))throw new Error("wrong PNG signature")}function aK(e){if(e.length<gv.length)return!1;for(let t=0;t<gv.length;t++)if(e[t]!==gv[t])return!1;return!0}const oK="tEXt",lK=0,T6=new TextDecoder("latin1");function cK(e){if(dK(e),e.length===0||e.length>79)throw new Error("keyword length must be between 1 and 79")}const uK=/^[\u0000-\u00FF]*$/;function dK(e){if(!uK.test(e))throw new Error("invalid latin1 text")}function fK(e,t,r){const n=R6(t);e[n]=hK(t,r-n.length-1)}function R6(e){for(e.mark();e.readByte()!==lK;);const t=e.offset;e.reset();const r=T6.decode(e.readBytes(t-e.offset-1));return e.skip(1),cK(r),r}function hK(e,t){return T6.decode(e.readBytes(t))}const pa={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},d1={UNKNOWN:-1,DEFLATE:0},gS={UNKNOWN:-1,ADAPTIVE:0},f1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},tv={NONE:0,BACKGROUND:1,PREVIOUS:2},h1={SOURCE:0,OVER:1};class mK extends kb{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(t,r={}){super(t);const{checkCrc:n=!1}=r;this._checkCrc=n,this._inflator=new dS,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=d1.UNKNOWN,this._filterMethod=gS.UNKNOWN,this._interlaceMethod=f1.UNKNOWN,this._colorType=pa.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(pS(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeChunk(t,r)}return this.decodeImage(),this._png}decodeApng(){for(pS(this);!this._end;){const t=this.readUint32(),r=this.readChars(4);this.decodeApngChunk(t,r)}return this.decodeApngImage(),this._apng}decodeChunk(t,r){const n=this.offset;switch(r){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(t);break;case"IDAT":this.decodeIDAT(t);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(t);break;case"iCCP":this.decodeiCCP(t);break;case oK:fK(this._png.text,this,t);break;case"pHYs":this.decodepHYs();break;default:this.skip(t);break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?hS(this,t+4,r):this.skip(4)}decodeApngChunk(t,r){const n=this.offset;switch(r!=="fdAT"&&r!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),r){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(t);break;default:this.decodeChunk(t,r),this.offset=n+t;break}if(this.offset-n!==t)throw new Error(`Length mismatch while decoding chunk ${r}`);this._checkCrc?hS(this,t+4,r):this.skip(4)}decodeIHDR(){const t=this._png;t.width=this.readUint32(),t.height=this.readUint32(),t.depth=pK(this.readUint8());const r=this.readUint8();this._colorType=r;let n;switch(r){case pa.GREYSCALE:n=1;break;case pa.TRUECOLOUR:n=3;break;case pa.INDEXED_COLOUR:n=1;break;case pa.GREYSCALE_ALPHA:n=2;break;case pa.TRUECOLOUR_ALPHA:n=4;break;case pa.UNKNOWN:default:throw new Error(`Unknown color type: ${r}`)}if(this._png.channels=n,this._compressionMethod=this.readUint8(),this._compressionMethod!==d1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const t={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(t)}decodePLTE(t){if(t%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${t}`);const r=t/3;this._hasPalette=!0;const n=[];this._palette=n;for(let i=0;i<r;i++)n.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(t){this._writingDataChunks=!0;const r=t,n=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodeFDAT(t){this._writingDataChunks=!0;let r=t,n=this.offset+this.byteOffset;if(n+=4,r-=4,this._inflator.push(new Uint8Array(this.buffer,n,r)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(t)}decodetRNS(t){switch(this._colorType){case pa.GREYSCALE:case pa.TRUECOLOUR:{if(t%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${t}`);if(t/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${t/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(t/2);for(let r=0;r<t/2;r++)this._transparency[r]=this.readUint16();break}case pa.INDEXED_COLOUR:{if(t>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${t} vs ${this._palette.length})`);let r=0;for(;r<t;r++){const n=this.readByte();this._palette[r].push(n)}for(;r<this._palette.length;r++)this._palette[r].push(255);break}case pa.UNKNOWN:case pa.GREYSCALE_ALPHA:case pa.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(t){const r=R6(this),n=this.readUint8();if(n!==d1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${n}`);const i=this.readBytes(t-r.length-2);this._png.iccEmbeddedProfile={name:r,profile:WG(i)}}decodepHYs(){const t=this.readUint32(),r=this.readUint32(),n=this.readByte();this._png.resolution={x:t,y:r,unit:n}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let t=0;t<this._numberOfFrames;t++){const r={sequenceNumber:this._frames[t].sequenceNumber,delayNumber:this._frames[t].delayNumber,delayDenominator:this._frames[t].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},n=this._frames.at(t);if(n){if(n.data=mS({data:n.data,width:n.width,height:n.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),t===0||n.xOffset===0&&n.yOffset===0&&n.width===this._png.width&&n.height===this._png.height)r.data=n.data;else{const i=this._apng.frames.at(t-1);this.disposeFrame(n,i,r),this.addFrameDataToCanvas(r,n)}this._apng.frames.push(r)}}return this._apng}disposeFrame(t,r,n){switch(t.disposeOp){case tv.NONE:break;case tv.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let a=0;a<this._png.width;a++){const o=(i*t.width+a)*this._png.channels;for(let l=0;l<this._png.channels;l++)n.data[o+l]=0}break;case tv.PREVIOUS:n.data.set(r.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(t,r){const n=1<<this._png.depth,i=(a,o)=>{const l=((a+r.yOffset)*this._png.width+r.xOffset+o)*this._png.channels,d=(a*r.width+o)*this._png.channels;return{index:l,frameIndex:d}};switch(r.blendOp){case h1.SOURCE:for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:d}=i(a,o);for(let f=0;f<this._png.channels;f++)t.data[l+f]=r.data[d+f]}break;case h1.OVER:for(let a=0;a<r.height;a++)for(let o=0;o<r.width;o++){const{index:l,frameIndex:d}=i(a,o);for(let f=0;f<this._png.channels;f++){const h=r.data[d+this._png.channels-1]/n,p=f%(this._png.channels-1)===0?1:r.data[d+f],v=Math.floor(h*p+(1-h)*t.data[l+f]);t.data[l+f]+=v}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const t=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==gS.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===f1.NO_INTERLACE)this._png.data=mS({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===f1.ADAM7)this._png.data=XG({data:t,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const t=this._inflator.result,r=this._frames.at(-1);r?r.data=t:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:tv.NONE,blendOp:h1.SOURCE,data:t}),this._inflator=new dS,this._writingDataChunks=!1}}function pK(e){if(e!==1&&e!==2&&e!==4&&e!==8&&e!==16)throw new Error(`invalid bit depth: ${e}`);return e}var vS;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.METRE=1]="METRE"})(vS||(vS={}));function gK(e,t){return new mK(e,t).decode()}var fr=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function m1(){fr.console&&typeof fr.console.log=="function"&&fr.console.log.apply(fr.console,arguments)}var mn={log:m1,warn:function(e){fr.console&&(typeof fr.console.warn=="function"?fr.console.warn.apply(fr.console,arguments):m1.call(null,arguments))},error:function(e){fr.console&&(typeof fr.console.error=="function"?fr.console.error.apply(fr.console,arguments):m1(e))}};function p1(e,t,r){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){Ad(n.response,t,r)},n.onerror=function(){mn.error("could not download file")},n.send()}function yS(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function rv(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var Ad=fr.saveAs||((typeof window>"u"?"undefined":ln(window))!=="object"||window!==fr?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,r){var n=fr.URL||fr.webkitURL,i=document.createElement("a");t=t||e.name||"download",i.download=t,i.rel="noopener",typeof e=="string"?(i.href=e,i.origin!==location.origin?yS(i.href)?p1(e,t,r):rv(i,i.target="_blank"):rv(i)):(i.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(i.href)},4e4),setTimeout(function(){rv(i)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,r){if(t=t||e.name||"download",typeof e=="string")if(yS(e))p1(e,t,r);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){rv(n)})}else navigator.msSaveOrOpenBlob((function(i,a){return a===void 0?a={autoBom:!1}:ln(a)!=="object"&&(mn.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i})(e,r),t)}:function(e,t,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof e=="string")return p1(e,t,r);var i=e.type==="application/octet-stream",a=/constructor/i.test(fr.HTMLElement)||fr.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||i&&a)&&(typeof FileReader>"u"?"undefined":ln(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var h=l.result;h=o?h:h.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=h:location=h,n=null},l.readAsDataURL(e)}else{var d=fr.URL||fr.webkitURL,f=d.createObjectURL(e);n?n.location=f:location.href=f,n=null,setTimeout(function(){d.revokeObjectURL(f)},4e4)}});function L6(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],n=0;n<r.length;n++){var i=r[n].re,a=r[n].process,o=i.exec(e);o&&(t=a(o),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),d=this.g.toString(16),f=this.b.toString(16);return l.length==1&&(l="0"+l),d.length==1&&(d="0"+d),f.length==1&&(f="0"+f),"#"+l+d+f}}var vv=fr.atob.bind(fr),xS=fr.btoa.bind(fr);function g1(e,t){var r=e[0],n=e[1],i=e[2],a=e[3];r=ii(r,n,i,a,t[0],7,-680876936),a=ii(a,r,n,i,t[1],12,-389564586),i=ii(i,a,r,n,t[2],17,606105819),n=ii(n,i,a,r,t[3],22,-1044525330),r=ii(r,n,i,a,t[4],7,-176418897),a=ii(a,r,n,i,t[5],12,1200080426),i=ii(i,a,r,n,t[6],17,-1473231341),n=ii(n,i,a,r,t[7],22,-45705983),r=ii(r,n,i,a,t[8],7,1770035416),a=ii(a,r,n,i,t[9],12,-1958414417),i=ii(i,a,r,n,t[10],17,-42063),n=ii(n,i,a,r,t[11],22,-1990404162),r=ii(r,n,i,a,t[12],7,1804603682),a=ii(a,r,n,i,t[13],12,-40341101),i=ii(i,a,r,n,t[14],17,-1502002290),r=ai(r,n=ii(n,i,a,r,t[15],22,1236535329),i,a,t[1],5,-165796510),a=ai(a,r,n,i,t[6],9,-1069501632),i=ai(i,a,r,n,t[11],14,643717713),n=ai(n,i,a,r,t[0],20,-373897302),r=ai(r,n,i,a,t[5],5,-701558691),a=ai(a,r,n,i,t[10],9,38016083),i=ai(i,a,r,n,t[15],14,-660478335),n=ai(n,i,a,r,t[4],20,-405537848),r=ai(r,n,i,a,t[9],5,568446438),a=ai(a,r,n,i,t[14],9,-1019803690),i=ai(i,a,r,n,t[3],14,-187363961),n=ai(n,i,a,r,t[8],20,1163531501),r=ai(r,n,i,a,t[13],5,-1444681467),a=ai(a,r,n,i,t[2],9,-51403784),i=ai(i,a,r,n,t[7],14,1735328473),r=oi(r,n=ai(n,i,a,r,t[12],20,-1926607734),i,a,t[5],4,-378558),a=oi(a,r,n,i,t[8],11,-2022574463),i=oi(i,a,r,n,t[11],16,1839030562),n=oi(n,i,a,r,t[14],23,-35309556),r=oi(r,n,i,a,t[1],4,-1530992060),a=oi(a,r,n,i,t[4],11,1272893353),i=oi(i,a,r,n,t[7],16,-155497632),n=oi(n,i,a,r,t[10],23,-1094730640),r=oi(r,n,i,a,t[13],4,681279174),a=oi(a,r,n,i,t[0],11,-358537222),i=oi(i,a,r,n,t[3],16,-722521979),n=oi(n,i,a,r,t[6],23,76029189),r=oi(r,n,i,a,t[9],4,-640364487),a=oi(a,r,n,i,t[12],11,-421815835),i=oi(i,a,r,n,t[15],16,530742520),r=li(r,n=oi(n,i,a,r,t[2],23,-995338651),i,a,t[0],6,-198630844),a=li(a,r,n,i,t[7],10,1126891415),i=li(i,a,r,n,t[14],15,-1416354905),n=li(n,i,a,r,t[5],21,-57434055),r=li(r,n,i,a,t[12],6,1700485571),a=li(a,r,n,i,t[3],10,-1894986606),i=li(i,a,r,n,t[10],15,-1051523),n=li(n,i,a,r,t[1],21,-2054922799),r=li(r,n,i,a,t[8],6,1873313359),a=li(a,r,n,i,t[15],10,-30611744),i=li(i,a,r,n,t[6],15,-1560198380),n=li(n,i,a,r,t[13],21,1309151649),r=li(r,n,i,a,t[4],6,-145523070),a=li(a,r,n,i,t[11],10,-1120210379),i=li(i,a,r,n,t[2],15,718787259),n=li(n,i,a,r,t[9],21,-343485551),e[0]=Su(r,e[0]),e[1]=Su(n,e[1]),e[2]=Su(i,e[2]),e[3]=Su(a,e[3])}function X0(e,t,r,n,i,a){return t=Su(Su(t,e),Su(n,a)),Su(t<<i|t>>>32-i,r)}function ii(e,t,r,n,i,a,o){return X0(t&r|~t&n,e,t,i,a,o)}function ai(e,t,r,n,i,a,o){return X0(t&n|r&~n,e,t,i,a,o)}function oi(e,t,r,n,i,a,o){return X0(t^r^n,e,t,i,a,o)}function li(e,t,r,n,i,a,o){return X0(r^(t|~n),e,t,i,a,o)}function D6(e){var t,r=e.length,n=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)g1(n,vK(e.substring(t-64,t)));e=e.substring(t-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)i[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(i[t>>2]|=128<<(t%4<<3),t>55)for(g1(n,i),t=0;t<16;t++)i[t]=0;return i[14]=8*r,g1(n,i),n}function vK(e){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return r}var wS="0123456789abcdef".split("");function yK(e){for(var t="",r=0;r<4;r++)t+=wS[e>>8*r+4&15]+wS[e>>8*r&15];return t}function xK(e){return String.fromCharCode(255&e,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function Lw(e){return D6(e).map(xK).join("")}var wK=(function(e){for(var t=0;t<e.length;t++)e[t]=yK(e[t]);return e.join("")})(D6("hello"))!="5d41402abc4b2a76b9719d911017c592";function Su(e,t){if(wK){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}return e+t&4294967295}function Dw(e,t){var r,n,i,a;if(e!==r){for(var o=(i=e,a=1+(256/e.length|0),new Array(a+1).join(i)),l=[],d=0;d<256;d++)l[d]=d;var f=0;for(d=0;d<256;d++){var h=l[d];f=(f+h+o.charCodeAt(d))%256,l[d]=l[f],l[f]=h}r=e,n=l}else l=n;var p=t.length,v=0,m=0,j="";for(d=0;d<p;d++)m=(m+(h=l[v=(v+1)%256]))%256,l[v]=l[m],l[m]=h,o=l[(l[v]+l[m])%256],j+=String.fromCharCode(t.charCodeAt(d)^o);return j}var bS={print:4,modify:8,copy:16,"annot-forms":32};function ih(e,t,r,n){this.v=1,this.r=2;var i=192;e.forEach(function(l){if(bS.perm!==void 0)throw new Error("Invalid permission: "+l);i+=bS[l]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(t+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,o),this.P=-(1+(255^i)),this.encryptionKey=Lw(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=Dw(this.encryptionKey,this.padding)}function ah(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",r=e.length,n=0;n<r;n++){var i=e.charCodeAt(n);t+=i<33||i===35||i===37||i===40||i===41||i===47||i===60||i===62||i===91||i===93||i===123||i===125||i>126?"#"+("0"+i.toString(16)).slice(-2):e[n]}return t}function _S(e){if(ln(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,n,i){if(i=i||!1,typeof r!="string"||typeof n!="function"||typeof i!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var a=Math.random().toString(35);return t[r][a]=[n,!!i],a},this.unsubscribe=function(r){for(var n in t)if(t[n][r])return delete t[n][r],Object.keys(t[n]).length===0&&delete t[n],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),i=[];for(var a in t[r]){var o=t[r][a];try{o[0].apply(e,n)}catch(l){fr.console&&mn.error("jsPDF PubSub Error",l.message,l)}o[1]&&i.push(a)}i.length&&i.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function Gv(e){if(!(this instanceof Gv))return new Gv(e);var t="opacity,stroke-opacity".split(",");for(var r in e)e.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=e[r]);this.id="",this.objectNumber=-1}function I6(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function Dd(e,t,r,n,i){if(!(this instanceof Dd))return new Dd(e,t,r,n,i);this.type=e==="axial"?2:3,this.coords=t,this.colors=r,I6.call(this,n,i)}function dh(e,t,r,n,i){if(!(this instanceof dh))return new dh(e,t,r,n,i);this.boundingBox=e,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,I6.call(this,n,i)}function Wt(e){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],i=arguments[2],a=arguments[3],o=[],l=1,d=16,f="S",h=null;ln(e=e||{})==="object"&&(r=e.orientation,n=e.unit||n,i=e.format||i,a=e.compress||e.compressPdf||a,(h=e.encryption||null)!==null&&(h.userPassword=h.userPassword||"",h.ownerPassword=h.ownerPassword||"",h.userPermissions=h.userPermissions||[]),l=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(d=e.floatPrecision),f=e.defaultPathOperation||"S"),o=e.filters||(a===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var p=e.putOnlyUsedFonts||!1,v={},m={internal:{},__private__:{}};m.__private__.PubSub=_S;var j="1.3",w=m.__private__.getPdfVersion=function(){return j};m.__private__.setPdfVersion=function(A){j=A};var _={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return _};var S=m.__private__.getPageFormat=function(A){return _[A]};i=i||"a4";var E="compat",k="advanced",C=E;function D(){this.saveGraphicsState(),ne(new Et($t,0,0,-$t,0,Di()*$t).toString()+" cm"),this.setFontSize(this.getFontSize()/$t),f="n",C=k}function M(){this.restoreGraphicsState(),f="S",C=E}var F=m.__private__.combineFontStyleAndFontWeight=function(A,H){if(A=="bold"&&H=="normal"||A=="bold"&&H==400||A=="normal"&&H=="italic"||A=="bold"&&H=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return H&&(A=H==400||H==="normal"?A==="italic"?"italic":"normal":H!=700&&H!=="bold"||A!=="normal"?(H==700?"bold":H)+""+A:"bold"),A};m.advancedAPI=function(A){var H=C===E;return H&&D.call(this),typeof A!="function"||(A(this),H&&M.call(this)),this},m.compatAPI=function(A){var H=C===k;return H&&M.call(this),typeof A!="function"||(A(this),H&&D.call(this)),this},m.isAdvancedAPI=function(){return C===k};var U,I=function(A){if(C!==k)throw new Error(A+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},K=m.roundToPrecision=m.__private__.roundToPrecision=function(A,H){var he=t||H;if(isNaN(A)||isNaN(he))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return A.toFixed(he).replace(/0+$/,"")};U=m.hpf=m.__private__.hpf=typeof d=="number"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return K(A,d)}:d==="smart"?function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return K(A,A>-1&&A<1?16:5)}:function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.hpf");return K(A,16)};var B=m.f2=m.__private__.f2=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f2");return K(A,2)},O=m.__private__.f3=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.f3");return K(A,3)},z=m.scale=m.__private__.scale=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.scale");return C===E?A*$t:C===k?A:void 0},q=function(A){return z((function(H){return C===E?Di()-H:C===k?H:void 0})(A))};m.__private__.setPrecision=m.setPrecision=function(A){typeof parseInt(A,10)=="number"&&(t=parseInt(A,10))};var ue,ie="00000000000000000000000000000000",le=m.__private__.getFileId=function(){return ie},G=m.__private__.setFileId=function(A){return ie=A!==void 0&&/^[a-fA-F0-9]{32}$/.test(A)?A.toUpperCase():ie.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),h!==null&&(ts=new ih(h.userPermissions,h.userPassword,h.ownerPassword,ie)),ie};m.setFileId=function(A){return G(A),this},m.getFileId=function(){return le()};var se=m.__private__.convertDateToPDFDate=function(A){var H=A.getTimezoneOffset(),he=H<0?"+":"-",be=Math.floor(Math.abs(H/60)),Ae=Math.abs(H%60),Ke=[he,Q(be),"'",Q(Ae),"'"].join("");return["D:",A.getFullYear(),Q(A.getMonth()+1),Q(A.getDate()),Q(A.getHours()),Q(A.getMinutes()),Q(A.getSeconds()),Ke].join("")},xe=m.__private__.convertPDFDateToDate=function(A){var H=parseInt(A.substr(2,4),10),he=parseInt(A.substr(6,2),10)-1,be=parseInt(A.substr(8,2),10),Ae=parseInt(A.substr(10,2),10),Ke=parseInt(A.substr(12,2),10),rt=parseInt(A.substr(14,2),10);return new Date(H,he,be,Ae,Ke,rt,0)},te=m.__private__.setCreationDate=function(A){var H;if(A===void 0&&(A=new Date),A instanceof Date)H=se(A);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(A))throw new Error("Invalid argument passed to jsPDF.setCreationDate");H=A}return ue=H},R=m.__private__.getCreationDate=function(A){var H=ue;return A==="jsDate"&&(H=xe(ue)),H};m.setCreationDate=function(A){return te(A),this},m.getCreationDate=function(A){return R(A)};var V,Q=m.__private__.padd2=function(A){return("0"+parseInt(A)).slice(-2)},re=m.__private__.padd2Hex=function(A){return("00"+(A=A.toString())).substr(A.length)},Z=0,X=[],pe=[],ce=0,we=[],Pe=[],ze=!1,ve=pe;m.__private__.setCustomOutputDestination=function(A){ze=!0,ve=A};var qe=function(A){ze||(ve=A)};m.__private__.resetCustomOutputDestination=function(){ze=!1,ve=pe};var ne=m.__private__.out=function(A){return A=A.toString(),ce+=A.length+1,ve.push(A),ve},tt=m.__private__.write=function(A){return ne(arguments.length===1?A.toString():Array.prototype.join.call(arguments," "))},jt=m.__private__.getArrayBuffer=function(A){for(var H=A.length,he=new ArrayBuffer(H),be=new Uint8Array(he);H--;)be[H]=A.charCodeAt(H);return he},St=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return St};var Xe=e.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(A){return Xe=C===k?A/$t:A,this};var me,ye=m.__private__.getFontSize=m.getFontSize=function(){return C===E?Xe:Xe*$t},Ce=e.R2L||!1;m.__private__.setR2L=m.setR2L=function(A){return Ce=A,this},m.__private__.getR2L=m.getR2L=function(){return Ce};var Ue,Je=m.__private__.setZoomMode=function(A){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(A))me=A;else if(isNaN(A)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(A)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+A+'" is not recognized.');me=A}else me=parseInt(A,10)};m.__private__.getZoomMode=function(){return me};var He,Ze=m.__private__.setPageMode=function(A){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(A)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+A+'" is not recognized.');Ue=A};m.__private__.getPageMode=function(){return Ue};var ft=m.__private__.setLayoutMode=function(A){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(A)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+A+'" is not recognized.');He=A};m.__private__.getLayoutMode=function(){return He},m.__private__.setDisplayMode=m.setDisplayMode=function(A,H,he){return Je(A),ft(H),Ze(he),this};var bt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(A){if(Object.keys(bt).indexOf(A)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return bt[A]},m.__private__.getDocumentProperties=function(){return bt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(A){for(var H in bt)bt.hasOwnProperty(H)&&A[H]&&(bt[H]=A[H]);return this},m.__private__.setDocumentProperty=function(A,H){if(Object.keys(bt).indexOf(A)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return bt[A]=H};var gt,$t,xt,Yr,ur,Gt={},ir={},Nr=[],Be={},rr={},Vt={},Yt={},Rr=null,Qt=0,Tt=[],Ar=new _S(m),Ht=e.hotfixes||[],nr={},jr={},cn=[],Et=function A(H,he,be,Ae,Ke,rt){if(!(this instanceof A))return new A(H,he,be,Ae,Ke,rt);isNaN(H)&&(H=1),isNaN(he)&&(he=0),isNaN(be)&&(be=0),isNaN(Ae)&&(Ae=1),isNaN(Ke)&&(Ke=0),isNaN(rt)&&(rt=0),this._matrix=[H,he,be,Ae,Ke,rt]};Object.defineProperty(Et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Et.prototype,"a",{get:function(){return this._matrix[0]},set:function(A){this._matrix[0]=A}}),Object.defineProperty(Et.prototype,"b",{get:function(){return this._matrix[1]},set:function(A){this._matrix[1]=A}}),Object.defineProperty(Et.prototype,"c",{get:function(){return this._matrix[2]},set:function(A){this._matrix[2]=A}}),Object.defineProperty(Et.prototype,"d",{get:function(){return this._matrix[3]},set:function(A){this._matrix[3]=A}}),Object.defineProperty(Et.prototype,"e",{get:function(){return this._matrix[4]},set:function(A){this._matrix[4]=A}}),Object.defineProperty(Et.prototype,"f",{get:function(){return this._matrix[5]},set:function(A){this._matrix[5]=A}}),Object.defineProperty(Et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),Et.prototype.join=function(A){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(U).join(A)},Et.prototype.multiply=function(A){var H=A.sx*this.sx+A.shy*this.shx,he=A.sx*this.shy+A.shy*this.sy,be=A.shx*this.sx+A.sy*this.shx,Ae=A.shx*this.shy+A.sy*this.sy,Ke=A.tx*this.sx+A.ty*this.shx+this.tx,rt=A.tx*this.shy+A.ty*this.sy+this.ty;return new Et(H,he,be,Ae,Ke,rt)},Et.prototype.decompose=function(){var A=this.sx,H=this.shy,he=this.shx,be=this.sy,Ae=this.tx,Ke=this.ty,rt=Math.sqrt(A*A+H*H),Rt=(A/=rt)*he+(H/=rt)*be;he-=A*Rt,be-=H*Rt;var Ft=Math.sqrt(he*he+be*be);return Rt/=Ft,A*(be/=Ft)<H*(he/=Ft)&&(A=-A,H=-H,Rt=-Rt,rt=-rt),{scale:new Et(rt,0,0,Ft,0,0),translate:new Et(1,0,0,1,Ae,Ke),rotate:new Et(A,H,-H,A,0,0),skew:new Et(1,0,Rt,1,0,0)}},Et.prototype.toString=function(A){return this.join(" ")},Et.prototype.inversed=function(){var A=this.sx,H=this.shy,he=this.shx,be=this.sy,Ae=this.tx,Ke=this.ty,rt=1/(A*be-H*he),Rt=be*rt,Ft=-H*rt,lr=-he*rt,hr=A*rt;return new Et(Rt,Ft,lr,hr,-Rt*Ae-lr*Ke,-Ft*Ae-hr*Ke)},Et.prototype.applyToPoint=function(A){var H=A.x*this.sx+A.y*this.shx+this.tx,he=A.x*this.shy+A.y*this.sy+this.ty;return new Ti(H,he)},Et.prototype.applyToRectangle=function(A){var H=this.applyToPoint(A),he=this.applyToPoint(new Ti(A.x+A.w,A.y+A.h));return new Fl(H.x,H.y,he.x-H.x,he.y-H.y)},Et.prototype.clone=function(){var A=this.sx,H=this.shy,he=this.shx,be=this.sy,Ae=this.tx,Ke=this.ty;return new Et(A,H,he,be,Ae,Ke)},m.Matrix=Et;var Ee=m.matrixMult=function(A,H){return H.multiply(A)},nt=new Et(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=nt;var vt=function(A,H){if(!rr[A]){var he=(H instanceof Dd?"Sh":"P")+(Object.keys(Be).length+1).toString(10);H.id=he,rr[A]=he,Be[he]=H,Ar.publish("addPattern",H)}};m.ShadingPattern=Dd,m.TilingPattern=dh,m.addShadingPattern=function(A,H){return I("addShadingPattern()"),vt(A,H),this},m.beginTilingPattern=function(A){I("beginTilingPattern()"),Ri(A.boundingBox[0],A.boundingBox[1],A.boundingBox[2]-A.boundingBox[0],A.boundingBox[3]-A.boundingBox[1],A.matrix)},m.endTilingPattern=function(A,H){I("endTilingPattern()"),H.stream=Pe[V].join(`
`),vt(A,H),Ar.publish("endTilingPattern",H),cn.pop().restore()};var Kt,br=m.__private__.newObject=function(){var A=Xr();return _n(A,!0),A},Xr=m.__private__.newObjectDeferred=function(){return Z++,X[Z]=function(){return ce},Z},_n=function(A,H){return H=typeof H=="boolean"&&H,X[A]=ce,H&&ne(A+" 0 obj"),A},ui=m.__private__.newAdditionalObject=function(){var A={objId:Xr(),content:""};return we.push(A),A},Fo=Xr(),ta=Xr(),Pa=m.__private__.decodeColorString=function(A){var H=A.split(" ");if(H.length!==2||H[1]!=="g"&&H[1]!=="G")H.length!==5||H[4]!=="k"&&H[4]!=="K"||(H=[(1-H[0])*(1-H[3]),(1-H[1])*(1-H[3]),(1-H[2])*(1-H[3]),"r"]);else{var he=parseFloat(H[0]);H=[he,he,he,"r"]}for(var be="#",Ae=0;Ae<3;Ae++)be+=("0"+Math.floor(255*parseFloat(H[Ae])).toString(16)).slice(-2);return be},bs=m.__private__.encodeColorString=function(A){var H;typeof A=="string"&&(A={ch1:A});var he=A.ch1,be=A.ch2,Ae=A.ch3,Ke=A.ch4,rt=A.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof he=="string"&&he.charAt(0)!=="#"){var Rt=new L6(he);if(Rt.ok)he=Rt.toHex();else if(!/^\d*\.?\d*$/.test(he))throw new Error('Invalid color "'+he+'" passed to jsPDF.encodeColorString.')}if(typeof he=="string"&&/^#[0-9A-Fa-f]{3}$/.test(he)&&(he="#"+he[1]+he[1]+he[2]+he[2]+he[3]+he[3]),typeof he=="string"&&/^#[0-9A-Fa-f]{6}$/.test(he)){var Ft=parseInt(he.substr(1),16);he=Ft>>16&255,be=Ft>>8&255,Ae=255&Ft}if(be===void 0||Ke===void 0&&he===be&&be===Ae)H=typeof he=="string"?he+" "+rt[0]:A.precision===2?B(he/255)+" "+rt[0]:O(he/255)+" "+rt[0];else if(Ke===void 0||ln(Ke)==="object"){if(Ke&&!isNaN(Ke.a)&&Ke.a===0)return["1.","1.","1.",rt[1]].join(" ");H=typeof he=="string"?[he,be,Ae,rt[1]].join(" "):A.precision===2?[B(he/255),B(be/255),B(Ae/255),rt[1]].join(" "):[O(he/255),O(be/255),O(Ae/255),rt[1]].join(" ")}else H=typeof he=="string"?[he,be,Ae,Ke,rt[2]].join(" "):A.precision===2?[B(he),B(be),B(Ae),B(Ke),rt[2]].join(" "):[O(he),O(be),O(Ae),O(Ke),rt[2]].join(" ");return H},Ei=m.__private__.getFilters=function(){return o},di=m.__private__.putStream=function(A){var H=(A=A||{}).data||"",he=A.filters||Ei(),be=A.alreadyAppliedFilters||[],Ae=A.addLength1||!1,Ke=H.length,rt=A.objectId,Rt=function(rs){return rs};if(h!==null&&rt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");h!==null&&(Rt=ts.encryptor(rt,0));var Ft={};he===!0&&(he=["FlateEncode"]);var lr=A.additionalKeyValues||[],hr=(Ft=Wt.API.processDataByFilters!==void 0?Wt.API.processDataByFilters(H,he):{data:H,reverseChain:[]}).reverseChain+(Array.isArray(be)?be.join(" "):be.toString());if(Ft.data.length!==0&&(lr.push({key:"Length",value:Ft.data.length}),Ae===!0&&lr.push({key:"Length1",value:Ke})),hr.length!=0)if(hr.split("/").length-1==1)lr.push({key:"Filter",value:hr});else{lr.push({key:"Filter",value:"["+hr+"]"});for(var Dr=0;Dr<lr.length;Dr+=1)if(lr[Dr].key==="DecodeParms"){for(var Nn=[],Vn=0;Vn<Ft.reverseChain.split("/").length-1;Vn+=1)Nn.push("null");Nn.push(lr[Dr].value),lr[Dr].value="["+Nn.join(" ")+"]"}}ne("<<");for(var un=0;un<lr.length;un++)ne("/"+lr[un].key+" "+lr[un].value);ne(">>"),Ft.data.length!==0&&(ne("stream"),ne(Rt(Ft.data)),ne("endstream"))},Cl=m.__private__.putPage=function(A){var H=A.number,he=A.data,be=A.objId,Ae=A.contentsObjId;_n(be,!0),ne("<</Type /Page"),ne("/Parent "+A.rootDictionaryObjId+" 0 R"),ne("/Resources "+A.resourceDictionaryObjId+" 0 R"),ne("/MediaBox ["+parseFloat(U(A.mediaBox.bottomLeftX))+" "+parseFloat(U(A.mediaBox.bottomLeftY))+" "+U(A.mediaBox.topRightX)+" "+U(A.mediaBox.topRightY)+"]"),A.cropBox!==null&&ne("/CropBox ["+U(A.cropBox.bottomLeftX)+" "+U(A.cropBox.bottomLeftY)+" "+U(A.cropBox.topRightX)+" "+U(A.cropBox.topRightY)+"]"),A.bleedBox!==null&&ne("/BleedBox ["+U(A.bleedBox.bottomLeftX)+" "+U(A.bleedBox.bottomLeftY)+" "+U(A.bleedBox.topRightX)+" "+U(A.bleedBox.topRightY)+"]"),A.trimBox!==null&&ne("/TrimBox ["+U(A.trimBox.bottomLeftX)+" "+U(A.trimBox.bottomLeftY)+" "+U(A.trimBox.topRightX)+" "+U(A.trimBox.topRightY)+"]"),A.artBox!==null&&ne("/ArtBox ["+U(A.artBox.bottomLeftX)+" "+U(A.artBox.bottomLeftY)+" "+U(A.artBox.topRightX)+" "+U(A.artBox.topRightY)+"]"),typeof A.userUnit=="number"&&A.userUnit!==1&&ne("/UserUnit "+A.userUnit),Ar.publish("putPage",{objId:be,pageContext:Tt[H],pageNumber:H,page:he}),ne("/Contents "+Ae+" 0 R"),ne(">>"),ne("endobj");var Ke=he.join(`
`);return C===k&&(Ke+=`
Q`),_n(Ae,!0),di({data:Ke,filters:Ei(),objectId:Ae}),ne("endobj"),be},ra=m.__private__.putPages=function(){var A,H,he=[];for(A=1;A<=Qt;A++)Tt[A].objId=Xr(),Tt[A].contentsObjId=Xr();for(A=1;A<=Qt;A++)he.push(Cl({number:A,data:Pe[A],objId:Tt[A].objId,contentsObjId:Tt[A].contentsObjId,mediaBox:Tt[A].mediaBox,cropBox:Tt[A].cropBox,bleedBox:Tt[A].bleedBox,trimBox:Tt[A].trimBox,artBox:Tt[A].artBox,userUnit:Tt[A].userUnit,rootDictionaryObjId:Fo,resourceDictionaryObjId:ta}));_n(Fo,!0),ne("<</Type /Pages");var be="/Kids [";for(H=0;H<Qt;H++)be+=he[H]+" 0 R ";ne(be+"]"),ne("/Count "+Qt),ne(">>"),ne("endobj"),Ar.publish("postPutPages")},Bo=function(A){Ar.publish("putFont",{font:A,out:ne,newObject:br,putStream:di}),A.isAlreadyPutted!==!0&&(A.objectNumber=br(),ne("<<"),ne("/Type /Font"),ne("/BaseFont /"+ah(A.postScriptName)),ne("/Subtype /Type1"),typeof A.encoding=="string"&&ne("/Encoding /"+A.encoding),ne("/FirstChar 32"),ne("/LastChar 255"),ne(">>"),ne("endobj"))},El=function(A){A.objectNumber=br();var H=[];H.push({key:"Type",value:"/XObject"}),H.push({key:"Subtype",value:"/Form"}),H.push({key:"BBox",value:"["+[U(A.x),U(A.y),U(A.x+A.width),U(A.y+A.height)].join(" ")+"]"}),H.push({key:"Matrix",value:"["+A.matrix.toString()+"]"});var he=A.pages[1].join(`
`);di({data:he,additionalKeyValues:H,objectId:A.objectNumber}),ne("endobj")},Al=function(A,H){H||(H=21);var he=br(),be=(function(rt,Rt){var Ft,lr=[],hr=1/(Rt-1);for(Ft=0;Ft<1;Ft+=hr)lr.push(Ft);if(lr.push(1),rt[0].offset!=0){var Dr={offset:0,color:rt[0].color};rt.unshift(Dr)}if(rt[rt.length-1].offset!=1){var Nn={offset:1,color:rt[rt.length-1].color};rt.push(Nn)}for(var Vn="",un=0,rs=0;rs<lr.length;rs++){for(Ft=lr[rs];Ft>rt[un+1].offset;)un++;var Dn=rt[un].offset,_s=(Ft-Dn)/(rt[un+1].offset-Dn),to=rt[un].color,ia=rt[un+1].color;Vn+=re(Math.round((1-_s)*to[0]+_s*ia[0]).toString(16))+re(Math.round((1-_s)*to[1]+_s*ia[1]).toString(16))+re(Math.round((1-_s)*to[2]+_s*ia[2]).toString(16))}return Vn.trim()})(A.colors,H),Ae=[];Ae.push({key:"FunctionType",value:"0"}),Ae.push({key:"Domain",value:"[0.0 1.0]"}),Ae.push({key:"Size",value:"["+H+"]"}),Ae.push({key:"BitsPerSample",value:"8"}),Ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),di({data:be,additionalKeyValues:Ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:he}),ne("endobj"),A.objectNumber=br(),ne("<< /ShadingType "+A.type),ne("/ColorSpace /DeviceRGB");var Ke="/Coords ["+U(parseFloat(A.coords[0]))+" "+U(parseFloat(A.coords[1]))+" ";A.type===2?Ke+=U(parseFloat(A.coords[2]))+" "+U(parseFloat(A.coords[3])):Ke+=U(parseFloat(A.coords[2]))+" "+U(parseFloat(A.coords[3]))+" "+U(parseFloat(A.coords[4]))+" "+U(parseFloat(A.coords[5])),ne(Ke+="]"),A.matrix&&ne("/Matrix ["+A.matrix.toString()+"]"),ne("/Function "+he+" 0 R"),ne("/Extend [true true]"),ne(">>"),ne("endobj")},Pc=function(A,H){var he=Xr(),be=br();H.push({resourcesOid:he,objectOid:be}),A.objectNumber=be;var Ae=[];Ae.push({key:"Type",value:"/Pattern"}),Ae.push({key:"PatternType",value:"1"}),Ae.push({key:"PaintType",value:"1"}),Ae.push({key:"TilingType",value:"1"}),Ae.push({key:"BBox",value:"["+A.boundingBox.map(U).join(" ")+"]"}),Ae.push({key:"XStep",value:U(A.xStep)}),Ae.push({key:"YStep",value:U(A.yStep)}),Ae.push({key:"Resources",value:he+" 0 R"}),A.matrix&&Ae.push({key:"Matrix",value:"["+A.matrix.toString()+"]"}),di({data:A.stream,additionalKeyValues:Ae,objectId:A.objectNumber}),ne("endobj")},nm=function(A){for(var H in A.objectNumber=br(),ne("<<"),A)switch(H){case"opacity":ne("/ca "+B(A[H]));break;case"stroke-opacity":ne("/CA "+B(A[H]))}ne(">>"),ne("endobj")},fn=function(A){_n(A.resourcesOid,!0),ne("<<"),ne("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var H in ne("/Font <<"),Gt)Gt.hasOwnProperty(H)&&(p===!1||p===!0&&v.hasOwnProperty(H))&&ne("/"+H+" "+Gt[H].objectNumber+" 0 R");ne(">>")})(),(function(){if(Object.keys(Be).length>0){for(var H in ne("/Shading <<"),Be)Be.hasOwnProperty(H)&&Be[H]instanceof Dd&&Be[H].objectNumber>=0&&ne("/"+H+" "+Be[H].objectNumber+" 0 R");Ar.publish("putShadingPatternDict"),ne(">>")}})(),(function(H){if(Object.keys(Be).length>0){for(var he in ne("/Pattern <<"),Be)Be.hasOwnProperty(he)&&Be[he]instanceof m.TilingPattern&&Be[he].objectNumber>=0&&Be[he].objectNumber<H&&ne("/"+he+" "+Be[he].objectNumber+" 0 R");Ar.publish("putTilingPatternDict"),ne(">>")}})(A.objectOid),(function(){if(Object.keys(Vt).length>0){var H;for(H in ne("/ExtGState <<"),Vt)Vt.hasOwnProperty(H)&&Vt[H].objectNumber>=0&&ne("/"+H+" "+Vt[H].objectNumber+" 0 R");Ar.publish("putGStateDict"),ne(">>")}})(),(function(){for(var H in ne("/XObject <<"),nr)nr.hasOwnProperty(H)&&nr[H].objectNumber>=0&&ne("/"+H+" "+nr[H].objectNumber+" 0 R");Ar.publish("putXobjectDict"),ne(">>")})(),ne(">>"),ne("endobj")},df=function(A){ir[A.fontName]=ir[A.fontName]||{},ir[A.fontName][A.fontStyle]=A.id},Tc=function(A,H,he,be,Ae){var Ke={id:"F"+(Object.keys(Gt).length+1).toString(10),postScriptName:A,fontName:H,fontStyle:he,encoding:be,isStandardFont:Ae||!1,metadata:{}};return Ar.publish("addFont",{font:Ke,instance:this}),Gt[Ke.id]=Ke,df(Ke),Ke.id},fi=m.__private__.pdfEscape=m.pdfEscape=function(A,H){return(function(he,be){var Ae,Ke,rt,Rt,Ft,lr,hr,Dr,Nn;if(rt=(be=be||{}).sourceEncoding||"Unicode",Ft=be.outputEncoding,(be.autoencode||Ft)&&Gt[gt].metadata&&Gt[gt].metadata[rt]&&Gt[gt].metadata[rt].encoding&&(Rt=Gt[gt].metadata[rt].encoding,!Ft&&Gt[gt].encoding&&(Ft=Gt[gt].encoding),!Ft&&Rt.codePages&&(Ft=Rt.codePages[0]),typeof Ft=="string"&&(Ft=Rt[Ft]),Ft)){for(hr=!1,lr=[],Ae=0,Ke=he.length;Ae<Ke;Ae++)(Dr=Ft[he.charCodeAt(Ae)])?lr.push(String.fromCharCode(Dr)):lr.push(he[Ae]),lr[Ae].charCodeAt(0)>>8&&(hr=!0);he=lr.join("")}for(Ae=he.length;hr===void 0&&Ae!==0;)he.charCodeAt(Ae-1)>>8&&(hr=!0),Ae--;if(!hr)return he;for(lr=be.noBOM?[]:[254,255],Ae=0,Ke=he.length;Ae<Ke;Ae++){if((Nn=(Dr=he.charCodeAt(Ae))>>8)>>8)throw new Error("Character at position "+Ae+" of string '"+he+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");lr.push(Nn),lr.push(Dr-(Nn<<8))}return String.fromCharCode.apply(void 0,lr)})(A,H).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Uo=m.__private__.beginPage=function(A){Pe[++Qt]=[],Tt[Qt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(A[0]),topRightY:Number(A[1])}},Pl(Qt),qe(Pe[V])},ff=function(A,H){var he,be,Ae;switch(r=H||r,typeof A=="string"&&(he=S(A.toLowerCase()),Array.isArray(he)&&(be=he[0],Ae=he[1])),Array.isArray(A)&&(be=A[0]*$t,Ae=A[1]*$t),isNaN(be)&&(be=i[0],Ae=i[1]),(be>14400||Ae>14400)&&(mn.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),be=Math.min(14400,be),Ae=Math.min(14400,Ae)),i=[be,Ae],r.substr(0,1)){case"l":Ae>be&&(i=[Ae,be]);break;case"p":be>Ae&&(i=[Ae,be])}Uo(i),tr(Pi),ne(Ol),td!==0&&ne(td+" J"),rd!==0&&ne(rd+" j"),Ar.publish("addPage",{pageNumber:Qt})},Rc=function(A){A>0&&A<=Qt&&(Pe.splice(A,1),Tt.splice(A,1),Qt--,V>Qt&&(V=Qt),this.setPage(V))},Pl=function(A){A>0&&A<=Qt&&(V=A)},hi=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return Pe.length-1},hf=function(A,H,he){var be,Ae=void 0;return he=he||{},A=A!==void 0?A:Gt[gt].fontName,H=H!==void 0?H:Gt[gt].fontStyle,be=A.toLowerCase(),ir[be]!==void 0&&ir[be][H]!==void 0?Ae=ir[be][H]:ir[A]!==void 0&&ir[A][H]!==void 0?Ae=ir[A][H]:he.disableWarning===!1&&mn.warn("Unable to look up font label for font '"+A+"', '"+H+"'. Refer to getFontList() for available fonts."),Ae||he.noFallback||(Ae=ir.times[H])==null&&(Ae=ir.times.normal),Ae},zn=m.__private__.putInfo=function(){var A=br(),H=function(be){return be};for(var he in h!==null&&(H=ts.encryptor(A,0)),ne("<<"),ne("/Producer ("+fi(H("jsPDF "+Wt.version))+")"),bt)bt.hasOwnProperty(he)&&bt[he]&&ne("/"+he.substr(0,1).toUpperCase()+he.substr(1)+" ("+fi(H(bt[he]))+")");ne("/CreationDate ("+fi(H(ue))+")"),ne(">>"),ne("endobj")},Lc=m.__private__.putCatalog=function(A){var H=(A=A||{}).rootDictionaryObjId||Fo;switch(br(),ne("<<"),ne("/Type /Catalog"),ne("/Pages "+H+" 0 R"),me||(me="fullwidth"),me){case"fullwidth":ne("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ne("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ne("/OpenAction [3 0 R /Fit]");break;case"original":ne("/OpenAction [3 0 R /XYZ null null 1]");break;default:var he=""+me;he.substr(he.length-1)==="%"&&(me=parseInt(me)/100),typeof me=="number"&&ne("/OpenAction [3 0 R /XYZ null null "+B(me)+"]")}switch(He||(He="continuous"),He){case"continuous":ne("/PageLayout /OneColumn");break;case"single":ne("/PageLayout /SinglePage");break;case"two":case"twoleft":ne("/PageLayout /TwoColumnLeft");break;case"tworight":ne("/PageLayout /TwoColumnRight")}Ue&&ne("/PageMode /"+Ue),Ar.publish("putCatalog"),ne(">>"),ne("endobj")},sm=m.__private__.putTrailer=function(){ne("trailer"),ne("<<"),ne("/Size "+(Z+1)),ne("/Root "+Z+" 0 R"),ne("/Info "+(Z-1)+" 0 R"),h!==null&&ne("/Encrypt "+ts.oid+" 0 R"),ne("/ID [ <"+ie+"> <"+ie+"> ]"),ne(">>")},qn=m.__private__.putHeader=function(){ne("%PDF-"+j),ne("%")},Tl=m.__private__.putXRef=function(){var A="0000000000";ne("xref"),ne("0 "+(Z+1)),ne("0000000000 65535 f ");for(var H=1;H<=Z;H++)typeof X[H]=="function"?ne((A+X[H]()).slice(-10)+" 00000 n "):X[H]!==void 0?ne((A+X[H]).slice(-10)+" 00000 n "):ne("0000000000 00000 n ")},mi=m.__private__.buildDocument=function(){var A;Z=0,ce=0,pe=[],X=[],we=[],Fo=Xr(),ta=Xr(),qe(pe),Ar.publish("buildDocument"),qn(),ra(),(function(){Ar.publish("putAdditionalObjects");for(var he=0;he<we.length;he++){var be=we[he];_n(be.objId,!0),ne(be.content),ne("endobj")}Ar.publish("postPutAdditionalObjects")})(),A=[],(function(){for(var he in Gt)Gt.hasOwnProperty(he)&&(p===!1||p===!0&&v.hasOwnProperty(he))&&Bo(Gt[he])})(),(function(){var he;for(he in Vt)Vt.hasOwnProperty(he)&&nm(Vt[he])})(),(function(){for(var he in nr)nr.hasOwnProperty(he)&&El(nr[he])})(),(function(he){var be;for(be in Be)Be.hasOwnProperty(be)&&(Be[be]instanceof Dd?Al(Be[be]):Be[be]instanceof dh&&Pc(Be[be],he))})(A),Ar.publish("putResources"),A.forEach(fn),fn({resourcesOid:ta,objectOid:Number.MAX_SAFE_INTEGER}),Ar.publish("postPutResources"),h!==null&&(ts.oid=br(),ne("<<"),ne("/Filter /Standard"),ne("/V "+ts.v),ne("/R "+ts.r),ne("/U <"+ts.toHexString(ts.U)+">"),ne("/O <"+ts.toHexString(ts.O)+">"),ne("/P "+ts.P),ne(">>"),ne("endobj")),zn(),Lc();var H=ce;return Tl(),sm(),ne("startxref"),ne(""+H),ne("%%EOF"),qe(Pe[V]),pe.join(`
`)},Ta=m.__private__.getBlob=function(A){return new Blob([jt(A)],{type:"application/pdf"})},Rl=m.output=m.__private__.output=(Kt=function(A,H){switch(typeof(H=H||{})=="string"?H={filename:H}:H.filename=H.filename||"generated.pdf",A){case void 0:return mi();case"save":m.save(H.filename);break;case"arraybuffer":return jt(mi());case"blob":return Ta(mi());case"bloburi":case"bloburl":if(fr.URL!==void 0&&typeof fr.URL.createObjectURL=="function")return fr.URL&&fr.URL.createObjectURL(Ta(mi()))||void 0;mn.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var he="",be=mi();try{he=xS(be)}catch{he=xS(unescape(encodeURIComponent(be)))}return"data:application/pdf;filename="+H.filename+";base64,"+he;case"pdfobjectnewwindow":if(Object.prototype.toString.call(fr)==="[object Window]"){var Ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ke=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';H.pdfObjectUrl&&(Ae=H.pdfObjectUrl,Ke="");var rt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ae+'"'+Ke+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(H)+");<\/script></body></html>",Rt=fr.open();return Rt!==null&&Rt.document.write(rt),Rt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(fr)==="[object Window]"){var Ft='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(H.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+H.filename+'" width="500px" height="400px" /></body></html>',lr=fr.open();if(lr!==null){lr.document.write(Ft);var hr=this;lr.document.documentElement.querySelector("#pdfViewer").onload=function(){lr.document.title=H.filename,lr.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(hr.output("bloburl"))}}return lr}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(fr)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",H)+'"></iframe></body></html>',Nn=fr.open();if(Nn!==null&&(Nn.document.write(Dr),Nn.document.title=H.filename),Nn||typeof safari>"u")return Nn;break;case"datauri":case"dataurl":return fr.document.location.href=this.output("datauristring",H);default:return null}},Kt.foo=function(){try{return Kt.apply(this,arguments)}catch(he){var A=he.stack||"";~A.indexOf(" at ")&&(A=A.split(" at ")[1]);var H="Error in function "+A.split(`
`)[0].split("<")[0]+": "+he.message;if(!fr.console)throw new Error(H);fr.console.error(H,he),fr.alert&&alert(H)}},Kt.foo.bar=Kt,Kt.foo),Ai=function(A){return Array.isArray(Ht)===!0&&Ht.indexOf(A)>-1};switch(n){case"pt":$t=1;break;case"mm":$t=72/25.4;break;case"cm":$t=72/2.54;break;case"in":$t=72;break;case"px":$t=Ai("px_scaling")==1?.75:96/72;break;case"pc":case"em":$t=12;break;case"ex":$t=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);$t=n}var ts=null;te(),G();var na=m.__private__.getPageInfo=m.getPageInfo=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:Tt[A].objId,pageNumber:A,pageContext:Tt[A]}},Ju=m.__private__.getPageInfoByObjId=function(A){if(isNaN(A)||A%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var H in Tt)if(Tt[H].objId===A)break;return na(H)},Zu=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:Tt[V].objId,pageNumber:V,pageContext:Tt[V]}};m.addPage=function(){return ff.apply(this,arguments),this},m.setPage=function(){return Pl.apply(this,arguments),qe.call(this,Pe[V]),this},m.insertPage=function(A){return this.addPage(),this.movePage(V,A),this},m.movePage=function(A,H){var he,be;if(A>H){he=Pe[A],be=Tt[A];for(var Ae=A;Ae>H;Ae--)Pe[Ae]=Pe[Ae-1],Tt[Ae]=Tt[Ae-1];Pe[H]=he,Tt[H]=be,this.setPage(H)}else if(A<H){he=Pe[A],be=Tt[A];for(var Ke=A;Ke<H;Ke++)Pe[Ke]=Pe[Ke+1],Tt[Ke]=Tt[Ke+1];Pe[H]=he,Tt[H]=be,this.setPage(H)}return this},m.deletePage=function(){return Rc.apply(this,arguments),this},m.__private__.text=m.text=function(A,H,he,be,Ae){var Ke,rt,Rt,Ft,lr,hr,Dr,Nn,Vn,un=(be=be||{}).scope||this;if(typeof A=="number"&&typeof H=="number"&&(typeof he=="string"||Array.isArray(he))){var rs=he;he=H,H=A,A=rs}if(arguments[3]instanceof Et==0?(Rt=arguments[4],Ft=arguments[5],ln(Dr=arguments[3])==="object"&&Dr!==null||(typeof Rt=="string"&&(Ft=Rt,Rt=null),typeof Dr=="string"&&(Ft=Dr,Dr=null),typeof Dr=="number"&&(Rt=Dr,Dr=null),be={flags:Dr,angle:Rt,align:Ft})):(I("The transform parameter of text() with a Matrix value"),Vn=Ae),isNaN(H)||isNaN(he)||A==null)throw new Error("Invalid arguments passed to jsPDF.text");if(A.length===0)return un;var Dn,_s="",to=typeof be.lineHeightFactor=="number"?be.lineHeightFactor:Ks,ia=un.internal.scaleFactor;function ro(Br){return Br=Br.split("	").join(Array(be.TabLen||9).join(" ")),fi(Br,Dr)}function $l(Br){for(var Qr,En=Br.concat(),Wn=[],la=En.length;la--;)typeof(Qr=En.shift())=="string"?Wn.push(Qr):Array.isArray(Br)&&(Qr.length===1||Qr[1]===void 0&&Qr[2]===void 0)?Wn.push(Qr[0]):Wn.push([Qr[0],Qr[1],Qr[2]]);return Wn}function $c(Br,Qr){var En;if(typeof Br=="string")En=Qr(Br)[0];else if(Array.isArray(Br)){for(var Wn,la,ad=Br.concat(),Hc=[],oo=ad.length;oo--;)typeof(Wn=ad.shift())=="string"?Hc.push(Qr(Wn)[0]):Array.isArray(Wn)&&typeof Wn[0]=="string"&&(la=Qr(Wn[0],Wn[1],Wn[2]),Hc.push([la[0],la[1],la[2]]));En=Hc}return En}var qo=!1,zl=!0;if(typeof A=="string")qo=!0;else if(Array.isArray(A)){var Vo=A.concat();rt=[];for(var Wo,Ns=Vo.length;Ns--;)(typeof(Wo=Vo.shift())!="string"||Array.isArray(Wo)&&typeof Wo[0]!="string")&&(zl=!1);qo=zl}if(qo===!1)throw new Error('Type of text must be string or Array. "'+A+'" is not recognized.');typeof A=="string"&&(A=A.match(/[\r?\n]/)?A.split(/\r\n|\r|\n/g):[A]);var ql=Xe/un.internal.scaleFactor,Vl=ql*(to-1);switch(be.baseline){case"bottom":he-=Vl;break;case"top":he+=ql-Vl;break;case"hanging":he+=ql-2*Vl;break;case"middle":he+=ql/2-Vl}if((hr=be.maxWidth||0)>0&&(typeof A=="string"?A=un.splitTextToSize(A,hr):Object.prototype.toString.call(A)==="[object Array]"&&(A=A.reduce(function(Br,Qr){return Br.concat(un.splitTextToSize(Qr,hr))},[]))),Ke={text:A,x:H,y:he,options:be,mutex:{pdfEscape:fi,activeFontKey:gt,fonts:Gt,activeFontSize:Xe}},Ar.publish("preProcessText",Ke),A=Ke.text,Rt=(be=Ke.options).angle,Vn instanceof Et==0&&Rt&&typeof Rt=="number"){Rt*=Math.PI/180,be.rotationDirection===0&&(Rt=-Rt),C===k&&(Rt=-Rt);var sd=Math.cos(Rt),id=Math.sin(Rt);Vn=new Et(sd,id,-id,sd,0,0)}else Rt&&Rt instanceof Et&&(Vn=Rt);C!==k||Vn||(Vn=nt),(lr=be.charSpace||Ys)!==void 0&&(_s+=U(z(lr))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Nn=be.horizontalScale)!==void 0&&(_s+=U(100*Nn)+` Tz
`),be.lang;var Us=-1,aa=be.renderingMode!==void 0?be.renderingMode:be.stroke,Oa=un.internal.getCurrentPageInfo().pageContext;switch(aa){case 0:case!1:case"fill":Us=0;break;case 1:case!0:case"stroke":Us=1;break;case 2:case"fillThenStroke":Us=2;break;case 3:case"invisible":Us=3;break;case 4:case"fillAndAddForClipping":Us=4;break;case 5:case"strokeAndAddPathForClipping":Us=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Us=6;break;case 7:case"addToPathForClipping":Us=7}var yf=Oa.usedRenderingMode!==void 0?Oa.usedRenderingMode:-1;Us!==-1?_s+=Us+` Tr
`:yf!==-1&&(_s+=`0 Tr
`),Us!==-1&&(Oa.usedRenderingMode=Us),Ft=be.align||"left";var gi,Ho=Xe*to,zc=un.internal.pageSize.getWidth(),qc=Gt[gt];lr=be.charSpace||Ys,hr=be.maxWidth||0,Dr=Object.assign({autoencode:!0,noBOM:!0},be.flags);var no=[],Ii=function(Br){return un.getStringUnitWidth(Br,{font:qc,charSpace:lr,fontSize:Xe,doKerning:!1})*Xe/ia};if(Object.prototype.toString.call(A)==="[object Array]"){var vi;rt=$l(A),Ft!=="left"&&(gi=rt.map(Ii));var yi,Go=0;if(Ft==="right"){H-=gi[0],A=[],Ns=rt.length;for(var Ma=0;Ma<Ns;Ma++)Ma===0?(yi=pi(H),vi=Xa(he)):(yi=z(Go-gi[Ma]),vi=-Ho),A.push([rt[Ma],yi,vi]),Go=gi[Ma]}else if(Ft==="center"){H-=gi[0]/2,A=[],Ns=rt.length;for(var so=0;so<Ns;so++)so===0?(yi=pi(H),vi=Xa(he)):(yi=z((Go-gi[so])/2),vi=-Ho),A.push([rt[so],yi,vi]),Go=gi[so]}else if(Ft==="left"){A=[],Ns=rt.length;for(var io=0;io<Ns;io++)A.push(rt[io])}else if(Ft==="justify"&&qc.encoding==="Identity-H"){A=[],Ns=rt.length,hr=hr!==0?hr:zc;for(var Fa=0,In=0;In<Ns;In++)if(vi=In===0?Xa(he):-Ho,yi=In===0?pi(H):Fa,In<Ns-1){var Wl=z((hr-gi[In])/(rt[In].split(" ").length-1)),Ba=rt[In].split(" ");A.push([Ba[0]+" ",yi,vi]),Fa=0;for(var oa=1;oa<Ba.length;oa++){var Hl=(Ii(Ba[oa-1]+" "+Ba[oa])-Ii(Ba[oa]))*ia+Wl;oa==Ba.length-1?A.push([Ba[oa],Hl,0]):A.push([Ba[oa]+" ",Hl,0]),Fa-=Hl}}else A.push([rt[In],yi,vi]);A.push(["",Fa,0])}else{if(Ft!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(A=[],Ns=rt.length,hr=hr!==0?hr:zc,In=0;In<Ns;In++){vi=In===0?Xa(he):-Ho,yi=In===0?pi(H):0;var Gl=rt[In].split(" ").length-1,Vc=Gl>0?(hr-gi[In])/Gl:0;In<Ns-1?no.push(U(z(Vc))):no.push(0),A.push([rt[In],yi,vi])}}}(typeof be.R2L=="boolean"?be.R2L:Ce)===!0&&(A=$c(A,function(Br,Qr,En){return[Br.split("").reverse().join(""),Qr,En]})),Ke={text:A,x:H,y:he,options:be,mutex:{pdfEscape:fi,activeFontKey:gt,fonts:Gt,activeFontSize:Xe}},Ar.publish("postProcessText",Ke),A=Ke.text,Dn=Ke.mutex.isHex||!1;var Wc=Gt[gt].encoding;Wc!=="WinAnsiEncoding"&&Wc!=="StandardEncoding"||(A=$c(A,function(Br,Qr,En){return[ro(Br),Qr,En]})),rt=$l(A),A=[];for(var ao,Ko,Yo,Kl=Array.isArray(rt[0])?1:0,Qo="",Yl=function(Br,Qr,En){var Wn="";return En instanceof Et?(En=typeof be.angle=="number"?Ee(En,new Et(1,0,0,1,Br,Qr)):Ee(new Et(1,0,0,1,Br,Qr),En),C===k&&(En=Ee(new Et(1,0,0,-1,0,0),En)),Wn=En.join(" ")+` Tm
`):Wn=U(Br)+" "+U(Qr)+` Td
`,Wn},Cn=0;Cn<rt.length;Cn++){switch(Qo="",Kl){case 1:Yo=(Dn?"<":"(")+rt[Cn][0]+(Dn?">":")"),ao=parseFloat(rt[Cn][1]),Ko=parseFloat(rt[Cn][2]);break;case 0:Yo=(Dn?"<":"(")+rt[Cn]+(Dn?">":")"),ao=pi(H),Ko=Xa(he)}no!==void 0&&no[Cn]!==void 0&&(Qo=no[Cn]+` Tw
`),Cn===0?A.push(Qo+Yl(ao,Ko,Vn)+Yo):Kl===0?A.push(Qo+Yo):Kl===1&&A.push(Qo+Yl(ao,Ko,Vn)+Yo)}A=Kl===0?A.join(` Tj
T* `):A.join(` Tj
`),A+=` Tj
`;var Qs=`BT
/`;return Qs+=gt+" "+Xe+` Tf
`,Qs+=U(Xe*to)+` TL
`,Qs+=sa+`
`,Qs+=_s,Qs+=A,ne(Qs+="ET"),v[gt]=!0,un};var Ll=m.__private__.clip=m.clip=function(A){return ne(A==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Ll("evenodd")},m.__private__.discardPath=m.discardPath=function(){return ne("n"),this};var Ra=m.__private__.isValidStyle=function(A){var H=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(A)!==-1&&(H=!0),H};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(A){return Ra(A)&&(f=A),this};var Dc=m.__private__.getStyle=m.getStyle=function(A){var H=f;switch(A){case"D":case"S":H="S";break;case"F":H="f";break;case"FD":case"DF":H="B";break;case"f":case"f*":case"B":case"B*":H=A}return H},Mr=m.close=function(){return ne("h"),this};m.stroke=function(){return ne("S"),this},m.fill=function(A){return Dl("f",A),this},m.fillEvenOdd=function(A){return Dl("f*",A),this},m.fillStroke=function(A){return Dl("B",A),this},m.fillStrokeEvenOdd=function(A){return Dl("B*",A),this};var Dl=function(A,H){ln(H)==="object"?mf(H,A):ne(A)},$o=function(A){A===null||C===k&&A===void 0||(A=Dc(A),ne(A))};function Xu(A,H,he,be,Ae){var Ke=new dh(H||this.boundingBox,he||this.xStep,be||this.yStep,this.gState,Ae||this.matrix);Ke.stream=this.stream;var rt=A+"$$"+this.cloneIndex+++"$$";return vt(rt,Ke),Ke}var mf=function(A,H){var he=rr[A.key],be=Be[he];if(be instanceof Dd)ne("q"),ne(pf(H)),be.gState&&m.setGState(be.gState),ne(A.matrix.toString()+" cm"),ne("/"+he+" sh"),ne("Q");else if(be instanceof dh){var Ae=new Et(1,0,0,-1,0,Di());A.matrix&&(Ae=Ae.multiply(A.matrix||nt),he=Xu.call(be,A.key,A.boundingBox,A.xStep,A.yStep,Ae).id),ne("q"),ne("/Pattern cs"),ne("/"+he+" scn"),be.gState&&m.setGState(be.gState),ne(H),ne("Q")}},pf=function(A){switch(A){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ic=m.moveTo=function(A,H){return ne(U(z(A))+" "+U(q(H))+" m"),this},Oc=m.lineTo=function(A,H){return ne(U(z(A))+" "+U(q(H))+" l"),this},Gs=m.curveTo=function(A,H,he,be,Ae,Ke){return ne([U(z(A)),U(q(H)),U(z(he)),U(q(be)),U(z(Ae)),U(q(Ke)),"c"].join(" ")),this};m.__private__.line=m.line=function(A,H,he,be,Ae){if(isNaN(A)||isNaN(H)||isNaN(he)||isNaN(be)||!Ra(Ae))throw new Error("Invalid arguments passed to jsPDF.line");return C===E?this.lines([[he-A,be-H]],A,H,[1,1],Ae||"S"):this.lines([[he-A,be-H]],A,H,[1,1]).stroke()},m.__private__.lines=m.lines=function(A,H,he,be,Ae,Ke){var rt,Rt,Ft,lr,hr,Dr,Nn,Vn,un,rs,Dn,_s;if(typeof A=="number"&&(_s=he,he=H,H=A,A=_s),be=be||[1,1],Ke=Ke||!1,isNaN(H)||isNaN(he)||!Array.isArray(A)||!Array.isArray(be)||!Ra(Ae)||typeof Ke!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ic(H,he),rt=be[0],Rt=be[1],lr=A.length,rs=H,Dn=he,Ft=0;Ft<lr;Ft++)(hr=A[Ft]).length===2?(rs=hr[0]*rt+rs,Dn=hr[1]*Rt+Dn,Oc(rs,Dn)):(Dr=hr[0]*rt+rs,Nn=hr[1]*Rt+Dn,Vn=hr[2]*rt+rs,un=hr[3]*Rt+Dn,rs=hr[4]*rt+rs,Dn=hr[5]*Rt+Dn,Gs(Dr,Nn,Vn,un,rs,Dn));return Ke&&Mr(),$o(Ae),this},m.path=function(A){for(var H=0;H<A.length;H++){var he=A[H],be=he.c;switch(he.op){case"m":Ic(be[0],be[1]);break;case"l":Oc(be[0],be[1]);break;case"c":Gs.apply(this,be);break;case"h":Mr()}}return this},m.__private__.rect=m.rect=function(A,H,he,be,Ae){if(isNaN(A)||isNaN(H)||isNaN(he)||isNaN(be)||!Ra(Ae))throw new Error("Invalid arguments passed to jsPDF.rect");return C===E&&(be=-be),ne([U(z(A)),U(q(H)),U(z(he)),U(z(be)),"re"].join(" ")),$o(Ae),this},m.__private__.triangle=m.triangle=function(A,H,he,be,Ae,Ke,rt){if(isNaN(A)||isNaN(H)||isNaN(he)||isNaN(be)||isNaN(Ae)||isNaN(Ke)||!Ra(rt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[he-A,be-H],[Ae-he,Ke-be],[A-Ae,H-Ke]],A,H,[1,1],rt,!0),this},m.__private__.roundedRect=m.roundedRect=function(A,H,he,be,Ae,Ke,rt){if(isNaN(A)||isNaN(H)||isNaN(he)||isNaN(be)||isNaN(Ae)||isNaN(Ke)||!Ra(rt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Rt=4/3*(Math.SQRT2-1);return Ae=Math.min(Ae,.5*he),Ke=Math.min(Ke,.5*be),this.lines([[he-2*Ae,0],[Ae*Rt,0,Ae,Ke-Ke*Rt,Ae,Ke],[0,be-2*Ke],[0,Ke*Rt,-Ae*Rt,Ke,-Ae,Ke],[2*Ae-he,0],[-Ae*Rt,0,-Ae,-Ke*Rt,-Ae,-Ke],[0,2*Ke-be],[0,-Ke*Rt,Ae*Rt,-Ke,Ae,-Ke]],A+Ae,H,[1,1],rt,!0),this},m.__private__.ellipse=m.ellipse=function(A,H,he,be,Ae){if(isNaN(A)||isNaN(H)||isNaN(he)||isNaN(be)||!Ra(Ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ke=4/3*(Math.SQRT2-1)*he,rt=4/3*(Math.SQRT2-1)*be;return Ic(A+he,H),Gs(A+he,H-rt,A+Ke,H-be,A,H-be),Gs(A-Ke,H-be,A-he,H-rt,A-he,H),Gs(A-he,H+rt,A-Ke,H+be,A,H+be),Gs(A+Ke,H+be,A+he,H+rt,A+he,H),$o(Ae),this},m.__private__.circle=m.circle=function(A,H,he,be){if(isNaN(A)||isNaN(H)||isNaN(he)||!Ra(be))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(A,H,he,he,be)},m.setFont=function(A,H,he){return he&&(H=F(H,he)),gt=hf(A,H,{disableWarning:!1}),this};var La=m.__private__.getFont=m.getFont=function(){return Gt[hf.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var A,H,he={};for(A in ir)if(ir.hasOwnProperty(A))for(H in he[A]=[],ir[A])ir[A].hasOwnProperty(H)&&he[A].push(H);return he},m.addFont=function(A,H,he,be,Ae){var Ke=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ke.indexOf(arguments[3])!==-1?Ae=arguments[3]:arguments[3]&&Ke.indexOf(arguments[3])==-1&&(he=F(he,be)),Tc.call(this,A,H,he,Ae=Ae||"Identity-H")};var Ks,Pi=e.lineWidth||.200025,Il=m.__private__.getLineWidth=m.getLineWidth=function(){return Pi},tr=m.__private__.setLineWidth=m.setLineWidth=function(A){return Pi=A,ne(U(z(A))+" w"),this};m.__private__.setLineDash=Wt.API.setLineDash=Wt.API.setLineDashPattern=function(A,H){if(A=A||[],H=H||0,isNaN(H)||!Array.isArray(A))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return A=A.map(function(he){return U(z(he))}).join(" "),H=U(z(H)),ne("["+A+"] "+H+" d"),this};var Da=m.__private__.getLineHeight=m.getLineHeight=function(){return Xe*Ks};m.__private__.getLineHeight=m.getLineHeight=function(){return Xe*Ks};var im=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(A){return typeof(A=A||1.15)=="number"&&(Ks=A),this},gf=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return Ks};im(e.lineHeight);var pi=m.__private__.getHorizontalCoordinate=function(A){return z(A)},Xa=m.__private__.getVerticalCoordinate=function(A){return C===k?A:Tt[V].mediaBox.topRightY-Tt[V].mediaBox.bottomLeftY-z(A)},vf=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(A){return U(pi(A))},Mc=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(A){return U(Xa(A))},Ol=e.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Pa(Ol)},m.__private__.setStrokeColor=m.setDrawColor=function(A,H,he,be){return Ol=bs({ch1:A,ch2:H,ch3:he,ch4:be,pdfColorType:"draw",precision:2}),ne(Ol),this};var ed=e.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Pa(ed)},m.__private__.setFillColor=m.setFillColor=function(A,H,he,be){return ed=bs({ch1:A,ch2:H,ch3:he,ch4:be,pdfColorType:"fill",precision:2}),ne(ed),this};var sa=e.textColor||"0 g",Ml=m.__private__.getTextColor=m.getTextColor=function(){return Pa(sa)};m.__private__.setTextColor=m.setTextColor=function(A,H,he,be){return sa=bs({ch1:A,ch2:H,ch3:he,ch4:be,pdfColorType:"text",precision:3}),this};var Ys=e.charSpace,Fc=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(Ys||0)};m.__private__.setCharSpace=m.setCharSpace=function(A){if(isNaN(A))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Ys=A,this};var td=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(A){var H=m.CapJoinStyles[A];if(H===void 0)throw new Error("Line cap style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return td=H,ne(H+" J"),this};var rd=0;m.__private__.setLineJoin=m.setLineJoin=function(A){var H=m.CapJoinStyles[A];if(H===void 0)throw new Error("Line join style of '"+A+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return rd=H,ne(H+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(A){if(A=A||0,isNaN(A))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ne(U(z(A))+" M"),this},m.GState=Gv,m.setGState=function(A){(A=typeof A=="string"?Vt[Yt[A]]:Bc(null,A)).equals(Rr)||(ne("/"+A.id+" gs"),Rr=A)};var Bc=function(A,H){if(!A||!Yt[A]){var he=!1;for(var be in Vt)if(Vt.hasOwnProperty(be)&&Vt[be].equals(H)){he=!0;break}if(he)H=Vt[be];else{var Ae="GS"+(Object.keys(Vt).length+1).toString(10);Vt[Ae]=H,H.id=Ae}return A&&(Yt[A]=H.id),Ar.publish("addGState",H),H}};m.addGState=function(A,H){return Bc(A,H),this},m.saveGraphicsState=function(){return ne("q"),Nr.push({key:gt,size:Xe,color:sa}),this},m.restoreGraphicsState=function(){ne("Q");var A=Nr.pop();return gt=A.key,Xe=A.size,sa=A.color,Rr=null,this},m.setCurrentTransformationMatrix=function(A){return ne(A.toString()+" cm"),this},m.comment=function(A){return ne("#"+A),this};var Ti=function(A,H){var he=A||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return he},set:function(Ke){isNaN(Ke)||(he=parseFloat(Ke))}});var be=H||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return be},set:function(Ke){isNaN(Ke)||(be=parseFloat(Ke))}});var Ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ae},set:function(Ke){Ae=Ke.toString()}}),this},Fl=function(A,H,he,be){Ti.call(this,A,H),this.type="rect";var Ae=he||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ae},set:function(rt){isNaN(rt)||(Ae=parseFloat(rt))}});var Ke=be||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ke},set:function(rt){isNaN(rt)||(Ke=parseFloat(rt))}}),this},Bl=function(){this.page=Qt,this.currentPage=V,this.pages=Pe.slice(0),this.pagesContext=Tt.slice(0),this.x=xt,this.y=Yr,this.matrix=ur,this.width=zo(V),this.height=Ul(V),this.outputDestination=ve,this.id="",this.objectNumber=-1};Bl.prototype.restore=function(){Qt=this.page,V=this.currentPage,Tt=this.pagesContext,Pe=this.pages,xt=this.x,Yr=this.y,ur=this.matrix,nd(V,this.width),Li(V,this.height),ve=this.outputDestination};var Ri=function(A,H,he,be,Ae){cn.push(new Bl),Qt=V=0,Pe=[],xt=A,Yr=H,ur=Ae,Uo([he,be])};for(var eo in m.beginFormObject=function(A,H,he,be,Ae){return Ri(A,H,he,be,Ae),this},m.endFormObject=function(A){return(function(H){if(jr[H])cn.pop().restore();else{var he=new Bl,be="Xo"+(Object.keys(nr).length+1).toString(10);he.id=be,jr[H]=be,nr[be]=he,Ar.publish("addFormObject",he),cn.pop().restore()}})(A),this},m.doFormObject=function(A,H){var he=nr[jr[A]];return ne("q"),ne(H.toString()+" cm"),ne("/"+he.id+" Do"),ne("Q"),this},m.getFormObject=function(A){var H=nr[jr[A]];return{x:H.x,y:H.y,width:H.width,height:H.height,matrix:H.matrix}},m.save=function(A,H){return A=A||"generated.pdf",(H=H||{}).returnPromise=H.returnPromise||!1,H.returnPromise===!1?(Ad(Ta(mi()),A),typeof Ad.unload=="function"&&fr.setTimeout&&setTimeout(Ad.unload,911),this):new Promise(function(he,be){try{var Ae=Ad(Ta(mi()),A);typeof Ad.unload=="function"&&fr.setTimeout&&setTimeout(Ad.unload,911),he(Ae)}catch(Ke){be(Ke.message)}})},Wt.API)Wt.API.hasOwnProperty(eo)&&(eo==="events"&&Wt.API.events.length?(function(A,H){var he,be,Ae;for(Ae=H.length-1;Ae!==-1;Ae--)he=H[Ae][0],be=H[Ae][1],A.subscribe.apply(A,[he].concat(typeof be=="function"?[be]:be))})(Ar,Wt.API.events):m[eo]=Wt.API[eo]);function zo(A){return Tt[A].mediaBox.topRightX-Tt[A].mediaBox.bottomLeftX}function nd(A,H){Tt[A].mediaBox.topRightX=H+Tt[A].mediaBox.bottomLeftX}function Ul(A){return Tt[A].mediaBox.topRightY-Tt[A].mediaBox.bottomLeftY}function Li(A,H){Tt[A].mediaBox.topRightY=H+Tt[A].mediaBox.bottomLeftY}var Ia=m.getPageWidth=function(A){return zo(A=A||V)/$t},As=m.setPageWidth=function(A,H){nd(A,H*$t)},Di=m.getPageHeight=function(A){return Ul(A=A||V)/$t},Uc=m.setPageHeight=function(A,H){Li(A,H*$t)};return m.internal={pdfEscape:fi,getStyle:Dc,getFont:La,getFontSize:ye,getCharSpace:Fc,getTextColor:Ml,getLineHeight:Da,getLineHeightFactor:gf,getLineWidth:Il,write:tt,getHorizontalCoordinate:pi,getVerticalCoordinate:Xa,getCoordinateString:vf,getVerticalCoordinateString:Mc,collections:{},newObject:br,newAdditionalObject:ui,newObjectDeferred:Xr,newObjectDeferredBegin:_n,getFilters:Ei,putStream:di,events:Ar,scaleFactor:$t,pageSize:{getWidth:function(){return Ia(V)},setWidth:function(A){As(V,A)},getHeight:function(){return Di(V)},setHeight:function(A){Uc(V,A)}},encryptionOptions:h,encryption:ts,getEncryptor:function(A){return h!==null?ts.encryptor(A,0):function(H){return H}},output:Rl,getNumberOfPages:hi,get pages(){return Pe},out:ne,f2:B,f3:O,getPageInfo:na,getPageInfoByObjId:Ju,getCurrentPageInfo:Zu,getPDFVersion:w,Point:Ti,Rectangle:Fl,Matrix:Et,hasHotfix:Ai},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return Ia(V)},set:function(A){As(V,A)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Di(V)},set:function(A){Uc(V,A)},enumerable:!0,configurable:!0}),(function(A){for(var H=0,he=St.length;H<he;H++){var be=Tc.call(this,A[H][0],A[H][1],A[H][2],St[H][3],!0);p===!1&&(v[be]=!0);var Ae=A[H][0].split("-");df({id:be,fontName:Ae[0],fontStyle:Ae[1]||""})}Ar.publish("addFonts",{fonts:Gt,dictionary:ir})}).call(m,St),gt="F1",ff(i,r),Ar.publish("initialized"),m}ih.prototype.lsbFirstWord=function(e){return String.fromCharCode(255&e,e>>8&255,e>>16&255,e>>24&255)},ih.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},ih.prototype.hexToBytes=function(e){for(var t=[],r=0;r<e.length;r+=2)t.push(String.fromCharCode(parseInt(e.substr(r,2),16)));return t.join("")},ih.prototype.processOwnerPassword=function(e,t){return Dw(Lw(t).substr(0,5),e)},ih.prototype.encryptor=function(e,t){var r=Lw(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(n){return Dw(r,n)}},Gv.prototype.equals=function(e){var t,r="id,objectNumber,equals";if(!e||ln(e)!==ln(this))return!1;var n=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;n++}for(t in e)e.hasOwnProperty(t)&&r.indexOf(t)<0&&n--;return n===0},Wt.API={events:[]},Wt.version="3.0.4";var Qn=Wt.API,Cb=1,uf=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Jf=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},vr=function(e){return e.toFixed(2)},vu=function(e){return e.toFixed(5)};Qn.__acroform__={};var ea=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},NS=function(e){return e*Cb},il=function(e){var t=new M6,r=It.internal.getHeight(e)||0,n=It.internal.getWidth(e)||0;return t.BBox=[0,0,Number(vr(n)),Number(vr(r))],t},bK=Qn.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|1<<t},_K=Qn.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&~(1<<t)},NK=Qn.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},as=Qn.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return NK(e,t-1)},os=Qn.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bK(e,t-1)},ls=Qn.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _K(e,t-1)},jK=Qn.__acroform__.calculateCoordinates=function(e,t){var r=t.internal.getHorizontalCoordinate,n=t.internal.getVerticalCoordinate,i=e[0],a=e[1],o=e[2],l=e[3],d={};return d.lowerLeft_X=r(i)||0,d.lowerLeft_Y=n(a+l)||0,d.upperRight_X=r(i+o)||0,d.upperRight_Y=n(a)||0,[Number(vr(d.lowerLeft_X)),Number(vr(d.lowerLeft_Y)),Number(vr(d.upperRight_X)),Number(vr(d.upperRight_Y))]},SK=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],r=e._V||e.DV,n=Iw(e,r),i=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+i+" "+vr(n.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(n.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=il(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},Iw=function(e,t){var r=e.fontSize===0?e.maxFontSize:e.fontSize,n={text:"",fontSize:""},i=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");i=e.multiline?i.map(function(B){return B.split(`
`)}):i.map(function(B){return[B]});var a=r,o=It.internal.getHeight(e)||0;o=o<0?-o:o;var l=It.internal.getWidth(e)||0;l=l<0?-l:l;var d=function(B,O,z){if(B+1<i.length){var q=O+" "+i[B+1][0];return nv(q,e,z).width<=l-4}return!1};a++;e:for(;a>0;){t="",a--;var f,h,p=nv("3",e,a).height,v=e.multiline?o-a:(o-p)/2,m=v+=2,j=0,w=0,_=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+nv(t,e,a=12).width+", FieldWidth:"+l+`
`;break}for(var S="",E=0,k=0;k<i.length;k++)if(i.hasOwnProperty(k)){var C=!1;if(i[k].length!==1&&_!==i[k].length-1){if((p+2)*(E+2)+2>o)continue e;S+=i[k][_],C=!0,w=k,k--}else{S=(S+=i[k][_]+" ").substr(S.length-1)==" "?S.substr(0,S.length-1):S;var D=parseInt(k),M=d(D,S,a),F=k>=i.length-1;if(M&&!F){S+=" ",_=0;continue}if(M||F){if(F)w=D;else if(e.multiline&&(p+2)*(E+2)+2>o)continue e}else{if(!e.multiline||(p+2)*(E+2)+2>o)continue e;w=D}}for(var U="",I=j;I<=w;I++){var K=i[I];if(e.multiline){if(I===w){U+=K[_]+" ",_=(_+1)%K.length;continue}if(I===j){U+=K[K.length-1]+" ";continue}}U+=K[0]+" "}switch(U=U.substr(U.length-1)==" "?U.substr(0,U.length-1):U,h=nv(U,e,a).width,e.textAlign){case"right":f=l-h-2;break;case"center":f=(l-h)/2;break;default:f=2}t+=vr(f)+" "+vr(m)+` Td
`,t+="("+uf(U)+`) Tj
`,t+=-vr(f)+` 0 Td
`,m=-(a+2),h=0,j=C?w:w+1,E++,S=""}break}return n.text=t,n.fontSize=a,n},nv=function(e,t,r){var n=t.scope.internal.getFont(t.fontName,t.fontStyle),i=t.scope.getStringUnitWidth(e,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:i}},kK={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},CK=function(e,t){var r={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(r)},EK=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(Oo.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(kK)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Cb=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new F6,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in n)if(n.hasOwnProperty(i)){var a=n[i];a.objId=void 0,a.hasAnnotation&&CK(a,r)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(r){(function(n,i){var a=!n;for(var o in n||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var l=n[o],d=[],f=l.Rect;if(l.Rect&&(l.Rect=jK(l.Rect,i)),i.internal.newObjectDeferredBegin(l.objId,!0),l.DA=It.createDefaultAppearanceStream(l),ln(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(d=l.getKeyValueListForStream()),l.Rect=f,l.hasAppearanceStream&&!l.appearanceStreamContent){var h=SK(l);d.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(l.appearanceStreamContent){var p="";for(var v in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(v)){var m=l.appearanceStreamContent[v];if(p+="/"+v+" ",p+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var j=m[o];typeof j=="function"&&(j=j.call(i,l)),p+="/"+o+" "+j+" ",i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j)}}else typeof(j=m)=="function"&&(j=j.call(i,l)),p+="/"+o+" "+j,i.internal.acroformPlugin.xForms.indexOf(j)>=0||i.internal.acroformPlugin.xForms.push(j);p+=">>"}d.push({key:"AP",value:`<<
`+p+">>"})}i.internal.putStream({additionalKeyValues:d,objectId:l.objId}),i.internal.out("endobj")}a&&(function(w,_){for(var S in w)if(w.hasOwnProperty(S)){var E=S,k=w[S];_.internal.newObjectDeferredBegin(k.objId,!0),ln(k)==="object"&&typeof k.putStream=="function"&&k.putStream(),delete w[E]}})(i.internal.acroformPlugin.xForms,i)})(r,e)}),e.internal.acroformPlugin.isInitialized=!0}},O6=Qn.__acroform__.arrayToPdfArray=function(e,t,r){var n=function(o){return o};if(Array.isArray(e)){for(var i="[",a=0;a<e.length;a++)switch(a!==0&&(i+=" "),ln(e[a])){case"boolean":case"number":case"object":i+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&r&&(n=r.internal.getEncryptor(t)),i+="("+uf(n(e[a].toString()))+")"):i+=e[a].toString()}return i+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},v1=function(e,t,r){var n=function(i){return i};return t!==void 0&&r&&(n=r.internal.getEncryptor(t)),(e=e||"").toString(),"("+uf(n(e))+")"},ll=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ll.prototype.toString=function(){return this.objId+" 0 R"},ll.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},ll.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var n=t[r],i=this[n];i&&(Array.isArray(i)?e.push({key:n,value:O6(i,this.objId,this.scope)}):i instanceof ll?(i.scope=this.scope,e.push({key:n,value:i.objId+" 0 R"})):typeof i!="function"&&e.push({key:n,value:i}))}return e};var M6=function(){ll.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){e=r.trim()},get:function(){return e||null}})};ea(M6,ll);var F6=function(){ll.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+uf(r(e))+")"}},set:function(r){e=r}})};ea(F6,ll);var Oo=function e(){ll.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute F supplied.');t=S}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!as(t,3)},set:function(S){S?this.F=os(t,3):this.F=ls(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(S){if(isNaN(S))throw new Error('Invalid value "'+S+'" for attribute Ff supplied.');r=S}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(S){n=S!==void 0?S:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(S){n[0]=S}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(S){n[1]=S}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(S){n[2]=S}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(S){n[3]=S}});var i="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return i},set:function(S){switch(S){case"/Btn":case"/Tx":case"/Ch":case"/Sig":i=S;break;default:throw new Error('Invalid value "'+S+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Kv)return;a="FieldObject"+e.FieldNum++}var S=function(E){return E};return this.scope&&(S=this.scope.internal.getEncryptor(this.objId)),"("+uf(S(a))+")"},set:function(S){a=S.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(S){a=S}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(S){o=S}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(S){l=S}});var d=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return d},set:function(S){d=S}});var f=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return f===void 0?50/Cb:f},set:function(S){f=S}});var h="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return h},set:function(S){h=S}});var p="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!p||this instanceof Kv||this instanceof Ud))return v1(p,this.objId,this.scope)},set:function(S){S=S.toString(),p=S}});var v=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(v)return this instanceof Os==0?v1(v,this.objId,this.scope):v},set:function(S){S=S.toString(),v=this instanceof Os==0?S.substr(0,1)==="("?Jf(S.substr(1,S.length-2)):Jf(S):S}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Os==1?Jf(v.substr(1,v.length-1)):v},set:function(S){S=S.toString(),v=this instanceof Os==1?"/"+S:S}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(S){this.V=S}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Os==0?v1(m,this.objId,this.scope):m},set:function(S){S=S.toString(),m=this instanceof Os==0?S.substr(0,1)==="("?Jf(S.substr(1,S.length-2)):Jf(S):S}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Os==1?Jf(m.substr(1,m.length-1)):m},set:function(S){S=S.toString(),m=this instanceof Os==1?"/"+S:S}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var j,w=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return w},set:function(S){S=!!S,w=S}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(j)return j},set:function(S){j=S}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,1)},set:function(S){S?this.Ff=os(this.Ff,1):this.Ff=ls(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,2)},set:function(S){S?this.Ff=os(this.Ff,2):this.Ff=ls(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,3)},set:function(S){S?this.Ff=os(this.Ff,3):this.Ff=ls(this.Ff,3)}});var _=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(_!==null)return _},set:function(S){if([0,1,2].indexOf(S)===-1)throw new Error('Invalid value "'+S+'" for attribute Q supplied.');_=S}}),Object.defineProperty(this,"textAlign",{get:function(){var S;switch(_){case 0:default:S="left";break;case 1:S="center";break;case 2:S="right"}return S},configurable:!0,enumerable:!0,set:function(S){switch(S){case"right":case 2:_=2;break;case"center":case 1:_=1;break;default:_=0}}})};ea(Oo,ll);var xh=function(){Oo.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(r){e=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return O6(t,this.objId,this.scope)},set:function(r){var n,i;i=[],typeof(n=r)=="string"&&(i=(function(a,o,l){l||(l=1);for(var d,f=[];d=o.exec(a);)f.push(d[l]);return f})(n,/\((.*?)\)/g)),t=i}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,18)},set:function(r){r?this.Ff=os(this.Ff,18):this.Ff=ls(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=os(this.Ff,19):this.Ff=ls(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,20)},set:function(r){r?(this.Ff=os(this.Ff,20),t.sort()):this.Ff=ls(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,22)},set:function(r){r?this.Ff=os(this.Ff,22):this.Ff=ls(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(r){r?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,27)},set:function(r){r?this.Ff=os(this.Ff,27):this.Ff=ls(this.Ff,27)}}),this.hasAppearanceStream=!1};ea(xh,Oo);var wh=function(){xh.call(this),this.fontName="helvetica",this.combo=!1};ea(wh,xh);var bh=function(){wh.call(this),this.combo=!0};ea(bh,wh);var yv=function(){bh.call(this),this.edit=!0};ea(yv,bh);var Os=function(){Oo.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,15)},set:function(r){r?this.Ff=os(this.Ff,15):this.Ff=ls(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,16)},set:function(r){r?this.Ff=os(this.Ff,16):this.Ff=ls(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,17)},set:function(r){r?this.Ff=os(this.Ff,17):this.Ff=ls(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(r){r?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(a){return a};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var n,i=[];for(n in i.push("<<"),t)i.push("/"+n+" ("+uf(r(t[n]))+")");return i.push(">>"),i.join(`
`)}},set:function(r){ln(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(r){e="/"+r}})};ea(Os,Oo);var xv=function(){Os.call(this),this.pushButton=!0};ea(xv,Os);var _h=function(){Os.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};ea(_h,Os);var Kv=function(){var e,t;Oo.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(i){e=i}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(i){t=i}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var i=function(l){return l};this.scope&&(i=this.scope.internal.getEncryptor(this.objId));var a,o=[];for(a in o.push("<<"),n)o.push("/"+a+" ("+uf(i(n[a]))+")");return o.push(">>"),o.join(`
`)},set:function(i){ln(i)==="object"&&(n=i)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(i){typeof i=="string"&&(n.CA=i)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(i){r=i}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(i){r="/"+i}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=It.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};ea(Kv,Oo),_h.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=e.createAppearanceStream(r.optionName),r.caption=e.getCA()}},_h.prototype.createOption=function(e){var t=new Kv;return t.Parent=this,t.optionName=e,this.Kids.push(t),AK.call(this.scope,t),t};var wv=function(){Os.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=It.CheckBox.createAppearanceStream()};ea(wv,Os);var Ud=function(){Oo.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,13)},set:function(t){t?this.Ff=os(this.Ff,13):this.Ff=ls(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,21)},set:function(t){t?this.Ff=os(this.Ff,21):this.Ff=ls(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,23)},set:function(t){t?this.Ff=os(this.Ff,23):this.Ff=ls(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,24)},set:function(t){t?this.Ff=os(this.Ff,24):this.Ff=ls(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,25)},set:function(t){t?this.Ff=os(this.Ff,25):this.Ff=ls(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,26)},set:function(t){t?this.Ff=os(this.Ff,26):this.Ff=ls(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};ea(Ud,Oo);var bv=function(){Ud.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!as(this.Ff,14)},set:function(e){e?this.Ff=os(this.Ff,14):this.Ff=ls(this.Ff,14)}}),this.password=!0};ea(bv,Ud);var It={CheckBox:{createAppearanceStream:function(){return{N:{On:It.CheckBox.YesNormal},D:{On:It.CheckBox.YesPushDown,Off:It.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=il(e);t.scope=e.scope;var r=[],n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,i=e.scope.__private__.encodeColorString(e.color),a=Iw(e,e.caption);return r.push("0.749023 g"),r.push("0 0 "+vr(It.internal.getWidth(e))+" "+vr(It.internal.getHeight(e))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+vr(a.fontSize)+" Tf "+i),r.push("BT"),r.push(a.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(e){var t=il(e);t.scope=e.scope;var r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color),i=[],a=It.internal.getHeight(e),o=It.internal.getWidth(e),l=Iw(e,e.caption);return i.push("1 g"),i.push("0 0 "+vr(o)+" "+vr(a)+" re"),i.push("f"),i.push("q"),i.push("0 0 1 rg"),i.push("0 0 "+vr(o-1)+" "+vr(a-1)+" re"),i.push("W"),i.push("n"),i.push("0 g"),i.push("BT"),i.push("/"+r+" "+vr(l.fontSize)+" Tf "+n),i.push(l.text),i.push("ET"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(e){var t=il(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vr(It.internal.getWidth(e))+" "+vr(It.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:It.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=It.RadioButton.Circle.YesNormal,t.D[e]=It.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=il(e);t.scope=e.scope;var r=[],n=It.internal.getWidth(e)<=It.internal.getHeight(e)?It.internal.getWidth(e)/4:It.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=It.internal.Bezier_C,a=Number((n*i).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+vu(It.internal.getWidth(e)/2)+" "+vu(It.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+a+" "+a+" "+n+" 0 "+n+" c"),r.push("-"+a+" "+n+" -"+n+" "+a+" -"+n+" 0 c"),r.push("-"+n+" -"+a+" -"+a+" -"+n+" 0 -"+n+" c"),r.push(a+" -"+n+" "+n+" -"+a+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=il(e);t.scope=e.scope;var r=[],n=It.internal.getWidth(e)<=It.internal.getHeight(e)?It.internal.getWidth(e)/4:It.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*It.internal.Bezier_C).toFixed(5)),o=Number((n*It.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+vu(It.internal.getWidth(e)/2)+" "+vu(It.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+vu(It.internal.getWidth(e)/2)+" "+vu(It.internal.getHeight(e)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=il(e);t.scope=e.scope;var r=[],n=It.internal.getWidth(e)<=It.internal.getHeight(e)?It.internal.getWidth(e)/4:It.internal.getHeight(e)/4;n=Number((.9*n).toFixed(5));var i=Number((2*n).toFixed(5)),a=Number((i*It.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+vu(It.internal.getWidth(e)/2)+" "+vu(It.internal.getHeight(e)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:It.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=It.RadioButton.Cross.YesNormal,t.D[e]=It.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=il(e);t.scope=e.scope;var r=[],n=It.internal.calculateCross(e);return r.push("q"),r.push("1 1 "+vr(It.internal.getWidth(e)-2)+" "+vr(It.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(vr(n.x1.x)+" "+vr(n.x1.y)+" m"),r.push(vr(n.x2.x)+" "+vr(n.x2.y)+" l"),r.push(vr(n.x4.x)+" "+vr(n.x4.y)+" m"),r.push(vr(n.x3.x)+" "+vr(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(e){var t=il(e);t.scope=e.scope;var r=It.internal.calculateCross(e),n=[];return n.push("0.749023 g"),n.push("0 0 "+vr(It.internal.getWidth(e))+" "+vr(It.internal.getHeight(e))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+vr(It.internal.getWidth(e)-2)+" "+vr(It.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(vr(r.x1.x)+" "+vr(r.x1.y)+" m"),n.push(vr(r.x2.x)+" "+vr(r.x2.y)+" l"),n.push(vr(r.x4.x)+" "+vr(r.x4.y)+" m"),n.push(vr(r.x3.x)+" "+vr(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=il(e);t.scope=e.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+vr(It.internal.getWidth(e))+" "+vr(It.internal.getHeight(e))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+r}};It.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=It.internal.getWidth(e),r=It.internal.getHeight(e),n=Math.min(t,r);return{x1:{x:(t-n)/2,y:(r-n)/2+n},x2:{x:(t-n)/2+n,y:(r-n)/2},x3:{x:(t-n)/2,y:(r-n)/2},x4:{x:(t-n)/2+n,y:(r-n)/2+n}}}},It.internal.getWidth=function(e){var t=0;return ln(e)==="object"&&(t=NS(e.Rect[2])),t},It.internal.getHeight=function(e){var t=0;return ln(e)==="object"&&(t=NS(e.Rect[3])),t};var AK=Qn.addField=function(e){if(EK(this,e),!(e instanceof Oo))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Qn.AcroFormChoiceField=xh,Qn.AcroFormListBox=wh,Qn.AcroFormComboBox=bh,Qn.AcroFormEditBox=yv,Qn.AcroFormButton=Os,Qn.AcroFormPushButton=xv,Qn.AcroFormRadioButton=_h,Qn.AcroFormCheckBox=wv,Qn.AcroFormTextField=Ud,Qn.AcroFormPasswordField=bv,Qn.AcroFormAppearance=It,Qn.AcroForm={ChoiceField:xh,ListBox:wh,ComboBox:bh,EditBox:yv,Button:Os,PushButton:xv,RadioButton:_h,CheckBox:wv,TextField:Ud,PasswordField:bv,Appearance:It},Wt.AcroForm={ChoiceField:xh,ListBox:wh,ComboBox:bh,EditBox:yv,Button:Os,PushButton:xv,RadioButton:_h,CheckBox:wv,TextField:Ud,PasswordField:bv,Appearance:It};Wt.AcroForm;function B6(e){return e.reduce(function(t,r,n){return t[r]=n,t},{})}(function(e){var t="addImage_";e.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=e.__addimage__.getImageFileTypeByImageData=function(B,O){var z,q,ue,ie,le,G=r;if((O=O||r)==="RGBA"||B.data!==void 0&&B.data instanceof Uint8ClampedArray&&"height"in B&&"width"in B)return"RGBA";if(M(B))for(le in n)for(ue=n[le],z=0;z<ue.length;z+=1){for(ie=!0,q=0;q<ue[z].length;q+=1)if(ue[z][q]!==void 0&&ue[z][q]!==B[q]){ie=!1;break}if(ie===!0){G=le;break}}else for(le in n)for(ue=n[le],z=0;z<ue.length;z+=1){for(ie=!0,q=0;q<ue[z].length;q+=1)if(ue[z][q]!==void 0&&ue[z][q]!==B.charCodeAt(q)){ie=!1;break}if(ie===!0){G=le;break}}return G===r&&O!==r&&(G=O),G},a=function B(O){for(var z=this.internal.write,q=this.internal.putStream,ue=(0,this.internal.getFilters)();ue.indexOf("FlateEncode")!==-1;)ue.splice(ue.indexOf("FlateEncode"),1);O.objectId=this.internal.newObject();var ie=[];if(ie.push({key:"Type",value:"/XObject"}),ie.push({key:"Subtype",value:"/Image"}),ie.push({key:"Width",value:O.width}),ie.push({key:"Height",value:O.height}),O.colorSpace===S.INDEXED?ie.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(O.palette.length/3-1)+" "+("sMask"in O&&O.sMask!==void 0?O.objectId+2:O.objectId+1)+" 0 R]"}):(ie.push({key:"ColorSpace",value:"/"+O.colorSpace}),O.colorSpace===S.DEVICE_CMYK&&ie.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),ie.push({key:"BitsPerComponent",value:O.bitsPerComponent}),"decodeParameters"in O&&O.decodeParameters!==void 0&&ie.push({key:"DecodeParms",value:"<<"+O.decodeParameters+">>"}),"transparency"in O&&Array.isArray(O.transparency)&&O.transparency.length>0){for(var le="",G=0,se=O.transparency.length;G<se;G++)le+=O.transparency[G]+" "+O.transparency[G]+" ";ie.push({key:"Mask",value:"["+le+"]"})}O.sMask!==void 0&&ie.push({key:"SMask",value:O.objectId+1+" 0 R"});var xe=O.filter!==void 0?["/"+O.filter]:void 0;if(q({data:O.data,additionalKeyValues:ie,alreadyAppliedFilters:xe,objectId:O.objectId}),z("endobj"),"sMask"in O&&O.sMask!==void 0){var te,R=(te=O.sMaskBitsPerComponent)!==null&&te!==void 0?te:O.bitsPerComponent,V={width:O.width,height:O.height,colorSpace:"DeviceGray",bitsPerComponent:R,data:O.sMask};"filter"in O&&(V.decodeParameters="/Predictor ".concat(O.predictor," /Colors 1 /BitsPerComponent ").concat(R," /Columns ").concat(O.width),V.filter=O.filter),B.call(this,V)}if(O.colorSpace===S.INDEXED){var Q=this.internal.newObject();q({data:U(new Uint8Array(O.palette)),objectId:Q}),z("endobj")}},o=function(){var B=this.internal.collections[t+"images"];for(var O in B)a.call(this,B[O])},l=function(){var B,O=this.internal.collections[t+"images"],z=this.internal.write;for(var q in O)z("/I"+(B=O[q]).index,B.objectId,"0","R")},d=function(){this.internal.collections[t+"images"]||(this.internal.collections[t+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",l))},f=function(){var B=this.internal.collections[t+"images"];return d.call(this),B},h=function(){return Object.keys(this.internal.collections[t+"images"]).length},p=function(B){return typeof e["process"+B.toUpperCase()]=="function"},v=function(B){return ln(B)==="object"&&B.nodeType===1},m=function(B,O){if(B.nodeName==="IMG"&&B.hasAttribute("src")){var z=""+B.getAttribute("src");if(z.indexOf("data:image/")===0)return vv(unescape(z).split("base64,").pop());var q=e.loadFile(z,!0);if(q!==void 0)return q}if(B.nodeName==="CANVAS"){if(B.width===0||B.height===0)throw new Error("Given canvas must have data. Canvas width: "+B.width+", height: "+B.height);var ue;switch(O){case"PNG":ue="image/png";break;case"WEBP":ue="image/webp";break;default:ue="image/jpeg"}return vv(B.toDataURL(ue,1).split("base64,").pop())}},j=function(B){var O=this.internal.collections[t+"images"];if(O){for(var z in O)if(B===O[z].alias)return O[z]}},w=function(B,O,z){return B||O||(B=-96,O=-96),B<0&&(B=-1*z.width*72/B/this.internal.scaleFactor),O<0&&(O=-1*z.height*72/O/this.internal.scaleFactor),B===0&&(B=O*z.width/z.height),O===0&&(O=B*z.height/z.width),[B,O]},_=function(B,O,z,q,ue,ie){var le=w.call(this,z,q,ue),G=this.internal.getCoordinateString,se=this.internal.getVerticalCoordinateString,xe=f.call(this);if(z=le[0],q=le[1],xe[ue.index]=ue,ie){ie*=Math.PI/180;var te=Math.cos(ie),R=Math.sin(ie),V=function(re){return re.toFixed(4)},Q=[V(te),V(R),V(-1*R),V(te),0,0,"cm"]}this.internal.write("q"),ie?(this.internal.write([1,"0","0",1,G(B),se(O+q),"cm"].join(" ")),this.internal.write(Q.join(" ")),this.internal.write([G(z),"0","0",G(q),"0","0","cm"].join(" "))):this.internal.write([G(z),"0","0",G(q),G(B),se(O+q),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+ue.index+" Do"),this.internal.write("Q")},S=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var E=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=e.__addimage__.sHashCode=function(B){var O,z,q=0;if(typeof B=="string")for(z=B.length,O=0;O<z;O++)q=(q<<5)-q+B.charCodeAt(O),q|=0;else if(M(B))for(z=B.byteLength/2,O=0;O<z;O++)q=(q<<5)-q+B[O],q|=0;return q},C=e.__addimage__.validateStringAsBase64=function(B){(B=B||"").toString().trim();var O=!0;return B.length===0&&(O=!1),B.length%4!=0&&(O=!1),/^[A-Za-z0-9+/]+$/.test(B.substr(0,B.length-2))===!1&&(O=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(B.substr(-2))===!1&&(O=!1),O},D=e.__addimage__.extractImageFromDataUrl=function(B){if(B==null||!(B=B.trim()).startsWith("data:"))return null;var O=B.indexOf(",");return O<0?null:B.substring(0,O).trim().endsWith("base64")?B.substring(O+1):null};e.__addimage__.isArrayBuffer=function(B){return B instanceof ArrayBuffer};var M=e.__addimage__.isArrayBufferView=function(B){return B instanceof Int8Array||B instanceof Uint8Array||B instanceof Uint8ClampedArray||B instanceof Int16Array||B instanceof Uint16Array||B instanceof Int32Array||B instanceof Uint32Array||B instanceof Float32Array||B instanceof Float64Array},F=e.__addimage__.binaryStringToUint8Array=function(B){for(var O=B.length,z=new Uint8Array(O),q=0;q<O;q++)z[q]=B.charCodeAt(q);return z},U=e.__addimage__.arrayBufferToBinaryString=function(B){for(var O="",z=M(B)?B:new Uint8Array(B),q=0;q<z.length;q+=8192)O+=String.fromCharCode.apply(null,z.subarray(q,q+8192));return O};e.addImage=function(){var B,O,z,q,ue,ie,le,G,se;if(typeof arguments[1]=="number"?(O=r,z=arguments[1],q=arguments[2],ue=arguments[3],ie=arguments[4],le=arguments[5],G=arguments[6],se=arguments[7]):(O=arguments[1],z=arguments[2],q=arguments[3],ue=arguments[4],ie=arguments[5],le=arguments[6],G=arguments[7],se=arguments[8]),ln(B=arguments[0])==="object"&&!v(B)&&"imageData"in B){var xe=B;B=xe.imageData,O=xe.format||O||r,z=xe.x||z||0,q=xe.y||q||0,ue=xe.w||xe.width||ue,ie=xe.h||xe.height||ie,le=xe.alias||le,G=xe.compression||G,se=xe.rotation||xe.angle||se}var te=this.internal.getFilters();if(G===void 0&&te.indexOf("FlateEncode")!==-1&&(G="SLOW"),isNaN(z)||isNaN(q))throw new Error("Invalid coordinates passed to jsPDF.addImage");d.call(this);var R=I.call(this,B,O,le,G);return _.call(this,z,q,ue,ie,R,se),this};var I=function(B,O,z,q){var ue,ie,le;if(typeof B=="string"&&i(B)===r){B=unescape(B);var G=K(B,!1);(G!==""||(G=e.loadFile(B,!0))!==void 0)&&(B=G)}if(v(B)&&(B=m(B,O)),O=i(B,O),!p(O))throw new Error("addImage does not support files of type '"+O+"', please ensure that a plugin for '"+O+"' support is added.");if(((le=z)==null||le.length===0)&&(z=(function(se){return typeof se=="string"||M(se)?k(se):M(se.data)?k(se.data):null})(B)),(ue=j.call(this,z))||(B instanceof Uint8Array||O==="RGBA"||(ie=B,B=F(B)),ue=this["process"+O.toUpperCase()](B,h.call(this),z,(function(se){return se&&typeof se=="string"&&(se=se.toUpperCase()),se in e.image_compression?se:E.NONE})(q),ie)),!ue)throw new Error("An unknown error occurred whilst processing the image.");return ue},K=e.__addimage__.convertBase64ToBinaryString=function(B,O){O=typeof O!="boolean"||O;var z,q="";if(typeof B=="string"){var ue;z=(ue=D(B))!==null&&ue!==void 0?ue:B;try{q=vv(z)}catch(ie){if(O)throw C(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+ie.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return q};e.getImageProperties=function(B){var O,z,q="";if(v(B)&&(B=m(B)),typeof B=="string"&&i(B)===r&&((q=K(B,!1))===""&&(q=e.loadFile(B)||""),B=q),z=i(B),!p(z))throw new Error("addImage does not support files of type '"+z+"', please ensure that a plugin for '"+z+"' support is added.");if(B instanceof Uint8Array||(B=F(B)),!(O=this["process"+z.toUpperCase()](B)))throw new Error("An unknown error occurred whilst processing the image");return O.fileType=z,O}})(Wt.API),(function(e){var t=function(r){if(r!==void 0&&r!="")return!0};Wt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(r){for(var n,i,a,o=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,d=this.internal.getPageInfoByObjId(r.objId),f=r.pageContext.annotations,h=!1,p=0;p<f.length&&!h;p++)switch((n=f[p]).type){case"link":(t(n.options.url)||t(n.options.pageNumber))&&(h=!0);break;case"reference":case"text":case"freetext":h=!0}if(h!=0){this.internal.write("/Annots [");for(var v=0;v<f.length;v++){n=f[v];var m=this.internal.pdfEscape,j=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var w=this.internal.newAdditionalObject(),_=this.internal.newAdditionalObject(),S=this.internal.getEncryptor(w.objId),E=n.title||"Note";a="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y)+"] ")+"/Contents ("+m(S(n.contents))+")",a+=" /Popup "+_.objId+" 0 R",a+=" /P "+d.objId+" 0 R",a+=" /T ("+m(S(E))+") >>",w.content=a;var k=w.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(n.bounds.x+30)+" "+l(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+l(n.bounds.y)+"] ")+" /Parent "+k,n.open&&(a+=" /Open true"),a+=" >>",_.content=a,this.internal.write(w.objId,"0 R",_.objId,"0 R");break;case"freetext":i="/Rect ["+o(n.bounds.x)+" "+l(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+l(n.bounds.y+n.bounds.h)+"] ";var C=n.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+m(j(n.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+C+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(n.options.name){var D=this.annotations._nameMap[n.options.name];n.options.pageNumber=D.page,n.options.top=D.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",a="",n.options.url)a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+m(j(n.options.url))+") >>";else if(n.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,a+=" /FitV "+n.options.left+"]";break;default:var M=l(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),a+=" /XYZ "+n.options.left+" "+M+" "+n.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},e.link=function(r,n,i,a,o){var l=this.internal.getCurrentPageInfo(),d=this.internal.getCoordinateString,f=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:d(r),y:f(n),w:d(r+i),h:f(n+a)},options:o,type:"link"})},e.textWithLink=function(r,n,i,a){var o,l,d=this.getTextWidth(r),f=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){l=a.maxWidth;var h=this.splitTextToSize(r,l).length;o=Math.ceil(f*h)}else l=d,o=f;return this.text(r,n,i,a),i+=.2*f,a.align==="center"&&(n-=d/2),a.align==="right"&&(n-=d),this.link(n,i-f,l,o,a),d},e.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}})(Wt.API),(function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},i=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(w){return t[w.charCodeAt(0)]!==void 0},o=e.__arabicParser__.isArabicLetter=function(w){return typeof w=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(w)},l=e.__arabicParser__.isArabicEndLetter=function(w){return o(w)&&a(w)&&t[w.charCodeAt(0)].length<=2},d=e.__arabicParser__.isArabicAlfLetter=function(w){return o(w)&&i.indexOf(w.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(w){return o(w)&&a(w)&&t[w.charCodeAt(0)].length>=1};var f=e.__arabicParser__.arabicLetterHasFinalForm=function(w){return o(w)&&a(w)&&t[w.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(w){return o(w)&&a(w)&&t[w.charCodeAt(0)].length>=3};var h=e.__arabicParser__.arabicLetterHasMedialForm=function(w){return o(w)&&a(w)&&t[w.charCodeAt(0)].length==4},p=e.__arabicParser__.resolveLigatures=function(w){var _=0,S=r,E="",k=0;for(_=0;_<w.length;_+=1)S[w.charCodeAt(_)]!==void 0?(k++,typeof(S=S[w.charCodeAt(_)])=="number"&&(E+=String.fromCharCode(S),S=r,k=0),_===w.length-1&&(S=r,E+=w.charAt(_-(k-1)),_-=k-1,k=0)):(S=r,E+=w.charAt(_-k),_-=k,k=0);return E};e.__arabicParser__.isArabicDiacritic=function(w){return w!==void 0&&n[w.charCodeAt(0)]!==void 0};var v=e.__arabicParser__.getCorrectForm=function(w,_,S){return o(w)?a(w)===!1?-1:!f(w)||!o(_)&&!o(S)||!o(S)&&l(_)||l(w)&&!o(_)||l(w)&&d(_)||l(w)&&l(_)?0:h(w)&&o(_)&&!l(_)&&o(S)&&f(S)?3:l(w)||!o(S)?1:2:-1},m=function(w){var _=0,S=0,E=0,k="",C="",D="",M=(w=w||"").split("\\s+"),F=[];for(_=0;_<M.length;_+=1){for(F.push(""),S=0;S<M[_].length;S+=1)k=M[_][S],C=M[_][S-1],D=M[_][S+1],o(k)?(E=v(k,C,D),F[_]+=E!==-1?String.fromCharCode(t[k.charCodeAt(0)][E]):k):F[_]+=k;F[_]=p(F[_])}return F.join(" ")},j=e.__arabicParser__.processArabic=e.processArabic=function(){var w,_=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,S=[];if(Array.isArray(_)){var E=0;for(S=[],E=0;E<_.length;E+=1)Array.isArray(_[E])?S.push([m(_[E][0]),_[E][1],_[E][2]]):S.push([m(_[E])]);w=S}else w=m(_);return typeof arguments[0]=="string"?w:(arguments[0].text=w,arguments[0])};e.events.push(["preProcessText",j])})(Wt.API),Wt.API.autoPrint=function(e){var t;return(e=e||{}).variant=e.variant||"non-conform",e.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})),this},(function(e){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(l){r=l}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(l){n=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(l){i=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(l){a=l}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(l){o=l}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,n){var i;if((r=r||"2d")!=="2d")return null;for(i in n)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=n[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Wt.API),(function(e){var t={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),i.call(this))},i=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var d=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return d},set:function(w){d=w}});var f=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return f},set:function(w){f=w}});var h=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return h},set:function(w){h=w}});var p=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return p},set:function(w){p=w}});var v=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return v},set:function(w){v=w}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(w){m=w}});var j=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return j},set:function(w){j=w}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(d){return n.call(this),this.internal.__cell__.headerFunction=typeof d=="function"?d:void 0,this},e.getTextDimensions=function(d,f){n.call(this);var h=(f=f||{}).fontSize||this.getFontSize(),p=f.font||this.getFont(),v=f.scaleFactor||this.internal.scaleFactor,m=0,j=0,w=0,_=this;if(!Array.isArray(d)&&typeof d!="string"){if(typeof d!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");d=String(d)}var S=f.maxWidth;S>0?typeof d=="string"?d=this.splitTextToSize(d,S):Object.prototype.toString.call(d)==="[object Array]"&&(d=d.reduce(function(k,C){return k.concat(_.splitTextToSize(C,S))},[])):d=Array.isArray(d)?d:[d];for(var E=0;E<d.length;E++)m<(w=this.getStringUnitWidth(d[E],{font:p})*h)&&(m=w);return m!==0&&(j=d.length),{w:m/=v,h:Math.max((j*h*this.getLineHeightFactor()-h*(this.getLineHeightFactor()-1))/v,0)}},e.cellAddPage=function(){n.call(this),this.addPage();var d=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(d.left,d.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=e.cell=function(){var d;d=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var f=this.internal.__cell__.lastCell,h=this.internal.__cell__.padding,p=this.internal.__cell__.margins||t,v=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return f.lineNumber!==void 0&&(f.lineNumber===d.lineNumber?(d.x=(f.x||0)+(f.width||0),d.y=f.y||0):f.y+f.height+d.height+p.bottom>this.getPageHeight()?(this.cellAddPage(),d.y=p.top,m&&v&&(this.printHeaderRow(d.lineNumber,!0),d.y+=v[0].height)):d.y=f.y+f.height||d.y),d.text[0]!==void 0&&(this.rect(d.x,d.y,d.width,d.height,r===!0?"FD":void 0),d.align==="right"?this.text(d.text,d.x+d.width-h,d.y+h,{align:"right",baseline:"top"}):d.align==="center"?this.text(d.text,d.x+d.width/2,d.y+h,{align:"center",baseline:"top",maxWidth:d.width-h-h}):this.text(d.text,d.x+h,d.y+h,{align:"left",baseline:"top",maxWidth:d.width-h-h})),this.internal.__cell__.lastCell=d,this};e.table=function(d,f,h,p,v){if(n.call(this),!h)throw new Error("No data for PDF table.");var m,j,w,_,S=[],E=[],k=[],C={},D={},M=[],F=[],U=(v=v||{}).autoSize||!1,I=v.printHeaders!==!1,K=v.css&&v.css["font-size"]!==void 0?16*v.css["font-size"]:v.fontSize||12,B=v.margins||Object.assign({width:this.getPageWidth()},t),O=typeof v.padding=="number"?v.padding:3,z=v.headerBackgroundColor||"#c8c8c8",q=v.headerTextColor||"#000";if(i.call(this),this.internal.__cell__.printHeaders=I,this.internal.__cell__.margins=B,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=O,this.internal.__cell__.headerBackgroundColor=z,this.internal.__cell__.headerTextColor=q,this.setFontSize(K),p==null)E=S=Object.keys(h[0]),k=S.map(function(){return"left"});else if(Array.isArray(p)&&ln(p[0])==="object")for(S=p.map(function(xe){return xe.name}),E=p.map(function(xe){return xe.prompt||xe.name||""}),k=p.map(function(xe){return xe.align||"left"}),m=0;m<p.length;m+=1)D[p[m].name]=.7499990551181103*p[m].width;else Array.isArray(p)&&typeof p[0]=="string"&&(E=S=p,k=S.map(function(){return"left"}));if(U||Array.isArray(p)&&typeof p[0]=="string")for(m=0;m<S.length;m+=1){for(C[_=S[m]]=h.map(function(xe){return xe[_]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(E[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),j=C[_],this.setFont(void 0,"normal"),w=0;w<j.length;w+=1)M.push(this.getTextDimensions(j[w],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[_]=Math.max.apply(null,M)+O+O,M=[]}if(I){var ue={};for(m=0;m<S.length;m+=1)ue[S[m]]={},ue[S[m]].text=E[m],ue[S[m]].align=k[m];var ie=l.call(this,ue,D);F=S.map(function(xe){return new a(d,f,D[xe],ie,ue[xe].text,void 0,ue[xe].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var le=p.reduce(function(xe,te){return xe[te.name]=te.align,xe},{});for(m=0;m<h.length;m+=1){"rowStart"in v&&v.rowStart instanceof Function&&v.rowStart({row:m,data:h[m]},this);var G=l.call(this,h[m],D);for(w=0;w<S.length;w+=1){var se=h[m][S[w]];"cellStart"in v&&v.cellStart instanceof Function&&v.cellStart({row:m,col:w,data:se},this),o.call(this,new a(d,f,D[S[w]],G,se,m+2,le[S[w]]))}}return this.internal.__cell__.table_x=d,this.internal.__cell__.table_y=f,this};var l=function(d,f){var h=this.internal.__cell__.padding,p=this.internal.__cell__.table_font_size,v=this.internal.scaleFactor;return Object.keys(d).map(function(m){var j=d[m];return this.splitTextToSize(j.hasOwnProperty("text")?j.text:j,f[m]-h-h)},this).map(function(m){return this.getLineHeightFactor()*m.length*p/v+h+h},this).reduce(function(m,j){return Math.max(m,j)},0)};e.setTableHeaderRow=function(d){n.call(this),this.internal.__cell__.tableHeaderRow=d},e.printHeaderRow=function(d,f){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var h;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var p=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(p[0],p[1],p[2],p[3],void 0,-1)}this.setFont(void 0,"bold");for(var v=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){h=this.internal.__cell__.tableHeaderRow[m].clone(),f&&(h.y=this.internal.__cell__.margins.top||0,v.push(h)),h.lineNumber=d;var j=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,h),this.setTextColor(j)}v.length>0&&this.setTableHeaderRow(v),this.setFont(void 0,"normal"),r=!1}})(Wt.API);var U6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},$6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Ow=B6($6),z6=[100,200,300,400,500,600,700,800,900],PK=B6(z6);function y1(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),r=(function(a){return U6[a=a||"normal"]?a:"normal"})(e.style),n=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(e.weight),i=(function(a){return typeof Ow[a=a||"normal"]=="number"?a:"normal"})(e.stretch);return{family:t,style:r,weight:n,stretch:i,src:e.src||[],ref:e.ref||{name:t,style:[i,r,n].join(" ")}}}function jS(e,t,r,n){var i;for(i=r;i>=0&&i<t.length;i+=n)if(e[t[i]])return e[t[i]];for(i=r;i>=0&&i<t.length;i-=n)if(e[t[i]])return e[t[i]]}var TK={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},SS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function kS(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function CS(e){return e.trimLeft()}function RK(e,t){for(var r=0;r<e.length;){if(e.charAt(r)===t)return[e.substring(0,r),e.substring(r+1)];r+=1}return null}function LK(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var sv,ES,AS,Zf,iv,PS,TS,RS,x1=["times"];function LS(e,t,r,n,i){var a=4,o=IS;switch(i){case Wt.API.image_compression.FAST:a=1,o=DS;break;case Wt.API.image_compression.MEDIUM:a=6,o=OS;break;case Wt.API.image_compression.SLOW:a=9,o=MS}e=(function(d,f,h,p){for(var v,m=d.length/f,j=new Uint8Array(d.length+m),w=[DK,DS,IS,OS,MS],_=0;_<m;_+=1){var S=_*f,E=d.subarray(S,S+f);if(p)j.set(p(E,h,v),S+_);else{for(var k=w.length,C=[],D=0;D<k;D+=1)C[D]=w[D](E,h,v);var M=OK(C.concat());j.set(C[M],S+_)}v=E}return j})(e,t,Math.ceil(r*n/8),o);var l=Aw(e,{level:a});return Wt.API.__addimage__.arrayBufferToBinaryString(l)}function DK(e){var t=Array.apply([],e);return t.unshift(0),t}function DS(e,t){var r=e.length,n=[];n[0]=1;for(var i=0;i<r;i+=1){var a=e[i-t]||0;n[i+1]=e[i]-a+256&255}return n}function IS(e,t,r){var n=e.length,i=[];i[0]=2;for(var a=0;a<n;a+=1){var o=r&&r[a]||0;i[a+1]=e[a]-o+256&255}return i}function OS(e,t,r){var n=e.length,i=[];i[0]=3;for(var a=0;a<n;a+=1){var o=e[a-t]||0,l=r&&r[a]||0;i[a+1]=e[a]+256-(o+l>>>1)&255}return i}function MS(e,t,r){var n=e.length,i=[];i[0]=4;for(var a=0;a<n;a+=1){var o=IK(e[a-t]||0,r&&r[a]||0,r&&r[a-t]||0);i[a+1]=e[a]-o+256&255}return i}function IK(e,t,r){if(e===t&&t===r)return e;var n=Math.abs(t-r),i=Math.abs(e-r),a=Math.abs(e+t-r-r);return n<=i&&n<=a?e:i<=a?t:r}function OK(e){var t=e.map(function(r){return r.reduce(function(n,i){return n+Math.abs(i)},0)});return t.indexOf(Math.min.apply(null,t))}function w1(e,t,r){var n=t*r,i=Math.floor(n/8),a=16-(n-8*i+r),o=(1<<r)-1;return q6(e,i)>>a&o}function FS(e,t,r,n){var i=r*n,a=Math.floor(i/8),o=16-(i-8*a+n),l=(1<<n)-1,d=(t&l)<<o;(function(f,h,p){if(h+1<f.byteLength)f.setUint16(h,p,!1);else{var v=p>>8&255;f.setUint8(h,v)}})(e,a,q6(e,a)&~(l<<o)&65535|d)}function q6(e,t){return t+1<e.byteLength?e.getUint16(t,!1):e.getUint8(t)<<8}function MK(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=e[t++]|e[t++]<<8,n=e[t++]|e[t++]<<8,i=e[t++],a=i>>7,o=1<<1+(7&i);e[t++],e[t++];var l=null,d=null;a&&(l=t,d=o,t+=3*o);var f=!0,h=[],p=0,v=null,m=0,j=null;for(this.width=r,this.height=n;f&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,j=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((B=e[t++])>=0))throw Error("Invalid block size");if(B===0)break;t+=B}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var w=e[t++];p=e[t++]|e[t++]<<8,v=e[t++],1&w||(v=null),m=w>>2&7,t++;break;case 254:for(;;){if(!((B=e[t++])>=0))throw Error("Invalid block size");if(B===0)break;t+=B}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var _=e[t++]|e[t++]<<8,S=e[t++]|e[t++]<<8,E=e[t++]|e[t++]<<8,k=e[t++]|e[t++]<<8,C=e[t++],D=C>>6&1,M=1<<1+(7&C),F=l,U=d,I=!1;C>>7&&(I=!0,F=t,U=M,t+=3*M);var K=t;for(t++;;){var B;if(!((B=e[t++])>=0))throw Error("Invalid block size");if(B===0)break;t+=B}h.push({x:_,y:S,width:E,height:k,has_local_palette:I,palette_offset:F,palette_size:U,data_offset:K,data_length:t-K,transparent_index:v,interlaced:!!D,delay:p,disposal:m});break;case 59:f=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return j},this.frameInfo=function(O){if(O<0||O>=h.length)throw new Error("Frame index out of range.");return h[O]},this.decodeAndBlitFrameBGRA=function(O,z){var q=this.frameInfo(O),ue=q.width*q.height,ie=new Uint8Array(ue);BS(e,q.data_offset,ie,ue);var le=q.palette_offset,G=q.transparent_index;G===null&&(G=256);var se=q.width,xe=r-se,te=se,R=4*(q.y*r+q.x),V=4*((q.y+q.height)*r+q.x),Q=R,re=4*xe;q.interlaced===!0&&(re+=4*r*7);for(var Z=8,X=0,pe=ie.length;X<pe;++X){var ce=ie[X];if(te===0&&(te=se,(Q+=re)>=V&&(re=4*xe+4*r*(Z-1),Q=R+(se+xe)*(Z<<1),Z>>=1)),ce===G)Q+=4;else{var we=e[le+3*ce],Pe=e[le+3*ce+1],ze=e[le+3*ce+2];z[Q++]=ze,z[Q++]=Pe,z[Q++]=we,z[Q++]=255}--te}},this.decodeAndBlitFrameRGBA=function(O,z){var q=this.frameInfo(O),ue=q.width*q.height,ie=new Uint8Array(ue);BS(e,q.data_offset,ie,ue);var le=q.palette_offset,G=q.transparent_index;G===null&&(G=256);var se=q.width,xe=r-se,te=se,R=4*(q.y*r+q.x),V=4*((q.y+q.height)*r+q.x),Q=R,re=4*xe;q.interlaced===!0&&(re+=4*r*7);for(var Z=8,X=0,pe=ie.length;X<pe;++X){var ce=ie[X];if(te===0&&(te=se,(Q+=re)>=V&&(re=4*xe+4*r*(Z-1),Q=R+(se+xe)*(Z<<1),Z>>=1)),ce===G)Q+=4;else{var we=e[le+3*ce],Pe=e[le+3*ce+1],ze=e[le+3*ce+2];z[Q++]=we,z[Q++]=Pe,z[Q++]=ze,z[Q++]=255}--te}}}function BS(e,t,r,n){for(var i=e[t++],a=1<<i,o=a+1,l=o+1,d=i+1,f=(1<<d)-1,h=0,p=0,v=0,m=e[t++],j=new Int32Array(4096),w=null;;){for(;h<16&&m!==0;)p|=e[t++]<<h,h+=8,m===1?m=e[t++]:--m;if(h<d)break;var _=p&f;if(p>>=d,h-=d,_!==a){if(_===o)break;for(var S=_<l?_:w,E=0,k=S;k>a;)k=j[k]>>8,++E;var C=k;if(v+E+(S!==_?1:0)>n)return void mn.log("Warning, gif stream longer than expected.");r[v++]=C;var D=v+=E;for(S!==_&&(r[v++]=C),k=S;E--;)k=j[k],r[--D]=255&k,k>>=8;w!==null&&l<4096&&(j[l++]=w<<8|C,l>=f+1&&d<12&&(++d,f=f<<1|1)),w=_}else l=o+1,f=(1<<(d=i+1))-1,w=null}return v!==n&&mn.log("Warning, gif stream shorter than expected."),r}function b1(e){var t,r,n,i,a,o=Math.floor,l=new Array(64),d=new Array(64),f=new Array(64),h=new Array(64),p=new Array(65535),v=new Array(65535),m=new Array(64),j=new Array(64),w=[],_=0,S=7,E=new Array(64),k=new Array(64),C=new Array(64),D=new Array(256),M=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],U=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],O=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],z=[0,1,2,3,4,5,6,7,8,9,10,11],q=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],ue=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function ie(R,V){for(var Q=0,re=0,Z=new Array,X=1;X<=16;X++){for(var pe=1;pe<=R[X];pe++)Z[V[re]]=[],Z[V[re]][0]=Q,Z[V[re]][1]=X,re++,Q++;Q*=2}return Z}function le(R){for(var V=R[0],Q=R[1]-1;Q>=0;)V&1<<Q&&(_|=1<<S),Q--,--S<0&&(_==255?(G(255),G(0)):G(_),S=7,_=0)}function G(R){w.push(R)}function se(R){G(R>>8&255),G(255&R)}function xe(R,V,Q,re,Z){for(var X,pe=Z[0],ce=Z[240],we=(function(Xe,me){var ye,Ce,Ue,Je,He,Ze,ft,bt,gt,$t,xt=0;for(gt=0;gt<8;++gt){ye=Xe[xt],Ce=Xe[xt+1],Ue=Xe[xt+2],Je=Xe[xt+3],He=Xe[xt+4],Ze=Xe[xt+5],ft=Xe[xt+6];var Yr=ye+(bt=Xe[xt+7]),ur=ye-bt,Gt=Ce+ft,ir=Ce-ft,Nr=Ue+Ze,Be=Ue-Ze,rr=Je+He,Vt=Je-He,Yt=Yr+rr,Rr=Yr-rr,Qt=Gt+Nr,Tt=Gt-Nr;Xe[xt]=Yt+Qt,Xe[xt+4]=Yt-Qt;var Ar=.707106781*(Tt+Rr);Xe[xt+2]=Rr+Ar,Xe[xt+6]=Rr-Ar;var Ht=.382683433*((Yt=Vt+Be)-(Tt=ir+ur)),nr=.5411961*Yt+Ht,jr=1.306562965*Tt+Ht,cn=.707106781*(Qt=Be+ir),Et=ur+cn,Ee=ur-cn;Xe[xt+5]=Ee+nr,Xe[xt+3]=Ee-nr,Xe[xt+1]=Et+jr,Xe[xt+7]=Et-jr,xt+=8}for(xt=0,gt=0;gt<8;++gt){ye=Xe[xt],Ce=Xe[xt+8],Ue=Xe[xt+16],Je=Xe[xt+24],He=Xe[xt+32],Ze=Xe[xt+40],ft=Xe[xt+48];var nt=ye+(bt=Xe[xt+56]),vt=ye-bt,Kt=Ce+ft,br=Ce-ft,Xr=Ue+Ze,_n=Ue-Ze,ui=Je+He,Fo=Je-He,ta=nt+ui,Pa=nt-ui,bs=Kt+Xr,Ei=Kt-Xr;Xe[xt]=ta+bs,Xe[xt+32]=ta-bs;var di=.707106781*(Ei+Pa);Xe[xt+16]=Pa+di,Xe[xt+48]=Pa-di;var Cl=.382683433*((ta=Fo+_n)-(Ei=br+vt)),ra=.5411961*ta+Cl,Bo=1.306562965*Ei+Cl,El=.707106781*(bs=_n+br),Al=vt+El,Pc=vt-El;Xe[xt+40]=Pc+ra,Xe[xt+24]=Pc-ra,Xe[xt+8]=Al+Bo,Xe[xt+56]=Al-Bo,xt++}for(gt=0;gt<64;++gt)$t=Xe[gt]*me[gt],m[gt]=$t>0?$t+.5|0:$t-.5|0;return m})(R,V),Pe=0;Pe<64;++Pe)j[F[Pe]]=we[Pe];var ze=j[0]-Q;Q=j[0],ze==0?le(re[0]):(le(re[v[X=32767+ze]]),le(p[X]));for(var ve=63;ve>0&&j[ve]==0;)ve--;if(ve==0)return le(pe),Q;for(var qe,ne=1;ne<=ve;){for(var tt=ne;j[ne]==0&&ne<=ve;)++ne;var jt=ne-tt;if(jt>=16){qe=jt>>4;for(var St=1;St<=qe;++St)le(ce);jt&=15}X=32767+j[ne],le(Z[(jt<<4)+v[X]]),le(p[X]),ne++}return ve!=63&&le(pe),Q}function te(R){R=Math.min(Math.max(R,1),100),a!=R&&((function(V){for(var Q=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var Z=o((Q[re]*V+50)/100);Z=Math.min(Math.max(Z,1),255),l[F[re]]=Z}for(var X=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],pe=0;pe<64;pe++){var ce=o((X[pe]*V+50)/100);ce=Math.min(Math.max(ce,1),255),d[F[pe]]=ce}for(var we=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Pe=0,ze=0;ze<8;ze++)for(var ve=0;ve<8;ve++)f[Pe]=1/(l[F[Pe]]*we[ze]*we[ve]*8),h[Pe]=1/(d[F[Pe]]*we[ze]*we[ve]*8),Pe++})(R<50?Math.floor(5e3/R):Math.floor(200-2*R)),a=R)}this.encode=function(R,V){V&&te(V),w=new Array,_=0,S=7,se(65496),se(65504),se(16),G(74),G(70),G(73),G(70),G(0),G(1),G(1),G(0),se(1),se(1),G(0),G(0),(function(){se(65499),se(132),G(0);for(var Ce=0;Ce<64;Ce++)G(l[Ce]);G(1);for(var Ue=0;Ue<64;Ue++)G(d[Ue])})(),(function(Ce,Ue){se(65472),se(17),G(8),se(Ue),se(Ce),G(3),G(1),G(17),G(0),G(2),G(17),G(1),G(3),G(17),G(1)})(R.width,R.height),(function(){se(65476),se(418),G(0);for(var Ce=0;Ce<16;Ce++)G(U[Ce+1]);for(var Ue=0;Ue<=11;Ue++)G(I[Ue]);G(16);for(var Je=0;Je<16;Je++)G(K[Je+1]);for(var He=0;He<=161;He++)G(B[He]);G(1);for(var Ze=0;Ze<16;Ze++)G(O[Ze+1]);for(var ft=0;ft<=11;ft++)G(z[ft]);G(17);for(var bt=0;bt<16;bt++)G(q[bt+1]);for(var gt=0;gt<=161;gt++)G(ue[gt])})(),se(65498),se(12),G(3),G(1),G(0),G(2),G(17),G(3),G(17),G(0),G(63),G(0);var Q=0,re=0,Z=0;_=0,S=7,this.encode.displayName="_encode_";for(var X,pe,ce,we,Pe,ze,ve,qe,ne,tt=R.data,jt=R.width,St=R.height,Xe=4*jt,me=0;me<St;){for(X=0;X<Xe;){for(Pe=Xe*me+X,ve=-1,qe=0,ne=0;ne<64;ne++)ze=Pe+(qe=ne>>3)*Xe+(ve=4*(7&ne)),me+qe>=St&&(ze-=Xe*(me+1+qe-St)),X+ve>=Xe&&(ze-=X+ve-Xe+4),pe=tt[ze++],ce=tt[ze++],we=tt[ze++],E[ne]=(M[pe]+M[ce+256|0]+M[we+512|0]>>16)-128,k[ne]=(M[pe+768|0]+M[ce+1024|0]+M[we+1280|0]>>16)-128,C[ne]=(M[pe+1280|0]+M[ce+1536|0]+M[we+1792|0]>>16)-128;Q=xe(E,f,Q,t,n),re=xe(k,h,re,r,i),Z=xe(C,h,Z,r,i),X+=32}me+=8}if(S>=0){var ye=[];ye[1]=S+1,ye[0]=(1<<S+1)-1,le(ye)}return se(65497),new Uint8Array(w)},e=e||50,(function(){for(var R=String.fromCharCode,V=0;V<256;V++)D[V]=R(V)})(),t=ie(U,I),r=ie(O,z),n=ie(K,B),i=ie(q,ue),(function(){for(var R=1,V=2,Q=1;Q<=15;Q++){for(var re=R;re<V;re++)v[32767+re]=Q,p[32767+re]=[],p[32767+re][1]=Q,p[32767+re][0]=re;for(var Z=-(V-1);Z<=-R;Z++)v[32767+Z]=Q,p[32767+Z]=[],p[32767+Z][1]=Q,p[32767+Z][0]=V-1+Z;R<<=1,V<<=1}})(),(function(){for(var R=0;R<256;R++)M[R]=19595*R,M[R+256|0]=38470*R,M[R+512|0]=7471*R+32768,M[R+768|0]=-11059*R,M[R+1024|0]=-21709*R,M[R+1280|0]=32768*R+8421375,M[R+1536|0]=-27439*R,M[R+1792|0]=-5329*R})(),te(e)}function xo(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function US(e){function t(I){if(!I)throw Error("assert :P")}function r(I,K,B){for(var O=0;4>O;O++)if(I[K+O]!=B.charCodeAt(O))return!0;return!1}function n(I,K,B,O,z){for(var q=0;q<z;q++)I[K+q]=B[O+q]}function i(I,K,B,O){for(var z=0;z<O;z++)I[K+z]=B}function a(I){return new Int32Array(I)}function o(I,K){for(var B=[],O=0;O<I;O++)B.push(new K);return B}function l(I,K){var B=[];return(function O(z,q,ue){for(var ie=ue[q],le=0;le<ie&&(z.push(ue.length>q+1?[]:new K),!(ue.length<q+1));le++)O(z[le],q+1,ue)})(B,0,I),B}var d=function(){var I=this;function K(y,N){for(var T=1<<N-1>>>0;y&T;)T>>>=1;return T?(y&T-1)+T:y}function B(y,N,T,$,W){t(!($%T));do y[N+($-=T)]=W;while(0<$)}function O(y,N,T,$,W){if(t(2328>=W),512>=W)var J=a(512);else if((J=a(W))==null)return 0;return(function(ee,ae,oe,de,_e,Re){var fe,je,Te=ae,Ge=1<<oe,De=a(16),$e=a(16);for(t(_e!=0),t(de!=null),t(ee!=null),t(0<oe),je=0;je<_e;++je){if(15<de[je])return 0;++De[de[je]]}if(De[0]==_e)return 0;for($e[1]=0,fe=1;15>fe;++fe){if(De[fe]>1<<fe)return 0;$e[fe+1]=$e[fe]+De[fe]}for(je=0;je<_e;++je)fe=de[je],0<de[je]&&(Re[$e[fe]++]=je);if($e[15]==1)return(de=new z).g=0,de.value=Re[0],B(ee,Te,1,Ge,de),Ge;var We,Ye=-1,Qe=Ge-1,Bt=0,kt=1,mr=1,Lt=1<<oe;for(je=0,fe=1,_e=2;fe<=oe;++fe,_e<<=1){if(kt+=mr<<=1,0>(mr-=De[fe]))return 0;for(;0<De[fe];--De[fe])(de=new z).g=fe,de.value=Re[je++],B(ee,Te+Bt,_e,Lt,de),Bt=K(Bt,fe)}for(fe=oe+1,_e=2;15>=fe;++fe,_e<<=1){if(kt+=mr<<=1,0>(mr-=De[fe]))return 0;for(;0<De[fe];--De[fe]){if(de=new z,(Bt&Qe)!=Ye){for(Te+=Lt,We=1<<(Ye=fe)-oe;15>Ye&&!(0>=(We-=De[Ye]));)++Ye,We<<=1;Ge+=Lt=1<<(We=Ye-oe),ee[ae+(Ye=Bt&Qe)].g=We+oe,ee[ae+Ye].value=Te-ae-Ye}de.g=fe-oe,de.value=Re[je++],B(ee,Te+(Bt>>oe),_e,Lt,de),Bt=K(Bt,fe)}}return kt!=2*$e[15]-1?0:Ge})(y,N,T,$,W,J)}function z(){this.value=this.g=0}function q(){this.value=this.g=0}function ue(){this.G=o(5,z),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Ii,q)}function ie(y,N,T,$){t(y!=null),t(N!=null),t(2147483648>$),y.Ca=254,y.I=0,y.b=-8,y.Ka=0,y.oa=N,y.pa=T,y.Jd=N,y.Yc=T+$,y.Zc=4<=$?T+$-4+1:T,pe(y)}function le(y,N){for(var T=0;0<N--;)T|=we(y,128)<<N;return T}function G(y,N){var T=le(y,N);return ce(y)?-T:T}function se(y,N,T,$){var W,J=0;for(t(y!=null),t(N!=null),t(4294967288>$),y.Sb=$,y.Ra=0,y.u=0,y.h=0,4<$&&($=4),W=0;W<$;++W)J+=N[T+W]<<8*W;y.Ra=J,y.bb=$,y.oa=N,y.pa=T}function xe(y){for(;8<=y.u&&y.bb<y.Sb;)y.Ra>>>=8,y.Ra+=y.oa[y.pa+y.bb]<<Go-8>>>0,++y.bb,y.u-=8;re(y)&&(y.h=1,y.u=0)}function te(y,N){if(t(0<=N),!y.h&&N<=yi){var T=Q(y)&vi[N];return y.u+=N,xe(y),T}return y.h=1,y.u=0}function R(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function V(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function Q(y){return y.Ra>>>(y.u&Go-1)>>>0}function re(y){return t(y.bb<=y.Sb),y.h||y.bb==y.Sb&&y.u>Go}function Z(y,N){y.u=N,y.h=re(y)}function X(y){y.u>=Ma&&(t(y.u>=Ma),xe(y))}function pe(y){t(y!=null&&y.oa!=null),y.pa<y.Zc?(y.I=(y.oa[y.pa++]|y.I<<8)>>>0,y.b+=8):(t(y!=null&&y.oa!=null),y.pa<y.Yc?(y.b+=8,y.I=y.oa[y.pa++]|y.I<<8):y.Ka?y.b=0:(y.I<<=8,y.b+=8,y.Ka=1))}function ce(y){return le(y,1)}function we(y,N){var T=y.Ca;0>y.b&&pe(y);var $=y.b,W=T*N>>>8,J=(y.I>>>$>W)+0;for(J?(T-=W,y.I-=W+1<<$>>>0):T=W+1,$=T,W=0;256<=$;)W+=8,$>>=8;return $=7^W+so[$],y.b-=$,y.Ca=(T<<$)-1,J}function Pe(y,N,T){y[N+0]=T>>24&255,y[N+1]=T>>16&255,y[N+2]=T>>8&255,y[N+3]=255&T}function ze(y,N){return y[N+0]|y[N+1]<<8}function ve(y,N){return ze(y,N)|y[N+2]<<16}function qe(y,N){return ze(y,N)|ze(y,N+2)<<16}function ne(y,N){var T=1<<N;return t(y!=null),t(0<N),y.X=a(T),y.X==null?0:(y.Mb=32-N,y.Xa=N,1)}function tt(y,N){t(y!=null),t(N!=null),t(y.Xa==N.Xa),n(N.X,0,y.X,0,1<<N.Xa)}function jt(){this.X=[],this.Xa=this.Mb=0}function St(y,N,T,$){t(T!=null),t($!=null);var W=T[0],J=$[0];return W==0&&(W=(y*J+N/2)/N),J==0&&(J=(N*W+y/2)/y),0>=W||0>=J?0:(T[0]=W,$[0]=J,1)}function Xe(y,N){return y+(1<<N)-1>>>N}function me(y,N){return((4278255360&y)+(4278255360&N)>>>0&4278255360)+((16711935&y)+(16711935&N)>>>0&16711935)>>>0}function ye(y,N){I[N]=function(T,$,W,J,ee,ae,oe){var de;for(de=0;de<ee;++de){var _e=I[y](ae[oe+de-1],W,J+de);ae[oe+de]=me(T[$+de],_e)}}}function Ce(){this.ud=this.hd=this.jd=0}function Ue(y,N){return((4278124286&(y^N))>>>1)+(y&N)>>>0}function Je(y){return 0<=y&&256>y?y:0>y?0:255<y?255:void 0}function He(y,N){return Je(y+(y-N+.5>>1))}function Ze(y,N,T){return Math.abs(N-T)-Math.abs(y-T)}function ft(y,N,T,$,W,J,ee){for($=J[ee-1],T=0;T<W;++T)J[ee+T]=$=me(y[N+T],$)}function bt(y,N,T,$,W){var J;for(J=0;J<T;++J){var ee=y[N+J],ae=ee>>8&255,oe=16711935&(oe=(oe=16711935&ee)+((ae<<16)+ae));$[W+J]=(4278255360&ee)+oe>>>0}}function gt(y,N){N.jd=255&y,N.hd=y>>8&255,N.ud=y>>16&255}function $t(y,N,T,$,W,J){var ee;for(ee=0;ee<$;++ee){var ae=N[T+ee],oe=ae>>>8,de=ae,_e=255&(_e=(_e=ae>>>16)+((y.jd<<24>>24)*(oe<<24>>24)>>>5));de=255&(de=(de+=(y.hd<<24>>24)*(oe<<24>>24)>>>5)+((y.ud<<24>>24)*(_e<<24>>24)>>>5)),W[J+ee]=(4278255360&ae)+(_e<<16)+de}}function xt(y,N,T,$,W){I[N]=function(J,ee,ae,oe,de,_e,Re,fe,je){for(oe=Re;oe<fe;++oe)for(Re=0;Re<je;++Re)de[_e++]=W(ae[$(J[ee++])])},I[y]=function(J,ee,ae,oe,de,_e,Re){var fe=8>>J.b,je=J.Ea,Te=J.K[0],Ge=J.w;if(8>fe)for(J=(1<<J.b)-1,Ge=(1<<fe)-1;ee<ae;++ee){var De,$e=0;for(De=0;De<je;++De)De&J||($e=$(oe[de++])),_e[Re++]=W(Te[$e&Ge]),$e>>=fe}else I["VP8LMapColor"+T](oe,de,Te,Ge,_e,Re,ee,ae,je)}}function Yr(y,N,T,$,W){for(T=N+T;N<T;){var J=y[N++];$[W++]=J>>16&255,$[W++]=J>>8&255,$[W++]=255&J}}function ur(y,N,T,$,W){for(T=N+T;N<T;){var J=y[N++];$[W++]=J>>16&255,$[W++]=J>>8&255,$[W++]=255&J,$[W++]=J>>24&255}}function Gt(y,N,T,$,W){for(T=N+T;N<T;){var J=(ee=y[N++])>>16&240|ee>>12&15,ee=240&ee|ee>>28&15;$[W++]=J,$[W++]=ee}}function ir(y,N,T,$,W){for(T=N+T;N<T;){var J=(ee=y[N++])>>16&248|ee>>13&7,ee=ee>>5&224|ee>>3&31;$[W++]=J,$[W++]=ee}}function Nr(y,N,T,$,W){for(T=N+T;N<T;){var J=y[N++];$[W++]=255&J,$[W++]=J>>8&255,$[W++]=J>>16&255}}function Be(y,N,T,$,W,J){if(J==0)for(T=N+T;N<T;)Pe($,((J=y[N++])[0]>>24|J[1]>>8&65280|J[2]<<8&16711680|J[3]<<24)>>>0),W+=32;else n($,W,y,N,T)}function rr(y,N){I[N][0]=I[y+"0"],I[N][1]=I[y+"1"],I[N][2]=I[y+"2"],I[N][3]=I[y+"3"],I[N][4]=I[y+"4"],I[N][5]=I[y+"5"],I[N][6]=I[y+"6"],I[N][7]=I[y+"7"],I[N][8]=I[y+"8"],I[N][9]=I[y+"9"],I[N][10]=I[y+"10"],I[N][11]=I[y+"11"],I[N][12]=I[y+"12"],I[N][13]=I[y+"13"],I[N][14]=I[y+"0"],I[N][15]=I[y+"0"]}function Vt(y){return y==Yc||y==Zl||y==dd||y==fd}function Yt(){this.eb=[],this.size=this.A=this.fb=0}function Rr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Qt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Yt,this.f.kb=new Rr,this.sd=null}function Tt(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ar(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ht(y){return alert("todo:WebPSamplerProcessPlane"),y.T}function nr(y,N){var T=y.T,$=N.ba.f.RGBA,W=$.eb,J=$.fb+y.ka*$.A,ee=Zs[N.ba.S],ae=y.y,oe=y.O,de=y.f,_e=y.N,Re=y.ea,fe=y.W,je=N.cc,Te=N.dc,Ge=N.Mc,De=N.Nc,$e=y.ka,We=y.ka+y.T,Ye=y.U,Qe=Ye+1>>1;for($e==0?ee(ae,oe,null,null,de,_e,Re,fe,de,_e,Re,fe,W,J,null,null,Ye):(ee(N.ec,N.fc,ae,oe,je,Te,Ge,De,de,_e,Re,fe,W,J-$.A,W,J,Ye),++T);$e+2<We;$e+=2)je=de,Te=_e,Ge=Re,De=fe,_e+=y.Rc,fe+=y.Rc,J+=2*$.A,ee(ae,(oe+=2*y.fa)-y.fa,ae,oe,je,Te,Ge,De,de,_e,Re,fe,W,J-$.A,W,J,Ye);return oe+=y.fa,y.j+We<y.o?(n(N.ec,N.fc,ae,oe,Ye),n(N.cc,N.dc,de,_e,Qe),n(N.Mc,N.Nc,Re,fe,Qe),T--):1&We||ee(ae,oe,null,null,de,_e,Re,fe,de,_e,Re,fe,W,J+$.A,null,null,Ye),T}function jr(y,N,T){var $=y.F,W=[y.J];if($!=null){var J=y.U,ee=N.ba.S,ae=ee==ud||ee==dd;N=N.ba.f.RGBA;var oe=[0],de=y.ka;oe[0]=y.T,y.Kb&&(de==0?--oe[0]:(--de,W[0]-=y.width),y.j+y.ka+y.T==y.o&&(oe[0]=y.o-y.j-de));var _e=N.eb;de=N.fb+de*N.A,y=ld($,W[0],y.width,J,oe,_e,de+(ae?0:3),N.A),t(T==oe),y&&Vt(ee)&&Jl(_e,de,ae,J,oe,N.A)}return 0}function cn(y){var N=y.ma,T=N.ba.S,$=11>T,W=T==Jo||T==cd||T==ud||T==en||T==12||Vt(T);if(N.memory=null,N.Ib=null,N.Jb=null,N.Nd=null,!zc(N.Oa,y,W?11:12))return 0;if(W&&Vt(T)&&$l(),y.da)alert("todo:use_scaling");else{if($){if(N.Ib=Ht,y.Kb){if(T=y.U+1>>1,N.memory=a(y.U+2*T),N.memory==null)return 0;N.ec=N.memory,N.fc=0,N.cc=N.ec,N.dc=N.fc+y.U,N.Mc=N.cc,N.Nc=N.dc+T,N.Ib=nr,$l()}}else alert("todo:EmitYUV");W&&(N.Jb=jr,$&&ia())}if($&&!js){for(y=0;256>y;++y)Xs[y]=89858*(y-128)+ca>>lo,ei[y]=-22014*(y-128)+ca,Xc[y]=-45773*(y-128),rc[y]=113618*(y-128)+ca>>lo;for(y=Kr;y<Jr;++y)N=76283*(y-16)+ca>>lo,Sf[y-Kr]=zn(N,255),Jp[y-Kr]=zn(N+8>>4,15);js=1}return 1}function Et(y){var N=y.ma,T=y.U,$=y.T;return t(!(1&y.ka)),0>=T||0>=$?0:(T=N.Ib(y,N),N.Jb!=null&&N.Jb(y,N,T),N.Dc+=T,1)}function Ee(y){y.ma.memory=null}function nt(y,N,T,$){return te(y,8)!=47?0:(N[0]=te(y,14)+1,T[0]=te(y,14)+1,$[0]=te(y,1),te(y,3)!=0?0:!y.h)}function vt(y,N){if(4>y)return y+1;var T=y-2>>1;return(2+(1&y)<<T)+te(N,T)+1}function Kt(y,N){return 120<N?N-120:1<=(T=((T=uy[N-1])>>4)*y+(8-(15&T)))?T:1;var T}function br(y,N,T){var $=Q(T),W=y[N+=255&$].g-8;return 0<W&&(Z(T,T.u+8),$=Q(T),N+=y[N].value,N+=$&(1<<W)-1),Z(T,T.u+y[N].g),y[N].value}function Xr(y,N,T){return T.g+=y.g,T.value+=y.value<<N>>>0,t(8>=T.g),y.g}function _n(y,N,T){var $=y.xc;return t((N=$==0?0:y.vc[y.md*(T>>$)+(N>>$)])<y.Wb),y.Ya[N]}function ui(y,N,T,$){var W=y.ab,J=y.c*N,ee=y.C;N=ee+N;var ae=T,oe=$;for($=y.Ta,T=y.Ua;0<W--;){var de=y.gc[W],_e=ee,Re=N,fe=ae,je=oe,Te=(oe=$,ae=T,de.Ea);switch(t(_e<Re),t(Re<=de.nc),de.hc){case 2:In(fe,je,(Re-_e)*Te,oe,ae);break;case 0:var Ge=_e,De=Re,$e=oe,We=ae,Ye=(Lt=de).Ea;Ge==0&&(io(fe,je,null,null,1,$e,We),ft(fe,je+1,0,0,Ye-1,$e,We+1),je+=Ye,We+=Ye,++Ge);for(var Qe=1<<Lt.b,Bt=Qe-1,kt=Xe(Ye,Lt.b),mr=Lt.K,Lt=Lt.w+(Ge>>Lt.b)*kt;Ge<De;){var kr=mr,An=Lt,gr=1;for(Fa(fe,je,$e,We-Ye,1,$e,We);gr<Ye;){var Ct=(gr&~Bt)+Qe;Ct>Ye&&(Ct=Ye),(0,Gl[kr[An++]>>8&15])(fe,je+ +gr,$e,We+gr-Ye,Ct-gr,$e,We+gr),gr=Ct}je+=Ye,We+=Ye,++Ge&Bt||(Lt+=kt)}Re!=de.nc&&n(oe,ae-Te,oe,ae+(Re-_e-1)*Te,Te);break;case 1:for(Te=fe,De=je,Ye=(fe=de.Ea)-(We=fe&~($e=(je=1<<de.b)-1)),Ge=Xe(fe,de.b),Qe=de.K,de=de.w+(_e>>de.b)*Ge;_e<Re;){for(Bt=Qe,kt=de,mr=new Ce,Lt=De+We,kr=De+fe;De<Lt;)gt(Bt[kt++],mr),Vc(mr,Te,De,je,oe,ae),De+=je,ae+=je;De<kr&&(gt(Bt[kt++],mr),Vc(mr,Te,De,Ye,oe,ae),De+=Ye,ae+=Ye),++_e&$e||(de+=Ge)}break;case 3:if(fe==oe&&je==ae&&0<de.b){for(De=oe,fe=Te=ae+(Re-_e)*Te-(We=(Re-_e)*Xe(de.Ea,de.b)),je=oe,$e=ae,Ge=[],We=(Ye=We)-1;0<=We;--We)Ge[We]=je[$e+We];for(We=Ye-1;0<=We;--We)De[fe+We]=Ge[We];Wl(de,_e,Re,oe,Te,oe,ae)}else Wl(de,_e,Re,fe,je,oe,ae)}ae=$,oe=T}oe!=T&&n($,T,ae,oe,J)}function Fo(y,N){var T=y.V,$=y.Ba+y.c*y.C,W=N-y.C;if(t(N<=y.l.o),t(16>=W),0<W){var J=y.l,ee=y.Ta,ae=y.Ua,oe=J.width;if(ui(y,W,T,$),W=ae=[ae],t((T=y.C)<($=N)),t(J.v<J.va),$>J.o&&($=J.o),T<J.j){var de=J.j-T;T=J.j,W[0]+=de*oe}if(T>=$?T=0:(W[0]+=4*J.v,J.ka=T-J.j,J.U=J.va-J.v,J.T=$-T,T=1),T){if(ae=ae[0],11>(T=y.ca).S){var _e=T.f.RGBA,Re=($=T.S,W=J.U,J=J.T,de=_e.eb,_e.A),fe=J;for(_e=_e.fb+y.Ma*_e.A;0<fe--;){var je=ee,Te=ae,Ge=W,De=de,$e=_e;switch($){case bf:Wc(je,Te,Ge,De,$e);break;case Jo:ao(je,Te,Ge,De,$e);break;case Yc:ao(je,Te,Ge,De,$e),Jl(De,$e,0,Ge,1,0);break;case Hp:Kl(je,Te,Ge,De,$e);break;case cd:Be(je,Te,Ge,De,$e,1);break;case Zl:Be(je,Te,Ge,De,$e,1),Jl(De,$e,0,Ge,1,0);break;case ud:Be(je,Te,Ge,De,$e,0);break;case dd:Be(je,Te,Ge,De,$e,0),Jl(De,$e,1,Ge,1,0);break;case en:Ko(je,Te,Ge,De,$e);break;case fd:Ko(je,Te,Ge,De,$e),om(De,$e,Ge,1,0);break;case _f:Yo(je,Te,Ge,De,$e);break;default:t(0)}ae+=oe,_e+=Re}y.Ma+=J}else alert("todo:EmitRescaledRowsYUVA");t(y.Ma<=T.height)}}y.C=N,t(y.C<=y.i)}function ta(y){var N;if(0<y.ua)return 0;for(N=0;N<y.Wb;++N){var T=y.Ya[N].G,$=y.Ya[N].H;if(0<T[1][$[1]+0].g||0<T[2][$[2]+0].g||0<T[3][$[3]+0].g)return 0}return 1}function Pa(y,N,T,$,W,J){if(y.Z!=0){var ee=y.qd,ae=y.rd;for(t(Ps[y.Z]!=null);N<T;++N)Ps[y.Z](ee,ae,$,W,$,W,J),ee=$,ae=W,W+=J;y.qd=ee,y.rd=ae}}function bs(y,N){var T=y.l.ma,$=T.Z==0||T.Z==1?y.l.j:y.C;if($=y.C<$?$:y.C,t(N<=y.l.o),N>$){var W=y.l.width,J=T.ca,ee=T.tb+W*$,ae=y.V,oe=y.Ba+y.c*$,de=y.gc;t(y.ab==1),t(de[0].hc==3),oa(de[0],$,N,ae,oe,J,ee),Pa(T,$,N,J,ee,W)}y.C=y.Ma=N}function Ei(y,N,T,$,W,J,ee){var ae=y.$/$,oe=y.$%$,de=y.m,_e=y.s,Re=T+y.$,fe=Re;W=T+$*W;var je=T+$*J,Te=280+_e.ua,Ge=y.Pb?ae:16777216,De=0<_e.ua?_e.Wa:null,$e=_e.wc,We=Re<je?_n(_e,oe,ae):null;t(y.C<J),t(je<=W);var Ye=!1;e:for(;;){for(;Ye||Re<je;){var Qe=0;if(ae>=Ge){var Bt=Re-T;t((Ge=y).Pb),Ge.wd=Ge.m,Ge.xd=Bt,0<Ge.s.ua&&tt(Ge.s.Wa,Ge.s.vb),Ge=ae+jf}if(oe&$e||(We=_n(_e,oe,ae)),t(We!=null),We.Qb&&(N[Re]=We.qb,Ye=!0),!Ye)if(X(de),We.jc){Qe=de,Bt=N;var kt=Re,mr=We.pd[Q(Qe)&Ii-1];t(We.jc),256>mr.g?(Z(Qe,Qe.u+mr.g),Bt[kt]=mr.value,Qe=0):(Z(Qe,Qe.u+mr.g-256),t(256<=mr.value),Qe=mr.value),Qe==0&&(Ye=!0)}else Qe=br(We.G[0],We.H[0],de);if(de.h)break;if(Ye||256>Qe){if(!Ye)if(We.nd)N[Re]=(We.qb|Qe<<8)>>>0;else{if(X(de),Ye=br(We.G[1],We.H[1],de),X(de),Bt=br(We.G[2],We.H[2],de),kt=br(We.G[3],We.H[3],de),de.h)break;N[Re]=(kt<<24|Ye<<16|Qe<<8|Bt)>>>0}if(Ye=!1,++Re,++oe>=$&&(oe=0,++ae,ee!=null&&ae<=J&&!(ae%16)&&ee(y,ae),De!=null))for(;fe<Re;)Qe=N[fe++],De.X[(506832829*Qe&4294967295)>>>De.Mb]=Qe}else if(280>Qe){if(Qe=vt(Qe-256,de),Bt=br(We.G[4],We.H[4],de),X(de),Bt=Kt($,Bt=vt(Bt,de)),de.h)break;if(Re-T<Bt||W-Re<Qe)break e;for(kt=0;kt<Qe;++kt)N[Re+kt]=N[Re+kt-Bt];for(Re+=Qe,oe+=Qe;oe>=$;)oe-=$,++ae,ee!=null&&ae<=J&&!(ae%16)&&ee(y,ae);if(t(Re<=W),oe&$e&&(We=_n(_e,oe,ae)),De!=null)for(;fe<Re;)Qe=N[fe++],De.X[(506832829*Qe&4294967295)>>>De.Mb]=Qe}else{if(!(Qe<Te))break e;for(Ye=Qe-280,t(De!=null);fe<Re;)Qe=N[fe++],De.X[(506832829*Qe&4294967295)>>>De.Mb]=Qe;Qe=Re,t(!(Ye>>>(Bt=De).Xa)),N[Qe]=Bt.X[Ye],Ye=!0}Ye||t(de.h==re(de))}if(y.Pb&&de.h&&Re<W)t(y.m.h),y.a=5,y.m=y.wd,y.$=y.xd,0<y.s.ua&&tt(y.s.vb,y.s.Wa);else{if(de.h)break e;ee?.(y,ae>J?J:ae),y.a=0,y.$=Re-T}return 1}return y.a=3,0}function di(y){t(y!=null),y.vc=null,y.yc=null,y.Ya=null;var N=y.Wa;N!=null&&(N.X=null),y.vb=null,t(y!=null)}function Cl(){var y=new lr;return y==null?null:(y.a=0,y.xb=Jc,rr("Predictor","VP8LPredictors"),rr("Predictor","VP8LPredictors_C"),rr("PredictorAdd","VP8LPredictorsAdd"),rr("PredictorAdd","VP8LPredictorsAdd_C"),In=bt,Vc=$t,Wc=Yr,ao=ur,Ko=Gt,Yo=ir,Kl=Nr,I.VP8LMapColor32b=Ba,I.VP8LMapColor8b=Hl,y)}function ra(y,N,T,$,W){var J=1,ee=[y],ae=[N],oe=$.m,de=$.s,_e=null,Re=0;e:for(;;){if(T)for(;J&&te(oe,1);){var fe=ee,je=ae,Te=$,Ge=1,De=Te.m,$e=Te.gc[Te.ab],We=te(De,2);if(Te.Oc&1<<We)J=0;else{switch(Te.Oc|=1<<We,$e.hc=We,$e.Ea=fe[0],$e.nc=je[0],$e.K=[null],++Te.ab,t(4>=Te.ab),We){case 0:case 1:$e.b=te(De,3)+2,Ge=ra(Xe($e.Ea,$e.b),Xe($e.nc,$e.b),0,Te,$e.K),$e.K=$e.K[0];break;case 3:var Ye,Qe=te(De,8)+1,Bt=16<Qe?0:4<Qe?1:2<Qe?2:3;if(fe[0]=Xe($e.Ea,Bt),$e.b=Bt,Ye=Ge=ra(Qe,1,0,Te,$e.K)){var kt,mr=Qe,Lt=$e,kr=1<<(8>>Lt.b),An=a(kr);if(An==null)Ye=0;else{var gr=Lt.K[0],Ct=Lt.w;for(An[0]=Lt.K[0][0],kt=1;kt<1*mr;++kt)An[kt]=me(gr[Ct+kt],An[kt-1]);for(;kt<4*kr;++kt)An[kt]=0;Lt.K[0]=null,Lt.K[0]=An,Ye=1}}Ge=Ye;break;case 2:break;default:t(0)}J=Ge}}if(ee=ee[0],ae=ae[0],J&&te(oe,1)&&!(J=1<=(Re=te(oe,4))&&11>=Re)){$.a=3;break e}var mt;if(mt=J)t:{var On,ar,Sr,dn=$,fs=ee,Hn=ae,jn=Re,ns=T,hs=dn.m,pn=dn.s,Pr=[null],Ur=1,gn=0,$r=Kp[jn];r:for(;;){if(ns&&te(hs,1)){var Pn=te(hs,3)+2,Tn=Xe(fs,Pn),tn=Xe(Hn,Pn),Ts=Tn*tn;if(!ra(Tn,tn,0,dn,Pr))break r;for(Pr=Pr[0],pn.xc=Pn,On=0;On<Ts;++On){var Zr=Pr[On]>>8&65535;Pr[On]=Zr,Zr>=Ur&&(Ur=Zr+1)}}if(hs.h)break r;for(ar=0;5>ar;++ar){var rn=Xl[ar];!ar&&0<jn&&(rn+=1<<jn),gn<rn&&(gn=rn)}var Gn=o(Ur*$r,z),Ss=Ur,ti=o(Ss,ue);if(ti==null)var Mn=null;else t(65536>=Ss),Mn=ti;var Fn=a(gn);if(Mn==null||Fn==null||Gn==null){dn.a=1;break r}var Rs=Gn;for(On=Sr=0;On<Ur;++On){var nn=Mn[On],Ls=nn.G,Fi=nn.H,ua=0,ms=1,Bn=0;for(ar=0;5>ar;++ar){rn=Xl[ar],Ls[ar]=Rs,Fi[ar]=Sr,!ar&&0<jn&&(rn+=1<<jn);s:{var el,uo=rn,eu=dn,za=Fn,Xp=Rs,xm=Sr,hn=0,da=eu.m,wm=te(da,1);if(i(za,0,0,uo),wm){var bm=te(da,1)+1,kf=te(da,1),Cf=te(da,kf==0?1:8);za[Cf]=1,bm==2&&(za[Cf=te(da,8)]=1);var qa=1}else{var vn=a(19),Kn=te(da,4)+4;if(19<Kn){eu.a=3;var Un=0;break s}for(el=0;el<Kn;++el)vn[cy[el]]=te(da,3);var tu=void 0,fo=void 0,ru=eu,py=vn,ss=uo,Ef=za,vd=0,Va=ru.m,fa=8,xi=o(128,z);n:for(;O(xi,0,7,py,19);){if(te(Va,1)){var yd=2+2*te(Va,3);if((tu=2+te(Va,yd))>ss)break n}else tu=ss;for(fo=0;fo<ss&&tu--;){X(Va);var Af=xi[0+(127&Q(Va))];Z(Va,Va.u+Af.g);var tl=Af.value;if(16>tl)Ef[fo++]=tl,tl!=0&&(fa=tl);else{var eg=tl==16,_m=tl-16,tg=Nf[_m],Nm=te(Va,hd[_m])+tg;if(fo+Nm>ss)break n;for(var rg=eg?fa:0;0<Nm--;)Ef[fo++]=rg}}vd=1;break n}vd||(ru.a=3),qa=vd}(qa=qa&&!da.h)&&(hn=O(Xp,xm,8,za,uo)),qa&&hn!=0?Un=hn:(eu.a=3,Un=0)}if(Un==0)break r;if(ms&&Gp[ar]==1&&(ms=Rs[Sr].g==0),ua+=Rs[Sr].g,Sr+=Un,3>=ar){var nu,Pf=Fn[0];for(nu=1;nu<rn;++nu)Fn[nu]>Pf&&(Pf=Fn[nu]);Bn+=Pf}}if(nn.nd=ms,nn.Qb=0,ms&&(nn.qb=(Ls[3][Fi[3]+0].value<<24|Ls[1][Fi[1]+0].value<<16|Ls[2][Fi[2]+0].value)>>>0,ua==0&&256>Ls[0][Fi[0]+0].value&&(nn.Qb=1,nn.qb+=Ls[0][Fi[0]+0].value<<8)),nn.jc=!nn.Qb&&6>Bn,nn.jc){var xd,wi=nn;for(xd=0;xd<Ii;++xd){var ho=xd,ha=wi.pd[ho],sc=wi.G[0][wi.H[0]+ho];256<=sc.value?(ha.g=sc.g+256,ha.value=sc.value):(ha.g=0,ha.value=0,ho>>=Xr(sc,8,ha),ho>>=Xr(wi.G[1][wi.H[1]+ho],16,ha),ho>>=Xr(wi.G[2][wi.H[2]+ho],0,ha),Xr(wi.G[3][wi.H[3]+ho],24,ha))}}}pn.vc=Pr,pn.Wb=Ur,pn.Ya=Mn,pn.yc=Gn,mt=1;break t}mt=0}if(!(J=mt)){$.a=3;break e}if(0<Re){if(de.ua=1<<Re,!ne(de.Wa,Re)){$.a=1,J=0;break e}}else de.ua=0;var Tf=$,Rf=ee,ng=ae,Lf=Tf.s,Df=Lf.xc;if(Tf.c=Rf,Tf.i=ng,Lf.md=Xe(Rf,Df),Lf.wc=Df==0?-1:(1<<Df)-1,T){$.xb=$a;break e}if((_e=a(ee*ae))==null){$.a=1,J=0;break e}J=(J=Ei($,_e,0,ee,ae,ae,null))&&!oe.h;break e}return J?(W!=null?W[0]=_e:(t(_e==null),t(T)),$.$=0,T||di(de)):di(de),J}function Bo(y,N){var T=y.c*y.i,$=T+N+16*N;return t(y.c<=N),y.V=a($),y.V==null?(y.Ta=null,y.Ua=0,y.a=1,0):(y.Ta=y.V,y.Ua=y.Ba+T+N,1)}function El(y,N){var T=y.C,$=N-T,W=y.V,J=y.Ba+y.c*T;for(t(N<=y.l.o);0<$;){var ee=16<$?16:$,ae=y.l.ma,oe=y.l.width,de=oe*ee,_e=ae.ca,Re=ae.tb+oe*T,fe=y.Ta,je=y.Ua;ui(y,ee,W,J),lm(fe,je,_e,Re,de),Pa(ae,T,T+ee,_e,Re,oe),$-=ee,W+=ee*y.c,T+=ee}t(T==N),y.C=y.Ma=N}function Al(){this.ub=this.yd=this.td=this.Rb=0}function Pc(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function nm(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function fn(){this.Yb=(function(){var y=[];return(function N(T,$,W){for(var J=W[$],ee=0;ee<J&&(T.push(W.length>$+1?[]:0),!(W.length<$+1));ee++)N(T[ee],$+1,W)})(y,0,[3,11]),y})()}function df(){this.jb=a(3),this.Wc=l([4,8],fn),this.Xc=l([4,17],fn)}function Tc(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function fi(){this.ld=this.La=this.dd=this.tc=0}function Uo(){this.Na=this.la=0}function ff(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Rc(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Pl(){this.uc=this.M=this.Nb=0,this.wa=Array(new fi),this.Y=0,this.ya=Array(new Rc),this.aa=0,this.l=new Lc}function hi(){this.y=a(16),this.f=a(8),this.ea=a(8)}function hf(){this.cb=this.a=0,this.sc="",this.m=new R,this.Od=new Al,this.Kc=new Pc,this.ed=new Tc,this.Qa=new nm,this.Ic=this.$c=this.Aa=0,this.D=new Pl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,R),this.ia=0,this.pb=o(4,ff),this.Pa=new df,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new hi),this.Hd=0,this.rb=Array(new Uo),this.sb=0,this.wa=Array(new fi),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Rc),this.L=this.aa=0,this.gd=l([4,2],fi),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function zn(y,N){return 0>y?0:y>N?N:y}function Lc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function sm(){var y=new hf;return y!=null&&(y.a=0,y.sc="OK",y.cb=0,y.Xb=0,ec||(ec=Ta)),y}function qn(y,N,T){return y.a==0&&(y.a=N,y.sc=T,y.cb=0),0}function Tl(y,N,T){return 3<=T&&y[N+0]==157&&y[N+1]==1&&y[N+2]==42}function mi(y,N){if(y==null)return 0;if(y.a=0,y.sc="OK",N==null)return qn(y,2,"null VP8Io passed to VP8GetHeaders()");var T=N.data,$=N.w,W=N.ha;if(4>W)return qn(y,7,"Truncated header.");var J=T[$+0]|T[$+1]<<8|T[$+2]<<16,ee=y.Od;if(ee.Rb=!(1&J),ee.td=J>>1&7,ee.yd=J>>4&1,ee.ub=J>>5,3<ee.td)return qn(y,3,"Incorrect keyframe parameters.");if(!ee.yd)return qn(y,4,"Frame not displayable.");$+=3,W-=3;var ae=y.Kc;if(ee.Rb){if(7>W)return qn(y,7,"cannot parse picture header");if(!Tl(T,$,W))return qn(y,3,"Bad code word");ae.c=16383&(T[$+4]<<8|T[$+3]),ae.Td=T[$+4]>>6,ae.i=16383&(T[$+6]<<8|T[$+5]),ae.Ud=T[$+6]>>6,$+=7,W-=7,y.za=ae.c+15>>4,y.Ub=ae.i+15>>4,N.width=ae.c,N.height=ae.i,N.Da=0,N.j=0,N.v=0,N.va=N.width,N.o=N.height,N.da=0,N.ib=N.width,N.hb=N.height,N.U=N.width,N.T=N.height,i((J=y.Pa).jb,0,255,J.jb.length),t((J=y.Qa)!=null),J.Cb=0,J.Bb=0,J.Fb=1,i(J.Zb,0,0,J.Zb.length),i(J.Lb,0,0,J.Lb)}if(ee.ub>W)return qn(y,7,"bad partition length");ie(J=y.m,T,$,ee.ub),$+=ee.ub,W-=ee.ub,ee.Rb&&(ae.Ld=ce(J),ae.Kd=ce(J)),ae=y.Qa;var oe,de=y.Pa;if(t(J!=null),t(ae!=null),ae.Cb=ce(J),ae.Cb){if(ae.Bb=ce(J),ce(J)){for(ae.Fb=ce(J),oe=0;4>oe;++oe)ae.Zb[oe]=ce(J)?G(J,7):0;for(oe=0;4>oe;++oe)ae.Lb[oe]=ce(J)?G(J,6):0}if(ae.Bb)for(oe=0;3>oe;++oe)de.jb[oe]=ce(J)?le(J,8):255}else ae.Bb=0;if(J.Ka)return qn(y,3,"cannot parse segment header");if((ae=y.ed).zd=ce(J),ae.Tb=le(J,6),ae.wb=le(J,3),ae.Pc=ce(J),ae.Pc&&ce(J)){for(de=0;4>de;++de)ce(J)&&(ae.vd[de]=G(J,6));for(de=0;4>de;++de)ce(J)&&(ae.od[de]=G(J,6))}if(y.L=ae.Tb==0?0:ae.zd?1:2,J.Ka)return qn(y,3,"cannot parse filter header");var _e=W;if(W=oe=$,$=oe+_e,ae=_e,y.Xb=(1<<le(y.m,2))-1,_e<3*(de=y.Xb))T=7;else{for(oe+=3*de,ae-=3*de,_e=0;_e<de;++_e){var Re=T[W+0]|T[W+1]<<8|T[W+2]<<16;Re>ae&&(Re=ae),ie(y.Jc[+_e],T,oe,Re),oe+=Re,ae-=Re,W+=3}ie(y.Jc[+de],T,oe,ae),T=oe<$?0:5}if(T!=0)return qn(y,T,"cannot parse partitions");for(T=le(oe=y.m,7),W=ce(oe)?G(oe,4):0,$=ce(oe)?G(oe,4):0,ae=ce(oe)?G(oe,4):0,de=ce(oe)?G(oe,4):0,oe=ce(oe)?G(oe,4):0,_e=y.Qa,Re=0;4>Re;++Re){if(_e.Cb){var fe=_e.Zb[Re];_e.Fb||(fe+=T)}else{if(0<Re){y.pb[Re]=y.pb[0];continue}fe=T}var je=y.pb[Re];je.Sc[0]=Qc[zn(fe+W,127)],je.Sc[1]=md[zn(fe+0,127)],je.Eb[0]=2*Qc[zn(fe+$,127)],je.Eb[1]=101581*md[zn(fe+ae,127)]>>16,8>je.Eb[1]&&(je.Eb[1]=8),je.Qc[0]=Qc[zn(fe+de,117)],je.Qc[1]=md[zn(fe+oe,127)],je.lc=fe+oe}if(!ee.Rb)return qn(y,4,"Not a key frame.");for(ce(J),ee=y.Pa,T=0;4>T;++T){for(W=0;8>W;++W)for($=0;3>$;++$)for(ae=0;11>ae;++ae)de=we(J,fy[T][W][$][ae])?le(J,8):Qp[T][W][$][ae],ee.Wc[T][W].Yb[$][ae]=de;for(W=0;17>W;++W)ee.Xc[T][W]=ee.Wc[T][gm[W]]}return y.kc=ce(J),y.kc&&(y.Bd=le(J,8)),y.cb=1}function Ta(y,N,T,$,W,J,ee){var ae=N[W].Yb[T];for(T=0;16>W;++W){if(!we(y,ae[T+0]))return W;for(;!we(y,ae[T+1]);)if(ae=N[++W].Yb[0],T=0,W==16)return 16;var oe=N[W+1].Yb;if(we(y,ae[T+2])){var de=y,_e=0;if(we(de,(fe=ae)[(Re=T)+3]))if(we(de,fe[Re+6])){for(ae=0,Re=2*(_e=we(de,fe[Re+8]))+(fe=we(de,fe[Re+9+_e])),_e=0,fe=mm[Re];fe[ae];++ae)_e+=_e+we(de,fe[ae]);_e+=3+(8<<Re)}else we(de,fe[Re+7])?(_e=7+2*we(de,165),_e+=we(de,145)):_e=5+we(de,159);else _e=we(de,fe[Re+4])?3+we(de,fe[Re+5]):2;ae=oe[2]}else _e=1,ae=oe[1];oe=ee+pm[W],0>(de=y).b&&pe(de);var Re,fe=de.b,je=(Re=de.Ca>>1)-(de.I>>fe)>>31;--de.b,de.Ca+=je,de.Ca|=1,de.I-=(Re+1&je)<<fe,J[oe]=((_e^je)-je)*$[(0<W)+0]}return 16}function Rl(y){var N=y.rb[y.sb-1];N.la=0,N.Na=0,i(y.zc,0,0,y.zc.length),y.ja=0}function Ai(y,N,T,$,W){W=y[N+T+32*$]+(W>>3),y[N+T+32*$]=-256&W?0>W?0:255:W}function ts(y,N,T,$,W,J){Ai(y,N,0,T,$+W),Ai(y,N,1,T,$+J),Ai(y,N,2,T,$-J),Ai(y,N,3,T,$-W)}function na(y){return(20091*y>>16)+y}function Ju(y,N,T,$){var W,J=0,ee=a(16);for(W=0;4>W;++W){var ae=y[N+0]+y[N+8],oe=y[N+0]-y[N+8],de=(35468*y[N+4]>>16)-na(y[N+12]),_e=na(y[N+4])+(35468*y[N+12]>>16);ee[J+0]=ae+_e,ee[J+1]=oe+de,ee[J+2]=oe-de,ee[J+3]=ae-_e,J+=4,N++}for(W=J=0;4>W;++W)ae=(y=ee[J+0]+4)+ee[J+8],oe=y-ee[J+8],de=(35468*ee[J+4]>>16)-na(ee[J+12]),Ai(T,$,0,0,ae+(_e=na(ee[J+4])+(35468*ee[J+12]>>16))),Ai(T,$,1,0,oe+de),Ai(T,$,2,0,oe-de),Ai(T,$,3,0,ae-_e),J++,$+=32}function Zu(y,N,T,$){var W=y[N+0]+4,J=35468*y[N+4]>>16,ee=na(y[N+4]),ae=35468*y[N+1]>>16;ts(T,$,0,W+ee,y=na(y[N+1]),ae),ts(T,$,1,W+J,y,ae),ts(T,$,2,W-J,y,ae),ts(T,$,3,W-ee,y,ae)}function Ll(y,N,T,$,W){Ju(y,N,T,$),W&&Ju(y,N+16,T,$+4)}function Ra(y,N,T,$){Yl(y,N+0,T,$,1),Yl(y,N+32,T,$+128,1)}function Dc(y,N,T,$){var W;for(y=y[N+0]+4,W=0;4>W;++W)for(N=0;4>N;++N)Ai(T,$,N,W,y)}function Mr(y,N,T,$){y[N+0]&&Br(y,N+0,T,$),y[N+16]&&Br(y,N+16,T,$+4),y[N+32]&&Br(y,N+32,T,$+128),y[N+48]&&Br(y,N+48,T,$+128+4)}function Dl(y,N,T,$){var W,J=a(16);for(W=0;4>W;++W){var ee=y[N+0+W]+y[N+12+W],ae=y[N+4+W]+y[N+8+W],oe=y[N+4+W]-y[N+8+W],de=y[N+0+W]-y[N+12+W];J[0+W]=ee+ae,J[8+W]=ee-ae,J[4+W]=de+oe,J[12+W]=de-oe}for(W=0;4>W;++W)ee=(y=J[0+4*W]+3)+J[3+4*W],ae=J[1+4*W]+J[2+4*W],oe=J[1+4*W]-J[2+4*W],de=y-J[3+4*W],T[$+0]=ee+ae>>3,T[$+16]=de+oe>>3,T[$+32]=ee-ae>>3,T[$+48]=de-oe>>3,$+=64}function $o(y,N,T){var $,W=N-32,J=$s,ee=255-y[W-1];for($=0;$<T;++$){var ae,oe=J,de=ee+y[N-1];for(ae=0;ae<T;++ae)y[N+ae]=oe[de+y[W+ae]];N+=32}}function Xu(y,N){$o(y,N,4)}function mf(y,N){$o(y,N,8)}function pf(y,N){$o(y,N,16)}function Ic(y,N){var T;for(T=0;16>T;++T)n(y,N+32*T,y,N-32,16)}function Oc(y,N){var T;for(T=16;0<T;--T)i(y,N,y[N-1],16),N+=32}function Gs(y,N,T){var $;for($=0;16>$;++$)i(N,T+32*$,y,16)}function La(y,N){var T,$=16;for(T=0;16>T;++T)$+=y[N-1+32*T]+y[N+T-32];Gs($>>5,y,N)}function Ks(y,N){var T,$=8;for(T=0;16>T;++T)$+=y[N-1+32*T];Gs($>>4,y,N)}function Pi(y,N){var T,$=8;for(T=0;16>T;++T)$+=y[N+T-32];Gs($>>4,y,N)}function Il(y,N){Gs(128,y,N)}function tr(y,N,T){return y+2*N+T+2>>2}function Da(y,N){var T,$=N-32;for($=new Uint8Array([tr(y[$-1],y[$+0],y[$+1]),tr(y[$+0],y[$+1],y[$+2]),tr(y[$+1],y[$+2],y[$+3]),tr(y[$+2],y[$+3],y[$+4])]),T=0;4>T;++T)n(y,N+32*T,$,0,$.length)}function im(y,N){var T=y[N-1],$=y[N-1+32],W=y[N-1+64],J=y[N-1+96];Pe(y,N+0,16843009*tr(y[N-1-32],T,$)),Pe(y,N+32,16843009*tr(T,$,W)),Pe(y,N+64,16843009*tr($,W,J)),Pe(y,N+96,16843009*tr(W,J,J))}function gf(y,N){var T,$=4;for(T=0;4>T;++T)$+=y[N+T-32]+y[N-1+32*T];for($>>=3,T=0;4>T;++T)i(y,N+32*T,$,4)}function pi(y,N){var T=y[N-1+0],$=y[N-1+32],W=y[N-1+64],J=y[N-1-32],ee=y[N+0-32],ae=y[N+1-32],oe=y[N+2-32],de=y[N+3-32];y[N+0+96]=tr($,W,y[N-1+96]),y[N+1+96]=y[N+0+64]=tr(T,$,W),y[N+2+96]=y[N+1+64]=y[N+0+32]=tr(J,T,$),y[N+3+96]=y[N+2+64]=y[N+1+32]=y[N+0+0]=tr(ee,J,T),y[N+3+64]=y[N+2+32]=y[N+1+0]=tr(ae,ee,J),y[N+3+32]=y[N+2+0]=tr(oe,ae,ee),y[N+3+0]=tr(de,oe,ae)}function Xa(y,N){var T=y[N+1-32],$=y[N+2-32],W=y[N+3-32],J=y[N+4-32],ee=y[N+5-32],ae=y[N+6-32],oe=y[N+7-32];y[N+0+0]=tr(y[N+0-32],T,$),y[N+1+0]=y[N+0+32]=tr(T,$,W),y[N+2+0]=y[N+1+32]=y[N+0+64]=tr($,W,J),y[N+3+0]=y[N+2+32]=y[N+1+64]=y[N+0+96]=tr(W,J,ee),y[N+3+32]=y[N+2+64]=y[N+1+96]=tr(J,ee,ae),y[N+3+64]=y[N+2+96]=tr(ee,ae,oe),y[N+3+96]=tr(ae,oe,oe)}function vf(y,N){var T=y[N-1+0],$=y[N-1+32],W=y[N-1+64],J=y[N-1-32],ee=y[N+0-32],ae=y[N+1-32],oe=y[N+2-32],de=y[N+3-32];y[N+0+0]=y[N+1+64]=J+ee+1>>1,y[N+1+0]=y[N+2+64]=ee+ae+1>>1,y[N+2+0]=y[N+3+64]=ae+oe+1>>1,y[N+3+0]=oe+de+1>>1,y[N+0+96]=tr(W,$,T),y[N+0+64]=tr($,T,J),y[N+0+32]=y[N+1+96]=tr(T,J,ee),y[N+1+32]=y[N+2+96]=tr(J,ee,ae),y[N+2+32]=y[N+3+96]=tr(ee,ae,oe),y[N+3+32]=tr(ae,oe,de)}function Mc(y,N){var T=y[N+0-32],$=y[N+1-32],W=y[N+2-32],J=y[N+3-32],ee=y[N+4-32],ae=y[N+5-32],oe=y[N+6-32],de=y[N+7-32];y[N+0+0]=T+$+1>>1,y[N+1+0]=y[N+0+64]=$+W+1>>1,y[N+2+0]=y[N+1+64]=W+J+1>>1,y[N+3+0]=y[N+2+64]=J+ee+1>>1,y[N+0+32]=tr(T,$,W),y[N+1+32]=y[N+0+96]=tr($,W,J),y[N+2+32]=y[N+1+96]=tr(W,J,ee),y[N+3+32]=y[N+2+96]=tr(J,ee,ae),y[N+3+64]=tr(ee,ae,oe),y[N+3+96]=tr(ae,oe,de)}function Ol(y,N){var T=y[N-1+0],$=y[N-1+32],W=y[N-1+64],J=y[N-1+96];y[N+0+0]=T+$+1>>1,y[N+2+0]=y[N+0+32]=$+W+1>>1,y[N+2+32]=y[N+0+64]=W+J+1>>1,y[N+1+0]=tr(T,$,W),y[N+3+0]=y[N+1+32]=tr($,W,J),y[N+3+32]=y[N+1+64]=tr(W,J,J),y[N+3+64]=y[N+2+64]=y[N+0+96]=y[N+1+96]=y[N+2+96]=y[N+3+96]=J}function ed(y,N){var T=y[N-1+0],$=y[N-1+32],W=y[N-1+64],J=y[N-1+96],ee=y[N-1-32],ae=y[N+0-32],oe=y[N+1-32],de=y[N+2-32];y[N+0+0]=y[N+2+32]=T+ee+1>>1,y[N+0+32]=y[N+2+64]=$+T+1>>1,y[N+0+64]=y[N+2+96]=W+$+1>>1,y[N+0+96]=J+W+1>>1,y[N+3+0]=tr(ae,oe,de),y[N+2+0]=tr(ee,ae,oe),y[N+1+0]=y[N+3+32]=tr(T,ee,ae),y[N+1+32]=y[N+3+64]=tr($,T,ee),y[N+1+64]=y[N+3+96]=tr(W,$,T),y[N+1+96]=tr(J,W,$)}function sa(y,N){var T;for(T=0;8>T;++T)n(y,N+32*T,y,N-32,8)}function Ml(y,N){var T;for(T=0;8>T;++T)i(y,N,y[N-1],8),N+=32}function Ys(y,N,T){var $;for($=0;8>$;++$)i(N,T+32*$,y,8)}function Fc(y,N){var T,$=8;for(T=0;8>T;++T)$+=y[N+T-32]+y[N-1+32*T];Ys($>>4,y,N)}function td(y,N){var T,$=4;for(T=0;8>T;++T)$+=y[N+T-32];Ys($>>3,y,N)}function rd(y,N){var T,$=4;for(T=0;8>T;++T)$+=y[N-1+32*T];Ys($>>3,y,N)}function Bc(y,N){Ys(128,y,N)}function Ti(y,N,T){var $=y[N-T],W=y[N+0],J=3*(W-$)+Ua[1020+y[N-2*T]-y[N+T]],ee=Kc[112+(J+4>>3)];y[N-T]=$s[255+$+Kc[112+(J+3>>3)]],y[N+0]=$s[255+W-ee]}function Fl(y,N,T,$){var W=y[N+0],J=y[N+T];return Oi[255+y[N-2*T]-y[N-T]]>$||Oi[255+J-W]>$}function Bl(y,N,T,$){return 4*Oi[255+y[N-T]-y[N+0]]+Oi[255+y[N-2*T]-y[N+T]]<=$}function Ri(y,N,T,$,W){var J=y[N-3*T],ee=y[N-2*T],ae=y[N-T],oe=y[N+0],de=y[N+T],_e=y[N+2*T],Re=y[N+3*T];return 4*Oi[255+ae-oe]+Oi[255+ee-de]>$?0:Oi[255+y[N-4*T]-J]<=W&&Oi[255+J-ee]<=W&&Oi[255+ee-ae]<=W&&Oi[255+Re-_e]<=W&&Oi[255+_e-de]<=W&&Oi[255+de-oe]<=W}function eo(y,N,T,$){var W=2*$+1;for($=0;16>$;++$)Bl(y,N+$,T,W)&&Ti(y,N+$,T)}function zo(y,N,T,$){var W=2*$+1;for($=0;16>$;++$)Bl(y,N+$*T,1,W)&&Ti(y,N+$*T,1)}function nd(y,N,T,$){var W;for(W=3;0<W;--W)eo(y,N+=4*T,T,$)}function Ul(y,N,T,$){var W;for(W=3;0<W;--W)zo(y,N+=4,T,$)}function Li(y,N,T,$,W,J,ee,ae){for(J=2*J+1;0<W--;){if(Ri(y,N,T,J,ee))if(Fl(y,N,T,ae))Ti(y,N,T);else{var oe=y,de=N,_e=T,Re=oe[de-2*_e],fe=oe[de-_e],je=oe[de+0],Te=oe[de+_e],Ge=oe[de+2*_e],De=27*(We=Ua[1020+3*(je-fe)+Ua[1020+Re-Te]])+63>>7,$e=18*We+63>>7,We=9*We+63>>7;oe[de-3*_e]=$s[255+oe[de-3*_e]+We],oe[de-2*_e]=$s[255+Re+$e],oe[de-_e]=$s[255+fe+De],oe[de+0]=$s[255+je-De],oe[de+_e]=$s[255+Te-$e],oe[de+2*_e]=$s[255+Ge-We]}N+=$}}function Ia(y,N,T,$,W,J,ee,ae){for(J=2*J+1;0<W--;){if(Ri(y,N,T,J,ee))if(Fl(y,N,T,ae))Ti(y,N,T);else{var oe=y,de=N,_e=T,Re=oe[de-_e],fe=oe[de+0],je=oe[de+_e],Te=Kc[112+(4+(Ge=3*(fe-Re))>>3)],Ge=Kc[112+(Ge+3>>3)],De=Te+1>>1;oe[de-2*_e]=$s[255+oe[de-2*_e]+De],oe[de-_e]=$s[255+Re+Ge],oe[de+0]=$s[255+fe-Te],oe[de+_e]=$s[255+je-De]}N+=$}}function As(y,N,T,$,W,J){Li(y,N,T,1,16,$,W,J)}function Di(y,N,T,$,W,J){Li(y,N,1,T,16,$,W,J)}function Uc(y,N,T,$,W,J){var ee;for(ee=3;0<ee;--ee)Ia(y,N+=4*T,T,1,16,$,W,J)}function A(y,N,T,$,W,J){var ee;for(ee=3;0<ee;--ee)Ia(y,N+=4,1,T,16,$,W,J)}function H(y,N,T,$,W,J,ee,ae){Li(y,N,W,1,8,J,ee,ae),Li(T,$,W,1,8,J,ee,ae)}function he(y,N,T,$,W,J,ee,ae){Li(y,N,1,W,8,J,ee,ae),Li(T,$,1,W,8,J,ee,ae)}function be(y,N,T,$,W,J,ee,ae){Ia(y,N+4*W,W,1,8,J,ee,ae),Ia(T,$+4*W,W,1,8,J,ee,ae)}function Ae(y,N,T,$,W,J,ee,ae){Ia(y,N+4,1,W,8,J,ee,ae),Ia(T,$+4,1,W,8,J,ee,ae)}function Ke(){this.ba=new Qt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ar,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Rt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ft(){this.ua=0,this.Wa=new jt,this.vb=new jt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ue,this.yc=new z}function lr(){this.xb=this.a=0,this.l=new Lc,this.ca=new Qt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new V,this.Pb=0,this.wd=new V,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ft,this.ab=0,this.gc=o(4,Rt),this.Oc=0}function hr(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Lc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Dr(y,N,T,$,W,J,ee){for(y=y==null?0:y[N+0],N=0;N<ee;++N)W[J+N]=y+T[$+N]&255,y=W[J+N]}function Nn(y,N,T,$,W,J,ee){var ae;if(y==null)Dr(null,null,T,$,W,J,ee);else for(ae=0;ae<ee;++ae)W[J+ae]=y[N+ae]+T[$+ae]&255}function Vn(y,N,T,$,W,J,ee){if(y==null)Dr(null,null,T,$,W,J,ee);else{var ae,oe=y[N+0],de=oe,_e=oe;for(ae=0;ae<ee;++ae)de=_e+(oe=y[N+ae])-de,_e=T[$+ae]+(-256&de?0>de?0:255:de)&255,de=oe,W[J+ae]=_e}}function un(y,N,T,$){var W=N.width,J=N.o;if(t(y!=null&&N!=null),0>T||0>=$||T+$>J)return null;if(!y.Cc){if(y.ga==null){var ee;if(y.ga=new hr,(ee=y.ga==null)||(ee=N.width*N.o,t(y.Gb.length==0),y.Gb=a(ee),y.Uc=0,y.Gb==null?ee=0:(y.mb=y.Gb,y.nb=y.Uc,y.rc=null,ee=1),ee=!ee),!ee){ee=y.ga;var ae=y.Fa,oe=y.P,de=y.qc,_e=y.mb,Re=y.nb,fe=oe+1,je=de-1,Te=ee.l;if(t(ae!=null&&_e!=null&&N!=null),Ps[0]=null,Ps[1]=Dr,Ps[2]=Nn,Ps[3]=Vn,ee.ca=_e,ee.tb=Re,ee.c=N.width,ee.i=N.height,t(0<ee.c&&0<ee.i),1>=de)N=0;else if(ee.$a=3&ae[oe+0],ee.Z=ae[oe+0]>>2&3,ee.Lc=ae[oe+0]>>4&3,oe=ae[oe+0]>>6&3,0>ee.$a||1<ee.$a||4<=ee.Z||1<ee.Lc||oe)N=0;else if(Te.put=Et,Te.ac=cn,Te.bc=Ee,Te.ma=ee,Te.width=N.width,Te.height=N.height,Te.Da=N.Da,Te.v=N.v,Te.va=N.va,Te.j=N.j,Te.o=N.o,ee.$a)e:{t(ee.$a==1),N=Cl();t:for(;;){if(N==null){N=0;break e}if(t(ee!=null),ee.mc=N,N.c=ee.c,N.i=ee.i,N.l=ee.l,N.l.ma=ee,N.l.width=ee.c,N.l.height=ee.i,N.a=0,se(N.m,ae,fe,je),!ra(ee.c,ee.i,1,N,null)||(N.ab==1&&N.gc[0].hc==3&&ta(N.s)?(ee.ic=1,ae=N.c*N.i,N.Ta=null,N.Ua=0,N.V=a(ae),N.Ba=0,N.V==null?(N.a=1,N=0):N=1):(ee.ic=0,N=Bo(N,ee.c)),!N))break t;N=1;break e}ee.mc=null,N=0}else N=je>=ee.c*ee.i;ee=!N}if(ee)return null;y.ga.Lc!=1?y.Ga=0:$=J-T}t(y.ga!=null),t(T+$<=J);e:{if(N=(ae=y.ga).c,J=ae.l.o,ae.$a==0){if(fe=y.rc,je=y.Vc,Te=y.Fa,oe=y.P+1+T*N,de=y.mb,_e=y.nb+T*N,t(oe<=y.P+y.qc),ae.Z!=0)for(t(Ps[ae.Z]!=null),ee=0;ee<$;++ee)Ps[ae.Z](fe,je,Te,oe,de,_e,N),fe=de,je=_e,_e+=N,oe+=N;else for(ee=0;ee<$;++ee)n(de,_e,Te,oe,N),fe=de,je=_e,_e+=N,oe+=N;y.rc=fe,y.Vc=je}else{if(t(ae.mc!=null),N=T+$,t((ee=ae.mc)!=null),t(N<=ee.i),ee.C>=N)N=1;else if(ae.ic||ia(),ae.ic){ae=ee.V,fe=ee.Ba,je=ee.c;var Ge=ee.i,De=(Te=1,oe=ee.$/je,de=ee.$%je,_e=ee.m,Re=ee.s,ee.$),$e=je*Ge,We=je*N,Ye=Re.wc,Qe=De<We?_n(Re,de,oe):null;t(De<=$e),t(N<=Ge),t(ta(Re));t:for(;;){for(;!_e.h&&De<We;){if(de&Ye||(Qe=_n(Re,de,oe)),t(Qe!=null),X(_e),256>(Ge=br(Qe.G[0],Qe.H[0],_e)))ae[fe+De]=Ge,++De,++de>=je&&(de=0,++oe<=N&&!(oe%16)&&bs(ee,oe));else{if(!(280>Ge)){Te=0;break t}Ge=vt(Ge-256,_e);var Bt,kt=br(Qe.G[4],Qe.H[4],_e);if(X(_e),!(De>=(kt=Kt(je,kt=vt(kt,_e)))&&$e-De>=Ge)){Te=0;break t}for(Bt=0;Bt<Ge;++Bt)ae[fe+De+Bt]=ae[fe+De+Bt-kt];for(De+=Ge,de+=Ge;de>=je;)de-=je,++oe<=N&&!(oe%16)&&bs(ee,oe);De<We&&de&Ye&&(Qe=_n(Re,de,oe))}t(_e.h==re(_e))}bs(ee,oe>N?N:oe);break t}!Te||_e.h&&De<$e?(Te=0,ee.a=_e.h?5:3):ee.$=De,N=Te}else N=Ei(ee,ee.V,ee.Ba,ee.c,ee.i,N,El);if(!N){$=0;break e}}T+$>=J&&(y.Cc=1),$=1}if(!$)return null;if(y.Cc&&(($=y.ga)!=null&&($.mc=null),y.ga=null,0<y.Ga))return alert("todo:WebPDequantizeLevels"),null}return y.nb+T*W}function rs(y,N,T,$,W,J){for(;0<W--;){var ee,ae=y,oe=N+(T?1:0),de=y,_e=N+(T?0:3);for(ee=0;ee<$;++ee){var Re=de[_e+4*ee];Re!=255&&(Re*=32897,ae[oe+4*ee+0]=ae[oe+4*ee+0]*Re>>23,ae[oe+4*ee+1]=ae[oe+4*ee+1]*Re>>23,ae[oe+4*ee+2]=ae[oe+4*ee+2]*Re>>23)}N+=J}}function Dn(y,N,T,$,W){for(;0<$--;){var J;for(J=0;J<T;++J){var ee=y[N+2*J+0],ae=15&(de=y[N+2*J+1]),oe=4369*ae,de=(240&de|de>>4)*oe>>16;y[N+2*J+0]=(240&ee|ee>>4)*oe>>16&240|(15&ee|ee<<4)*oe>>16>>4&15,y[N+2*J+1]=240&de|ae}N+=W}}function _s(y,N,T,$,W,J,ee,ae){var oe,de,_e=255;for(de=0;de<W;++de){for(oe=0;oe<$;++oe){var Re=y[N+oe];J[ee+4*oe]=Re,_e&=Re}N+=T,ee+=ae}return _e!=255}function to(y,N,T,$,W){var J;for(J=0;J<W;++J)T[$+J]=y[N+J]>>8}function ia(){Jl=rs,om=Dn,ld=_s,lm=to}function ro(y,N,T){I[y]=function($,W,J,ee,ae,oe,de,_e,Re,fe,je,Te,Ge,De,$e,We,Ye){var Qe,Bt=Ye-1>>1,kt=ae[oe+0]|de[_e+0]<<16,mr=Re[fe+0]|je[Te+0]<<16;t($!=null);var Lt=3*kt+mr+131074>>2;for(N($[W+0],255&Lt,Lt>>16,Ge,De),J!=null&&(Lt=3*mr+kt+131074>>2,N(J[ee+0],255&Lt,Lt>>16,$e,We)),Qe=1;Qe<=Bt;++Qe){var kr=ae[oe+Qe]|de[_e+Qe]<<16,An=Re[fe+Qe]|je[Te+Qe]<<16,gr=kt+kr+mr+An+524296,Ct=gr+2*(kr+mr)>>3;Lt=Ct+kt>>1,kt=(gr=gr+2*(kt+An)>>3)+kr>>1,N($[W+2*Qe-1],255&Lt,Lt>>16,Ge,De+(2*Qe-1)*T),N($[W+2*Qe-0],255&kt,kt>>16,Ge,De+(2*Qe-0)*T),J!=null&&(Lt=gr+mr>>1,kt=Ct+An>>1,N(J[ee+2*Qe-1],255&Lt,Lt>>16,$e,We+(2*Qe-1)*T),N(J[ee+2*Qe+0],255&kt,kt>>16,$e,We+(2*Qe+0)*T)),kt=kr,mr=An}1&Ye||(Lt=3*kt+mr+131074>>2,N($[W+Ye-1],255&Lt,Lt>>16,Ge,De+(Ye-1)*T),J!=null&&(Lt=3*mr+kt+131074>>2,N(J[ee+Ye-1],255&Lt,Lt>>16,$e,We+(Ye-1)*T)))}}function $l(){Zs[bf]=hy,Zs[Jo]=Zo,Zs[Hp]=my,Zs[cd]=Zc,Zs[ud]=tc,Zs[en]=pd,Zs[_f]=vm,Zs[Yc]=Zo,Zs[Zl]=Zc,Zs[dd]=tc,Zs[fd]=pd}function $c(y){return y&-16384?0>y?0:255:y>>Xo}function qo(y,N){return $c((19077*y>>8)+(26149*N>>8)-14234)}function zl(y,N,T){return $c((19077*y>>8)-(6419*N>>8)-(13320*T>>8)+8708)}function Vo(y,N){return $c((19077*y>>8)+(33050*N>>8)-17685)}function Wo(y,N,T,$,W){$[W+0]=qo(y,T),$[W+1]=zl(y,N,T),$[W+2]=Vo(y,N)}function Ns(y,N,T,$,W){$[W+0]=Vo(y,N),$[W+1]=zl(y,N,T),$[W+2]=qo(y,T)}function ql(y,N,T,$,W){var J=zl(y,N,T);N=J<<3&224|Vo(y,N)>>3,$[W+0]=248&qo(y,T)|J>>5,$[W+1]=N}function Vl(y,N,T,$,W){var J=240&Vo(y,N)|15;$[W+0]=240&qo(y,T)|zl(y,N,T)>>4,$[W+1]=J}function sd(y,N,T,$,W){$[W+0]=255,Wo(y,N,T,$,W+1)}function id(y,N,T,$,W){Ns(y,N,T,$,W),$[W+3]=255}function Us(y,N,T,$,W){Wo(y,N,T,$,W),$[W+3]=255}function aa(y,N,T){I[y]=function($,W,J,ee,ae,oe,de,_e,Re){for(var fe=_e+(-2&Re)*T;_e!=fe;)N($[W+0],J[ee+0],ae[oe+0],de,_e),N($[W+1],J[ee+0],ae[oe+0],de,_e+T),W+=2,++ee,++oe,_e+=2*T;1&Re&&N($[W+0],J[ee+0],ae[oe+0],de,_e)}}function Oa(y,N,T){return T==0?y==0?N==0?6:5:N==0?4:0:T}function yf(y,N,T,$,W){switch(y>>>30){case 3:Yl(N,T,$,W,0);break;case 2:Cn(N,T,$,W);break;case 1:Br(N,T,$,W)}}function gi(y,N){var T,$,W=N.M,J=N.Nb,ee=y.oc,ae=y.pc+40,oe=y.oc,de=y.pc+584,_e=y.oc,Re=y.pc+600;for(T=0;16>T;++T)ee[ae+32*T-1]=129;for(T=0;8>T;++T)oe[de+32*T-1]=129,_e[Re+32*T-1]=129;for(0<W?ee[ae-1-32]=oe[de-1-32]=_e[Re-1-32]=129:(i(ee,ae-32-1,127,21),i(oe,de-32-1,127,9),i(_e,Re-32-1,127,9)),$=0;$<y.za;++$){var fe=N.ya[N.aa+$];if(0<$){for(T=-1;16>T;++T)n(ee,ae+32*T-4,ee,ae+32*T+12,4);for(T=-1;8>T;++T)n(oe,de+32*T-4,oe,de+32*T+4,4),n(_e,Re+32*T-4,_e,Re+32*T+4,4)}var je=y.Gd,Te=y.Hd+$,Ge=fe.ad,De=fe.Hc;if(0<W&&(n(ee,ae-32,je[Te].y,0,16),n(oe,de-32,je[Te].f,0,8),n(_e,Re-32,je[Te].ea,0,8)),fe.Za){var $e=ee,We=ae-32+16;for(0<W&&($>=y.za-1?i($e,We,je[Te].y[15],4):n($e,We,je[Te+1].y,0,4)),T=0;4>T;T++)$e[We+128+T]=$e[We+256+T]=$e[We+384+T]=$e[We+0+T];for(T=0;16>T;++T,De<<=2)$e=ee,We=ae+ym[T],Mi[fe.Ob[T]]($e,We),yf(De,Ge,16*+T,$e,We)}else if($e=Oa($,W,fe.Ob[0]),zs[$e](ee,ae),De!=0)for(T=0;16>T;++T,De<<=2)yf(De,Ge,16*+T,ee,ae+ym[T]);for(T=fe.Gc,$e=Oa($,W,fe.Dd),Js[$e](oe,de),Js[$e](_e,Re),De=Ge,$e=oe,We=de,255&(fe=0|T)&&(170&fe?Qs(De,256,$e,We):Qr(De,256,$e,We)),fe=_e,De=Re,255&(T>>=8)&&(170&T?Qs(Ge,320,fe,De):Qr(Ge,320,fe,De)),W<y.Ub-1&&(n(je[Te].y,0,ee,ae+480,16),n(je[Te].f,0,oe,de+224,8),n(je[Te].ea,0,_e,Re+224,8)),T=8*J*y.B,je=y.sa,Te=y.ta+16*$+16*J*y.R,Ge=y.qa,fe=y.ra+8*$+T,De=y.Ha,$e=y.Ia+8*$+T,T=0;16>T;++T)n(je,Te+T*y.R,ee,ae+32*T,16);for(T=0;8>T;++T)n(Ge,fe+T*y.B,oe,de+32*T,8),n(De,$e+T*y.B,_e,Re+32*T,8)}}function Ho(y,N,T,$,W,J,ee,ae,oe){var de=[0],_e=[0],Re=0,fe=oe!=null?oe.kd:0,je=oe??new rt;if(y==null||12>T)return 7;je.data=y,je.w=N,je.ha=T,N=[N],T=[T],je.gb=[je.gb];e:{var Te=N,Ge=T,De=je.gb;if(t(y!=null),t(Ge!=null),t(De!=null),De[0]=0,12<=Ge[0]&&!r(y,Te[0],"RIFF")){if(r(y,Te[0]+8,"WEBP")){De=3;break e}var $e=qe(y,Te[0]+4);if(12>$e||4294967286<$e){De=3;break e}if(fe&&$e>Ge[0]-8){De=7;break e}De[0]=$e,Te[0]+=12,Ge[0]-=12}De=0}if(De!=0)return De;for($e=0<je.gb[0],T=T[0];;){e:{var We=y;Ge=N,De=T;var Ye=de,Qe=_e,Bt=Te=[0];if((Lt=Re=[Re])[0]=0,8>De[0])De=7;else{if(!r(We,Ge[0],"VP8X")){if(qe(We,Ge[0]+4)!=10){De=3;break e}if(18>De[0]){De=7;break e}var kt=qe(We,Ge[0]+8),mr=1+ve(We,Ge[0]+12);if(2147483648<=mr*(We=1+ve(We,Ge[0]+15))){De=3;break e}Bt!=null&&(Bt[0]=kt),Ye!=null&&(Ye[0]=mr),Qe!=null&&(Qe[0]=We),Ge[0]+=18,De[0]-=18,Lt[0]=1}De=0}}if(Re=Re[0],Te=Te[0],De!=0)return De;if(Ge=!!(2&Te),!$e&&Re)return 3;if(J!=null&&(J[0]=!!(16&Te)),ee!=null&&(ee[0]=Ge),ae!=null&&(ae[0]=0),ee=de[0],Te=_e[0],Re&&Ge&&oe==null){De=0;break}if(4>T){De=7;break}if($e&&Re||!$e&&!Re&&!r(y,N[0],"ALPH")){T=[T],je.na=[je.na],je.P=[je.P],je.Sa=[je.Sa];e:{kt=y,De=N,$e=T;var Lt=je.gb;Ye=je.na,Qe=je.P,Bt=je.Sa,mr=22,t(kt!=null),t($e!=null),We=De[0];var kr=$e[0];for(t(Ye!=null),t(Bt!=null),Ye[0]=null,Qe[0]=null,Bt[0]=0;;){if(De[0]=We,$e[0]=kr,8>kr){De=7;break e}var An=qe(kt,We+4);if(4294967286<An){De=3;break e}var gr=8+An+1&-2;if(mr+=gr,0<Lt&&mr>Lt){De=3;break e}if(!r(kt,We,"VP8 ")||!r(kt,We,"VP8L")){De=0;break e}if(kr[0]<gr){De=7;break e}r(kt,We,"ALPH")||(Ye[0]=kt,Qe[0]=We+8,Bt[0]=An),We+=gr,kr-=gr}}if(T=T[0],je.na=je.na[0],je.P=je.P[0],je.Sa=je.Sa[0],De!=0)break}T=[T],je.Ja=[je.Ja],je.xa=[je.xa];e:if(Lt=y,De=N,$e=T,Ye=je.gb[0],Qe=je.Ja,Bt=je.xa,kt=De[0],We=!r(Lt,kt,"VP8 "),mr=!r(Lt,kt,"VP8L"),t(Lt!=null),t($e!=null),t(Qe!=null),t(Bt!=null),8>$e[0])De=7;else{if(We||mr){if(Lt=qe(Lt,kt+4),12<=Ye&&Lt>Ye-12){De=3;break e}if(fe&&Lt>$e[0]-8){De=7;break e}Qe[0]=Lt,De[0]+=8,$e[0]-=8,Bt[0]=mr}else Bt[0]=5<=$e[0]&&Lt[kt+0]==47&&!(Lt[kt+4]>>5),Qe[0]=$e[0];De=0}if(T=T[0],je.Ja=je.Ja[0],je.xa=je.xa[0],N=N[0],De!=0)break;if(4294967286<je.Ja)return 3;if(ae==null||Ge||(ae[0]=je.xa?2:1),ee=[ee],Te=[Te],je.xa){if(5>T){De=7;break}ae=ee,fe=Te,Ge=J,y==null||5>T?y=0:5<=T&&y[N+0]==47&&!(y[N+4]>>5)?($e=[0],Lt=[0],Ye=[0],se(Qe=new V,y,N,T),nt(Qe,$e,Lt,Ye)?(ae!=null&&(ae[0]=$e[0]),fe!=null&&(fe[0]=Lt[0]),Ge!=null&&(Ge[0]=Ye[0]),y=1):y=0):y=0}else{if(10>T){De=7;break}ae=Te,y==null||10>T||!Tl(y,N+3,T-3)?y=0:(fe=y[N+0]|y[N+1]<<8|y[N+2]<<16,Ge=16383&(y[N+7]<<8|y[N+6]),y=16383&(y[N+9]<<8|y[N+8]),1&fe||3<(fe>>1&7)||!(fe>>4&1)||fe>>5>=je.Ja||!Ge||!y?y=0:(ee&&(ee[0]=Ge),ae&&(ae[0]=y),y=1))}if(!y||(ee=ee[0],Te=Te[0],Re&&(de[0]!=ee||_e[0]!=Te)))return 3;oe!=null&&(oe[0]=je,oe.offset=N-oe.w,t(4294967286>N-oe.w),t(oe.offset==oe.ha-T));break}return De==0||De==7&&Re&&oe==null?(J!=null&&(J[0]|=je.na!=null&&0<je.na.length),$!=null&&($[0]=ee),W!=null&&(W[0]=Te),0):De}function zc(y,N,T){var $=N.width,W=N.height,J=0,ee=0,ae=$,oe=W;if(N.Da=y!=null&&0<y.Da,N.Da&&(ae=y.cd,oe=y.bd,J=y.v,ee=y.j,11>T||(J&=-2,ee&=-2),0>J||0>ee||0>=ae||0>=oe||J+ae>$||ee+oe>W))return 0;if(N.v=J,N.j=ee,N.va=J+ae,N.o=ee+oe,N.U=ae,N.T=oe,N.da=y!=null&&0<y.da,N.da){if(!St(ae,oe,T=[y.ib],J=[y.hb]))return 0;N.ib=T[0],N.hb=J[0]}return N.ob=y!=null&&y.ob,N.Kb=y==null||!y.Sd,N.da&&(N.ob=N.ib<3*$/4&&N.hb<3*W/4,N.Kb=0),1}function qc(y){if(y==null)return 2;if(11>y.S){var N=y.f.RGBA;N.fb+=(y.height-1)*N.A,N.A=-N.A}else N=y.f.kb,y=y.height,N.O+=(y-1)*N.fa,N.fa=-N.fa,N.N+=(y-1>>1)*N.Ab,N.Ab=-N.Ab,N.W+=(y-1>>1)*N.Db,N.Db=-N.Db,N.F!=null&&(N.J+=(y-1)*N.lb,N.lb=-N.lb);return 0}function no(y,N,T,$){if($==null||0>=y||0>=N)return 2;if(T!=null){if(T.Da){var W=T.cd,J=T.bd,ee=-2&T.v,ae=-2&T.j;if(0>ee||0>ae||0>=W||0>=J||ee+W>y||ae+J>N)return 2;y=W,N=J}if(T.da){if(!St(y,N,W=[T.ib],J=[T.hb]))return 2;y=W[0],N=J[0]}}$.width=y,$.height=N;e:{var oe=$.width,de=$.height;if(y=$.S,0>=oe||0>=de||!(y>=bf&&13>y))y=2;else{if(0>=$.Rd&&$.sd==null){ee=J=W=N=0;var _e=(ae=oe*gd[y])*de;if(11>y||(J=(de+1)/2*(N=(oe+1)/2),y==12&&(ee=(W=oe)*de)),(de=a(_e+2*J+ee))==null){y=1;break e}$.sd=de,11>y?((oe=$.f.RGBA).eb=de,oe.fb=0,oe.A=ae,oe.size=_e):((oe=$.f.kb).y=de,oe.O=0,oe.fa=ae,oe.Fd=_e,oe.f=de,oe.N=0+_e,oe.Ab=N,oe.Cd=J,oe.ea=de,oe.W=0+_e+J,oe.Db=N,oe.Ed=J,y==12&&(oe.F=de,oe.J=0+_e+2*J),oe.Tc=ee,oe.lb=W)}if(N=1,W=$.S,J=$.width,ee=$.height,W>=bf&&13>W)if(11>W)y=$.f.RGBA,N&=(ae=Math.abs(y.A))*(ee-1)+J<=y.size,N&=ae>=J*gd[W],N&=y.eb!=null;else{y=$.f.kb,ae=(J+1)/2,_e=(ee+1)/2,oe=Math.abs(y.fa),de=Math.abs(y.Ab);var Re=Math.abs(y.Db),fe=Math.abs(y.lb),je=fe*(ee-1)+J;N&=oe*(ee-1)+J<=y.Fd,N&=de*(_e-1)+ae<=y.Cd,N=(N&=Re*(_e-1)+ae<=y.Ed)&oe>=J&de>=ae&Re>=ae,N&=y.y!=null,N&=y.f!=null,N&=y.ea!=null,W==12&&(N&=fe>=J,N&=je<=y.Tc,N&=y.F!=null)}else N=0;y=N?0:2}}return y!=0||T!=null&&T.fd&&(y=qc($)),y}var Ii=64,vi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],yi=24,Go=32,Ma=8,so=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];ye("Predictor0","PredictorAdd0"),I.Predictor0=function(){return 4278190080},I.Predictor1=function(y){return y},I.Predictor2=function(y,N,T){return N[T+0]},I.Predictor3=function(y,N,T){return N[T+1]},I.Predictor4=function(y,N,T){return N[T-1]},I.Predictor5=function(y,N,T){return Ue(Ue(y,N[T+1]),N[T+0])},I.Predictor6=function(y,N,T){return Ue(y,N[T-1])},I.Predictor7=function(y,N,T){return Ue(y,N[T+0])},I.Predictor8=function(y,N,T){return Ue(N[T-1],N[T+0])},I.Predictor9=function(y,N,T){return Ue(N[T+0],N[T+1])},I.Predictor10=function(y,N,T){return Ue(Ue(y,N[T-1]),Ue(N[T+0],N[T+1]))},I.Predictor11=function(y,N,T){var $=N[T+0];return 0>=Ze($>>24&255,y>>24&255,(N=N[T-1])>>24&255)+Ze($>>16&255,y>>16&255,N>>16&255)+Ze($>>8&255,y>>8&255,N>>8&255)+Ze(255&$,255&y,255&N)?$:y},I.Predictor12=function(y,N,T){var $=N[T+0];return(Je((y>>24&255)+($>>24&255)-((N=N[T-1])>>24&255))<<24|Je((y>>16&255)+($>>16&255)-(N>>16&255))<<16|Je((y>>8&255)+($>>8&255)-(N>>8&255))<<8|Je((255&y)+(255&$)-(255&N)))>>>0},I.Predictor13=function(y,N,T){var $=N[T-1];return(He((y=Ue(y,N[T+0]))>>24&255,$>>24&255)<<24|He(y>>16&255,$>>16&255)<<16|He(y>>8&255,$>>8&255)<<8|He(255&y,255&$))>>>0};var io=I.PredictorAdd0;I.PredictorAdd1=ft,ye("Predictor2","PredictorAdd2"),ye("Predictor3","PredictorAdd3"),ye("Predictor4","PredictorAdd4"),ye("Predictor5","PredictorAdd5"),ye("Predictor6","PredictorAdd6"),ye("Predictor7","PredictorAdd7"),ye("Predictor8","PredictorAdd8"),ye("Predictor9","PredictorAdd9"),ye("Predictor10","PredictorAdd10"),ye("Predictor11","PredictorAdd11"),ye("Predictor12","PredictorAdd12"),ye("Predictor13","PredictorAdd13");var Fa=I.PredictorAdd2;xt("ColorIndexInverseTransform","MapARGB","32b",function(y){return y>>8&255},function(y){return y}),xt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(y){return y},function(y){return y>>8&255});var In,Wl=I.ColorIndexInverseTransform,Ba=I.MapARGB,oa=I.VP8LColorIndexInverseTransformAlpha,Hl=I.MapAlpha,Gl=I.VP8LPredictorsAdd=[];Gl.length=16,(I.VP8LPredictors=[]).length=16,(I.VP8LPredictorsAdd_C=[]).length=16,(I.VP8LPredictors_C=[]).length=16;var Vc,Wc,ao,Ko,Yo,Kl,Qo,Yl,Cn,Qs,Br,Qr,En,Wn,la,ad,Hc,oo,xf,Gc,wf,am,od,Ql,Jl,om,ld,lm,cm=a(511),um=a(2041),dm=a(225),fm=a(767),hm=0,Ua=um,Kc=dm,$s=fm,Oi=cm,bf=0,Jo=1,Hp=2,cd=3,ud=4,en=5,_f=6,Yc=7,Zl=8,dd=9,fd=10,hd=[2,3,7],Nf=[3,3,11],Xl=[280,256,256,256,40],Gp=[0,1,1,1,0],cy=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],uy=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Kp=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],jf=8,Qc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],md=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ec=null,mm=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],pm=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Yp=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Qp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],dy=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],fy=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gm=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zs=[],Mi=[],Js=[],$a=1,Jc=2,Ps=[],Zs=[];ro("UpsampleRgbLinePair",Wo,3),ro("UpsampleBgrLinePair",Ns,3),ro("UpsampleRgbaLinePair",Us,4),ro("UpsampleBgraLinePair",id,4),ro("UpsampleArgbLinePair",sd,4),ro("UpsampleRgba4444LinePair",Vl,2),ro("UpsampleRgb565LinePair",ql,2);var hy=I.UpsampleRgbLinePair,my=I.UpsampleBgrLinePair,Zo=I.UpsampleRgbaLinePair,Zc=I.UpsampleBgraLinePair,tc=I.UpsampleArgbLinePair,pd=I.UpsampleRgba4444LinePair,vm=I.UpsampleRgb565LinePair,lo=16,ca=1<<lo-1,Kr=-227,Jr=482,Xo=6,js=0,Xs=a(256),rc=a(256),Xc=a(256),ei=a(256),Sf=a(Jr-Kr),Jp=a(Jr-Kr);aa("YuvToRgbRow",Wo,3),aa("YuvToBgrRow",Ns,3),aa("YuvToRgbaRow",Us,4),aa("YuvToBgraRow",id,4),aa("YuvToArgbRow",sd,4),aa("YuvToRgba4444Row",Vl,2),aa("YuvToRgb565Row",ql,2);var ym=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],nc=[0,2,8],Zp=[8,7,6,4,4,2,2,2,1,1,1,1],co=1;this.WebPDecodeRGBA=function(y,N,T,$,W){var J=Jo,ee=new Ke,ae=new Qt;ee.ba=ae,ae.S=J,ae.width=[ae.width],ae.height=[ae.height];var oe=ae.width,de=ae.height,_e=new Tt;if(_e==null||y==null)var Re=2;else t(_e!=null),Re=Ho(y,N,T,_e.width,_e.height,_e.Pd,_e.Qd,_e.format,null);if(Re!=0?oe=0:(oe!=null&&(oe[0]=_e.width[0]),de!=null&&(de[0]=_e.height[0]),oe=1),oe){ae.width=ae.width[0],ae.height=ae.height[0],$!=null&&($[0]=ae.width),W!=null&&(W[0]=ae.height);e:{if($=new Lc,(W=new rt).data=y,W.w=N,W.ha=T,W.kd=1,N=[0],t(W!=null),((y=Ho(W.data,W.w,W.ha,null,null,null,N,null,W))==0||y==7)&&N[0]&&(y=4),(N=y)==0){if(t(ee!=null),$.data=W.data,$.w=W.w+W.offset,$.ha=W.ha-W.offset,$.put=Et,$.ac=cn,$.bc=Ee,$.ma=ee,W.xa){if((y=Cl())==null){ee=1;break e}if((function(fe,je){var Te=[0],Ge=[0],De=[0];t:for(;;){if(fe==null)return 0;if(je==null)return fe.a=2,0;if(fe.l=je,fe.a=0,se(fe.m,je.data,je.w,je.ha),!nt(fe.m,Te,Ge,De)){fe.a=3;break t}if(fe.xb=Jc,je.width=Te[0],je.height=Ge[0],!ra(Te[0],Ge[0],1,fe,null))break t;return 1}return t(fe.a!=0),0})(y,$)){if($=(N=no($.width,$.height,ee.Oa,ee.ba))==0){t:{$=y;r:for(;;){if($==null){$=0;break t}if(t($.s.yc!=null),t($.s.Ya!=null),t(0<$.s.Wb),t((T=$.l)!=null),t((W=T.ma)!=null),$.xb!=0){if($.ca=W.ba,$.tb=W.tb,t($.ca!=null),!zc(W.Oa,T,cd)){$.a=2;break r}if(!Bo($,T.width)||T.da)break r;if((T.da||Vt($.ca.S))&&ia(),11>$.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),$.ca.f.kb.F!=null&&ia()),$.Pb&&0<$.s.ua&&$.s.vb.X==null&&!ne($.s.vb,$.s.Wa.Xa)){$.a=1;break r}$.xb=0}if(!Ei($,$.V,$.Ba,$.c,$.i,T.o,Fo))break r;W.Dc=$.Ma,$=1;break t}t($.a!=0),$=0}$=!$}$&&(N=y.a)}else N=y.a}else{if((y=new sm)==null){ee=1;break e}if(y.Fa=W.na,y.P=W.P,y.qc=W.Sa,mi(y,$)){if((N=no($.width,$.height,ee.Oa,ee.ba))==0){if(y.Aa=0,T=ee.Oa,t((W=y)!=null),T!=null){if(0<(oe=0>(oe=T.Md)?0:100<oe?255:255*oe/100)){for(de=_e=0;4>de;++de)12>(Re=W.pb[de]).lc&&(Re.ia=oe*Zp[0>Re.lc?0:Re.lc]>>3),_e|=Re.ia;_e&&(alert("todo:VP8InitRandom"),W.ia=1)}W.Ga=T.Id,100<W.Ga?W.Ga=100:0>W.Ga&&(W.Ga=0)}(function(fe,je){if(fe==null)return 0;if(je==null)return qn(fe,2,"NULL VP8Io parameter in VP8Decode().");if(!fe.cb&&!mi(fe,je))return 0;if(t(fe.cb),je.ac==null||je.ac(je)){je.ob&&(fe.L=0);var Te=nc[fe.L];if(fe.L==2?(fe.yb=0,fe.zb=0):(fe.yb=je.v-Te>>4,fe.zb=je.j-Te>>4,0>fe.yb&&(fe.yb=0),0>fe.zb&&(fe.zb=0)),fe.Va=je.o+15+Te>>4,fe.Hb=je.va+15+Te>>4,fe.Hb>fe.za&&(fe.Hb=fe.za),fe.Va>fe.Ub&&(fe.Va=fe.Ub),0<fe.L){var Ge=fe.ed;for(Te=0;4>Te;++Te){var De;if(fe.Qa.Cb){var $e=fe.Qa.Lb[Te];fe.Qa.Fb||($e+=Ge.Tb)}else $e=Ge.Tb;for(De=0;1>=De;++De){var We=fe.gd[Te][De],Ye=$e;if(Ge.Pc&&(Ye+=Ge.vd[0],De&&(Ye+=Ge.od[0])),0<(Ye=0>Ye?0:63<Ye?63:Ye)){var Qe=Ye;0<Ge.wb&&(Qe=4<Ge.wb?Qe>>2:Qe>>1)>9-Ge.wb&&(Qe=9-Ge.wb),1>Qe&&(Qe=1),We.dd=Qe,We.tc=2*Ye+Qe,We.ld=40<=Ye?2:15<=Ye?1:0}else We.tc=0;We.La=De}}}Te=0}else qn(fe,6,"Frame setup failed"),Te=fe.a;if(Te=Te==0){if(Te){fe.$c=0,0<fe.Aa||(fe.Ic=co);t:{Te=fe.Ic,Ge=4*(Qe=fe.za);var Bt=32*Qe,kt=Qe+1,mr=0<fe.L?Qe*(0<fe.Aa?2:1):0,Lt=(fe.Aa==2?2:1)*Qe;if((We=Ge+832+(De=3*(16*Te+nc[fe.L])/2*Bt)+($e=fe.Fa!=null&&0<fe.Fa.length?fe.Kc.c*fe.Kc.i:0))!=We)Te=0;else{if(We>fe.Vb){if(fe.Vb=0,fe.Ec=a(We),fe.Fc=0,fe.Ec==null){Te=qn(fe,1,"no memory during frame initialization.");break t}fe.Vb=We}We=fe.Ec,Ye=fe.Fc,fe.Ac=We,fe.Bc=Ye,Ye+=Ge,fe.Gd=o(Bt,hi),fe.Hd=0,fe.rb=o(kt+1,Uo),fe.sb=1,fe.wa=mr?o(mr,fi):null,fe.Y=0,fe.D.Nb=0,fe.D.wa=fe.wa,fe.D.Y=fe.Y,0<fe.Aa&&(fe.D.Y+=Qe),t(!0),fe.oc=We,fe.pc=Ye,Ye+=832,fe.ya=o(Lt,Rc),fe.aa=0,fe.D.ya=fe.ya,fe.D.aa=fe.aa,fe.Aa==2&&(fe.D.aa+=Qe),fe.R=16*Qe,fe.B=8*Qe,Qe=(Bt=nc[fe.L])*fe.R,Bt=Bt/2*fe.B,fe.sa=We,fe.ta=Ye+Qe,fe.qa=fe.sa,fe.ra=fe.ta+16*Te*fe.R+Bt,fe.Ha=fe.qa,fe.Ia=fe.ra+8*Te*fe.B+Bt,fe.$c=0,Ye+=De,fe.mb=$e?We:null,fe.nb=$e?Ye:null,t(Ye+$e<=fe.Fc+fe.Vb),Rl(fe),i(fe.Ac,fe.Bc,0,Ge),Te=1}}if(Te){if(je.ka=0,je.y=fe.sa,je.O=fe.ta,je.f=fe.qa,je.N=fe.ra,je.ea=fe.Ha,je.Vd=fe.Ia,je.fa=fe.R,je.Rc=fe.B,je.F=null,je.J=0,!hm){for(Te=-255;255>=Te;++Te)cm[255+Te]=0>Te?-Te:Te;for(Te=-1020;1020>=Te;++Te)um[1020+Te]=-128>Te?-128:127<Te?127:Te;for(Te=-112;112>=Te;++Te)dm[112+Te]=-16>Te?-16:15<Te?15:Te;for(Te=-255;510>=Te;++Te)fm[255+Te]=0>Te?0:255<Te?255:Te;hm=1}Qo=Dl,Yl=Ll,Qs=Ra,Br=Dc,Qr=Mr,Cn=Zu,En=As,Wn=Di,la=H,ad=he,Hc=Uc,oo=A,xf=be,Gc=Ae,wf=eo,am=zo,od=nd,Ql=Ul,Mi[0]=gf,Mi[1]=Xu,Mi[2]=Da,Mi[3]=im,Mi[4]=pi,Mi[5]=vf,Mi[6]=Xa,Mi[7]=Mc,Mi[8]=ed,Mi[9]=Ol,zs[0]=La,zs[1]=pf,zs[2]=Ic,zs[3]=Oc,zs[4]=Ks,zs[5]=Pi,zs[6]=Il,Js[0]=Fc,Js[1]=mf,Js[2]=sa,Js[3]=Ml,Js[4]=rd,Js[5]=td,Js[6]=Bc,Te=1}else Te=0}Te&&(Te=(function(kr,An){for(kr.M=0;kr.M<kr.Va;++kr.M){var gr,Ct=kr.Jc[kr.M&kr.Xb],mt=kr.m,On=kr;for(gr=0;gr<On.za;++gr){var ar=mt,Sr=On,dn=Sr.Ac,fs=Sr.Bc+4*gr,Hn=Sr.zc,jn=Sr.ya[Sr.aa+gr];if(Sr.Qa.Bb?jn.$b=we(ar,Sr.Pa.jb[0])?2+we(ar,Sr.Pa.jb[2]):we(ar,Sr.Pa.jb[1]):jn.$b=0,Sr.kc&&(jn.Ad=we(ar,Sr.Bd)),jn.Za=!we(ar,145)+0,jn.Za){var ns=jn.Ob,hs=0;for(Sr=0;4>Sr;++Sr){var pn,Pr=Hn[0+Sr];for(pn=0;4>pn;++pn){Pr=dy[dn[fs+pn]][Pr];for(var Ur=Yp[we(ar,Pr[0])];0<Ur;)Ur=Yp[2*Ur+we(ar,Pr[Ur])];Pr=-Ur,dn[fs+pn]=Pr}n(ns,hs,dn,fs,4),hs+=4,Hn[0+Sr]=Pr}}else Pr=we(ar,156)?we(ar,128)?1:3:we(ar,163)?2:0,jn.Ob[0]=Pr,i(dn,fs,Pr,4),i(Hn,0,Pr,4);jn.Dd=we(ar,142)?we(ar,114)?we(ar,183)?1:3:2:0}if(On.m.Ka)return qn(kr,7,"Premature end-of-partition0 encountered.");for(;kr.ja<kr.za;++kr.ja){if(On=Ct,ar=(mt=kr).rb[mt.sb-1],dn=mt.rb[mt.sb+mt.ja],gr=mt.ya[mt.aa+mt.ja],fs=mt.kc?gr.Ad:0)ar.la=dn.la=0,gr.Za||(ar.Na=dn.Na=0),gr.Hc=0,gr.Gc=0,gr.ia=0;else{var gn,$r;if(ar=dn,dn=On,fs=mt.Pa.Xc,Hn=mt.ya[mt.aa+mt.ja],jn=mt.pb[Hn.$b],Sr=Hn.ad,ns=0,hs=mt.rb[mt.sb-1],Pr=pn=0,i(Sr,ns,0,384),Hn.Za)var Pn=0,Tn=fs[3];else{Ur=a(16);var tn=ar.Na+hs.Na;if(tn=ec(dn,fs[1],tn,jn.Eb,0,Ur,0),ar.Na=hs.Na=(0<tn)+0,1<tn)Qo(Ur,0,Sr,ns);else{var Ts=Ur[0]+3>>3;for(Ur=0;256>Ur;Ur+=16)Sr[ns+Ur]=Ts}Pn=1,Tn=fs[0]}var Zr=15&ar.la,rn=15&hs.la;for(Ur=0;4>Ur;++Ur){var Gn=1&rn;for(Ts=$r=0;4>Ts;++Ts)Zr=Zr>>1|(Gn=(tn=ec(dn,Tn,tn=Gn+(1&Zr),jn.Sc,Pn,Sr,ns))>Pn)<<7,$r=$r<<2|(3<tn?3:1<tn?2:Sr[ns+0]!=0),ns+=16;Zr>>=4,rn=rn>>1|Gn<<7,pn=(pn<<8|$r)>>>0}for(Tn=Zr,Pn=rn>>4,gn=0;4>gn;gn+=2){for($r=0,Zr=ar.la>>4+gn,rn=hs.la>>4+gn,Ur=0;2>Ur;++Ur){for(Gn=1&rn,Ts=0;2>Ts;++Ts)tn=Gn+(1&Zr),Zr=Zr>>1|(Gn=0<(tn=ec(dn,fs[2],tn,jn.Qc,0,Sr,ns)))<<3,$r=$r<<2|(3<tn?3:1<tn?2:Sr[ns+0]!=0),ns+=16;Zr>>=2,rn=rn>>1|Gn<<5}Pr|=$r<<4*gn,Tn|=Zr<<4<<gn,Pn|=(240&rn)<<gn}ar.la=Tn,hs.la=Pn,Hn.Hc=pn,Hn.Gc=Pr,Hn.ia=43690&Pr?0:jn.ia,fs=!(pn|Pr)}if(0<mt.L&&(mt.wa[mt.Y+mt.ja]=mt.gd[gr.$b][gr.Za],mt.wa[mt.Y+mt.ja].La|=!fs),On.Ka)return qn(kr,7,"Premature end-of-file encountered.")}if(Rl(kr),mt=An,On=1,gr=(Ct=kr).D,ar=0<Ct.L&&Ct.M>=Ct.zb&&Ct.M<=Ct.Va,Ct.Aa==0)t:{if(gr.M=Ct.M,gr.uc=ar,gi(Ct,gr),On=1,gr=($r=Ct.D).Nb,ar=(Pr=nc[Ct.L])*Ct.R,dn=Pr/2*Ct.B,Ur=16*gr*Ct.R,Ts=8*gr*Ct.B,fs=Ct.sa,Hn=Ct.ta-ar+Ur,jn=Ct.qa,Sr=Ct.ra-dn+Ts,ns=Ct.Ha,hs=Ct.Ia-dn+Ts,rn=(Zr=$r.M)==0,pn=Zr>=Ct.Va-1,Ct.Aa==2&&gi(Ct,$r),$r.uc)for(Gn=(tn=Ct).D.M,t(tn.D.uc),$r=tn.yb;$r<tn.Hb;++$r){Pn=$r,Tn=Gn;var Ss=(ti=(Bn=tn).D).Nb;gn=Bn.R;var ti=ti.wa[ti.Y+Pn],Mn=Bn.sa,Fn=Bn.ta+16*Ss*gn+16*Pn,Rs=ti.dd,nn=ti.tc;if(nn!=0)if(t(3<=nn),Bn.L==1)0<Pn&&am(Mn,Fn,gn,nn+4),ti.La&&Ql(Mn,Fn,gn,nn),0<Tn&&wf(Mn,Fn,gn,nn+4),ti.La&&od(Mn,Fn,gn,nn);else{var Ls=Bn.B,Fi=Bn.qa,ua=Bn.ra+8*Ss*Ls+8*Pn,ms=Bn.Ha,Bn=Bn.Ia+8*Ss*Ls+8*Pn;Ss=ti.ld,0<Pn&&(Wn(Mn,Fn,gn,nn+4,Rs,Ss),ad(Fi,ua,ms,Bn,Ls,nn+4,Rs,Ss)),ti.La&&(oo(Mn,Fn,gn,nn,Rs,Ss),Gc(Fi,ua,ms,Bn,Ls,nn,Rs,Ss)),0<Tn&&(En(Mn,Fn,gn,nn+4,Rs,Ss),la(Fi,ua,ms,Bn,Ls,nn+4,Rs,Ss)),ti.La&&(Hc(Mn,Fn,gn,nn,Rs,Ss),xf(Fi,ua,ms,Bn,Ls,nn,Rs,Ss))}}if(Ct.ia&&alert("todo:DitherRow"),mt.put!=null){if($r=16*Zr,Zr=16*(Zr+1),rn?(mt.y=Ct.sa,mt.O=Ct.ta+Ur,mt.f=Ct.qa,mt.N=Ct.ra+Ts,mt.ea=Ct.Ha,mt.W=Ct.Ia+Ts):($r-=Pr,mt.y=fs,mt.O=Hn,mt.f=jn,mt.N=Sr,mt.ea=ns,mt.W=hs),pn||(Zr-=Pr),Zr>mt.o&&(Zr=mt.o),mt.F=null,mt.J=null,Ct.Fa!=null&&0<Ct.Fa.length&&$r<Zr&&(mt.J=un(Ct,mt,$r,Zr-$r),mt.F=Ct.mb,mt.F==null&&mt.F.length==0)){On=qn(Ct,3,"Could not decode alpha data.");break t}$r<mt.j&&(Pr=mt.j-$r,$r=mt.j,t(!(1&Pr)),mt.O+=Ct.R*Pr,mt.N+=Ct.B*(Pr>>1),mt.W+=Ct.B*(Pr>>1),mt.F!=null&&(mt.J+=mt.width*Pr)),$r<Zr&&(mt.O+=mt.v,mt.N+=mt.v>>1,mt.W+=mt.v>>1,mt.F!=null&&(mt.J+=mt.v),mt.ka=$r-mt.j,mt.U=mt.va-mt.v,mt.T=Zr-$r,On=mt.put(mt))}gr+1!=Ct.Ic||pn||(n(Ct.sa,Ct.ta-ar,fs,Hn+16*Ct.R,ar),n(Ct.qa,Ct.ra-dn,jn,Sr+8*Ct.B,dn),n(Ct.Ha,Ct.Ia-dn,ns,hs+8*Ct.B,dn))}if(!On)return qn(kr,6,"Output aborted.")}return 1})(fe,je)),je.bc!=null&&je.bc(je),Te&=1}return Te?(fe.cb=0,Te):0})(y,$)||(N=y.a)}}else N=y.a}N==0&&ee.Oa!=null&&ee.Oa.fd&&(N=qc(ee.ba))}ee=N}J=ee!=0?null:11>J?ae.f.RGBA.eb:ae.f.kb.y}else J=null;return J};var gd=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function f(I,K){for(var B="",O=0;O<4;O++)B+=String.fromCharCode(I[K++]);return B}function h(I,K){return I[K+0]|I[K+1]<<8}function p(I,K){return(I[K+0]|I[K+1]<<8|I[K+2]<<16)>>>0}function v(I,K){return(I[K+0]|I[K+1]<<8|I[K+2]<<16|I[K+3]<<24)>>>0}new d;var m=[0],j=[0],w=[],_=new d,S=e,E=(function(I,K){var B={},O=0,z=!1,q=0,ue=0;if(B.frames=[],!(function(R,V){for(var Q=0;Q<4;Q++)if(R[V+Q]!="RIFF".charCodeAt(Q))return!0;return!1})(I,K)){for(v(I,K+=4),K+=8;K<I.length;){var ie=f(I,K),le=v(I,K+=4);K+=4;var G=le+(1&le);switch(ie){case"VP8 ":case"VP8L":B.frames[O]===void 0&&(B.frames[O]={}),(te=B.frames[O]).src_off=z?ue:K-8,te.src_size=q+le+8,O++,z&&(z=!1,q=0,ue=0);break;case"VP8X":(te=B.header={}).feature_flags=I[K];var se=K+4;te.canvas_width=1+p(I,se),se+=3,te.canvas_height=1+p(I,se),se+=3;break;case"ALPH":z=!0,q=G+8,ue=K-8;break;case"ANIM":(te=B.header).bgcolor=v(I,K),se=K+4,te.loop_count=h(I,se),se+=2;break;case"ANMF":var xe,te;(te=B.frames[O]={}).offset_x=2*p(I,K),K+=3,te.offset_y=2*p(I,K),K+=3,te.width=1+p(I,K),K+=3,te.height=1+p(I,K),K+=3,te.duration=p(I,K),K+=3,xe=I[K++],te.dispose=1&xe,te.blend=xe>>1&1}ie!="ANMF"&&(K+=G)}return B}})(S,0);E.response=S,E.rgbaoutput=!0,E.dataurl=!1;var k=E.header?E.header:null,C=E.frames?E.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],j=[k.canvas_width];for(var D=0;D<C.length&&C[D].blend!=0;D++);}var M=C[0],F=_.WebPDecodeRGBA(S,M.src_off,M.src_size,j,m);M.rgba=F,M.imgwidth=j[0],M.imgheight=m[0];for(var U=0;U<j[0]*m[0]*4;U++)w[U]=F[U];return this.width=j,this.height=m,this.data=w,this}(function(e){var t,r,n,i,a,o,l,d,f,h=function(R){return R=R||{},this.isStrokeTransparent=R.isStrokeTransparent||!1,this.strokeOpacity=R.strokeOpacity||1,this.strokeStyle=R.strokeStyle||"#000000",this.fillStyle=R.fillStyle||"#000000",this.isFillTransparent=R.isFillTransparent||!1,this.fillOpacity=R.fillOpacity||1,this.font=R.font||"10px sans-serif",this.textBaseline=R.textBaseline||"alphabetic",this.textAlign=R.textAlign||"left",this.lineWidth=R.lineWidth||1,this.lineJoin=R.lineJoin||"miter",this.lineCap=R.lineCap||"butt",this.path=R.path||[],this.transform=R.transform!==void 0?R.transform.clone():new d,this.globalCompositeOperation=R.globalCompositeOperation||"normal",this.globalAlpha=R.globalAlpha||1,this.clip_path=R.clip_path||[],this.currentPoint=R.currentPoint||new o,this.miterLimit=R.miterLimit||10,this.lastPoint=R.lastPoint||new o,this.lineDashOffset=R.lineDashOffset||0,this.lineDash=R.lineDash||[],this.margin=R.margin||[0,0,0,0],this.prevPageLastElemOffset=R.prevPageLastElemOffset||0,this.ignoreClearRect=typeof R.ignoreClearRect!="boolean"||R.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),t=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,i=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,o=this.internal.Point,l=this.internal.Rectangle,d=this.internal.Matrix,f=new h}]);var p=function(R){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var V=R;Object.defineProperty(this,"pdf",{get:function(){return V}});var Q=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Q},set:function(ne){Q=!!ne}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(ne){re=!!ne}});var Z=0;Object.defineProperty(this,"posX",{get:function(){return Z},set:function(ne){isNaN(ne)||(Z=ne)}});var X=0;Object.defineProperty(this,"posY",{get:function(){return X},set:function(ne){isNaN(ne)||(X=ne)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(ne){var tt;typeof ne=="number"?tt=[ne,ne,ne,ne]:((tt=new Array(4))[0]=ne[0],tt[1]=ne.length>=2?ne[1]:tt[0],tt[2]=ne.length>=3?ne[2]:tt[0],tt[3]=ne.length>=4?ne[3]:tt[1]),f.margin=tt}});var pe=!1;Object.defineProperty(this,"autoPaging",{get:function(){return pe},set:function(ne){pe=ne}});var ce=0;Object.defineProperty(this,"lastBreak",{get:function(){return ce},set:function(ne){ce=ne}});var we=[];Object.defineProperty(this,"pageBreaks",{get:function(){return we},set:function(ne){we=ne}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(ne){ne instanceof h&&(f=ne)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(ne){f.path=ne}});var Pe=[];Object.defineProperty(this,"ctxStack",{get:function(){return Pe},set:function(ne){Pe=ne}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ne){var tt;tt=v(ne),this.ctx.fillStyle=tt.style,this.ctx.isFillTransparent=tt.a===0,this.ctx.fillOpacity=tt.a,this.pdf.setFillColor(tt.r,tt.g,tt.b,{a:tt.a}),this.pdf.setTextColor(tt.r,tt.g,tt.b,{a:tt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ne){var tt=v(ne);this.ctx.strokeStyle=tt.style,this.ctx.isStrokeTransparent=tt.a===0,this.ctx.strokeOpacity=tt.a,tt.a===0?this.pdf.setDrawColor(255,255,255):(tt.a,this.pdf.setDrawColor(tt.r,tt.g,tt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ne){["butt","round","square"].indexOf(ne)!==-1&&(this.ctx.lineCap=ne,this.pdf.setLineCap(ne))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ne){isNaN(ne)||(this.ctx.lineWidth=ne,this.pdf.setLineWidth(ne))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ne){["bevel","round","miter"].indexOf(ne)!==-1&&(this.ctx.lineJoin=ne,this.pdf.setLineJoin(ne))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ne){isNaN(ne)||(this.ctx.miterLimit=ne,this.pdf.setMiterLimit(ne))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ne){this.ctx.textBaseline=ne}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ne){["right","end","center","left","start"].indexOf(ne)!==-1&&(this.ctx.textAlign=ne)}});var ze=null,ve=null,qe=null;Object.defineProperty(this,"fontFaces",{get:function(){return qe},set:function(ne){ze=null,ve=null,qe=ne}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ne){var tt;if(this.ctx.font=ne,(tt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ne))!==null){var jt=tt[1];tt[2];var St=tt[3],Xe=tt[4];tt[5];var me=tt[6],ye=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Xe)[2];Xe=Math.floor(ye==="px"?parseFloat(Xe)*this.pdf.internal.scaleFactor:ye==="em"?parseFloat(Xe)*this.pdf.getFontSize():parseFloat(Xe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Xe);var Ce=(function(xt){var Yr,ur,Gt=[],ir=xt.trim();if(ir==="")return x1;if(ir in SS)return[SS[ir]];for(;ir!=="";){switch(ur=null,Yr=(ir=CS(ir)).charAt(0)){case'"':case"'":ur=RK(ir.substring(1),Yr);break;default:ur=LK(ir)}if(ur===null||(Gt.push(ur[0]),(ir=CS(ur[1]))!==""&&ir.charAt(0)!==","))return x1;ir=ir.replace(/^,/,"")}return Gt})(me);if(this.fontFaces){var Ue=(function(xt,Yr){var ur=xt.getFontList(),Gt=JSON.stringify(ur);if(ze===null||ve!==Gt){var ir=(function(Nr){var Be=[];return Object.keys(Nr).forEach(function(rr){Nr[rr].forEach(function(Vt){var Yt=null;switch(Vt){case"bold":Yt={family:rr,weight:"bold"};break;case"italic":Yt={family:rr,style:"italic"};break;case"bolditalic":Yt={family:rr,weight:"bold",style:"italic"};break;case"":case"normal":Yt={family:rr}}Yt!==null&&(Yt.ref={name:rr,style:Vt},Be.push(Yt))})}),Be})(ur);ze=(function(Nr){for(var Be={},rr=0;rr<Nr.length;++rr){var Vt=y1(Nr[rr]),Yt=Vt.family,Rr=Vt.stretch,Qt=Vt.style,Tt=Vt.weight;Be[Yt]=Be[Yt]||{},Be[Yt][Rr]=Be[Yt][Rr]||{},Be[Yt][Rr][Qt]=Be[Yt][Rr][Qt]||{},Be[Yt][Rr][Qt][Tt]=Vt}return Be})(ir.concat(Yr)),ve=Gt}return ze})(this.pdf,this.fontFaces),Je=Ce.map(function(xt){return{family:xt,stretch:"normal",weight:St,style:jt}}),He=(function(xt,Yr,ur){for(var Gt=(ur=ur||{}).defaultFontFamily||"times",ir=Object.assign({},TK,ur.genericFontFamilies||{}),Nr=null,Be=null,rr=0;rr<Yr.length;++rr)if(ir[(Nr=y1(Yr[rr])).family]&&(Nr.family=ir[Nr.family]),xt.hasOwnProperty(Nr.family)){Be=xt[Nr.family];break}if(!(Be=Be||xt[Gt]))throw new Error("Could not find a font-family for the rule '"+kS(Nr)+"' and default family '"+Gt+"'.");if(Be=(function(Vt,Yt){if(Yt[Vt])return Yt[Vt];var Rr=Ow[Vt],Qt=Rr<=Ow.normal?-1:1,Tt=jS(Yt,$6,Rr,Qt);if(!Tt)throw new Error("Could not find a matching font-stretch value for "+Vt);return Tt})(Nr.stretch,Be),Be=(function(Vt,Yt){if(Yt[Vt])return Yt[Vt];for(var Rr=U6[Vt],Qt=0;Qt<Rr.length;++Qt)if(Yt[Rr[Qt]])return Yt[Rr[Qt]];throw new Error("Could not find a matching font-style for "+Vt)})(Nr.style,Be),!(Be=(function(Vt,Yt){if(Yt[Vt])return Yt[Vt];if(Vt===400&&Yt[500])return Yt[500];if(Vt===500&&Yt[400])return Yt[400];var Rr=PK[Vt],Qt=jS(Yt,z6,Rr,Vt<400?-1:1);if(!Qt)throw new Error("Could not find a matching font-weight for value "+Vt);return Qt})(Nr.weight,Be)))throw new Error("Failed to resolve a font for the rule '"+kS(Nr)+"'.");return Be})(Ue,Je);this.pdf.setFont(He.ref.name,He.ref.style)}else{var Ze="";(St==="bold"||parseInt(St,10)>=700||jt==="bold")&&(Ze="bold"),jt==="italic"&&(Ze+="italic"),Ze.length===0&&(Ze="normal");for(var ft="",bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},gt=0;gt<Ce.length;gt++){if(this.pdf.internal.getFont(Ce[gt],Ze,{noFallback:!0,disableWarning:!0})!==void 0){ft=Ce[gt];break}if(Ze==="bolditalic"&&this.pdf.internal.getFont(Ce[gt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ft=Ce[gt],Ze="bold";else if(this.pdf.internal.getFont(Ce[gt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ft=Ce[gt],Ze="normal";break}}if(ft===""){for(var $t=0;$t<Ce.length;$t++)if(bt[Ce[$t]]){ft=bt[Ce[$t]];break}}ft=ft===""?"Times":ft,this.pdf.setFont(ft,Ze)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ne){this.ctx.globalCompositeOperation=ne}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ne){this.ctx.globalAlpha=ne}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ne){this.ctx.lineDashOffset=ne,te.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ne){this.ctx.lineDash=ne,te.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ne){this.ctx.ignoreClearRect=!!ne}})};p.prototype.setLineDash=function(R){this.lineDash=R},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){C.call(this,"fill",!1)},p.prototype.stroke=function(){C.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(R,V){if(isNaN(R)||isNaN(V))throw mn.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Q=this.ctx.transform.applyToPoint(new o(R,V));this.path.push({type:"mt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(R,V)},p.prototype.closePath=function(){var R=new o(0,0),V=0;for(V=this.path.length-1;V!==-1;V--)if(this.path[V].type==="begin"&&ln(this.path[V+1])==="object"&&typeof this.path[V+1].x=="number"){R=new o(this.path[V+1].x,this.path[V+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(R.x,R.y)},p.prototype.lineTo=function(R,V){if(isNaN(R)||isNaN(V))throw mn.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Q=this.ctx.transform.applyToPoint(new o(R,V));this.path.push({type:"lt",x:Q.x,y:Q.y}),this.ctx.lastPoint=new o(Q.x,Q.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),C.call(this,null,!0)},p.prototype.quadraticCurveTo=function(R,V,Q,re){if(isNaN(Q)||isNaN(re)||isNaN(R)||isNaN(V))throw mn.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Z=this.ctx.transform.applyToPoint(new o(Q,re)),X=this.ctx.transform.applyToPoint(new o(R,V));this.path.push({type:"qct",x1:X.x,y1:X.y,x:Z.x,y:Z.y}),this.ctx.lastPoint=new o(Z.x,Z.y)},p.prototype.bezierCurveTo=function(R,V,Q,re,Z,X){if(isNaN(Z)||isNaN(X)||isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re))throw mn.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var pe=this.ctx.transform.applyToPoint(new o(Z,X)),ce=this.ctx.transform.applyToPoint(new o(R,V)),we=this.ctx.transform.applyToPoint(new o(Q,re));this.path.push({type:"bct",x1:ce.x,y1:ce.y,x2:we.x,y2:we.y,x:pe.x,y:pe.y}),this.ctx.lastPoint=new o(pe.x,pe.y)},p.prototype.arc=function(R,V,Q,re,Z,X){if(isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re)||isNaN(Z))throw mn.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(X=!!X,!this.ctx.transform.isIdentity){var pe=this.ctx.transform.applyToPoint(new o(R,V));R=pe.x,V=pe.y;var ce=this.ctx.transform.applyToPoint(new o(0,Q)),we=this.ctx.transform.applyToPoint(new o(0,0));Q=Math.sqrt(Math.pow(ce.x-we.x,2)+Math.pow(ce.y-we.y,2))}Math.abs(Z-re)>=2*Math.PI&&(re=0,Z=2*Math.PI),this.path.push({type:"arc",x:R,y:V,radius:Q,startAngle:re,endAngle:Z,counterclockwise:X})},p.prototype.arcTo=function(R,V,Q,re,Z){throw new Error("arcTo not implemented.")},p.prototype.rect=function(R,V,Q,re){if(isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re))throw mn.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(R,V),this.lineTo(R+Q,V),this.lineTo(R+Q,V+re),this.lineTo(R,V+re),this.lineTo(R,V),this.lineTo(R+Q,V),this.lineTo(R,V)},p.prototype.fillRect=function(R,V,Q,re){if(isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re))throw mn.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var Z={};this.lineCap!=="butt"&&(Z.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Z.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(R,V,Q,re),this.fill(),Z.hasOwnProperty("lineCap")&&(this.lineCap=Z.lineCap),Z.hasOwnProperty("lineJoin")&&(this.lineJoin=Z.lineJoin)}},p.prototype.strokeRect=function(R,V,Q,re){if(isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re))throw mn.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");j.call(this)||(this.beginPath(),this.rect(R,V,Q,re),this.stroke())},p.prototype.clearRect=function(R,V,Q,re){if(isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re))throw mn.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(R,V,Q,re))},p.prototype.save=function(R){R=typeof R!="boolean"||R;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("q");if(this.pdf.setPage(V),R){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new h(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},p.prototype.restore=function(R){R=typeof R!="boolean"||R;for(var V=this.pdf.internal.getCurrentPageInfo().pageNumber,Q=0;Q<this.pdf.internal.getNumberOfPages();Q++)this.pdf.setPage(Q+1),this.pdf.internal.out("Q");this.pdf.setPage(V),R&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var v=function(R){var V,Q,re,Z;if(R.isCanvasGradient===!0&&(R=R.getColor()),!R)return{r:0,g:0,b:0,a:0,style:R};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(R))V=0,Q=0,re=0,Z=0;else{var X=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(R);if(X!==null)V=parseInt(X[1]),Q=parseInt(X[2]),re=parseInt(X[3]),Z=1;else if((X=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(R))!==null)V=parseInt(X[1]),Q=parseInt(X[2]),re=parseInt(X[3]),Z=parseFloat(X[4]);else{if(Z=1,typeof R=="string"&&R.charAt(0)!=="#"){var pe=new L6(R);R=pe.ok?pe.toHex():"#000000"}R.length===4?(V=R.substring(1,2),V+=V,Q=R.substring(2,3),Q+=Q,re=R.substring(3,4),re+=re):(V=R.substring(1,3),Q=R.substring(3,5),re=R.substring(5,7)),V=parseInt(V,16),Q=parseInt(Q,16),re=parseInt(re,16)}}return{r:V,g:Q,b:re,a:Z,style:R}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},j=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};p.prototype.fillText=function(R,V,Q,re){if(isNaN(V)||isNaN(Q)||typeof R!="string")throw mn.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!m.call(this)){var Z=G(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;O.call(this,{text:R,x:V,y:Q,scale:X,angle:Z,align:this.textAlign,maxWidth:re})}},p.prototype.strokeText=function(R,V,Q,re){if(isNaN(V)||isNaN(Q)||typeof R!="string")throw mn.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!j.call(this)){re=isNaN(re)?void 0:re;var Z=G(this.ctx.transform.rotation),X=this.ctx.transform.scaleX;O.call(this,{text:R,x:V,y:Q,scale:X,renderingMode:"stroke",angle:Z,align:this.textAlign,maxWidth:re})}},p.prototype.measureText=function(R){if(typeof R!="string")throw mn.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var V=this.pdf,Q=this.pdf.internal.scaleFactor,re=V.internal.getFontSize(),Z=V.getStringUnitWidth(R)*re/V.internal.scaleFactor;return new function(X){var pe=(X=X||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return pe}}),this}({width:Z*=Math.round(96*Q/72*1e4)/1e4})},p.prototype.scale=function(R,V){if(isNaN(R)||isNaN(V))throw mn.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Q=new d(R,0,0,V,0,0);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.rotate=function(R){if(isNaN(R))throw mn.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var V=new d(Math.cos(R),Math.sin(R),-Math.sin(R),Math.cos(R),0,0);this.ctx.transform=this.ctx.transform.multiply(V)},p.prototype.translate=function(R,V){if(isNaN(R)||isNaN(V))throw mn.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Q=new d(1,0,0,1,R,V);this.ctx.transform=this.ctx.transform.multiply(Q)},p.prototype.transform=function(R,V,Q,re,Z,X){if(isNaN(R)||isNaN(V)||isNaN(Q)||isNaN(re)||isNaN(Z)||isNaN(X))throw mn.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var pe=new d(R,V,Q,re,Z,X);this.ctx.transform=this.ctx.transform.multiply(pe)},p.prototype.setTransform=function(R,V,Q,re,Z,X){R=isNaN(R)?1:R,V=isNaN(V)?0:V,Q=isNaN(Q)?0:Q,re=isNaN(re)?1:re,Z=isNaN(Z)?0:Z,X=isNaN(X)?0:X,this.ctx.transform=new d(R,V,Q,re,Z,X)};var w=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(R,V,Q,re,Z,X,pe,ce,we){var Pe=this.pdf.getImageProperties(R),ze=1,ve=1,qe=1,ne=1;re!==void 0&&ce!==void 0&&(qe=ce/re,ne=we/Z,ze=Pe.width/re*ce/re,ve=Pe.height/Z*we/Z),X===void 0&&(X=V,pe=Q,V=0,Q=0),re!==void 0&&ce===void 0&&(ce=re,we=Z),re===void 0&&ce===void 0&&(ce=Pe.width,we=Pe.height);var tt=this.ctx.transform.decompose(),jt=G(tt.rotate.shx),St=new d,Xe=(St=(St=(St=St.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale)).applyToRectangle(new l(X-V*qe,pe-Q*ne,re*ze,Z*ve));if(this.autoPaging){for(var me,ye=_.call(this,Xe),Ce=[],Ue=0;Ue<ye.length;Ue+=1)Ce.indexOf(ye[Ue])===-1&&Ce.push(ye[Ue]);k(Ce);for(var Je=Ce[0],He=Ce[Ce.length-1],Ze=Je;Ze<He+1;Ze++){this.pdf.setPage(Ze);var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],bt=Ze===1?this.posY+this.margin[0]:this.margin[0],gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],$t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],xt=Ze===1?0:gt+(Ze-2)*$t;if(this.ctx.clip_path.length!==0){var Yr=this.path;me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(me,this.posX+this.margin[3],-xt+bt+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=Yr}var ur=JSON.parse(JSON.stringify(Xe));ur=E([ur],this.posX+this.margin[3],-xt+bt+this.ctx.prevPageLastElemOffset)[0];var Gt=(Ze>Je||Ze<He)&&w.call(this);Gt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,$t,null).clip().discardPath()),this.pdf.addImage(R,"JPEG",ur.x,ur.y,ur.w,ur.h,null,null,jt),Gt&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(R,"JPEG",Xe.x,Xe.y,Xe.w,Xe.h,null,null,jt)};var _=function(R,V,Q){var re=[];V=V||this.pdf.internal.pageSize.width,Q=Q||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Z=this.posY+this.ctx.prevPageLastElemOffset;switch(R.type){default:case"mt":case"lt":re.push(Math.floor((R.y+Z)/Q)+1);break;case"arc":re.push(Math.floor((R.y+Z-R.radius)/Q)+1),re.push(Math.floor((R.y+Z+R.radius)/Q)+1);break;case"qct":var X=se(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x,R.y);re.push(Math.floor((X.y+Z)/Q)+1),re.push(Math.floor((X.y+X.h+Z)/Q)+1);break;case"bct":var pe=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,R.x1,R.y1,R.x2,R.y2,R.x,R.y);re.push(Math.floor((pe.y+Z)/Q)+1),re.push(Math.floor((pe.y+pe.h+Z)/Q)+1);break;case"rect":re.push(Math.floor((R.y+Z)/Q)+1),re.push(Math.floor((R.y+R.h+Z)/Q)+1)}for(var ce=0;ce<re.length;ce+=1)for(;this.pdf.internal.getNumberOfPages()<re[ce];)S.call(this);return re},S=function(){var R=this.fillStyle,V=this.strokeStyle,Q=this.font,re=this.lineCap,Z=this.lineWidth,X=this.lineJoin;this.pdf.addPage(),this.fillStyle=R,this.strokeStyle=V,this.font=Q,this.lineCap=re,this.lineWidth=Z,this.lineJoin=X},E=function(R,V,Q){for(var re=0;re<R.length;re++)switch(R[re].type){case"bct":R[re].x2+=V,R[re].y2+=Q;case"qct":R[re].x1+=V,R[re].y1+=Q;default:R[re].x+=V,R[re].y+=Q}return R},k=function(R){return R.sort(function(V,Q){return V-Q})},C=function(R,V){var Q=this.fillStyle,re=this.strokeStyle,Z=this.lineCap,X=this.lineWidth,pe=Math.abs(X*this.ctx.transform.scaleX),ce=this.lineJoin;if(this.autoPaging){for(var we,Pe,ze=JSON.parse(JSON.stringify(this.path)),ve=JSON.parse(JSON.stringify(this.path)),qe=[],ne=0;ne<ve.length;ne++)if(ve[ne].x!==void 0)for(var tt=_.call(this,ve[ne]),jt=0;jt<tt.length;jt+=1)qe.indexOf(tt[jt])===-1&&qe.push(tt[jt]);for(var St=0;St<qe.length;St++)for(;this.pdf.internal.getNumberOfPages()<qe[St];)S.call(this);k(qe);for(var Xe=qe[0],me=qe[qe.length-1],ye=Xe;ye<me+1;ye++){this.pdf.setPage(ye),this.fillStyle=Q,this.strokeStyle=re,this.lineCap=Z,this.lineWidth=pe,this.lineJoin=ce;var Ce=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ue=ye===1?this.posY+this.margin[0]:this.margin[0],Je=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],He=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=ye===1?0:Je+(ye-2)*He;if(this.ctx.clip_path.length!==0){var ft=this.path;we=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(we,this.posX+this.margin[3],-Ze+Ue+this.ctx.prevPageLastElemOffset),D.call(this,R,!0),this.path=ft}if(Pe=JSON.parse(JSON.stringify(ze)),this.path=E(Pe,this.posX+this.margin[3],-Ze+Ue+this.ctx.prevPageLastElemOffset),V===!1||ye===0){var bt=(ye>Xe||ye<me)&&w.call(this);bt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ce,He,null).clip().discardPath()),D.call(this,R,V),bt&&this.pdf.restoreGraphicsState()}this.lineWidth=X}this.path=ze}else this.lineWidth=pe,D.call(this,R,V),this.lineWidth=X},D=function(R,V){if((R!=="stroke"||V||!j.call(this))&&(R==="stroke"||V||!m.call(this))){for(var Q,re,Z=[],X=this.path,pe=0;pe<X.length;pe++){var ce=X[pe];switch(ce.type){case"begin":Z.push({begin:!0});break;case"close":Z.push({close:!0});break;case"mt":Z.push({start:ce,deltas:[],abs:[]});break;case"lt":var we=Z.length;if(X[pe-1]&&!isNaN(X[pe-1].x)&&(Q=[ce.x-X[pe-1].x,ce.y-X[pe-1].y],we>0)){for(;we>=0;we--)if(Z[we-1].close!==!0&&Z[we-1].begin!==!0){Z[we-1].deltas.push(Q),Z[we-1].abs.push(ce);break}}break;case"bct":Q=[ce.x1-X[pe-1].x,ce.y1-X[pe-1].y,ce.x2-X[pe-1].x,ce.y2-X[pe-1].y,ce.x-X[pe-1].x,ce.y-X[pe-1].y],Z[Z.length-1].deltas.push(Q);break;case"qct":var Pe=X[pe-1].x+2/3*(ce.x1-X[pe-1].x),ze=X[pe-1].y+2/3*(ce.y1-X[pe-1].y),ve=ce.x+2/3*(ce.x1-ce.x),qe=ce.y+2/3*(ce.y1-ce.y),ne=ce.x,tt=ce.y;Q=[Pe-X[pe-1].x,ze-X[pe-1].y,ve-X[pe-1].x,qe-X[pe-1].y,ne-X[pe-1].x,tt-X[pe-1].y],Z[Z.length-1].deltas.push(Q);break;case"arc":Z.push({deltas:[],abs:[],arc:!0}),Array.isArray(Z[Z.length-1].abs)&&Z[Z.length-1].abs.push(ce)}}re=V?null:R==="stroke"?"stroke":"fill";for(var jt=!1,St=0;St<Z.length;St++)if(Z[St].arc)for(var Xe=Z[St].abs,me=0;me<Xe.length;me++){var ye=Xe[me];ye.type==="arc"?U.call(this,ye.x,ye.y,ye.radius,ye.startAngle,ye.endAngle,ye.counterclockwise,void 0,V,!jt):z.call(this,ye.x,ye.y),jt=!0}else if(Z[St].close===!0)this.pdf.internal.out("h"),jt=!1;else if(Z[St].begin!==!0){var Ce=Z[St].start.x,Ue=Z[St].start.y;q.call(this,Z[St].deltas,Ce,Ue),jt=!0}re&&I.call(this,re),V&&K.call(this)}},M=function(R){var V=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Q=V*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return R-Q;case"top":return R+V-Q;case"hanging":return R+V-2*Q;case"middle":return R+V/2-Q;default:return R}},F=function(R){return R+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var R=function(){};return R.colorStops=[],R.addColorStop=function(V,Q){this.colorStops.push([V,Q])},R.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},R.isCanvasGradient=!0,R},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var U=function(R,V,Q,re,Z,X,pe,ce,we){for(var Pe=ie.call(this,Q,re,Z,X),ze=0;ze<Pe.length;ze++){var ve=Pe[ze];ze===0&&(we?B.call(this,ve.x1+R,ve.y1+V):z.call(this,ve.x1+R,ve.y1+V)),ue.call(this,R,V,ve.x2,ve.y2,ve.x3,ve.y3,ve.x4,ve.y4)}ce?K.call(this):I.call(this,pe)},I=function(R){switch(R){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(R,V){this.pdf.internal.out(r(R)+" "+n(V)+" m")},O=function(R){var V;switch(R.align){case"right":case"end":V="right";break;case"center":V="center";break;default:V="left"}var Q,re,Z,X=this.pdf.getTextDimensions(R.text),pe=M.call(this,R.y),ce=F.call(this,pe)-X.h,we=this.ctx.transform.applyToPoint(new o(R.x,pe));if(this.autoPaging){var Pe=this.ctx.transform.decompose(),ze=new d;ze=(ze=(ze=ze.multiply(Pe.translate)).multiply(Pe.skew)).multiply(Pe.scale);for(var ve=this.ctx.transform.applyToRectangle(new l(R.x,pe,X.w,X.h)),qe=ze.applyToRectangle(new l(R.x,ce,X.w,X.h)),ne=_.call(this,qe),tt=[],jt=0;jt<ne.length;jt+=1)tt.indexOf(ne[jt])===-1&&tt.push(ne[jt]);k(tt);for(var St=tt[0],Xe=tt[tt.length-1],me=St;me<Xe+1;me++){this.pdf.setPage(me);var ye=me===1?this.posY+this.margin[0]:this.margin[0],Ce=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ue=this.pdf.internal.pageSize.height-this.margin[2],Je=Ue-this.margin[0],He=this.pdf.internal.pageSize.width-this.margin[1],Ze=He-this.margin[3],ft=me===1?0:Ce+(me-2)*Je;if(this.ctx.clip_path.length!==0){var bt=this.path;Q=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=E(Q,this.posX+this.margin[3],-1*ft+ye),D.call(this,"fill",!0),this.path=bt}var gt=E([JSON.parse(JSON.stringify(qe))],this.posX+this.margin[3],-ft+ye+this.ctx.prevPageLastElemOffset)[0];R.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*R.scale),Z=this.lineWidth,this.lineWidth=Z*R.scale);var $t=this.autoPaging!=="text";if($t||gt.y+gt.h<=Ue){if($t||gt.y>=ye&&gt.x<=He){var xt=$t?R.text:this.pdf.splitTextToSize(R.text,R.maxWidth||He-gt.x)[0],Yr=E([JSON.parse(JSON.stringify(ve))],this.posX+this.margin[3],-ft+ye+this.ctx.prevPageLastElemOffset)[0],ur=$t&&(me>St||me<Xe)&&w.call(this);ur&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Ze,Je,null).clip().discardPath()),this.pdf.text(xt,Yr.x,Yr.y,{angle:R.angle,align:V,renderingMode:R.renderingMode}),ur&&this.pdf.restoreGraphicsState()}}else gt.y<Ue&&(this.ctx.prevPageLastElemOffset+=Ue-gt.y);R.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=Z)}}else R.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*R.scale),Z=this.lineWidth,this.lineWidth=Z*R.scale),this.pdf.text(R.text,we.x+this.posX,we.y+this.posY,{angle:R.angle,align:V,renderingMode:R.renderingMode,maxWidth:R.maxWidth}),R.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=Z)},z=function(R,V,Q,re){Q=Q||0,re=re||0,this.pdf.internal.out(r(R+Q)+" "+n(V+re)+" l")},q=function(R,V,Q){return this.pdf.lines(R,V,Q,null,null)},ue=function(R,V,Q,re,Z,X,pe,ce){this.pdf.internal.out([t(i(Q+R)),t(a(re+V)),t(i(Z+R)),t(a(X+V)),t(i(pe+R)),t(a(ce+V)),"c"].join(" "))},ie=function(R,V,Q,re){for(var Z=2*Math.PI,X=Math.PI/2;V>Q;)V-=Z;var pe=Math.abs(Q-V);pe<Z&&re&&(pe=Z-pe);for(var ce=[],we=re?-1:1,Pe=V;pe>1e-5;){var ze=Pe+we*Math.min(pe,X);ce.push(le.call(this,R,Pe,ze)),pe-=Math.abs(ze-Pe),Pe=ze}return ce},le=function(R,V,Q){var re=(Q-V)/2,Z=R*Math.cos(re),X=R*Math.sin(re),pe=Z,ce=-X,we=pe*pe+ce*ce,Pe=we+pe*Z+ce*X,ze=4/3*(Math.sqrt(2*we*Pe)-Pe)/(pe*X-ce*Z),ve=pe-ze*ce,qe=ce+ze*pe,ne=ve,tt=-qe,jt=re+V,St=Math.cos(jt),Xe=Math.sin(jt);return{x1:R*Math.cos(V),y1:R*Math.sin(V),x2:ve*St-qe*Xe,y2:ve*Xe+qe*St,x3:ne*St-tt*Xe,y3:ne*Xe+tt*St,x4:R*Math.cos(Q),y4:R*Math.sin(Q)}},G=function(R){return 180*R/Math.PI},se=function(R,V,Q,re,Z,X){var pe=R+.5*(Q-R),ce=V+.5*(re-V),we=Z+.5*(Q-Z),Pe=X+.5*(re-X),ze=Math.min(R,Z,pe,we),ve=Math.max(R,Z,pe,we),qe=Math.min(V,X,ce,Pe),ne=Math.max(V,X,ce,Pe);return new l(ze,qe,ve-ze,ne-qe)},xe=function(R,V,Q,re,Z,X,pe,ce){var we,Pe,ze,ve,qe,ne,tt,jt,St,Xe,me,ye,Ce,Ue,Je=Q-R,He=re-V,Ze=Z-Q,ft=X-re,bt=pe-Z,gt=ce-X;for(Pe=0;Pe<41;Pe++)St=(tt=(ze=R+(we=Pe/40)*Je)+we*((qe=Q+we*Ze)-ze))+we*(qe+we*(Z+we*bt-qe)-tt),Xe=(jt=(ve=V+we*He)+we*((ne=re+we*ft)-ve))+we*(ne+we*(X+we*gt-ne)-jt),Pe==0?(me=St,ye=Xe,Ce=St,Ue=Xe):(me=Math.min(me,St),ye=Math.min(ye,Xe),Ce=Math.max(Ce,St),Ue=Math.max(Ue,Xe));return new l(Math.round(me),Math.round(ye),Math.round(Ce-me),Math.round(Ue-ye))},te=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var R,V,Q=(R=this.ctx.lineDash,V=this.ctx.lineDashOffset,JSON.stringify({lineDash:R,lineDashOffset:V}));this.prevLineDash!==Q&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Q)}}})(Wt.API),(function(e){var t=function(o){var l,d,f,h,p,v,m,j,w,_;for(d=[],f=0,h=(o+=l="\0\0\0\0".slice(o.length%4||4)).length;h>f;f+=4)(p=(o.charCodeAt(f)<<24)+(o.charCodeAt(f+1)<<16)+(o.charCodeAt(f+2)<<8)+o.charCodeAt(f+3))!==0?(v=(p=((p=((p=((p=(p-(_=p%85))/85)-(w=p%85))/85)-(j=p%85))/85)-(m=p%85))/85)%85,d.push(v+33,m+33,j+33,w+33,_+33)):d.push(122);return(function(S,E){for(var k=E;k>0;k--)S.pop()})(d,l.length),String.fromCharCode.apply(String,d)+"~>"},r=function(o){var l,d,f,h,p,v=String,m="length",j=255,w="charCodeAt",_="slice",S="replace";for(o[_](-2),o=o[_](0,-2)[S](/\s/g,"")[S]("z","!!!!!"),f=[],h=0,p=(o+=l="uuuuu"[_](o[m]%5||5))[m];p>h;h+=5)d=52200625*(o[w](h)-33)+614125*(o[w](h+1)-33)+7225*(o[w](h+2)-33)+85*(o[w](h+3)-33)+(o[w](h+4)-33),f.push(j&d>>24,j&d>>16,j&d>>8,j&d);return(function(E,k){for(var C=k;C>0;C--)E.pop()})(f,l[m]),v.fromCharCode.apply(v,f)},n=function(o){return o.split("").map(function(l){return("0"+l.charCodeAt().toString(16)).slice(-2)}).join("")+">"},i=function(o){var l=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),l.test(o)===!1)return"";for(var d="",f=0;f<o.length;f+=2)d+=String.fromCharCode("0x"+(o[f]+o[f+1]));return d},a=function(o){for(var l=new Uint8Array(o.length),d=o.length;d--;)l[d]=o.charCodeAt(d);return(l=Aw(l)).reduce(function(f,h){return f+String.fromCharCode(h)},"")};e.processDataByFilters=function(o,l){var d=0,f=o||"",h=[];for(typeof(l=l||[])=="string"&&(l=[l]),d=0;d<l.length;d+=1)switch(l[d]){case"ASCII85Decode":case"/ASCII85Decode":f=r(f),h.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),h.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=i(f),h.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=n(f),h.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=a(f),h.push("/FlateDecode");break;default:throw new Error('The filter: "'+l[d]+'" is not implemented')}return{data:f,reverseChain:h.reverse().join(" ")}}})(Wt.API),(function(e){e.loadFile=function(t,r,n){return(function(i,a,o){a=a!==!1,o=typeof o=="function"?o:function(){};var l=void 0;try{l=(function(d,f,h){var p=new XMLHttpRequest,v=0,m=function(j){var w=j.length,_=[],S=String.fromCharCode;for(v=0;v<w;v+=1)_.push(S(255&j.charCodeAt(v)));return _.join("")};if(p.open("GET",d,!f),p.overrideMimeType("text/plain; charset=x-user-defined"),f===!1&&(p.onload=function(){p.status===200?h(m(this.responseText)):h(void 0)}),p.send(null),f&&p.status===200)return m(p.responseText)})(i,a,o)}catch{}return l})(t,r,n)},e.loadImageFile=e.loadFile})(Wt.API),(function(e){function t(){return(fr.html2canvas?Promise.resolve(fr.html2canvas):xc(()=>import("./html2canvas.esm-Ge7aVWlp.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load html2canvas: "+l))}).then(function(l){return l.default?l.default:l})}function r(){return(fr.DOMPurify?Promise.resolve(fr.DOMPurify):xc(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(l){return Promise.reject(new Error("Could not load dompurify: "+l))}).then(function(l){return l.default?l.default:l})}var n=function(l){var d=ln(l);return d==="undefined"?"undefined":d==="string"||l instanceof String?"string":d==="number"||l instanceof Number?"number":d==="function"||l instanceof Function?"function":l&&l.constructor===Array?"array":l&&l.nodeType===1?"element":d==="object"?"object":"unknown"},i=function(l,d){var f=document.createElement(l);for(var h in d.className&&(f.className=d.className),d.innerHTML&&d.dompurify&&(f.innerHTML=d.dompurify.sanitize(d.innerHTML)),d.style)f.style[h]=d.style[h];return f},a=function l(d,f){for(var h=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),p=d.firstChild;p;p=p.nextSibling)f!==!0&&p.nodeType===1&&p.nodeName==="SCRIPT"||h.appendChild(l(p,f));return d.nodeType===1&&(d.nodeName==="CANVAS"?(h.width=d.width,h.height=d.height,h.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(h.value=d.value),h.addEventListener("load",function(){h.scrollTop=d.scrollTop,h.scrollLeft=d.scrollLeft},!0)),h},o=function l(d){var f=Object.assign(l.convert(Promise.resolve()),JSON.parse(JSON.stringify(l.template))),h=l.convert(Promise.resolve(),f);return(h=h.setProgress(1,l,1,[l])).set(d)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(l,d){return l.__proto__=d||o.prototype,l},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(l,d){return this.then(function(){switch(d=d||(function(f){switch(n(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(l),d){case"string":return this.then(r).then(function(f){return this.set({src:i("div",{innerHTML:l,dompurify:f})})});case"element":return this.set({src:l});case"canvas":return this.set({canvas:l});case"img":return this.set({img:l});default:return this.error("Unknown source type.")}})},o.prototype.to=function(l){switch(l){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var l={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},d=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);d.tagName==="BODY"&&(l.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=i("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=i("div",{className:"html2pdf__container",style:l}),this.prop.container.appendChild(d),this.prop.container.firstChild.appendChild(i("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,d(this.prop.container,f)}).then(function(d){(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var l=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(l).then(t).then(function(d){var f=this.opt.jsPDF,h=this.opt.fontFaces,p=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:p,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=h,h)for(var m=0;m<h.length;++m){var j=h[m],w=j.src.find(function(_){return _.format==="truetype"});w&&f.addFont(w.url,j.ref.name,j.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,f.context2d.save(!0),d(this.prop.container,v)}).then(function(d){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(d),this.prop.canvas=d,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var l=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=l})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(l,d,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(l,d):this.outputPdf(l,d)},o.prototype.outputPdf=function(l,d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(l,d)})},o.prototype.outputImg=function(l){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(l){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+l+'" is not supported.'}})},o.prototype.save=function(l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(l?{filename:l}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(l){if(n(l)!=="object")return this;var d=Object.keys(l||{}).map(function(f){if(f in o.template.prop)return function(){this.prop[f]=l[f]};switch(f){case"margin":return this.setMargin.bind(this,l.margin);case"jsPDF":return function(){return this.opt.jsPDF=l.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,l.pageSize);default:return function(){this.opt[f]=l[f]}}},this);return this.then(function(){return this.thenList(d)})},o.prototype.get=function(l,d){return this.then(function(){var f=l in o.template.prop?this.prop[l]:this.opt[l];return d?d(f):f})},o.prototype.setMargin=function(l){return this.then(function(){switch(n(l)){case"number":l=[l,l,l,l];case"array":if(l.length===2&&(l=[l[0],l[1],l[0],l[1]]),l.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=l}).then(this.setPageSize)},o.prototype.setPageSize=function(l){function d(f,h){return Math.floor(f*h/72*96)}return this.then(function(){(l=l||Wt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(l.inner={width:l.width-this.opt.margin[1]-this.opt.margin[3],height:l.height-this.opt.margin[0]-this.opt.margin[2]},l.inner.px={width:d(l.inner.width,l.k),height:d(l.inner.height,l.k)},l.inner.ratio=l.inner.height/l.inner.width),this.prop.pageSize=l})},o.prototype.setProgress=function(l,d,f,h){return l!=null&&(this.progress.val=l),d!=null&&(this.progress.state=d),f!=null&&(this.progress.n=f),h!=null&&(this.progress.stack=h),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(l,d,f,h){return this.setProgress(l?this.progress.val+l:null,d||null,f?this.progress.n+f:null,h?this.progress.stack.concat(h):null)},o.prototype.then=function(l,d){var f=this;return this.thenCore(l,d,function(h,p){return f.updateProgress(null,null,1,[h]),Promise.prototype.then.call(this,function(v){return f.updateProgress(null,h),v}).then(h,p).then(function(v){return f.updateProgress(1),v})})},o.prototype.thenCore=function(l,d,f){f=f||Promise.prototype.then;var h=this;l&&(l=l.bind(h)),d&&(d=d.bind(h));var p=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?h:o.convert(Object.assign({},h),Promise.prototype),v=f.call(p,l,d);return o.convert(v,h.__proto__)},o.prototype.thenExternal=function(l,d){return Promise.prototype.then.call(this,l,d)},o.prototype.thenList=function(l){var d=this;return l.forEach(function(f){d=d.thenCore(f)}),d},o.prototype.catch=function(l){l&&(l=l.bind(this));var d=Promise.prototype.catch.call(this,l);return o.convert(d,this)},o.prototype.catchExternal=function(l){return Promise.prototype.catch.call(this,l)},o.prototype.error=function(l){return this.then(function(){throw new Error(l)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,Wt.getPageSize=function(l,d,f){if(ln(l)==="object"){var h=l;l=h.orientation,d=h.unit||d,f=h.format||f}d=d||"mm",f=f||"a4",l=(""+(l||"P")).toLowerCase();var p,v=(""+f).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(d){case"pt":p=1;break;case"mm":p=72/25.4;break;case"cm":p=72/2.54;break;case"in":p=72;break;case"px":p=.75;break;case"pc":case"em":p=12;break;case"ex":p=6;break;default:throw"Invalid unit: "+d}var j,w=0,_=0;if(m.hasOwnProperty(v))w=m[v][1]/p,_=m[v][0]/p;else try{w=f[1],_=f[0]}catch{throw new Error("Invalid format: "+f)}if(l==="p"||l==="portrait")l="p",_>w&&(j=_,_=w,w=j);else{if(l!=="l"&&l!=="landscape")throw"Invalid orientation: "+l;l="l",w>_&&(j=_,_=w,w=j)}return{width:_,height:w,unit:d,k:p,orientation:l}},e.html=function(l,d){(d=d||{}).callback=d.callback||function(){},d.html2canvas=d.html2canvas||{},d.html2canvas.canvas=d.html2canvas.canvas||this.canvas,d.jsPDF=d.jsPDF||this,d.fontFaces=d.fontFaces?d.fontFaces.map(y1):null;var f=new o(d);return d.worker?f:f.from(l).doCallback()}})(Wt.API),Wt.API.addJS=function(e){return AS=e,this.internal.events.subscribe("postPutResources",function(){sv=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(sv+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),ES=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+AS+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){sv!==void 0&&ES!==void 0&&this.internal.out("/Names <</JavaScript "+sv+" 0 R>>")}),this},(function(e){var t;e.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=r.outline.render().split(/\r\n/),a=0;a<i.length;a++){var o=i[a],l=n.exec(o);if(l!=null){var d=l[1];r.internal.newObjectDeferredBegin(d,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var f=this.internal.pages.length,h=[];for(a=0;a<f;a++){var p=r.internal.newObject();h.push(p);var v=r.internal.getPageInfo(a+1);r.internal.write("<< /D["+v.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),a=0;a<h.length;a++)r.internal.write("(page_"+(a+1)+")"+h[a]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,i,a){var o={title:i,options:a,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var i=0;i<n.children.length;i++)this.genIds_r(n.children[i])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<n.children.length;a++){var o=n.children[a];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),a>0&&this.line("/Prev "+this.makeRef(n.children[a-1])),a<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[a+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var l=this.count=this.count_r({count:0},o);if(l>0&&this.line("/Count "+l),o.options&&o.options.pageNumber){var d=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+d.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var f=0;f<n.children.length;f++)this.renderItems(n.children[f])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,i){for(var a=0;a<i.children.length;a++)n.count++,this.count_r(n,i.children[a]);return n.count}}])})(Wt.API),(function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(r,n,i,a,o,l){var d,f=this.decode.DCT_DECODE,h=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,d=(function(p){for(var v,m=256*p.charCodeAt(4)+p.charCodeAt(5),j=p.length,w={width:0,height:0,numcomponents:1},_=4;_<j;_+=2){if(_+=m,t.indexOf(p.charCodeAt(_+1))!==-1){v=256*p.charCodeAt(_+5)+p.charCodeAt(_+6),w={width:256*p.charCodeAt(_+7)+p.charCodeAt(_+8),height:v,numcomponents:p.charCodeAt(_+9)};break}m=256*p.charCodeAt(_+2)+p.charCodeAt(_+3)}return w})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),d.numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}h={data:r,width:d.width,height:d.height,colorSpace:l,bitsPerComponent:8,filter:f,index:n,alias:i}}return h}})(Wt.API),Wt.API.processPNG=function(e,t,r,n){if(this.__addimage__.isArrayBuffer(e)&&(e=new Uint8Array(e)),this.__addimage__.isArrayBufferView(e)){var i,a=gK(e,{checkCrc:!0}),o=a.width,l=a.height,d=a.channels,f=a.palette,h=a.depth;i=f&&d===1?(function(U){for(var I=U.width,K=U.height,B=U.data,O=U.palette,z=U.depth,q=!1,ue=[],ie=[],le=void 0,G=!1,se=0,xe=0;xe<O.length;xe++){var te=Lj(O[xe],4),R=te[0],V=te[1],Q=te[2],re=te[3];ue.push(R,V,Q),re!=null&&(re===0?(se++,ie.length<1&&ie.push(xe)):re<255&&(G=!0))}if(G||se>1){q=!0,ie=void 0;var Z=I*K;le=new Uint8Array(Z);for(var X=new DataView(B.buffer),pe=0;pe<Z;pe++){var ce=w1(X,pe,z),we=Lj(O[ce],4)[3];le[pe]=we}}else se===0&&(ie=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:q?8:void 0,colorBytes:B,alphaBytes:le,needSMask:q,palette:ue,mask:ie}})(a):d===2||d===4?(function(U){for(var I=U.data,K=U.width,B=U.height,O=U.channels,z=U.depth,q=O===2?"DeviceGray":"DeviceRGB",ue=O-1,ie=K*B,le=ue,G=ie*le,se=1*ie,xe=Math.ceil(G*z/8),te=Math.ceil(se*z/8),R=new Uint8Array(xe),V=new Uint8Array(te),Q=new DataView(I.buffer),re=new DataView(R.buffer),Z=new DataView(V.buffer),X=!1,pe=0;pe<ie;pe++){for(var ce=pe*O,we=0;we<le;we++)FS(re,w1(Q,ce+we,z),pe*le+we,z);var Pe=w1(Q,ce+le,z);Pe<(1<<z)-1&&(X=!0),FS(Z,Pe,1*pe,z)}return{colorSpace:q,colorsPerPixel:ue,sMaskBitsPerComponent:X?z:void 0,colorBytes:R,alphaBytes:V,needSMask:X}})(a):(function(U){var I=U.data,K=U.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:K,colorsPerPixel:K==="DeviceGray"?1:3,colorBytes:I instanceof Uint16Array?(function(B){for(var O=B.length,z=new Uint8Array(2*O),q=new DataView(z.buffer,z.byteOffset,z.byteLength),ue=0;ue<O;ue++)q.setUint16(2*ue,B[ue],!1);return z})(I):I,needSMask:!1}})(a);var p,v,m,j=i,w=j.colorSpace,_=j.colorsPerPixel,S=j.sMaskBitsPerComponent,E=j.colorBytes,k=j.alphaBytes,C=j.needSMask,D=j.palette,M=j.mask,F=null;return n!==Wt.API.image_compression.NONE&&typeof Aw=="function"?(F=(function(U){var I;switch(U){case Wt.API.image_compression.FAST:I=11;break;case Wt.API.image_compression.MEDIUM:I=13;break;case Wt.API.image_compression.SLOW:I=14;break;default:I=12}return I})(n),p=this.decode.FLATE_DECODE,v="/Predictor ".concat(F," /Colors ").concat(_," /BitsPerComponent ").concat(h," /Columns ").concat(o),e=LS(E,Math.ceil(o*_*h/8),_,h,n),C&&(m=LS(k,Math.ceil(o*S/8),1,S,n))):(p=void 0,v=void 0,e=E,C&&(m=k)),(this.__addimage__.isArrayBuffer(e)||this.__addimage__.isArrayBufferView(e))&&(e=this.__addimage__.arrayBufferToBinaryString(e)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:e,index:t,filter:p,decodeParameters:v,transparency:M,palette:D,sMask:m,predictor:F,width:o,height:l,bitsPerComponent:h,sMaskBitsPerComponent:S,colorSpace:w}}},(function(e){e.processGIF89A=function(t,r,n,i){var a=new MK(t),o=a.width,l=a.height,d=[];a.decodeAndBlitFrameRGBA(0,d);var f={data:d,width:o,height:l},h=new b1(100).encode(f,100);return e.processJPEG.call(this,h,r,n,i)},e.processGIF87A=e.processGIF89A})(Wt.API),xo.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:i,green:n,blue:r,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},xo.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(r){mn.log("bit decode error:"+r)}},xo.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),r=t%4;for(e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<t;i++)for(var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*i*4,l=0;l<8&&8*i+l<this.width;l++){var d=this.palette[a>>7-l&1];this.data[o+4*l]=d.blue,this.data[o+4*l+1]=d.green,this.data[o+4*l+2]=d.red,this.data[o+4*l+3]=255}r!==0&&(this.pos+=4-r)}},xo.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<e;i++){var a=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*i*4,l=a>>4,d=15&a,f=this.palette[l];if(this.data[o]=f.blue,this.data[o+1]=f.green,this.data[o+2]=f.red,this.data[o+3]=255,2*i+1>=this.width)break;f=this.palette[d],this.data[o+4]=f.blue,this.data[o+4+1]=f.green,this.data[o+4+2]=f.red,this.data[o+4+3]=255}t!==0&&(this.pos+=4-t)}},xo.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+4*n;if(i<this.palette.length){var o=this.palette[i];this.data[a]=o.red,this.data[a+1]=o.green,this.data[a+2]=o.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},xo.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(a&t)/t*255|0,l=(a>>5&t)/t*255|0,d=(a>>10&t)/t*255|0,f=a>>15?255:0,h=n*this.width*4+4*i;this.data[h]=d,this.data[h+1]=l,this.data[h+2]=o,this.data[h+3]=f}this.pos+=e}},xo.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,a=0;a<this.width;a++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(o&t)/t*255|0,d=(o>>5&r)/r*255|0,f=(o>>11)/t*255|0,h=i*this.width*4+4*a;this.data[h]=f,this.data[h+1]=d,this.data[h+2]=l,this.data[h+3]=255}this.pos+=e}},xo.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=t*this.width*4+4*r;this.data[o]=a,this.data[o+1]=i,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},xo.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=t*this.width*4+4*r;this.data[l]=a,this.data[l+1]=i,this.data[l+2]=n,this.data[l+3]=o}},xo.prototype.getData=function(){return this.data},(function(e){e.processBMP=function(t,r,n,i){var a=new xo(t,!1),o=a.width,l=a.height,d={data:a.getData(),width:o,height:l},f=new b1(100).encode(d,100);return e.processJPEG.call(this,f,r,n,i)}})(Wt.API),US.prototype.getData=function(){return this.data},(function(e){e.processWEBP=function(t,r,n,i){var a=new US(t),o=a.width,l=a.height,d={data:a.getData(),width:o,height:l},f=new b1(100).encode(d,100);return e.processJPEG.call(this,f,r,n,i)}})(Wt.API),Wt.API.processRGBA=function(e,t,r){for(var n=e.data,i=n.length,a=new Uint8Array(i/4*3),o=new Uint8Array(i/4),l=0,d=0,f=0;f<i;f+=4){var h=n[f],p=n[f+1],v=n[f+2],m=n[f+3];a[l++]=h,a[l++]=p,a[l++]=v,o[d++]=m}var j=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:j,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Wt.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},Zf=Wt.API,iv=Zf.getCharWidthsArray=function(e,t){var r,n,i=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),o=t.charSpace||this.internal.getCharSpace(),l=t.widths?t.widths:i.metadata.Unicode.widths,d=l.fof?l.fof:1,f=t.kerning?t.kerning:i.metadata.Unicode.kerning,h=f.fof?f.fof:1,p=t.doKerning!==!1,v=0,m=e.length,j=0,w=l[0]||d,_=[];for(r=0;r<m;r++)n=e.charCodeAt(r),typeof i.metadata.widthOfString=="function"?_.push((i.metadata.widthOfGlyph(i.metadata.characterToGlyph(n))+o*(1e3/a)||0)/1e3):(v=p&&ln(f[n])==="object"&&!isNaN(parseInt(f[n][j],10))?f[n][j]/h:0,_.push((l[n]||w)/d+v)),j=n;return _},PS=Zf.getStringUnitWidth=function(e,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),n=t.font||this.internal.getFont(),i=t.charSpace||this.internal.getCharSpace();return Zf.processArabic&&(e=Zf.processArabic(e)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(e,r,i)/r:iv.apply(this,arguments).reduce(function(a,o){return a+o},0)},TS=function(e,t,r,n){for(var i=[],a=0,o=e.length,l=0;a!==o&&l+t[a]<r;)l+=t[a],a++;i.push(e.slice(0,a));var d=a;for(l=0;a!==o;)l+t[a]>n&&(i.push(e.slice(d,a)),l=0,d=a),l+=t[a],a++;return d!==a&&i.push(e.slice(d,a)),i},RS=function(e,t,r){r||(r={});var n,i,a,o,l,d,f,h=[],p=[h],v=r.textIndent||0,m=0,j=0,w=e.split(" "),_=iv.apply(this,[" ",r])[0];if(d=r.lineIndent===-1?w[0].length+2:r.lineIndent||0){var S=Array(d).join(" "),E=[];w.map(function(C){(C=C.split(/\s*\n/)).length>1?E=E.concat(C.map(function(D,M){return(M&&D.length?`
`:"")+D})):E.push(C[0])}),w=E,d=PS.apply(this,[S,r])}for(a=0,o=w.length;a<o;a++){var k=0;if(n=w[a],d&&n[0]==`
`&&(n=n.substr(1),k=1),v+m+(j=(i=iv.apply(this,[n,r])).reduce(function(C,D){return C+D},0))>t||k){if(j>t){for(l=TS.apply(this,[n,i,t-(v+m),t]),h.push(l.shift()),h=[l.pop()];l.length;)p.push([l.shift()]);j=i.slice(n.length-(h[0]?h[0].length:0)).reduce(function(C,D){return C+D},0)}else h=[n];p.push(h),v=j+d,m=_}else h.push(n),v+=m+j,m=_}return f=d?function(C,D){return(D?S:"")+C.join(" ")}:function(C){return C.join(" ")},p.map(f)},Zf.splitTextToSize=function(e,t,r){var n,i=(r=r||{}).fontSize||this.internal.getFontSize(),a=(function(h){if(h.widths&&h.kerning)return{widths:h.widths,kerning:h.kerning};var p=this.internal.getFont(h.fontName,h.fontStyle),v="Unicode";return p.metadata[v]?{widths:p.metadata[v].widths||{0:1},kerning:p.metadata[v].kerning||{}}:{font:p.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(e)?e:String(e).split(/\r?\n/);var o=1*this.internal.scaleFactor*t/i;a.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/i:0,a.lineIndent=r.lineIndent;var l,d,f=[];for(l=0,d=n.length;l<d;l++)f=f.concat(RS.apply(this,[n[l],o,a]));return f},(function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="0123456789abcdef",r="klmnopqrstuvwxyz",n={},i={},a=0;a<16;a++)n[r[a]]=t[a],i[t[a]]=r[a];var o=function(v){return"0x"+parseInt(v,10).toString(16)},l=e.__fontmetrics__.compress=function(v){var m,j,w,_,S=["{"];for(var E in v){if(m=v[E],isNaN(parseInt(E,10))?j="'"+E+"'":(E=parseInt(E,10),j=(j=o(E).slice(2)).slice(0,-1)+i[j.slice(-1)]),typeof m=="number")m<0?(w=o(m).slice(3),_="-"):(w=o(m).slice(2),_=""),w=_+w.slice(0,-1)+i[w.slice(-1)];else{if(ln(m)!=="object")throw new Error("Don't know what to do with value type "+ln(m)+".");w=l(m)}S.push(j+w)}return S.push("}"),S.join("")},d=e.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,j,w,_,S={},E=1,k=S,C=[],D="",M="",F=v.length-1,U=1;U<F;U+=1)(_=v[U])=="'"?m?(w=m.join(""),m=void 0):m=[]:m?m.push(_):_=="{"?(C.push([k,w]),k={},w=void 0):_=="}"?((j=C.pop())[0][j[1]]=k,w=void 0,k=j[0]):_=="-"?E=-1:w===void 0?n.hasOwnProperty(_)?(D+=n[_],w=parseInt(D,16)*E,E=1,D=""):D+=_:n.hasOwnProperty(_)?(M+=n[_],k[w]=parseInt(M,16)*E,E=1,w=void 0,M=""):M+=_;return S},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:d("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},h={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},p={Unicode:{"Courier-Oblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":d("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":d("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:d("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":d("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:d("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":d("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":d("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":d("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":d("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(v){var m=v.font,j=p.Unicode[m.postScriptName];j&&(m.metadata.Unicode={},m.metadata.Unicode.widths=j.widths,m.metadata.Unicode.kerning=j.kerning);var w=h.Unicode[m.postScriptName];w&&(m.metadata.Unicode.encoding=w,m.encoding=w.codePages[0])}])})(Wt.API),(function(e){var t=function(r){for(var n=r.length,i=new Uint8Array(n),a=0;a<n;a++)i[a]=r.charCodeAt(a);return i};e.API.events.push(["addFont",function(r){var n=void 0,i=r.font,a=r.instance;if(!i.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");if(typeof(n=a.existsFileInVFS(i.postScriptName)===!1?a.loadFile(i.postScriptName):a.getFileFromVFS(i.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+i.postScriptName+"').");(function(o,l){l=/^\x00\x01\x00\x00/.test(l)?t(l):t(vv(l)),o.metadata=e.API.TTFFont.open(l),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(i,n)}}])})(Wt),Wt.API.addSvgAsImage=function(e,t,r,n,i,a,o,l){if(isNaN(t)||isNaN(r))throw mn.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(i))throw mn.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var d=document.createElement("canvas");d.width=n,d.height=i;var f=d.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,d.width,d.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(fr.canvg?Promise.resolve(fr.canvg):xc(()=>import("./index.es-BeeCVXKc.js"),[])).catch(function(v){return Promise.reject(new Error("Could not load canvg: "+v))}).then(function(v){return v.default?v.default:v}).then(function(v){return v.fromString(f,e,h)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(v){return v.render(h)}).then(function(){p.addImage(d.toDataURL("image/jpeg",1),t,r,n,i,o,l)})},Wt.API.putTotalPages=function(e){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var i=0;i<this.internal.pages[n].length;i++)this.internal.pages[n][i]=this.internal.pages[n][i].replace(t,r);return this},Wt.API.viewerPreferences=function(e,t){var r;e=e||{},t=t||!1;var n,i,a,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(o),d=[],f=0,h=0,p=0;function v(j,w){var _,S=!1;for(_=0;_<j.length;_+=1)j[_]===w&&(S=!0);return S}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var m=l.length;for(p=0;p<m;p+=1)r[l[p]].value=r[l[p]].defaultValue,r[l[p]].explicitSet=!1}if(ln(e)==="object"){for(i in e)if(a=e[i],v(l,i)&&a!==void 0){if(r[i].type==="boolean"&&typeof a=="boolean")r[i].value=a;else if(r[i].type==="name"&&v(r[i].valueSet,a))r[i].value=a;else if(r[i].type==="integer"&&Number.isInteger(a))r[i].value=a;else if(r[i].type==="array"){for(f=0;f<a.length;f+=1)if(n=!0,a[f].length===1&&typeof a[f][0]=="number")d.push(String(a[f]-1));else if(a[f].length>1){for(h=0;h<a[f].length;h+=1)typeof a[f][h]!="number"&&(n=!1);n===!0&&d.push([a[f][0]-1,a[f][1]-1].join(" "))}r[i].value="["+d.join(" ")+"]"}else r[i].value=r[i].defaultValue;r[i].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var j,w=[];for(j in r)r[j].explicitSet===!0&&(r[j].type==="name"?w.push("/"+j+" /"+r[j].value):w.push("/"+j+" "+r[j].value));w.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+w.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(e){var t=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',i=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),d=unescape(encodeURIComponent("</x:xmpmeta>")),f=a.length+o.length+l.length+i.length+d.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+f+" >>"),this.internal.write("stream"),this.internal.write(i+a+o+l+d),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(n,i){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Wt.API),(function(e){var t=e.API,r=t.pdfEscape16=function(a,o){for(var l,d=o.metadata.Unicode.widths,f=["","0","00","000","0000"],h=[""],p=0,v=a.length;p<v;++p){if(l=o.metadata.characterToGlyph(a.charCodeAt(p)),o.metadata.glyIdsUsed.push(l),o.metadata.toUnicode[l]=a.charCodeAt(p),d.indexOf(l)==-1&&(d.push(l),d.push([parseInt(o.metadata.widthOfGlyph(l),10)])),l=="0")return h.join("");l=l.toString(16),h.push(f[4-l.length],l)}return h.join("")},n=function(a){var o,l,d,f,h,p,v;for(h=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,d=[],p=0,v=(l=Object.keys(a).sort(function(m,j){return m-j})).length;p<v;p++)o=l[p],d.length>=100&&(h+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar`,d=[]),a[o]!==void 0&&a[o]!==null&&typeof a[o].toString=="function"&&(f=("0000"+a[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),d.push("<"+o+"><"+f+">"));return d.length&&(h+=`
`+d.length+` beginbfchar
`+d.join(`
`)+`
endbfchar
`),h+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(o){var l=o.font,d=o.out,f=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="Identity-H"){for(var p=l.metadata.Unicode.widths,v=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),m="",j=0;j<v.length;j++)m+=String.fromCharCode(v[j]);var w=f();h({data:m,addLength1:!0,objectId:w}),d("endobj");var _=f();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:_}),d("endobj");var S=f();d("<<"),d("/Type /FontDescriptor"),d("/FontName /"+ah(l.fontName)),d("/FontFile2 "+w+" 0 R"),d("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),d("/Flags "+l.metadata.flags),d("/StemV "+l.metadata.stemV),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d(">>"),d("endobj");var E=f();d("<<"),d("/Type /Font"),d("/BaseFont /"+ah(l.fontName)),d("/FontDescriptor "+S+" 0 R"),d("/W "+e.API.PDFObject.convert(p)),d("/CIDToGIDMap /Identity"),d("/DW 1000"),d("/Subtype /CIDFontType2"),d("/CIDSystemInfo"),d("<<"),d("/Supplement 0"),d("/Registry (Adobe)"),d("/Ordering ("+l.encoding+")"),d(">>"),d(">>"),d("endobj"),l.objectNumber=f(),d("<<"),d("/Type /Font"),d("/Subtype /Type0"),d("/ToUnicode "+_+" 0 R"),d("/BaseFont /"+ah(l.fontName)),d("/Encoding /"+l.encoding),d("/DescendantFonts ["+E+" 0 R]"),d(">>"),d("endobj"),l.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(o){var l=o.font,d=o.out,f=o.newObject,h=o.putStream;if(l.metadata instanceof e.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var p=l.metadata.rawData,v="",m=0;m<p.length;m++)v+=String.fromCharCode(p[m]);var j=f();h({data:v,addLength1:!0,objectId:j}),d("endobj");var w=f();h({data:n(l.metadata.toUnicode),addLength1:!0,objectId:w}),d("endobj");var _=f();d("<<"),d("/Descent "+l.metadata.decender),d("/CapHeight "+l.metadata.capHeight),d("/StemV "+l.metadata.stemV),d("/Type /FontDescriptor"),d("/FontFile2 "+j+" 0 R"),d("/Flags 96"),d("/FontBBox "+e.API.PDFObject.convert(l.metadata.bbox)),d("/FontName /"+ah(l.fontName)),d("/ItalicAngle "+l.metadata.italicAngle),d("/Ascent "+l.metadata.ascender),d(">>"),d("endobj"),l.objectNumber=f();for(var S=0;S<l.metadata.hmtx.widths.length;S++)l.metadata.hmtx.widths[S]=parseInt(l.metadata.hmtx.widths[S]*(1e3/l.metadata.head.unitsPerEm));d("<</Subtype/TrueType/Type/Font/ToUnicode "+w+" 0 R/BaseFont/"+ah(l.fontName)+"/FontDescriptor "+_+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),d("endobj"),l.isAlreadyPutted=!0}})(a)}]);var i=function(a){var o,l=a.text||"",d=a.x,f=a.y,h=a.options||{},p=a.mutex||{},v=p.pdfEscape,m=p.activeFontKey,j=p.fonts,w=m,_="",S=0,E="",k=j[w].encoding;if(j[w].encoding!=="Identity-H")return{text:l,x:d,y:f,options:h,mutex:p};for(E=l,w=m,Array.isArray(l)&&(E=l[0]),S=0;S<E.length;S+=1)j[w].metadata.hasOwnProperty("cmap")&&(o=j[w].metadata.cmap.unicode.codeMap[E[S].charCodeAt(0)]),o||E[S].charCodeAt(0)<256&&j[w].metadata.hasOwnProperty("Unicode")?_+=E[S]:_+="";var C="";return parseInt(w.slice(1))<14||k==="WinAnsiEncoding"?C=v(_,w).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):k==="Identity-H"&&(C=r(_,j[w])),p.isHex=!0,{text:C,x:d,y:f,options:h,mutex:p}};t.events.push(["postProcessText",function(a){var o=a.text||"",l=[],d={text:o,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(o)){var f=0;for(f=0;f<o.length;f+=1)Array.isArray(o[f])&&o[f].length===3?l.push([i(Object.assign({},d,{text:o[f][0]})).text,o[f][1],o[f][2]]):l.push(i(Object.assign({},d,{text:o[f]})).text);a.text=l}else a.text=i(Object.assign({},d,{text:o})).text}])})(Wt),(function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},e.addFileToVFS=function(r,n){return t.call(this),this.internal.vFS[r]=n,this},e.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Wt.API),(function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(n){var i,a,o,l,d,f,h,p=t,v=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],j={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},w={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},_=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],S=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),E=!1,k=0;this.__bidiEngine__={};var C=function(B){var O=B.charCodeAt(),z=O>>8,q=w[z];return q!==void 0?p[256*q+(255&O)]:z===252||z===253?"AL":S.test(z)?"L":z===8?"R":"N"},D=function(B){for(var O,z=0;z<B.length;z++){if((O=C(B.charAt(z)))==="L")return!1;if(O==="R")return!0}return!1},M=function(B,O,z,q){var ue,ie,le,G,se=O[q];switch(se){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":E=!1;break;case"N":case"AN":break;case"EN":E&&(se="AN");break;case"AL":E=!0,se="R";break;case"WS":case"BN":se="N";break;case"CS":q<1||q+1>=O.length||(ue=z[q-1])!=="EN"&&ue!=="AN"||(ie=O[q+1])!=="EN"&&ie!=="AN"?se="N":E&&(ie="AN"),se=ie===ue?ie:"N";break;case"ES":se=(ue=q>0?z[q-1]:"B")==="EN"&&q+1<O.length&&O[q+1]==="EN"?"EN":"N";break;case"ET":if(q>0&&z[q-1]==="EN"){se="EN";break}if(E){se="N";break}for(le=q+1,G=O.length;le<G&&O[le]==="ET";)le++;se=le<G&&O[le]==="EN"?"EN":"N";break;case"NSM":if(o&&!l){for(G=O.length,le=q+1;le<G&&O[le]==="NSM";)le++;if(le<G){var xe=B[q],te=xe>=1425&&xe<=2303||xe===64286;if(ue=O[le],te&&(ue==="R"||ue==="AL")){se="R";break}}}se=q<1||(ue=O[q-1])==="B"?"N":z[q-1];break;case"B":E=!1,i=!0,se=k;break;case"S":a=!0,se="N"}return se},F=function(B,O,z){var q=B.split("");return z&&U(q,z,{hiLevel:k}),q.reverse(),O&&O.reverse(),q.join("")},U=function(B,O,z){var q,ue,ie,le,G,se=-1,xe=B.length,te=0,R=[],V=k?m:v,Q=[];for(E=!1,i=!1,a=!1,ue=0;ue<xe;ue++)Q[ue]=C(B[ue]);for(ie=0;ie<xe;ie++){if(G=te,R[ie]=M(B,Q,R,ie),q=240&(te=V[G][j[R[ie]]]),te&=15,O[ie]=le=V[te][5],q>0)if(q===16){for(ue=se;ue<ie;ue++)O[ue]=1;se=-1}else se=-1;if(V[te][6])se===-1&&(se=ie);else if(se>-1){for(ue=se;ue<ie;ue++)O[ue]=le;se=-1}Q[ie]==="B"&&(O[ie]=0),z.hiLevel|=le}a&&(function(re,Z,X){for(var pe=0;pe<X;pe++)if(re[pe]==="S"){Z[pe]=k;for(var ce=pe-1;ce>=0&&re[ce]==="WS";ce--)Z[ce]=k}})(Q,O,xe)},I=function(B,O,z,q,ue){if(!(ue.hiLevel<B)){if(B===1&&k===1&&!i)return O.reverse(),void(z&&z.reverse());for(var ie,le,G,se,xe=O.length,te=0;te<xe;){if(q[te]>=B){for(G=te+1;G<xe&&q[G]>=B;)G++;for(se=te,le=G-1;se<le;se++,le--)ie=O[se],O[se]=O[le],O[le]=ie,z&&(ie=z[se],z[se]=z[le],z[le]=ie);te=G}te++}}},K=function(B,O,z){var q=B.split(""),ue={hiLevel:k};return z||(z=[]),U(q,z,ue),(function(ie,le,G){if(G.hiLevel!==0&&h)for(var se,xe=0;xe<ie.length;xe++)le[xe]===1&&(se=_.indexOf(ie[xe]))>=0&&(ie[xe]=_[se+1])})(q,z,ue),I(2,q,O,z,ue),I(1,q,O,z,ue),q.join("")};return this.__bidiEngine__.doBidiReorder=function(B,O,z){if((function(ue,ie){if(ie)for(var le=0;le<ue.length;le++)ie[le]=le;l===void 0&&(l=D(ue)),f===void 0&&(f=D(ue))})(B,O),o||!d||f)if(o&&d&&l^f)k=l?1:0,B=F(B,O,z);else if(!o&&d&&f)k=l?1:0,B=K(B,O,z),B=F(B,O);else if(!o||l||d||f){if(o&&!d&&l^f)B=F(B,O),l?(k=0,B=K(B,O,z)):(k=1,B=K(B,O,z),B=F(B,O));else if(o&&l&&!d&&f)k=1,B=K(B,O,z),B=F(B,O);else if(!o&&!d&&l^f){var q=h;l?(k=1,B=K(B,O,z),k=0,h=!1,B=K(B,O,z),h=q):(k=0,B=K(B,O,z),B=F(B,O),k=1,h=!1,B=K(B,O,z),h=q,B=F(B,O))}}else k=0,B=K(B,O,z);else k=l?1:0,B=K(B,O,z);return B},this.__bidiEngine__.setOptions=function(B){B&&(o=B.isInputVisual,d=B.isOutputVisual,l=B.isInputRtl,f=B.isOutputRtl,h=B.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(n){var i=n.text;n.x,n.y;var a=n.options||{};n.mutex,a.lang;var o=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,r.setOptions(a),Object.prototype.toString.call(i)==="[object Array]"){var l=0;for(o=[],l=0;l<i.length;l+=1)Object.prototype.toString.call(i[l])==="[object Array]"?o.push([r.doBidiReorder(i[l][0]),i[l][1],i[l][2]]):o.push([r.doBidiReorder(i[l])]);n.text=o}else n.text=r.doBidiReorder(i);r.setOptions({isInputVisual:!0})}])})(Wt),Wt.API.TTFFont=(function(){function e(t){var r;if(this.rawData=t,r=this.contents=new Mu(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new ZK(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new FK(this.contents),this.head=new UK(this),this.name=new WK(this),this.cmap=new V6(this),this.toUnicode={},this.hhea=new $K(this),this.maxp=new HK(this),this.hmtx=new GK(this),this.post=new qK(this),this.os2=new zK(this),this.loca=new JK(this),this.glyf=new KK(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,r,n,i,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,l,d,f;for(f=[],o=0,l=(d=this.bbox).length;o<l;o++)t=d[o],f.push(Math.round(t*this.scaleFactor));return f}).call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),32768&(r=i>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},e.prototype.widthOfString=function(t,r,n){var i,a,o,l;for(o=0,a=0,l=(t=""+t).length;0<=l?a<l:a>l;a=0<=l?++a:--a)i=t.charCodeAt(a),o+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/r)||0;return o*(r/1e3)},e.prototype.lineHeight=function(t,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},e})();var Mo,Mu=(function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var r,n;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},e.prototype.writeString=function(t){var r,n,i;for(i=[],r=0,n=t.length;0<=n?r<n:r>n;r=0<=n?++r:--r)i.push(this.writeByte(t.charCodeAt(r)));return i},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,r,n,i,a,o,l,d;return t=this.readByte(),r=this.readByte(),n=this.readByte(),i=this.readByte(),a=this.readByte(),o=this.readByte(),l=this.readByte(),d=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^a)+65536*(255^o)+256*(255^l)+(255^d)+1):72057594037927940*t+281474976710656*r+1099511627776*n+4294967296*i+16777216*a+65536*o+256*l+d},e.prototype.writeLongLong=function(t){var r,n;return r=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var r,n;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r.push(this.readByte());return r},e.prototype.write=function(t){var r,n,i,a;for(a=[],n=0,i=t.length;n<i;n++)r=t[n],a.push(this.writeByte(r));return a},e})(),FK=(function(){var e;function t(r){var n,i,a;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},i=0,a=this.tableCount;0<=a?i<a:i>a;i=0<=a?++i:--i)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return t.prototype.encode=function(r){var n,i,a,o,l,d,f,h,p,v,m,j,w;for(w in m=Object.keys(r).length,d=Math.log(2),p=16*Math.floor(Math.log(m)/d),o=Math.floor(p/d),h=16*m-p,(i=new Mu).writeInt(this.scalarType),i.writeShort(m),i.writeShort(p),i.writeShort(o),i.writeShort(h),a=16*m,f=i.pos+a,l=null,j=[],r)for(v=r[w],i.writeString(w),i.writeInt(e(v)),i.writeInt(f),i.writeInt(v.length),j=j.concat(v),w==="head"&&(l=f),f+=v.length;f%4;)j.push(0),f++;return i.write(j),n=2981146554-e(i.data),i.pos=l+8,i.writeUInt32(n),i.data},e=function(r){var n,i,a,o;for(r=W6.call(r);r.length%4;)r.push(0);for(a=new Mu(r),i=0,n=0,o=r.length;n<o;n=n+=4)i+=a.readUInt32();return 4294967295&i},t})(),BK={}.hasOwnProperty,kl=function(e,t){for(var r in t)BK.call(t,r)&&(e[r]=t[r]);function n(){this.constructor=e}return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e};Mo=(function(){function e(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e})();var UK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new Mu).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e})(),$S=(function(){function e(t,r){var n,i,a,o,l,d,f,h,p,v,m,j,w,_,S,E,k;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),p=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(d=0;d<256;++d)this.codeMap[d]=t.readByte();break;case 4:for(m=t.readUInt16(),v=m/2,t.pos+=6,a=(function(){var C,D;for(D=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)D.push(t.readUInt16());return D})(),t.pos+=2,w=(function(){var C,D;for(D=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)D.push(t.readUInt16());return D})(),f=(function(){var C,D;for(D=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)D.push(t.readUInt16());return D})(),h=(function(){var C,D;for(D=[],d=C=0;0<=v?C<v:C>v;d=0<=v?++C:--C)D.push(t.readUInt16());return D})(),i=(this.length-t.pos+this.offset)/2,l=(function(){var C,D;for(D=[],d=C=0;0<=i?C<i:C>i;d=0<=i?++C:--C)D.push(t.readUInt16());return D})(),d=S=0,k=a.length;S<k;d=++S)for(_=a[d],n=E=j=w[d];j<=_?E<=_:E>=_;n=j<=_?++E:--E)h[d]===0?o=n+f[d]:(o=l[h[d]/2+(n-j)-(v-d)]||0)!==0&&(o+=f[d]),this.codeMap[n]=65535&o}t.pos=p}return e.encode=function(t,r){var n,i,a,o,l,d,f,h,p,v,m,j,w,_,S,E,k,C,D,M,F,U,I,K,B,O,z,q,ue,ie,le,G,se,xe,te,R,V,Q,re,Z,X,pe,ce,we,Pe,ze;switch(q=new Mu,o=Object.keys(t).sort(function(ve,qe){return ve-qe}),r){case"macroman":for(w=0,_=(function(){var ve=[];for(j=0;j<256;++j)ve.push(0);return ve})(),E={0:0},a={},ue=0,se=o.length;ue<se;ue++)E[ce=t[i=o[ue]]]==null&&(E[ce]=++w),a[i]={old:t[i],new:E[t[i]]},_[i]=E[t[i]];return q.writeUInt16(1),q.writeUInt16(0),q.writeUInt32(12),q.writeUInt16(0),q.writeUInt16(262),q.writeUInt16(0),q.write(_),{charMap:a,subtable:q.data,maxGlyphID:w+1};case"unicode":for(O=[],p=[],k=0,E={},n={},S=f=null,ie=0,xe=o.length;ie<xe;ie++)E[D=t[i=o[ie]]]==null&&(E[D]=++k),n[i]={old:D,new:E[D]},l=E[D]-i,S!=null&&l===f||(S&&p.push(S),O.push(i),f=l),S=i;for(S&&p.push(S),p.push(65535),O.push(65535),K=2*(I=O.length),U=2*Math.pow(Math.log(I)/Math.LN2,2),v=Math.log(U/2)/Math.LN2,F=2*I-U,d=[],M=[],m=[],j=le=0,te=O.length;le<te;j=++le){if(B=O[j],h=p[j],B===65535){d.push(0),M.push(0);break}if(B-(z=n[B].new)>=32768)for(d.push(0),M.push(2*(m.length+I-j)),i=G=B;B<=h?G<=h:G>=h;i=B<=h?++G:--G)m.push(n[i].new);else d.push(z-B),M.push(0)}for(q.writeUInt16(3),q.writeUInt16(1),q.writeUInt32(12),q.writeUInt16(4),q.writeUInt16(16+8*I+2*m.length),q.writeUInt16(0),q.writeUInt16(K),q.writeUInt16(U),q.writeUInt16(v),q.writeUInt16(F),X=0,R=p.length;X<R;X++)i=p[X],q.writeUInt16(i);for(q.writeUInt16(0),pe=0,V=O.length;pe<V;pe++)i=O[pe],q.writeUInt16(i);for(we=0,Q=d.length;we<Q;we++)l=d[we],q.writeUInt16(l);for(Pe=0,re=M.length;Pe<re;Pe++)C=M[Pe],q.writeUInt16(C);for(ze=0,Z=m.length;ze<Z;ze++)w=m[ze],q.writeUInt16(w);return{charMap:n,subtable:q.data,maxGlyphID:k+1}}},e})(),V6=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)r=new $S(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var n,i;return r==null&&(r="macroman"),n=$S.encode(t,r),(i=new Mu).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e})(),$K=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e})(),zK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=(function(){var r,n;for(n=[],r=0;r<10;++r)n.push(t.readByte());return n})(),this.charRange=(function(){var r,n;for(n=[],r=0;r<4;++r)n.push(t.readInt());return n})(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=(function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(t.readInt());return n})(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e})(),qK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="post",e.prototype.parse=function(t){var r,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(n=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=(function(){var o,l,d;for(d=[],a=o=0,l=this.file.maxp.numGlyphs;0<=l?o<l:o>l;a=0<=l?++o:--o)d.push(t.readUInt32());return d}).call(this)}},e})(),VK=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},WK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="name",e.prototype.parse=function(t){var r,n,i,a,o,l,d,f,h,p,v;for(t.pos=this.offset,t.readShort(),r=t.readShort(),l=t.readShort(),n=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+l+t.readShort()});for(d={},a=h=0,p=n.length;h<p;a=++h)i=n[a],t.pos=i.offset,f=t.readString(i.length),o=new VK(f,i),d[v=i.nameID]==null&&(d[v]=[]),d[i.nameID].push(o);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e})(),HK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e})(),GK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,n,i,a,o,l,d;for(t.pos=this.offset,this.metrics=[],r=0,l=this.file.hhea.numberOfMetrics;0<=l?r<l:r>l;r=0<=l?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var f,h;for(h=[],r=f=0;0<=i?f<i:f>i;r=0<=i?++f:--f)h.push(t.readInt16());return h})(),this.widths=(function(){var f,h,p,v;for(v=[],f=0,h=(p=this.metrics).length;f<h;f++)a=p[f],v.push(a.advance);return v}).call(this),n=this.widths[this.widths.length-1],d=[],r=o=0;0<=i?o<i:o>i;r=0<=i?++o:--o)d.push(this.widths.push(n));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e})(),W6=[].slice,KK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,n,i,a,o,l,d,f,h,p;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,n=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+n,o=(l=new Mu(r.read(i))).readShort(),f=l.readShort(),p=l.readShort(),d=l.readShort(),h=l.readShort(),this.cache[t]=o===-1?new QK(l,f,p,d,h):new YK(l,o,f,p,d,h),this.cache[t]))},e.prototype.encode=function(t,r,n){var i,a,o,l,d;for(o=[],a=[],l=0,d=r.length;l<d;l++)i=t[r[l]],a.push(o.length),i&&(o=o.concat(i.encode(n)));return a.push(o.length),{table:o,offsets:a}},e})(),YK=(function(){function e(t,r,n,i,a,o){this.raw=t,this.numberOfContours=r,this.xMin=n,this.yMin=i,this.xMax=a,this.yMax=o,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e})(),QK=(function(){function e(t,r,n,i,a){var o,l;for(this.raw=t,this.xMin=r,this.yMin=n,this.xMax=i,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;l=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&l;)o.pos+=1&l?4:2,128&l?o.pos+=8:64&l?o.pos+=4:8&l&&(o.pos+=2)}return e.prototype.encode=function(){var t,r,n;for(r=new Mu(W6.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)r.pos=this.glyphOffsets[t];return r.data},e})(),JK=(function(){function e(){return e.__super__.constructor.apply(this,arguments)}return kl(e,Mo),e.prototype.tag="loca",e.prototype.parse=function(t){var r,n;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=2)a.push(2*t.readUInt16());return a}).call(this):(function(){var i,a;for(a=[],n=0,i=this.length;n<i;n+=4)a.push(t.readUInt32());return a}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var n=new Uint32Array(this.offsets.length),i=0,a=0,o=0;o<n.length;++o)if(n[o]=i,a<r.length&&r[a]==o){++a,n[o]=i;var l=this.offsets[o],d=this.offsets[o+1]-l;d>0&&(i+=d)}for(var f=new Array(4*n.length),h=0;h<n.length;++h)f[4*h+3]=255&n[h],f[4*h+2]=(65280&n[h])>>8,f[4*h+1]=(16711680&n[h])>>16,f[4*h]=(4278190080&n[h])>>24;return f},e})(),ZK=(function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,r,n,i,a;for(r in i=this.font.cmap.tables[0].codeMap,t={},a=this.subset)n=a[r],t[r]=i[n];return t},e.prototype.glyphsFor=function(t){var r,n,i,a,o,l,d;for(i={},o=0,l=t.length;o<l;o++)i[a=t[o]]=this.font.glyf.glyphFor(a);for(a in r=[],i)(n=i[a])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(a in d=this.glyphsFor(r))n=d[a],i[a]=n;return i},e.prototype.encode=function(t,r){var n,i,a,o,l,d,f,h,p,v,m,j,w,_,S;for(i in n=V6.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(t),m={0:0},S=n.charMap)m[(d=S[i]).old]=d.new;for(j in v=n.maxGlyphID,o)j in m||(m[j]=v++);return h=(function(E){var k,C;for(k in C={},E)C[E[k]]=k;return C})(m),p=Object.keys(h).sort(function(E,k){return E-k}),w=(function(){var E,k,C;for(C=[],E=0,k=p.length;E<k;E++)l=p[E],C.push(h[l]);return C})(),a=this.font.glyf.encode(o,w,m),f=this.font.loca.encode(a.offsets,w),_={cmap:this.font.cmap.raw(),glyf:a.table,loca:f,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(_["OS/2"]=this.font.os2.raw()),this.font.directory.encode(_)},e})();Wt.API.PDFObject=(function(){var e;function t(){}return e=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},t.convert=function(r){var n,i,a,o;if(Array.isArray(r))return"["+(function(){var l,d,f;for(f=[],l=0,d=r.length;l<d;l++)n=r[l],f.push(t.convert(n));return f})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r?.isString)return"("+r+")";if(r instanceof Date)return"(D:"+e(r.getUTCFullYear(),4)+e(r.getUTCMonth(),2)+e(r.getUTCDate(),2)+e(r.getUTCHours(),2)+e(r.getUTCMinutes(),2)+e(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(i in a=["<<"],r)o=r[i],a.push("/"+i+" "+t.convert(o));return a.push(">>"),a.join(`
`)}return""+r},t})();class XK{type="pdf";name;capabilities;settings;constructor(t="PDF Export",r){this.name=t,this.settings={type:"pdf",name:t,paperWidth:102,paperHeight:152,defaultQuantity:1,...r},this.capabilities={supportsZPL:!1,supportsPDF:!0,supportsColor:!0,maxWidth:210,maxHeight:297}}async connect(){return!0}async disconnect(){}isConnected(){return!0}async print(t){try{const r=await this.createPDF([t]),n=`label_${t.productName.replace(/\s+/g,"_")}_${Date.now()}.pdf`;return r.save(n),!0}catch(r){return console.error("PDF generation error:",r),!1}}async printBatch(t){try{const r=await this.createPDF(t),n=new Date().toISOString().split("T")[0];return r.save(`labels_batch_${n}_${t.length}items.pdf`),!0}catch(r){return console.error("PDF batch generation error:",r),!1}}getSettings(){return{...this.settings}}async updateSettings(t){this.settings={...this.settings,...t}}async getStatus(){return{isReady:!0,paperOut:!1}}async createPDF(t){const r=new Wt({orientation:"portrait",unit:"mm",format:"a4"});for(let n=0;n<t.length;n++)n>0&&r.addPage(),await this.renderLabel(r,t[n]);return r}async renderLabel(t,r){try{const n=await this.convertToLabelPrintData(r),i=await Ou(n),a={labelId:i||void 0,categoryId:n.categoryId||"",categoryName:n.categoryName,subcategoryId:void 0,subcategoryName:r.subcategoryName,productId:n.productId,productName:n.productName,condition:n.condition,preparedBy:n.preparedBy,preparedByName:n.preparedByName,prepDate:n.prepDate,expiryDate:n.expiryDate,quantity:n.quantity||"",unit:n.unit||"",batchNumber:n.batchNumber,allergens:n.allergens,organizationDetails:n.organizationDetails},o=document.createElement("canvas"),l=o.getContext("2d");if(!l)throw new Error("Failed to get canvas context");const d=600,f=848;o.width=d,o.height=f,await vb(l,a,d,f);const h=o.toDataURL("image/png");t.addImage(h,"PNG",0,0,210,297),console.log(`PDF label rendered successfully. LabelId: ${i}`)}catch(n){throw console.error("Error rendering PDF label:",n),n}}async convertToLabelPrintData(t){const{data:{user:r}}=await Oe.auth.getUser();let n=t.organizationId,i=t.preparedBy,a=t.preparedByName;if(r&&(!n||!i)){const{data:f}=await Oe.from("profiles").select("organization_id, display_name").eq("user_id",r.id).single();f&&(n=n||f.organization_id,i=i||r.id,a=a||f.display_name||"Unknown")}if(!n)throw new Error("Organization ID is required for printing");if(!i||!a)throw new Error("Prepared by information is required for printing");let o;try{const{data:f}=await Oe.from("organizations").select("name, address, phone, email, food_safety_registration").eq("id",n).single();console.log(" PDFPrinter - Raw org data from DB:",f),f&&(o={name:f.name,address:f.address||void 0,phone:f.phone||void 0,email:f.email||void 0,foodSafetyRegistration:f.food_safety_registration||void 0},console.log(" PDFPrinter - Formatted organizationDetails:",o))}catch(f){console.warn("Could not fetch organization details:",f)}const l=t.condition||t.storageInstructions||"Refrigerate";return{productId:t.productId||null,productName:t.productName,categoryId:t.categoryId||null,categoryName:t.categoryName||"General",preparedBy:i,preparedByName:a,prepDate:t.preparedDate,expiryDate:t.useByDate,condition:l,organizationId:n,organizationDetails:o,quantity:t.quantity,unit:t.unit,batchNumber:t.barcode||"",allergens:t.allergens?.map(f=>({id:"",name:typeof f=="string"?f:f.name||"",icon:null,severity:"low"}))}}}class eY{type="zebra";name;capabilities;settings;connected=!1;constructor(t="Zebra Thermal",r){this.name=t,this.settings={type:"zebra",name:t,paperWidth:102,paperHeight:152,darkness:20,speed:4,ipAddress:"192.168.1.100",port:9100,defaultQuantity:1,...r},this.capabilities={supportsZPL:!0,supportsPDF:!1,supportsColor:!1,maxWidth:812,maxHeight:1218}}async connect(){return this.settings.ipAddress?(this.connected=!0,!0):!1}async disconnect(){this.connected=!1}isConnected(){return this.connected}async print(t){try{const r=await this.convertToLabelPrintData(t),n=await cH(r);if(!n.success)throw new Error(n.error||"Print failed");return console.log(`Label printed successfully. LabelId: ${n.labelId}`),!0}catch(r){return console.error("ZPL generation error:",r),!1}}async printBatch(t){try{return(await Promise.all(t.map(n=>this.print(n)))).every(n=>n===!0)}catch(r){return console.error("ZPL batch generation error:",r),!1}}getSettings(){return{...this.settings}}async updateSettings(t){this.settings={...this.settings,...t}}async getStatus(){return{isReady:this.connected,paperOut:!1,ribbonOut:!1}}async convertToLabelPrintData(t){const{data:{user:r}}=await Oe.auth.getUser();let n=t.organizationId,i=t.preparedBy,a=t.preparedByName;if(r&&(!n||!i)){const{data:f}=await Oe.from("profiles").select("organization_id, display_name").eq("user_id",r.id).single();f&&(n=n||f.organization_id,i=i||r.id,a=a||f.display_name||"Unknown")}if(!n)throw new Error("Organization ID is required for printing");if(!i||!a)throw new Error("Prepared by information is required for printing");let o;try{const{data:f}=await Oe.from("organizations").select("name, address, phone, email, food_safety_registration").eq("id",n).single();f&&(o={name:f.name,address:f.address||void 0,phone:f.phone||void 0,email:f.email||void 0,foodSafetyRegistration:f.food_safety_registration||void 0})}catch(f){console.warn("Could not fetch organization details:",f)}const l=t.condition||t.storageInstructions||"Refrigerate";return{productId:t.productId||null,productName:t.productName,categoryId:t.categoryId||null,categoryName:t.categoryName||"General",preparedBy:i,preparedByName:a,prepDate:t.preparedDate,expiryDate:t.useByDate,condition:l,organizationId:n,organizationDetails:o,quantity:t.quantity,unit:t.unit,batchNumber:t.barcode||"",allergens:t.allergens?.map(f=>({id:"",name:typeof f=="string"?f:f.name||"",icon:null,severity:"low"}))}}}class yu{static createPrinter(t,r){switch(t){case"generic":return new uH(r?.name||"Browser Print",r);case"pdf":return new XK(r?.name||"PDF Export",r);case"zebra":return new eY(r?.name||"Zebra Thermal",r);default:throw new Error(`Unknown printer type: ${t}`)}}static getAvailablePrinters(){return[{type:"generic",name:"Browser Print",description:"Use your browser's print dialog to print labels"},{type:"pdf",name:"PDF Export",description:"Generate PDF files for labels"},{type:"zebra",name:"Zebra Thermal",description:"Direct printing to Zebra thermal printers (ZPL format)"}]}static getDefaultSettings(t){const r={type:t,name:"",paperWidth:102,paperHeight:152,defaultQuantity:1};switch(t){case"generic":return{...r,name:"Browser Print"};case"pdf":return{...r,name:"PDF Export"};case"zebra":return{...r,name:"Zebra Thermal",ipAddress:"192.168.1.100",port:9100,darkness:20,speed:4};default:return r}}}const zS="printer_settings";function tm(){const{toast:e}=qr(),[t,r]=x.useState(null),[n,i]=x.useState(null),[a,o]=x.useState(!1);x.useEffect(()=>{(()=>{try{const j=localStorage.getItem(zS);if(j){const w=JSON.parse(j);i(w);const _=yu.createPrinter(w.type,w);r(_)}else{const w=yu.getDefaultSettings("generic");i(w),r(yu.createPrinter("generic",w))}}catch(j){console.error("Failed to load printer settings:",j),e({title:"Settings Error",description:"Failed to load printer settings. Using default.",variant:"destructive"});const w=yu.getDefaultSettings("generic");i(w),r(yu.createPrinter("generic",w))}})()},[e]);const l=x.useCallback(m=>{try{localStorage.setItem(zS,JSON.stringify(m)),i(m);const j=yu.createPrinter(m.type,m);r(j),e({title:"Settings Saved",description:`Printer configured: ${m.name}`})}catch(j){console.error("Failed to save printer settings:",j),e({title:"Save Error",description:"Failed to save printer settings.",variant:"destructive"})}},[e]),d=x.useCallback(m=>{const j=yu.getDefaultSettings(m);l(j)},[l]),f=x.useCallback(async m=>{if(!t)return e({title:"Printer Error",description:"No printer configured.",variant:"destructive"}),!1;o(!0);try{const j=await t.print(m);return e(j?{title:"Print Successful",description:`Label for "${m.productName}" sent to printer.`}:{title:"Print Failed",description:"Failed to print label. Please try again.",variant:"destructive"}),j}catch(j){return console.error("Print error:",j),e({title:"Print Error",description:j instanceof Error?j.message:"Unknown error occurred.",variant:"destructive"}),!1}finally{o(!1)}},[t,e]),h=x.useCallback(async m=>{if(!t)return e({title:"Printer Error",description:"No printer configured.",variant:"destructive"}),!1;if(m.length===0)return e({title:"No Labels",description:"No labels to print.",variant:"destructive"}),!1;o(!0);try{const j=await t.printBatch(m);return e(j?{title:"Batch Print Successful",description:`${m.length} labels sent to printer.`}:{title:"Batch Print Failed",description:"Failed to print labels. Please try again.",variant:"destructive"}),j}catch(j){return console.error("Batch print error:",j),e({title:"Batch Print Error",description:j instanceof Error?j.message:"Unknown error occurred.",variant:"destructive"}),!1}finally{o(!1)}},[t,e]),p=x.useCallback(m=>{if(!n)return;const j={...n,...m};l(j)},[n,l]),v=yu.getAvailablePrinters();return{printer:t,settings:n,isLoading:a,print:f,printBatch:h,changePrinter:d,updateSettings:p,saveSettings:l,availablePrinters:v}}const qS=50;function Up(){const{toast:e}=qr(),{printBatch:t,isLoading:r}=tm(),{isOpen:n,items:i,setItems:a,openQueue:o,closeQueue:l,toggleQueue:d}=c$(),{organizationId:f}=a$(),[h,p]=x.useState(!1),[v,m]=x.useState(null),j=i.reduce((F,U)=>F+U.quantity,0),w=i.length,_=()=>`${Date.now()}-${Math.random().toString(36).substr(2,9)}`,S=x.useCallback((F,U=1)=>{if(console.log("usePrintQueue: addToQueue called with:",F.productName,"quantity:",U,"current items:",i.length),U<1){e({title:"Invalid Quantity",description:"Quantity must be at least 1.",variant:"destructive"});return}const I=i.findIndex(O=>O.labelData.productId===F.productId&&O.labelData.prepDate===F.prepDate&&O.labelData.expiryDate===F.expiryDate);if(I>=0){const O=[...i];O[I].quantity+=U,a(O),console.log("usePrintQueue: updated existing item, new total:",O.length),e({title:"Quantity Updated",description:`Added ${U} more labels for "${F.productName}". Total: ${O[I].quantity}`});return}if(i.length>=qS){e({title:"Queue Full",description:`Maximum queue size is ${qS} items. Please print or remove items first.`,variant:"destructive"});return}const K={id:_(),labelData:F,quantity:U,addedAt:new Date().toISOString(),productName:F.productName,categoryName:F.categoryName},B=[...i,K];console.log("usePrintQueue: adding new item, new total:",B.length,"new item:",K),a(B),e({title:"Added to Queue",description:`${U} label${U>1?"s":""} for "${F.productName}" added to print queue.`}),n||(console.log("usePrintQueue: queue was closed, opening in 300ms"),setTimeout(()=>o(),300))},[i,n,o,e,a]),E=x.useCallback(F=>{const U=i.find(I=>I.id===F);U&&(a(i.filter(I=>I.id!==F)),e({title:"Removed from Queue",description:`"${U.productName}" removed from print queue.`}))},[i,e]),k=x.useCallback((F,U)=>{if(U<1){e({title:"Invalid Quantity",description:"Quantity must be at least 1.",variant:"destructive"});return}if(U>100){e({title:"Quantity Too Large",description:"Maximum quantity per item is 100.",variant:"destructive"});return}const I=i.map(K=>K.id===F?{...K,quantity:U}:K);a(I)},[i,e]),C=x.useCallback(()=>{const F=i.length;a([]),e({title:"Queue Cleared",description:`Removed ${F} item${F>1?"s":""} from print queue.`})},[i,e]),D=x.useCallback(async(F,U)=>{if(i.length===0)return e({title:"Empty Queue",description:"No items in print queue.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};if(r)return e({title:"Printer Busy",description:"Please wait for current print job to finish.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};if(!f)return e({title:"Organization Not Found",description:"Unable to determine organization. Please refresh the page.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};p(!0);const I=[];let K=0;const B=j;m({current:0,total:i.length,totalLabels:B,currentItem:"",currentQuantity:0,printedLabels:0,errors:[]});try{for(let q=0;q<i.length;q++){const ue=i[q];m({current:q+1,total:i.length,totalLabels:B,currentItem:ue.productName,currentQuantity:ue.quantity,printedLabels:K,errors:I});try{const ie=F||ue.labelData.preparedBy||"",le=U||ue.labelData.preparedByName;for(let te=0;te<ue.quantity;te++)await Ou({productId:ue.labelData.productId||"",productName:ue.labelData.productName,categoryId:ue.labelData.categoryId&&ue.labelData.categoryId!=="all"&&ue.labelData.categoryId!==""?ue.labelData.categoryId:null,categoryName:ue.labelData.categoryName,preparedBy:ie,preparedByName:le,prepDate:ue.labelData.prepDate,expiryDate:ue.labelData.expiryDate,condition:ue.labelData.condition,organizationId:f,quantity:"1",unit:ue.labelData.unit,batchNumber:ue.labelData.batchNumber||`${Date.now()}-${Math.random().toString(36).substr(2,9)}`});const G={productName:ue.labelData.productName,categoryName:ue.labelData.categoryName,subcategoryName:ue.labelData.subcategoryName,preparedDate:ue.labelData.prepDate,useByDate:ue.labelData.expiryDate,allergens:[],storageInstructions:`Condition: ${ue.labelData.condition}`,barcode:ue.labelData.batchNumber},se=Array(ue.quantity).fill(G);await t(se)?K+=ue.quantity:I.push({itemId:ue.id,productName:ue.productName,error:"Print failed"})}catch(ie){console.error(`Error printing ${ue.productName}:`,ie),I.push({itemId:ue.id,productName:ue.productName,error:ie instanceof Error?ie.message:"Unknown error"})}await new Promise(ie=>setTimeout(ie,100))}const O=B-K,z=I.length===0;if(z)a([]),e({title:"Print Complete",description:`Successfully printed ${K} labels!`});else{const q=I.map(ue=>ue.itemId);a(i.filter(ue=>q.includes(ue.id))),e({title:"Print Completed with Errors",description:`Printed ${K} labels. ${I.length} item${I.length>1?"s":""} failed.`,variant:"destructive"})}return{success:z,totalPrinted:K,totalFailed:O,errors:I}}catch(O){return console.error("Batch print error:",O),e({title:"Print Error",description:O instanceof Error?O.message:"Unknown error occurred",variant:"destructive"}),{success:!1,totalPrinted:K,totalFailed:B-K,errors:I}}finally{p(!1),m(null)}},[i,j,r,t,e,f]),M=x.useCallback(async F=>{const U=i.filter(B=>F.includes(B.id));if(U.length===0)return e({title:"No Items to Retry",description:"No failed items found in queue.",variant:"destructive"}),{success:!1,totalPrinted:0,totalFailed:0,errors:[]};const I=[...i];a(U);const K=await D();return K.success||a(I),K},[i,D,e]);return{items:i,totalLabels:j,totalItems:w,isOpen:n,isPrinting:h,printProgress:v,addToQueue:S,removeFromQueue:E,updateQuantity:k,clearQueue:C,toggleQueue:d,openQueue:o,closeQueue:l,printAll:D,retryFailed:M}}var H6=["PageUp","PageDown"],G6=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],K6={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},rm="Slider",[Mw,tY,rY]=Cp(rm),[Y6]=Fs(rm,[rY]),[nY,ey]=Y6(rm),Q6=x.forwardRef((e,t)=>{const{name:r,min:n=0,max:i=100,step:a=1,orientation:o="horizontal",disabled:l=!1,minStepsBetweenThumbs:d=0,defaultValue:f=[n],value:h,onValueChange:p=()=>{},onValueCommit:v=()=>{},inverted:m=!1,form:j,...w}=e,_=x.useRef(new Set),S=x.useRef(0),k=o==="horizontal"?sY:iY,[C=[],D]=Yi({prop:h,defaultProp:f,onChange:B=>{[..._.current][S.current]?.focus(),p(B)}}),M=x.useRef(C);function F(B){const O=uY(C,B);K(B,O)}function U(B){K(B,S.current)}function I(){const B=M.current[S.current];C[S.current]!==B&&v(C)}function K(B,O,{commit:z}={commit:!1}){const q=mY(a),ue=pY(Math.round((B-n)/a)*a+n,q),ie=bp(ue,[n,i]);D((le=[])=>{const G=lY(le,ie,O);if(hY(G,d*a)){S.current=G.indexOf(ie);const se=String(G)!==String(le);return se&&z&&v(G),se?G:le}else return le})}return s.jsx(nY,{scope:e.__scopeSlider,name:r,disabled:l,min:n,max:i,valueIndexToChangeRef:S,thumbs:_.current,values:C,orientation:o,form:j,children:s.jsx(Mw.Provider,{scope:e.__scopeSlider,children:s.jsx(Mw.Slot,{scope:e.__scopeSlider,children:s.jsx(k,{"aria-disabled":l,"data-disabled":l?"":void 0,...w,ref:t,onPointerDown:lt(w.onPointerDown,()=>{l||(M.current=C)}),min:n,max:i,inverted:m,onSlideStart:l?void 0:F,onSlideMove:l?void 0:U,onSlideEnd:l?void 0:I,onHomeKeyDown:()=>!l&&K(n,0,{commit:!0}),onEndKeyDown:()=>!l&&K(i,C.length-1,{commit:!0}),onStepKeyDown:({event:B,direction:O})=>{if(!l){const ue=H6.includes(B.key)||B.shiftKey&&G6.includes(B.key)?10:1,ie=S.current,le=C[ie],G=a*ue*O;K(le+G,ie,{commit:!0})}}})})})})});Q6.displayName=rm;var[J6,Z6]=Y6(rm,{startEdge:"left",endEdge:"right",size:"width",direction:1}),sY=x.forwardRef((e,t)=>{const{min:r,max:n,dir:i,inverted:a,onSlideStart:o,onSlideMove:l,onSlideEnd:d,onStepKeyDown:f,...h}=e,[p,v]=x.useState(null),m=or(t,k=>v(k)),j=x.useRef(void 0),w=rf(i),_=w==="ltr",S=_&&!a||!_&&a;function E(k){const C=j.current||p.getBoundingClientRect(),D=[0,C.width],F=Eb(D,S?[r,n]:[n,r]);return j.current=C,F(k-C.left)}return s.jsx(J6,{scope:e.__scopeSlider,startEdge:S?"left":"right",endEdge:S?"right":"left",direction:S?1:-1,size:"width",children:s.jsx(X6,{dir:w,"data-orientation":"horizontal",...h,ref:m,style:{...h.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:k=>{const C=E(k.clientX);o?.(C)},onSlideMove:k=>{const C=E(k.clientX);l?.(C)},onSlideEnd:()=>{j.current=void 0,d?.()},onStepKeyDown:k=>{const D=K6[S?"from-left":"from-right"].includes(k.key);f?.({event:k,direction:D?-1:1})}})})}),iY=x.forwardRef((e,t)=>{const{min:r,max:n,inverted:i,onSlideStart:a,onSlideMove:o,onSlideEnd:l,onStepKeyDown:d,...f}=e,h=x.useRef(null),p=or(t,h),v=x.useRef(void 0),m=!i;function j(w){const _=v.current||h.current.getBoundingClientRect(),S=[0,_.height],k=Eb(S,m?[n,r]:[r,n]);return v.current=_,k(w-_.top)}return s.jsx(J6,{scope:e.__scopeSlider,startEdge:m?"bottom":"top",endEdge:m?"top":"bottom",size:"height",direction:m?1:-1,children:s.jsx(X6,{"data-orientation":"vertical",...f,ref:p,style:{...f.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:w=>{const _=j(w.clientY);a?.(_)},onSlideMove:w=>{const _=j(w.clientY);o?.(_)},onSlideEnd:()=>{v.current=void 0,l?.()},onStepKeyDown:w=>{const S=K6[m?"from-bottom":"from-top"].includes(w.key);d?.({event:w,direction:S?-1:1})}})})}),X6=x.forwardRef((e,t)=>{const{__scopeSlider:r,onSlideStart:n,onSlideMove:i,onSlideEnd:a,onHomeKeyDown:o,onEndKeyDown:l,onStepKeyDown:d,...f}=e,h=ey(rm,r);return s.jsx(yt.span,{...f,ref:t,onKeyDown:lt(e.onKeyDown,p=>{p.key==="Home"?(o(p),p.preventDefault()):p.key==="End"?(l(p),p.preventDefault()):H6.concat(G6).includes(p.key)&&(d(p),p.preventDefault())}),onPointerDown:lt(e.onPointerDown,p=>{const v=p.target;v.setPointerCapture(p.pointerId),p.preventDefault(),h.thumbs.has(v)?v.focus():n(p)}),onPointerMove:lt(e.onPointerMove,p=>{p.target.hasPointerCapture(p.pointerId)&&i(p)}),onPointerUp:lt(e.onPointerUp,p=>{const v=p.target;v.hasPointerCapture(p.pointerId)&&(v.releasePointerCapture(p.pointerId),a(p))})})}),eT="SliderTrack",tT=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=ey(eT,r);return s.jsx(yt.span,{"data-disabled":i.disabled?"":void 0,"data-orientation":i.orientation,...n,ref:t})});tT.displayName=eT;var Fw="SliderRange",rT=x.forwardRef((e,t)=>{const{__scopeSlider:r,...n}=e,i=ey(Fw,r),a=Z6(Fw,r),o=x.useRef(null),l=or(t,o),d=i.values.length,f=i.values.map(v=>iT(v,i.min,i.max)),h=d>1?Math.min(...f):0,p=100-Math.max(...f);return s.jsx(yt.span,{"data-orientation":i.orientation,"data-disabled":i.disabled?"":void 0,...n,ref:l,style:{...e.style,[a.startEdge]:h+"%",[a.endEdge]:p+"%"}})});rT.displayName=Fw;var Bw="SliderThumb",nT=x.forwardRef((e,t)=>{const r=tY(e.__scopeSlider),[n,i]=x.useState(null),a=or(t,l=>i(l)),o=x.useMemo(()=>n?r().findIndex(l=>l.ref.current===n):-1,[r,n]);return s.jsx(aY,{...e,ref:a,index:o})}),aY=x.forwardRef((e,t)=>{const{__scopeSlider:r,index:n,name:i,...a}=e,o=ey(Bw,r),l=Z6(Bw,r),[d,f]=x.useState(null),h=or(t,E=>f(E)),p=d?o.form||!!d.closest("form"):!0,v=p2(d),m=o.values[n],j=m===void 0?0:iT(m,o.min,o.max),w=cY(n,o.values.length),_=v?.[l.size],S=_?dY(_,j,l.direction):0;return x.useEffect(()=>{if(d)return o.thumbs.add(d),()=>{o.thumbs.delete(d)}},[d,o.thumbs]),s.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[l.startEdge]:`calc(${j}% + ${S}px)`},children:[s.jsx(Mw.ItemSlot,{scope:e.__scopeSlider,children:s.jsx(yt.span,{role:"slider","aria-label":e["aria-label"]||w,"aria-valuemin":o.min,"aria-valuenow":m,"aria-valuemax":o.max,"aria-orientation":o.orientation,"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,tabIndex:o.disabled?void 0:0,...a,ref:h,style:m===void 0?{display:"none"}:e.style,onFocus:lt(e.onFocus,()=>{o.valueIndexToChangeRef.current=n})})}),p&&s.jsx(sT,{name:i??(o.name?o.name+(o.values.length>1?"[]":""):void 0),form:o.form,value:m},n)]})});nT.displayName=Bw;var oY="RadioBubbleInput",sT=x.forwardRef(({__scopeSlider:e,value:t,...r},n)=>{const i=x.useRef(null),a=or(i,n),o=ob(t);return x.useEffect(()=>{const l=i.current;if(!l)return;const d=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(d,"value").set;if(o!==t&&h){const p=new Event("input",{bubbles:!0});h.call(l,t),l.dispatchEvent(p)}},[o,t]),s.jsx(yt.input,{style:{display:"none"},...r,ref:a,defaultValue:t})});sT.displayName=oY;function lY(e=[],t,r){const n=[...e];return n[r]=t,n.sort((i,a)=>i-a)}function iT(e,t,r){const a=100/(r-t)*(e-t);return bp(a,[0,100])}function cY(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function uY(e,t){if(e.length===1)return 0;const r=e.map(i=>Math.abs(i-t)),n=Math.min(...r);return r.indexOf(n)}function dY(e,t,r){const n=e/2,a=Eb([0,50],[0,n]);return(n-a(t)*r)*r}function fY(e){return e.slice(0,-1).map((t,r)=>e[r+1]-t)}function hY(e,t){if(t>0){const r=fY(e);return Math.min(...r)>=t}return!0}function Eb(e,t){return r=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const n=(t[1]-t[0])/(e[1]-e[0]);return t[0]+n*(r-e[0])}}function mY(e){return(String(e).split(".")[1]||"").length}function pY(e,t){const r=Math.pow(10,t);return Math.round(e*r)/r}var aT=Q6,gY=tT,vY=rT,yY=nT;const oT=x.forwardRef(({className:e,...t},r)=>s.jsxs(aT,{ref:r,className:Me("relative flex w-full touch-none select-none items-center",e),...t,children:[s.jsx(gY,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:s.jsx(vY,{className:"absolute h-full bg-primary"})}),s.jsx(yY,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));oT.displayName=aT.displayName;const _1=[{value:"fresh",label:"Fresh",days:1},{value:"cooked",label:"Cooked",days:3},{value:"frozen",label:"Frozen",days:30},{value:"dry",label:"Dry Storage",days:90},{value:"refrigerated",label:"Refrigerated",days:7}];function xY({onSave:e,onPrint:t,onCancel:r,selectedUser:n}){const{toast:i}=qr(),{updateProductAllergens:a}=XP(),{user:o}=Aa(),{print:l,settings:d,changePrinter:f,availablePrinters:h,isLoading:p}=tm(),{addToQueue:v}=Up(),[m,j]=x.useState(""),[w,_]=x.useState([]),[S,E]=x.useState([]),[k,C]=x.useState(!1),[D,M]=x.useState([]),[F,U]=x.useState(!1),[I,K]=x.useState([]),[B,O]=x.useState(""),[z,q]=x.useState(""),[ue,ie]=x.useState(!1),[le,G]=x.useState(!1),[se,xe]=x.useState(!1),[te,R]=x.useState([]),[V,Q]=x.useState(!1),[re,Z]=x.useState(""),[X,pe]=x.useState(!1),[ce,we]=x.useState(!1),[Pe,ze]=x.useState(""),[ve,qe]=x.useState(""),[ne,tt]=x.useState(""),[jt,St]=x.useState(!1),[Xe,me]=x.useState(!1),[ye,Ce]=x.useState(""),[Ue,Je]=x.useState(!1),[He,Ze]=x.useState(!1),[ft,bt]=x.useState(1),[gt,$t]=x.useState(),{similarProducts:xt,isLoading:Yr,isDuplicate:ur,error:Gt}=aH({productName:Pe,organizationId:m,minSimilarity:.3,debounceMs:500}),ir=w.filter(Ee=>Ee.name.toLowerCase().includes(z.toLowerCase())),Nr=new Date().toISOString().split("T")[0],[Be,rr]=x.useState({categoryId:"",categoryName:"",subcategoryId:"",subcategoryName:"",productId:"",productName:"",condition:"",preparedBy:n?.auth_role_id||o?.id||"",preparedByName:n?.display_name||"",prepDate:Nr,expiryDate:"",quantity:"",unit:"",batchNumber:""});x.useEffect(()=>{(async()=>{if(o?.id)try{const{data:nt,error:vt}=await Oe.from("profiles").select("organization_id").eq("user_id",o.id).single();if(vt)throw vt;if(nt?.organization_id){j(nt.organization_id);const{data:Kt}=await Oe.from("organizations").select("name, address, phone, email, food_safety_registration").eq("id",nt.organization_id).single();Kt&&$t({name:Kt.name,address:typeof Kt.address=="string"?Kt.address:Kt.address?JSON.stringify(Kt.address):void 0,phone:Kt.phone||void 0,email:Kt.email||void 0,foodSafetyRegistration:Kt.food_safety_registration||void 0})}}catch(nt){console.error("Error fetching organization_id:",nt),i({title:"Error",description:"Failed to load organization information",variant:"destructive"})}})()},[o,i]),x.useEffect(()=>{(async()=>{if(n){let nt=n.auth_role_id;!nt&&o?.id&&(nt=o.id,console.warn(`Team member ${n.display_name} (${n.id}) is not linked to a user account. Using current user as fallback.`)),rr(vt=>({...vt,preparedBy:nt||"",preparedByName:n.display_name||""}))}})()},[n,o]),x.useEffect(()=>{m&&Vt()},[m]),x.useEffect(()=>{(async()=>{if(!Be.categoryId||Be.categoryId==="all"){E([]);return}if(!m){console.log("Waiting for organization_id before fetching subcategories");return}try{C(!0);const{data:nt,error:vt}=await Oe.from("label_subcategories").select("id, name").eq("category_id",Be.categoryId).eq("organization_id",m).order("name");if(vt)throw vt;const Kt=(nt||[]).filter(br=>br&&typeof br.id=="string"&&typeof br.name=="string");E(Kt)}catch(nt){console.error("Error fetching form subcategories:",nt),E([])}finally{C(!1)}})()},[Be.categoryId,m]),x.useEffect(()=>{(async()=>{if(!ve){M([]);return}if(!m){console.log("Waiting for organization_id before fetching dialog subcategories");return}try{U(!0);const{data:nt,error:vt}=await Oe.from("label_subcategories").select("id, name").eq("category_id",ve).eq("organization_id",m).order("name");if(vt)throw vt;const Kt=(nt||[]).filter(br=>br&&typeof br.id=="string"&&typeof br.name=="string");M(Kt)}catch(nt){console.error("Error fetching dialog subcategories:",nt),M([])}finally{U(!1)}})()},[ve,m]),x.useEffect(()=>{const Ee=setTimeout(()=>{Yt(Be.categoryId,Be.subcategoryId,B)},300);return()=>clearTimeout(Ee)},[Be.categoryId,Be.subcategoryId,B]);const Vt=async()=>{try{if(!m){console.log("Waiting for organization_id before fetching categories");return}const{data:Ee,error:nt}=await Oe.from("label_categories").select("id, name").eq("organization_id",m).order("name");if(nt)throw nt;console.log("Fetched categories:",Ee),_(Ee||[])}catch(Ee){console.error("Error fetching categories:",Ee)}},Yt=async(Ee,nt,vt)=>{try{if(!m){console.log("Waiting for organization_id before fetching products");return}let Kt=Oe.from("products").select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          label_subcategories:subcategory_id (
            id,
            name
          )
        `).eq("organization_id",m).order("name").limit(50);Ee&&Ee!=="all"&&(Kt=Kt.eq("category_id",Ee)),nt&&(Kt=Kt.eq("subcategory_id",nt)),vt&&(Kt=Kt.ilike("name",`%${vt}%`));const{data:br,error:Xr}=await Kt;if(Xr)throw Xr;const _n=(br||[]).filter(ui=>ui&&typeof ui.id=="string"&&typeof ui.name=="string");console.log("Fetched products:",_n.length,"valid products"),K(_n)}catch(Kt){console.error("Error fetching products:",Kt),K([])}},Rr=async()=>{if(!re.trim()){i({title:"Invalid Name",description:"Please enter a category name",variant:"destructive"});return}pe(!0);try{const{data:Ee,error:nt}=await Oe.from("label_categories").insert({name:re.trim()}).select().single();if(nt){if(nt.code==="23505")i({title:"Category Already Exists",description:`A category named "${re}" already exists in your organization.`,variant:"destructive"});else throw nt;return}i({title:"Category Created",description:`"${re}" has been created successfully.`}),_(vt=>[...vt,Ee]),rr(vt=>({...vt,categoryId:Ee.id,categoryName:Ee.name,productId:"",productName:""})),Z(""),Q(!1),q(""),ie(!1)}catch(Ee){console.error("Error creating category:",Ee),i({title:"Error",description:"Failed to create category",variant:"destructive"})}finally{pe(!1)}},Qt=async()=>{if(!Pe.trim()){i({title:"Invalid Name",description:"Please enter a product name",variant:"destructive"});return}if(!ve){i({title:"Category Required",description:"Please select a category for the product",variant:"destructive"});return}St(!0);try{const{data:Ee,error:nt}=await Oe.from("products").insert({name:Pe.trim(),category_id:ve,subcategory_id:ne||null,organization_id:m}).select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          label_subcategories:subcategory_id (
            id,
            name
          )
        `).single();if(nt){if(nt.code==="23505")i({title:"Product Already Exists",description:`A product named "${Pe}" already exists in your organization.`,variant:"destructive"});else throw nt;return}i({title:"Product Created",description:`"${Pe}" has been created successfully.`}),K(vt=>[...vt,Ee]),rr(vt=>({...vt,productId:Ee.id,productName:Ee.name,categoryId:Ee.category_id||vt.categoryId,categoryName:Ee.label_categories?.name||vt.categoryName,subcategoryId:Ee.subcategory_id||"",subcategoryName:Ee.label_subcategories?.name||"",unit:Ee.measuring_units?.abbreviation||""})),ze(""),qe(""),tt(""),we(!1),O(""),G(!1)}catch(Ee){console.error("Error creating product:",Ee),i({title:"Error",description:"Failed to create product",variant:"destructive"})}finally{St(!1)}},Tt=(Ee,nt)=>{const vt=_1.find(br=>br.value===Ee);if(!vt||!nt)return"";const Kt=new Date(nt);return Kt.setDate(Kt.getDate()+vt.days),Kt.toISOString().split("T")[0]},Ar=Ee=>{rr(nt=>{const vt=Tt(Ee,nt.prepDate);return{...nt,condition:Ee,expiryDate:vt}}),xe(!1)},Ht=Ee=>{rr(nt=>{const vt=nt.condition?Tt(nt.condition,Ee):"";return{...nt,prepDate:Ee,expiryDate:vt}})},nr=Ee=>{const nt=I.find(vt=>vt.id===Ee);nt&&(rr(vt=>({...vt,productId:nt.id,productName:nt.name,unit:nt.measuring_units?.abbreviation||"",categoryId:nt.category_id||vt.categoryId,categoryName:nt.label_categories?.name||vt.categoryName,subcategoryId:nt.subcategory_id||"",subcategoryName:nt.label_subcategories?.name||""})),G(!1))},jr=async()=>{if(!ye.trim()){i({title:"Invalid Name",description:"Please enter a draft name",variant:"destructive"});return}Je(!0);try{const{error:Ee}=await Oe.from("label_drafts").insert({draft_name:ye.trim(),form_data:Be,user_id:(await Oe.auth.getUser()).data.user?.id||""});if(Ee)throw Ee;i({title:"Draft Saved",description:`Draft "${ye}" has been saved successfully.`}),Ce(""),me(!1)}catch(Ee){console.error("Error saving draft:",Ee),i({title:"Error",description:"Failed to save draft",variant:"destructive"})}finally{Je(!1)}},cn=async()=>{if(!Be.productId||!Be.condition){i({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}Be.productId&&te.length>0&&(await a(Be.productId,te)||i({title:"Warning",description:"Failed to save allergen information, but continuing with print",variant:"destructive"}));try{await Ou({productId:Be.productId,productName:Be.productName,categoryId:Be.categoryId==="all"?null:Be.categoryId,categoryName:Be.categoryName,preparedBy:Be.preparedBy,preparedByName:Be.preparedByName,prepDate:Be.prepDate,expiryDate:Be.expiryDate,condition:Be.condition,quantity:Be.quantity,unit:Be.unit,batchNumber:Be.batchNumber,organizationId:m||""}),await l({productName:Be.productName,categoryName:Be.categoryName,subcategoryName:Be.subcategoryName,preparedDate:Be.prepDate,useByDate:Be.expiryDate,allergens:[],storageInstructions:`Condition: ${Be.condition}`,barcode:Be.batchNumber})&&t&&t(Be)}catch(Ee){console.error("Error in print process:",Ee),i({title:"Print Error",description:"Failed to complete print operation",variant:"destructive"})}},Et=()=>{if(!Be.productId||!Be.prepDate||!Be.expiryDate){i({title:"Incomplete Form",description:"Please fill in all required fields before adding to queue.",variant:"destructive"});return}const Ee=parseInt(Be.quantity)||1;v(Be,Ee)};return!m&&o?.id?s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading organization information..."})]})}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[r&&s.jsx(ke,{onClick:r,variant:"ghost",size:"icon",children:s.jsx(I1,{className:"w-5 h-5"})}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:"Create Label"}),s.jsx("p",{className:"text-muted-foreground",children:"Fill in the information for your food label"})]})]}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs(ke,{onClick:()=>me(!0),variant:"outline",className:"flex items-center gap-2",children:[s.jsx(CL,{className:"w-4 h-4"}),"Save Draft"]}),s.jsxs(ke,{onClick:Et,variant:"outline",disabled:p||!Be.productId||!Be.prepDate||!Be.expiryDate,className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-4 h-4"}),"Add to Queue (",Be.quantity||1,")"]}),s.jsxs(ke,{onClick:cn,disabled:p,variant:"hero",className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"w-4 h-4"}),p?"Printing...":"Print Now"]})]})]}),s.jsx(it,{className:"bg-muted/50",children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex items-center gap-3 min-w-0 flex-1",children:[s.jsx(Sc,{className:"w-5 h-5 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(At,{className:"text-sm font-medium",children:"Current Printer"}),s.jsx("p",{className:"text-sm text-muted-foreground truncate",children:d?.name||"No printer selected"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[d?.paperWidth,"mm  ",d?.paperHeight,"mm"]})]})]}),s.jsxs(Ir,{value:d?.type||"generic",onValueChange:f,children:[s.jsx(Lr,{className:"w-[200px] flex-shrink-0",children:s.jsx(Or,{})}),s.jsx(Fr,{children:h.map(Ee=>s.jsx(et,{value:Ee.type,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"h-4 w-4 flex-shrink-0"}),s.jsxs("div",{className:"min-w-0",children:[s.jsx("div",{className:"font-medium",children:Ee.name}),s.jsx("div",{className:"text-xs text-muted-foreground line-clamp-1",children:Ee.description})]})]})},Ee.type))})]})]})})}),s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(ki,{className:"w-5 h-5"}),"Product Information"]})}),s.jsxs(ot,{className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Category *"}),s.jsxs(ch,{open:ue,onOpenChange:ie,children:[s.jsx(uh,{asChild:!0,children:s.jsxs(ke,{variant:"outline",role:"combobox","aria-expanded":ue,className:"w-full justify-between",children:[s.jsxs("span",{className:"flex items-center gap-2",children:[Be.categoryId&&Be.categoryId!=="all"&&w.find(Ee=>Ee.id===Be.categoryId)?.icon&&s.jsx("span",{className:"text-lg",children:w.find(Ee=>Ee.id===Be.categoryId)?.icon}),s.jsx("span",{children:Be.categoryName||"Select category..."})]}),s.jsx(Ag,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(Md,{className:"w-full p-0",align:"start",side:"bottom",children:s.jsxs(Vm,{shouldFilter:!1,children:[s.jsx(Wm,{placeholder:"Search category...",value:z,onValueChange:q}),s.jsxs(Hm,{children:[ir.length===0&&s.jsx(Gm,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 px-4 text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No category found. Would you like to create one?"}),s.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>{Z(z),Q(!0),ie(!1)},className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-4 h-4"}),'Create "',z||"New Category",'"']})]})}),s.jsxs(Km,{children:[s.jsxs(sh,{value:"All Categories",onSelect:()=>{rr(Ee=>({...Ee,categoryId:"all",categoryName:"All Categories",subcategoryId:"",subcategoryName:"",productId:"",productName:""})),O(""),q(""),ie(!1)},children:[s.jsx(ji,{className:Me("mr-2 h-4 w-4",Be.categoryId==="all"?"opacity-100":"opacity-0")}),"All Categories"]}),ir.map(Ee=>s.jsxs(sh,{value:Ee.name,onSelect:()=>{rr(nt=>({...nt,categoryId:Ee.id,categoryName:Ee.name,subcategoryId:"",subcategoryName:"",productId:"",productName:""})),O(""),q(""),ie(!1)},children:[s.jsx(ji,{className:Me("mr-2 h-4 w-4",Be.categoryId===Ee.id?"opacity-100":"opacity-0")}),Ee.icon&&s.jsx("span",{className:"mr-2 text-lg",children:Ee.icon}),Ee.name]},Ee.id))]})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(At,{htmlFor:"subcategory",children:["Subcategory (Optional)",!Be.categoryId&&s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"- Select a category first"})]}),Be.categoryId&&Be.categoryId!=="all"?k?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),"Loading subcategories..."]}):s.jsxs(Ir,{value:Be.subcategoryId||"none",onValueChange:Ee=>{const nt=S.find(vt=>vt.id===Ee);rr(vt=>({...vt,subcategoryId:Ee==="none"?"":Ee,subcategoryName:Ee==="none"?"":nt?.name||"",productId:"",productName:""})),O("")},children:[s.jsx(Lr,{id:"subcategory",children:s.jsx(Or,{placeholder:"Select a subcategory...",children:Be.subcategoryId&&S.find(Ee=>Ee.id===Be.subcategoryId)&&s.jsxs("span",{className:"flex items-center gap-2",children:[S.find(Ee=>Ee.id===Be.subcategoryId)?.icon&&s.jsx("span",{className:"text-lg",children:S.find(Ee=>Ee.id===Be.subcategoryId)?.icon}),s.jsx("span",{children:Be.subcategoryName})]})})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"none",children:"None"}),Array.isArray(S)&&S.map(Ee=>s.jsx(et,{value:Ee.id,children:s.jsxs("span",{className:"flex items-center gap-2",children:[Ee.icon&&s.jsx("span",{className:"text-lg",children:Ee.icon}),s.jsx("span",{children:Ee.name})]})},Ee.id))]})]}):s.jsx(Ir,{disabled:!0,children:s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select a category first..."})})}),Be.categoryId&&Be.categoryId!=="all"&&!k&&s.jsx("p",{className:"text-xs text-muted-foreground",children:S.length>0?`${S.length} subcategor${S.length===1?"y":"ies"} available`:"No subcategories available for this category"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Product *"}),s.jsxs(ch,{open:le,onOpenChange:G,children:[s.jsx(uh,{asChild:!0,children:s.jsxs(ke,{variant:"outline",role:"combobox","aria-expanded":le,className:"w-full justify-between",children:[Be.productName||"Select product...",s.jsx(Ag,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(Md,{className:"w-full p-0",align:"start",side:"bottom",children:s.jsxs(Vm,{shouldFilter:!1,children:[s.jsx(Wm,{placeholder:"Search product...",value:B,onValueChange:O}),s.jsxs(Hm,{children:[I.length===0&&s.jsx(Gm,{children:s.jsxs("div",{className:"flex flex-col items-center justify-center py-6 px-4 text-center",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"No product found. Would you like to create one?"}),s.jsxs(ke,{variant:"outline",size:"sm",onClick:()=>{ze(B),qe(Be.categoryId==="all"?"":Be.categoryId),we(!0),G(!1)},className:"flex items-center gap-2",children:[s.jsx(Ln,{className:"w-4 h-4"}),'Create "',B||"New Product",'"']})]})}),Array.isArray(I)&&I.length>0&&s.jsx(Km,{children:I.map(Ee=>s.jsxs(sh,{value:Ee.name,onSelect:()=>nr(Ee.id),children:[s.jsx(ji,{className:Me("mr-2 h-4 w-4",Be.productId===Ee.id?"opacity-100":"opacity-0")}),Ee.name]},Ee.id))})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Condition *"}),s.jsxs(ch,{open:se,onOpenChange:xe,children:[s.jsx(uh,{asChild:!0,children:s.jsxs(ke,{variant:"outline",role:"combobox","aria-expanded":se,className:"w-full justify-between",children:[_1.find(Ee=>Ee.value===Be.condition)?.label||"Select condition...",s.jsx(Ag,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(Md,{className:"w-full p-0",align:"start",children:s.jsxs(Vm,{children:[s.jsx(Wm,{placeholder:"Search condition..."}),s.jsxs(Hm,{children:[s.jsx(Gm,{children:"No condition found."}),s.jsx(Km,{children:_1.map(Ee=>s.jsxs(sh,{value:Ee.label,onSelect:()=>Ar(Ee.value),children:[s.jsx(ji,{className:Me("mr-2 h-4 w-4",Be.condition===Ee.value?"opacity-100":"opacity-0")}),s.jsxs("div",{className:"flex flex-col",children:[s.jsx("span",{children:Ee.label}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:[Ee.days," day",Ee.days!==1?"s":""," shelf life"]})]})]},Ee.value))})]})]})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Prepared By"}),s.jsx(er,{value:Be.preparedByName,readOnly:!0,className:"bg-muted"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"prep-date",children:"Prep Date"}),s.jsx(er,{id:"prep-date",type:"date",value:Be.prepDate,onChange:Ee=>Ht(Ee.target.value)})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"expiry-date",children:"Expiry Date"}),s.jsx(er,{id:"expiry-date",type:"date",value:Be.expiryDate,readOnly:!0,className:"bg-muted"}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically calculated based on condition"})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"quantity",children:"Quantity (Optional)"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{type:"button",variant:"outline",size:"icon",onClick:()=>{const Ee=parseInt(Be.quantity)||0;Ee>0&&rr(nt=>({...nt,quantity:String(Ee-1)}))},disabled:!Be.quantity||parseInt(Be.quantity)<=0,className:"h-10 w-10 shrink-0",children:s.jsx(o2,{className:"h-4 w-4"})}),s.jsx(er,{id:"quantity",type:"number",value:Be.quantity,onChange:Ee=>{const nt=Ee.target.value;(nt===""||parseInt(nt)>=0)&&rr(vt=>({...vt,quantity:nt}))},placeholder:"0",min:"0",className:"text-center"}),s.jsx(ke,{type:"button",variant:"outline",size:"icon",onClick:()=>{const Ee=parseInt(Be.quantity)||0;rr(nt=>({...nt,quantity:String(Ee+1)}))},className:"h-10 w-10 shrink-0",children:s.jsx(Ln,{className:"h-4 w-4"})})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"unit",children:"Unit"}),s.jsxs(Ir,{value:Be.unit,onValueChange:Ee=>rr(nt=>({...nt,unit:Ee})),children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select unit..."})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"kg",children:"kg (Kilogram)"}),s.jsx(et,{value:"g",children:"g (Gram)"}),s.jsx(et,{value:"L",children:"L (Liter)"}),s.jsx(et,{value:"mL",children:"mL (Milliliter)"}),s.jsx(et,{value:"pcs",children:"pcs (Pieces)"}),s.jsx(et,{value:"oz",children:"oz (Ounce)"}),s.jsx(et,{value:"lb",children:"lb (Pound)"}),s.jsx(et,{value:"gal",children:"gal (Gallon)"}),s.jsx(et,{value:"servings",children:"Servings"}),s.jsx(et,{value:"portions",children:"Portions"})]})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-loaded from product or select manually"})]})]})]})]}),Be.productId&&s.jsxs(it,{children:[s.jsx(sr,{children:s.jsx(pr,{children:"Allergen Information"})}),s.jsx(ot,{children:s.jsx(nH,{selectedAllergenIds:te,onChange:R,productId:Be.productId,showCommonOnly:!1})})]}),s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(pr,{className:"flex items-center gap-2",children:[He?s.jsx(Tu,{className:"w-5 h-5"}):s.jsx(Sv,{className:"w-5 h-5"}),"Label Preview"]}),s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>Ze(!He),className:"flex items-center gap-2",children:He?s.jsxs(s.Fragment,{children:[s.jsx(Sv,{className:"w-4 h-4"}),"Hide Preview"]}):s.jsxs(s.Fragment,{children:[s.jsx(Tu,{className:"w-4 h-4"}),"Show Preview"]})})]}),s.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Preview shows how your label will look with the current printer: ",s.jsx("span",{className:"font-medium text-foreground",children:d?.name||"No printer selected"})]})]}),He&&s.jsxs(ot,{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 p-4 bg-muted/50 rounded-lg",children:[s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsx(At,{className:"text-xs font-medium",children:"Current Printer"}),s.jsxs("div",{className:"flex items-center gap-3 p-3 bg-background rounded-md border",children:[s.jsx(Hi,{className:"w-5 h-5 text-primary flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:d?.name||"No printer selected"}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:[d?.paperWidth,"mm  ",d?.paperHeight,"mm"]})]})]})]}),s.jsxs("div",{className:"flex-1 space-y-2",children:[s.jsxs(At,{className:"text-xs font-medium flex items-center justify-between",children:[s.jsx("span",{children:"Zoom"}),s.jsxs("span",{className:"text-muted-foreground",children:[Math.round(ft*100),"%"]})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ke,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>{const Ee=[.5,.75,1,1.25,1.5],nt=Ee.indexOf(ft);nt>0&&bt(Ee[nt-1])},disabled:ft<=.5,children:s.jsx(DL,{className:"w-4 h-4"})}),s.jsx(oT,{value:[ft*100],onValueChange:([Ee])=>{const nt=Ee/100;if(nt>=.5&&nt<=1.5){const Kt=[.5,.75,1,1.25,1.5].reduce((br,Xr)=>Math.abs(Xr-nt)<Math.abs(br-nt)?Xr:br);bt(Kt)}},min:50,max:150,step:25,className:"flex-1"}),s.jsx(ke,{variant:"outline",size:"icon",className:"h-8 w-8 shrink-0",onClick:()=>{const Ee=[.5,.75,1,1.25,1.5],nt=Ee.indexOf(ft);nt<Ee.length-1&&bt(Ee[nt+1])},disabled:ft>=1.5,children:s.jsx(B1,{className:"w-4 h-4"})})]})]})]}),s.jsx(BW,{labelData:{...Be,organizationDetails:gt},format:d?.type||"generic",scale:ft,className:"min-h-[400px]"}),s.jsx("div",{className:"text-xs text-muted-foreground text-center p-4 bg-muted/30 rounded-lg",children:s.jsxs("p",{children:["All labels use the same professional layout.",d?.type==="pdf"&&" This preview shows how it will appear on A4 paper (210mm  297mm).",d?.type==="zebra"&&" This preview shows how it will appear on thermal printer labels (60mm  60mm).",d?.type==="generic"&&" This preview shows how it will appear on standard label paper (60mm  60mm).",!d&&" Select a printer to see the label preview with appropriate dimensions."]})})]})]}),s.jsx(wc,{open:V,onOpenChange:Q,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Create New Category"}),s.jsx(bc,{children:"Are you sure you want to create a new category with the following name?"})]}),s.jsxs("div",{className:"my-4",children:[s.jsx(At,{htmlFor:"category-name",children:"Category Name"}),s.jsx(er,{id:"category-name",value:re,onChange:Ee=>Z(Ee.target.value),placeholder:"Enter category name...",className:"mt-2",onKeyDown:Ee=>{Ee.key==="Enter"&&!X&&Rr()}})]}),s.jsxs(ml,{children:[s.jsx(vl,{disabled:X,children:"Cancel"}),s.jsx(gl,{onClick:Rr,disabled:X||!re.trim(),children:X?"Creating...":"Create Category"})]})]})}),s.jsx(wc,{open:Xe,onOpenChange:me,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Save Draft"}),s.jsx(bc,{children:"Give your draft a name to save your progress and continue later."})]}),s.jsxs("div",{className:"my-4",children:[s.jsx(At,{htmlFor:"draft-name",children:"Draft Name *"}),s.jsx(er,{id:"draft-name",value:ye,onChange:Ee=>Ce(Ee.target.value),placeholder:"e.g., Chicken Breast Label",className:"mt-2",onKeyDown:Ee=>{Ee.key==="Enter"&&!Ue&&ye.trim()&&jr()}})]}),s.jsxs(ml,{children:[s.jsx(vl,{disabled:Ue,children:"Cancel"}),s.jsx(gl,{onClick:jr,disabled:Ue||!ye.trim(),children:Ue?"Saving...":"Save Draft"})]})]})}),s.jsx(wc,{open:ce,onOpenChange:we,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Create New Product"}),s.jsx(bc,{children:"Fill in the details to create a new product."})]}),s.jsxs("div",{className:"space-y-4 my-4",children:[s.jsxs("div",{children:[s.jsx(At,{htmlFor:"product-name",children:"Product Name *"}),s.jsx(er,{id:"product-name",value:Pe,onChange:Ee=>ze(Ee.target.value),placeholder:"Enter product name...",className:"mt-2",onKeyDown:Ee=>{Ee.key==="Enter"&&!jt&&Pe.trim()&&ve&&Qt()}}),m&&s.jsx(iH,{similarProducts:xt,isLoading:Yr,isDuplicate:ur,error:Gt,onSelectProduct:Ee=>{we(!1);const nt=I.find(vt=>vt.id===Ee.product_id);nt&&(rr(vt=>({...vt,productId:nt.id,productName:nt.name,categoryId:nt.category_id||"",categoryName:nt.label_categories?.name||"",subcategoryId:nt.subcategory_id||"",subcategoryName:nt.label_subcategories?.name||""})),i({title:"Product Selected",description:`Using existing product: ${nt.name}`}))},showProceedButton:!1})]}),s.jsxs("div",{children:[s.jsx(At,{htmlFor:"product-category",children:"Category *"}),s.jsxs(ch,{children:[s.jsx(uh,{asChild:!0,children:s.jsxs(ke,{variant:"outline",role:"combobox",className:"w-full justify-between mt-2",children:[w.find(Ee=>Ee.id===ve)?.name||"Select category...",s.jsx(Ag,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(Md,{className:"w-full p-0",align:"start",children:s.jsxs(Vm,{children:[s.jsx(Wm,{placeholder:"Search category..."}),s.jsxs(Hm,{children:[s.jsx(Gm,{children:"No category found."}),s.jsx(Km,{children:w.map(Ee=>s.jsxs(sh,{value:Ee.name,onSelect:()=>qe(Ee.id),children:[s.jsx(ji,{className:Me("mr-2 h-4 w-4",ve===Ee.id?"opacity-100":"opacity-0")}),Ee.icon&&s.jsx("span",{className:"mr-2 text-lg",children:Ee.icon}),Ee.name]},Ee.id))})]})]})})]})]}),s.jsxs("div",{children:[s.jsxs(At,{htmlFor:"product-subcategory",children:["Subcategory (Optional)",!ve&&s.jsx("span",{className:"text-xs text-muted-foreground ml-2",children:"- Select a category first"})]}),s.jsx("div",{className:"mt-2",children:ve?F?s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground py-2",children:[s.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-primary"}),"Loading subcategories..."]}):s.jsxs(Ir,{value:ne||"none",onValueChange:Ee=>tt(Ee==="none"?"":Ee),children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select a subcategory..."})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"none",children:"None"}),Array.isArray(D)&&D.map(Ee=>s.jsx(et,{value:Ee.id,children:s.jsxs("span",{className:"flex items-center gap-2",children:[Ee.icon&&s.jsx("span",{className:"text-lg",children:Ee.icon}),s.jsx("span",{children:Ee.name})]})},Ee.id))]})]}):s.jsx(Ir,{disabled:!0,children:s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select a category first..."})})})})]})]}),s.jsxs(ml,{children:[s.jsx(vl,{disabled:jt,children:"Cancel"}),s.jsx(gl,{onClick:Qt,disabled:jt||!Pe.trim()||!ve||ur,children:jt?"Creating...":"Create Product"})]})]})})]})}var N1={exports:{}},j1={};var VS;function wY(){if(VS)return j1;VS=1;var e=c0();function t(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var r=typeof Object.is=="function"?Object.is:t,n=e.useState,i=e.useEffect,a=e.useLayoutEffect,o=e.useDebugValue;function l(p,v){var m=v(),j=n({inst:{value:m,getSnapshot:v}}),w=j[0].inst,_=j[1];return a(function(){w.value=m,w.getSnapshot=v,d(w)&&_({inst:w})},[p,m,v]),i(function(){return d(w)&&_({inst:w}),p(function(){d(w)&&_({inst:w})})},[p]),o(m),m}function d(p){var v=p.getSnapshot;p=p.value;try{var m=v();return!r(p,m)}catch{return!0}}function f(p,v){return v()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return j1.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,j1}var WS;function bY(){return WS||(WS=1,N1.exports=wY()),N1.exports}var _Y=bY();function NY(){return _Y.useSyncExternalStore(jY,()=>!0,()=>!1)}function jY(){return()=>{}}var Ab="Avatar",[SY]=Fs(Ab),[kY,lT]=SY(Ab),cT=x.forwardRef((e,t)=>{const{__scopeAvatar:r,...n}=e,[i,a]=x.useState("idle");return s.jsx(kY,{scope:r,imageLoadingStatus:i,onImageLoadingStatusChange:a,children:s.jsx(yt.span,{...n,ref:t})})});cT.displayName=Ab;var uT="AvatarImage",dT=x.forwardRef((e,t)=>{const{__scopeAvatar:r,src:n,onLoadingStatusChange:i=()=>{},...a}=e,o=lT(uT,r),l=CY(n,a),d=Zn(f=>{i(f),o.onImageLoadingStatusChange(f)});return us(()=>{l!=="idle"&&d(l)},[l,d]),l==="loaded"?s.jsx(yt.img,{...a,ref:t,src:n}):null});dT.displayName=uT;var fT="AvatarFallback",hT=x.forwardRef((e,t)=>{const{__scopeAvatar:r,delayMs:n,...i}=e,a=lT(fT,r),[o,l]=x.useState(n===void 0);return x.useEffect(()=>{if(n!==void 0){const d=window.setTimeout(()=>l(!0),n);return()=>window.clearTimeout(d)}},[n]),o&&a.imageLoadingStatus!=="loaded"?s.jsx(yt.span,{...i,ref:t}):null});hT.displayName=fT;function HS(e,t){return e?t?(e.src!==t&&(e.src=t),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function CY(e,{referrerPolicy:t,crossOrigin:r}){const n=NY(),i=x.useRef(null),a=n?(i.current||(i.current=new window.Image),i.current):null,[o,l]=x.useState(()=>HS(a,e));return us(()=>{l(HS(a,e))},[a,e]),us(()=>{const d=p=>()=>{l(p)};if(!a)return;const f=d("loaded"),h=d("error");return a.addEventListener("load",f),a.addEventListener("error",h),t&&(a.referrerPolicy=t),typeof r=="string"&&(a.crossOrigin=r),()=>{a.removeEventListener("load",f),a.removeEventListener("error",h)}},[a,r,t]),o}var mT=cT,pT=dT,gT=hT;const Qd=x.forwardRef(({className:e,...t},r)=>s.jsx(mT,{ref:r,className:Me("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",e),...t}));Qd.displayName=mT.displayName;const ty=x.forwardRef(({className:e,...t},r)=>s.jsx(pT,{ref:r,className:Me("aspect-square h-full w-full",e),...t}));ty.displayName=pT.displayName;const Jd=x.forwardRef(({className:e,...t},r)=>s.jsx(gT,{ref:r,className:Me("flex h-full w-full items-center justify-center rounded-full bg-muted",e),...t}));Jd.displayName=gT.displayName;const Pb={cook:"Cook",barista:"Barista",manager:"Manager",leader_chef:"Leader Chef",admin:"Admin"},Yv={cook:"bg-blue-100 text-blue-800 border-blue-200",barista:"bg-green-100 text-green-800 border-green-200",manager:"bg-yellow-100 text-yellow-800 border-yellow-200",leader_chef:"bg-orange-100 text-orange-800 border-orange-200",admin:"bg-red-100 text-red-800 border-red-200"};function Qv({open:e,onOpenChange:t,onSelectUser:r,organizationId:n,title:i="Select Team Member",description:a="Choose who is preparing this product"}){const[o,l]=x.useState([]),[d,f]=x.useState(""),[h,p]=x.useState(!1),{toast:v}=qr();x.useEffect(()=>{e&&m()},[e]);const m=async()=>{p(!0);try{let E=n;if(!E){const{data:{user:D},error:M}=await Oe.auth.getUser();if(M)throw console.error("Auth error:",M),new Error(`Authentication failed: ${M.message}`);if(!D)throw new Error("Not authenticated and no organization_id provided");console.log("[UserSelectionDialog] Current user ID:",D.id);const{data:F,error:U}=await Oe.from("profiles").select("organization_id").eq("user_id",D.id).maybeSingle();if(U)throw console.error("[UserSelectionDialog] Profile error:",U),new Error(`Failed to fetch profile: ${U.message}`);if(console.log("[UserSelectionDialog] Current profile organization_id:",F?.organization_id),!F?.organization_id){v({title:"No Organization",description:"You are not assigned to an organization.",variant:"destructive"}),l([]);return}E=F.organization_id}console.log("[UserSelectionDialog] Fetching team members for organization_id:",E);const{data:k,error:C}=await Oe.from("team_members").select("*").eq("organization_id",E).eq("is_active",!0).order("display_name",{ascending:!0});if(C)throw console.error("[UserSelectionDialog] Error fetching team members:",C),new Error(`Failed to fetch team members: ${C.message}`);console.log("[UserSelectionDialog] Fetched team members:",k),l(k||[]),(!k||k.length===0)&&v({title:"No Team Members Found",description:"No active team members found in your organization. Please add team members first."})}catch(E){console.error("[UserSelectionDialog] Error fetching team members:",E),v({title:"Error",description:E instanceof Error?E.message:"Failed to load team members",variant:"destructive"})}finally{p(!1)}},j=o.filter(E=>E.display_name?.toLowerCase().includes(d.toLowerCase())||E.position?.toLowerCase().includes(d.toLowerCase())||E.email?.toLowerCase().includes(d.toLowerCase())),w=E=>{r(E),t(!1)},_=E=>E?E.split(" ").map(k=>k[0]).join("").toUpperCase().substring(0,2):"U",S=E=>E.profile_complete?s.jsx(Nc,{className:"h-4 w-4 text-green-500"}):s.jsx(wn,{className:"h-4 w-4 text-amber-500"});return s.jsx(Ca,{open:e,onOpenChange:t,children:s.jsxs(Qi,{className:"sm:max-w-[500px]",children:[s.jsxs(Ji,{children:[s.jsx(Zi,{children:i}),s.jsx(bl,{children:a})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(er,{placeholder:"Search by name, position, or email...",value:d,onChange:E=>f(E.target.value),className:"pl-10"})]}),s.jsx("div",{className:"max-h-[400px] overflow-y-auto space-y-2",children:h?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading team members..."}):j.length===0?s.jsx("div",{className:"text-center py-8 text-muted-foreground",children:d?"No team members found matching your search":"No team members found"}):j.map(E=>s.jsxs("button",{onClick:()=>w(E),className:"w-full flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors",children:[s.jsx(Qd,{children:s.jsx(Jd,{className:"bg-primary text-primary-foreground",children:_(E.display_name)})}),s.jsxs("div",{className:"flex-1 text-left",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"font-medium",children:E.display_name||"No name"}),S(E)]}),E.position&&s.jsx("p",{className:"text-sm text-muted-foreground",children:E.position}),s.jsx("div",{className:"flex items-center gap-2 mt-1",children:s.jsx(pt,{variant:"secondary",className:"text-xs",style:{backgroundColor:Yv[E.role_type]+"20",color:Yv[E.role_type]},children:Pb[E.role_type]})})]})]},E.id))})]})]})})}function EY({open:e,onOpenChange:t,onConfirm:r,productName:n}){const[i,a]=x.useState("1"),[o,l]=x.useState("Unit"),[d,f]=x.useState("REFRIGERATED"),h=()=>{r({quantity:i,unit:o,condition:d}),a("1"),l("Unit"),f("REFRIGERATED")},p=()=>{t(!1),a("1"),l("Unit"),f("REFRIGERATED")};return s.jsx(Ca,{open:e,onOpenChange:t,children:s.jsxs(Qi,{className:"sm:max-width-[425px]",children:[s.jsxs(Ji,{children:[s.jsx(Zi,{children:"Quick Print - Additional Details"}),s.jsxs(bl,{children:["Complete the details for ",s.jsx("span",{className:"font-semibold",children:n})]})]}),s.jsxs("div",{className:"grid gap-4 py-4",children:[s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(At,{htmlFor:"quantity",className:"text-right flex items-center gap-1",children:[s.jsx(ki,{className:"h-4 w-4"}),"Quantity"]}),s.jsx(er,{id:"quantity",type:"number",min:"1",value:i,onChange:v=>a(v.target.value),className:"col-span-3",autoFocus:!0})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(At,{htmlFor:"unit",className:"text-right flex items-center gap-1",children:[s.jsx(EL,{className:"h-4 w-4"}),"Unit"]}),s.jsxs(Ir,{value:o,onValueChange:l,children:[s.jsx(Lr,{className:"col-span-3",children:s.jsx(Or,{placeholder:"Select unit"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"Unit",children:"Unit"}),s.jsx(et,{value:"kg",children:"Kilogram (kg)"}),s.jsx(et,{value:"g",children:"Gram (g)"}),s.jsx(et,{value:"L",children:"Liter (L)"}),s.jsx(et,{value:"mL",children:"Milliliter (mL)"}),s.jsx(et,{value:"lb",children:"Pound (lb)"}),s.jsx(et,{value:"oz",children:"Ounce (oz)"}),s.jsx(et,{value:"Portion",children:"Portion"}),s.jsx(et,{value:"Box",children:"Box"}),s.jsx(et,{value:"Bag",children:"Bag"}),s.jsx(et,{value:"Container",children:"Container"})]})]})]}),s.jsxs("div",{className:"grid grid-cols-4 items-center gap-4",children:[s.jsxs(At,{htmlFor:"condition",className:"text-right flex items-center gap-1",children:[s.jsx(gk,{className:"h-4 w-4"}),"Condition"]}),s.jsxs(Ir,{value:d,onValueChange:f,children:[s.jsx(Lr,{className:"col-span-3",children:s.jsx(Or,{placeholder:"Select condition"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"REFRIGERATED",children:"Refrigerated"}),s.jsx(et,{value:"FROZEN",children:"Frozen"}),s.jsx(et,{value:"ROOM TEMP",children:"Room Temperature"}),s.jsx(et,{value:"HOT",children:"Hot"})]})]})]})]}),s.jsxs(Zh,{children:[s.jsx(ke,{variant:"outline",onClick:p,children:"Cancel"}),s.jsxs(ke,{onClick:h,className:"gap-2",children:[s.jsx(ki,{className:"h-4 w-4"}),"Print Label"]})]})]})})}function AY({mode:e,onModeChange:t,className:r}){return s.jsxs("div",{className:Me("flex gap-2 p-1 bg-muted rounded-lg",r),children:[s.jsxs(ke,{variant:e==="categories"?"default":"ghost",className:Me("flex-1 transition-all",e==="categories"&&"shadow-sm"),onClick:()=>t("categories"),children:[s.jsx(ck,{className:"w-4 h-4 mr-2"}),"By Categories"]}),s.jsxs(ke,{variant:e==="products"?"default":"ghost",className:Me("flex-1 transition-all",e==="products"&&"shadow-sm"),onClick:()=>t("products"),children:[s.jsx(ki,{className:"w-4 h-4 mr-2"}),"By Products"]})]})}function PY({navigationStack:e,onBack:t,onNavigateToLevel:r,className:n}){const i=e.length>0;return s.jsxs("div",{className:Me("flex items-center gap-2 text-sm",n),children:[s.jsxs(ke,{variant:"outline",size:"sm",onClick:t,disabled:!i,className:"h-9",children:[s.jsx(ik,{className:"w-4 h-4 mr-1"}),"Back"]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx(ck,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("span",{className:"text-muted-foreground",children:"Categories"}),e.length>0&&s.jsx(jv,{className:"w-3 h-3 text-muted-foreground"}),e.map((a,o)=>s.jsxs(x.Fragment,{children:[s.jsxs(ke,{variant:"link",size:"sm",onClick:()=>r(o),className:"h-auto p-0 text-sm hover:text-primary",children:[s.jsx("span",{className:"mr-1 text-base",children:a.icon}),a.name]}),o<e.length-1&&s.jsx(jv,{className:"w-3 h-3 text-muted-foreground"})]},o))]})]})}const TY={product:""};function RY(){return TY.product}function vT({product:e,open:t,onOpenChange:r,preparedBy:n="",preparedByName:i="Unknown User"}){const{addToQueue:a}=Up(),[o,l]=x.useState(1),d=()=>{if(!e)return;const h=new Date().toISOString().split("T")[0],p=new Date;p.setDate(p.getDate()+1);const v=p.toISOString().split("T")[0],m={categoryId:e.category_id||e.label_categories?.id||"",categoryName:e.label_categories?.name||"Uncategorized",subcategoryId:void 0,subcategoryName:void 0,productId:e.id,productName:e.name,condition:"Fresh",preparedBy:n,preparedByName:i,prepDate:h,expiryDate:v,quantity:o.toString(),unit:e.measuring_units?.abbreviation||"units",batchNumber:`${Date.now()}-${Math.random().toString(36).substr(2,9)}`};a(m,o),r(!1),l(1)},f=h=>{const p=o+h;p>=1&&p<=100&&l(p)};return s.jsx(Ca,{open:t,onOpenChange:r,children:s.jsxs(Qi,{className:"sm:max-w-[425px]",children:[s.jsxs(Ji,{children:[s.jsx(Zi,{children:"Add to Print Queue"}),s.jsxs(bl,{children:["Add ",e?.name," to your print queue with today's date and tomorrow's expiry."]})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Product"}),s.jsx("div",{className:"text-sm font-medium",children:e?.name}),e?.label_categories&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Category: ",e.label_categories.name]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Number of Labels"}),s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(ke,{type:"button",variant:"outline",size:"icon",onClick:()=>f(-1),disabled:o<=1,children:s.jsx(o2,{className:"w-4 h-4"})}),s.jsx(er,{type:"number",min:1,max:100,value:o,onChange:h=>{const p=parseInt(h.target.value);!isNaN(p)&&p>=1&&p<=100&&l(p)},className:"text-center text-lg font-semibold w-24"}),s.jsx(ke,{type:"button",variant:"outline",size:"icon",onClick:()=>f(1),disabled:o>=100,children:s.jsx(Ln,{className:"w-4 h-4"})})]}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Max 100 labels per item"})]}),s.jsxs("div",{className:"bg-muted/50 rounded-lg p-3 space-y-1",children:[s.jsx("p",{className:"text-xs font-medium",children:"Default Values:"}),s.jsxs("ul",{className:"text-xs text-muted-foreground space-y-0.5",children:[s.jsx("li",{children:" Prep Date: Today"}),s.jsx("li",{children:" Expiry Date: Tomorrow"}),s.jsx("li",{children:" Condition: Fresh"})]}),s.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-500 mt-2",children:" Edit dates in the queue before printing if needed"})]})]}),s.jsxs(Zh,{children:[s.jsx(ke,{type:"button",variant:"outline",onClick:()=>r(!1),children:"Cancel"}),s.jsxs(ke,{type:"button",variant:"hero",onClick:d,children:["Add ",o," Label",o>1?"s":""," to Queue"]})]})]})})}const Jv=e=>{if(!e)return"safe";const t=new Date,r=new Date(e);if(r<t)return"expired";const n=1440*60*1e3;return r.getTime()-t.getTime()<=n?"warning":"safe"},Zv=e=>{switch(e){case"expired":return"#ef4444";case"warning":return"#f59e0b";case"safe":return"#10b981";default:return"#6b7280"}},Uw=e=>{switch(e){case"expired":return"Expired";case"warning":return"Expiring Soon";case"safe":return"Safe";default:return"Unknown"}};function LY({navigationStack:e,categories:t,subcategories:r,products:n,loadingSubcategories:i,loadingProducts:a,printingProductId:o,successProductId:l,onCategorySelect:d,onSubcategorySelect:f,onProductSelect:h,className:p}){const{user:v}=Aa(),[m,j]=x.useState(null),[w,_]=x.useState(!1),S=(k,C)=>{k.stopPropagation(),j(C),_(!0)},E=e.length===0?"categories":e[e.length-1].type==="category"?"subcategories":"products";if(E==="categories")return s.jsxs("div",{className:Me("space-y-4",p),children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a category to view products"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:t.map(k=>s.jsxs(ke,{variant:"outline",className:"h-36 sm:h-40 flex flex-col items-center justify-center p-4 hover:bg-primary hover:text-primary-foreground hover:border-primary transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md",onClick:()=>d(k),children:[s.jsx("div",{className:"text-5xl mb-3 group-hover:scale-110 transition-transform",children:k.icon||""}),s.jsx("span",{className:"text-sm font-medium text-center line-clamp-2 leading-tight",children:k.name}),k.product_count!==void 0&&s.jsxs("span",{className:"text-xs text-muted-foreground group-hover:text-primary-foreground/80 mt-2",children:[k.product_count," ",k.product_count===1?"product":"products"]})]},k.id))})]});if(E==="subcategories"){if(i)return s.jsxs("div",{className:"flex items-center justify-center h-40",children:[s.jsx(Si,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading subcategories..."})]});if(!(r.length===0&&!a&&n.length>0)){if(r.length===0)return a?s.jsxs("div",{className:"flex items-center justify-center h-40",children:[s.jsx(Si,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading products..."})]}):s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ki,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No subcategories or products found in this category"})]})}return s.jsxs("div",{className:Me("space-y-4",p),children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a subcategory to view products"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:r.map(k=>s.jsxs(ke,{variant:"outline",className:"min-h-[10rem] sm:min-h-[11rem] flex flex-col items-center justify-center p-3 sm:p-4 gap-3 hover:bg-primary hover:text-primary-foreground hover:border-primary transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md",onClick:()=>f(k),children:[s.jsx("div",{className:"text-5xl sm:text-6xl group-hover:scale-110 transition-transform leading-none",children:k.icon||""}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-center line-clamp-2 leading-tight px-2",children:k.name}),k.product_count!==void 0&&s.jsxs("span",{className:"text-xs text-muted-foreground group-hover:text-primary-foreground/80 mt-1",children:[k.product_count," ",k.product_count===1?"product":"products"]})]},k.id))})]})}return E==="products"?a?s.jsxs("div",{className:"flex items-center justify-center h-40",children:[s.jsx(Si,{className:"w-8 h-8 animate-spin text-primary"}),s.jsx("span",{className:"ml-3 text-muted-foreground",children:"Loading products..."})]}):n.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ki,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),s.jsxs("p",{className:"text-sm",children:["No products found in this ",e[e.length-1]?.type||"category"]})]}):s.jsxs("div",{className:Me("space-y-4",p),children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Tap to print instantly  Long-press + icon to add to queue"}),s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:n.map(k=>{const C=o===k.id,D=l===k.id,M=k.latestLabel?Jv(k.latestLabel.expiry_date):null,F=M?Zv(M):null,U=k.allergens?.some(I=>I.severity==="critical");return k.allergens?.filter(I=>I.severity==="critical").length,s.jsxs("div",{className:"relative",children:[s.jsxs(ke,{variant:"outline",disabled:C,className:Me("w-full min-h-[10rem] sm:min-h-[11rem] flex flex-col items-center justify-between p-3 sm:p-4 gap-2 transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md relative",D?"bg-green-500 text-white border-green-600 hover:bg-green-600":"hover:bg-primary hover:text-primary-foreground hover:border-primary"),onClick:()=>h(k),children:[s.jsxs("div",{className:"absolute top-2 left-2 right-2 flex items-start justify-between z-20 pointer-events-none gap-2",children:[k.latestLabel&&M?s.jsx(pt,{variant:"secondary",className:"h-5 sm:h-6 px-2 text-[10px] sm:text-xs font-bold shadow-sm pointer-events-auto shrink-0",style:{backgroundColor:F?`${F}20`:"rgba(0,0,0,0.1)",color:F||"#000",borderColor:F||"transparent"},children:Uw(M)}):s.jsx("span",{className:"shrink-0"}),!C&&!D&&s.jsx(ke,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full shadow-md hover:scale-110 transition-transform bg-primary text-primary-foreground hover:bg-primary/90 pointer-events-auto shrink-0",onClick:I=>S(I,k),children:s.jsx(Ln,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 mt-8 mb-6",children:[C?s.jsx("div",{className:Me("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-primary/10 group-hover:bg-primary-foreground/20"),children:s.jsx(Si,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-spin"})}):D?s.jsx("div",{className:Me("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-green-600"),children:s.jsx(ji,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-in zoom-in duration-300"})}):s.jsx("div",{className:"text-5xl sm:text-6xl leading-none",children:RY()}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-center line-clamp-2 px-2 w-full",children:C?"Printing...":D?"Sent!":k.name})]}),s.jsx("div",{className:"w-full flex flex-col items-center gap-1 min-h-[1.5rem]",children:!C&&!D&&k.measuring_units&&s.jsx("span",{className:"text-xs text-muted-foreground group-hover:text-primary-foreground/80",children:k.measuring_units.abbreviation})})]}),k.allergens&&k.allergens.length>0&&s.jsx(pt,{variant:"secondary",className:Me("absolute bottom-2 right-2 h-6 w-6 rounded-full p-0 flex items-center justify-center text-xs font-bold shadow-sm z-10",U?"bg-red-500 text-white border-red-600":"bg-yellow-500 text-white border-yellow-600"),children:k.allergens.length})]},k.id)})}),s.jsx(vT,{product:m,open:w,onOpenChange:_,preparedBy:v?.id||"",preparedByName:v?.email||"Unknown User"})]}):null}function DY({products:e,onQuickPrint:t,className:r}){const{user:n}=Aa(),{settings:i,availablePrinters:a,changePrinter:o}=tm(),[l,d]=x.useState("categories"),[f,h]=x.useState("grid"),[p,v]=x.useState(""),[m,j]=x.useState([]),[w,_]=x.useState([]),[S,E]=x.useState([]),[k,C]=x.useState(e),[D,M]=x.useState(!1),[F,U]=x.useState(!1),[I,K]=x.useState(!1),[B,O]=x.useState(null),[z,q]=x.useState(null),[ue,ie]=x.useState(null),[le,G]=x.useState(!1);x.useEffect(()=>{l==="categories"&&w.length===0&&se()},[l]),x.useEffect(()=>{if(l==="products"){const ce=e.filter(we=>we.name.toLowerCase().includes(p.toLowerCase()));C(ce)}},[e,p,l]);const se=async()=>{M(!0);try{if(!n?.id){_([]);return}const{data:ce}=await Oe.from("profiles").select("organization_id").eq("user_id",n.id).single();if(!ce?.organization_id){_([]);return}const{data:we,error:Pe}=await Oe.from("label_categories").select("id, name, icon").eq("organization_id",ce.organization_id).order("name");if(Pe)throw Pe;const ze=await Promise.all((we||[]).map(async ve=>{const{count:qe}=await Oe.from("label_subcategories").select("*",{count:"exact",head:!0}).eq("category_id",ve.id).eq("organization_id",ce.organization_id),{count:ne}=await Oe.from("products").select("*",{count:"exact",head:!0}).eq("category_id",ve.id).eq("organization_id",ce.organization_id);return{id:ve.id,name:ve.name,icon:ve.icon,subcategory_count:qe||0,product_count:ne||0}}));_(ze)}catch(ce){console.error("Error fetching categories:",ce)}finally{M(!1)}},xe=async ce=>{U(!0);try{if(!n?.id)return E([]),[];const{data:we}=await Oe.from("profiles").select("organization_id").eq("user_id",n.id).single();if(!we?.organization_id)return E([]),[];const{data:Pe,error:ze}=await Oe.from("label_subcategories").select("id, name, icon, category_id").eq("category_id",ce).eq("organization_id",we.organization_id).order("display_order");if(ze)throw ze;const ve=await Promise.all((Pe||[]).map(async qe=>{const{count:ne}=await Oe.from("products").select("*",{count:"exact",head:!0}).eq("subcategory_id",qe.id).eq("organization_id",we.organization_id);return{id:qe.id,name:qe.name,icon:qe.icon,category_id:qe.category_id,product_count:ne||0}}));return E(ve),ve}catch(we){return console.error("Error fetching subcategories:",we),[]}finally{U(!1)}},te=async(ce,we)=>{K(!0);try{if(!n?.id){C([]);return}const{data:Pe}=await Oe.from("profiles").select("organization_id").eq("user_id",n.id).single();if(!Pe?.organization_id){C([]);return}let ze=Oe.from("products").select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          product_allergens (
            allergen_id,
            allergens (
              id,
              name,
              icon,
              severity,
              is_common
            )
          )
        `).eq("category_id",ce).eq("organization_id",Pe.organization_id);we?ze=ze.eq("subcategory_id",we):ze=ze.is("subcategory_id",null),ze=ze.order("name");const{data:ve,error:qe}=await ze;if(qe)throw qe;const ne=(ve||[]).map(jt=>({...jt,allergens:jt.product_allergens?.map(St=>St.allergens).filter(Boolean)||[]})),tt=await Promise.all(ne.map(async jt=>{const{data:St}=await Oe.from("printed_labels").select("id, expiry_date, condition").eq("product_id",jt.id).eq("organization_id",Pe.organization_id).order("created_at",{ascending:!1}).limit(1).maybeSingle();return{...jt,latestLabel:St}}));C(tt)}catch(Pe){console.error("Error fetching products:",Pe),C([])}finally{K(!1)}},R=ce=>{d(ce),j([]),E([]),v(""),ce==="products"&&C(e)},V=async ce=>{const we={type:"category",id:ce.id,name:ce.name,icon:ce.icon||""};j([we]),(await xe(ce.id)).length===0&&await te(ce.id)},Q=async ce=>{const we={type:"subcategory",id:ce.id,name:ce.name,icon:ce.icon||""};j(ze=>[...ze,we]);const Pe=m[0]?.id;Pe&&await te(Pe,ce.id)},re=()=>{if(m.length===0)return;const ce=[...m];if(ce.pop(),j(ce),ce.length===0)E([]),C([]);else if(ce.length===1){const we=ce[0].id;we&&(xe(we),C([]))}},Z=ce=>{if(ce>=m.length)return;const we=m.slice(0,ce+1);if(j(we),we.length===1){const Pe=we[0].id;Pe&&(xe(Pe),C([]))}},X=async ce=>{O(ce.id);try{await t(ce),O(null),q(ce.id),setTimeout(()=>{q(null)},1500)}catch{O(null)}},pe=(ce,we)=>{ce.stopPropagation(),ie(we),G(!0)};return s.jsxs(s.Fragment,{children:[s.jsxs(it,{className:Me("w-full",r),children:[s.jsxs(sr,{className:"pb-3",children:[s.jsx("div",{className:"mb-4 p-3 border rounded-lg bg-muted/20",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx(Sc,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(At,{className:"text-xs font-medium",children:"Printer Output"}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[i?.name||"No printer","  ",i?.paperWidth,"",i?.paperHeight,"mm"]})]})]}),s.jsxs(Ir,{value:i?.type||"generic",onValueChange:o,children:[s.jsx(Lr,{className:"w-[160px] h-8 text-xs flex-shrink-0",children:s.jsx(Or,{})}),s.jsx(Fr,{children:a.map(ce=>s.jsx(et,{value:ce.type,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("div",{className:"min-w-0",children:s.jsx("div",{className:"text-xs font-medium",children:ce.name})})]})},ce.type))})]})]})}),s.jsx(AY,{mode:l,onModeChange:R,className:"mb-4"}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(v_,{className:"w-5 h-5 text-primary"}),s.jsx(pr,{className:"text-xl",children:"Quick Print"}),s.jsx(pt,{variant:"secondary",className:"ml-2",children:l==="categories"?m.length===0?`${w.length} categories`:m.length===1&&S.length>0?`${S.length} subcategories`:`${k.length} products`:`${k.length} products`})]}),l==="products"&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{variant:f==="grid"?"default":"outline",size:"sm",onClick:()=>h("grid"),className:"h-9 w-9 p-0",children:s.jsx(uk,{className:"w-4 h-4"})}),s.jsx(ke,{variant:f==="list"?"default":"outline",size:"sm",onClick:()=>h("list"),className:"h-9 w-9 p-0",children:s.jsx(a2,{className:"w-4 h-4"})})]})]}),l==="categories"&&m.length>0&&s.jsx(PY,{navigationStack:m,onBack:re,onNavigateToLevel:Z,className:"mt-3"}),l==="products"&&s.jsxs("div",{className:"relative mt-3",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(er,{placeholder:"Search products...",value:p,onChange:ce=>v(ce.target.value),className:"pl-9"})]})]}),s.jsx(ot,{children:l==="categories"?D&&w.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Si,{className:"w-12 h-12 mx-auto mb-3 animate-spin text-primary"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading categories..."})]}):s.jsx(LY,{navigationStack:m,categories:w,subcategories:S,products:k,loadingSubcategories:F,loadingProducts:I,printingProductId:B,successProductId:z,onCategorySelect:V,onSubcategorySelect:Q,onProductSelect:X}):s.jsx(s.Fragment,{children:k.length===0?s.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[s.jsx(ki,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),s.jsx("p",{className:"text-sm",children:"No products found"})]}):s.jsxs(s.Fragment,{children:[f==="grid"&&s.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-3 sm:gap-4",children:k.map(ce=>{const we=B===ce.id,Pe=z===ce.id,ze=ce.allergens?.some(ne=>ne.severity==="critical");ce.allergens?.filter(ne=>ne.severity==="critical").length;const ve=ce.latestLabel?Jv(ce.latestLabel.expiry_date):null,qe=ve?Zv(ve):null;return s.jsxs("div",{className:"relative",children:[s.jsxs(ke,{variant:"outline",disabled:we,className:Me("min-h-[10rem] sm:min-h-[11rem] w-full flex flex-col items-center justify-between p-3 sm:p-4 gap-2 transition-all duration-200 group active:scale-95 touch-manipulation shadow-sm hover:shadow-md relative",Pe?"bg-green-500 text-white border-green-600 hover:bg-green-600":"hover:bg-primary hover:text-primary-foreground hover:border-primary"),onClick:()=>X(ce),children:[s.jsxs("div",{className:"absolute top-2 left-2 right-2 flex items-start justify-between z-20 pointer-events-none gap-2",children:[ce.latestLabel&&ve?s.jsx(pt,{variant:"secondary",className:"h-5 sm:h-6 px-2 text-[10px] sm:text-xs font-bold shadow-sm pointer-events-auto shrink-0",style:{backgroundColor:qe?`${qe}20`:"rgba(0,0,0,0.1)",color:qe||"#000",borderColor:qe||"transparent"},children:Uw(ve)}):s.jsx("span",{className:"shrink-0"}),!we&&!Pe&&s.jsx(ke,{size:"icon",variant:"secondary",className:"h-8 w-8 rounded-full shadow-md hover:scale-110 bg-primary text-primary-foreground hover:bg-primary/90 pointer-events-auto transition-transform shrink-0",onClick:ne=>pe(ne,ce),children:s.jsx(Ln,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center gap-2 mt-8 mb-6",children:[we?s.jsx("div",{className:Me("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-primary/10 group-hover:bg-primary-foreground/20"),children:s.jsx(Si,{className:"w-8 h-8 sm:w-10 sm:h-10 animate-spin"})}):Pe?s.jsx("div",{className:Me("w-16 h-16 sm:w-20 sm:h-20 rounded-full flex items-center justify-center transition-colors","bg-green-600"),children:s.jsx(ji,{className:"w-8 h-8 sm:w-10 sm:h-10"})}):s.jsx("div",{className:"text-5xl sm:text-6xl leading-none",children:""}),s.jsx("span",{className:"text-sm sm:text-base font-medium text-center line-clamp-2 px-2 w-full",children:ce.name})]}),s.jsx("div",{className:"w-full flex flex-col items-center gap-1 min-h-[1.5rem]"})]}),ce.allergens&&ce.allergens.length>0&&s.jsx(pt,{variant:"secondary",className:Me("absolute bottom-2 right-2 h-6 w-6 rounded-full p-0 flex items-center justify-center text-xs font-bold shadow-sm z-10",ze?"bg-red-500 text-white border-red-600":"bg-yellow-500 text-white border-yellow-600"),children:ce.allergens.length})]},ce.id)})}),f==="list"&&s.jsx("div",{className:"space-y-3",children:k.map(ce=>{const we=B===ce.id,Pe=z===ce.id,ze=ce.allergens?.some(ne=>ne.severity==="critical"),ve=ce.latestLabel?Jv(ce.latestLabel.expiry_date):null,qe=ve?Zv(ve):null;return s.jsxs(ke,{variant:"outline",disabled:we,className:Me("w-full min-h-20 flex items-center justify-between px-6 py-3 transition-all duration-200 group active:scale-[0.98] touch-manipulation shadow-sm hover:shadow-md",Pe?"bg-green-500 text-white border-green-600 hover:bg-green-600":"hover:bg-primary hover:text-primary-foreground hover:border-primary"),onClick:()=>X(ce),children:[s.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[we?s.jsx("div",{className:Me("w-12 h-12 rounded-full flex items-center justify-center transition-colors shrink-0","bg-primary/10 group-hover:bg-primary-foreground/20"),children:s.jsx(Si,{className:"w-6 h-6 animate-spin"})}):Pe?s.jsx("div",{className:Me("w-12 h-12 rounded-full flex items-center justify-center transition-colors shrink-0","bg-green-600"),children:s.jsx(ji,{className:"w-6 h-6"})}):s.jsx("div",{className:"text-3xl shrink-0",children:""}),s.jsx("div",{className:"flex-1 text-left",children:s.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[s.jsx("span",{className:"text-base font-medium",children:ce.name}),!we&&!Pe&&ce.latestLabel&&ve&&s.jsxs(pt,{variant:"secondary",className:"h-5 px-2 text-xs font-bold",style:{backgroundColor:qe?`${qe}20`:"rgba(0,0,0,0.1)",color:qe||"#000",borderColor:qe||"transparent"},children:[s.jsx(Xn,{className:"w-3 h-3 mr-1"}),ve&&Uw(ve)]}),!we&&!Pe&&ce.allergens&&ce.allergens.length>0&&s.jsxs(pt,{variant:"secondary",className:Me("h-5 px-2 text-xs font-bold",ze?"bg-red-500 text-white border-red-600":"bg-yellow-500 text-white border-yellow-600"),children:[s.jsx(es,{className:"w-3 h-3 mr-1"}),ce.allergens.length," Allergen",ce.allergens.length>1?"s":""]})]})})]}),s.jsx(v_,{className:"w-5 h-5 opacity-60 shrink-0"})]},ce.id)})})]})})})]}),s.jsx(vT,{product:ue,open:le,onOpenChange:G,preparedBy:n?.id||"",preparedByName:n?.email||"Unknown User"})]})}function IY({organizationId:e}){const{toast:t}=qr(),{isAdmin:r,isManager:n,loading:i}=Wu(),[a,o]=x.useState(null),[l,d]=x.useState(!0),[f,h]=x.useState(null),[p,v]=x.useState(!1),[m,j]=x.useState(!1),[w,_]=x.useState(null),[S,E]=x.useState("1to2"),k=r||n;x.useEffect(()=>{C()},[e]);const C=async()=>{d(!0),h(null);try{const{data:U,error:I}=await Oe.rpc("get_duplicate_stats",{org_id:e});if(I)throw new Error(`Failed to fetch stats: ${I.message}`);U&&Array.isArray(U)&&U.length>0&&o(U[0])}catch(U){const I=U instanceof Error?U.message:"Unknown error";h(I),console.error("Error fetching duplicate stats:",U)}finally{d(!1)}},D=(U,I)=>{if(!k){t({title:"Permission Denied",description:"You need admin or manager permissions to merge products.",variant:"destructive"});return}_(U),E(I),j(!0)},M=async()=>{if(!w)return;const U=S==="1to2"?w.product1.id:w.product2.id,I=S==="1to2"?w.product2.id:w.product1.id,K=S==="1to2"?w.product1.name:w.product2.name,B=S==="1to2"?w.product2.name:w.product1.name;v(!0);try{const{data:O,error:z}=await Oe.rpc("merge_products",{source_product_id:U,target_product_id:I,org_id:e});if(z)throw new Error(`Merge failed: ${z.message}`);const q=O;if(q&&!q.success)throw new Error(q.error||"Merge failed");t({title:"Products Merged Successfully",description:s.jsxs("div",{className:"space-y-1",children:[s.jsxs("p",{className:"font-medium",children:[K,"  ",B]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[q?.labels_migrated||0," label",q?.labels_migrated!==1?"s":""," migrated"]}),s.jsxs("p",{className:"text-sm text-gray-600",children:[q?.allergens_migrated||0," allergen",q?.allergens_migrated!==1?"s":""," migrated"]})]})}),await C(),j(!1),_(null)}catch(O){const z=O instanceof Error?O.message:"Unknown error";console.error("Error merging products:",O),t({title:"Merge Failed",description:z,variant:"destructive"})}finally{v(!1)}};if(l||i)return s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(Hr,{className:"h-6 w-48"}),s.jsx(Hr,{className:"h-4 w-full mt-2"})]}),s.jsxs(ot,{className:"space-y-4",children:[s.jsx(Hr,{className:"h-20 w-full"}),s.jsx(Hr,{className:"h-32 w-full"})]})]});if(f)return s.jsxs(So,{variant:"destructive",children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(Fd,{children:"Error Loading Duplicate Data"}),s.jsx(ko,{children:f})]});if(!a)return s.jsxs(So,{children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(Fd,{children:"No Data"}),s.jsx(ko,{children:"Unable to load duplicate statistics."})]});const F=a.duplicate_groups||[];return s.jsxs(s.Fragment,{children:[s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(pr,{children:"Duplicate Product Management"}),s.jsx(xa,{children:"Identify and merge duplicate products to maintain data quality"})]}),s.jsxs(pt,{variant:r?"default":n?"secondary":"outline",className:"flex items-center gap-1",children:[s.jsx(ef,{className:"h-3 w-3"}),r?"Admin":n?"Manager":"View Only"]})]})}),s.jsxs(ot,{className:"space-y-6",children:[!k&&s.jsxs(So,{children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(Fd,{children:"View Only Mode"}),s.jsx(ko,{children:"You can view duplicate statistics, but only administrators and managers can merge products."})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[s.jsx(it,{className:"border-blue-200 bg-blue-50",children:s.jsxs(ot,{className:"pt-6",children:[s.jsx("div",{className:"text-3xl font-bold text-blue-700",children:a.total_products}),s.jsx("div",{className:"text-sm text-blue-600 mt-1",children:"Total Products"})]})}),s.jsx(it,{className:F.length>0?"border-yellow-200 bg-yellow-50":"border-gray-200",children:s.jsxs(ot,{className:"pt-6",children:[s.jsx("div",{className:`text-3xl font-bold ${F.length>0?"text-yellow-700":"text-gray-700"}`,children:a.potential_duplicates}),s.jsx("div",{className:`text-sm mt-1 ${F.length>0?"text-yellow-600":"text-gray-600"}`,children:"Potential Duplicates"})]})}),s.jsx(it,{className:F.length>0?"border-orange-200 bg-orange-50":"border-gray-200",children:s.jsxs(ot,{className:"pt-6",children:[s.jsx("div",{className:`text-3xl font-bold ${F.length>0?"text-orange-700":"text-gray-700"}`,children:F.length}),s.jsx("div",{className:`text-sm mt-1 ${F.length>0?"text-orange-600":"text-gray-600"}`,children:"Duplicate Pairs"})]})})]}),F.length>0?s.jsxs("div",{className:"space-y-3",children:[s.jsxs("h3",{className:"text-lg font-semibold flex items-center gap-2",children:[s.jsx(es,{className:"h-5 w-5 text-orange-600"}),"Duplicate Product Pairs (70%+ similarity)"]}),s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:F.map((U,I)=>s.jsx(it,{className:"border-orange-200",children:s.jsx(ot,{className:"p-4",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsxs("div",{className:"flex-1 flex items-center gap-3",children:[s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:U.product1.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",U.product1.id.slice(0,8),"..."]})]}),s.jsxs(pt,{variant:U.similarity>=.9?"destructive":U.similarity>=.8?"default":"secondary",className:"shrink-0",children:[Math.round(U.similarity*100),"% match"]}),s.jsxs("div",{className:"flex-1",children:[s.jsx("div",{className:"font-medium text-sm",children:U.product2.name}),s.jsxs("div",{className:"text-xs text-gray-500",children:["ID: ",U.product2.id.slice(0,8),"..."]})]})]}),s.jsxs("div",{className:"flex gap-2 shrink-0",children:[s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>D(U,"1to2"),disabled:!k,title:k?"Merge right":"Admin/Manager permission required",className:"text-xs",children:s.jsx(fh,{className:"h-3 w-3"})}),s.jsx(ke,{size:"sm",variant:"outline",onClick:()=>D(U,"2to1"),disabled:!k,title:k?"Merge left":"Admin/Manager permission required",className:"text-xs",children:s.jsx(fh,{className:"h-3 w-3 rotate-180"})})]})]})})},I))})]}):s.jsxs(So,{children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(Fd,{children:"No Duplicates Found"}),s.jsx(ko,{children:"Great! Your product database is clean. No potential duplicates detected."})]}),s.jsx(ke,{onClick:C,variant:"outline",className:"w-full",children:"Refresh Statistics"})]})]}),s.jsx(wc,{open:m,onOpenChange:j,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsxs(pl,{className:"flex items-center gap-2",children:[s.jsx(es,{className:"h-5 w-5 text-orange-600"}),"Confirm Product Merge"]}),s.jsx(bc,{className:"space-y-3",children:w&&s.jsxs(s.Fragment,{children:[s.jsx("p",{children:"This action will merge the following products:"}),s.jsxs("div",{className:"bg-gray-50 p-3 rounded-md space-y-2",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{variant:"destructive",className:"text-xs",children:"Source"}),s.jsx("span",{className:"font-medium",children:S==="1to2"?w.product1.name:w.product2.name})]}),s.jsx("div",{className:"text-center",children:s.jsx(fh,{className:"h-4 w-4 inline"})}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(pt,{variant:"default",className:"text-xs",children:"Target"}),s.jsx("span",{className:"font-medium",children:S==="1to2"?w.product2.name:w.product1.name})]})]}),s.jsxs("div",{className:"text-sm space-y-1",children:[s.jsx("p",{className:"font-medium",children:"What will happen:"}),s.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[s.jsx("li",{children:"All printed labels will be updated to reference the target product"}),s.jsx("li",{children:"All allergens will be migrated to the target product"}),s.jsx("li",{children:"The source product will be permanently deleted"})]})]}),s.jsxs(So,{variant:"destructive",className:"mt-4",children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsxs(ko,{className:"text-xs",children:[s.jsx("strong",{children:"Warning:"})," This action cannot be undone. Make sure you're merging the correct products."]})]})]})})]}),s.jsxs(ml,{children:[s.jsx(vl,{disabled:p,children:"Cancel"}),s.jsx(gl,{onClick:M,disabled:p,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:p?s.jsxs(s.Fragment,{children:[s.jsx(Si,{className:"mr-2 h-4 w-4 animate-spin"}),"Merging..."]}):"Confirm Merge"})]})]})})]})}function OY(){const{items:e,totalLabels:t,totalItems:r,isOpen:n,isPrinting:i,printProgress:a,removeFromQueue:o,updateQuantity:l,clearQueue:d,closeQueue:f,printAll:h}=Up(),{settings:p,availablePrinters:v,changePrinter:m}=tm(),{toast:j}=qr(),[w,_]=x.useState(!1),[S,E]=x.useState(!1),k=Math.ceil(t*3/60),C=I=>{const K=new Date(I),O=Math.floor((new Date().getTime()-K.getTime())/1e3);return O<60?"Just now":O<3600?`${Math.floor(O/60)} min ago`:O<86400?`${Math.floor(O/3600)} hours ago`:`${Math.floor(O/86400)} days ago`},D=(I,K)=>{const B=e.find(z=>z.id===I);if(!B)return;const O=B.quantity+K;O>=1&&O<=100&&l(I,O)},M=async()=>{E(!0)},F=async I=>{let K;if(I.auth_role_id)K=I.auth_role_id;else{const{data:{user:B}}=await Oe.auth.getUser();if(!B){j({title:"Authentication Error",description:"Unable to determine user. Please refresh the page.",variant:"destructive"});return}K=B.id,console.warn("Team member not linked to user account. Using current logged-in user as fallback.")}await h(K,I.display_name||"Unknown")},U=()=>{d(),_(!1)};return n?s.jsxs(s.Fragment,{children:[s.jsx("div",{className:Me("fixed inset-0 bg-black/50 z-40 transition-opacity",n?"opacity-100":"opacity-0 pointer-events-none"),onClick:f}),s.jsxs("div",{className:Me("fixed right-0 top-0 h-full w-full sm:w-[450px] bg-background shadow-2xl z-50","transform transition-transform duration-300 ease-in-out","flex flex-col",n?"translate-x-0":"translate-x-full"),children:[s.jsxs("div",{className:"flex items-center justify-between p-4 border-b bg-muted/30",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsxs("div",{className:"relative",children:[s.jsx(Hi,{className:"w-6 h-6 text-primary"}),r>0&&s.jsx(pt,{className:"absolute -top-2 -right-2 bg-primary text-primary-foreground px-1.5 py-0.5 text-xs",children:r})]}),s.jsxs("div",{children:[s.jsx("h2",{className:"text-lg font-bold",children:"Print Queue"}),s.jsxs("p",{className:"text-xs text-muted-foreground",children:[r," item",r!==1?"s":"","  ",t," label",t!==1?"s":""]})]})]}),s.jsx(ke,{variant:"ghost",size:"icon",onClick:f,disabled:i,children:s.jsx(xn,{className:"w-4 h-4"})})]}),s.jsx("div",{className:"px-4 py-3 border-b bg-muted/20",children:s.jsxs("div",{className:"flex items-center justify-between gap-3",children:[s.jsxs("div",{className:"flex items-center gap-2 min-w-0 flex-1",children:[s.jsx(Sc,{className:"w-4 h-4 text-muted-foreground flex-shrink-0"}),s.jsxs("div",{className:"min-w-0 flex-1",children:[s.jsx(At,{className:"text-xs font-medium",children:"Printer"}),s.jsxs("p",{className:"text-xs text-muted-foreground truncate",children:[p?.name||"No printer","  ",p?.paperWidth,"",p?.paperHeight,"mm"]})]})]}),s.jsxs(Ir,{value:p?.type||"generic",onValueChange:m,children:[s.jsx(Lr,{className:"w-[160px] h-8 text-xs flex-shrink-0",children:s.jsx(Or,{})}),s.jsx(Fr,{children:v.map(I=>s.jsx(et,{value:I.type,children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hi,{className:"h-3 w-3 flex-shrink-0"}),s.jsx("div",{className:"min-w-0",children:s.jsx("div",{className:"text-xs font-medium",children:I.name})})]})},I.type))})]})]})}),e.length===0?s.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center p-8 text-center",children:[s.jsx(Hi,{className:"w-16 h-16 text-muted-foreground/30 mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Queue is Empty"}),s.jsx("p",{className:"text-sm text-muted-foreground max-w-sm",children:"Add labels to your print queue from the label form or quick print view."})]}):s.jsxs(s.Fragment,{children:[s.jsx(J0,{className:"flex-1 p-4",children:s.jsx("div",{className:"space-y-3",children:e.map((I,K)=>s.jsx(it,{className:"p-4",children:s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx("div",{className:"flex-shrink-0 w-7 h-7 bg-primary text-primary-foreground rounded-full flex items-center justify-center text-sm font-bold",children:K+1}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsx("h3",{className:"font-semibold text-base leading-tight mb-1",children:I.productName}),s.jsx("p",{className:"text-xs text-muted-foreground",children:I.categoryName})]})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Prep:"}),s.jsx("span",{className:"ml-1 font-medium",children:new Date(I.labelData.prepDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-muted-foreground",children:"Expiry:"}),s.jsx("span",{className:"ml-1 font-medium",children:new Date(I.labelData.expiryDate).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})]}),s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Quantity:"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(ke,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>D(I.id,-1),disabled:i||I.quantity<=1,children:s.jsx(o2,{className:"w-3 h-3"})}),s.jsx("div",{className:"w-12 text-center font-semibold",children:I.quantity}),s.jsx(ke,{variant:"outline",size:"icon",className:"h-7 w-7",onClick:()=>D(I.id,1),disabled:i||I.quantity>=100,children:s.jsx(Ln,{className:"w-3 h-3"})})]})]}),s.jsx(ke,{variant:"ghost",size:"icon",className:"h-8 w-8 text-destructive hover:text-destructive",onClick:()=>o(I.id),disabled:i,children:s.jsx(Uu,{className:"w-4 h-4"})})]}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Added ",C(I.addedAt)]})]})},I.id))})}),i&&a&&s.jsx("div",{className:"p-4 border-t bg-blue-50 dark:bg-blue-950/20",children:s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"font-medium",children:"Printing..."}),s.jsxs("span",{className:"text-muted-foreground",children:[a.printedLabels," / ",a.totalLabels," labels"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 overflow-hidden",children:s.jsx("div",{className:"bg-primary h-full transition-all duration-300",style:{width:`${a.printedLabels/a.totalLabels*100}%`}})}),a.currentItem&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Printing: ",a.currentItem," (",a.currentQuantity," copies)"]}),a.errors.length>0&&s.jsxs("div",{className:"flex items-start gap-2 text-xs text-destructive",children:[s.jsx(wn,{className:"w-3 h-3 mt-0.5 flex-shrink-0"}),s.jsxs("span",{children:[a.errors.length," error",a.errors.length>1?"s":""]})]})]})}),s.jsxs("div",{className:"p-4 border-t bg-muted/20 space-y-3",children:[s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Total Labels:"}),s.jsx("span",{className:"font-bold text-lg",children:t})]}),s.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[s.jsx("span",{children:"Estimated time:"}),s.jsxs("span",{children:["~",k," minute",k!==1?"s":""]})]})]}),s.jsx(Hs,{}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{variant:"outline",onClick:()=>_(!0),disabled:i,className:"flex-1",children:"Clear All"}),s.jsxs(ke,{variant:"hero",onClick:M,disabled:i,className:"flex-1",children:[s.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Print All (",t,")"]})]})]})]})]}),s.jsx(wc,{open:w,onOpenChange:_,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Clear Print Queue?"}),s.jsxs(bc,{children:["This will remove all ",r," item",r!==1?"s":""," (",t," labels) from your print queue. This action cannot be undone."]})]}),s.jsxs(ml,{children:[s.jsx(vl,{children:"Cancel"}),s.jsx(gl,{onClick:U,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Clear Queue"})]})]})}),s.jsx(Qv,{open:S,onOpenChange:E,onSelectUser:F})]}):null}function MY(){const{totalLabels:e,totalItems:t,openQueue:r}=Up(),[n,i]=x.useState(!1);return x.useEffect(()=>{if(t>0){i(!0);const a=setTimeout(()=>i(!1),1e3);return()=>clearTimeout(a)}},[t]),t===0?null:s.jsxs(ke,{onClick:r,className:Me("fixed bottom-6 right-6 z-30","rounded-full w-16 h-16 shadow-lg","hover:scale-110 transition-all duration-200",n&&"animate-pulse"),variant:"hero",size:"icon",children:[s.jsx(Hi,{className:"w-6 h-6"}),s.jsx(pt,{className:Me("absolute -top-2 -right-2","bg-red-500 text-white border-2 border-background","min-w-[24px] h-6 flex items-center justify-center","font-bold text-xs",n&&"animate-bounce"),children:e})]})}function FY(){const[e,t]=x.useState(""),[r,n]=x.useState("overview"),[i,a]=x.useState(!1),[o,l]=x.useState(!1),[d,f]=x.useState(null),[h,p]=x.useState(null),{toast:v}=qr(),{user:m}=Aa(),{isAdmin:j}=Wu(),{print:w}=tm(),{openQueue:_,totalLabels:S}=Up(),[E,k]=x.useState(""),[C,D]=x.useState(0),[M,F]=x.useState(0),[U,I]=x.useState(0),[K,B]=x.useState([]),[O,z]=x.useState([]);x.useEffect(()=>{ue(),ie(),le(),q()},[]);const q=async()=>{if(m?.id)try{const{data:Z,error:X}=await Oe.from("profiles").select("organization_id").eq("user_id",m.id).single();if(X)throw X;Z?.organization_id&&k(Z.organization_id)}catch(Z){console.error("Error fetching organization_id:",Z)}},ue=async()=>{try{if(!m?.id)return;const{data:Z}=await Oe.from("profiles").select("organization_id").eq("user_id",m.id).single();if(!Z?.organization_id)return;const{data:X,error:pe}=await Oe.from("products").select(`
          id,
          name,
          category_id,
          subcategory_id,
          measuring_unit_id,
          organization_id,
          measuring_units:measuring_unit_id (
            name,
            abbreviation
          ),
          label_categories:category_id (
            id,
            name
          ),
          product_allergens (
            allergen_id,
            allergens (
              id,
              name,
              icon,
              severity,
              is_common
            )
          )
        `).eq("organization_id",Z.organization_id).order("name");if(pe)throw pe;const ce=(X||[]).map(Pe=>({...Pe,allergens:Pe.product_allergens?.map(ze=>ze.allergens).filter(Boolean)||[]})),we=await Promise.all(ce.map(async Pe=>{const{data:ze}=await Oe.from("printed_labels").select("id, expiry_date, condition").eq("product_id",Pe.id).eq("organization_id",Z.organization_id).order("created_at",{ascending:!1}).limit(1).maybeSingle();return{...Pe,latestLabel:ze}}));z(we)}catch(Z){console.error("Error fetching products:",Z)}},ie=async()=>{try{const Z=new Date;Z.setHours(0,0,0,0);const X=new Date(Z);X.setDate(X.getDate()+1);const{count:pe,error:ce}=await Oe.from("printed_labels").select("*",{count:"exact",head:!0}).gte("created_at",Z.toISOString()).lt("created_at",X.toISOString());if(ce)throw ce;D(pe||0);const{count:we,error:Pe}=await Oe.from("printed_labels").select("*",{count:"exact",head:!0});if(Pe)throw Pe;F(we||0);const ze=new Date,ve=new Date;ve.setHours(ve.getHours()+24);const{count:qe,error:ne}=await Oe.from("printed_labels").select("*",{count:"exact",head:!0}).gte("expiry_date",ze.toISOString().split("T")[0]).lte("expiry_date",ve.toISOString().split("T")[0]);if(ne)throw ne;I(qe||0)}catch(Z){console.error("Error fetching dashboard stats:",Z)}},le=async()=>{try{const{data:Z,error:X}=await Oe.from("printed_labels").select("*").order("created_at",{ascending:!1}).limit(10);if(X)throw X;B(Z||[])}catch(Z){console.error("Error fetching recent labels:",Z)}},G=async Z=>{f(Z),a(!0)},se=()=>{f(null),a(!0)},xe=Z=>{p(Z),d?l(!0):n("form")},te=Z=>{d&&h&&(R(d,h,Z),f(null),l(!1))},R=async(Z,X,pe)=>{if(!E){v({title:"Organization Required",description:"Could not determine your organization. Please refresh the page.",variant:"destructive"});return}let ce;if(X.auth_role_id)ce=X.auth_role_id;else{const{data:{user:tt}}=await Oe.auth.getUser();if(!tt){v({title:"Authentication Error",description:"Unable to determine user. Please refresh the page.",variant:"destructive"});return}ce=tt.id,console.warn(`Team member ${X.display_name} (${X.id}) is not linked to a user account. Using current user as fallback.`)}const we=new Date,Pe=we.toISOString().split("T")[0],ze=new Date(we);ze.setDate(we.getDate()+3);const ve=ze.toISOString().split("T")[0];let qe=[];try{const{data:tt}=await Oe.from("product_allergens").select(`
          allergen_id,
          allergens (
            id,
            name,
            icon,
            severity
          )
        `).eq("product_id",Z.id);qe=(tt||[]).map(jt=>jt.allergens).filter(Boolean)}catch(tt){console.error("Error fetching allergens for quick print:",tt)}const ne={productId:Z.id,productName:Z.name,categoryId:Z.label_categories?.id||null,categoryName:Z.label_categories?.name||"Quick Print",preparedBy:ce,preparedByName:X.display_name||"Unknown",prepDate:Pe,expiryDate:ve,condition:pe?.condition||"REFRIGERATED",quantity:pe?.quantity||"1",unit:pe?.unit||Z.measuring_units?.abbreviation||"Unit",batchNumber:"",allergens:qe,organizationId:E};try{await Ou(ne),await w({productName:Z.name,categoryName:Z.label_categories?.name||"Quick Print",preparedDate:Pe,useByDate:ve,preparedByName:X.display_name||"Unknown",allergens:qe.map(jt=>jt.name),storageInstructions:pe?.condition||"REFRIGERATED",quantity:pe?.quantity||"1",unit:pe?.unit||Z.measuring_units?.abbreviation||"Unit",condition:pe?.condition||"REFRIGERATED"})?(v({title:"Label Sent to Printer",description:`Printing label for ${Z.name} prepared by ${X.display_name}`}),ie(),le()):v({title:"Print Failed",description:"Could not connect to printer.",variant:"destructive"})}catch(tt){console.error("Error in quick print:",tt),v({title:"Print Failed",description:"An error occurred while printing.",variant:"destructive"})}},V=Z=>{v({title:"Label Saved",description:"Your label has been saved as a draft."}),n("overview")},Q=async Z=>{if(!E){v({title:"Organization Required",description:"Could not determine your organization. Please refresh the page.",variant:"destructive"});return}try{let X=[];if(Z.productId)try{const{data:ce}=await Oe.from("product_allergens").select(`
              allergen_id,
              allergens (
                id,
                name,
                icon,
                severity
              )
            `).eq("product_id",Z.productId);X=(ce||[]).map(we=>we.allergens).filter(Boolean)}catch(ce){console.error("Error fetching allergens for print:",ce)}await Ou({productId:Z.productId,productName:Z.productName,categoryId:Z.categoryId==="all"?null:Z.categoryId,categoryName:Z.categoryName,preparedBy:Z.preparedBy,preparedByName:Z.preparedByName,prepDate:Z.prepDate,expiryDate:Z.expiryDate,condition:Z.condition,quantity:Z.quantity,unit:Z.unit,batchNumber:Z.batchNumber,allergens:X,organizationId:E}),await w({productName:Z.productName,categoryName:Z.categoryName,subcategoryName:Z.subcategoryName,preparedDate:Z.prepDate,useByDate:Z.expiryDate,preparedByName:Z.preparedByName,allergens:X.map(ce=>ce.name),storageInstructions:`Condition: ${Z.condition}`,barcode:Z.batchNumber,quantity:Z.quantity,unit:Z.unit,condition:Z.condition})?(v({title:"Label Printed Successfully",description:`Label for ${Z.productName} has been sent to the printer and saved to history.`}),ie(),le(),n("overview")):v({title:"Print Failed",description:"Could not connect to printer.",variant:"destructive"})}catch(X){console.error("Error printing label:",X),v({title:"Print Error",description:"An unexpected error occurred while printing.",variant:"destructive"})}},re=()=>{n("overview")};return r==="form"?s.jsxs(s.Fragment,{children:[s.jsx(xY,{onSave:V,onPrint:Q,onCancel:re,selectedUser:h||void 0}),s.jsx(Qv,{open:i,onOpenChange:a,onSelectUser:xe})]}):r==="admin"?j?E?s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Duplicate Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Identify and merge duplicate products to maintain data integrity"})]}),s.jsx(ke,{variant:"outline",onClick:()=>n("overview"),children:"Back to Overview"})]}),s.jsx(IY,{organizationId:E})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Duplicate Management"}),s.jsx(ke,{variant:"outline",onClick:()=>n("overview"),children:"Back to Overview"})]}),s.jsx("div",{className:"flex items-center justify-center p-12",children:s.jsxs("div",{className:"text-center space-y-4",children:[s.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading organization information..."})]})})]}):s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Admin Access Required"}),s.jsx(ke,{variant:"outline",onClick:()=>n("overview"),children:"Back to Overview"})]}),s.jsxs("div",{className:"bg-destructive/10 border border-destructive/20 rounded-lg p-6 text-center",children:[s.jsx(es,{className:"w-12 h-12 mx-auto mb-4 text-destructive"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Access Denied"}),s.jsx("p",{className:"text-muted-foreground",children:"You need administrator privileges to access product duplicate management."})]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Qv,{open:i,onOpenChange:a,onSelectUser:xe}),s.jsx(EY,{open:o,onOpenChange:l,onConfirm:te,productName:d?.name||""}),s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Label Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Quick print labels with one tap - designed for busy kitchens"})]}),s.jsxs("div",{className:"flex gap-3",children:[j&&s.jsxs(ke,{variant:"outline",onClick:()=>n("admin"),className:"flex items-center gap-2",children:[s.jsx(yL,{className:"w-4 h-4"}),"Manage Duplicates"]}),s.jsxs(ke,{variant:"outline",onClick:_,children:[s.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Print Queue",S>0&&s.jsx(pt,{variant:"default",className:"ml-2",children:S})]}),s.jsxs(ke,{variant:"hero",onClick:se,children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"New Label"]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-foreground",children:"Quick Print"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Tap any product to print a label instantly"})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[O.length," products available"]})]}),s.jsx(DY,{products:O,onQuickPrint:G})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"text-lg font-semibold mb-4 text-foreground",children:"Today's Overview"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Gi,{title:"Labels Today",value:C,change:`Total: ${M} labels`,changeType:"neutral",icon:Hi}),s.jsx(Gi,{title:"Recent Labels",value:K.length,change:"Last 10 printed",changeType:"neutral",icon:kL}),s.jsx(Gi,{title:"Expiring Soon",value:U,change:"Next 24 hours",changeType:U>10?"negative":"neutral",icon:es}),s.jsx(Gi,{title:"Compliance Rate",value:M>0?"Active":"No Data",change:`${M} printed`,changeType:"positive",icon:Ya})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Recent Labels"}),s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative",children:[s.jsx(_l,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),s.jsx(er,{placeholder:"Search labels...",className:"pl-10 w-48",value:e,onChange:Z=>t(Z.target.value)})]}),s.jsx(ke,{variant:"outline",size:"icon",children:s.jsx(jc,{className:"w-4 h-4"})})]})]}),s.jsx("div",{className:"space-y-3",children:K.length===0?s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-8 text-center",children:[s.jsx(Hi,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No labels printed yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Start printing labels to see them here"})]}):K.filter(Z=>e===""||Z.product_name.toLowerCase().includes(e.toLowerCase())).map(Z=>{const X=Jv(Z.expiry_date),pe=Zv(X);return s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h4",{className:"font-medium",children:Z.product_name}),s.jsx("span",{className:"px-2 py-1 rounded-md text-xs font-medium",style:{backgroundColor:`${pe}20`,color:pe},children:X})]}),s.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[s.jsxs("p",{children:["Category: ",Z.category_name||"N/A"]}),s.jsxs("p",{children:["Condition: ",Z.condition]}),s.jsxs("p",{children:["Prep: ",new Date(Z.prep_date).toLocaleDateString()," | Expires: ",new Date(Z.expiry_date).toLocaleDateString()]}),s.jsxs("p",{children:["By: ",Z.prepared_by_name," at ",new Date(Z.created_at).toLocaleTimeString()]}),Z.quantity&&s.jsxs("p",{children:["Qty: ",Z.quantity," ",Z.unit]})]})]},Z.id)})})]})]}),s.jsx(OY,{}),s.jsx(MY,{})]})}const BY=[{id:1,name:"Chicken Breast",category:"Proteins",currentStock:11,parLevel:23,unit:"kg",supplier:"Fresh Farms Co",lastOrdered:"2024-08-18",status:"low"},{id:2,name:"Tomatoes",category:"Produce",currentStock:54,parLevel:45,unit:"kg",supplier:"Garden Fresh",lastOrdered:"2024-08-19",status:"good"},{id:3,name:"Olive Oil",category:"Pantry",currentStock:8,parLevel:12,unit:"litres",supplier:"Mediterranean Supply",lastOrdered:"2024-08-15",status:"reorder"},{id:4,name:"Rice",category:"Grains",currentStock:0,parLevel:11,unit:"kg",supplier:"Bulk Foods Inc",lastOrdered:"2024-08-10",status:"out"}],UY=[{item:"Chicken Breast",currentStock:11,parLevel:23,suggested:34},{item:"Olive Oil",currentStock:8,parLevel:12,suggested:15},{item:"Rice",currentStock:0,parLevel:11,suggested:23}];function $Y(){return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Inventory Management"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Track stock levels, manage suppliers, and automate reorders"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(ke,{variant:"outline",children:[s.jsx(i2,{className:"w-4 h-4 mr-2"}),"Export Data"]}),s.jsxs(ke,{variant:"hero",children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Add Item"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Gi,{title:"Total Items",value:"1,247",change:"+23 this week",changeType:"positive",icon:ki}),s.jsx(Gi,{title:"Low Stock Items",value:18,change:"Need attention",changeType:"negative",icon:es}),s.jsx(Gi,{title:"Out of Stock",value:4,change:"Critical items",changeType:"negative",icon:g_}),s.jsx(Gi,{title:"Reorder Value",value:"$2,340",change:"Pending approval",changeType:"neutral",icon:ki})]}),s.jsx("div",{className:"bg-card rounded-lg border shadow-card p-6",children:s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(_l,{className:"w-4 h-4 absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground"}),s.jsx(er,{placeholder:"Search inventory items...",className:"pl-10"})]}),s.jsxs("select",{className:"h-10 px-3 py-2 text-sm border border-input bg-background rounded-md",children:[s.jsx("option",{children:"All Categories"}),s.jsx("option",{children:"Proteins"}),s.jsx("option",{children:"Produce"}),s.jsx("option",{children:"Pantry"}),s.jsx("option",{children:"Grains"})]}),s.jsxs("select",{className:"h-10 px-3 py-2 text-sm border border-input bg-background rounded-md",children:[s.jsx("option",{children:"All Status"}),s.jsx("option",{children:"Good"}),s.jsx("option",{children:"Low Stock"}),s.jsx("option",{children:"Reorder"}),s.jsx("option",{children:"Out of Stock"})]}),s.jsxs(ke,{variant:"outline",children:[s.jsx(jc,{className:"w-4 h-4 mr-2"}),"More Filters"]})]})}),s.jsx(RE,{}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[s.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Current Inventory"}),s.jsx("div",{className:"space-y-4",children:BY.map(e=>s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-4 hover:shadow-card-hover transition-shadow",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("div",{children:[s.jsx("h4",{className:"font-medium",children:e.name}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.category,"  ",e.supplier]})]}),s.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${e.status==="good"?"bg-success/10 text-success":e.status==="low"?"bg-warning/10 text-warning":e.status==="reorder"?"bg-destructive/10 text-destructive":"bg-muted text-muted-foreground"}`,children:e.status==="out"?"OUT OF STOCK":e.status==="reorder"?"REORDER":e.status==="low"?"LOW STOCK":"IN STOCK"})]}),s.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-3",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Current Stock"}),s.jsxs("p",{className:"font-medium",children:[e.currentStock," ",e.unit]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Par Level"}),s.jsxs("p",{className:"font-medium",children:[e.parLevel," ",e.unit]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-xs text-muted-foreground",children:"Last Ordered"}),s.jsx("p",{className:"font-medium",children:new Date(e.lastOrdered).toLocaleDateString()})]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2 mb-3",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${e.status==="good"?"bg-success":e.status==="low"?"bg-warning":"bg-destructive"}`,style:{width:`${Math.max(e.currentStock/e.parLevel*100,5)}%`}})}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{variant:"outline",size:"sm",children:"Update Count"}),e.status==="reorder"||e.status==="out"?s.jsx(ke,{variant:"default",size:"sm",children:"Reorder Now"}):null]})]},e.id))})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Reorder Suggestions"}),s.jsx("div",{className:"space-y-3",children:UY.map((e,t)=>s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-4",children:[s.jsx("h4",{className:"font-medium mb-2",children:e.item}),s.jsxs("div",{className:"space-y-2 text-sm",children:[s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Current:"}),s.jsx("span",{children:e.currentStock})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Par Level:"}),s.jsx("span",{children:e.parLevel})]}),s.jsxs("div",{className:"flex justify-between",children:[s.jsx("span",{className:"text-muted-foreground",children:"Suggested:"}),s.jsx("span",{className:"font-medium text-primary",children:e.suggested})]})]}),s.jsx(ke,{variant:"default",size:"sm",className:"w-full mt-3",children:"Add to Order"})]},t))})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Quick Actions"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs(ke,{variant:"outline",className:"w-full justify-start",children:[s.jsx(ki,{className:"w-4 h-4 mr-2"}),"Bulk Update Counts"]}),s.jsxs(ke,{variant:"outline",className:"w-full justify-start",children:[s.jsx(g_,{className:"w-4 h-4 mr-2"}),"Generate Waste Report"]}),s.jsxs(ke,{variant:"outline",className:"w-full justify-start",children:[s.jsx(es,{className:"w-4 h-4 mr-2"}),"View Low Stock Alert"]}),s.jsxs(ke,{variant:"default",className:"w-full justify-start",children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Create Purchase Order"]})]})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h3",{className:"font-semibold mb-4",children:"Supplier Quick Contact"}),s.jsxs("div",{className:"space-y-3 text-sm",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Fresh Farms Co"}),s.jsx(ke,{variant:"ghost",size:"sm",children:"Call"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Garden Fresh"}),s.jsx(ke,{variant:"ghost",size:"sm",children:"Call"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Mediterranean Supply"}),s.jsx(ke,{variant:"ghost",size:"sm",children:"Call"})]})]})]})]})]})]})}const zY=[{category:"Label Compliance",current:98.5,target:95,trend:"+0.3%"},{category:"Temperature Logs",current:100,target:100,trend:"0%"},{category:"HACCP Checks",current:94.2,target:95,trend:"-1.2%"},{category:"Cleaning Schedule",current:89.5,target:90,trend:"+2.1%"}],qY=[{item:"Produce",amount:"20 kg",cost:"$89",reason:"Expiration"},{item:"Bread",amount:"12 loaves",cost:"$24",reason:"Overproduction"},{item:"Dairy",amount:"30 litres",cost:"$32",reason:"Temperature Issue"},{item:"Proteins",amount:"7 kg",cost:"$75",reason:"Quality Control"}];function VY(){return s.jsxs("div",{className:"space-y-8",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Analytics & Reports"}),s.jsx("p",{className:"text-muted-foreground mt-2",children:"Compliance tracking, operational insights, and performance metrics"})]}),s.jsxs("div",{className:"flex gap-3",children:[s.jsxs(ke,{variant:"outline",children:[s.jsx(Ya,{className:"w-4 h-4 mr-2"}),"Date Range"]}),s.jsxs(ke,{variant:"outline",children:[s.jsx(i2,{className:"w-4 h-4 mr-2"}),"Export Reports"]}),s.jsxs(ke,{variant:"hero",children:[s.jsx(Tu,{className:"w-4 h-4 mr-2"}),"Custom Report"]})]})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[s.jsx(Gi,{title:"Overall Compliance",value:"95.6%",change:"+1.2% from last month",changeType:"positive",icon:cl}),s.jsx(Gi,{title:"Failed Checks",value:7,change:"3 this week",changeType:"negative",icon:es}),s.jsx(Gi,{title:"Cost Savings",value:"$2,340",change:"vs last month",changeType:"positive",icon:Nh}),s.jsx(Gi,{title:"Efficiency Score",value:"87%",change:"+5% improvement",changeType:"positive",icon:ip})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Compliance Overview"}),s.jsx("p",{className:"text-muted-foreground text-sm",children:"Current period performance vs targets"})]}),s.jsxs(ke,{variant:"outline",size:"sm",children:[s.jsx(jc,{className:"w-4 h-4 mr-2"}),"Filter by Location"]})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:zY.map((e,t)=>s.jsxs("div",{className:"p-4 border rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsx("h4",{className:"font-medium text-sm",children:e.category}),s.jsx("span",{className:`text-xs font-medium ${e.current>=e.target?"text-success":"text-warning"}`,children:e.trend})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs("div",{className:"flex justify-between items-end",children:[s.jsxs("span",{className:"text-2xl font-bold",children:[e.current,"%"]}),s.jsxs("span",{className:"text-xs text-muted-foreground",children:["Target: ",e.target,"%"]})]}),s.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:s.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${e.current>=e.target?"bg-success":"bg-warning"}`,style:{width:`${Math.min(e.current,100)}%`}})})]})]},t))})]}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Performance Trends"}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-medium",children:"Weekly Label Compliance"}),s.jsx(ke,{variant:"outline",size:"sm",children:"View Details"})]}),s.jsx("div",{className:"h-48 bg-muted/20 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(ip,{className:"w-12 h-12 text-muted-foreground mx-auto mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"Chart showing weekly compliance trends"})]})})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsxs("div",{className:"flex items-center justify-between mb-4",children:[s.jsx("h4",{className:"font-medium",children:"Temperature Monitoring"}),s.jsx(ke,{variant:"outline",size:"sm",children:"View Details"})]}),s.jsx("div",{className:"h-48 bg-muted/20 rounded-lg flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(Nh,{className:"w-12 h-12 text-muted-foreground mx-auto mb-2"}),s.jsx("p",{className:"text-muted-foreground",children:"Temperature compliance over time"})]})})]})]}),s.jsxs("div",{className:"space-y-6",children:[s.jsx("h3",{className:"font-semibold text-lg",children:"Waste Analysis"}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"This Week's Waste"}),s.jsx("div",{className:"space-y-3",children:qY.map((e,t)=>s.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:e.item}),s.jsx("p",{className:"text-sm text-muted-foreground",children:e.reason})]}),s.jsxs("div",{className:"text-right",children:[s.jsx("p",{className:"font-medium",children:e.amount}),s.jsx("p",{className:"text-sm text-destructive",children:e.cost})]})]},t))}),s.jsx("div",{className:"mt-4 pt-4 border-t",children:s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{className:"font-medium",children:"Total Weekly Waste"}),s.jsx("span",{className:"font-bold text-destructive",children:"$220"})]})})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"Active Alerts"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4 text-warning"}),s.jsx("span",{className:"font-medium text-sm",children:"Temperature Alert"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Freezer #2 temperature slightly elevated"})]}),s.jsxs("div",{className:"p-3 bg-destructive/10 border border-destructive/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4 text-destructive"}),s.jsx("span",{className:"font-medium text-sm",children:"Compliance Issue"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Missing temperature log for lunch prep"})]}),s.jsxs("div",{className:"p-3 bg-warning/10 border border-warning/20 rounded-lg",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(es,{className:"w-4 h-4 text-warning"}),s.jsx("span",{className:"font-medium text-sm",children:"Inventory Alert"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Multiple items below par level"})]})]})]}),s.jsxs("div",{className:"bg-card rounded-lg border shadow-card p-6",children:[s.jsx("h4",{className:"font-medium mb-4",children:"Multi-Site Summary"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Main Kitchen"}),s.jsx("span",{className:"px-2 py-1 bg-success/10 text-success text-xs rounded-full",children:"95.8%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"East Location"}),s.jsx("span",{className:"px-2 py-1 bg-success/10 text-success text-xs rounded-full",children:"97.2%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"West Location"}),s.jsx("span",{className:"px-2 py-1 bg-warning/10 text-warning text-xs rounded-full",children:"89.5%"})]}),s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("span",{children:"Downtown Branch"}),s.jsx("span",{className:"px-2 py-1 bg-success/10 text-success text-xs rounded-full",children:"94.1%"})]})]})]})]})]})]})}const WY=[{icon:pk,title:"Smart Labeling",description:"Custom templates with auto-expiry calculations and QR codes for seamless traceability."},{icon:f0,title:"Kitchen Management",description:"Digital prep plans, timers, and HACCP compliance tools to streamline operations."},{icon:ki,title:"Inventory Control",description:"Real-time stock tracking with automated reorder suggestions and supplier management."},{icon:ip,title:"Analytics & Insights",description:"Comprehensive reporting on compliance, waste reduction, and operational efficiency."},{icon:ef,title:"HACCP Compliance",description:"Built-in food safety protocols with temperature logging and audit trails."},{icon:Ao,title:"Multi-Tenant Platform",description:"Enterprise-ready with role-based access and multi-location support."}],HY=["Reduce food waste by up to 30%","Improve compliance scores to 98%+","Save 4+ hours daily on paperwork","Real-time visibility across locations"],GY=()=>s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-muted/40",children:[s.jsx("header",{className:"border-b bg-card/80 backdrop-blur-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between h-16",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wp,{className:"w-12 h-12"}),s.jsx("h1",{className:"font-bold text-xl",children:"Tampa APP"})]}),s.jsx(ke,{variant:"hero",asChild:!0,children:s.jsxs("a",{href:"/auth",children:["Enter Platform",s.jsx(fh,{className:"w-4 h-4 ml-2"})]})})]})})}),s.jsx("section",{className:"relative py-20 overflow-hidden",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"text-center",children:[s.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-foreground mb-6",children:["The Complete Food Service",s.jsx("span",{className:"block bg-gradient-hero bg-clip-text text-transparent",children:"Management Platform"})]}),s.jsx("p",{className:"text-xl text-muted-foreground mb-8 max-w-3xl mx-auto",children:"Streamline operations, ensure compliance, and reduce waste with our comprehensive SaaS platform designed specifically for the food service industry."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(ke,{variant:"hero",size:"lg",asChild:!0,children:s.jsxs("a",{href:"/auth",children:["Start Free Trial",s.jsx(fh,{className:"w-5 h-5 ml-2"})]})}),s.jsx(ke,{variant:"outline",size:"lg",children:"Schedule Demo"})]})]})})}),s.jsx("section",{className:"py-16 bg-card/50",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsx("div",{className:"text-center mb-12",children:s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Proven Results for Food Service Operations"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:HY.map((e,t)=>s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(cl,{className:"w-6 h-6 text-success flex-shrink-0"}),s.jsx("span",{className:"font-medium",children:e})]},t))})]})}),s.jsx("section",{className:"py-20",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[s.jsxs("div",{className:"text-center mb-16",children:[s.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Everything You Need in One Platform"}),s.jsx("p",{className:"text-xl text-muted-foreground max-w-2xl mx-auto",children:"From labeling to analytics, our integrated solution covers every aspect of modern food service management."})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:WY.map((e,t)=>s.jsxs("div",{className:"bg-card rounded-lg border shadow-card hover:shadow-card-hover transition-shadow p-6",children:[s.jsx("div",{className:"w-12 h-12 bg-primary/10 rounded-lg flex items-center justify-center mb-4",children:s.jsx(e.icon,{className:"w-6 h-6 text-primary"})}),s.jsx("h3",{className:"font-semibold text-lg mb-3",children:e.title}),s.jsx("p",{className:"text-muted-foreground",children:e.description})]},t))})]})}),s.jsx("section",{className:"py-20 bg-gradient-hero",children:s.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[s.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-primary-foreground mb-6",children:"Ready to Transform Your Food Service Operations?"}),s.jsx("p",{className:"text-xl text-primary-foreground/90 mb-8 max-w-2xl mx-auto",children:"Join hundreds of restaurants, cafeterias, and food service providers who trust our platform for their daily operations."}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[s.jsx(ke,{variant:"secondary",size:"lg",asChild:!0,children:s.jsxs("a",{href:"/auth",children:["Access Dashboard",s.jsx(fh,{className:"w-5 h-5 ml-2"})]})}),s.jsx(ke,{variant:"outline",size:"lg",className:"bg-transparent border-primary-foreground text-primary-foreground hover:bg-primary-foreground hover:text-primary",children:"Contact Sales"})]})]})}),s.jsx("footer",{className:"border-t bg-card/80 backdrop-blur-sm py-12",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx(wp,{className:"w-12 h-12"}),s.jsx("span",{className:"font-bold text-lg",children:"Tampa APP"})]}),s.jsx("p",{className:"text-muted-foreground",children:" 2024 Tampa APP. Smart Food Safety & Kitchen Management."})]})})})]});var ry="Tabs",[KY]=Fs(ry,[Kh]),yT=Kh(),[YY,Tb]=KY(ry),xT=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,onValueChange:i,defaultValue:a,orientation:o="horizontal",dir:l,activationMode:d="automatic",...f}=e,h=rf(l),[p,v]=Yi({prop:n,onChange:i,defaultProp:a??"",caller:ry});return s.jsx(YY,{scope:r,baseId:Ms(),value:p,onValueChange:v,orientation:o,dir:h,activationMode:d,children:s.jsx(yt.div,{dir:h,"data-orientation":o,...f,ref:t})})});xT.displayName=ry;var wT="TabsList",bT=x.forwardRef((e,t)=>{const{__scopeTabs:r,loop:n=!0,...i}=e,a=Tb(wT,r),o=yT(r);return s.jsx(S2,{asChild:!0,...o,orientation:a.orientation,dir:a.dir,loop:n,children:s.jsx(yt.div,{role:"tablist","aria-orientation":a.orientation,...i,ref:t})})});bT.displayName=wT;var _T="TabsTrigger",NT=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,disabled:i=!1,...a}=e,o=Tb(_T,r),l=yT(r),d=kT(o.baseId,n),f=CT(o.baseId,n),h=n===o.value;return s.jsx(k2,{asChild:!0,...l,focusable:!i,active:h,children:s.jsx(yt.button,{type:"button",role:"tab","aria-selected":h,"aria-controls":f,"data-state":h?"active":"inactive","data-disabled":i?"":void 0,disabled:i,id:d,...a,ref:t,onMouseDown:lt(e.onMouseDown,p=>{!i&&p.button===0&&p.ctrlKey===!1?o.onValueChange(n):p.preventDefault()}),onKeyDown:lt(e.onKeyDown,p=>{[" ","Enter"].includes(p.key)&&o.onValueChange(n)}),onFocus:lt(e.onFocus,()=>{const p=o.activationMode!=="manual";!h&&!i&&p&&o.onValueChange(n)})})})});NT.displayName=_T;var jT="TabsContent",ST=x.forwardRef((e,t)=>{const{__scopeTabs:r,value:n,forceMount:i,children:a,...o}=e,l=Tb(jT,r),d=kT(l.baseId,n),f=CT(l.baseId,n),h=n===l.value,p=x.useRef(h);return x.useEffect(()=>{const v=requestAnimationFrame(()=>p.current=!1);return()=>cancelAnimationFrame(v)},[]),s.jsx(Bs,{present:i||h,children:({present:v})=>s.jsx(yt.div,{"data-state":h?"active":"inactive","data-orientation":l.orientation,role:"tabpanel","aria-labelledby":d,hidden:!v,id:f,tabIndex:0,...o,ref:t,style:{...e.style,animationDuration:p.current?"0s":void 0},children:v&&a})})});ST.displayName=jT;function kT(e,t){return`${e}-trigger-${t}`}function CT(e,t){return`${e}-content-${t}`}var QY=xT,ET=bT,AT=NT,PT=ST;const ny=QY,$p=x.forwardRef(({className:e,...t},r)=>s.jsx(ET,{ref:r,className:Me("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",e),...t}));$p.displayName=ET.displayName;const ja=x.forwardRef(({className:e,...t},r)=>s.jsx(AT,{ref:r,className:Me("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",e),...t}));ja.displayName=AT.displayName;const Sa=x.forwardRef(({className:e,...t},r)=>s.jsx(PT,{ref:r,className:Me("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",e),...t}));Sa.displayName=PT.displayName;const JY=()=>{const{user:e,signIn:t,signUp:r,loading:n}=Aa(),{toast:i}=qr(),[a,o]=x.useState(!1),[l,d]=x.useState(null);if(!n&&e)return s.jsx(b3,{to:"/",replace:!0});const f=async p=>{p.preventDefault(),o(!0),d(null);const v=new FormData(p.currentTarget),m=v.get("email"),j=v.get("password"),{error:w}=await t(m,j);w?(d(w.message),i({variant:"destructive",title:"Sign in failed",description:w.message})):i({title:"Welcome back!",description:"You have successfully signed in."}),o(!1)},h=async p=>{p.preventDefault(),o(!0),d(null);const v=new FormData(p.currentTarget),m=v.get("email"),j=v.get("password"),w=v.get("displayName"),{error:_}=await r(m,j,w);_?(d(_.message),i({variant:"destructive",title:"Sign up failed",description:_.message})):i({title:"Account created!",description:"Please check your email to verify your account."}),o(!1)};return n?s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-background via-muted/20 to-muted/40",children:s.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary"})}):s.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-background via-muted/20 to-muted/40",children:[s.jsx("header",{className:"border-b bg-card/80 backdrop-blur-sm",children:s.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:s.jsx("div",{className:"flex items-center h-16",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(wp,{className:"w-8 h-8"}),s.jsx("h1",{className:"font-bold text-xl",children:"Tampa APP"})]})})})}),s.jsx("div",{className:"flex items-center justify-center py-20 px-4",children:s.jsxs(it,{className:"w-full max-w-md shadow-card",children:[s.jsxs(sr,{className:"text-center space-y-2",children:[s.jsx("div",{className:"w-16 h-16 bg-gradient-primary rounded-lg flex items-center justify-center mx-auto",children:s.jsx(f0,{className:"w-8 h-8 text-primary-foreground"})}),s.jsx(pr,{className:"text-2xl",children:"Welcome to Tampa APP"}),s.jsx(xa,{children:"Sign in to your account or create a new one to get started"})]}),s.jsx(ot,{children:s.jsxs(ny,{defaultValue:"signin",className:"space-y-4",children:[s.jsxs($p,{className:"grid w-full grid-cols-2",children:[s.jsx(ja,{value:"signin",children:"Sign In"}),s.jsx(ja,{value:"signup",children:"Sign Up"})]}),l&&s.jsxs(So,{variant:"destructive",children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(ko,{children:l})]}),s.jsx(Sa,{value:"signin",className:"space-y-4",children:s.jsxs("form",{onSubmit:f,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"signin-email",children:"Email"}),s.jsx(er,{id:"signin-email",name:"email",type:"email",placeholder:"Enter your email",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"signin-password",children:"Password"}),s.jsx(er,{id:"signin-password",name:"password",type:"password",placeholder:"Enter your password",required:!0})]}),s.jsx(ke,{type:"submit",className:"w-full",disabled:a,children:a?"Signing in...":"Sign In"})]})}),s.jsx(Sa,{value:"signup",className:"space-y-4",children:s.jsxs("form",{onSubmit:h,className:"space-y-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"signup-name",children:"Display Name"}),s.jsx(er,{id:"signup-name",name:"displayName",type:"text",placeholder:"Enter your name",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"signup-email",children:"Email"}),s.jsx(er,{id:"signup-email",name:"email",type:"email",placeholder:"Enter your email",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"signup-password",children:"Password"}),s.jsx(er,{id:"signup-password",name:"password",type:"password",placeholder:"Create a password",required:!0,minLength:6})]}),s.jsx(ke,{type:"submit",className:"w-full",disabled:a,children:a?"Creating account...":"Create Account"})]})})]})})]})})]})},ZY=()=>{const e=tf();return x.useEffect(()=>{console.error("404 Error: User attempted to access non-existent route:",e.pathname)},[e.pathname]),s.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100",children:s.jsxs("div",{className:"text-center",children:[s.jsx("h1",{className:"text-4xl font-bold mb-4",children:"404"}),s.jsx("p",{className:"text-xl text-gray-600 mb-4",children:"Oops! Page not found"}),s.jsx("a",{href:"/",className:"text-blue-500 hover:text-blue-700 underline",children:"Return to Home"})]})})};var TT="Toggle",Rb=x.forwardRef((e,t)=>{const{pressed:r,defaultPressed:n,onPressedChange:i,...a}=e,[o,l]=Yi({prop:r,onChange:i,defaultProp:n??!1,caller:TT});return s.jsx(yt.button,{type:"button","aria-pressed":o,"data-state":o?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:lt(e.onClick,()=>{e.disabled||l(!o)})})});Rb.displayName=TT;var RT=Rb,Qu="ToggleGroup",[LT]=Fs(Qu,[Kh]),DT=Kh(),Lb=Ve.forwardRef((e,t)=>{const{type:r,...n}=e;if(r==="single"){const i=n;return s.jsx(XY,{...i,ref:t})}if(r==="multiple"){const i=n;return s.jsx(eQ,{...i,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Qu}\``)});Lb.displayName=Qu;var[IT,OT]=LT(Qu),XY=Ve.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...a}=e,[o,l]=Yi({prop:r,defaultProp:n??"",onChange:i,caller:Qu});return s.jsx(IT,{scope:e.__scopeToggleGroup,type:"single",value:Ve.useMemo(()=>o?[o]:[],[o]),onItemActivate:l,onItemDeactivate:Ve.useCallback(()=>l(""),[l]),children:s.jsx(MT,{...a,ref:t})})}),eQ=Ve.forwardRef((e,t)=>{const{value:r,defaultValue:n,onValueChange:i=()=>{},...a}=e,[o,l]=Yi({prop:r,defaultProp:n??[],onChange:i,caller:Qu}),d=Ve.useCallback(h=>l((p=[])=>[...p,h]),[l]),f=Ve.useCallback(h=>l((p=[])=>p.filter(v=>v!==h)),[l]);return s.jsx(IT,{scope:e.__scopeToggleGroup,type:"multiple",value:o,onItemActivate:d,onItemDeactivate:f,children:s.jsx(MT,{...a,ref:t})})});Lb.displayName=Qu;var[tQ,rQ]=LT(Qu),MT=Ve.forwardRef((e,t)=>{const{__scopeToggleGroup:r,disabled:n=!1,rovingFocus:i=!0,orientation:a,dir:o,loop:l=!0,...d}=e,f=DT(r),h=rf(o),p={role:"group",dir:h,...d};return s.jsx(tQ,{scope:r,rovingFocus:i,disabled:n,children:i?s.jsx(S2,{asChild:!0,...f,orientation:a,dir:h,loop:l,children:s.jsx(yt.div,{...p,ref:t})}):s.jsx(yt.div,{...p,ref:t})})}),Xv="ToggleGroupItem",FT=Ve.forwardRef((e,t)=>{const r=OT(Xv,e.__scopeToggleGroup),n=rQ(Xv,e.__scopeToggleGroup),i=DT(e.__scopeToggleGroup),a=r.value.includes(e.value),o=n.disabled||e.disabled,l={...e,pressed:a,disabled:o},d=Ve.useRef(null);return n.rovingFocus?s.jsx(k2,{asChild:!0,...i,focusable:!o,active:a,ref:d,children:s.jsx(GS,{...l,ref:t})}):s.jsx(GS,{...l,ref:t})});FT.displayName=Xv;var GS=Ve.forwardRef((e,t)=>{const{__scopeToggleGroup:r,value:n,...i}=e,a=OT(Xv,r),o={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?o:void 0;return s.jsx(Rb,{...l,...i,ref:t,onPressedChange:d=>{d?a.onItemActivate(n):a.onItemDeactivate(n)}})}),BT=Lb,UT=FT;const $T=zh("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),nQ=x.forwardRef(({className:e,variant:t,size:r,...n},i)=>s.jsx(RT,{ref:i,className:Me($T({variant:t,size:r,className:e})),...n}));nQ.displayName=RT.displayName;const zT=x.createContext({size:"default",variant:"default"}),qT=x.forwardRef(({className:e,variant:t,size:r,children:n,...i},a)=>s.jsx(BT,{ref:a,className:Me("flex items-center justify-center gap-1",e),...i,children:s.jsx(zT.Provider,{value:{variant:t,size:r},children:n})}));qT.displayName=BT.displayName;const $w=x.forwardRef(({className:e,children:t,variant:r,size:n,...i},a)=>{const o=x.useContext(zT);return s.jsx(UT,{ref:a,className:Me($T({variant:o.variant||r,size:o.size||n}),e),...i,children:t})});$w.displayName=UT.displayName;var zp=e=>e.type==="checkbox",Bd=e=>e instanceof Date,Wi=e=>e==null;const VT=e=>typeof e=="object";var ws=e=>!Wi(e)&&!Array.isArray(e)&&VT(e)&&!Bd(e),WT=e=>ws(e)&&e.target?zp(e.target)?e.target.checked:e.target.value:e,sQ=e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e,HT=(e,t)=>e.has(sQ(t)),iQ=e=>{const t=e.constructor&&e.constructor.prototype;return ws(t)&&t.hasOwnProperty("isPrototypeOf")},Db=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function Es(e){let t;const r=Array.isArray(e),n=typeof FileList<"u"?e instanceof FileList:!1;if(e instanceof Date)t=new Date(e);else if(!(Db&&(e instanceof Blob||n))&&(r||ws(e)))if(t=r?[]:Object.create(Object.getPrototypeOf(e)),!r&&!iQ(e))t=e;else for(const i in e)e.hasOwnProperty(i)&&(t[i]=Es(e[i]));else return e;return t}var sy=e=>/^\w*$/.test(e),Jn=e=>e===void 0,Ib=e=>Array.isArray(e)?e.filter(Boolean):[],Ob=e=>Ib(e.replace(/["|']|\]/g,"").split(/\.|\[/)),wt=(e,t,r)=>{if(!t||!ws(e))return r;const n=(sy(t)?[t]:Ob(t)).reduce((i,a)=>Wi(i)?i:i[a],e);return Jn(n)||n===e?Jn(e[t])?r:e[t]:n},va=e=>typeof e=="boolean",sn=(e,t,r)=>{let n=-1;const i=sy(t)?[t]:Ob(t),a=i.length,o=a-1;for(;++n<a;){const l=i[n];let d=r;if(n!==o){const f=e[l];d=ws(f)||Array.isArray(f)?f:isNaN(+i[n+1])?{}:[]}if(l==="__proto__"||l==="constructor"||l==="prototype")return;e[l]=d,e=e[l]}};const e0={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Co={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},uc={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},Mb=Ve.createContext(null);Mb.displayName="HookFormContext";const iy=()=>Ve.useContext(Mb),aQ=e=>{const{children:t,...r}=e;return Ve.createElement(Mb.Provider,{value:r},t)};var GT=(e,t,r,n=!0)=>{const i={defaultValues:t._defaultValues};for(const a in e)Object.defineProperty(i,a,{get:()=>{const o=a;return t._proxyFormState[o]!==Co.all&&(t._proxyFormState[o]=!n||Co.all),r&&(r[o]=!0),e[o]}});return i};const Fb=typeof window<"u"?Ve.useLayoutEffect:Ve.useEffect;function oQ(e){const t=iy(),{control:r=t.control,disabled:n,name:i,exact:a}=e||{},[o,l]=Ve.useState(r._formState),d=Ve.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return Fb(()=>r._subscribe({name:i,formState:d.current,exact:a,callback:f=>{!n&&l({...r._formState,...f})}}),[i,n,a]),Ve.useEffect(()=>{d.current.isValid&&r._setValid(!0)},[r]),Ve.useMemo(()=>GT(o,r,d.current,!1),[o,r])}var _a=e=>typeof e=="string",KT=(e,t,r,n,i)=>_a(e)?(n&&t.watch.add(e),wt(r,e,i)):Array.isArray(e)?e.map(a=>(n&&t.watch.add(a),wt(r,a))):(n&&(t.watchAll=!0),r),zw=e=>Wi(e)||!VT(e);function yc(e,t,r=new WeakSet){if(zw(e)||zw(t))return e===t;if(Bd(e)&&Bd(t))return e.getTime()===t.getTime();const n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;if(r.has(e)||r.has(t))return!0;r.add(e),r.add(t);for(const a of n){const o=e[a];if(!i.includes(a))return!1;if(a!=="ref"){const l=t[a];if(Bd(o)&&Bd(l)||ws(o)&&ws(l)||Array.isArray(o)&&Array.isArray(l)?!yc(o,l,r):o!==l)return!1}}return!0}function lQ(e){const t=iy(),{control:r=t.control,name:n,defaultValue:i,disabled:a,exact:o,compute:l}=e||{},d=Ve.useRef(i),f=Ve.useRef(l),h=Ve.useRef(void 0);f.current=l;const p=Ve.useMemo(()=>r._getWatch(n,d.current),[r,n]),[v,m]=Ve.useState(f.current?f.current(p):p);return Fb(()=>r._subscribe({name:n,formState:{values:!0},exact:o,callback:j=>{if(!a){const w=KT(n,r._names,j.values||r._formValues,!1,d.current);if(f.current){const _=f.current(w);yc(_,h.current)||(m(_),h.current=_)}else m(w)}}}),[r,a,n,o]),Ve.useEffect(()=>r._removeUnmounted()),v}function cQ(e){const t=iy(),{name:r,disabled:n,control:i=t.control,shouldUnregister:a,defaultValue:o}=e,l=HT(i._names.array,r),d=Ve.useMemo(()=>wt(i._formValues,r,wt(i._defaultValues,r,o)),[i,r,o]),f=lQ({control:i,name:r,defaultValue:d,exact:!0}),h=oQ({control:i,name:r,exact:!0}),p=Ve.useRef(e),v=Ve.useRef(void 0),m=Ve.useRef(i.register(r,{...e.rules,value:f,...va(e.disabled)?{disabled:e.disabled}:{}}));p.current=e;const j=Ve.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!wt(h.errors,r)},isDirty:{enumerable:!0,get:()=>!!wt(h.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!wt(h.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!wt(h.validatingFields,r)},error:{enumerable:!0,get:()=>wt(h.errors,r)}}),[h,r]),w=Ve.useCallback(k=>m.current.onChange({target:{value:WT(k),name:r},type:e0.CHANGE}),[r]),_=Ve.useCallback(()=>m.current.onBlur({target:{value:wt(i._formValues,r),name:r},type:e0.BLUR}),[r,i._formValues]),S=Ve.useCallback(k=>{const C=wt(i._fields,r);C&&k&&(C._f.ref={focus:()=>k.focus&&k.focus(),select:()=>k.select&&k.select(),setCustomValidity:D=>k.setCustomValidity(D),reportValidity:()=>k.reportValidity()})},[i._fields,r]),E=Ve.useMemo(()=>({name:r,value:f,...va(n)||h.disabled?{disabled:h.disabled||n}:{},onChange:w,onBlur:_,ref:S}),[r,n,h.disabled,w,_,S,f]);return Ve.useEffect(()=>{const k=i._options.shouldUnregister||a,C=v.current;C&&C!==r&&!l&&i.unregister(C),i.register(r,{...p.current.rules,...va(p.current.disabled)?{disabled:p.current.disabled}:{}});const D=(M,F)=>{const U=wt(i._fields,M);U&&U._f&&(U._f.mount=F)};if(D(r,!0),k){const M=Es(wt(i._options.defaultValues,r,p.current.defaultValue));sn(i._defaultValues,r,M),Jn(wt(i._formValues,r))&&sn(i._formValues,r,M)}return!l&&i.register(r),v.current=r,()=>{(l?k&&!i._state.action:k)?i.unregister(r):D(r,!1)}},[r,i,l,a]),Ve.useEffect(()=>{i._setDisabledField({disabled:n,name:r})},[n,r,i]),Ve.useMemo(()=>({field:E,formState:h,fieldState:j}),[E,h,j])}const uQ=e=>e.render(cQ(e));var YT=(e,t,r,n,i)=>t?{...r[e],types:{...r[e]&&r[e].types?r[e].types:{},[n]:i||!0}}:{},np=e=>Array.isArray(e)?e:[e],KS=()=>{let e=[];return{get observers(){return e},next:i=>{for(const a of e)a.next&&a.next(i)},subscribe:i=>(e.push(i),{unsubscribe:()=>{e=e.filter(a=>a!==i)}}),unsubscribe:()=>{e=[]}}};function QT(e,t){const r={};for(const n in e)if(e.hasOwnProperty(n)){const i=e[n],a=t[n];if(i&&ws(i)&&a){const o=QT(i,a);ws(o)&&(r[n]=o)}else e[n]&&(r[n]=a)}return r}var qi=e=>ws(e)&&!Object.keys(e).length,Bb=e=>e.type==="file",Eo=e=>typeof e=="function",t0=e=>{if(!Db)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},JT=e=>e.type==="select-multiple",Ub=e=>e.type==="radio",dQ=e=>Ub(e)||zp(e),S1=e=>t0(e)&&e.isConnected;function fQ(e,t){const r=t.slice(0,-1).length;let n=0;for(;n<r;)e=Jn(e)?n++:e[t[n++]];return e}function hQ(e){for(const t in e)if(e.hasOwnProperty(t)&&!Jn(e[t]))return!1;return!0}function gs(e,t){const r=Array.isArray(t)?t:sy(t)?[t]:Ob(t),n=r.length===1?e:fQ(e,r),i=r.length-1,a=r[i];return n&&delete n[a],i!==0&&(ws(n)&&qi(n)||Array.isArray(n)&&hQ(n))&&gs(e,r.slice(0,-1)),e}var mQ=e=>{for(const t in e)if(Eo(e[t]))return!0;return!1};function ZT(e){return Array.isArray(e)||ws(e)&&!mQ(e)}function qw(e,t={}){for(const r in e)ZT(e[r])?(t[r]=Array.isArray(e[r])?[]:{},qw(e[r],t[r])):Jn(e[r])||(t[r]=!0);return t}function oh(e,t,r){r||(r=qw(t));for(const n in e)ZT(e[n])?Jn(t)||zw(r[n])?r[n]=qw(e[n],Array.isArray(e[n])?[]:{}):oh(e[n],Wi(t)?{}:t[n],r[n]):r[n]=!yc(e[n],t[n]);return r}const YS={value:!1,isValid:!1},QS={value:!0,isValid:!0};var XT=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Jn(e[0].attributes.value)?Jn(e[0].value)||e[0].value===""?QS:{value:e[0].value,isValid:!0}:QS:YS}return YS},eR=(e,{valueAsNumber:t,valueAsDate:r,setValueAs:n})=>Jn(e)?e:t?e===""?NaN:e&&+e:r&&_a(e)?new Date(e):n?n(e):e;const JS={isValid:!1,value:null};var tR=e=>Array.isArray(e)?e.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,JS):JS;function ZS(e){const t=e.ref;return Bb(t)?t.files:Ub(t)?tR(e.refs).value:JT(t)?[...t.selectedOptions].map(({value:r})=>r):zp(t)?XT(e.refs).value:eR(Jn(t.value)?e.ref.value:t.value,e)}var pQ=(e,t,r,n)=>{const i={};for(const a of e){const o=wt(t,a);o&&sn(i,a,o._f)}return{criteriaMode:r,names:[...e],fields:i,shouldUseNativeValidation:n}},r0=e=>e instanceof RegExp,Um=e=>Jn(e)?e:r0(e)?e.source:ws(e)?r0(e.value)?e.value.source:e.value:e,XS=e=>({isOnSubmit:!e||e===Co.onSubmit,isOnBlur:e===Co.onBlur,isOnChange:e===Co.onChange,isOnAll:e===Co.all,isOnTouch:e===Co.onTouched});const e4="AsyncFunction";var gQ=e=>!!e&&!!e.validate&&!!(Eo(e.validate)&&e.validate.constructor.name===e4||ws(e.validate)&&Object.values(e.validate).find(t=>t.constructor.name===e4)),vQ=e=>e.mount&&(e.required||e.min||e.max||e.maxLength||e.minLength||e.pattern||e.validate),t4=(e,t,r)=>!r&&(t.watchAll||t.watch.has(e)||[...t.watch].some(n=>e.startsWith(n)&&/^\.\w+/.test(e.slice(n.length))));const sp=(e,t,r,n)=>{for(const i of r||Object.keys(e)){const a=wt(e,i);if(a){const{_f:o,...l}=a;if(o){if(o.refs&&o.refs[0]&&t(o.refs[0],i)&&!n)return!0;if(o.ref&&t(o.ref,o.name)&&!n)return!0;if(sp(l,t))break}else if(ws(l)&&sp(l,t))break}}};function r4(e,t,r){const n=wt(e,r);if(n||sy(r))return{error:n,name:r};const i=r.split(".");for(;i.length;){const a=i.join("."),o=wt(t,a),l=wt(e,a);if(o&&!Array.isArray(o)&&r!==a)return{name:r};if(l&&l.type)return{name:a,error:l};if(l&&l.root&&l.root.type)return{name:`${a}.root`,error:l.root};i.pop()}return{name:r}}var yQ=(e,t,r,n)=>{r(e);const{name:i,...a}=e;return qi(a)||Object.keys(a).length>=Object.keys(t).length||Object.keys(a).find(o=>t[o]===(!n||Co.all))},xQ=(e,t,r)=>!e||!t||e===t||np(e).some(n=>n&&(r?n===t:n.startsWith(t)||t.startsWith(n))),wQ=(e,t,r,n,i)=>i.isOnAll?!1:!r&&i.isOnTouch?!(t||e):(r?n.isOnBlur:i.isOnBlur)?!e:(r?n.isOnChange:i.isOnChange)?e:!0,bQ=(e,t)=>!Ib(wt(e,t)).length&&gs(e,t),_Q=(e,t,r)=>{const n=np(wt(e,r));return sn(n,"root",t[r]),sn(e,r,n),e};function n4(e,t,r="validate"){if(_a(e)||Array.isArray(e)&&e.every(_a)||va(e)&&!e)return{type:r,message:_a(e)?e:"",ref:t}}var Xf=e=>ws(e)&&!r0(e)?e:{value:e,message:""},s4=async(e,t,r,n,i,a)=>{const{ref:o,refs:l,required:d,maxLength:f,minLength:h,min:p,max:v,pattern:m,validate:j,name:w,valueAsNumber:_,mount:S}=e._f,E=wt(r,w);if(!S||t.has(w))return{};const k=l?l[0]:o,C=O=>{i&&k.reportValidity&&(k.setCustomValidity(va(O)?"":O||""),k.reportValidity())},D={},M=Ub(o),F=zp(o),U=M||F,I=(_||Bb(o))&&Jn(o.value)&&Jn(E)||t0(o)&&o.value===""||E===""||Array.isArray(E)&&!E.length,K=YT.bind(null,w,n,D),B=(O,z,q,ue=uc.maxLength,ie=uc.minLength)=>{const le=O?z:q;D[w]={type:O?ue:ie,message:le,ref:o,...K(O?ue:ie,le)}};if(a?!Array.isArray(E)||!E.length:d&&(!U&&(I||Wi(E))||va(E)&&!E||F&&!XT(l).isValid||M&&!tR(l).isValid)){const{value:O,message:z}=_a(d)?{value:!!d,message:d}:Xf(d);if(O&&(D[w]={type:uc.required,message:z,ref:k,...K(uc.required,z)},!n))return C(z),D}if(!I&&(!Wi(p)||!Wi(v))){let O,z;const q=Xf(v),ue=Xf(p);if(!Wi(E)&&!isNaN(E)){const ie=o.valueAsNumber||E&&+E;Wi(q.value)||(O=ie>q.value),Wi(ue.value)||(z=ie<ue.value)}else{const ie=o.valueAsDate||new Date(E),le=xe=>new Date(new Date().toDateString()+" "+xe),G=o.type=="time",se=o.type=="week";_a(q.value)&&E&&(O=G?le(E)>le(q.value):se?E>q.value:ie>new Date(q.value)),_a(ue.value)&&E&&(z=G?le(E)<le(ue.value):se?E<ue.value:ie<new Date(ue.value))}if((O||z)&&(B(!!O,q.message,ue.message,uc.max,uc.min),!n))return C(D[w].message),D}if((f||h)&&!I&&(_a(E)||a&&Array.isArray(E))){const O=Xf(f),z=Xf(h),q=!Wi(O.value)&&E.length>+O.value,ue=!Wi(z.value)&&E.length<+z.value;if((q||ue)&&(B(q,O.message,z.message),!n))return C(D[w].message),D}if(m&&!I&&_a(E)){const{value:O,message:z}=Xf(m);if(r0(O)&&!E.match(O)&&(D[w]={type:uc.pattern,message:z,ref:o,...K(uc.pattern,z)},!n))return C(z),D}if(j){if(Eo(j)){const O=await j(E,r),z=n4(O,k);if(z&&(D[w]={...z,...K(uc.validate,z.message)},!n))return C(z.message),D}else if(ws(j)){let O={};for(const z in j){if(!qi(O)&&!n)break;const q=n4(await j[z](E,r),k,z);q&&(O={...q,...K(z,q.message)},C(q.message),n&&(D[w]=O))}if(!qi(O)&&(D[w]={ref:k,...O},!n))return D}}return C(!0),D};const NQ={mode:Co.onSubmit,reValidateMode:Co.onChange,shouldFocusError:!0};function jQ(e={}){let t={...NQ,...e},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Eo(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},n={},i=ws(t.defaultValues)||ws(t.values)?Es(t.defaultValues||t.values)||{}:{},a=t.shouldUnregister?{}:Es(i),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},d,f=0;const h={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let p={...h};const v={array:KS(),state:KS()},m=t.criteriaMode===Co.all,j=me=>ye=>{clearTimeout(f),f=setTimeout(me,ye)},w=async me=>{if(!t.disabled&&(h.isValid||p.isValid||me)){const ye=t.resolver?qi((await F()).errors):await I(n,!0);ye!==r.isValid&&v.state.next({isValid:ye})}},_=(me,ye)=>{!t.disabled&&(h.isValidating||h.validatingFields||p.isValidating||p.validatingFields)&&((me||Array.from(l.mount)).forEach(Ce=>{Ce&&(ye?sn(r.validatingFields,Ce,ye):gs(r.validatingFields,Ce))}),v.state.next({validatingFields:r.validatingFields,isValidating:!qi(r.validatingFields)}))},S=(me,ye=[],Ce,Ue,Je=!0,He=!0)=>{if(Ue&&Ce&&!t.disabled){if(o.action=!0,He&&Array.isArray(wt(n,me))){const Ze=Ce(wt(n,me),Ue.argA,Ue.argB);Je&&sn(n,me,Ze)}if(He&&Array.isArray(wt(r.errors,me))){const Ze=Ce(wt(r.errors,me),Ue.argA,Ue.argB);Je&&sn(r.errors,me,Ze),bQ(r.errors,me)}if((h.touchedFields||p.touchedFields)&&He&&Array.isArray(wt(r.touchedFields,me))){const Ze=Ce(wt(r.touchedFields,me),Ue.argA,Ue.argB);Je&&sn(r.touchedFields,me,Ze)}(h.dirtyFields||p.dirtyFields)&&(r.dirtyFields=oh(i,a)),v.state.next({name:me,isDirty:B(me,ye),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else sn(a,me,ye)},E=(me,ye)=>{sn(r.errors,me,ye),v.state.next({errors:r.errors})},k=me=>{r.errors=me,v.state.next({errors:r.errors,isValid:!1})},C=(me,ye,Ce,Ue)=>{const Je=wt(n,me);if(Je){const He=wt(a,me,Jn(Ce)?wt(i,me):Ce);Jn(He)||Ue&&Ue.defaultChecked||ye?sn(a,me,ye?He:ZS(Je._f)):q(me,He),o.mount&&w()}},D=(me,ye,Ce,Ue,Je)=>{let He=!1,Ze=!1;const ft={name:me};if(!t.disabled){if(!Ce||Ue){(h.isDirty||p.isDirty)&&(Ze=r.isDirty,r.isDirty=ft.isDirty=B(),He=Ze!==ft.isDirty);const bt=yc(wt(i,me),ye);Ze=!!wt(r.dirtyFields,me),bt?gs(r.dirtyFields,me):sn(r.dirtyFields,me,!0),ft.dirtyFields=r.dirtyFields,He=He||(h.dirtyFields||p.dirtyFields)&&Ze!==!bt}if(Ce){const bt=wt(r.touchedFields,me);bt||(sn(r.touchedFields,me,Ce),ft.touchedFields=r.touchedFields,He=He||(h.touchedFields||p.touchedFields)&&bt!==Ce)}He&&Je&&v.state.next(ft)}return He?ft:{}},M=(me,ye,Ce,Ue)=>{const Je=wt(r.errors,me),He=(h.isValid||p.isValid)&&va(ye)&&r.isValid!==ye;if(t.delayError&&Ce?(d=j(()=>E(me,Ce)),d(t.delayError)):(clearTimeout(f),d=null,Ce?sn(r.errors,me,Ce):gs(r.errors,me)),(Ce?!yc(Je,Ce):Je)||!qi(Ue)||He){const Ze={...Ue,...He&&va(ye)?{isValid:ye}:{},errors:r.errors,name:me};r={...r,...Ze},v.state.next(Ze)}},F=async me=>{_(me,!0);const ye=await t.resolver(a,t.context,pQ(me||l.mount,n,t.criteriaMode,t.shouldUseNativeValidation));return _(me),ye},U=async me=>{const{errors:ye}=await F(me);if(me)for(const Ce of me){const Ue=wt(ye,Ce);Ue?sn(r.errors,Ce,Ue):gs(r.errors,Ce)}else r.errors=ye;return ye},I=async(me,ye,Ce={valid:!0})=>{for(const Ue in me){const Je=me[Ue];if(Je){const{_f:He,...Ze}=Je;if(He){const ft=l.array.has(He.name),bt=Je._f&&gQ(Je._f);bt&&h.validatingFields&&_([He.name],!0);const gt=await s4(Je,l.disabled,a,m,t.shouldUseNativeValidation&&!ye,ft);if(bt&&h.validatingFields&&_([He.name]),gt[He.name]&&(Ce.valid=!1,ye))break;!ye&&(wt(gt,He.name)?ft?_Q(r.errors,gt,He.name):sn(r.errors,He.name,gt[He.name]):gs(r.errors,He.name))}!qi(Ze)&&await I(Ze,ye,Ce)}}return Ce.valid},K=()=>{for(const me of l.unMount){const ye=wt(n,me);ye&&(ye._f.refs?ye._f.refs.every(Ce=>!S1(Ce)):!S1(ye._f.ref))&&X(me)}l.unMount=new Set},B=(me,ye)=>!t.disabled&&(me&&ye&&sn(a,me,ye),!yc(xe(),i)),O=(me,ye,Ce)=>KT(me,l,{...o.mount?a:Jn(ye)?i:_a(me)?{[me]:ye}:ye},Ce,ye),z=me=>Ib(wt(o.mount?a:i,me,t.shouldUnregister?wt(i,me,[]):[])),q=(me,ye,Ce={})=>{const Ue=wt(n,me);let Je=ye;if(Ue){const He=Ue._f;He&&(!He.disabled&&sn(a,me,eR(ye,He)),Je=t0(He.ref)&&Wi(ye)?"":ye,JT(He.ref)?[...He.ref.options].forEach(Ze=>Ze.selected=Je.includes(Ze.value)):He.refs?zp(He.ref)?He.refs.forEach(Ze=>{(!Ze.defaultChecked||!Ze.disabled)&&(Array.isArray(Je)?Ze.checked=!!Je.find(ft=>ft===Ze.value):Ze.checked=Je===Ze.value||!!Je)}):He.refs.forEach(Ze=>Ze.checked=Ze.value===Je):Bb(He.ref)?He.ref.value="":(He.ref.value=Je,He.ref.type||v.state.next({name:me,values:Es(a)})))}(Ce.shouldDirty||Ce.shouldTouch)&&D(me,Je,Ce.shouldTouch,Ce.shouldDirty,!0),Ce.shouldValidate&&se(me)},ue=(me,ye,Ce)=>{for(const Ue in ye){if(!ye.hasOwnProperty(Ue))return;const Je=ye[Ue],He=me+"."+Ue,Ze=wt(n,He);(l.array.has(me)||ws(Je)||Ze&&!Ze._f)&&!Bd(Je)?ue(He,Je,Ce):q(He,Je,Ce)}},ie=(me,ye,Ce={})=>{const Ue=wt(n,me),Je=l.array.has(me),He=Es(ye);sn(a,me,He),Je?(v.array.next({name:me,values:Es(a)}),(h.isDirty||h.dirtyFields||p.isDirty||p.dirtyFields)&&Ce.shouldDirty&&v.state.next({name:me,dirtyFields:oh(i,a),isDirty:B(me,He)})):Ue&&!Ue._f&&!Wi(He)?ue(me,He,Ce):q(me,He,Ce),t4(me,l)&&v.state.next({...r,name:me}),v.state.next({name:o.mount?me:void 0,values:Es(a)})},le=async me=>{o.mount=!0;const ye=me.target;let Ce=ye.name,Ue=!0;const Je=wt(n,Ce),He=bt=>{Ue=Number.isNaN(bt)||Bd(bt)&&isNaN(bt.getTime())||yc(bt,wt(a,Ce,bt))},Ze=XS(t.mode),ft=XS(t.reValidateMode);if(Je){let bt,gt;const $t=ye.type?ZS(Je._f):WT(me),xt=me.type===e0.BLUR||me.type===e0.FOCUS_OUT,Yr=!vQ(Je._f)&&!t.resolver&&!wt(r.errors,Ce)&&!Je._f.deps||wQ(xt,wt(r.touchedFields,Ce),r.isSubmitted,ft,Ze),ur=t4(Ce,l,xt);sn(a,Ce,$t),xt?(!ye||!ye.readOnly)&&(Je._f.onBlur&&Je._f.onBlur(me),d&&d(0)):Je._f.onChange&&Je._f.onChange(me);const Gt=D(Ce,$t,xt),ir=!qi(Gt)||ur;if(!xt&&v.state.next({name:Ce,type:me.type,values:Es(a)}),Yr)return(h.isValid||p.isValid)&&(t.mode==="onBlur"?xt&&w():xt||w()),ir&&v.state.next({name:Ce,...ur?{}:Gt});if(!xt&&ur&&v.state.next({...r}),t.resolver){const{errors:Nr}=await F([Ce]);if(He($t),Ue){const Be=r4(r.errors,n,Ce),rr=r4(Nr,n,Be.name||Ce);bt=rr.error,Ce=rr.name,gt=qi(Nr)}}else _([Ce],!0),bt=(await s4(Je,l.disabled,a,m,t.shouldUseNativeValidation))[Ce],_([Ce]),He($t),Ue&&(bt?gt=!1:(h.isValid||p.isValid)&&(gt=await I(n,!0)));Ue&&(Je._f.deps&&(!Array.isArray(Je._f.deps)||Je._f.deps.length>0)&&se(Je._f.deps),M(Ce,gt,bt,Gt))}},G=(me,ye)=>{if(wt(r.errors,ye)&&me.focus)return me.focus(),1},se=async(me,ye={})=>{let Ce,Ue;const Je=np(me);if(t.resolver){const He=await U(Jn(me)?me:Je);Ce=qi(He),Ue=me?!Je.some(Ze=>wt(He,Ze)):Ce}else me?(Ue=(await Promise.all(Je.map(async He=>{const Ze=wt(n,He);return await I(Ze&&Ze._f?{[He]:Ze}:Ze)}))).every(Boolean),!(!Ue&&!r.isValid)&&w()):Ue=Ce=await I(n);return v.state.next({...!_a(me)||(h.isValid||p.isValid)&&Ce!==r.isValid?{}:{name:me},...t.resolver||!me?{isValid:Ce}:{},errors:r.errors}),ye.shouldFocus&&!Ue&&sp(n,G,me?Je:l.mount),Ue},xe=(me,ye)=>{let Ce={...o.mount?a:i};return ye&&(Ce=QT(ye.dirtyFields?r.dirtyFields:r.touchedFields,Ce)),Jn(me)?Ce:_a(me)?wt(Ce,me):me.map(Ue=>wt(Ce,Ue))},te=(me,ye)=>({invalid:!!wt((ye||r).errors,me),isDirty:!!wt((ye||r).dirtyFields,me),error:wt((ye||r).errors,me),isValidating:!!wt(r.validatingFields,me),isTouched:!!wt((ye||r).touchedFields,me)}),R=me=>{me&&np(me).forEach(ye=>gs(r.errors,ye)),v.state.next({errors:me?r.errors:{}})},V=(me,ye,Ce)=>{const Ue=(wt(n,me,{_f:{}})._f||{}).ref,Je=wt(r.errors,me)||{},{ref:He,message:Ze,type:ft,...bt}=Je;sn(r.errors,me,{...bt,...ye,ref:Ue}),v.state.next({name:me,errors:r.errors,isValid:!1}),Ce&&Ce.shouldFocus&&Ue&&Ue.focus&&Ue.focus()},Q=(me,ye)=>Eo(me)?v.state.subscribe({next:Ce=>"values"in Ce&&me(O(void 0,ye),Ce)}):O(me,ye,!0),re=me=>v.state.subscribe({next:ye=>{xQ(me.name,ye.name,me.exact)&&yQ(ye,me.formState||h,jt,me.reRenderRoot)&&me.callback({values:{...a},...r,...ye,defaultValues:i})}}).unsubscribe,Z=me=>(o.mount=!0,p={...p,...me.formState},re({...me,formState:p})),X=(me,ye={})=>{for(const Ce of me?np(me):l.mount)l.mount.delete(Ce),l.array.delete(Ce),ye.keepValue||(gs(n,Ce),gs(a,Ce)),!ye.keepError&&gs(r.errors,Ce),!ye.keepDirty&&gs(r.dirtyFields,Ce),!ye.keepTouched&&gs(r.touchedFields,Ce),!ye.keepIsValidating&&gs(r.validatingFields,Ce),!t.shouldUnregister&&!ye.keepDefaultValue&&gs(i,Ce);v.state.next({values:Es(a)}),v.state.next({...r,...ye.keepDirty?{isDirty:B()}:{}}),!ye.keepIsValid&&w()},pe=({disabled:me,name:ye})=>{(va(me)&&o.mount||me||l.disabled.has(ye))&&(me?l.disabled.add(ye):l.disabled.delete(ye))},ce=(me,ye={})=>{let Ce=wt(n,me);const Ue=va(ye.disabled)||va(t.disabled);return sn(n,me,{...Ce||{},_f:{...Ce&&Ce._f?Ce._f:{ref:{name:me}},name:me,mount:!0,...ye}}),l.mount.add(me),Ce?pe({disabled:va(ye.disabled)?ye.disabled:t.disabled,name:me}):C(me,!0,ye.value),{...Ue?{disabled:ye.disabled||t.disabled}:{},...t.progressive?{required:!!ye.required,min:Um(ye.min),max:Um(ye.max),minLength:Um(ye.minLength),maxLength:Um(ye.maxLength),pattern:Um(ye.pattern)}:{},name:me,onChange:le,onBlur:le,ref:Je=>{if(Je){ce(me,ye),Ce=wt(n,me);const He=Jn(Je.value)&&Je.querySelectorAll&&Je.querySelectorAll("input,select,textarea")[0]||Je,Ze=dQ(He),ft=Ce._f.refs||[];if(Ze?ft.find(bt=>bt===He):He===Ce._f.ref)return;sn(n,me,{_f:{...Ce._f,...Ze?{refs:[...ft.filter(S1),He,...Array.isArray(wt(i,me))?[{}]:[]],ref:{type:He.type,name:me}}:{ref:He}}}),C(me,!1,void 0,He)}else Ce=wt(n,me,{}),Ce._f&&(Ce._f.mount=!1),(t.shouldUnregister||ye.shouldUnregister)&&!(HT(l.array,me)&&o.action)&&l.unMount.add(me)}}},we=()=>t.shouldFocusError&&sp(n,G,l.mount),Pe=me=>{va(me)&&(v.state.next({disabled:me}),sp(n,(ye,Ce)=>{const Ue=wt(n,Ce);Ue&&(ye.disabled=Ue._f.disabled||me,Array.isArray(Ue._f.refs)&&Ue._f.refs.forEach(Je=>{Je.disabled=Ue._f.disabled||me}))},0,!1))},ze=(me,ye)=>async Ce=>{let Ue;Ce&&(Ce.preventDefault&&Ce.preventDefault(),Ce.persist&&Ce.persist());let Je=Es(a);if(v.state.next({isSubmitting:!0}),t.resolver){const{errors:He,values:Ze}=await F();r.errors=He,Je=Es(Ze)}else await I(n);if(l.disabled.size)for(const He of l.disabled)gs(Je,He);if(gs(r.errors,"root"),qi(r.errors)){v.state.next({errors:{}});try{await me(Je,Ce)}catch(He){Ue=He}}else ye&&await ye({...r.errors},Ce),we(),setTimeout(we);if(v.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:qi(r.errors)&&!Ue,submitCount:r.submitCount+1,errors:r.errors}),Ue)throw Ue},ve=(me,ye={})=>{wt(n,me)&&(Jn(ye.defaultValue)?ie(me,Es(wt(i,me))):(ie(me,ye.defaultValue),sn(i,me,Es(ye.defaultValue))),ye.keepTouched||gs(r.touchedFields,me),ye.keepDirty||(gs(r.dirtyFields,me),r.isDirty=ye.defaultValue?B(me,Es(wt(i,me))):B()),ye.keepError||(gs(r.errors,me),h.isValid&&w()),v.state.next({...r}))},qe=(me,ye={})=>{const Ce=me?Es(me):i,Ue=Es(Ce),Je=qi(me),He=Je?i:Ue;if(ye.keepDefaultValues||(i=Ce),!ye.keepValues){if(ye.keepDirtyValues){const Ze=new Set([...l.mount,...Object.keys(oh(i,a))]);for(const ft of Array.from(Ze))wt(r.dirtyFields,ft)?sn(He,ft,wt(a,ft)):ie(ft,wt(He,ft))}else{if(Db&&Jn(me))for(const Ze of l.mount){const ft=wt(n,Ze);if(ft&&ft._f){const bt=Array.isArray(ft._f.refs)?ft._f.refs[0]:ft._f.ref;if(t0(bt)){const gt=bt.closest("form");if(gt){gt.reset();break}}}}if(ye.keepFieldsRef)for(const Ze of l.mount)ie(Ze,wt(He,Ze));else n={}}a=t.shouldUnregister?ye.keepDefaultValues?Es(i):{}:Es(He),v.array.next({values:{...He}}),v.state.next({values:{...He}})}l={mount:ye.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!h.isValid||!!ye.keepIsValid||!!ye.keepDirtyValues,o.watch=!!t.shouldUnregister,v.state.next({submitCount:ye.keepSubmitCount?r.submitCount:0,isDirty:Je?!1:ye.keepDirty?r.isDirty:!!(ye.keepDefaultValues&&!yc(me,i)),isSubmitted:ye.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:Je?{}:ye.keepDirtyValues?ye.keepDefaultValues&&a?oh(i,a):r.dirtyFields:ye.keepDefaultValues&&me?oh(i,me):ye.keepDirty?r.dirtyFields:{},touchedFields:ye.keepTouched?r.touchedFields:{},errors:ye.keepErrors?r.errors:{},isSubmitSuccessful:ye.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:i})},ne=(me,ye)=>qe(Eo(me)?me(a):me,ye),tt=(me,ye={})=>{const Ce=wt(n,me),Ue=Ce&&Ce._f;if(Ue){const Je=Ue.refs?Ue.refs[0]:Ue.ref;Je.focus&&(Je.focus(),ye.shouldSelect&&Eo(Je.select)&&Je.select())}},jt=me=>{r={...r,...me}},Xe={control:{register:ce,unregister:X,getFieldState:te,handleSubmit:ze,setError:V,_subscribe:re,_runSchema:F,_focusError:we,_getWatch:O,_getDirty:B,_setValid:w,_setFieldArray:S,_setDisabledField:pe,_setErrors:k,_getFieldArray:z,_reset:qe,_resetDefaultValues:()=>Eo(t.defaultValues)&&t.defaultValues().then(me=>{ne(me,t.resetOptions),v.state.next({isLoading:!1})}),_removeUnmounted:K,_disableForm:Pe,_subjects:v,_proxyFormState:h,get _fields(){return n},get _formValues(){return a},get _state(){return o},set _state(me){o=me},get _defaultValues(){return i},get _names(){return l},set _names(me){l=me},get _formState(){return r},get _options(){return t},set _options(me){t={...t,...me}}},subscribe:Z,trigger:se,register:ce,handleSubmit:ze,watch:Q,setValue:ie,getValues:xe,reset:ne,resetField:ve,clearErrors:R,unregister:X,setError:V,setFocus:tt,getFieldState:te};return{...Xe,formControl:Xe}}function SQ(e={}){const t=Ve.useRef(void 0),r=Ve.useRef(void 0),[n,i]=Ve.useState({isDirty:!1,isValidating:!1,isLoading:Eo(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Eo(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current={...e.formControl,formState:n},e.defaultValues&&!Eo(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const{formControl:o,...l}=jQ(e);t.current={...l,formState:n}}const a=t.current.control;return a._options=e,Fb(()=>{const o=a._subscribe({formState:a._proxyFormState,callback:()=>i({...a._formState}),reRenderRoot:!0});return i(l=>({...l,isReady:!0})),a._formState.isReady=!0,o},[a]),Ve.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),Ve.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),Ve.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),Ve.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),Ve.useEffect(()=>{if(a._proxyFormState.isDirty){const o=a._getDirty();o!==n.isDirty&&a._subjects.state.next({isDirty:o})}},[a,n.isDirty]),Ve.useEffect(()=>{e.values&&!yc(e.values,r.current)?(a._reset(e.values,{keepFieldsRef:!0,...a._options.resetOptions}),r.current=e.values,i(o=>({...o}))):a._resetDefaultValues()},[a,e.values]),Ve.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next({...a._formState})),a._removeUnmounted()}),t.current.formState=GT(n,a),t.current}const i4=(e,t,r)=>{if(e&&"reportValidity"in e){const n=wt(r,t);e.setCustomValidity(n&&n.message||""),e.reportValidity()}},rR=(e,t)=>{for(const r in t.fields){const n=t.fields[r];n&&n.ref&&"reportValidity"in n.ref?i4(n.ref,r,e):n.refs&&n.refs.forEach(i=>i4(i,r,e))}},kQ=(e,t)=>{t.shouldUseNativeValidation&&rR(e,t);const r={};for(const n in e){const i=wt(t.fields,n),a=Object.assign(e[n]||{},{ref:i&&i.ref});if(CQ(t.names||Object.keys(e),n)){const o=Object.assign({},wt(r,n));sn(o,"root",a),sn(r,n,o)}else sn(r,n,a)}return r},CQ=(e,t)=>e.some(r=>r.startsWith(t+"."));var EQ=function(e,t){for(var r={};e.length;){var n=e[0],i=n.code,a=n.message,o=n.path.join(".");if(!r[o])if("unionErrors"in n){var l=n.unionErrors[0].errors[0];r[o]={message:l.message,type:l.code}}else r[o]={message:a,type:i};if("unionErrors"in n&&n.unionErrors.forEach(function(h){return h.errors.forEach(function(p){return e.push(p)})}),t){var d=r[o].types,f=d&&d[n.code];r[o]=YT(o,t,r,i,f?[].concat(f,n.message):n.message)}e.shift()}return r},AQ=function(e,t,r){return r===void 0&&(r={}),function(n,i,a){try{return Promise.resolve((function(o,l){try{var d=Promise.resolve(e[r.mode==="sync"?"parse":"parseAsync"](n,t)).then(function(f){return a.shouldUseNativeValidation&&rR({},a),{errors:{},values:r.raw?n:f}})}catch(f){return l(f)}return d&&d.then?d.then(void 0,l):d})(0,function(o){if((function(l){return Array.isArray(l?.errors)})(o))return{values:{},errors:kQ(EQ(o.errors,!a.shouldUseNativeValidation&&a.criteriaMode==="all"),a)};throw o}))}catch(o){return Promise.reject(o)}}},Gr;(function(e){e.assertEqual=i=>{};function t(i){}e.assertIs=t;function r(i){throw new Error}e.assertNever=r,e.arrayToEnum=i=>{const a={};for(const o of i)a[o]=o;return a},e.getValidEnumValues=i=>{const a=e.objectKeys(i).filter(l=>typeof i[i[l]]!="number"),o={};for(const l of a)o[l]=i[l];return e.objectValues(o)},e.objectValues=i=>e.objectKeys(i).map(function(a){return i[a]}),e.objectKeys=typeof Object.keys=="function"?i=>Object.keys(i):i=>{const a=[];for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&a.push(o);return a},e.find=(i,a)=>{for(const o of i)if(a(o))return o},e.isInteger=typeof Number.isInteger=="function"?i=>Number.isInteger(i):i=>typeof i=="number"&&Number.isFinite(i)&&Math.floor(i)===i;function n(i,a=" | "){return i.map(o=>typeof o=="string"?`'${o}'`:o).join(a)}e.joinValues=n,e.jsonStringifyReplacer=(i,a)=>typeof a=="bigint"?a.toString():a})(Gr||(Gr={}));var a4;(function(e){e.mergeShapes=(t,r)=>({...t,...r})})(a4||(a4={}));const Mt=Gr.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),_u=e=>{switch(typeof e){case"undefined":return Mt.undefined;case"string":return Mt.string;case"number":return Number.isNaN(e)?Mt.nan:Mt.number;case"boolean":return Mt.boolean;case"function":return Mt.function;case"bigint":return Mt.bigint;case"symbol":return Mt.symbol;case"object":return Array.isArray(e)?Mt.array:e===null?Mt.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?Mt.promise:typeof Map<"u"&&e instanceof Map?Mt.map:typeof Set<"u"&&e instanceof Set?Mt.set:typeof Date<"u"&&e instanceof Date?Mt.date:Mt.object;default:return Mt.unknown}},dt=Gr.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class Ec extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(a){return a.message},n={_errors:[]},i=a=>{for(const o of a.issues)if(o.code==="invalid_union")o.unionErrors.map(i);else if(o.code==="invalid_return_type")i(o.returnTypeError);else if(o.code==="invalid_arguments")i(o.argumentsError);else if(o.path.length===0)n._errors.push(r(o));else{let l=n,d=0;for(;d<o.path.length;){const f=o.path[d];d===o.path.length-1?(l[f]=l[f]||{_errors:[]},l[f]._errors.push(r(o))):l[f]=l[f]||{_errors:[]},l=l[f],d++}}};return i(this),n}static assert(t){if(!(t instanceof Ec))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,Gr.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},n=[];for(const i of this.issues)if(i.path.length>0){const a=i.path[0];r[a]=r[a]||[],r[a].push(t(i))}else n.push(t(i));return{formErrors:n,fieldErrors:r}}get formErrors(){return this.flatten()}}Ec.create=e=>new Ec(e);const Vw=(e,t)=>{let r;switch(e.code){case dt.invalid_type:e.received===Mt.undefined?r="Required":r=`Expected ${e.expected}, received ${e.received}`;break;case dt.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(e.expected,Gr.jsonStringifyReplacer)}`;break;case dt.unrecognized_keys:r=`Unrecognized key(s) in object: ${Gr.joinValues(e.keys,", ")}`;break;case dt.invalid_union:r="Invalid input";break;case dt.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${Gr.joinValues(e.options)}`;break;case dt.invalid_enum_value:r=`Invalid enum value. Expected ${Gr.joinValues(e.options)}, received '${e.received}'`;break;case dt.invalid_arguments:r="Invalid function arguments";break;case dt.invalid_return_type:r="Invalid function return type";break;case dt.invalid_date:r="Invalid date";break;case dt.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(r=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?r=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?r=`Invalid input: must end with "${e.validation.endsWith}"`:Gr.assertNever(e.validation):e.validation!=="regex"?r=`Invalid ${e.validation}`:r="Invalid";break;case dt.too_small:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="bigint"?r=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:r="Invalid input";break;case dt.too_big:e.type==="array"?r=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?r=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?r=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?r=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?r=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:r="Invalid input";break;case dt.custom:r="Invalid input";break;case dt.invalid_intersection_types:r="Intersection results could not be merged";break;case dt.not_multiple_of:r=`Number must be a multiple of ${e.multipleOf}`;break;case dt.not_finite:r="Number must be finite";break;default:r=t.defaultError,Gr.assertNever(e)}return{message:r}};let PQ=Vw;function TQ(){return PQ}const RQ=e=>{const{data:t,path:r,errorMaps:n,issueData:i}=e,a=[...r,...i.path||[]],o={...i,path:a};if(i.message!==void 0)return{...i,path:a,message:i.message};let l="";const d=n.filter(f=>!!f).slice().reverse();for(const f of d)l=f(o,{data:t,defaultError:l}).message;return{...i,path:a,message:l}};function Nt(e,t){const r=TQ(),n=RQ({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,r,r===Vw?void 0:Vw].filter(i=>!!i)});e.common.issues.push(n)}class Ea{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const n=[];for(const i of r){if(i.status==="aborted")return xr;i.status==="dirty"&&t.dirty(),n.push(i.value)}return{status:t.value,value:n}}static async mergeObjectAsync(t,r){const n=[];for(const i of r){const a=await i.key,o=await i.value;n.push({key:a,value:o})}return Ea.mergeObjectSync(t,n)}static mergeObjectSync(t,r){const n={};for(const i of r){const{key:a,value:o}=i;if(a.status==="aborted"||o.status==="aborted")return xr;a.status==="dirty"&&t.dirty(),o.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof o.value<"u"||i.alwaysSet)&&(n[a.value]=o.value)}return{status:t.value,value:n}}}const xr=Object.freeze({status:"aborted"}),Ym=e=>({status:"dirty",value:e}),Za=e=>({status:"valid",value:e}),o4=e=>e.status==="aborted",l4=e=>e.status==="dirty",Lh=e=>e.status==="valid",n0=e=>typeof Promise<"u"&&e instanceof Promise;var qt;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t?.message})(qt||(qt={}));class Fu{constructor(t,r,n,i){this._cachedPath=[],this.parent=t,this.data=r,this._path=n,this._key=i}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const c4=(e,t)=>{if(Lh(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new Ec(e.common.issues);return this._error=r,this._error}}};function Er(e){if(!e)return{};const{errorMap:t,invalid_type_error:r,required_error:n,description:i}=e;if(t&&(r||n))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:i}:{errorMap:(o,l)=>{const{message:d}=e;return o.code==="invalid_enum_value"?{message:d??l.defaultError}:typeof l.data>"u"?{message:d??n??l.defaultError}:o.code!=="invalid_type"?{message:l.defaultError}:{message:d??r??l.defaultError}},description:i}}class Vr{get description(){return this._def.description}_getType(t){return _u(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:_u(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new Ea,ctx:{common:t.parent.common,data:t.data,parsedType:_u(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(n0(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const n=this.safeParse(t,r);if(n.success)return n.data;throw n.error}safeParse(t,r){const n={common:{issues:[],async:r?.async??!1,contextualErrorMap:r?.errorMap},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_u(t)},i=this._parseSync({data:t,path:n.path,parent:n});return c4(n,i)}"~validate"(t){const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_u(t)};if(!this["~standard"].async)try{const n=this._parseSync({data:t,path:[],parent:r});return Lh(n)?{value:n.value}:{issues:r.common.issues}}catch(n){n?.message?.toLowerCase()?.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(n=>Lh(n)?{value:n.value}:{issues:r.common.issues})}async parseAsync(t,r){const n=await this.safeParseAsync(t,r);if(n.success)return n.data;throw n.error}async safeParseAsync(t,r){const n={common:{issues:[],contextualErrorMap:r?.errorMap,async:!0},path:r?.path||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:_u(t)},i=this._parse({data:t,path:n.path,parent:n}),a=await(n0(i)?i:Promise.resolve(i));return c4(n,a)}refine(t,r){const n=i=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(i):r;return this._refinement((i,a)=>{const o=t(i),l=()=>a.addIssue({code:dt.custom,...n(i)});return typeof Promise<"u"&&o instanceof Promise?o.then(d=>d?!0:(l(),!1)):o?!0:(l(),!1)})}refinement(t,r){return this._refinement((n,i)=>t(n)?!0:(i.addIssue(typeof r=="function"?r(n,i):r),!1))}_refinement(t){return new Oh({schema:this,typeName:wr.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return Au.create(this,this._def)}nullable(){return Mh.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return yl.create(this)}promise(){return a0.create(this,this._def)}or(t){return s0.create([this,t],this._def)}and(t){return i0.create(this,t,this._def)}transform(t){return new Oh({...Er(this._def),schema:this,typeName:wr.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Gw({...Er(this._def),innerType:this,defaultValue:r,typeName:wr.ZodDefault})}brand(){return new tJ({typeName:wr.ZodBranded,type:this,...Er(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Kw({...Er(this._def),innerType:this,catchValue:r,typeName:wr.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return $b.create(this,t)}readonly(){return Yw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const LQ=/^c[^\s-]{8,}$/i,DQ=/^[0-9a-z]+$/,IQ=/^[0-9A-HJKMNP-TV-Z]{26}$/i,OQ=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,MQ=/^[a-z0-9_-]{21}$/i,FQ=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,BQ=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,UQ=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,$Q="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let k1;const zQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,qQ=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,VQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,WQ=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,HQ=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,GQ=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,nR="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",KQ=new RegExp(`^${nR}$`);function sR(e){let t="[0-5]\\d";e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`);const r=e.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function YQ(e){return new RegExp(`^${sR(e)}$`)}function QQ(e){let t=`${nR}T${sR(e)}`;const r=[];return r.push(e.local?"Z?":"Z"),e.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function JQ(e,t){return!!((t==="v4"||!t)&&zQ.test(e)||(t==="v6"||!t)&&VQ.test(e))}function ZQ(e,t){if(!FQ.test(e))return!1;try{const[r]=e.split(".");if(!r)return!1;const n=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),i=JSON.parse(atob(n));return!(typeof i!="object"||i===null||"typ"in i&&i?.typ!=="JWT"||!i.alg||t&&i.alg!==t)}catch{return!1}}function XQ(e,t){return!!((t==="v4"||!t)&&qQ.test(e)||(t==="v6"||!t)&&WQ.test(e))}class ku extends Vr{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==Mt.string){const a=this._getOrReturnCtx(t);return Nt(a,{code:dt.invalid_type,expected:Mt.string,received:a.parsedType}),xr}const n=new Ea;let i;for(const a of this._def.checks)if(a.kind==="min")t.data.length<a.value&&(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="max")t.data.length>a.value&&(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!1,message:a.message}),n.dirty());else if(a.kind==="length"){const o=t.data.length>a.value,l=t.data.length<a.value;(o||l)&&(i=this._getOrReturnCtx(t,i),o?Nt(i,{code:dt.too_big,maximum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}):l&&Nt(i,{code:dt.too_small,minimum:a.value,type:"string",inclusive:!0,exact:!0,message:a.message}),n.dirty())}else if(a.kind==="email")UQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"email",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="emoji")k1||(k1=new RegExp($Q,"u")),k1.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"emoji",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="uuid")OQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"uuid",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="nanoid")MQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"nanoid",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid")LQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"cuid",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="cuid2")DQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"cuid2",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="ulid")IQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"ulid",code:dt.invalid_string,message:a.message}),n.dirty());else if(a.kind==="url")try{new URL(t.data)}catch{i=this._getOrReturnCtx(t,i),Nt(i,{validation:"url",code:dt.invalid_string,message:a.message}),n.dirty()}else a.kind==="regex"?(a.regex.lastIndex=0,a.regex.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"regex",code:dt.invalid_string,message:a.message}),n.dirty())):a.kind==="trim"?t.data=t.data.trim():a.kind==="includes"?t.data.includes(a.value,a.position)||(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.invalid_string,validation:{includes:a.value,position:a.position},message:a.message}),n.dirty()):a.kind==="toLowerCase"?t.data=t.data.toLowerCase():a.kind==="toUpperCase"?t.data=t.data.toUpperCase():a.kind==="startsWith"?t.data.startsWith(a.value)||(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.invalid_string,validation:{startsWith:a.value},message:a.message}),n.dirty()):a.kind==="endsWith"?t.data.endsWith(a.value)||(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.invalid_string,validation:{endsWith:a.value},message:a.message}),n.dirty()):a.kind==="datetime"?QQ(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.invalid_string,validation:"datetime",message:a.message}),n.dirty()):a.kind==="date"?KQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.invalid_string,validation:"date",message:a.message}),n.dirty()):a.kind==="time"?YQ(a).test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.invalid_string,validation:"time",message:a.message}),n.dirty()):a.kind==="duration"?BQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"duration",code:dt.invalid_string,message:a.message}),n.dirty()):a.kind==="ip"?JQ(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"ip",code:dt.invalid_string,message:a.message}),n.dirty()):a.kind==="jwt"?ZQ(t.data,a.alg)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"jwt",code:dt.invalid_string,message:a.message}),n.dirty()):a.kind==="cidr"?XQ(t.data,a.version)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"cidr",code:dt.invalid_string,message:a.message}),n.dirty()):a.kind==="base64"?HQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"base64",code:dt.invalid_string,message:a.message}),n.dirty()):a.kind==="base64url"?GQ.test(t.data)||(i=this._getOrReturnCtx(t,i),Nt(i,{validation:"base64url",code:dt.invalid_string,message:a.message}),n.dirty()):Gr.assertNever(a);return{status:n.value,value:t.data}}_regex(t,r,n){return this.refinement(i=>t.test(i),{validation:r,code:dt.invalid_string,...qt.errToObj(n)})}_addCheck(t){return new ku({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...qt.errToObj(t)})}url(t){return this._addCheck({kind:"url",...qt.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...qt.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...qt.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...qt.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...qt.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...qt.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...qt.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...qt.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...qt.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...qt.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...qt.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...qt.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof t?.precision>"u"?null:t?.precision,offset:t?.offset??!1,local:t?.local??!1,...qt.errToObj(t?.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof t?.precision>"u"?null:t?.precision,...qt.errToObj(t?.message)})}duration(t){return this._addCheck({kind:"duration",...qt.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...qt.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r?.position,...qt.errToObj(r?.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...qt.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...qt.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...qt.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...qt.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...qt.errToObj(r)})}nonempty(t){return this.min(1,qt.errToObj(t))}trim(){return new ku({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ku({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ku({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}ku.create=e=>new ku({checks:[],typeName:wr.ZodString,coerce:e?.coerce??!1,...Er(e)});function eJ(e,t){const r=(e.toString().split(".")[1]||"").length,n=(t.toString().split(".")[1]||"").length,i=r>n?r:n,a=Number.parseInt(e.toFixed(i).replace(".","")),o=Number.parseInt(t.toFixed(i).replace(".",""));return a%o/10**i}class Dh extends Vr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==Mt.number){const a=this._getOrReturnCtx(t);return Nt(a,{code:dt.invalid_type,expected:Mt.number,received:a.parsedType}),xr}let n;const i=new Ea;for(const a of this._def.checks)a.kind==="int"?Gr.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.invalid_type,expected:"integer",received:"float",message:a.message}),i.dirty()):a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.too_small,minimum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.too_big,maximum:a.value,type:"number",inclusive:a.inclusive,exact:!1,message:a.message}),i.dirty()):a.kind==="multipleOf"?eJ(t.data,a.value)!==0&&(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):a.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.not_finite,message:a.message}),i.dirty()):Gr.assertNever(a);return{status:i.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,qt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,qt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,qt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,qt.toString(r))}setLimit(t,r,n,i){return new Dh({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:qt.toString(i)}]})}_addCheck(t){return new Dh({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:qt.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:qt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:qt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:qt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:qt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:qt.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:qt.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:qt.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:qt.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&Gr.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const n of this._def.checks){if(n.kind==="finite"||n.kind==="int"||n.kind==="multipleOf")return!0;n.kind==="min"?(r===null||n.value>r)&&(r=n.value):n.kind==="max"&&(t===null||n.value<t)&&(t=n.value)}return Number.isFinite(r)&&Number.isFinite(t)}}Dh.create=e=>new Dh({checks:[],typeName:wr.ZodNumber,coerce:e?.coerce||!1,...Er(e)});class jp extends Vr{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==Mt.bigint)return this._getInvalidInput(t);let n;const i=new Ea;for(const a of this._def.checks)a.kind==="min"?(a.inclusive?t.data<a.value:t.data<=a.value)&&(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.too_small,type:"bigint",minimum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="max"?(a.inclusive?t.data>a.value:t.data>=a.value)&&(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.too_big,type:"bigint",maximum:a.value,inclusive:a.inclusive,message:a.message}),i.dirty()):a.kind==="multipleOf"?t.data%a.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Nt(n,{code:dt.not_multiple_of,multipleOf:a.value,message:a.message}),i.dirty()):Gr.assertNever(a);return{status:i.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Nt(r,{code:dt.invalid_type,expected:Mt.bigint,received:r.parsedType}),xr}gte(t,r){return this.setLimit("min",t,!0,qt.toString(r))}gt(t,r){return this.setLimit("min",t,!1,qt.toString(r))}lte(t,r){return this.setLimit("max",t,!0,qt.toString(r))}lt(t,r){return this.setLimit("max",t,!1,qt.toString(r))}setLimit(t,r,n,i){return new jp({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:n,message:qt.toString(i)}]})}_addCheck(t){return new jp({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:qt.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:qt.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:qt.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:qt.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:qt.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}jp.create=e=>new jp({checks:[],typeName:wr.ZodBigInt,coerce:e?.coerce??!1,...Er(e)});class Ww extends Vr{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==Mt.boolean){const n=this._getOrReturnCtx(t);return Nt(n,{code:dt.invalid_type,expected:Mt.boolean,received:n.parsedType}),xr}return Za(t.data)}}Ww.create=e=>new Ww({typeName:wr.ZodBoolean,coerce:e?.coerce||!1,...Er(e)});class Sp extends Vr{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==Mt.date){const a=this._getOrReturnCtx(t);return Nt(a,{code:dt.invalid_type,expected:Mt.date,received:a.parsedType}),xr}if(Number.isNaN(t.data.getTime())){const a=this._getOrReturnCtx(t);return Nt(a,{code:dt.invalid_date}),xr}const n=new Ea;let i;for(const a of this._def.checks)a.kind==="min"?t.data.getTime()<a.value&&(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.too_small,message:a.message,inclusive:!0,exact:!1,minimum:a.value,type:"date"}),n.dirty()):a.kind==="max"?t.data.getTime()>a.value&&(i=this._getOrReturnCtx(t,i),Nt(i,{code:dt.too_big,message:a.message,inclusive:!0,exact:!1,maximum:a.value,type:"date"}),n.dirty()):Gr.assertNever(a);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Sp({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:qt.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:qt.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Sp.create=e=>new Sp({checks:[],coerce:e?.coerce||!1,typeName:wr.ZodDate,...Er(e)});class u4 extends Vr{_parse(t){if(this._getType(t)!==Mt.symbol){const n=this._getOrReturnCtx(t);return Nt(n,{code:dt.invalid_type,expected:Mt.symbol,received:n.parsedType}),xr}return Za(t.data)}}u4.create=e=>new u4({typeName:wr.ZodSymbol,...Er(e)});class d4 extends Vr{_parse(t){if(this._getType(t)!==Mt.undefined){const n=this._getOrReturnCtx(t);return Nt(n,{code:dt.invalid_type,expected:Mt.undefined,received:n.parsedType}),xr}return Za(t.data)}}d4.create=e=>new d4({typeName:wr.ZodUndefined,...Er(e)});class f4 extends Vr{_parse(t){if(this._getType(t)!==Mt.null){const n=this._getOrReturnCtx(t);return Nt(n,{code:dt.invalid_type,expected:Mt.null,received:n.parsedType}),xr}return Za(t.data)}}f4.create=e=>new f4({typeName:wr.ZodNull,...Er(e)});class h4 extends Vr{constructor(){super(...arguments),this._any=!0}_parse(t){return Za(t.data)}}h4.create=e=>new h4({typeName:wr.ZodAny,...Er(e)});class m4 extends Vr{constructor(){super(...arguments),this._unknown=!0}_parse(t){return Za(t.data)}}m4.create=e=>new m4({typeName:wr.ZodUnknown,...Er(e)});class Bu extends Vr{_parse(t){const r=this._getOrReturnCtx(t);return Nt(r,{code:dt.invalid_type,expected:Mt.never,received:r.parsedType}),xr}}Bu.create=e=>new Bu({typeName:wr.ZodNever,...Er(e)});class p4 extends Vr{_parse(t){if(this._getType(t)!==Mt.undefined){const n=this._getOrReturnCtx(t);return Nt(n,{code:dt.invalid_type,expected:Mt.void,received:n.parsedType}),xr}return Za(t.data)}}p4.create=e=>new p4({typeName:wr.ZodVoid,...Er(e)});class yl extends Vr{_parse(t){const{ctx:r,status:n}=this._processInputParams(t),i=this._def;if(r.parsedType!==Mt.array)return Nt(r,{code:dt.invalid_type,expected:Mt.array,received:r.parsedType}),xr;if(i.exactLength!==null){const o=r.data.length>i.exactLength.value,l=r.data.length<i.exactLength.value;(o||l)&&(Nt(r,{code:o?dt.too_big:dt.too_small,minimum:l?i.exactLength.value:void 0,maximum:o?i.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:i.exactLength.message}),n.dirty())}if(i.minLength!==null&&r.data.length<i.minLength.value&&(Nt(r,{code:dt.too_small,minimum:i.minLength.value,type:"array",inclusive:!0,exact:!1,message:i.minLength.message}),n.dirty()),i.maxLength!==null&&r.data.length>i.maxLength.value&&(Nt(r,{code:dt.too_big,maximum:i.maxLength.value,type:"array",inclusive:!0,exact:!1,message:i.maxLength.message}),n.dirty()),r.common.async)return Promise.all([...r.data].map((o,l)=>i.type._parseAsync(new Fu(r,o,r.path,l)))).then(o=>Ea.mergeArray(n,o));const a=[...r.data].map((o,l)=>i.type._parseSync(new Fu(r,o,r.path,l)));return Ea.mergeArray(n,a)}get element(){return this._def.type}min(t,r){return new yl({...this._def,minLength:{value:t,message:qt.toString(r)}})}max(t,r){return new yl({...this._def,maxLength:{value:t,message:qt.toString(r)}})}length(t,r){return new yl({...this._def,exactLength:{value:t,message:qt.toString(r)}})}nonempty(t){return this.min(1,t)}}yl.create=(e,t)=>new yl({type:e,minLength:null,maxLength:null,exactLength:null,typeName:wr.ZodArray,...Er(t)});function lh(e){if(e instanceof ys){const t={};for(const r in e.shape){const n=e.shape[r];t[r]=Au.create(lh(n))}return new ys({...e._def,shape:()=>t})}else return e instanceof yl?new yl({...e._def,type:lh(e.element)}):e instanceof Au?Au.create(lh(e.unwrap())):e instanceof Mh?Mh.create(lh(e.unwrap())):e instanceof Zd?Zd.create(e.items.map(t=>lh(t))):e}class ys extends Vr{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=Gr.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==Mt.object){const f=this._getOrReturnCtx(t);return Nt(f,{code:dt.invalid_type,expected:Mt.object,received:f.parsedType}),xr}const{status:n,ctx:i}=this._processInputParams(t),{shape:a,keys:o}=this._getCached(),l=[];if(!(this._def.catchall instanceof Bu&&this._def.unknownKeys==="strip"))for(const f in i.data)o.includes(f)||l.push(f);const d=[];for(const f of o){const h=a[f],p=i.data[f];d.push({key:{status:"valid",value:f},value:h._parse(new Fu(i,p,i.path,f)),alwaysSet:f in i.data})}if(this._def.catchall instanceof Bu){const f=this._def.unknownKeys;if(f==="passthrough")for(const h of l)d.push({key:{status:"valid",value:h},value:{status:"valid",value:i.data[h]}});else if(f==="strict")l.length>0&&(Nt(i,{code:dt.unrecognized_keys,keys:l}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const h of l){const p=i.data[h];d.push({key:{status:"valid",value:h},value:f._parse(new Fu(i,p,i.path,h)),alwaysSet:h in i.data})}}return i.common.async?Promise.resolve().then(async()=>{const f=[];for(const h of d){const p=await h.key,v=await h.value;f.push({key:p,value:v,alwaysSet:h.alwaysSet})}return f}).then(f=>Ea.mergeObjectSync(n,f)):Ea.mergeObjectSync(n,d)}get shape(){return this._def.shape()}strict(t){return qt.errToObj,new ys({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,n)=>{const i=this._def.errorMap?.(r,n).message??n.defaultError;return r.code==="unrecognized_keys"?{message:qt.errToObj(t).message??i}:{message:i}}}:{}})}strip(){return new ys({...this._def,unknownKeys:"strip"})}passthrough(){return new ys({...this._def,unknownKeys:"passthrough"})}extend(t){return new ys({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new ys({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:wr.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new ys({...this._def,catchall:t})}pick(t){const r={};for(const n of Gr.objectKeys(t))t[n]&&this.shape[n]&&(r[n]=this.shape[n]);return new ys({...this._def,shape:()=>r})}omit(t){const r={};for(const n of Gr.objectKeys(this.shape))t[n]||(r[n]=this.shape[n]);return new ys({...this._def,shape:()=>r})}deepPartial(){return lh(this)}partial(t){const r={};for(const n of Gr.objectKeys(this.shape)){const i=this.shape[n];t&&!t[n]?r[n]=i:r[n]=i.optional()}return new ys({...this._def,shape:()=>r})}required(t){const r={};for(const n of Gr.objectKeys(this.shape))if(t&&!t[n])r[n]=this.shape[n];else{let a=this.shape[n];for(;a instanceof Au;)a=a._def.innerType;r[n]=a}return new ys({...this._def,shape:()=>r})}keyof(){return iR(Gr.objectKeys(this.shape))}}ys.create=(e,t)=>new ys({shape:()=>e,unknownKeys:"strip",catchall:Bu.create(),typeName:wr.ZodObject,...Er(t)});ys.strictCreate=(e,t)=>new ys({shape:()=>e,unknownKeys:"strict",catchall:Bu.create(),typeName:wr.ZodObject,...Er(t)});ys.lazycreate=(e,t)=>new ys({shape:e,unknownKeys:"strip",catchall:Bu.create(),typeName:wr.ZodObject,...Er(t)});class s0 extends Vr{_parse(t){const{ctx:r}=this._processInputParams(t),n=this._def.options;function i(a){for(const l of a)if(l.result.status==="valid")return l.result;for(const l of a)if(l.result.status==="dirty")return r.common.issues.push(...l.ctx.common.issues),l.result;const o=a.map(l=>new Ec(l.ctx.common.issues));return Nt(r,{code:dt.invalid_union,unionErrors:o}),xr}if(r.common.async)return Promise.all(n.map(async a=>{const o={...r,common:{...r.common,issues:[]},parent:null};return{result:await a._parseAsync({data:r.data,path:r.path,parent:o}),ctx:o}})).then(i);{let a;const o=[];for(const d of n){const f={...r,common:{...r.common,issues:[]},parent:null},h=d._parseSync({data:r.data,path:r.path,parent:f});if(h.status==="valid")return h;h.status==="dirty"&&!a&&(a={result:h,ctx:f}),f.common.issues.length&&o.push(f.common.issues)}if(a)return r.common.issues.push(...a.ctx.common.issues),a.result;const l=o.map(d=>new Ec(d));return Nt(r,{code:dt.invalid_union,unionErrors:l}),xr}}get options(){return this._def.options}}s0.create=(e,t)=>new s0({options:e,typeName:wr.ZodUnion,...Er(t)});function Hw(e,t){const r=_u(e),n=_u(t);if(e===t)return{valid:!0,data:e};if(r===Mt.object&&n===Mt.object){const i=Gr.objectKeys(t),a=Gr.objectKeys(e).filter(l=>i.indexOf(l)!==-1),o={...e,...t};for(const l of a){const d=Hw(e[l],t[l]);if(!d.valid)return{valid:!1};o[l]=d.data}return{valid:!0,data:o}}else if(r===Mt.array&&n===Mt.array){if(e.length!==t.length)return{valid:!1};const i=[];for(let a=0;a<e.length;a++){const o=e[a],l=t[a],d=Hw(o,l);if(!d.valid)return{valid:!1};i.push(d.data)}return{valid:!0,data:i}}else return r===Mt.date&&n===Mt.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class i0 extends Vr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=(a,o)=>{if(o4(a)||o4(o))return xr;const l=Hw(a.value,o.value);return l.valid?((l4(a)||l4(o))&&r.dirty(),{status:r.value,value:l.data}):(Nt(n,{code:dt.invalid_intersection_types}),xr)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([a,o])=>i(a,o)):i(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}}i0.create=(e,t,r)=>new i0({left:e,right:t,typeName:wr.ZodIntersection,...Er(r)});class Zd extends Vr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Mt.array)return Nt(n,{code:dt.invalid_type,expected:Mt.array,received:n.parsedType}),xr;if(n.data.length<this._def.items.length)return Nt(n,{code:dt.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),xr;!this._def.rest&&n.data.length>this._def.items.length&&(Nt(n,{code:dt.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const a=[...n.data].map((o,l)=>{const d=this._def.items[l]||this._def.rest;return d?d._parse(new Fu(n,o,n.path,l)):null}).filter(o=>!!o);return n.common.async?Promise.all(a).then(o=>Ea.mergeArray(r,o)):Ea.mergeArray(r,a)}get items(){return this._def.items}rest(t){return new Zd({...this._def,rest:t})}}Zd.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Zd({items:e,typeName:wr.ZodTuple,rest:null,...Er(t)})};class g4 extends Vr{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Mt.map)return Nt(n,{code:dt.invalid_type,expected:Mt.map,received:n.parsedType}),xr;const i=this._def.keyType,a=this._def.valueType,o=[...n.data.entries()].map(([l,d],f)=>({key:i._parse(new Fu(n,l,n.path,[f,"key"])),value:a._parse(new Fu(n,d,n.path,[f,"value"]))}));if(n.common.async){const l=new Map;return Promise.resolve().then(async()=>{for(const d of o){const f=await d.key,h=await d.value;if(f.status==="aborted"||h.status==="aborted")return xr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),l.set(f.value,h.value)}return{status:r.value,value:l}})}else{const l=new Map;for(const d of o){const f=d.key,h=d.value;if(f.status==="aborted"||h.status==="aborted")return xr;(f.status==="dirty"||h.status==="dirty")&&r.dirty(),l.set(f.value,h.value)}return{status:r.value,value:l}}}}g4.create=(e,t,r)=>new g4({valueType:t,keyType:e,typeName:wr.ZodMap,...Er(r)});class kp extends Vr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.parsedType!==Mt.set)return Nt(n,{code:dt.invalid_type,expected:Mt.set,received:n.parsedType}),xr;const i=this._def;i.minSize!==null&&n.data.size<i.minSize.value&&(Nt(n,{code:dt.too_small,minimum:i.minSize.value,type:"set",inclusive:!0,exact:!1,message:i.minSize.message}),r.dirty()),i.maxSize!==null&&n.data.size>i.maxSize.value&&(Nt(n,{code:dt.too_big,maximum:i.maxSize.value,type:"set",inclusive:!0,exact:!1,message:i.maxSize.message}),r.dirty());const a=this._def.valueType;function o(d){const f=new Set;for(const h of d){if(h.status==="aborted")return xr;h.status==="dirty"&&r.dirty(),f.add(h.value)}return{status:r.value,value:f}}const l=[...n.data.values()].map((d,f)=>a._parse(new Fu(n,d,n.path,f)));return n.common.async?Promise.all(l).then(d=>o(d)):o(l)}min(t,r){return new kp({...this._def,minSize:{value:t,message:qt.toString(r)}})}max(t,r){return new kp({...this._def,maxSize:{value:t,message:qt.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}kp.create=(e,t)=>new kp({valueType:e,minSize:null,maxSize:null,typeName:wr.ZodSet,...Er(t)});class v4 extends Vr{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}v4.create=(e,t)=>new v4({getter:e,typeName:wr.ZodLazy,...Er(t)});class y4 extends Vr{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Nt(r,{received:r.data,code:dt.invalid_literal,expected:this._def.value}),xr}return{status:"valid",value:t.data}}get value(){return this._def.value}}y4.create=(e,t)=>new y4({value:e,typeName:wr.ZodLiteral,...Er(t)});function iR(e,t){return new Ih({values:e,typeName:wr.ZodEnum,...Er(t)})}class Ih extends Vr{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),n=this._def.values;return Nt(r,{expected:Gr.joinValues(n),received:r.parsedType,code:dt.invalid_type}),xr}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),n=this._def.values;return Nt(r,{received:r.data,code:dt.invalid_enum_value,options:n}),xr}return Za(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return Ih.create(t,{...this._def,...r})}exclude(t,r=this._def){return Ih.create(this.options.filter(n=>!t.includes(n)),{...this._def,...r})}}Ih.create=iR;class x4 extends Vr{_parse(t){const r=Gr.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(t);if(n.parsedType!==Mt.string&&n.parsedType!==Mt.number){const i=Gr.objectValues(r);return Nt(n,{expected:Gr.joinValues(i),received:n.parsedType,code:dt.invalid_type}),xr}if(this._cache||(this._cache=new Set(Gr.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const i=Gr.objectValues(r);return Nt(n,{received:n.data,code:dt.invalid_enum_value,options:i}),xr}return Za(t.data)}get enum(){return this._def.values}}x4.create=(e,t)=>new x4({values:e,typeName:wr.ZodNativeEnum,...Er(t)});class a0 extends Vr{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==Mt.promise&&r.common.async===!1)return Nt(r,{code:dt.invalid_type,expected:Mt.promise,received:r.parsedType}),xr;const n=r.parsedType===Mt.promise?r.data:Promise.resolve(r.data);return Za(n.then(i=>this._def.type.parseAsync(i,{path:r.path,errorMap:r.common.contextualErrorMap})))}}a0.create=(e,t)=>new a0({type:e,typeName:wr.ZodPromise,...Er(t)});class Oh extends Vr{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===wr.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:n}=this._processInputParams(t),i=this._def.effect||null,a={addIssue:o=>{Nt(n,o),o.fatal?r.abort():r.dirty()},get path(){return n.path}};if(a.addIssue=a.addIssue.bind(a),i.type==="preprocess"){const o=i.transform(n.data,a);if(n.common.async)return Promise.resolve(o).then(async l=>{if(r.value==="aborted")return xr;const d=await this._def.schema._parseAsync({data:l,path:n.path,parent:n});return d.status==="aborted"?xr:d.status==="dirty"||r.value==="dirty"?Ym(d.value):d});{if(r.value==="aborted")return xr;const l=this._def.schema._parseSync({data:o,path:n.path,parent:n});return l.status==="aborted"?xr:l.status==="dirty"||r.value==="dirty"?Ym(l.value):l}}if(i.type==="refinement"){const o=l=>{const d=i.refinement(l,a);if(n.common.async)return Promise.resolve(d);if(d instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return l};if(n.common.async===!1){const l=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return l.status==="aborted"?xr:(l.status==="dirty"&&r.dirty(),o(l.value),{status:r.value,value:l.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(l=>l.status==="aborted"?xr:(l.status==="dirty"&&r.dirty(),o(l.value).then(()=>({status:r.value,value:l.value}))))}if(i.type==="transform")if(n.common.async===!1){const o=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!Lh(o))return xr;const l=i.transform(o.value,a);if(l instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:l}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(o=>Lh(o)?Promise.resolve(i.transform(o.value,a)).then(l=>({status:r.value,value:l})):xr);Gr.assertNever(i)}}Oh.create=(e,t,r)=>new Oh({schema:e,typeName:wr.ZodEffects,effect:t,...Er(r)});Oh.createWithPreprocess=(e,t,r)=>new Oh({schema:t,effect:{type:"preprocess",transform:e},typeName:wr.ZodEffects,...Er(r)});class Au extends Vr{_parse(t){return this._getType(t)===Mt.undefined?Za(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Au.create=(e,t)=>new Au({innerType:e,typeName:wr.ZodOptional,...Er(t)});class Mh extends Vr{_parse(t){return this._getType(t)===Mt.null?Za(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Mh.create=(e,t)=>new Mh({innerType:e,typeName:wr.ZodNullable,...Er(t)});class Gw extends Vr{_parse(t){const{ctx:r}=this._processInputParams(t);let n=r.data;return r.parsedType===Mt.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Gw.create=(e,t)=>new Gw({innerType:e,typeName:wr.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Er(t)});class Kw extends Vr{_parse(t){const{ctx:r}=this._processInputParams(t),n={...r,common:{...r.common,issues:[]}},i=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return n0(i)?i.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Ec(n.common.issues)},input:n.data})})):{status:"valid",value:i.status==="valid"?i.value:this._def.catchValue({get error(){return new Ec(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}}Kw.create=(e,t)=>new Kw({innerType:e,typeName:wr.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Er(t)});class w4 extends Vr{_parse(t){if(this._getType(t)!==Mt.nan){const n=this._getOrReturnCtx(t);return Nt(n,{code:dt.invalid_type,expected:Mt.nan,received:n.parsedType}),xr}return{status:"valid",value:t.data}}}w4.create=e=>new w4({typeName:wr.ZodNaN,...Er(e)});class tJ extends Vr{_parse(t){const{ctx:r}=this._processInputParams(t),n=r.data;return this._def.type._parse({data:n,path:r.path,parent:r})}unwrap(){return this._def.type}}class $b extends Vr{_parse(t){const{status:r,ctx:n}=this._processInputParams(t);if(n.common.async)return(async()=>{const a=await this._def.in._parseAsync({data:n.data,path:n.path,parent:n});return a.status==="aborted"?xr:a.status==="dirty"?(r.dirty(),Ym(a.value)):this._def.out._parseAsync({data:a.value,path:n.path,parent:n})})();{const i=this._def.in._parseSync({data:n.data,path:n.path,parent:n});return i.status==="aborted"?xr:i.status==="dirty"?(r.dirty(),{status:"dirty",value:i.value}):this._def.out._parseSync({data:i.value,path:n.path,parent:n})}}static create(t,r){return new $b({in:t,out:r,typeName:wr.ZodPipeline})}}class Yw extends Vr{_parse(t){const r=this._def.innerType._parse(t),n=i=>(Lh(i)&&(i.value=Object.freeze(i.value)),i);return n0(r)?r.then(i=>n(i)):n(r)}unwrap(){return this._def.innerType}}Yw.create=(e,t)=>new Yw({innerType:e,typeName:wr.ZodReadonly,...Er(t)});var wr;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(wr||(wr={}));const av=ku.create,rJ=Dh.create,nJ=Ww.create,sJ=Sp.create;Bu.create;yl.create;const iJ=ys.create;s0.create;i0.create;Zd.create;const b4=Ih.create;a0.create;Au.create;Mh.create;const aJ=aQ,aR=x.createContext({}),xu=({...e})=>s.jsx(aR.Provider,{value:{name:e.name},children:s.jsx(uQ,{...e})}),ay=()=>{const e=x.useContext(aR),t=x.useContext(oR),{getFieldState:r,formState:n}=iy(),i=r(e.name,n);if(!e)throw new Error("useFormField should be used within <FormField>");const{id:a}=t;return{id:a,name:e.name,formItemId:`${a}-form-item`,formDescriptionId:`${a}-form-item-description`,formMessageId:`${a}-form-item-message`,...i}},oR=x.createContext({}),fc=x.forwardRef(({className:e,...t},r)=>{const n=x.useId();return s.jsx(oR.Provider,{value:{id:n},children:s.jsx("div",{ref:r,className:Me("space-y-2",e),...t})})});fc.displayName="FormItem";const hc=x.forwardRef(({className:e,...t},r)=>{const{error:n,formItemId:i}=ay();return s.jsx(At,{ref:r,className:Me(n&&"text-destructive",e),htmlFor:i,...t})});hc.displayName="FormLabel";const mc=x.forwardRef(({...e},t)=>{const{error:r,formItemId:n,formDescriptionId:i,formMessageId:a}=ay();return s.jsx(P4,{ref:t,id:n,"aria-describedby":r?`${i} ${a}`:`${i}`,"aria-invalid":!!r,...e})});mc.displayName="FormControl";const Qm=x.forwardRef(({className:e,...t},r)=>{const{formDescriptionId:n}=ay();return s.jsx("p",{ref:r,id:n,className:Me("text-sm text-muted-foreground",e),...t})});Qm.displayName="FormDescription";const pc=x.forwardRef(({className:e,children:t,...r},n)=>{const{error:i,formMessageId:a}=ay(),o=i?String(i?.message):t;return o?s.jsx("p",{ref:n,id:a,className:Me("text-sm font-medium text-destructive",e),...r,children:o}):null});pc.displayName="FormMessage";var cr=function(){return cr=Object.assign||function(t){for(var r,n=1,i=arguments.length;n<i;n++){r=arguments[n];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},cr.apply(this,arguments)};function oJ(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]]);return r}function lR(e,t,r){for(var n=0,i=t.length,a;n<i;n++)(a||!(n in t))&&(a||(a=Array.prototype.slice.call(t,0,n)),a[n]=t[n]);return e.concat(a||Array.prototype.slice.call(t))}function qp(e){return e.mode==="multiple"}function Vp(e){return e.mode==="range"}function oy(e){return e.mode==="single"}var lJ={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function cJ(e,t){return on(e,"LLLL y",t)}function uJ(e,t){return on(e,"d",t)}function dJ(e,t){return on(e,"LLLL",t)}function fJ(e){return"".concat(e)}function hJ(e,t){return on(e,"cccccc",t)}function mJ(e,t){return on(e,"yyyy",t)}var pJ=Object.freeze({__proto__:null,formatCaption:cJ,formatDay:uJ,formatMonthCaption:dJ,formatWeekNumber:fJ,formatWeekdayName:hJ,formatYearCaption:mJ}),gJ=function(e,t,r){return on(e,"do MMMM (EEEE)",r)},vJ=function(){return"Month: "},yJ=function(){return"Go to next month"},xJ=function(){return"Go to previous month"},wJ=function(e,t){return on(e,"cccc",t)},bJ=function(e){return"Week n. ".concat(e)},_J=function(){return"Year: "},NJ=Object.freeze({__proto__:null,labelDay:gJ,labelMonthDropdown:vJ,labelNext:yJ,labelPrevious:xJ,labelWeekNumber:bJ,labelWeekday:wJ,labelYearDropdown:_J});function jJ(){var e="buttons",t=lJ,r=J2,n={},i={},a=1,o={},l=new Date;return{captionLayout:e,classNames:t,formatters:pJ,labels:NJ,locale:r,modifiersClassNames:n,modifiers:i,numberOfMonths:a,styles:o,today:l,mode:"default"}}function SJ(e){var t=e.fromYear,r=e.toYear,n=e.fromMonth,i=e.toMonth,a=e.fromDate,o=e.toDate;return n?a=Ki(n):t&&(a=new Date(t,0,1)),i?o=F0(i):r&&(o=new Date(r,11,31)),{fromDate:a?qd(a):void 0,toDate:o?qd(o):void 0}}var cR=x.createContext(void 0);function kJ(e){var t,r=e.initialProps,n=jJ(),i=SJ(r),a=i.fromDate,o=i.toDate,l=(t=r.captionLayout)!==null&&t!==void 0?t:n.captionLayout;l!=="buttons"&&(!a||!o)&&(l="buttons");var d;(oy(r)||qp(r)||Vp(r))&&(d=r.onSelect);var f=cr(cr(cr({},n),r),{captionLayout:l,classNames:cr(cr({},n.classNames),r.classNames),components:cr({},r.components),formatters:cr(cr({},n.formatters),r.formatters),fromDate:a,labels:cr(cr({},n.labels),r.labels),mode:r.mode||n.mode,modifiers:cr(cr({},n.modifiers),r.modifiers),modifiersClassNames:cr(cr({},n.modifiersClassNames),r.modifiersClassNames),onSelect:d,styles:cr(cr({},n.styles),r.styles),toDate:o});return s.jsx(cR.Provider,{value:f,children:e.children})}function bn(){var e=x.useContext(cR);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function uR(e){var t=bn(),r=t.locale,n=t.classNames,i=t.styles,a=t.formatters.formatCaption;return s.jsx("div",{className:n.caption_label,style:i.caption_label,"aria-live":"polite",role:"presentation",id:e.id,children:a(e.displayMonth,{locale:r})})}function CJ(e){return s.jsx("svg",cr({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e,{children:s.jsx("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"})}))}function dR(e){var t,r,n=e.onChange,i=e.value,a=e.children,o=e.caption,l=e.className,d=e.style,f=bn(),h=(r=(t=f.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&r!==void 0?r:CJ;return s.jsxs("div",{className:l,style:d,children:[s.jsx("span",{className:f.classNames.vhidden,children:e["aria-label"]}),s.jsx("select",{name:e.name,"aria-label":e["aria-label"],className:f.classNames.dropdown,style:f.styles.dropdown,value:i,onChange:n,children:a}),s.jsxs("div",{className:f.classNames.caption_label,style:f.styles.caption_label,"aria-hidden":"true",children:[o,s.jsx(h,{className:f.classNames.dropdown_icon,style:f.styles.dropdown_icon})]})]})}function EJ(e){var t,r=bn(),n=r.fromDate,i=r.toDate,a=r.styles,o=r.locale,l=r.formatters.formatMonthCaption,d=r.classNames,f=r.components,h=r.labels.labelMonthDropdown;if(!n)return s.jsx(s.Fragment,{});if(!i)return s.jsx(s.Fragment,{});var p=[];if(Mz(n,i))for(var v=Ki(n),m=n.getMonth();m<=i.getMonth();m++)p.push(Cx(v,m));else for(var v=Ki(new Date),m=0;m<=11;m++)p.push(Cx(v,m));var j=function(_){var S=Number(_.target.value),E=Cx(Ki(e.displayMonth),S);e.onChange(E)},w=(t=f?.Dropdown)!==null&&t!==void 0?t:dR;return s.jsx(w,{name:"months","aria-label":h(),className:d.dropdown_month,style:a.dropdown_month,onChange:j,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:o}),children:p.map(function(_){return s.jsx("option",{value:_.getMonth(),children:l(_,{locale:o})},_.getMonth())})})}function AJ(e){var t,r=e.displayMonth,n=bn(),i=n.fromDate,a=n.toDate,o=n.locale,l=n.styles,d=n.classNames,f=n.components,h=n.formatters.formatYearCaption,p=n.labels.labelYearDropdown,v=[];if(!i)return s.jsx(s.Fragment,{});if(!a)return s.jsx(s.Fragment,{});for(var m=i.getFullYear(),j=a.getFullYear(),w=m;w<=j;w++)v.push(WN(SE(new Date),w));var _=function(E){var k=WN(Ki(r),Number(E.target.value));e.onChange(k)},S=(t=f?.Dropdown)!==null&&t!==void 0?t:dR;return s.jsx(S,{name:"years","aria-label":p(),className:d.dropdown_year,style:l.dropdown_year,onChange:_,value:r.getFullYear(),caption:h(r,{locale:o}),children:v.map(function(E){return s.jsx("option",{value:E.getFullYear(),children:h(E,{locale:o})},E.getFullYear())})})}function PJ(e,t){var r=x.useState(e),n=r[0],i=r[1],a=t===void 0?n:t;return[a,i]}function TJ(e){var t=e.month,r=e.defaultMonth,n=e.today,i=t||r||n||new Date,a=e.toDate,o=e.fromDate,l=e.numberOfMonths,d=l===void 0?1:l;if(a&&Ah(a,i)<0){var f=-1*(d-1);i=Ro(a,f)}return o&&Ah(i,o)<0&&(i=o),Ki(i)}function RJ(){var e=bn(),t=TJ(e),r=PJ(t,e.month),n=r[0],i=r[1],a=function(o){var l;if(!e.disableNavigation){var d=Ki(o);i(d),(l=e.onMonthChange)===null||l===void 0||l.call(e,d)}};return[n,a]}function LJ(e,t){for(var r=t.reverseMonths,n=t.numberOfMonths,i=Ki(e),a=Ki(Ro(i,n)),o=Ah(a,i),l=[],d=0;d<o;d++){var f=Ro(i,d);l.push(f)}return r&&(l=l.reverse()),l}function DJ(e,t){if(!t.disableNavigation){var r=t.toDate,n=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=Ki(e);if(!r)return Ro(l,o);var d=Ah(r,e);if(!(d<a))return Ro(l,o)}}function IJ(e,t){if(!t.disableNavigation){var r=t.fromDate,n=t.pagedNavigation,i=t.numberOfMonths,a=i===void 0?1:i,o=n?a:1,l=Ki(e);if(!r)return Ro(l,-o);var d=Ah(l,r);if(!(d<=0))return Ro(l,-o)}}var fR=x.createContext(void 0);function OJ(e){var t=bn(),r=RJ(),n=r[0],i=r[1],a=LJ(n,t),o=DJ(n,t),l=IJ(n,t),d=function(p){return a.some(function(v){return Z2(p,v)})},f=function(p,v){d(p)||(v&&Od(p,v)?i(Ro(p,1+t.numberOfMonths*-1)):i(p))},h={currentMonth:n,displayMonths:a,goToMonth:i,goToDate:f,previousMonth:l,nextMonth:o,isDateDisplayed:d};return s.jsx(fR.Provider,{value:h,children:e.children})}function Wp(){var e=x.useContext(fR);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function _4(e){var t,r=bn(),n=r.classNames,i=r.styles,a=r.components,o=Wp().goToMonth,l=function(h){o(Ro(h,e.displayIndex?-e.displayIndex:0))},d=(t=a?.CaptionLabel)!==null&&t!==void 0?t:uR,f=s.jsx(d,{id:e.id,displayMonth:e.displayMonth});return s.jsxs("div",{className:n.caption_dropdowns,style:i.caption_dropdowns,children:[s.jsx("div",{className:n.vhidden,children:f}),s.jsx(EJ,{onChange:l,displayMonth:e.displayMonth}),s.jsx(AJ,{onChange:l,displayMonth:e.displayMonth})]})}function MJ(e){return s.jsx("svg",cr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"})}))}function FJ(e){return s.jsx("svg",cr({width:"16px",height:"16px",viewBox:"0 0 120 120"},e,{children:s.jsx("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"})}))}var o0=x.forwardRef(function(e,t){var r=bn(),n=r.classNames,i=r.styles,a=[n.button_reset,n.button];e.className&&a.push(e.className);var o=a.join(" "),l=cr(cr({},i.button_reset),i.button);return e.style&&Object.assign(l,e.style),s.jsx("button",cr({},e,{ref:t,type:"button",className:o,style:l}))});function BJ(e){var t,r,n=bn(),i=n.dir,a=n.locale,o=n.classNames,l=n.styles,d=n.labels,f=d.labelPrevious,h=d.labelNext,p=n.components;if(!e.nextMonth&&!e.previousMonth)return s.jsx(s.Fragment,{});var v=f(e.previousMonth,{locale:a}),m=[o.nav_button,o.nav_button_previous].join(" "),j=h(e.nextMonth,{locale:a}),w=[o.nav_button,o.nav_button_next].join(" "),_=(t=p?.IconRight)!==null&&t!==void 0?t:FJ,S=(r=p?.IconLeft)!==null&&r!==void 0?r:MJ;return s.jsxs("div",{className:o.nav,style:l.nav,children:[!e.hidePrevious&&s.jsx(o0,{name:"previous-month","aria-label":v,className:m,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick,children:i==="rtl"?s.jsx(_,{className:o.nav_icon,style:l.nav_icon}):s.jsx(S,{className:o.nav_icon,style:l.nav_icon})}),!e.hideNext&&s.jsx(o0,{name:"next-month","aria-label":j,className:w,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick,children:i==="rtl"?s.jsx(S,{className:o.nav_icon,style:l.nav_icon}):s.jsx(_,{className:o.nav_icon,style:l.nav_icon})})]})}function N4(e){var t=bn().numberOfMonths,r=Wp(),n=r.previousMonth,i=r.nextMonth,a=r.goToMonth,o=r.displayMonths,l=o.findIndex(function(j){return Z2(e.displayMonth,j)}),d=l===0,f=l===o.length-1,h=t>1&&(d||!f),p=t>1&&(f||!d),v=function(){n&&a(n)},m=function(){i&&a(i)};return s.jsx(BJ,{displayMonth:e.displayMonth,hideNext:h,hidePrevious:p,nextMonth:i,previousMonth:n,onPreviousClick:v,onNextClick:m})}function UJ(e){var t,r=bn(),n=r.classNames,i=r.disableNavigation,a=r.styles,o=r.captionLayout,l=r.components,d=(t=l?.CaptionLabel)!==null&&t!==void 0?t:uR,f;return i?f=s.jsx(d,{id:e.id,displayMonth:e.displayMonth}):o==="dropdown"?f=s.jsx(_4,{displayMonth:e.displayMonth,id:e.id}):o==="dropdown-buttons"?f=s.jsxs(s.Fragment,{children:[s.jsx(_4,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id}),s.jsx(N4,{displayMonth:e.displayMonth,displayIndex:e.displayIndex,id:e.id})]}):f=s.jsxs(s.Fragment,{children:[s.jsx(d,{id:e.id,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(N4,{displayMonth:e.displayMonth,id:e.id})]}),s.jsx("div",{className:n.caption,style:a.caption,children:f})}function $J(e){var t=bn(),r=t.footer,n=t.styles,i=t.classNames.tfoot;return r?s.jsx("tfoot",{className:i,style:n.tfoot,children:s.jsx("tr",{children:s.jsx("td",{colSpan:8,children:r})})}):s.jsx(s.Fragment,{})}function zJ(e,t,r){for(var n=r?zd(new Date):wl(new Date,{locale:e,weekStartsOn:t}),i=[],a=0;a<7;a++){var o=xs(n,a);i.push(o)}return i}function qJ(){var e=bn(),t=e.classNames,r=e.styles,n=e.showWeekNumber,i=e.locale,a=e.weekStartsOn,o=e.ISOWeek,l=e.formatters.formatWeekdayName,d=e.labels.labelWeekday,f=zJ(i,a,o);return s.jsxs("tr",{style:r.head_row,className:t.head_row,children:[n&&s.jsx("td",{style:r.head_cell,className:t.head_cell}),f.map(function(h,p){return s.jsx("th",{scope:"col",className:t.head_cell,style:r.head_cell,"aria-label":d(h,{locale:i}),children:l(h,{locale:i})},p)})]})}function VJ(){var e,t=bn(),r=t.classNames,n=t.styles,i=t.components,a=(e=i?.HeadRow)!==null&&e!==void 0?e:qJ;return s.jsx("thead",{style:n.head,className:r.head,children:s.jsx(a,{})})}function WJ(e){var t=bn(),r=t.locale,n=t.formatters.formatDay;return s.jsx(s.Fragment,{children:n(e.date,{locale:r})})}var zb=x.createContext(void 0);function HJ(e){if(!qp(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return s.jsx(zb.Provider,{value:t,children:e.children})}return s.jsx(GJ,{initialProps:e.initialProps,children:e.children})}function GJ(e){var t=e.initialProps,r=e.children,n=t.selected,i=t.min,a=t.max,o=function(f,h,p){var v,m;(v=t.onDayClick)===null||v===void 0||v.call(t,f,h,p);var j=!!(h.selected&&i&&n?.length===i);if(!j){var w=!!(!h.selected&&a&&n?.length===a);if(!w){var _=n?lR([],n):[];if(h.selected){var S=_.findIndex(function(E){return ci(f,E)});_.splice(S,1)}else _.push(f);(m=t.onSelect)===null||m===void 0||m.call(t,_,f,h,p)}}},l={disabled:[]};n&&l.disabled.push(function(f){var h=a&&n.length>a-1,p=n.some(function(v){return ci(v,f)});return!!(h&&!p)});var d={selected:n,onDayClick:o,modifiers:l};return s.jsx(zb.Provider,{value:d,children:r})}function qb(){var e=x.useContext(zb);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function KJ(e,t){var r=t||{},n=r.from,i=r.to;return n&&i?ci(i,e)&&ci(n,e)?void 0:ci(i,e)?{from:i,to:void 0}:ci(n,e)?void 0:Ph(n,e)?{from:e,to:i}:{from:n,to:e}:i?Ph(e,i)?{from:i,to:e}:{from:e,to:i}:n?Od(e,n)?{from:e,to:n}:{from:n,to:e}:{from:e,to:void 0}}var Vb=x.createContext(void 0);function YJ(e){if(!Vp(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return s.jsx(Vb.Provider,{value:t,children:e.children})}return s.jsx(QJ,{initialProps:e.initialProps,children:e.children})}function QJ(e){var t=e.initialProps,r=e.children,n=t.selected,i=n||{},a=i.from,o=i.to,l=t.min,d=t.max,f=function(m,j,w){var _,S;(_=t.onDayClick)===null||_===void 0||_.call(t,m,j,w);var E=KJ(m,n);(S=t.onSelect)===null||S===void 0||S.call(t,E,m,j,w)},h={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a?(h.range_start=[a],o?(h.range_end=[o],ci(a,o)||(h.range_middle=[{after:a,before:o}])):h.range_end=[a]):o&&(h.range_start=[o],h.range_end=[o]),l&&(a&&!o&&h.disabled.push({after:Sx(a,l-1),before:xs(a,l-1)}),a&&o&&h.disabled.push({after:a,before:xs(a,l-1)}),!a&&o&&h.disabled.push({after:Sx(o,l-1),before:xs(o,l-1)})),d){if(a&&!o&&(h.disabled.push({before:xs(a,-d+1)}),h.disabled.push({after:xs(a,d-1)})),a&&o){var p=ol(o,a)+1,v=d-p;h.disabled.push({before:Sx(a,v)}),h.disabled.push({after:xs(o,v)})}!a&&o&&(h.disabled.push({before:xs(o,-d+1)}),h.disabled.push({after:xs(o,d-1)}))}return s.jsx(Vb.Provider,{value:{selected:n,onDayClick:f,modifiers:h},children:r})}function Wb(){var e=x.useContext(Vb);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function _v(e){return Array.isArray(e)?lR([],e):e!==void 0?[e]:[]}function JJ(e){var t={};return Object.entries(e).forEach(function(r){var n=r[0],i=r[1];t[n]=_v(i)}),t}var Do;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(Do||(Do={}));var ZJ=Do.Selected,dc=Do.Disabled,XJ=Do.Hidden,eZ=Do.Today,C1=Do.RangeEnd,E1=Do.RangeMiddle,A1=Do.RangeStart,tZ=Do.Outside;function rZ(e,t,r){var n,i=(n={},n[ZJ]=_v(e.selected),n[dc]=_v(e.disabled),n[XJ]=_v(e.hidden),n[eZ]=[e.today],n[C1]=[],n[E1]=[],n[A1]=[],n[tZ]=[],n);return e.fromDate&&i[dc].push({before:e.fromDate}),e.toDate&&i[dc].push({after:e.toDate}),qp(e)?i[dc]=i[dc].concat(t.modifiers[dc]):Vp(e)&&(i[dc]=i[dc].concat(r.modifiers[dc]),i[A1]=r.modifiers[A1],i[E1]=r.modifiers[E1],i[C1]=r.modifiers[C1]),i}var hR=x.createContext(void 0);function nZ(e){var t=bn(),r=qb(),n=Wb(),i=rZ(t,r,n),a=JJ(t.modifiers),o=cr(cr({},i),a);return s.jsx(hR.Provider,{value:o,children:e.children})}function mR(){var e=x.useContext(hR);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function sZ(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function iZ(e){return!!(e&&typeof e=="object"&&"from"in e)}function aZ(e){return!!(e&&typeof e=="object"&&"after"in e)}function oZ(e){return!!(e&&typeof e=="object"&&"before"in e)}function lZ(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function cZ(e,t){var r,n=t.from,i=t.to;if(n&&i){var a=ol(i,n)<0;a&&(r=[i,n],n=r[0],i=r[1]);var o=ol(e,n)>=0&&ol(i,e)>=0;return o}return i?ci(i,e):n?ci(n,e):!1}function uZ(e){return Y2(e)}function dZ(e){return Array.isArray(e)&&e.every(Y2)}function fZ(e,t){return t.some(function(r){if(typeof r=="boolean")return r;if(uZ(r))return ci(e,r);if(dZ(r))return r.includes(e);if(iZ(r))return cZ(e,r);if(lZ(r))return r.dayOfWeek.includes(e.getDay());if(sZ(r)){var n=ol(r.before,e),i=ol(r.after,e),a=n>0,o=i<0,l=Ph(r.before,r.after);return l?o&&a:a||o}return aZ(r)?ol(e,r.after)>0:oZ(r)?ol(r.before,e)>0:typeof r=="function"?r(e):!1})}function Hb(e,t,r){var n=Object.keys(t).reduce(function(a,o){var l=t[o];return fZ(e,l)&&a.push(o),a},[]),i={};return n.forEach(function(a){return i[a]=!0}),r&&!Z2(e,r)&&(i.outside=!0),i}function hZ(e,t){for(var r=Ki(e[0]),n=F0(e[e.length-1]),i,a,o=r;o<=n;){var l=Hb(o,t),d=!l.disabled&&!l.hidden;if(!d){o=xs(o,1);continue}if(l.selected)return o;l.today&&!a&&(a=o),i||(i=o),o=xs(o,1)}return a||i}var mZ=365;function pR(e,t){var r=t.moveBy,n=t.direction,i=t.context,a=t.modifiers,o=t.retry,l=o===void 0?{count:0,lastFocused:e}:o,d=i.weekStartsOn,f=i.fromDate,h=i.toDate,p=i.locale,v={day:xs,week:yw,month:Ro,year:k$,startOfWeek:function(_){return i.ISOWeek?zd(_):wl(_,{locale:p,weekStartsOn:d})},endOfWeek:function(_){return i.ISOWeek?kE(_):Q2(_,{locale:p,weekStartsOn:d})}},m=v[r](e,n==="after"?1:-1);n==="before"&&f?m=C$([f,m]):n==="after"&&h&&(m=E$([h,m]));var j=!0;if(a){var w=Hb(m,a);j=!w.disabled&&!w.hidden}return j?m:l.count>mZ?l.lastFocused:pR(m,{moveBy:r,direction:n,context:i,modifiers:a,retry:cr(cr({},l),{count:l.count+1})})}var gR=x.createContext(void 0);function pZ(e){var t=Wp(),r=mR(),n=x.useState(),i=n[0],a=n[1],o=x.useState(),l=o[0],d=o[1],f=hZ(t.displayMonths,r),h=i??(l&&t.isDateDisplayed(l))?l:f,p=function(){d(i),a(void 0)},v=function(_){a(_)},m=bn(),j=function(_,S){if(i){var E=pR(i,{moveBy:_,direction:S,context:m,modifiers:r});ci(i,E)||(t.goToDate(E,i),v(E))}},w={focusedDay:i,focusTarget:h,blur:p,focus:v,focusDayAfter:function(){return j("day","after")},focusDayBefore:function(){return j("day","before")},focusWeekAfter:function(){return j("week","after")},focusWeekBefore:function(){return j("week","before")},focusMonthBefore:function(){return j("month","before")},focusMonthAfter:function(){return j("month","after")},focusYearBefore:function(){return j("year","before")},focusYearAfter:function(){return j("year","after")},focusStartOfWeek:function(){return j("startOfWeek","before")},focusEndOfWeek:function(){return j("endOfWeek","after")}};return s.jsx(gR.Provider,{value:w,children:e.children})}function Gb(){var e=x.useContext(gR);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function gZ(e,t){var r=mR(),n=Hb(e,r,t);return n}var Kb=x.createContext(void 0);function vZ(e){if(!oy(e.initialProps)){var t={selected:void 0};return s.jsx(Kb.Provider,{value:t,children:e.children})}return s.jsx(yZ,{initialProps:e.initialProps,children:e.children})}function yZ(e){var t=e.initialProps,r=e.children,n=function(a,o,l){var d,f,h;if((d=t.onDayClick)===null||d===void 0||d.call(t,a,o,l),o.selected&&!t.required){(f=t.onSelect)===null||f===void 0||f.call(t,void 0,a,o,l);return}(h=t.onSelect)===null||h===void 0||h.call(t,a,a,o,l)},i={selected:t.selected,onDayClick:n};return s.jsx(Kb.Provider,{value:i,children:r})}function vR(){var e=x.useContext(Kb);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function xZ(e,t){var r=bn(),n=vR(),i=qb(),a=Wb(),o=Gb(),l=o.focusDayAfter,d=o.focusDayBefore,f=o.focusWeekAfter,h=o.focusWeekBefore,p=o.blur,v=o.focus,m=o.focusMonthBefore,j=o.focusMonthAfter,w=o.focusYearBefore,_=o.focusYearAfter,S=o.focusStartOfWeek,E=o.focusEndOfWeek,k=function(le){var G,se,xe,te;oy(r)?(G=n.onDayClick)===null||G===void 0||G.call(n,e,t,le):qp(r)?(se=i.onDayClick)===null||se===void 0||se.call(i,e,t,le):Vp(r)?(xe=a.onDayClick)===null||xe===void 0||xe.call(a,e,t,le):(te=r.onDayClick)===null||te===void 0||te.call(r,e,t,le)},C=function(le){var G;v(e),(G=r.onDayFocus)===null||G===void 0||G.call(r,e,t,le)},D=function(le){var G;p(),(G=r.onDayBlur)===null||G===void 0||G.call(r,e,t,le)},M=function(le){var G;(G=r.onDayMouseEnter)===null||G===void 0||G.call(r,e,t,le)},F=function(le){var G;(G=r.onDayMouseLeave)===null||G===void 0||G.call(r,e,t,le)},U=function(le){var G;(G=r.onDayPointerEnter)===null||G===void 0||G.call(r,e,t,le)},I=function(le){var G;(G=r.onDayPointerLeave)===null||G===void 0||G.call(r,e,t,le)},K=function(le){var G;(G=r.onDayTouchCancel)===null||G===void 0||G.call(r,e,t,le)},B=function(le){var G;(G=r.onDayTouchEnd)===null||G===void 0||G.call(r,e,t,le)},O=function(le){var G;(G=r.onDayTouchMove)===null||G===void 0||G.call(r,e,t,le)},z=function(le){var G;(G=r.onDayTouchStart)===null||G===void 0||G.call(r,e,t,le)},q=function(le){var G;(G=r.onDayKeyUp)===null||G===void 0||G.call(r,e,t,le)},ue=function(le){var G;switch(le.key){case"ArrowLeft":le.preventDefault(),le.stopPropagation(),r.dir==="rtl"?l():d();break;case"ArrowRight":le.preventDefault(),le.stopPropagation(),r.dir==="rtl"?d():l();break;case"ArrowDown":le.preventDefault(),le.stopPropagation(),f();break;case"ArrowUp":le.preventDefault(),le.stopPropagation(),h();break;case"PageUp":le.preventDefault(),le.stopPropagation(),le.shiftKey?w():m();break;case"PageDown":le.preventDefault(),le.stopPropagation(),le.shiftKey?_():j();break;case"Home":le.preventDefault(),le.stopPropagation(),S();break;case"End":le.preventDefault(),le.stopPropagation(),E();break}(G=r.onDayKeyDown)===null||G===void 0||G.call(r,e,t,le)},ie={onClick:k,onFocus:C,onBlur:D,onKeyDown:ue,onKeyUp:q,onMouseEnter:M,onMouseLeave:F,onPointerEnter:U,onPointerLeave:I,onTouchCancel:K,onTouchEnd:B,onTouchMove:O,onTouchStart:z};return ie}function wZ(){var e=bn(),t=vR(),r=qb(),n=Wb(),i=oy(e)?t.selected:qp(e)?r.selected:Vp(e)?n.selected:void 0;return i}function bZ(e){return Object.values(Do).includes(e)}function _Z(e,t){var r=[e.classNames.day];return Object.keys(t).forEach(function(n){var i=e.modifiersClassNames[n];if(i)r.push(i);else if(bZ(n)){var a=e.classNames["day_".concat(n)];a&&r.push(a)}}),r}function NZ(e,t){var r=cr({},e.styles.day);return Object.keys(t).forEach(function(n){var i;r=cr(cr({},r),(i=e.modifiersStyles)===null||i===void 0?void 0:i[n])}),r}function jZ(e,t,r){var n,i,a,o=bn(),l=Gb(),d=gZ(e,t),f=xZ(e,d),h=wZ(),p=!!(o.onDayClick||o.mode!=="default");x.useEffect(function(){var M;d.outside||l.focusedDay&&p&&ci(l.focusedDay,e)&&((M=r.current)===null||M===void 0||M.focus())},[l.focusedDay,e,r,p,d.outside]);var v=_Z(o,d).join(" "),m=NZ(o,d),j=!!(d.outside&&!o.showOutsideDays||d.hidden),w=(a=(i=o.components)===null||i===void 0?void 0:i.DayContent)!==null&&a!==void 0?a:WJ,_=s.jsx(w,{date:e,displayMonth:t,activeModifiers:d}),S={style:m,className:v,children:_,role:"gridcell"},E=l.focusTarget&&ci(l.focusTarget,e)&&!d.outside,k=l.focusedDay&&ci(l.focusedDay,e),C=cr(cr(cr({},S),(n={disabled:d.disabled,role:"gridcell"},n["aria-selected"]=d.selected,n.tabIndex=k||E?0:-1,n)),f),D={isButton:p,isHidden:j,activeModifiers:d,selectedDays:h,buttonProps:C,divProps:S};return D}function SZ(e){var t=x.useRef(null),r=jZ(e.date,e.displayMonth,t);return r.isHidden?s.jsx("div",{role:"gridcell"}):r.isButton?s.jsx(o0,cr({name:"day",ref:t},r.buttonProps)):s.jsx("div",cr({},r.divProps))}function kZ(e){var t=e.number,r=e.dates,n=bn(),i=n.onWeekNumberClick,a=n.styles,o=n.classNames,l=n.locale,d=n.labels.labelWeekNumber,f=n.formatters.formatWeekNumber,h=f(Number(t),{locale:l});if(!i)return s.jsx("span",{className:o.weeknumber,style:a.weeknumber,children:h});var p=d(Number(t),{locale:l}),v=function(m){i(t,r,m)};return s.jsx(o0,{name:"week-number","aria-label":p,className:o.weeknumber,style:a.weeknumber,onClick:v,children:h})}function CZ(e){var t,r,n=bn(),i=n.styles,a=n.classNames,o=n.showWeekNumber,l=n.components,d=(t=l?.Day)!==null&&t!==void 0?t:SZ,f=(r=l?.WeekNumber)!==null&&r!==void 0?r:kZ,h;return o&&(h=s.jsx("td",{className:a.cell,style:i.cell,children:s.jsx(f,{number:e.weekNumber,dates:e.dates})})),s.jsxs("tr",{className:a.row,style:i.row,children:[h,e.dates.map(function(p){return s.jsx("td",{className:a.cell,style:i.cell,role:"presentation",children:s.jsx(d,{displayMonth:e.displayMonth,date:p})},Dz(p))})]})}function j4(e,t,r){for(var n=r?.ISOWeek?kE(t):Q2(t,r),i=r?.ISOWeek?zd(e):wl(e,r),a=ol(n,i),o=[],l=0;l<=a;l++)o.push(xs(i,l));var d=o.reduce(function(f,h){var p=r?.ISOWeek?CE(h):AE(h,r),v=f.find(function(m){return m.weekNumber===p});return v?(v.dates.push(h),f):(f.push({weekNumber:p,dates:[h]}),f)},[]);return d}function EZ(e,t){var r=j4(Ki(e),F0(e),t);if(t?.useFixedWeeks){var n=Oz(e,t);if(n<6){var i=r[r.length-1],a=i.dates[i.dates.length-1],o=yw(a,6-n),l=j4(yw(a,1),o,t);r.push.apply(r,l)}}return r}function AZ(e){var t,r,n,i=bn(),a=i.locale,o=i.classNames,l=i.styles,d=i.hideHead,f=i.fixedWeeks,h=i.components,p=i.weekStartsOn,v=i.firstWeekContainsDate,m=i.ISOWeek,j=EZ(e.displayMonth,{useFixedWeeks:!!f,ISOWeek:m,locale:a,weekStartsOn:p,firstWeekContainsDate:v}),w=(t=h?.Head)!==null&&t!==void 0?t:VJ,_=(r=h?.Row)!==null&&r!==void 0?r:CZ,S=(n=h?.Footer)!==null&&n!==void 0?n:$J;return s.jsxs("table",{id:e.id,className:o.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"],children:[!d&&s.jsx(w,{}),s.jsx("tbody",{className:o.tbody,style:l.tbody,children:j.map(function(E){return s.jsx(_,{displayMonth:e.displayMonth,dates:E.dates,weekNumber:E.weekNumber},E.weekNumber)})}),s.jsx(S,{displayMonth:e.displayMonth})]})}function PZ(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var TZ=PZ()?x.useLayoutEffect:x.useEffect,P1=!1,RZ=0;function S4(){return"react-day-picker-".concat(++RZ)}function LZ(e){var t,r=e??(P1?S4():null),n=x.useState(r),i=n[0],a=n[1];return TZ(function(){i===null&&a(S4())},[]),x.useEffect(function(){P1===!1&&(P1=!0)},[]),(t=e??i)!==null&&t!==void 0?t:void 0}function DZ(e){var t,r,n=bn(),i=n.dir,a=n.classNames,o=n.styles,l=n.components,d=Wp().displayMonths,f=LZ(n.id?"".concat(n.id,"-").concat(e.displayIndex):void 0),h=n.id?"".concat(n.id,"-grid-").concat(e.displayIndex):void 0,p=[a.month],v=o.month,m=e.displayIndex===0,j=e.displayIndex===d.length-1,w=!m&&!j;i==="rtl"&&(t=[m,j],j=t[0],m=t[1]),m&&(p.push(a.caption_start),v=cr(cr({},v),o.caption_start)),j&&(p.push(a.caption_end),v=cr(cr({},v),o.caption_end)),w&&(p.push(a.caption_between),v=cr(cr({},v),o.caption_between));var _=(r=l?.Caption)!==null&&r!==void 0?r:UJ;return s.jsxs("div",{className:p.join(" "),style:v,children:[s.jsx(_,{id:f,displayMonth:e.displayMonth,displayIndex:e.displayIndex}),s.jsx(AZ,{id:h,"aria-labelledby":f,displayMonth:e.displayMonth})]},e.displayIndex)}function IZ(e){var t=bn(),r=t.classNames,n=t.styles;return s.jsx("div",{className:r.months,style:n.months,children:e.children})}function OZ(e){var t,r,n=e.initialProps,i=bn(),a=Gb(),o=Wp(),l=x.useState(!1),d=l[0],f=l[1];x.useEffect(function(){i.initialFocus&&a.focusTarget&&(d||(a.focus(a.focusTarget),f(!0)))},[i.initialFocus,d,a.focus,a.focusTarget,a]);var h=[i.classNames.root,i.className];i.numberOfMonths>1&&h.push(i.classNames.multiple_months),i.showWeekNumber&&h.push(i.classNames.with_weeknumber);var p=cr(cr({},i.styles.root),i.style),v=Object.keys(n).filter(function(j){return j.startsWith("data-")}).reduce(function(j,w){var _;return cr(cr({},j),(_={},_[w]=n[w],_))},{}),m=(r=(t=n.components)===null||t===void 0?void 0:t.Months)!==null&&r!==void 0?r:IZ;return s.jsx("div",cr({className:h.join(" "),style:p,dir:i.dir,id:i.id,nonce:n.nonce,title:n.title,lang:n.lang},v,{children:s.jsx(m,{children:o.displayMonths.map(function(j,w){return s.jsx(DZ,{displayIndex:w,displayMonth:j},w)})})}))}function MZ(e){var t=e.children,r=oJ(e,["children"]);return s.jsx(kJ,{initialProps:r,children:s.jsx(OJ,{children:s.jsx(vZ,{initialProps:r,children:s.jsx(HJ,{initialProps:r,children:s.jsx(YJ,{initialProps:r,children:s.jsx(nZ,{children:s.jsx(pZ,{children:t})})})})})})})}function FZ(e){return s.jsx(MZ,cr({},e,{children:s.jsx(OZ,{initialProps:e})}))}function yR({className:e,classNames:t,showOutsideDays:r=!0,...n}){return s.jsx(FZ,{showOutsideDays:r,className:Me("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:Me(mp({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:Me(mp({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({...i})=>s.jsx(ik,{className:"h-4 w-4"}),IconRight:({...i})=>s.jsx(jv,{className:"h-4 w-4"})},...n})}yR.displayName="Calendar";function xR({taskId:e,onUploadComplete:t,maxImages:r=10,existingImages:n=[],canDelete:i=!1}){const{toast:a}=qr(),o=x.useRef(null),l=x.useRef(null),[d,f]=x.useState([]),[h,p]=x.useState(null),[v,m]=x.useState(!1),[j,w]=x.useState(null);console.log(" ImageUpload rendered with:",{taskId:e,existingImagesCount:n.length,existingImages:n,newImagesCount:d.length,canDelete:i});const _=async M=>{const F=Array.from(M.target.files||[]);if(F.length===0)return;if(d.length+n.length+F.length>r){a({title:"Too Many Images",description:`You can only upload up to ${r} images per task`,variant:"destructive"});return}const U=F.filter(K=>{const B=K.type.startsWith("image/"),O=K.size<=5*1024*1024;return B||a({title:"Invalid File Type",description:`${K.name} is not an image file`,variant:"destructive"}),O||a({title:"File Too Large",description:`${K.name} exceeds 5MB limit`,variant:"destructive"}),B&&O});if(U.length===0)return;const I=U.map(K=>({id:crypto.randomUUID(),url:URL.createObjectURL(K),file:K,uploading:!0}));f(K=>[...K,...I]),await S(I)},S=async M=>{m(!0);const F=[];for(const U of M)try{const I=U.file.name.split(".").pop(),B=`task-attachments/${`${e}/${crypto.randomUUID()}.${I}`}`,{data:O,error:z}=await Oe.storage.from("task-attachments").upload(B,U.file,{cacheControl:"3600",upsert:!1});if(z)throw z;const{data:{publicUrl:q}}=Oe.storage.from("task-attachments").getPublicUrl(O.path);F.push(q);const{error:ue}=await Oe.from("task_attachments").insert({task_id:e,file_url:q,file_name:U.file.name,file_type:U.file.type,file_size:U.file.size});if(ue)throw console.error("Database insert error:",ue),new Error("Failed to save attachment record");f(ie=>ie.map(le=>le.id===U.id?{...le,uploading:!1}:le))}catch(I){console.error("Upload error:",I),f(K=>K.map(B=>B.id===U.id?{...B,uploading:!1,error:"Upload failed"}:B)),a({title:"Upload Failed",description:`Failed to upload ${U.file.name}`,variant:"destructive"})}m(!1),F.length>0&&t&&(t(F),a({title:"Upload Successful",description:`${F.length} image(s) uploaded successfully`}))},E=M=>{f(F=>{const U=F.find(I=>I.id===M);return U&&URL.revokeObjectURL(U.url),F.filter(I=>I.id!==M)})},k=async M=>{if(!i){a({title:"Permission Denied",description:"You don't have permission to delete images",variant:"destructive"});return}if(confirm("Are you sure you want to delete this image? This cannot be undone.")){w(M);try{const F=M.split("/task-attachments/");if(F.length<2)throw new Error("Invalid image URL");const U=`task-attachments/${F[1]}`,{error:I}=await Oe.storage.from("task-attachments").remove([U]);if(I)throw console.error("Storage delete error:",I),new Error("Failed to delete from storage");const{error:K}=await Oe.from("task_attachments").delete().eq("file_url",M);if(K)throw console.error("Database delete error:",K),new Error("Failed to delete from database");a({title:"Image Deleted",description:"The image has been removed successfully"}),t&&t([])}catch(F){console.error("Delete error:",F),a({title:"Delete Failed",description:F instanceof Error?F.message:"Failed to delete image",variant:"destructive"})}finally{w(null)}}},C=()=>{o.current?.click()},D=()=>{l.current?.click()};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsxs(ke,{type:"button",variant:"outline",onClick:C,disabled:v||d.length+n.length>=r,className:"gap-2",children:[s.jsx(vk,{className:"w-4 h-4"}),"Browse Files"]}),s.jsxs(ke,{type:"button",variant:"outline",onClick:D,disabled:v||d.length+n.length>=r,className:"gap-2",children:[s.jsx(n2,{className:"w-4 h-4"}),"Take Photo"]}),v&&s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(Si,{className:"w-4 h-4 animate-spin"}),"Uploading..."]})]}),s.jsx("input",{ref:o,type:"file",accept:"image/*",multiple:!0,className:"hidden",onChange:_}),s.jsx("input",{ref:l,type:"file",accept:"image/*",capture:"environment",className:"hidden",onChange:_}),(d.length>0||n.length>0)&&s.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4",children:[n.map((M,F)=>s.jsx(it,{className:"overflow-hidden",children:s.jsxs(ot,{className:"p-0 relative group",children:[s.jsx("img",{src:M,alt:`Existing ${F+1}`,className:"w-full h-32 object-cover"}),j===M&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(Si,{className:"w-6 h-6 text-white animate-spin"})}),s.jsx(ke,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(M),disabled:j===M,children:s.jsx(B1,{className:"w-4 h-4"})}),i&&s.jsx(ke,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 left-1 bg-red-500/70 hover:bg-red-600 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>k(M),disabled:j===M,children:s.jsx(xn,{className:"w-4 h-4"})})]})},`existing-${F}`)),d.map(M=>s.jsx(it,{className:"overflow-hidden",children:s.jsxs(ot,{className:"p-0 relative group",children:[s.jsx("img",{src:M.url,alt:M.file.name,className:"w-full h-32 object-cover"}),M.uploading&&s.jsx("div",{className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(Si,{className:"w-6 h-6 text-white animate-spin"})}),M.error&&s.jsx("div",{className:"absolute inset-0 bg-red-500/50 flex items-center justify-center",children:s.jsx("span",{className:"text-white text-xs font-medium",children:M.error})}),!M.uploading&&!M.error&&s.jsxs(s.Fragment,{children:[s.jsx(ke,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 right-1 bg-black/50 hover:bg-black/70 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>p(M.url),children:s.jsx(B1,{className:"w-4 h-4"})}),s.jsx(ke,{type:"button",variant:"ghost",size:"icon",className:"absolute top-1 left-1 bg-red-500/70 hover:bg-red-600 text-white opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>E(M.id),children:s.jsx(xn,{className:"w-4 h-4"})})]})]})},M.id))]}),d.length===0&&n.length===0&&s.jsx(it,{className:"border-dashed",children:s.jsxs(sr,{children:[s.jsx(pr,{className:"text-center text-sm",children:"No Images Attached"}),s.jsx(xa,{className:"text-center",children:"Add photos to document task completion using the buttons above"})]})}),(d.length>0||n.length>0)&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:[d.length+n.length," of ",r," images"]}),s.jsx(Ca,{open:!!h,onOpenChange:()=>p(null),children:s.jsxs(Qi,{className:"max-w-4xl",children:[s.jsx(Ji,{children:s.jsx(Zi,{children:"Image Preview"})}),h&&s.jsx("img",{src:h,alt:"Preview",className:"w-full h-auto max-h-[70vh] object-contain"})]})})]})}const Fh={cleaning_daily:"Daily Cleaning",cleaning_weekly:"Weekly Cleaning",temperature:"Temperature Log",opening:"Opening Checklist",closing:"Closing Checklist",maintenance:"Maintenance",others:"Others"},Bh={critical:"Critical",important:"Important",normal:"Normal"},BZ=iJ({title:av().min(3,"Title must be at least 3 characters"),description:av().optional(),task_type:b4(["cleaning_daily","cleaning_weekly","temperature","opening","closing","maintenance","others"]),priority:b4(["critical","important","normal"]),assigned_to:av().min(1,"Please assign this task to someone"),scheduled_date:sJ({required_error:"Please select a date"}),scheduled_time:av().optional(),estimated_minutes:rJ().min(1).max(480).optional(),requires_approval:nJ().default(!1)});function k4({onSubmit:e,onCancel:t,defaultValues:r,users:n=[],isLoading:i=!1,isEditing:a=!1,taskId:o,userRole:l}){const{toast:d}=qr(),[f,h]=x.useState(!1),[p,v]=x.useState([]),[m,j]=x.useState(!1);console.log(" TaskForm - User role:",l);const w=l==="admin"||l==="owner"||l==="manager"||l==="leader_chef";console.log(" TaskForm - Can delete images:",w),x.useEffect(()=>{a&&o&&_()},[a,o]);const _=async()=>{if(o){j(!0);try{const{data:k,error:C}=await Oe.from("task_attachments").select("*").eq("task_id",o).order("uploaded_at",{ascending:!0});if(C){console.error("Error loading attachments:",C);return}v(k?.map(D=>D.file_url)||[])}catch(k){console.error("Error loading attachments:",k)}finally{j(!1)}}},S=SQ({resolver:AQ(BZ),defaultValues:{title:r?.title||"",description:r?.description||"",task_type:r?.task_type||"others",priority:r?.priority||"normal",assigned_to:r?.assigned_to||"",scheduled_date:r?.scheduled_date||new Date,scheduled_time:r?.scheduled_time||"",estimated_minutes:r?.estimated_minutes||30,requires_approval:r?.requires_approval||!1}}),E=async k=>{try{h(!0);const C={title:k.title,description:k.description,task_type:k.task_type,priority:k.priority,assigned_to:k.assigned_to,scheduled_date:on(k.scheduled_date,"yyyy-MM-dd"),scheduled_time:k.scheduled_time||void 0,estimated_minutes:k.estimated_minutes,requires_approval:k.requires_approval};await e(C),d({title:"Success!",description:"Task created successfully"}),S.reset()}catch(C){console.error("Error submitting task:",C),d({title:"Error",description:"Failed to create task. Please try again.",variant:"destructive"})}finally{h(!1)}};return s.jsx(aJ,{...S,children:s.jsxs("form",{onSubmit:S.handleSubmit(E),className:"space-y-6",children:[s.jsx(xu,{control:S.control,name:"title",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Task Title *"}),s.jsx(mc,{children:s.jsx(er,{placeholder:"e.g., Check refrigerator temperature",...k})}),s.jsx(pc,{})]})}),s.jsx(xu,{control:S.control,name:"description",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Description"}),s.jsx(mc,{children:s.jsx(W0,{placeholder:"Add any additional details or instructions...",className:"resize-none",rows:3,...k})}),s.jsx(Qm,{children:"Optional notes or instructions for this task"}),s.jsx(pc,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(xu,{control:S.control,name:"task_type",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Task Type *"}),s.jsxs(Ir,{onValueChange:k.onChange,defaultValue:k.value,children:[s.jsx(mc,{children:s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select task type"})})}),s.jsx(Fr,{children:Object.keys(Fh).map(C=>s.jsx(et,{value:C,children:Fh[C]},C))})]}),s.jsx(pc,{})]})}),s.jsx(xu,{control:S.control,name:"priority",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Priority *"}),s.jsxs(Ir,{onValueChange:k.onChange,defaultValue:k.value,children:[s.jsx(mc,{children:s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select priority"})})}),s.jsx(Fr,{children:Object.keys(Bh).map(C=>s.jsx(et,{value:C,children:s.jsxs("span",{className:"flex items-center gap-2",children:[s.jsx("span",{className:Me("w-2 h-2 rounded-full",C==="critical"&&"bg-red-500",C==="important"&&"bg-yellow-500",C==="normal"&&"bg-green-500")}),Bh[C]]})},C))})]}),s.jsx(pc,{})]})})]}),s.jsx(xu,{control:S.control,name:"assigned_to",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Assign To *"}),s.jsxs(Ir,{onValueChange:k.onChange,defaultValue:k.value,children:[s.jsx(mc,{children:s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Select a user",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ru,{className:"w-4 h-4"}),s.jsx("span",{children:k.value&&k.value!=="unassigned"?n.find(C=>C.user_id===k.value)?.display_name||"Select user":"Select a team member"})]})})})}),s.jsx(Fr,{children:n.length===0?s.jsx("div",{className:"px-2 py-6 text-center text-sm text-muted-foreground",children:"No team members found"}):n.map(C=>s.jsx(et,{value:C.user_id,children:C.display_name},C.user_id))})]}),s.jsx(Qm,{children:"Assign this task to a team member"}),s.jsx(pc,{})]})}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[s.jsx(xu,{control:S.control,name:"scheduled_date",render:({field:k})=>s.jsxs(fc,{className:"flex flex-col",children:[s.jsx(hc,{children:"Scheduled Date *"}),s.jsxs(ch,{children:[s.jsx(uh,{asChild:!0,children:s.jsx(mc,{children:s.jsxs(ke,{variant:"outline",className:Me("w-full pl-3 text-left font-normal",!k.value&&"text-muted-foreground"),children:[k.value?on(k.value,"PPP"):s.jsx("span",{children:"Pick a date"}),s.jsx(Ya,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),s.jsx(Md,{className:"w-auto p-0",align:"start",children:s.jsx(yR,{mode:"single",selected:k.value,onSelect:k.onChange,disabled:C=>C<new Date(new Date().setHours(0,0,0,0)),initialFocus:!0})})]}),s.jsx(pc,{})]})}),s.jsx(xu,{control:S.control,name:"scheduled_time",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Scheduled Time"}),s.jsx(mc,{children:s.jsxs("div",{className:"relative",children:[s.jsx(Xn,{className:"absolute left-3 top-3 h-4 w-4 text-muted-foreground"}),s.jsx(er,{type:"time",className:"pl-10",placeholder:"09:00",...k})]})}),s.jsx(Qm,{children:"Optional specific time"}),s.jsx(pc,{})]})})]}),s.jsx(xu,{control:S.control,name:"estimated_minutes",render:({field:k})=>s.jsxs(fc,{children:[s.jsx(hc,{children:"Estimated Duration (minutes)"}),s.jsx(mc,{children:s.jsx(er,{type:"number",min:"1",max:"480",placeholder:"30",...k,onChange:C=>k.onChange(Number(C.target.value))})}),s.jsx(Qm,{children:"How long do you expect this task to take?"}),s.jsx(pc,{})]})}),a&&o&&s.jsxs(s.Fragment,{children:[s.jsx(Hs,{className:"my-6"}),s.jsxs("div",{className:"space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(n2,{className:"w-5 h-5 text-muted-foreground"}),s.jsx("h3",{className:"text-lg font-semibold",children:"Photo Attachments"})]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Add photos to document this task",w&&"  You can delete images as an admin/leader"]}),s.jsx(xR,{taskId:o,existingImages:p,onUploadComplete:k=>{console.log("Images uploaded:",k),_()},maxImages:10,canDelete:w})]})]}),s.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsx(wn,{className:"w-4 h-4"}),s.jsx("span",{children:"* Required fields"})]}),s.jsxs("div",{className:"flex items-center gap-3",children:[t&&s.jsx(ke,{type:"button",variant:"outline",onClick:t,disabled:f||i,children:"Cancel"}),s.jsx(ke,{type:"submit",disabled:f||i,children:f?a?"Saving...":"Creating...":a?"Save Task Changes":"Create Task"})]})]})]})})}const UZ={cleaning_daily:"",cleaning_weekly:"",temperature:"",opening:"",closing:"",maintenance:"",others:""},$Z={not_started:"bg-gray-100 text-gray-700 border-gray-300",in_progress:"bg-blue-100 text-blue-700 border-blue-300",completed:"bg-green-100 text-green-700 border-green-300",overdue:"bg-red-100 text-red-700 border-red-300",skipped:"bg-yellow-100 text-yellow-700 border-yellow-300"},zZ={critical:"bg-red-500",important:"bg-yellow-500",normal:"bg-green-500"};function ov({task:e,onView:t,onComplete:r,onDelete:n,showActions:i=!0}){const a=UZ[e.task_type]||"",o=$Z[e.status],l=zZ[e.priority],d=e.status==="completed",f=e.status==="overdue";return s.jsxs(it,{className:Me("transition-all hover:shadow-md",d&&"opacity-75"),children:[s.jsx(sr,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:Me("w-12 h-12 rounded-lg flex items-center justify-center text-2xl flex-shrink-0",d?"bg-green-100":f?"bg-red-100":"bg-primary/10"),children:a}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("div",{className:Me("w-2 h-2 rounded-full flex-shrink-0",l),title:Bh[e.priority]}),s.jsx("h3",{className:Me("font-semibold text-base truncate",d&&"line-through text-muted-foreground"),title:e.title,children:e.title})]}),s.jsx(pt,{variant:"secondary",className:"text-xs",children:Fh[e.task_type]})]})]}),i&&s.jsxs(O2,{children:[s.jsx(M2,{asChild:!0,children:s.jsx(ke,{variant:"ghost",size:"icon",className:"h-8 w-8",children:s.jsx(lk,{className:"h-4 w-4"})})}),s.jsxs(O0,{align:"end",children:[t&&s.jsxs(dl,{onClick:()=>t(e),children:[s.jsx(Tu,{className:"mr-2 h-4 w-4"}),"View Details"]}),r&&e.status!=="completed"&&s.jsxs(dl,{onClick:()=>r(e),children:[s.jsx(ji,{className:"mr-2 h-4 w-4"}),"Mark Complete"]}),n&&s.jsxs(dl,{onClick:()=>n(e),className:"text-red-600",children:[s.jsx(Uu,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})]})}),s.jsxs(ot,{className:"pt-0",children:[e.description&&!d&&s.jsx("p",{className:"text-sm text-muted-foreground mb-3 line-clamp-2",children:e.description}),s.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Xn,{className:"w-4 h-4"}),s.jsxs("span",{children:[on(new Date(e.scheduled_date),"MMM d, yyyy"),e.scheduled_time&&` at ${e.scheduled_time}`]})]}),e.assigned_user&&s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx(Ru,{className:"w-4 h-4"}),s.jsx("span",{children:e.assigned_user.display_name})]}),e.estimated_minutes&&s.jsx("div",{className:"flex items-center gap-1.5",children:s.jsxs("span",{className:"text-xs",children:[" ",e.estimated_minutes," min"]})})]}),s.jsxs("div",{className:"mt-3 pt-3 border-t",children:[s.jsx(pt,{variant:"outline",className:Me("font-medium",o),children:e.status.replace("_"," ").toUpperCase()}),d&&e.completed_at&&s.jsxs("span",{className:"ml-2 text-xs text-muted-foreground",children:["Completed ",on(new Date(e.completed_at),"MMM d 'at' h:mm a")]})]}),!d&&r&&s.jsxs(ke,{variant:"outline",size:"sm",className:"w-full mt-3",onClick:()=>r(e),children:[s.jsx(ji,{className:"w-4 h-4 mr-2"}),"Mark as Complete"]})]})]})}const qZ={cleaning_daily:"",cleaning_weekly:"",temperature:"",opening:"",closing:"",inspection:"",maintenance:""},VZ={not_started:"bg-gray-100 text-gray-700 border-gray-300",in_progress:"bg-blue-100 text-blue-700 border-blue-300",completed:"bg-green-100 text-green-700 border-green-300",overdue:"bg-red-100 text-red-700 border-red-300",skipped:"bg-gray-100 text-gray-500 border-gray-300"},WZ={critical:"bg-red-500",important:"bg-yellow-500",normal:"bg-green-500"};function HZ({task:e,open:t,onOpenChange:r,onComplete:n,onStatusChange:i,onEdit:a,onDelete:o,onAddNote:l}){const{toast:d}=qr(),[f,h]=x.useState(""),[p,v]=x.useState(!1),[m,j]=x.useState([]),[w,_]=x.useState(!1);x.useEffect(()=>{t&&e.id&&S()},[t,e.id]);const S=async()=>{console.log(" Loading attachments for task:",e.id),_(!0);try{const{data:I,error:K}=await Oe.from("task_attachments").select("*").eq("task_id",e.id).order("uploaded_at",{ascending:!0});if(K){console.error(" Error loading attachments:",K);return}console.log(" Loaded attachments from database:",I);const B=I?.map(O=>O.file_url)||[];console.log(" Attachment URLs:",B),j(B)}catch(I){console.error(" Error loading attachments:",I)}finally{_(!1)}},E=e.scheduled_date?on(new Date(e.scheduled_date),"MMM d, yyyy"):"Not scheduled",k=e.scheduled_time||"No specific time",C=I=>I.split(" ").map(K=>K[0]).join("").toUpperCase().slice(0,2),D=I=>{i&&(i(e.id,I),d({title:"Status Updated",description:`Task status changed to ${I.replace("_"," ")}`}))},M=()=>{n&&n(e)},F=()=>{f.trim()&&l&&(l(e.id,f.trim()),h(""),v(!1),d({title:"Note Added",description:"Your note has been saved"}))},U=()=>{confirm(`Are you sure you want to delete "${e.title}"?`)&&o&&(o(e),r(!1))};return s.jsx(Ca,{open:t,onOpenChange:r,children:s.jsxs(Qi,{className:"max-w-3xl max-h-[90vh] overflow-y-auto",children:[s.jsx(Ji,{children:s.jsx("div",{className:"flex items-start justify-between",children:s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("div",{className:"text-4xl",children:qZ[e.task_type]||""}),s.jsxs("div",{children:[s.jsx(Zi,{className:"text-2xl",children:e.title}),s.jsx(bl,{children:Fh[e.task_type]})]})]})})}),s.jsxs("div",{className:"space-y-6",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[s.jsx(pt,{variant:"outline",className:`${VZ[e.status]} border`,children:e.status.replace("_"," ").toUpperCase()}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("div",{className:`w-3 h-3 rounded-full ${WZ[e.priority]}`}),s.jsxs("span",{className:"text-sm font-medium",children:[Bh[e.priority]," Priority"]})]}),e.requires_approval&&s.jsx(pt,{variant:"secondary",children:"Requires Approval"})]}),s.jsx(Hs,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs(it,{children:[s.jsx(sr,{className:"pb-3",children:s.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[s.jsx(Ya,{className:"w-4 h-4"}),"Scheduled Date"]})}),s.jsx(ot,{children:s.jsx("p",{className:"font-medium",children:E})})]}),s.jsxs(it,{children:[s.jsx(sr,{className:"pb-3",children:s.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[s.jsx(Xn,{className:"w-4 h-4"}),"Scheduled Time"]})}),s.jsx(ot,{children:s.jsx("p",{className:"font-medium",children:k})})]}),s.jsxs(it,{children:[s.jsx(sr,{className:"pb-3",children:s.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[s.jsx(Ru,{className:"w-4 h-4"}),"Assigned To"]})}),s.jsx(ot,{children:e.assigned_to?s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(Qd,{className:"w-8 h-8",children:[s.jsx(ty,{src:e.assigned_user?.avatar_url}),s.jsx(Jd,{children:e.assigned_user?.display_name?C(e.assigned_user.display_name):"?"})]}),s.jsx("span",{className:"font-medium",children:e.assigned_user?.display_name||"Unknown User"})]}):s.jsx("p",{className:"text-muted-foreground",children:"Unassigned"})})]}),s.jsxs(it,{children:[s.jsx(sr,{className:"pb-3",children:s.jsxs(pr,{className:"text-sm flex items-center gap-2",children:[s.jsx(Xn,{className:"w-4 h-4"}),"Estimated Duration"]})}),s.jsx(ot,{children:s.jsx("p",{className:"font-medium",children:e.estimated_minutes?`${e.estimated_minutes} minutes`:"Not specified"})})]})]}),e.description&&s.jsxs(s.Fragment,{children:[s.jsx(Hs,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-semibold mb-2 flex items-center gap-2",children:[s.jsx(dv,{className:"w-4 h-4"}),"Description"]}),s.jsx("p",{className:"text-sm text-muted-foreground whitespace-pre-wrap",children:e.description})]})]}),e.completed_at&&s.jsxs(s.Fragment,{children:[s.jsx(Hs,{}),s.jsxs(it,{className:"bg-green-50 border-green-200",children:[s.jsx(sr,{className:"pb-3",children:s.jsxs(pr,{className:"text-sm flex items-center gap-2 text-green-700",children:[s.jsx(Nc,{className:"w-4 h-4"}),"Completed"]})}),s.jsxs(ot,{className:"space-y-2",children:[s.jsxs("p",{className:"text-sm",children:[s.jsx("span",{className:"font-medium",children:"Date:"})," ",on(new Date(e.completed_at),"MMM d, yyyy 'at' h:mm a")]}),e.completed_user&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"By:"}),s.jsx(Qd,{className:"w-6 h-6",children:s.jsx(Jd,{className:"text-xs",children:C(e.completed_user.display_name)})}),s.jsx("span",{className:"text-sm",children:e.completed_user.display_name})]}),e.notes&&s.jsxs("div",{className:"text-sm space-y-2",children:[s.jsx("span",{className:"font-medium block mb-2",children:"Notes & Comments:"}),s.jsx("div",{className:"bg-muted/50 p-3 rounded-md whitespace-pre-wrap text-sm",children:e.notes})]})]})]})]}),s.jsx(Hs,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(n2,{className:"w-4 h-4"}),"Photo Attachments"]}),s.jsx(xR,{taskId:e.id,existingImages:m,onUploadComplete:I=>{console.log("Images uploaded:",I),S()},maxImages:10})]}),s.jsx(Hs,{}),s.jsxs("div",{children:[s.jsxs("div",{className:"flex items-center justify-between mb-3",children:[s.jsxs("h3",{className:"text-sm font-semibold flex items-center gap-2",children:[s.jsx(dv,{className:"w-4 h-4"}),"Notes & Comments"]}),!p&&s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>v(!0),children:"Add Note"})]}),p&&s.jsx(it,{className:"mb-4",children:s.jsxs(ot,{className:"pt-4 space-y-3",children:[s.jsx(At,{htmlFor:"note",children:"Add a note"}),s.jsx(W0,{id:"note",placeholder:"Enter your note here...",value:f,onChange:I=>h(I.target.value),rows:3}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx(ke,{onClick:F,size:"sm",children:"Save Note"}),s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>{h(""),v(!1)},children:"Cancel"})]})]})}),e.notes?s.jsx("div",{className:"bg-muted/50 p-4 rounded-md whitespace-pre-wrap text-sm",children:e.notes}):s.jsx(it,{className:"border-dashed",children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(dv,{className:"w-8 h-8 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"No notes yet. Add one to get started."})]})})]}),s.jsx(Hs,{}),s.jsxs("div",{children:[s.jsxs("h3",{className:"text-sm font-semibold mb-3 flex items-center gap-2",children:[s.jsx(p_,{className:"w-4 h-4"}),"Activity History"]}),s.jsx(it,{className:"border-dashed",children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-8",children:[s.jsx(p_,{className:"w-8 h-8 text-muted-foreground mb-2"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Activity tracking coming soon"})]})})]})]}),s.jsx(Zh,{className:"flex-col sm:flex-row gap-2",children:s.jsxs("div",{className:"flex flex-1 gap-2",children:[e.status!=="completed"&&s.jsxs(ke,{onClick:M,className:"flex-1 sm:flex-initial",variant:"default",children:[s.jsx(Nc,{className:"w-4 h-4 mr-2"}),"Mark Complete"]}),e.status==="not_started"&&s.jsx(ke,{onClick:()=>D("in_progress"),variant:"outline",className:"flex-1 sm:flex-initial",children:"Start Task"}),a&&s.jsx(ke,{onClick:()=>a(e),variant:"outline",size:"icon",children:s.jsx(m0,{className:"w-4 h-4"})}),o&&s.jsx(ke,{onClick:U,variant:"outline",size:"icon",className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:s.jsx(Uu,{className:"w-4 h-4"})})]})})]})})}const wR=x.memo(()=>{const e=Array.from({length:24},(t,r)=>r);return s.jsxs("div",{className:"relative h-[1440px] bg-muted/20",children:[e.map(t=>{const r=t/24*100,n=t.toString().padStart(2,"0")+":00";return s.jsxs("div",{className:"absolute left-0 right-0 border-t border-muted",style:{top:`${r}%`},children:[s.jsx("div",{className:"absolute -left-1 -top-3 w-16 text-right pr-2",children:s.jsx("span",{className:"text-xs font-medium text-muted-foreground",children:n})}),s.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-muted/40",style:{top:"25%"}}),s.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-muted/40",style:{top:"50%"}}),s.jsx("div",{className:"absolute left-0 right-0 border-t border-dashed border-muted/40",style:{top:"75%"}})]},t)}),s.jsx("div",{className:"absolute left-16 top-0 bottom-0 border-r-2 border-muted"})]})});wR.displayName="TimelineGrid";const GZ={cleaning_daily:{bg:"bg-blue-100 dark:bg-blue-950",border:"border-blue-300 dark:border-blue-700",text:"text-blue-900 dark:text-blue-100"},cleaning_weekly:{bg:"bg-purple-100 dark:bg-purple-950",border:"border-purple-300 dark:border-purple-700",text:"text-purple-900 dark:text-purple-100"},temperature:{bg:"bg-orange-100 dark:bg-orange-950",border:"border-orange-300 dark:border-orange-700",text:"text-orange-900 dark:text-orange-100"},opening:{bg:"bg-green-100 dark:bg-green-950",border:"border-green-300 dark:border-green-700",text:"text-green-900 dark:text-green-100"},closing:{bg:"bg-red-100 dark:bg-red-950",border:"border-red-300 dark:border-red-700",text:"text-red-900 dark:text-red-100"},maintenance:{bg:"bg-yellow-100 dark:bg-yellow-950",border:"border-yellow-300 dark:border-yellow-700",text:"text-yellow-900 dark:text-yellow-100"},others:{bg:"bg-gray-100 dark:bg-gray-800",border:"border-gray-300 dark:border-gray-600",text:"text-gray-900 dark:text-gray-100"}},KZ={completed:"opacity-60",in_progress:"ring-2 ring-blue-500",overdue:"ring-2 ring-red-500",skipped:"opacity-40",not_started:""},bR=x.memo(({task:e,style:t,onClick:r,onComplete:n})=>{const i=GZ[e.task_type],a=KZ[e.status],o=e.status==="completed",l=e.status==="overdue",d=e.status!=="completed"&&e.status!=="skipped";return s.jsx(n3,{children:s.jsxs(DO,{children:[s.jsx(IO,{asChild:!0,children:s.jsxs("div",{style:t,className:Me("border-l-4 rounded-lg p-2 cursor-pointer transition-all hover:shadow-md",i.bg,i.border,i.text,a,"group relative overflow-hidden"),onClick:r,children:[s.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-center gap-1.5",children:[o&&s.jsx(ji,{className:"w-3.5 h-3.5 flex-shrink-0 text-green-600"}),l&&s.jsx(wn,{className:"w-3.5 h-3.5 flex-shrink-0 text-red-600"}),s.jsx("h4",{className:Me("text-sm font-medium truncate",o&&"line-through"),children:e.title})]}),e.scheduled_time&&s.jsxs("div",{className:"flex items-center gap-1 mt-0.5",children:[s.jsx(Xn,{className:"w-3 h-3 opacity-70"}),s.jsx("span",{className:"text-xs opacity-70",children:e.scheduled_time}),e.estimated_minutes&&s.jsxs("span",{className:"text-xs opacity-70",children:["(",e.estimated_minutes,"m)"]})]})]}),e.priority==="critical"&&s.jsx(pt,{variant:"destructive",className:"text-xs h-5 px-1.5",children:"!"}),e.priority==="important"&&s.jsx(pt,{variant:"secondary",className:"text-xs h-5 px-1.5",children:""})]}),e.assigned_user&&s.jsx("div",{className:"text-xs opacity-70 truncate",children:e.assigned_user.display_name}),d&&n&&s.jsx(ke,{size:"sm",variant:"ghost",className:Me("absolute top-1 right-1 h-6 w-6 p-0","opacity-0 group-hover:opacity-100 transition-opacity",i.text),onClick:f=>{f.stopPropagation(),n()},children:s.jsx(ji,{className:"w-4 h-4"})})]})}),s.jsx(s3,{side:"right",className:"max-w-xs",children:s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-semibold",children:e.title}),e.description&&s.jsx("p",{className:"text-sm text-muted-foreground",children:e.description}),s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Status: ",e.status.replace("_"," ")]})]})})]})})});bR.displayName="TaskBlock";function YZ({tasks:e,selectedDate:t,onTaskClick:r,onTaskComplete:n}){const i=new Date,a=on(t,"yyyy-MM-dd")===on(i,"yyyy-MM-dd"),o=x.useMemo(()=>{const h=on(t,"yyyy-MM-dd");return e.filter(p=>p.scheduled_date?on(Uz(p.scheduled_date),"yyyy-MM-dd")===h:!1)},[e,t]),l=x.useMemo(()=>[...o].sort((h,p)=>{const v=h.scheduled_time||"00:00",m=p.scheduled_time||"00:00";return v.localeCompare(m)}),[o]),d=x.useMemo(()=>{if(!a)return null;const h=i.getHours(),p=i.getMinutes();return(h*60+p)/1440*100},[a,i]),f=x.useMemo(()=>{const h=new Map;return l.forEach(p=>{const v=p.scheduled_time||"00:00",m=parseInt(v.split(":")[0]);h.has(m)||h.set(m,[]),h.get(m).push(p)}),h},[l]);return s.jsxs(it,{className:"w-full",children:[s.jsx(sr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(Xn,{className:"w-5 h-5"}),s.jsxs("span",{children:["Timeline - ",on(t,"EEEE, MMMM d, yyyy")]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.length," ",l.length===1?"task":"tasks"]})]})}),s.jsx(ot,{className:"p-0",children:s.jsxs(J0,{className:"w-full",children:[s.jsxs("div",{className:"relative min-w-[800px]",children:[s.jsx(wR,{}),a&&d!==null&&s.jsxs("div",{className:"absolute left-0 right-0 z-20 border-t-2 border-red-500",style:{top:`${d}%`},children:[s.jsx("div",{className:"absolute -left-1 -top-2 w-2 h-2 rounded-full bg-red-500"}),s.jsx("div",{className:"absolute left-2 -top-3 text-xs font-medium text-red-500",children:on(i,"HH:mm")})]}),s.jsx("div",{className:"absolute inset-0 z-10",children:Array.from(f.entries()).map(([h,p])=>s.jsx("div",{className:"relative",children:p.map((v,m)=>{const j=v.scheduled_time||"00:00",[w,_]=j.split(":").map(Number),E=(w*60+_)/1440*100,C=(v.estimated_minutes||30)/1440*100,D=m*5;return s.jsx(bR,{task:v,style:{position:"absolute",top:`${E}%`,left:`${80+D}px`,right:"16px",minHeight:`${Math.max(C,2)}%`},onClick:()=>r?.(v),onComplete:()=>n?.(v)},v.id)})},h))}),l.length===0&&s.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:s.jsxs("div",{className:"text-center text-muted-foreground py-12",children:[s.jsx(Xn,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks scheduled"}),s.jsxs("p",{className:"text-sm",children:["Create a task for ",on(t,"MMMM d")," to see it here"]})]})})]}),s.jsx(_b,{orientation:"horizontal"})]})})]})}function QZ(e){const[t,r]=x.useState([]),[n,i]=x.useState([]),[a,o]=x.useState(!0),[l,d]=x.useState(null),f=x.useCallback(async k=>{try{o(!0),d(null);let C=Oe.from("routine_tasks").select("*").order("scheduled_date",{ascending:!1});e&&(C=C.eq("organization_id",e)),k&&(k.status&&(C=C.eq("status",k.status)),k.task_type&&(C=C.eq("task_type",k.task_type)),k.assigned_to&&(C=C.eq("assigned_to",k.assigned_to)),k.date_from&&(C=C.gte("scheduled_date",k.date_from)),k.date_to&&(C=C.lte("scheduled_date",k.date_to)),k.priority&&(C=C.eq("priority",k.priority)));const{data:D,error:M}=await C;if(M)throw M;r(D||[])}catch(C){console.error("Error fetching routine tasks:",C),d(C)}finally{o(!1)}},[e]),h=x.useCallback(async()=>{try{let k=Oe.from("task_templates").select("*").order("name");e&&(k=k.eq("organization_id",e));const{data:C,error:D}=await k;if(D)throw D;i(C||[])}catch(k){console.error("Error fetching task templates:",k)}},[e]),p=async k=>{try{const{data:C,error:D}=await Oe.from("routine_tasks").insert({...k,organization_id:e,status:"not_started",requires_approval:k.requires_approval||!1,recurrence_pattern:k.recurrence_pattern}).select("*").single();if(D)throw D;return C&&r(M=>[C,...M]),C}catch(C){return console.error("Error creating routine task:",C),d(C),null}},v=async(k,C)=>{try{const{error:D}=await Oe.from("routine_tasks").update(C).eq("id",k);if(D)throw D;return r(M=>M.map(F=>F.id===k?{...F,...C}:F)),!0}catch(D){return console.error("Error updating routine task:",D),d(D),!1}},m=async(k,C,D)=>{const M={status:C};return C==="completed"?(M.completed_at=new Date().toISOString(),D&&(M.completed_by=D)):C==="in_progress"&&(M.started_at=new Date().toISOString()),v(k,M)},j=async k=>{try{const{error:C}=await Oe.from("routine_tasks").delete().eq("id",k);if(C)throw C;return r(D=>D.filter(M=>M.id!==k)),!0}catch(C){return console.error("Error deleting routine task:",C),d(C),!1}},w=k=>t.filter(C=>C.status===k),_=()=>{const k=new Date;return t.filter(C=>C.status!=="completed"&&C.scheduled_date&&new Date(C.scheduled_date)<k)},S=()=>{const k=new Date().toISOString().split("T")[0];return t.filter(C=>C.scheduled_date?.startsWith(k))},E=async(k,C,D)=>{const M=n.find(F=>F.id===k);return M?p({title:M.name,description:M.description,task_type:M.task_type,scheduled_date:C,assigned_to:D,priority:"normal"}):(d(new Error("Template not found")),null)};return x.useEffect(()=>{e&&(f(),h())},[e,f,h]),x.useEffect(()=>{if(!e)return;const k=Oe.channel(`routine-tasks:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"routine_tasks",filter:`organization_id=eq.${e}`},C=>{C.eventType==="INSERT"?r(D=>[C.new,...D]):C.eventType==="UPDATE"?r(D=>D.map(M=>M.id===C.new.id?{...M,...C.new}:M)):C.eventType==="DELETE"&&r(D=>D.filter(M=>M.id!==C.old.id))}).subscribe();return()=>{Oe.removeChannel(k)}},[e]),{tasks:t,templates:n,loading:a,error:l,fetchTasks:f,fetchTemplates:h,createTask:p,updateTask:v,updateTaskStatus:m,deleteTask:j,getTasksByStatus:w,getOverdueTasks:_,getTodayTasks:S,createFromTemplate:E,refresh:f}}function ly(e){const[t,r]=x.useState([]),[n,i]=x.useState(!0),[a,o]=x.useState(null),l=x.useCallback(async k=>{try{i(!0),o(null);let C=Oe.from("profiles").select("*, user_documents:user_documents(*)").order("display_name");e&&(C=C.eq("organization_id",e)),k&&(k.department_id&&(C=C.eq("department_id",k.department_id)),k.search&&(C=C.or(`display_name.ilike.%${k.search}%,email.ilike.%${k.search}%,user_id.eq.${k.search}`)));const{data:D,error:M}=await C;if(M)throw M;const{data:F,error:U}=await Oe.from("user_roles").select("user_id, role");if(U)throw U;const I=new Map((F||[]).map(B=>[B.user_id,B.role]));let K=(D||[]).map(B=>({...B,role:I.get(B.user_id)||"staff"}));k?.role&&k.role!=="all"&&(K=K.filter(B=>B.role===k.role)),r(K)}catch(C){console.error("Error fetching users:",C),o(C)}finally{i(!1)}},[e]),d=async k=>{try{const{data:C,error:D}=await Oe.from("profiles").insert({...k,organization_id:e}).select(`
          *,
          user_documents:user_documents(*)
        `).single();if(D)throw D;return C&&r(M=>[...M,C]),C}catch(C){return console.error("Error creating user:",C),o(C),null}},f=async(k,C)=>{try{const{role:D,...M}=C;if(Object.keys(M).length>0){const{error:F}=await Oe.from("profiles").update(M).eq("user_id",k);if(F)throw F}if(D){const{data:F}=await Oe.from("user_roles").select("id").eq("user_id",k).single();if(F){const{error:U}=await Oe.from("user_roles").update({role:D}).eq("user_id",k);if(U)throw U}else{const{error:U}=await Oe.from("user_roles").insert({user_id:k,role:D});if(U)throw U}}return r(F=>F.map(U=>U.user_id===k?{...U,...C}:U)),!0}catch(D){return console.error("Error updating user:",D),o(D),!1}},h=async k=>{try{const{error:C}=await Oe.from("profiles").update({employment_status:"terminated",terminated_at:new Date().toISOString()}).eq("user_id",k);if(C)throw C;return r(D=>D.map(M=>M.user_id===k?{...M,employment_status:"terminated",terminated_at:new Date().toISOString()}:M)),!0}catch(C){return console.error("Error deleting user:",C),o(C),!1}},p=async(k,C,D)=>{try{const M=C.name.split(".").pop(),U=`user-documents/${`${k}/${D}_${Date.now()}.${M}`}`,{error:I}=await Oe.storage.from("documents").upload(U,C);if(I)throw I;const{data:K}=Oe.storage.from("documents").getPublicUrl(U),{data:B,error:O}=await Oe.from("user_documents").insert({user_id:k,document_type:D,document_name:C.name,file_url:K.publicUrl,file_type:C.type,file_size:C.size,status:"active"}).select().single();if(O)throw O;return r(z=>z.map(q=>q.user_id===k?{...q,user_documents:[...q.user_documents||[],B]}:q)),B}catch(M){return console.error("Error uploading document:",M),o(M),null}},v=async k=>{try{const{data:C,error:D}=await Oe.from("user_documents").select("file_url, user_id").eq("id",k).single();if(D)throw D;const{error:M}=await Oe.from("user_documents").delete().eq("id",k);if(M)throw M;return r(F=>F.map(U=>U.user_id===C.user_id?{...U,user_documents:U.user_documents?.filter(I=>I.id!==k)}:U)),!0}catch(C){return console.error("Error deleting document:",C),o(C),!1}},m=k=>t.filter(C=>C.role===k),j=()=>t.filter(k=>k.employment_status==="active"),w=k=>t.filter(C=>C.department_id===k),_=async(k,C)=>(console.warn("PIN verification not yet implemented"),!1),S=async(k,C)=>(console.warn("PIN setting not yet implemented"),!1),E=k=>t.find(D=>D.user_id===k)?.profile_completion_percentage||0;return x.useEffect(()=>{e&&l()},[e,l]),x.useEffect(()=>{if(!e)return;const k=Oe.channel(`people:${e}`).on("postgres_changes",{event:"*",schema:"public",table:"profiles",filter:`organization_id=eq.${e}`},C=>{C.eventType==="INSERT"?r(D=>[...D,C.new]):C.eventType==="UPDATE"?r(D=>D.map(M=>M.user_id===C.new.user_id?{...M,...C.new}:M)):C.eventType==="DELETE"&&r(D=>D.filter(M=>M.user_id!==C.old.user_id))}).subscribe();return()=>{Oe.removeChannel(k)}},[e]),{users:t,loading:n,error:a,fetchUsers:l,createUser:d,updateUser:f,deleteUser:h,uploadDocument:p,deleteDocument:v,getUsersByRole:m,getActiveUsers:j,getUsersByDepartment:w,getProfileCompletion:E,verifyPin:_,setPin:S,refresh:l}}function JZ(){const{toast:e}=qr(),{context:t,loading:r}=Qh(),[n,i]=x.useState(!1),[a,o]=x.useState(!1),[l,d]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState("list"),[m,j]=x.useState(new Date);console.log("TasksOverview - context:",t),console.log("TasksOverview - contextLoading:",r);const[w,_]=x.useState(""),[S,E]=x.useState("all"),[k,C]=x.useState("all"),[D,M]=x.useState("all"),[F,U]=x.useState("all"),{users:I,loading:K}=ly(t?.organization_id),{tasks:B,loading:O,error:z,createTask:q,updateTask:ue,updateTaskStatus:ie,deleteTask:le}=QZ(t?.organization_id),G=x.useMemo(()=>{let ve=[...B];if(w.trim()){const qe=w.toLowerCase();ve=ve.filter(ne=>ne.title.toLowerCase().includes(qe)||ne.description?.toLowerCase().includes(qe))}return S!=="all"&&(ve=ve.filter(qe=>qe.status===S)),k!=="all"&&(ve=ve.filter(qe=>qe.task_type===k)),D!=="all"&&(ve=ve.filter(qe=>qe.priority===D)),F!=="all"&&(ve=ve.filter(qe=>qe.assigned_to===F)),ve},[B,w,S,k,D,F]),se=G.filter(ve=>{if(!ve.scheduled_date)return!1;const qe=new Date(ve.scheduled_date),ne=new Date;return qe.getDate()===ne.getDate()&&qe.getMonth()===ne.getMonth()&&qe.getFullYear()===ne.getFullYear()}),xe=G.filter(ve=>!ve.scheduled_date||ve.status==="completed"?!1:new Date(ve.scheduled_date)<new Date);G.filter(ve=>ve.status==="not_started");const te=G.filter(ve=>ve.status==="in_progress"),R=G.filter(ve=>ve.status==="completed"),V=x.useMemo(()=>{const ve=B.filter(ne=>ne.assigned_user).map(ne=>({id:ne.assigned_to,name:ne.assigned_user.display_name}));return Array.from(new Map(ve.map(ne=>[ne.id,ne])).values())},[B]),Q=w.trim()!==""||S!=="all"||k!=="all"||D!=="all"||F!=="all",re=()=>{_(""),E("all"),C("all"),M("all"),U("all")},Z=async ve=>{if(console.log("Creating task with data:",ve),console.log("Organization ID:",t?.organization_id),!t?.organization_id){e({title:"Error",description:"No organization found. Please log in again.",variant:"destructive"});return}await q(ve)&&(i(!1),e({title:"Success!",description:"Task created successfully"}))},X=async ve=>{await ie(ve.id,"completed",t?.user_id)&&e({title:"Task Completed!",description:`"${ve.title}" has been marked as complete`})},pe=async ve=>{confirm(`Are you sure you want to delete "${ve.title}"?`)&&await le(ve.id)&&(d(null),e({title:"Task Deleted",description:"Task has been removed"}))},ce=async(ve,qe)=>{if(await ie(ve,qe,t?.user_id)){if(l&&l.id===ve){const tt={status:qe};qe==="completed"?(tt.completed_at=new Date().toISOString(),tt.completed_by=t?.user_id):qe==="in_progress"&&(tt.started_at=new Date().toISOString()),d({...l,...tt})}e({title:"Status Updated",description:`Task status changed to ${qe.replace("_"," ")}`})}},we=async(ve,qe)=>{if(!qe.trim()){e({title:"Error",description:"Note cannot be empty",variant:"destructive"});return}const ne=B.find(ye=>ye.id===ve);if(!ne)return;const tt=new Date().toLocaleString(),jt=t?.display_name||"User",St=`[${tt}] ${jt}: ${qe}`,Xe=ne.notes?`${ne.notes}
${St}`:St;l&&l.id===ve&&d({...l,notes:Xe}),await ue(ve,{notes:Xe})?e({title:"Note Added",description:"Your note has been saved"}):(l&&l.id===ve&&d({...l,notes:ne.notes}),e({title:"Error",description:"Failed to save note",variant:"destructive"}))},Pe=async ve=>{if(!f)return;if(await ue(f.id,{title:ve.title,description:ve.description,priority:ve.priority,assigned_to:ve.assigned_to,scheduled_date:ve.scheduled_date,scheduled_time:ve.scheduled_time})){if(o(!1),h(null),l&&l.id===f.id){const ne=B.find(tt=>tt.id===f.id);ne&&d(ne)}e({title:"Success!",description:"Task updated successfully"})}else e({title:"Error",description:"Failed to update task",variant:"destructive"})},ze=ve=>{h(ve),o(!0)};return O||r?s.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[s.jsx(Hr,{className:"h-12 w-full"}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:[s.jsx(Hr,{className:"h-32"}),s.jsx(Hr,{className:"h-32"}),s.jsx(Hr,{className:"h-32"})]}),s.jsx(Hr,{className:"h-96"})]}):t?z?s.jsx("div",{className:"container mx-auto p-6",children:s.jsx(it,{className:"border-red-200 bg-red-50",children:s.jsxs(sr,{children:[s.jsx(pr,{className:"text-red-700",children:"Error Loading Tasks"}),s.jsx(xa,{className:"text-red-600",children:z.message})]})})}):s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Routine Tasks"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your daily operations and checklists"})]}),s.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 w-full sm:w-auto",children:[s.jsxs(qT,{type:"single",value:p,onValueChange:ve=>ve&&v(ve),className:"justify-start sm:justify-center",children:[s.jsxs($w,{value:"list","aria-label":"List view",className:"gap-2",children:[s.jsx(a2,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"List"})]}),s.jsxs($w,{value:"timeline","aria-label":"Timeline view",className:"gap-2",children:[s.jsx(Xn,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Timeline"})]})]}),s.jsxs(Ca,{open:n,onOpenChange:i,children:[s.jsx(hq,{asChild:!0,children:s.jsxs(ke,{size:"lg",className:"gap-2 w-full sm:w-auto",onClick:()=>console.log("Button clicked, dialog should open"),children:[s.jsx(Ln,{className:"w-5 h-5"}),s.jsx("span",{children:"New Task"})]})}),s.jsxs(Qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ji,{children:[s.jsx(Zi,{children:"Create New Task"}),s.jsx(bl,{children:"Add a new routine task to your schedule"})]}),n&&s.jsx(k4,{onSubmit:Z,users:I.map(ve=>({user_id:ve.user_id,display_name:ve.display_name})),isLoading:K})]})]})]})]}),p==="timeline"&&s.jsx(it,{children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between gap-4",children:[s.jsx(ke,{variant:"outline",onClick:()=>{const ve=new Date(m);ve.setDate(ve.getDate()-1),j(ve)},children:" Previous Day"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{variant:"outline",onClick:()=>j(new Date),children:"Today"}),s.jsx("div",{className:"text-center",children:s.jsx("div",{className:"font-semibold",children:m.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})})]}),s.jsx(ke,{variant:"outline",onClick:()=>{const ve=new Date(m);ve.setDate(ve.getDate()+1),j(ve)},children:"Next Day "})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col gap-4",children:[s.jsxs("div",{className:"flex gap-2",children:[s.jsxs("div",{className:"relative flex-1",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(er,{placeholder:"Search tasks by title or description...",value:w,onChange:ve=>_(ve.target.value),className:"pl-9"}),w&&s.jsx(ke,{variant:"ghost",size:"icon",className:"absolute right-1 top-1/2 transform -translate-y-1/2 h-7 w-7",onClick:()=>_(""),children:s.jsx(xn,{className:"w-4 h-4"})})]}),s.jsxs(ch,{children:[s.jsx(uh,{asChild:!0,children:s.jsxs(ke,{variant:"outline",className:"gap-2",children:[s.jsx(jc,{className:"w-4 h-4"}),s.jsx("span",{className:"hidden sm:inline",children:"Filters"}),Q&&s.jsx(pt,{variant:"secondary",className:"ml-1 px-1.5 py-0",children:[S!=="all",k!=="all",D!=="all",F!=="all"].filter(Boolean).length})]})}),s.jsx(Md,{className:"w-80",align:"end",children:s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("h4",{className:"font-semibold",children:"Filters"}),Q&&s.jsx(ke,{variant:"ghost",size:"sm",onClick:re,className:"h-auto py-1 px-2",children:"Clear all"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Status"}),s.jsxs(Ir,{value:S,onValueChange:ve=>E(ve),children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Statuses"}),s.jsx(et,{value:"not_started",children:"Not Started"}),s.jsx(et,{value:"in_progress",children:"In Progress"}),s.jsx(et,{value:"completed",children:"Completed"}),s.jsx(et,{value:"overdue",children:"Overdue"}),s.jsx(et,{value:"blocked",children:"Blocked"}),s.jsx(et,{value:"cancelled",children:"Cancelled"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Task Type"}),s.jsxs(Ir,{value:k,onValueChange:ve=>C(ve),children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Types"}),Object.entries(Fh).map(([ve,qe])=>s.jsx(et,{value:ve,children:qe},ve))]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Priority"}),s.jsxs(Ir,{value:D,onValueChange:ve=>M(ve),children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Priorities"}),Object.entries(Bh).map(([ve,qe])=>s.jsx(et,{value:ve,children:qe},ve))]})]})]}),V.length>0&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{children:"Assigned To"}),s.jsxs(Ir,{value:F,onValueChange:U,children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Users"}),V.map(ve=>s.jsx(et,{value:ve.id,children:ve.name},ve.id))]})]})]})]})})]})]}),Q&&s.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),w&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:['Search: "',w,'"',s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>_("")})]}),S!=="all"&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Status: ",S.replace("_"," "),s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>E("all")})]}),k!=="all"&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Type: ",Fh[k],s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>C("all")})]}),D!=="all"&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Priority: ",Bh[D],s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>M("all")})]}),F!=="all"&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["User: ",V.find(ve=>ve.id===F)?.name,s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>U("all")})]})]}),s.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",G.length," of ",B.length," tasks",Q&&" (filtered)"]})]})})}),p==="timeline"&&s.jsx(YZ,{tasks:G,selectedDate:m,onTaskClick:d,onTaskComplete:X}),p==="list"&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"Today's Tasks"}),s.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsxs(ot,{children:[s.jsx("div",{className:"text-2xl font-bold",children:se.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Scheduled for today"})]})]}),s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"Overdue Tasks"}),s.jsx(wn,{className:"h-4 w-4 text-red-500"})]}),s.jsxs(ot,{children:[s.jsx("div",{className:"text-2xl font-bold text-red-600",children:xe.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Need immediate attention"})]})]}),s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"In Progress"}),s.jsx("div",{className:"h-4 w-4 rounded-full bg-blue-500"})]}),s.jsxs(ot,{children:[s.jsx("div",{className:"text-2xl font-bold",children:te.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently active"})]})]}),s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"Completed"}),s.jsx("div",{className:"h-4 w-4 rounded-full bg-green-500"})]}),s.jsxs(ot,{children:[s.jsx("div",{className:"text-2xl font-bold",children:R.length}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Finished tasks"})]})]})]}),s.jsxs(ny,{defaultValue:"today",className:"space-y-4",children:[s.jsxs($p,{className:"grid w-full grid-cols-4",children:[s.jsxs(ja,{value:"today",className:"gap-2",children:[s.jsx("span",{children:"Today"}),se.length>0&&s.jsx(pt,{variant:"secondary",className:"ml-1",children:se.length})]}),s.jsxs(ja,{value:"overdue",className:"gap-2",children:[s.jsx("span",{children:"Overdue"}),xe.length>0&&s.jsx(pt,{variant:"destructive",className:"ml-1",children:xe.length})]}),s.jsxs(ja,{value:"in-progress",className:"gap-2",children:[s.jsx("span",{children:"In Progress"}),te.length>0&&s.jsx(pt,{variant:"secondary",className:"ml-1",children:te.length})]}),s.jsx(ja,{value:"all",children:"All Tasks"})]}),s.jsx(Sa,{value:"today",className:"space-y-4",children:se.length===0?s.jsx(it,{children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(Ya,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks scheduled for today"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Create a new task to get started"})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:se.map(ve=>s.jsx(ov,{task:ve,onView:d,onComplete:X,onDelete:pe},ve.id))})}),s.jsx(Sa,{value:"overdue",className:"space-y-4",children:xe.length===0?s.jsx(it,{children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx(wn,{className:"w-12 h-12 text-green-500 mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No overdue tasks!"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"You're all caught up"})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:xe.map(ve=>s.jsx(ov,{task:ve,onView:d,onComplete:X,onDelete:pe},ve.id))})}),s.jsx(Sa,{value:"in-progress",className:"space-y-4",children:te.length===0?s.jsx(it,{children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"w-12 h-12 rounded-full bg-blue-100 flex items-center justify-center mb-4",children:s.jsx("span",{className:"text-2xl",children:""})}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks in progress"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Start working on a task to see it here"})]})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:te.map(ve=>s.jsx(ov,{task:ve,onView:d,onComplete:X,onDelete:pe},ve.id))})}),s.jsx(Sa,{value:"all",className:"space-y-4",children:G.length===0?s.jsx(it,{children:s.jsx(ot,{className:"flex flex-col items-center justify-center py-12",children:Q?s.jsxs(s.Fragment,{children:[s.jsx(jc,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks match your filters"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Try adjusting your search or filters"}),s.jsxs(ke,{onClick:re,variant:"outline",children:[s.jsx(xn,{className:"w-4 h-4 mr-2"}),"Clear Filters"]})]}):s.jsxs(s.Fragment,{children:[s.jsx(Ln,{className:"w-12 h-12 text-muted-foreground mb-4"}),s.jsx("p",{className:"text-lg font-medium",children:"No tasks yet"}),s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first task to get started"}),s.jsxs(ke,{onClick:()=>i(!0),children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Create Task"]})]})})}):s.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:G.map(ve=>s.jsx(ov,{task:ve,onView:d,onComplete:X,onDelete:pe},ve.id))})})]})]}),f&&s.jsx(Ca,{open:a,onOpenChange:o,children:s.jsxs(Qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ji,{children:[s.jsx(Zi,{children:"Edit Task"}),s.jsx(bl,{children:"Update the task details below"})]}),f&&s.jsxs(s.Fragment,{children:[console.log(" Passing to TaskForm:",{isEditing:!0,taskId:f.id,userRole:t?.user_role,fullContext:t}),s.jsx(k4,{onSubmit:Pe,users:I.map(ve=>({user_id:ve.user_id,display_name:ve.display_name})),isLoading:K,isEditing:!0,taskId:f.id,userRole:t?.user_role,defaultValues:{title:f.title,description:f.description||"",task_type:f.task_type,priority:f.priority,assigned_to:f.assigned_to||"",scheduled_date:new Date(f.scheduled_date),scheduled_time:f.scheduled_time||"",estimated_minutes:f.estimated_minutes||30,requires_approval:f.requires_approval}})]})]})}),l&&s.jsx(HZ,{task:l,open:!!l,onOpenChange:ve=>!ve&&d(null),onComplete:X,onStatusChange:ce,onEdit:ze,onDelete:pe,onAddNote:we})]}):s.jsx("div",{className:"container mx-auto p-6",children:s.jsxs(it,{className:"border-yellow-200 bg-yellow-50",children:[s.jsx(sr,{children:s.jsx(pr,{className:"text-yellow-800",children:"Setup Required"})}),s.jsx(ot,{children:s.jsx("p",{className:"text-yellow-700",children:"Please complete your organization setup to access routine tasks."})})]})})}function ZZ(){return s.jsx(JZ,{})}function XZ(){const[e,t]=x.useState([]),[r,n]=x.useState(new Map),[i,a]=x.useState(!0),{toast:o}=qr();x.useEffect(()=>{l()},[]);const l=async()=>{try{const[f,h]=await Promise.all([Oe.from("training_courses").select("*").eq("is_published",!0).order("title"),Oe.from("training_enrollments").select("*")]);if(f.error)throw f.error;if(h.error)throw h.error;t(f.data||[]);const p=new Map;(h.data||[]).forEach(v=>{p.set(v.course_id,v)}),n(p)}catch(f){console.error("Error fetching data:",f),o({title:"Error",description:"Failed to load training courses",variant:"destructive"})}finally{a(!1)}},d=async f=>{try{const{data:{user:h}}=await Oe.auth.getUser();if(!h)throw new Error("Not authenticated");const{error:p}=await Oe.from("training_enrollments").insert({course_id:f,user_id:h.id});if(p)throw p;o({title:"Success",description:"Enrolled in course successfully"}),l()}catch(h){console.error("Error enrolling:",h),o({title:"Error",description:"Failed to enroll in course",variant:"destructive"})}};return i?s.jsx("div",{className:"flex items-center justify-center min-h-screen",children:s.jsx("p",{children:"Loading..."})}):s.jsxs("div",{className:"container mx-auto p-6",children:[s.jsx("div",{className:"flex justify-between items-center mb-6",children:s.jsx("h1",{className:"text-3xl font-bold",children:"Training Courses"})}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(f=>{const h=r.get(f.id),p=!!h,v=h?.completed_at;return s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsxs(pr,{className:"flex items-center gap-2",children:[s.jsx(mL,{className:"h-5 w-5"}),f.title]}),s.jsx(xa,{children:f.description})]}),s.jsxs(ot,{children:[f.duration_minutes&&s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Duration: ",f.duration_minutes," minutes"]}),p?s.jsxs(s.Fragment,{children:[s.jsx(zv,{value:h.progress||0,className:"mb-4"}),s.jsxs("p",{className:"text-sm text-muted-foreground mb-4",children:["Progress: ",h.progress||0,"%"]}),s.jsx(ke,{className:"w-full",variant:v?"outline":"default",children:v?s.jsxs(s.Fragment,{children:[s.jsx(cl,{className:"mr-2 h-4 w-4"}),"Completed"]}):s.jsxs(s.Fragment,{children:[s.jsx(M1,{className:"mr-2 h-4 w-4"}),"Continue"]})})]}):s.jsx(ke,{onClick:()=>d(f.id),className:"w-full",children:"Enroll Now"})]})]},f.id)})})]})}async function Qw(e,t){if(!/^\d{4}$/.test(e))throw new Error("PIN must be exactly 4 digits");const r=eX(),i=new TextEncoder().encode(e+r),a=await crypto.subtle.digest("SHA-256",i),l=Array.from(new Uint8Array(a)).map(d=>d.toString(16).padStart(2,"0")).join("");return`${r}:${l}`}function eX(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let t="";for(let r=0;r<16;r++)t+=e.charAt(Math.floor(Math.random()*e.length));return t}function tX(){return Math.floor(1e3+Math.random()*9e3).toString()}const _R=()=>{const[e,t]=x.useState([]),[r,n]=x.useState(!1),[i,a]=x.useState(null),{toast:o}=qr(),l=async S=>{try{n(!0),a(null);let E=Oe.from("team_members").select("*").order("display_name",{ascending:!0});S?.role_type&&S.role_type!=="all"&&(E=E.eq("role_type",S.role_type)),S?.is_active!==void 0&&(E=E.eq("is_active",S.is_active)),S?.organization_id&&(E=E.eq("organization_id",S.organization_id)),S?.location_id&&(E=E.eq("location_id",S.location_id)),S?.auth_role_id&&(E=E.eq("auth_role_id",S.auth_role_id)),S?.profile_complete!==void 0&&(E=E.eq("profile_complete",S.profile_complete)),S?.search&&(E=E.or(`display_name.ilike.%${S.search}%,email.ilike.%${S.search}%,position.ilike.%${S.search}%`));const{data:k,error:C}=await E;if(C)throw C;return t(k||[]),k||[]}catch(E){const k=E;return a(k),o({title:"Error fetching team members",description:k.message,variant:"destructive"}),[]}finally{n(!1)}};return{teamMembers:e,loading:r,error:i,fetchTeamMembers:l,fetchTeamMember:async S=>{try{const{data:E,error:k}=await Oe.from("team_members").select("*").eq("id",S).single();if(k)throw k;return E}catch(E){return o({title:"Error fetching team member",description:E.message,variant:"destructive"}),null}},createTeamMember:async S=>{try{const E=S.pin||tX(),k=await Qw(E),{data:{user:C}}=await Oe.auth.getUser();if(!C)throw new Error("User not authenticated");const{data:D,error:M}=await Oe.from("team_members").insert({display_name:S.display_name,email:S.email,phone:S.phone,position:S.position,date_of_birth:S.date_of_birth,address:S.address,tfn_number:S.tfn_number,emergency_contact_name:S.emergency_contact_name,emergency_contact_phone:S.emergency_contact_phone,emergency_contact_relationship:S.emergency_contact_relationship,hire_date:S.hire_date,department_id:S.department_id,role_type:S.role_type,auth_role_id:S.auth_role_id,organization_id:S.organization_id,location_id:S.location_id,pin_hash:k,created_by:C.id,updated_by:C.id}).select().single();if(M)throw M;const F=D;return o({title:"Team member created",description:`${F.display_name} has been added. PIN: ${E}`}),await l(),F}catch(E){return o({title:"Error creating team member",description:E.message,variant:"destructive"}),null}},updateTeamMember:async(S,E)=>{try{const{data:{user:k}}=await Oe.auth.getUser();if(!k)throw new Error("User not authenticated");const C={...E,updated_by:k.id};E.pin&&(C.pin_hash=await Qw(E.pin),delete C.pin);const{data:D,error:M}=await Oe.from("team_members").update(C).eq("id",S).select().single();if(M)throw M;const F=D;return o({title:"Team member updated",description:`${F.display_name} has been updated.`}),await l(),F}catch(k){return o({title:"Error updating team member",description:k.message,variant:"destructive"}),null}},deactivateTeamMember:async S=>{try{const{error:E}=await Oe.from("team_members").update({is_active:!1}).eq("id",S);if(E)throw E;return o({title:"Team member deactivated",description:"The team member has been deactivated."}),await l(),!0}catch(E){return o({title:"Error deactivating team member",description:E.message,variant:"destructive"}),!1}},reactivateTeamMember:async S=>{try{const{error:E}=await Oe.from("team_members").update({is_active:!0}).eq("id",S);if(E)throw E;return o({title:"Team member reactivated",description:"The team member has been reactivated."}),await l(),!0}catch(E){return o({title:"Error reactivating team member",description:E.message,variant:"destructive"}),!1}},verifyPIN:async(S,E)=>{try{const{data:k,error:C}=await Oe.rpc("verify_team_member_pin",{member_id:S,pin_input:E});if(C)throw C;return k===!0}catch(k){return console.error("PIN verification error:",k),o({title:"PIN verification failed",description:"Could not verify PIN. Please try again.",variant:"destructive"}),!1}},getTeamMembersByRole:async S=>l({role_type:S,is_active:!0}),getTeamMembersByAuthRole:async S=>l({auth_role_id:S,is_active:!0}),getIncompleteProfiles:async()=>l({profile_complete:!1,is_active:!0})}};function rX({user:e,onViewProfile:t,onEdit:r,showActions:n=!0}){const i=()=>{switch(e.role){case"admin":return{color:"bg-red-100 text-red-800 border-red-200",icon:"",label:"Admin"};case"manager":return{color:"bg-yellow-100 text-yellow-800 border-yellow-200",icon:"",label:"Manager"};case"leader_chef":return{color:"bg-orange-100 text-orange-800 border-orange-200",icon:"",label:"Leader Chef"};case"staff":return{color:"bg-blue-100 text-blue-800 border-blue-200",icon:"",label:"Staff"};default:return{color:"bg-gray-100 text-gray-800 border-gray-200",icon:"",label:"Staff"}}},a=()=>({icon:Nc,color:"text-green-600",bgColor:"bg-green-50",label:"Active"}),o=()=>{if(!e.user_documents||e.user_documents.length===0)return{icon:es,color:"text-amber-600",label:"No Documents"};const m=new Date,j=e.user_documents.filter(_=>{if(!_.expiration_date)return!1;const S=new Date(_.expiration_date),E=Math.ceil((S.getTime()-m.getTime())/(1e3*60*60*24));return E>0&&E<=30}),w=e.user_documents.filter(_=>_.expiration_date?new Date(_.expiration_date)<m:!1);return w.length>0?{icon:h0,color:"text-red-600",label:`${w.length} Expired`}:j.length>0?{icon:es,color:"text-amber-600",label:`${j.length} Expiring Soon`}:{icon:Nc,color:"text-green-600",label:"Compliant"}},l=m=>m.split(" ").map(j=>j[0]).join("").toUpperCase().substring(0,2),d=i(),f=a(),h=o(),p=f.icon,v=h.icon;return s.jsx(it,{className:"hover:shadow-md transition-shadow",children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col items-center text-center space-y-4",children:[s.jsxs("div",{className:"relative",children:[s.jsxs(Qd,{className:"w-20 h-20 border-2 border-muted",children:[s.jsx(ty,{src:e.avatar_url,alt:e.display_name}),s.jsx(Jd,{className:"text-xl font-semibold",children:l(e.display_name)})]}),s.jsx("div",{className:Me("absolute -bottom-1 -right-1 w-6 h-6 rounded-full border-2 border-white flex items-center justify-center",f.bgColor),children:s.jsx(p,{className:Me("w-3 h-3",f.color)})})]}),s.jsxs("div",{className:"space-y-2 w-full",children:[s.jsx("h3",{className:"font-semibold text-lg leading-tight",children:e.display_name}),s.jsxs(pt,{className:Me("border",d.color),children:[s.jsx("span",{className:"mr-1",children:d.icon}),d.label]}),e.position&&s.jsx("p",{className:"text-sm text-muted-foreground",children:e.position}),e.department_id&&s.jsxs("div",{className:"flex items-center justify-center gap-1 text-sm text-muted-foreground",children:[s.jsx(pL,{className:"w-3 h-3"}),s.jsx("span",{children:"Department"})]})]}),s.jsxs("div",{className:"w-full space-y-1",children:[e.email&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground justify-center",children:[s.jsx(hk,{className:"w-3 h-3"}),s.jsx("span",{className:"truncate",children:e.email})]}),e.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground justify-center",children:[s.jsx(mk,{className:"w-3 h-3"}),s.jsx("span",{children:e.phone})]})]}),s.jsxs("div",{className:"w-full pt-3 border-t space-y-2",children:[s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Status"}),s.jsx(pt,{variant:"outline",className:f.bgColor,children:f.label})]}),s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Compliance"}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(v,{className:Me("w-4 h-4",h.color)}),s.jsx("span",{className:Me("text-xs font-medium",h.color),children:h.label})]})]}),e.user_documents&&s.jsxs("div",{className:"flex items-center justify-between text-sm",children:[s.jsx("span",{className:"text-muted-foreground",children:"Documents"}),s.jsx("span",{className:"text-xs font-medium",children:e.user_documents.length})]})]}),n&&s.jsxs("div",{className:"flex items-center gap-2 w-full pt-2",children:[s.jsxs(ke,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>t?.(e),children:[s.jsx(Tu,{className:"w-4 h-4 mr-1"}),"View"]}),r&&s.jsxs(ke,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>r(e),children:[s.jsx(m0,{className:"w-4 h-4 mr-1"}),"Edit"]})]})]})})})}function nX({users:e,loading:t,onViewProfile:r,onEdit:n,onLoadMore:i,hasMore:a=!1,loadingMore:o=!1,showActions:l=!0}){const[d,f]=x.useState("grid");return t?s.jsx("div",{className:Me("grid gap-4",d==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:[1,2,3,4,5,6,7,8].map(h=>s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[s.jsx(Hr,{className:"w-20 h-20 rounded-full"}),s.jsxs("div",{className:"space-y-2 w-full",children:[s.jsx(Hr,{className:"h-5 w-3/4 mx-auto"}),s.jsx(Hr,{className:"h-4 w-1/2 mx-auto"}),s.jsx(Hr,{className:"h-4 w-2/3 mx-auto"})]}),s.jsxs("div",{className:"w-full space-y-2 pt-3",children:[s.jsx(Hr,{className:"h-4 w-full"}),s.jsx(Hr,{className:"h-4 w-full"})]}),s.jsxs("div",{className:"flex gap-2 w-full pt-2",children:[s.jsx(Hr,{className:"h-8 flex-1"}),s.jsx(Hr,{className:"h-8 flex-1"})]})]})})},h))}):!e||e.length===0?s.jsx(it,{className:"border-2 border-dashed",children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:s.jsx(Ao,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No team members found"}),s.jsx("p",{className:"text-muted-foreground text-center max-w-sm",children:"There are no team members to display. Try adjusting your filters or add new team members."})]})}):s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsxs(ke,{variant:d==="grid"?"default":"outline",size:"sm",onClick:()=>f("grid"),children:[s.jsx(uk,{className:"w-4 h-4 mr-2"}),"Grid"]}),s.jsxs(ke,{variant:d==="list"?"default":"outline",size:"sm",onClick:()=>f("list"),children:[s.jsx(a2,{className:"w-4 h-4 mr-2"}),"List"]})]}),s.jsx("div",{className:Me("grid gap-4",d==="grid"?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:e.map(h=>s.jsx(rX,{user:h,onViewProfile:r,onEdit:n,showActions:l},h.user_id))}),a&&i&&s.jsx("div",{className:"flex justify-center pt-4",children:s.jsx(ke,{variant:"outline",onClick:i,disabled:o,className:"min-w-[200px]",children:o?s.jsxs(s.Fragment,{children:[s.jsx(Si,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading more..."]}):"Load More"})}),!a&&e.length>12&&s.jsx("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"You've reached the end of the list"}),s.jsxs("div",{className:"text-center text-sm text-muted-foreground",children:["Showing ",e.length," team member",e.length!==1?"s":""]})]})}function sX({users:e}){const t=e.length,r=e.length,n=e.filter(v=>v.role==="admin").length,i=e.filter(v=>v.role==="manager").length,a=e.filter(v=>v.role==="leader_chef").length,o=e.filter(v=>v.role==="staff").length,l=new Date,d=e.filter(v=>v.user_documents&&v.user_documents.length>0),f=e.filter(v=>!v.user_documents||v.user_documents.length===0?!1:!v.user_documents.some(j=>j.expiration_date?new Date(j.expiration_date)<l:!1)),h=e.reduce((v,m)=>{if(!m.user_documents)return v;const j=m.user_documents.filter(w=>{if(!w.expiration_date)return!1;const _=new Date(w.expiration_date),S=Math.ceil((_.getTime()-l.getTime())/(1e3*60*60*24));return S>0&&S<=30});return v+j.length},0),p=d.length>0?Math.round(f.length/d.length*100):0;return s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Total Team"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsx("p",{className:"text-3xl font-bold",children:t})}),s.jsx("div",{className:"flex items-center gap-2 mt-2 text-xs",children:s.jsxs(pt,{variant:"secondary",className:"text-xs",children:[" ",r," Active"]})})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Ao,{className:"w-6 h-6 text-blue-600"})})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"By Role"}),s.jsxs("div",{className:"space-y-1",children:[n>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:n}),s.jsx("span",{className:"text-muted-foreground",children:"Admin"})]}),i>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:i}),s.jsx("span",{className:"text-muted-foreground",children:"Manager"})]}),a>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:a}),s.jsx("span",{className:"text-muted-foreground",children:"Leader Chef"})]}),o>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:o}),s.jsx("span",{className:"text-muted-foreground",children:"Staff"})]})]})]}),s.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:s.jsx(ef,{className:"w-6 h-6 text-purple-600"})})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Compliance"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("p",{className:"text-3xl font-bold",children:[p,"%"]})}),s.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:`h-full transition-all duration-300 ${p>=80?"bg-green-600":p>=60?"bg-amber-600":"bg-red-600"}`,style:{width:`${p}%`}})}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[f.length," of ",d.length," users"]})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(RL,{className:"w-6 h-6 text-green-600"})})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Expiring Docs"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsx("p",{className:`text-3xl font-bold ${h>0?"text-amber-600":"text-green-600"}`,children:h})}),s.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:h===0?"All documents valid":h===1?"Document expiring within 30 days":"Documents expiring within 30 days"})]}),s.jsx("div",{className:`p-3 rounded-lg ${h>0?"bg-amber-100":"bg-green-100"}`,children:s.jsx(es,{className:`w-6 h-6 ${h>0?"text-amber-600":"text-green-600"}`})})]})})})]})}function iX({filters:e,onFilterChange:t,onClearFilters:r}){const[n,i]=x.useState(e.search||""),[a,o]=x.useState(!1),l=[e.role,e.employment_status,e.department_id,e.active_only,e.search].filter(Boolean).length,d=v=>{t({...e,role:v==="all"?void 0:v})},f=v=>{t({...e,employment_status:v==="all"?void 0:v})},h=()=>{t({...e,active_only:!e.active_only})},p=v=>{i(v),t({...e,search:v||void 0})};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(er,{placeholder:"Search by name or email...",value:n,onChange:v=>p(v.target.value),className:"pl-9"})]})}),s.jsxs(Ir,{value:e.role||"all",onValueChange:d,children:[s.jsx(Lr,{className:"w-[150px]",children:s.jsx(Or,{placeholder:"Role"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Roles"}),s.jsx(et,{value:"admin",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Admin"})]})}),s.jsx(et,{value:"manager",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Manager"})]})}),s.jsx(et,{value:"leader_chef",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Leader Chef"})]})}),s.jsx(et,{value:"staff",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Staff"})]})})]})]}),s.jsxs(Ir,{value:e.employment_status||"all",onValueChange:f,children:[s.jsx(Lr,{className:"w-[150px]",children:s.jsx(Or,{placeholder:"Status"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Status"}),s.jsx(et,{value:"active",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Active"})]})}),s.jsx(et,{value:"on_leave",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"On Leave"})]})}),s.jsx(et,{value:"terminated",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Terminated"})]})})]})]}),s.jsxs(ke,{variant:"outline",size:"icon",onClick:()=>o(!a),className:"relative",children:[s.jsx(jc,{className:"w-4 h-4"}),l>0&&s.jsx(pt,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs",children:l})]}),l>0&&s.jsxs(ke,{variant:"ghost",size:"sm",onClick:r,className:"gap-1",children:[s.jsx(xn,{className:"w-4 h-4"}),"Clear"]})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx(Hs,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs("label",{className:"text-sm font-medium flex items-center gap-2",children:[s.jsx(fL,{className:"w-4 h-4"}),"Sort By"]}),s.jsxs(Ir,{defaultValue:"name",children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"Sort by..."})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"name",children:"Name (A-Z)"}),s.jsx(et,{value:"name_desc",children:"Name (Z-A)"}),s.jsx(et,{value:"role",children:"Role"}),s.jsx(et,{value:"status",children:"Status"}),s.jsx(et,{value:"compliance",children:"Compliance"}),s.jsx(et,{value:"recent",children:"Recently Added"})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Department"}),s.jsxs(Ir,{defaultValue:"all",children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"All Departments"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Departments"}),s.jsx(et,{value:"kitchen",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Kitchen"})]})}),s.jsx(et,{value:"bar",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Bar"})]})}),s.jsx(et,{value:"management",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Management"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Compliance"}),s.jsxs(Ir,{defaultValue:"all",children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"All"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All"}),s.jsx(et,{value:"compliant",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Compliant"})]})}),s.jsx(et,{value:"expiring",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Expiring Soon"})]})}),s.jsx(et,{value:"non_compliant",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Non-Compliant"})]})})]})]})]})]})]}),l>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),e.role&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Role: ",e.role.replace("_"," "),s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>d("all")})]}),e.employment_status&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Status: ",e.employment_status.replace("_"," "),s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("all")})]}),e.search&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:['Search: "',e.search,'"',s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>p("")})]}),e.active_only&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Active Only",s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:h})]})]})]})}function aX(e){const t=e.replace(/\D/g,"");return t.length===0?"":t.length<=3?t:t.length<=6?`(${t.slice(0,3)}) ${t.slice(3)}`:`(${t.slice(0,3)}) ${t.slice(3,6)}-${t.slice(6,10)}`}function NR(e){return e.replace(/\D/g,"")}function oX(e){return NR(e).length===10}function jR({open:e,onOpenChange:t,user:r,onSuccess:n}){const{toast:i}=qr(),{context:a}=Qh(),{updateUser:o,loading:l}=ly(a?.organization_id),[d,f]=x.useState({display_name:r.display_name||"",email:r.email||"",phone:r.phone||"",position:r.position||"",role:r.role||"staff",hire_date:r.hire_date||""});x.useEffect(()=>{f({display_name:r.display_name||"",email:r.email||"",phone:r.phone||"",position:r.position||"",role:r.role||"staff",hire_date:r.hire_date||""})},[r,e]);const h=a?.user_role==="admin"||a?.user_role==="owner"||a?.user_role==="leader_chef",p=a?.user_id===r.user_id,v=h,m=(_,S)=>{f(_==="phone"?E=>({...E,[_]:aX(S)}):E=>({...E,[_]:S}))},j=()=>d.display_name.trim()?d.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(d.email)?d.phone&&!oX(d.phone)?(i({title:"Validation Error",description:"Please enter a valid 10-digit phone number.",variant:"destructive"}),!1):!0:(i({title:"Validation Error",description:"Please enter a valid email address.",variant:"destructive"}),!1):(i({title:"Validation Error",description:"Email is required.",variant:"destructive"}),!1):(i({title:"Validation Error",description:"Display name is required.",variant:"destructive"}),!1),w=async _=>{if(_.preventDefault(),!!j())try{const S={display_name:d.display_name,email:d.email,phone:d.phone?NR(d.phone):null,position:d.position||null};v&&(S.role=d.role),h&&d.hire_date&&(S.hire_date=d.hire_date),await o(r.user_id,S),i({title:"Success",description:"User information updated successfully."}),t(!1),n?.()}catch(S){console.error("Error updating user:",S),i({title:"Error",description:"Failed to update user information. Please try again.",variant:"destructive"})}};return s.jsx(Ca,{open:e,onOpenChange:t,children:s.jsxs(Qi,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[s.jsxs(Ji,{children:[s.jsx(Zi,{children:"Edit User Information"}),s.jsxs(bl,{children:[p?"Update your profile information.":`Update information for ${r.display_name}.`,!h&&" You can only edit contact information."]})]}),s.jsxs("form",{onSubmit:w,className:"space-y-6",children:[s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Personal Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsxs(At,{htmlFor:"display_name",children:["Display Name ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(er,{id:"display_name",value:d.display_name,onChange:_=>m("display_name",_.target.value),placeholder:"John Doe",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsxs(At,{htmlFor:"email",children:["Email ",s.jsx("span",{className:"text-red-500",children:"*"})]}),s.jsx(er,{id:"email",type:"email",value:d.email,onChange:_=>m("email",_.target.value),placeholder:"john@example.com",required:!0})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"phone",children:"Phone"}),s.jsx(er,{id:"phone",type:"tel",value:d.phone,onChange:_=>m("phone",_.target.value),placeholder:"(555) 123-4567",maxLength:14}),s.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: (XXX) XXX-XXXX"})]})]})]}),s.jsxs("div",{className:"space-y-4",children:[s.jsx("h3",{className:"text-sm font-semibold",children:"Employment Information"}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"position",children:"Position / Title"}),s.jsx(er,{id:"position",value:d.position,onChange:_=>m("position",_.target.value),placeholder:"Head Chef"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"role",children:"Role"}),s.jsxs(Ir,{value:d.role,onValueChange:_=>m("role",_),disabled:!v,children:[s.jsx(Lr,{id:"role",children:s.jsx(Or,{})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"admin",children:" Admin"}),s.jsx(et,{value:"manager",children:" Manager"}),s.jsx(et,{value:"leader_chef",children:" Leader Chef"}),s.jsx(et,{value:"staff",children:" Staff"})]})]}),!v&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin only field"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"hire_date",children:"Hire Date"}),s.jsx(er,{id:"hire_date",type:"date",value:d.hire_date,onChange:_=>m("hire_date",_.target.value),disabled:!h}),!h&&s.jsx("p",{className:"text-xs text-muted-foreground",children:"Admin only field"})]})]})]}),s.jsxs(Zh,{children:[s.jsx(ke,{type:"button",variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),s.jsxs(ke,{type:"submit",disabled:l,children:[l&&s.jsx(Si,{className:"w-4 h-4 mr-2 animate-spin"}),"Save Changes"]})]})]})]})})}function lX({open:e,onOpenChange:t,onValidated:r,expectedHash:n,title:i="PIN Verification Required",description:a="Enter your 4-digit PIN to continue",maxAttempts:o=3}){const[l,d]=x.useState(""),[f,h]=x.useState(""),[p,v]=x.useState(0),[m,j]=x.useState(!1),[w,_]=x.useState(!1);x.useEffect(()=>{e&&(d(""),h(""),v(0),_(!1))},[e]),x.useEffect(()=>{l.length===4&&!m&&S()},[l]);const S=async()=>{if(l.length!==4){h("PIN must be 4 digits");return}if(p>=o){h("Maximum attempts reached. Please contact an administrator.");return}j(!0),h("");try{if(await Qw(l)===n)console.log("[PINValidationDialog] PIN validated successfully"),r(),t(!1);else{const F=p+1;v(F);const U=o-F;U>0?h(`Incorrect PIN. ${U} attempt(s) remaining.`):h("Maximum attempts reached. Please contact an administrator."),d(""),console.log("[PINValidationDialog] PIN validation failed. Attempts:",F)}}catch(M){console.error("[PINValidationDialog] Error validating PIN:",M),h("An error occurred. Please try again."),d("")}finally{j(!1)}},E=M=>{const F=M.replace(/\D/g,"").slice(0,4);d(F),h("")},k=()=>{t(!1)},C=M=>{M.key==="Enter"&&l.length===4&&!m&&S()},D=p>=o;return s.jsx(Ca,{open:e,onOpenChange:t,children:s.jsxs(Qi,{className:"sm:max-w-[400px]",children:[s.jsxs(Ji,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(fk,{className:"h-5 w-5 text-primary"}),s.jsx(Zi,{children:i})]}),s.jsx(bl,{children:a})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"pin",children:"4-Digit PIN"}),s.jsxs("div",{className:"relative",children:[s.jsx(er,{id:"pin",type:w?"text":"password",value:l,onChange:M=>E(M.target.value),onKeyDown:C,placeholder:"",maxLength:4,className:"text-center text-2xl tracking-widest font-mono pr-10",disabled:m||D,autoFocus:!0,autoComplete:"off"}),s.jsx("button",{type:"button",onClick:()=>_(!w),className:"absolute right-3 top-1/2 -translate-y-1/2 text-muted-foreground hover:text-foreground",disabled:m||D,children:w?s.jsx(Sv,{className:"h-4 w-4"}):s.jsx(Tu,{className:"h-4 w-4"})})]}),s.jsx("div",{className:"flex gap-1",children:[0,1,2,3].map(M=>s.jsx("div",{className:`h-1 flex-1 rounded-full transition-colors ${l.length>M?"bg-primary":"bg-muted"}`},M))})]}),f&&s.jsxs(So,{variant:"destructive",children:[s.jsx(wn,{className:"h-4 w-4"}),s.jsx(ko,{children:f})]}),p>0&&!D&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Attempts: ",p," / ",o]})]}),s.jsxs(Zh,{className:"gap-2",children:[s.jsx(ke,{variant:"outline",onClick:k,disabled:m,children:"Cancel"}),s.jsx(ke,{onClick:S,disabled:l.length!==4||m||D,children:m?"Validating...":"Verify"})]})]})})}function cX({open:e,onOpenChange:t,teamMember:r,currentTeamMemberId:n,onSuccess:i}){const{canEditWithoutPIN:a}=Wu(),{updateTeamMember:o,loading:l}=_R(),[d,f]=x.useState(!1),[h,p]=x.useState(!1),[v,m]=x.useState({});if(x.useEffect(()=>{e&&r?(m({display_name:r.display_name,email:r.email,phone:r.phone,position:r.position,hire_date:r.hire_date,role_type:r.role_type}),p(!1)):(m({}),p(!1))},[e,r]),!r)return null;const j=n===r.id,w=!a&&j,_=()=>{if(w&&!h){f(!0);return}S()},S=async()=>{if(!r)return;await o(r.id,v)&&(t(!1),i&&i())},E=()=>{p(!0),f(!1),S()},k=(C,D)=>{m(M=>({...M,[C]:D}))};return s.jsxs(s.Fragment,{children:[s.jsx(Ca,{open:e,onOpenChange:t,children:s.jsxs(Qi,{className:"sm:max-w-[500px]",children:[s.jsxs(Ji,{children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Zi,{children:"Edit Team Member"}),w&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-amber-600 bg-amber-50 px-2 py-1 rounded",children:[s.jsx(fk,{className:"h-3 w-3"}),s.jsx("span",{children:"PIN Required"})]}),a&&s.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[s.jsx(ef,{className:"h-3 w-3"}),s.jsx("span",{children:"Admin Access"})]})]}),s.jsx(bl,{children:w?"You will need to enter your PIN to save changes":"Update team member information"})]}),s.jsxs("div",{className:"space-y-4 py-4",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"display_name",children:"Full Name *"}),s.jsx(er,{id:"display_name",value:v.display_name||"",onChange:C=>k("display_name",C.target.value),placeholder:"Joo Silva"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"email",children:"Email"}),s.jsx(er,{id:"email",type:"email",value:v.email||"",onChange:C=>k("email",C.target.value),placeholder:"joao@restaurant.com"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"phone",children:"Phone"}),s.jsx(er,{id:"phone",type:"tel",value:v.phone||"",onChange:C=>k("phone",C.target.value),placeholder:"+1234567890"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"position",children:"Position"}),s.jsx(er,{id:"position",value:v.position||"",onChange:C=>k("position",C.target.value),placeholder:"Line Cook"})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"hire_date",children:"Hire Date"}),s.jsx(er,{id:"hire_date",type:"date",value:v.hire_date||"",onChange:C=>k("hire_date",C.target.value)})]}),a&&s.jsxs("div",{className:"space-y-2",children:[s.jsx(At,{htmlFor:"role_type",children:"Role Type"}),s.jsxs(Ir,{value:v.role_type,onValueChange:C=>k("role_type",C),children:[s.jsx(Lr,{children:s.jsx(Or,{})}),s.jsx(Fr,{children:Object.entries(Pb).map(([C,D])=>s.jsx(et,{value:C,children:D},C))})]})]})]}),s.jsxs("div",{className:"flex justify-end gap-2",children:[s.jsx(ke,{variant:"outline",onClick:()=>t(!1),disabled:l,children:"Cancel"}),s.jsx(ke,{onClick:_,disabled:l||!v.display_name,children:l?"Saving...":w?"Save with PIN":"Save"})]})]})}),w&&r.pin_hash&&s.jsx(lX,{open:d,onOpenChange:f,onValidated:E,expectedHash:r.pin_hash,title:"Verify Your PIN",description:"Enter your PIN to save changes to your profile"})]})}function uX(){const e=E0(),{toast:t}=qr(),{context:r,loading:n}=Qh(),{canManageTeamMembers:i}=Wu(),[a,o]=x.useState({}),[l,d]=x.useState(null),[f,h]=x.useState(null),[p,v]=x.useState("team"),{users:m,loading:j,error:w,fetchUsers:_}=ly(r?.organization_id),{teamMembers:S,loading:E,error:k,fetchTeamMembers:C}=_R();x.useEffect(()=>{r?.organization_id&&_(a)},[r?.organization_id,a,_]),x.useEffect(()=>{r?.organization_id&&C({organization_id:r.organization_id})},[r?.organization_id]);const D=()=>{p==="users"?_(a):r?.organization_id&&C({organization_id:r.organization_id}),t({title:"Refreshed",description:`${p==="users"?"Auth users":"Team members"} list has been refreshed.`})},M=()=>{o({})},F=O=>{e(`/people/${O.user_id}`)},U=O=>{d(O)},I=O=>{h(O)},K=()=>{r?.organization_id&&_(a)},B=()=>{r?.organization_id&&C({organization_id:r.organization_id}),h(null),t({title:"Success",description:"Team member updated successfully."})};return n?s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(it,{children:s.jsx(ot,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})}):(console.log("[PeopleModule] User context:",r),r?.organization_id?s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"People"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage your team members and user accounts"})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(ke,{variant:"outline",size:"icon",onClick:D,disabled:p==="users"?j:E,children:s.jsx(ap,{className:`w-4 h-4 ${(p==="users"?j:E)?"animate-spin":""}`})}),i&&s.jsxs(s.Fragment,{children:[p==="users"&&s.jsxs(ke,{onClick:()=>t({title:"Coming soon!",description:"Add auth user functionality will be added."}),children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Add User"]}),p==="team"&&s.jsxs(ke,{onClick:()=>t({title:"Coming soon!",description:"Add team member functionality will be added."}),children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Add Team Member"]})]})]})]}),s.jsx(Hs,{}),s.jsxs(ny,{value:p,onValueChange:O=>v(O),className:"w-full",children:[s.jsxs($p,{className:"grid w-full max-w-md grid-cols-2",children:[s.jsxs(ja,{value:"team",className:"flex items-center gap-2",children:[s.jsx(O1,{className:"w-4 h-4"}),"Team Members (",S.length,")"]}),s.jsxs(ja,{value:"users",className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"w-4 h-4"}),"Auth Users (",m.length,")"]})]}),s.jsx(Sa,{value:"team",className:"space-y-6 mt-6",children:s.jsx(it,{children:s.jsxs(ot,{className:"p-6",children:[s.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Operational team members with PIN-based access for daily work (cooking, serving, cleaning, etc.)"}),k&&s.jsxs("div",{className:"p-4 border border-destructive rounded-md mb-4",children:[s.jsxs("p",{className:"text-sm text-destructive",children:["Error loading team members: ",k.message||String(k)]}),s.jsx(ke,{variant:"outline",size:"sm",onClick:D,className:"mt-2",children:"Try Again"})]}),E&&s.jsxs("div",{className:"text-center py-12",children:[s.jsx(ap,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"Loading team members..."})]}),!E&&!k&&s.jsx("div",{className:"space-y-3",children:S.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(O1,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),s.jsx("p",{className:"text-muted-foreground",children:"No team members found"}),i&&s.jsxs(ke,{onClick:()=>t({title:"Coming soon!",description:"Add team member functionality will be added."}),className:"mt-4",children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Add First Team Member"]})]}):S.map(O=>s.jsx(it,{className:"p-4 hover:bg-accent/50 transition-colors",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[s.jsx("h3",{className:"font-semibold",children:O.display_name}),s.jsx("span",{className:"text-sm px-2 py-1 rounded bg-primary/10 text-primary",children:O.role_type}),!O.is_active&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-destructive/10 text-destructive",children:"Inactive"}),!O.profile_complete&&s.jsx("span",{className:"text-xs px-2 py-1 rounded bg-warning/10 text-warning",children:"Incomplete"})]}),s.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:O.position}),O.email&&s.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:O.email})]}),i&&s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>I(O),children:"Edit"})]})},O.id))})]})})}),s.jsxs(Sa,{value:"users",className:"space-y-6 mt-6",children:[s.jsx(sX,{users:m}),s.jsx(Hs,{}),s.jsx(iX,{filters:a,onFilterChange:o,onClearFilters:M}),w&&s.jsx(it,{className:"border-destructive",children:s.jsxs(ot,{className:"p-6",children:[s.jsxs("p",{className:"text-destructive",children:["Error loading users: ",w.message||String(w)]}),s.jsx(ke,{variant:"outline",size:"sm",onClick:D,className:"mt-4",children:"Try Again"})]})}),s.jsx(nX,{users:m,loading:j,onViewProfile:F,onEdit:U})]})]}),l&&s.jsx(jR,{open:!!l,onOpenChange:O=>!O&&d(null),user:l,onSuccess:K}),f&&s.jsx(cX,{open:!!f,onOpenChange:O=>!O&&h(null),teamMember:f,onSuccess:B})]}):s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(it,{children:s.jsxs(ot,{className:"p-12 text-center",children:[s.jsx("p",{className:"text-muted-foreground",children:"Please log in to view team members."}),s.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Debug: Context loaded = ",n?"loading":"loaded",", Organization ID = ",r?.organization_id||"null"]})]})})}))}function dX(){return s.jsx(uX,{})}function fX(e,t){const[r,n]=x.useState([]),[i,a]=x.useState(!0),[o,l]=x.useState(null),[d,f]=x.useState(0),h=x.useCallback(async C=>{try{a(!0),l(null);let D=Oe.from("feed_items").select(`
          *,
          created_by_user:profiles!feed_items_created_by_fkey(user_id, display_name),
          related_user:profiles!feed_items_target_user_id_fkey(user_id, display_name),
          feed_reads(*)
        `).order("created_at",{ascending:!1});t&&(D=D.eq("organization_id",t)),C&&(C.channel&&(D=D.eq("channel",C.channel)),C.type&&(D=D.eq("type",C.type)),C.priority&&(D=D.eq("priority",C.priority)),C.unread_only&&e&&(D=D.not("read_by","cs",`{${e}}`)),C.date_from&&(D=D.gte("created_at",C.date_from)),C.date_to&&(D=D.lte("created_at",C.date_to)));const{data:M,error:F}=await D;if(F)throw F;if(n(M||[]),e&&M){const U=M.filter(I=>!I.feed_reads?.some(K=>K.user_id===e)).length;f(U)}}catch(D){console.error("Error fetching feed:",D),l(D)}finally{a(!1)}},[e,t]),p=async C=>{try{const{data:D,error:M}=await Oe.from("feed_items").insert({...C,organization_id:t}).select(`
          *,
          created_by_user:profiles!feed_items_created_by_fkey(user_id, display_name),
          related_user:profiles!feed_items_target_user_id_fkey(user_id, display_name),
          feed_reads(*)
        `).single();if(M)throw M;return D&&(n(F=>[D,...F]),e&&!D.feed_reads?.some(F=>F.user_id===e)&&f(F=>F+1)),D}catch(D){return console.error("Error creating feed item:",D),l(D),null}},v=async C=>{if(!e)return!1;try{const D=r.find(U=>U.id===C);if(!D)return!1;if(D.feed_reads?.some(U=>U.user_id===e))return!0;const{error:F}=await Oe.from("feed_reads").insert({feed_item_id:C,user_id:e,read_at:new Date().toISOString()});if(F)throw F;return n(U=>U.map(I=>I.id===C?{...I,feed_reads:[...I.feed_reads||[],{user_id:e,read_at:new Date().toISOString()}]}:I)),f(U=>Math.max(0,U-1)),!0}catch(D){return console.error("Error marking feed item as read:",D),l(D),!1}},m=async C=>{if(!e)return!1;try{let D=Oe.from("feed_items").select("id, feed_reads(user_id)");t&&(D=D.eq("organization_id",t)),C&&(D=D.eq("channel",C));const{data:M,error:F}=await D;if(F)throw F;const U=M?.filter(B=>!B.feed_reads?.some(O=>O.user_id===e));if(!U||U.length===0)return!0;const I=U.map(B=>({feed_item_id:B.id,user_id:e,read_at:new Date().toISOString()})),{error:K}=await Oe.from("feed_reads").insert(I);if(K)throw K;return n(B=>B.map(O=>({...O,feed_reads:[...O.feed_reads||[],{user_id:e,read_at:new Date().toISOString()}]}))),f(0),!0}catch(D){return console.error("Error marking all as read:",D),l(D),!1}},j=async C=>{try{const{error:D}=await Oe.from("feed_items").delete().eq("id",C);if(D)throw D;const M=r.find(F=>F.id===C);return M&&e&&!M.feed_reads?.some(F=>F.user_id===e)&&f(F=>Math.max(0,F-1)),n(F=>F.filter(U=>U.id!==C)),!0}catch(D){return console.error("Error deleting feed item:",D),l(D),!1}},w=C=>r.filter(D=>D.channel===C),_=()=>e?r.filter(C=>!C.feed_reads?.some(D=>D.user_id===e)):[],S=C=>r.filter(D=>D.type===C),E=C=>r.filter(D=>D.priority===C),k=C=>e&&r.find(M=>M.id===C)?.feed_reads?.some(M=>M.user_id===e)||!1;return x.useEffect(()=>{t&&h()},[t,h]),x.useEffect(()=>{if(!t)return;const C=Oe.channel(`feed:${t}`).on("postgres_changes",{event:"*",schema:"public",table:"feed_items",filter:`organization_id=eq.${t}`},D=>{if(D.eventType==="INSERT")n(M=>[D.new,...M]),e&&f(M=>M+1);else if(D.eventType==="UPDATE")n(M=>M.map(F=>F.id===D.new.id?{...F,...D.new}:F));else if(D.eventType==="DELETE"){const M=r.find(F=>F.id===D.old.id);M&&e&&!M.feed_reads?.some(F=>F.user_id===e)&&f(F=>Math.max(0,F-1)),n(F=>F.filter(U=>U.id!==D.old.id))}}).on("postgres_changes",{event:"INSERT",schema:"public",table:"feed_reads",filter:e?`user_id=eq.${e}`:void 0},D=>{n(M=>M.map(F=>F.id===D.new.feed_item_id?{...F,feed_reads:[...F.feed_reads||[],D.new]}:F)),f(M=>Math.max(0,M-1))}).subscribe();return()=>{Oe.removeChannel(C)}},[t,e,r]),{feedItems:r,loading:i,error:o,unreadCount:d,fetchFeed:h,createFeedItem:p,markAsRead:v,markAllAsRead:m,deleteFeedItem:j,getByChannel:w,getUnreadItems:_,getByType:S,getByPriority:E,isRead:k,refresh:h}}function hX({item:e,currentUserId:t,onMarkAsRead:r,onMarkAsUnread:n,onDelete:i,onClick:a}){const[o,l]=x.useState(!1),d=t?e.feed_reads?.some(C=>C.user_id===t):!1,f=()=>{switch(e.type){case"task_delegated":return{icon:ok,label:"Task Assigned",bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",badgeVariant:"default"};case"pending_docs":return{icon:vL,label:"Document Alert",bgColor:"bg-amber-50",borderColor:"border-amber-200",iconColor:"text-amber-600",badgeVariant:"secondary"};case"custom_note":return{icon:Nv,label:"Announcement",bgColor:"bg-purple-50",borderColor:"border-purple-200",iconColor:"text-purple-600",badgeVariant:"outline"};case"maintenance":return{icon:LL,label:"Maintenance",bgColor:"bg-orange-50",borderColor:"border-orange-200",iconColor:"text-orange-600",badgeVariant:"secondary"};case"system":return{icon:Sc,label:"System",bgColor:"bg-gray-50",borderColor:"border-gray-200",iconColor:"text-gray-600",badgeVariant:"outline"};default:return{icon:Nv,label:"Info",bgColor:"bg-blue-50",borderColor:"border-blue-200",iconColor:"text-blue-600",badgeVariant:"default"}}},h=()=>{switch(e.priority){case"critical":return{badge:" Critical",bgColor:"bg-red-50",borderColor:"border-red-300",textColor:"text-red-900"};case"high":return{badge:" High",bgColor:"bg-amber-50",borderColor:"border-amber-300",textColor:"text-amber-900"};case"normal":return{badge:"Normal",bgColor:"",borderColor:"",textColor:""};case"low":return{badge:"Low",bgColor:"",borderColor:"",textColor:"text-muted-foreground"};default:return{badge:"Normal",bgColor:"",borderColor:"",textColor:""}}},p=f(),v=h(),m=p.icon,j=e.message.length>150,w=j&&!o?e.message.substring(0,150)+"...":e.message,_=C=>C.split(" ").map(D=>D[0]).join("").toUpperCase().substring(0,2),S=e.creator?.display_name||"System",E=e.creator?.avatar_url,k=t&&(e.created_by===t||t==="admin");return s.jsxs(it,{className:Me("transition-all hover:shadow-md cursor-pointer",!d&&"border-l-4 border-l-primary",v.bgColor,v.borderColor&&`border-2 ${v.borderColor}`),onClick:()=>a?.(e),children:[s.jsx(sr,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between gap-3",children:[s.jsxs("div",{className:"flex items-start gap-3 flex-1 min-w-0",children:[s.jsx("div",{className:Me("p-2 rounded-lg shrink-0",p.bgColor,p.borderColor&&`border ${p.borderColor}`),children:s.jsx(m,{className:Me("w-5 h-5",p.iconColor)})}),s.jsxs("div",{className:"flex-1 min-w-0",children:[s.jsxs("div",{className:"flex items-start gap-2 flex-wrap mb-1",children:[s.jsx("h3",{className:Me("font-semibold text-base leading-tight",v.textColor),children:e.title}),!d&&s.jsx(pt,{variant:"default",className:"h-5 text-xs shrink-0",children:"New"})]}),s.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-2",children:[s.jsx(pt,{variant:p.badgeVariant,className:"text-xs",children:p.label}),e.priority!=="normal"&&s.jsx(pt,{variant:"outline",className:"text-xs",children:v.badge}),e.channel&&s.jsxs(pt,{variant:"secondary",className:"text-xs capitalize",children:["#",e.channel]})]}),s.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[s.jsxs(Qd,{className:"w-5 h-5",children:[s.jsx(ty,{src:E,alt:S}),s.jsx(Jd,{className:"text-xs",children:_(S)})]}),s.jsx("span",{className:"font-medium",children:S}),s.jsx("span",{children:""}),s.jsx("span",{children:Fv(new Date(e.created_at),{addSuffix:!0})})]})]})]}),s.jsxs(O2,{children:[s.jsx(M2,{asChild:!0,children:s.jsx(ke,{variant:"ghost",size:"icon",className:"shrink-0 h-8 w-8",onClick:C=>C.stopPropagation(),children:s.jsx(lk,{className:"w-4 h-4"})})}),s.jsxs(O0,{align:"end",children:[!d&&r&&s.jsxs(dl,{onClick:C=>{C.stopPropagation(),r(e.id)},children:[s.jsx(Nc,{className:"w-4 h-4 mr-2"}),"Mark as Read"]}),d&&n&&s.jsxs(dl,{onClick:C=>{C.stopPropagation(),n(e.id)},children:[s.jsx(Sv,{className:"w-4 h-4 mr-2"}),"Mark as Unread"]}),k&&i&&s.jsxs(dl,{onClick:C=>{C.stopPropagation(),confirm("Are you sure you want to delete this feed item?")&&i(e.id)},className:"text-destructive focus:text-destructive",children:[s.jsx(Uu,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})]})}),s.jsxs(ot,{className:"pt-0",children:[s.jsx("p",{className:Me("text-sm whitespace-pre-wrap",v.textColor||"text-foreground"),children:w}),j&&s.jsx(ke,{variant:"link",size:"sm",className:"p-0 h-auto mt-2",onClick:C=>{C.stopPropagation(),l(!o)},children:o?"Show less":"Show more"}),e.related_entity_type&&e.related_entity_id&&s.jsx("div",{className:"mt-3 pt-3 border-t",children:s.jsxs(ke,{variant:"outline",size:"sm",onClick:C=>{C.stopPropagation(),window.location.href=`/${e.related_entity_type}s/${e.related_entity_id}`},children:[s.jsx(Tu,{className:"w-4 h-4 mr-2"}),"View ",e.related_entity_type]})}),e.expires_at&&new Date(e.expires_at)>new Date&&s.jsxs("div",{className:"mt-3 flex items-center gap-2 text-xs text-muted-foreground",children:[s.jsx(es,{className:"w-3 h-3"}),s.jsxs("span",{children:["Expires"," ",Fv(new Date(e.expires_at),{addSuffix:!0})]})]})]})]})}function mX({items:e,loading:t,currentUserId:r,onMarkAsRead:n,onMarkAsUnread:i,onDelete:a,onItemClick:o,onLoadMore:l,hasMore:d=!1,loadingMore:f=!1}){return t?s.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(h=>s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx(Hr,{className:"w-12 h-12 rounded-lg shrink-0"}),s.jsxs("div",{className:"flex-1 space-y-3",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hr,{className:"h-5 w-32"}),s.jsx(Hr,{className:"h-5 w-16"})]}),s.jsx(Hr,{className:"h-4 w-full"}),s.jsx(Hr,{className:"h-4 w-3/4"}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Hr,{className:"w-6 h-6 rounded-full"}),s.jsx(Hr,{className:"h-3 w-24"}),s.jsx(Hr,{className:"h-3 w-16"})]})]})]})})},h))}):!e||e.length===0?s.jsx(it,{className:"border-2 border-dashed",children:s.jsxs(ot,{className:"flex flex-col items-center justify-center py-12",children:[s.jsx("div",{className:"rounded-full bg-muted p-6 mb-4",children:s.jsx(wL,{className:"w-12 h-12 text-muted-foreground"})}),s.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No feed items"}),s.jsx("p",{className:"text-muted-foreground text-center max-w-sm",children:"There are no notifications or updates to show at the moment. Check back later for new activity."})]})}):s.jsxs("div",{className:"space-y-4",children:[e.map(h=>s.jsx(hX,{item:h,currentUserId:r,onMarkAsRead:n,onMarkAsUnread:i,onDelete:a,onClick:o},h.id)),d&&l&&s.jsx("div",{className:"flex justify-center pt-4",children:s.jsx(ke,{variant:"outline",onClick:l,disabled:f,className:"min-w-[200px]",children:f?s.jsxs(s.Fragment,{children:[s.jsx(Si,{className:"w-4 h-4 mr-2 animate-spin"}),"Loading more..."]}):"Load More"})}),!d&&e.length>10&&s.jsx("div",{className:"text-center py-6 text-sm text-muted-foreground",children:"You've reached the end of the feed"})]})}function pX({items:e,currentUserId:t}){const r=e.length,n=t?e.filter(p=>!p.feed_reads?.some(v=>v.user_id===t)):[],i=n.length,a=n.filter(p=>p.priority==="critical").length,o=n.filter(p=>p.priority==="high").length;n.filter(p=>p.priority==="normal").length;const l=e.filter(p=>p.type==="task_delegated").length,d=e.filter(p=>p.type==="pending_docs").length,f=e.filter(p=>p.type==="maintenance").length,h=r>0?Math.round((r-i)/r*100):0;return s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Unread"}),s.jsxs("div",{className:"flex items-baseline gap-2",children:[s.jsx("p",{className:"text-3xl font-bold",children:i}),r>0&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["of ",r]})]})]}),s.jsx("div",{className:"p-3 bg-primary/10 rounded-lg",children:s.jsx(hL,{className:"w-6 h-6 text-primary"})})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Urgent"}),s.jsxs("div",{className:"flex items-center gap-3",children:[a>0&&s.jsxs(pt,{variant:"destructive",className:"text-base px-2 py-1 font-bold",children:[" ",a]}),o>0&&s.jsxs(pt,{variant:"secondary",className:"text-base px-2 py-1 font-bold bg-amber-100 text-amber-900",children:[" ",o]}),a===0&&o===0&&s.jsx("p",{className:"text-3xl font-bold text-green-600",children:"0"})]})]}),s.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:s.jsx(wn,{className:"w-6 h-6 text-red-600"})})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"space-y-2 flex-1",children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"By Type"}),s.jsxs("div",{className:"space-y-1",children:[l>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:l}),s.jsx("span",{className:"text-muted-foreground",children:"Tasks"})]}),d>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:d}),s.jsx("span",{className:"text-muted-foreground",children:"Docs"})]}),f>0&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx("span",{children:""}),s.jsx("span",{className:"font-medium",children:f}),s.jsx("span",{className:"text-muted-foreground",children:"Maintenance"})]}),l===0&&d===0&&f===0&&s.jsx("p",{className:"text-sm text-muted-foreground",children:"No items"})]})]}),s.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:s.jsx(Nv,{className:"w-6 h-6 text-blue-600"})})]})})}),s.jsx(it,{children:s.jsx(ot,{className:"p-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-1",children:"Read Progress"}),s.jsx("div",{className:"flex items-baseline gap-2",children:s.jsxs("p",{className:"text-3xl font-bold",children:[h,"%"]})}),s.jsx("div",{className:"mt-2 h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-green-600 transition-all duration-300",style:{width:`${h}%`}})})]}),s.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:s.jsx(Nh,{className:"w-6 h-6 text-green-600"})})]})})})]})}function gX({filters:e,onFilterChange:t,onClearFilters:r}){const[n,i]=x.useState(""),[a,o]=x.useState(!1),l=[e.channel,e.type,e.priority,e.unread_only,e.date_from,e.date_to].filter(Boolean).length,d=m=>{t({...e,channel:m==="all"?void 0:m})},f=m=>{t({...e,type:m==="all"?void 0:m})},h=m=>{t({...e,priority:m==="all"?void 0:m})},p=()=>{t({...e,unread_only:!e.unread_only})},v=()=>{console.log("Searching for:",n)};return s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("div",{className:"flex-1 min-w-[200px]",children:s.jsxs("div",{className:"relative",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-muted-foreground"}),s.jsx(er,{placeholder:"Search feed...",value:n,onChange:m=>i(m.target.value),onKeyDown:m=>m.key==="Enter"&&v(),className:"pl-9"})]})}),s.jsxs(Ir,{value:e.channel||"all",onValueChange:d,children:[s.jsx(Lr,{className:"w-[150px]",children:s.jsx(Or,{placeholder:"Channel"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Channels"}),s.jsx(et,{value:"general",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"General"})]})}),s.jsx(et,{value:"baristas",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Baristas"})]})}),s.jsx(et,{value:"cooks",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Cooks"})]})}),s.jsx(et,{value:"maintenance",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Maintenance"})]})})]})]}),s.jsx(ke,{variant:e.unread_only?"default":"outline",size:"default",onClick:p,className:"gap-2",children:e.unread_only?"Unread Only":"All"}),s.jsxs(ke,{variant:"outline",size:"icon",onClick:()=>o(!a),className:"relative",children:[s.jsx(jc,{className:"w-4 h-4"}),l>0&&s.jsx(pt,{variant:"destructive",className:"absolute -top-2 -right-2 h-5 w-5 flex items-center justify-center p-0 text-xs",children:l})]}),l>0&&s.jsxs(ke,{variant:"ghost",size:"sm",onClick:r,className:"gap-1",children:[s.jsx(xn,{className:"w-4 h-4"}),"Clear"]})]}),a&&s.jsxs(s.Fragment,{children:[s.jsx(Hs,{}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 p-4 bg-muted/30 rounded-lg",children:[s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Type"}),s.jsxs(Ir,{value:e.type||"all",onValueChange:f,children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"All Types"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Types"}),s.jsx(et,{value:"task_delegated",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Task Assigned"})]})}),s.jsx(et,{value:"pending_docs",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Document Alert"})]})}),s.jsx(et,{value:"custom_note",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Announcement"})]})}),s.jsx(et,{value:"maintenance",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Maintenance"})]})}),s.jsx(et,{value:"system",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"System"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Priority"}),s.jsxs(Ir,{value:e.priority||"all",onValueChange:h,children:[s.jsx(Lr,{children:s.jsx(Or,{placeholder:"All Priorities"})}),s.jsxs(Fr,{children:[s.jsx(et,{value:"all",children:"All Priorities"}),s.jsx(et,{value:"critical",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Critical"})]})}),s.jsx(et,{value:"high",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"High"})]})}),s.jsx(et,{value:"normal",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Normal"})]})}),s.jsx(et,{value:"low",children:s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{children:""}),s.jsx("span",{children:"Low"})]})})]})]})]}),s.jsxs("div",{className:"space-y-2",children:[s.jsx("label",{className:"text-sm font-medium",children:"Date Range"}),s.jsx(ke,{variant:"outline",className:"w-full justify-start",children:" Select Range"})]})]})]}),l>0&&s.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[s.jsx("span",{className:"text-sm text-muted-foreground",children:"Active filters:"}),e.channel&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Channel: ",e.channel,s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>d("all")})]}),e.type&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Type: ",e.type.replace("_"," "),s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>f("all")})]}),e.priority&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Priority: ",e.priority,s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:()=>h("all")})]}),e.unread_only&&s.jsxs(pt,{variant:"secondary",className:"gap-1",children:["Unread Only",s.jsx(xn,{className:"w-3 h-3 cursor-pointer",onClick:p})]})]})]})}function vX({organizationId:e,userRole:t}){const[r,n]=x.useState([]),[i,a]=x.useState(!1),[o,l]=x.useState(!1),d=["admin","manager","owner"].includes(t||"");x.useEffect(()=>{d&&e&&f()},[e,d]);const f=async()=>{a(!0);try{const{data:p,error:v}=await Oe.from("team_members").select("*").eq("organization_id",e).eq("is_active",!0).eq("profile_complete",!1).order("display_name",{ascending:!0});if(v)throw v;n(p||[])}catch(p){console.error("[IncompleteProfilesAlert] Error fetching incomplete profiles:",p)}finally{a(!1)}};if(!d||r.length===0)return null;const h=p=>{const v=[p.display_name,p.email,p.phone,p.position,p.hire_date,p.date_of_birth,p.address,p.emergency_contact_name,p.emergency_contact_phone],m=v.filter(j=>j).length;return Math.round(m/v.length*100)};return s.jsxs(it,{className:"border-blue-500 bg-blue-50 dark:bg-blue-950/20",children:[s.jsx(sr,{className:"pb-3",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx(Ao,{className:"h-5 w-5 text-blue-600"}),s.jsx(pr,{className:"text-lg",children:"Incomplete Team Profiles"}),s.jsx(pt,{variant:"secondary",className:"ml-2",children:r.length})]}),s.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>l(!o),children:o?s.jsx(ak,{className:"h-4 w-4"}):s.jsx(s2,{className:"h-4 w-4"})})]})}),o&&s.jsxs(ot,{children:[s.jsxs(So,{className:"mb-4 bg-blue-100 border-blue-300 dark:bg-blue-900/30",children:[s.jsx(wn,{className:"h-4 w-4 text-blue-600"}),s.jsx(ko,{className:"text-blue-900 dark:text-blue-100",children:"The following team members have incomplete profiles. Please follow up to ensure all required information is provided."})]}),i?s.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading team members..."}):s.jsx("div",{className:"space-y-3",children:r.map(p=>{const v=h(p);return s.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[s.jsxs("div",{className:"flex-1",children:[s.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[s.jsx("p",{className:"font-medium",children:p.display_name||"No name"}),s.jsx(pt,{variant:"secondary",className:"text-xs",style:{backgroundColor:Yv[p.role_type]+"20",color:Yv[p.role_type]},children:Pb[p.role_type]})]}),p.position&&s.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:p.position}),s.jsxs("div",{className:"space-y-1",children:[s.jsxs("div",{className:"flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-muted-foreground",children:"Profile completion"}),s.jsxs("span",{className:"font-medium",children:[v,"%"]})]}),s.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:s.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${v}%`}})})]}),s.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-muted-foreground",children:[s.jsx(Xn,{className:"h-3 w-3"}),s.jsxs("span",{children:["Missing: ",[!p.date_of_birth&&"DOB",!p.address&&"Address",!p.emergency_contact_name&&"Emergency Contact"].filter(Boolean).join(", ")||"Basic info only"]})]})]}),s.jsx(ke,{variant:"outline",size:"sm",onClick:()=>{console.log("View profile:",p.id)},children:"View Profile"})]},p.id)})}),s.jsxs("div",{className:"mt-4 flex items-center justify-between pt-4 border-t",children:[s.jsxs("div",{className:"text-sm text-muted-foreground",children:[s.jsx(Nc,{className:"h-4 w-4 inline mr-1"}),"Follow up with team members to complete profiles"]}),s.jsx(ke,{variant:"default",size:"sm",onClick:()=>{console.log("Navigate to People module")},children:"Go to People Module"})]})]})]})}function yX(){const{toast:e}=qr(),{context:t,loading:r}=Qh(),[n,i]=x.useState({}),[a,o]=x.useState(null),[l,d]=x.useState(!1),{feedItems:f,loading:h,error:p,fetchFeed:v,markAsRead:m,deleteFeedItem:j}=fX(t?.user_id,t?.organization_id);x.useEffect(()=>{t?.organization_id&&v(n)},[t?.organization_id,n,v]);const w=M=>{o(M),e({title:"Team Member Selected",description:`Viewing feed as ${M.display_name}`})},_=async M=>{if(!(a?.auth_role_id||t?.user_id))return;const U=await m(M);e(U?{title:"Marked as read",description:"Feed item has been marked as read."}:{title:"Error",description:"Failed to mark item as read.",variant:"destructive"})},S=async M=>{e({title:"Coming soon",description:"Mark as unread functionality will be added."})},E=async M=>{const F=await j(M);e(F?{title:"Deleted",description:"Feed item has been deleted."}:{title:"Error",description:"Failed to delete feed item.",variant:"destructive"})},k=()=>{v(n),e({title:"Refreshed",description:"Feed has been refreshed."})},C=()=>{i({})},D=M=>{const F=a?.auth_role_id||t?.user_id;M.feed_reads?.some(U=>U.user_id===F)||_(M.id)};return r?s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(it,{children:s.jsx(ot,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading..."})})})}):t?.organization_id?s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsx(Qv,{open:l,onOpenChange:d,onSelectUser:w,organizationId:t?.organization_id,title:"Select Team Member",description:"Choose who is viewing the feed"}),a&&!a.profile_complete&&s.jsx(it,{className:"border-amber-500 bg-amber-50 dark:bg-amber-950/20",children:s.jsx(ot,{className:"p-4",children:s.jsxs("div",{className:"flex items-start gap-3",children:[s.jsx(wn,{className:"h-5 w-5 text-amber-600 mt-0.5"}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h3",{className:"font-semibold text-amber-900 dark:text-amber-100",children:"Profile Incomplete"}),s.jsxs("p",{className:"text-sm text-amber-800 dark:text-amber-200 mt-1",children:[a.display_name,"'s profile is not complete. Please update personal information, emergency contacts, and required certificates in the People module."]})]}),s.jsx(ke,{variant:"outline",size:"sm",className:"shrink-0",onClick:()=>e({title:"Navigate to People",description:"Open People module to complete profile"}),children:"Complete Profile"})]})})}),s.jsx(vX,{organizationId:t?.organization_id||"",userRole:t?.user_role}),s.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-4",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Feed"}),s.jsx("p",{className:"text-muted-foreground",children:"Stay updated with notifications and activity feed"})]}),a&&s.jsxs(pt,{variant:"secondary",className:"h-fit",children:[s.jsx(Ru,{className:"w-3 h-3 mr-1"}),a.display_name]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ke,{variant:"outline",onClick:()=>d(!0),children:[s.jsx(Ru,{className:"w-4 h-4 mr-2"}),a?"Change User":"Select User"]}),s.jsx(ke,{variant:"outline",size:"icon",onClick:k,disabled:h,children:s.jsx(ap,{className:`w-4 h-4 ${h?"animate-spin":""}`})}),(t?.user_role==="admin"||t?.user_role==="manager"||t?.user_role==="owner")&&s.jsxs(ke,{onClick:()=>e({title:"Coming soon!",description:"Create feed item functionality will be added."}),children:[s.jsx(Ln,{className:"w-4 h-4 mr-2"}),"Create"]})]})]}),s.jsx(pX,{items:f,currentUserId:a?.auth_role_id||t?.user_id}),s.jsx(Hs,{}),s.jsx(gX,{filters:n,onFilterChange:i,onClearFilters:C}),s.jsx(Hs,{}),p&&s.jsx(it,{className:"border-destructive",children:s.jsxs(ot,{className:"p-6 text-center",children:[s.jsxs("p",{className:"text-destructive",children:["Error loading feed: ",p.message]}),s.jsx(ke,{onClick:k,variant:"outline",className:"mt-4",children:"Try Again"})]})}),!p&&s.jsx(mX,{items:f,loading:h,currentUserId:a?.auth_role_id||t?.user_id,onMarkAsRead:_,onMarkAsUnread:S,onDelete:E,onItemClick:D})]}):s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(it,{children:s.jsx(ot,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Please log in to view your feed."})})})})}function xX(){return s.jsx(yX,{})}const lv=e=>{const t=new Date,r=new Date(e),n=Math.floor((r.getTime()-t.getTime())/(1e3*60*60));return n<0?{status:"expired",hoursUntilExpiry:n,message:`Expired ${Math.abs(n)}h ago`}:n<=24?{status:"warning",hoursUntilExpiry:n,message:`${n}h left`}:{status:"good",hoursUntilExpiry:n,message:`${Math.floor(n/24)}d left`}},wX=e=>{switch(e){case"expired":return"bg-destructive/10 border-destructive";case"warning":return"bg-warning/10 border-warning";case"good":return"bg-success/10 border-success"}},bX=e=>{switch(e){case"expired":return s.jsx(h0,{className:"w-5 h-5 text-destructive"});case"warning":return s.jsx(es,{className:"w-5 h-5 text-warning"});case"good":return s.jsx(cl,{className:"w-5 h-5 text-success"})}},_X=e=>{switch(e){case"expired":return"destructive";case"warning":return"secondary";case"good":return"outline"}};function NX(){const[e,t]=x.useState([]),[r,n]=x.useState(!0),{toast:i}=qr(),a=async()=>{try{const{data:l,error:d}=await Oe.from("prepared_items").select(`
          *,
          recipes (
            name,
            category
          )
        `).order("expires_at",{ascending:!0});if(d){console.error("Error fetching prepared items:",d),i({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"});return}t(l||[])}catch(l){console.error("Error:",l),i({title:"Error",description:"Failed to fetch prepared items",variant:"destructive"})}finally{n(!1)}};if(x.useEffect(()=>{a();const l=Oe.channel("prepared_items_changes").on("postgres_changes",{event:"*",schema:"public",table:"prepared_items"},()=>{a()}).subscribe();return()=>{Oe.removeChannel(l)}},[]),r)return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Traffic Light"}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor all products by expiration status"})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:[...Array(8)].map((l,d)=>s.jsxs(it,{children:[s.jsx(sr,{children:s.jsx(Hr,{className:"h-6 w-3/4"})}),s.jsxs(ot,{children:[s.jsx(Hr,{className:"h-4 w-1/2 mb-2"}),s.jsx(Hr,{className:"h-4 w-full"})]})]},d))})]});const o={expired:e.filter(l=>lv(l.expires_at).status==="expired").length,warning:e.filter(l=>lv(l.expires_at).status==="warning").length,good:e.filter(l=>lv(l.expires_at).status==="good").length};return s.jsxs("div",{children:[s.jsxs("div",{className:"mb-6",children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Product Traffic Light"}),s.jsx("p",{className:"text-muted-foreground",children:"Monitor all products by expiration status"})]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[s.jsx(it,{className:"border-destructive/50",children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expired"}),s.jsx("p",{className:"text-3xl font-bold text-destructive",children:o.expired})]}),s.jsx(h0,{className:"w-8 h-8 text-destructive"})]})})}),s.jsx(it,{className:"border-warning/50",children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Expiring Soon"}),s.jsx("p",{className:"text-3xl font-bold text-warning",children:o.warning})]}),s.jsx(es,{className:"w-8 h-8 text-warning"})]})})}),s.jsx(it,{className:"border-success/50",children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm text-muted-foreground",children:"Fresh"}),s.jsx("p",{className:"text-3xl font-bold text-success",children:o.good})]}),s.jsx(cl,{className:"w-8 h-8 text-success"})]})})})]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:e.map(l=>{const d=lv(l.expires_at),f=new Date(l.expires_at),h=new Date(l.prepared_at);return s.jsxs(it,{className:`border-2 transition-all hover:shadow-lg ${wX(d.status)}`,children:[s.jsx(sr,{className:"pb-3",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsx(pr,{className:"text-base line-clamp-2",children:l.recipes?.name||"Unknown Product"}),bX(d.status)]})}),s.jsxs(ot,{className:"space-y-3",children:[s.jsxs("div",{children:[s.jsx(pt,{variant:_X(d.status),className:"mb-2",children:d.status.toUpperCase()}),s.jsx("p",{className:"text-sm font-medium",children:d.message})]}),s.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx(Xn,{className:"w-3 h-3"}),s.jsxs("span",{children:["Expires: ",f.toLocaleDateString()," ",f.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),s.jsxs("div",{children:["Prepared: ",h.toLocaleDateString()]}),l.recipes?.category&&s.jsxs("div",{className:"capitalize",children:["Category: ",l.recipes.category]}),s.jsxs("div",{children:["Batch: ",l.batch_size||1]})]})]})]},l.id)})}),e.length===0&&s.jsx(it,{children:s.jsx(ot,{className:"py-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"No prepared items found"})})})]})}const SR=x.forwardRef(({className:e,...t},r)=>s.jsx("div",{className:"relative w-full overflow-auto",children:s.jsx("table",{ref:r,className:Me("w-full caption-bottom text-sm",e),...t})}));SR.displayName="Table";const kR=x.forwardRef(({className:e,...t},r)=>s.jsx("thead",{ref:r,className:Me("[&_tr]:border-b",e),...t}));kR.displayName="TableHeader";const CR=x.forwardRef(({className:e,...t},r)=>s.jsx("tbody",{ref:r,className:Me("[&_tr:last-child]:border-0",e),...t}));CR.displayName="TableBody";const jX=x.forwardRef(({className:e,...t},r)=>s.jsx("tfoot",{ref:r,className:Me("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t}));jX.displayName="TableFooter";const Jw=x.forwardRef(({className:e,...t},r)=>s.jsx("tr",{ref:r,className:Me("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));Jw.displayName="TableRow";const Pd=x.forwardRef(({className:e,...t},r)=>s.jsx("th",{ref:r,className:Me("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));Pd.displayName="TableHead";const Td=x.forwardRef(({className:e,...t},r)=>s.jsx("td",{ref:r,className:Me("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));Td.displayName="TableCell";const SX=x.forwardRef(({className:e,...t},r)=>s.jsx("caption",{ref:r,className:Me("mt-4 text-sm text-muted-foreground",e),...t}));SX.displayName="TableCaption";function kX(){const[e,t]=x.useState([]),[r,n]=x.useState([]),[i,a]=x.useState(""),[o,l]=x.useState(!0),[d,f]=x.useState(null),[h,p]=x.useState(!1),[v,m]=x.useState(null),{toast:j}=qr(),{print:w,isLoading:_}=tm();x.useEffect(()=>{S()},[]),x.useEffect(()=>{E()},[i,e]);const S=async()=>{try{l(!0);const{data:U,error:I}=await Oe.from("label_drafts").select("*").order("updated_at",{ascending:!1});if(I)throw I;t(U||[])}catch(U){console.error("Error fetching drafts:",U),j({title:"Error",description:"Failed to load saved drafts",variant:"destructive"})}finally{l(!1)}},E=()=>{if(!i.trim()){n(e);return}const U=i.toLowerCase(),I=e.filter(K=>K.draft_name.toLowerCase().includes(U)||K.form_data.productName?.toLowerCase().includes(U)||K.form_data.categoryName?.toLowerCase().includes(U)||K.form_data.subcategoryName?.toLowerCase().includes(U)||K.form_data.batchNumber?.toLowerCase().includes(U));n(I)},k=async U=>{try{const{error:I}=await Oe.from("label_drafts").delete().eq("id",U);if(I)throw I;j({title:"Draft Deleted",description:"Draft has been removed successfully"}),S()}catch(I){console.error("Error deleting draft:",I),j({title:"Error",description:"Failed to delete draft",variant:"destructive"})}finally{p(!1),m(null)}},C=async U=>{try{const I=U.form_data,K=I.selectedAllergens?.map(O=>({id:O.id,name:O.name,icon:O.icon||null,severity:O.severity}))||[];await Ou({productId:I.productId||"",productName:I.productName||U.draft_name,categoryId:I.categoryId||null,categoryName:I.categoryName||"",preparedBy:"",preparedByName:"",prepDate:I.prepDate||"",expiryDate:I.expiryDate||"",allergens:K,condition:I.condition||"Refrigerated",batchNumber:I.batchNumber||""}),await w({productName:I.productName||U.draft_name,categoryName:I.categoryName||"",subcategoryName:I.subcategoryName||"",preparedDate:I.prepDate||"",useByDate:I.expiryDate||"",allergens:K.map(O=>O.name),storageInstructions:I.condition?`Condition: ${I.condition}`:"",barcode:I.batchNumber})&&j({title:"Label Printed",description:"Draft has been sent to printer"})}catch(I){console.error("Error printing draft:",I),j({title:"Print Error",description:"Failed to print draft",variant:"destructive"})}},D=U=>{m(U),p(!0)},M=U=>{try{return on(new Date(U),"MMM dd, yyyy HH:mm")}catch{return U}},F=U=>{if(!U)return null;const I={Refrigerated:"bg-blue-100 text-blue-800",Frozen:"bg-cyan-100 text-cyan-800","Room Temperature":"bg-green-100 text-green-800"};return s.jsx(pt,{className:I[U]||"bg-gray-100 text-gray-800",children:U})};return s.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-3xl font-bold",children:"Draft Management"}),s.jsx("p",{className:"text-muted-foreground",children:"Manage, view, and print your saved label drafts"})]}),s.jsxs(ke,{onClick:S,variant:"outline",size:"sm",children:[s.jsx(ap,{className:"w-4 h-4 mr-2"}),"Refresh"]})]}),s.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"Total Drafts"}),s.jsx(hh,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ot,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.length})})]}),s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"Updated Today"}),s.jsx(Ya,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ot,{children:s.jsx("div",{className:"text-2xl font-bold",children:e.filter(U=>new Date(U.updated_at).toDateString()===new Date().toDateString()).length})})]}),s.jsxs(it,{children:[s.jsxs(sr,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[s.jsx(pr,{className:"text-sm font-medium",children:"Filtered Results"}),s.jsx(jc,{className:"h-4 w-4 text-muted-foreground"})]}),s.jsx(ot,{children:s.jsx("div",{className:"text-2xl font-bold",children:r.length})})]})]}),s.jsx(it,{children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"relative",children:[s.jsx(_l,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),s.jsx(er,{placeholder:"Search drafts by product name, category, batch number...",value:i,onChange:U=>a(U.target.value),className:"pl-10"})]})})}),s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(pr,{children:"Saved Drafts"}),s.jsxs(xa,{children:[r.length," draft",r.length!==1?"s":""," ",i&&"matching your search"]})]}),s.jsx(ot,{children:o?s.jsx("div",{className:"flex items-center justify-center py-8",children:s.jsx(ap,{className:"w-6 h-6 animate-spin text-muted-foreground"})}):r.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(hh,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"}),s.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No Drafts Found"}),s.jsx("p",{className:"text-muted-foreground",children:i?"Try adjusting your search query":"Start creating labels to save drafts"})]}):s.jsx("div",{className:"overflow-x-auto",children:s.jsxs(SR,{children:[s.jsx(kR,{children:s.jsxs(Jw,{children:[s.jsx(Pd,{children:"Product"}),s.jsx(Pd,{children:"Category"}),s.jsx(Pd,{children:"Dates"}),s.jsx(Pd,{children:"Condition"}),s.jsx(Pd,{children:"Updated"}),s.jsx(Pd,{className:"text-right",children:"Actions"})]})}),s.jsx(CR,{children:r.map(U=>{const I=U.form_data;return s.jsxs(Jw,{children:[s.jsx(Td,{children:s.jsxs("div",{children:[s.jsx("div",{className:"font-medium",children:I.productName||U.draft_name}),I.batchNumber&&s.jsxs("div",{className:"text-xs text-muted-foreground",children:["Batch: ",I.batchNumber]})]})}),s.jsx(Td,{children:s.jsxs("div",{className:"text-sm",children:[s.jsx("div",{children:I.categoryName||"-"}),I.subcategoryName&&s.jsx("div",{className:"text-xs text-muted-foreground",children:I.subcategoryName})]})}),s.jsx(Td,{children:s.jsxs("div",{className:"text-sm",children:[s.jsxs("div",{children:["Prep: ",I.prepDate||"-"]}),s.jsxs("div",{className:"text-red-600 font-medium",children:["Exp: ",I.expiryDate||"-"]})]})}),s.jsx(Td,{children:F(I.condition)}),s.jsx(Td,{className:"text-sm text-muted-foreground",children:M(U.updated_at)}),s.jsx(Td,{className:"text-right",children:s.jsxs("div",{className:"flex items-center justify-end gap-2",children:[s.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>f(U),children:s.jsx(Tu,{className:"w-4 h-4"})}),s.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>C(U),disabled:_,children:s.jsx(Hi,{className:"w-4 h-4"})}),s.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>D(U.id),children:s.jsx(Uu,{className:"w-4 h-4 text-red-600"})})]})})]},U.id)})})]})})})]}),s.jsx(wc,{open:h,onOpenChange:p,children:s.jsxs(fl,{children:[s.jsxs(hl,{children:[s.jsx(pl,{children:"Delete Draft"}),s.jsx(bc,{children:"Are you sure you want to delete this draft? This action cannot be undone."})]}),s.jsxs(ml,{children:[s.jsx(vl,{children:"Cancel"}),s.jsx(gl,{onClick:()=>v&&k(v),className:"bg-red-600 hover:bg-red-700",children:"Delete"})]})]})}),d&&s.jsx(wc,{open:!!d,onOpenChange:()=>f(null),children:s.jsxs(fl,{className:"max-w-2xl",children:[s.jsx(hl,{children:s.jsxs(pl,{children:["Draft Details: ",d.draft_name]})}),s.jsxs("div",{className:"space-y-4",children:[s.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Product Name"}),s.jsx("p",{className:"text-lg font-semibold",children:d.form_data.productName||d.draft_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Condition"}),s.jsx("p",{children:F(d.form_data.condition)})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Category"}),s.jsx("p",{children:d.form_data.categoryName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Subcategory"}),s.jsx("p",{children:d.form_data.subcategoryName||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Prepared Date"}),s.jsx("p",{children:d.form_data.prepDate||"-"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Expiry Date"}),s.jsx("p",{className:"text-red-600 font-medium",children:d.form_data.expiryDate||"-"})]}),d.form_data.batchNumber&&s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Batch Number"}),s.jsx("p",{className:"font-mono",children:d.form_data.batchNumber})]}),d.form_data.selectedAllergens&&d.form_data.selectedAllergens.length>0&&s.jsxs("div",{className:"col-span-2",children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Allergens"}),s.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:d.form_data.selectedAllergens.map(U=>s.jsxs(pt,{variant:"destructive",children:[U.icon," ",U.name]},U.id))})]})]}),s.jsxs("div",{className:"text-xs text-muted-foreground pt-4 border-t",children:["Created: ",M(d.created_at),"  Updated:"," ",M(d.updated_at)]})]}),s.jsxs(ml,{children:[s.jsx(vl,{children:"Close"}),s.jsxs(gl,{onClick:()=>C(d),children:[s.jsx(Hi,{className:"w-4 h-4 mr-2"}),"Print Draft"]})]})]})})]})}function CX(){const{userId:e}=$M(),t=E0(),{toast:r}=qr(),{context:n}=Qh(),{users:i,loading:a,fetchUsers:o}=ly(n?.organization_id),[l,d]=x.useState("overview"),[f,h]=x.useState(null),[p,v]=x.useState(!1);x.useEffect(()=>{n?.organization_id&&e&&o({search:e})},[n?.organization_id,e,o]),x.useEffect(()=>{if(i.length>0&&e){const F=i.find(U=>U.user_id===e);h(F||null)}},[i,e]);const m=F=>F.split(" ").map(U=>U[0]).join("").toUpperCase().slice(0,2),j=F=>({admin:"bg-red-500",owner:"bg-purple-500",leader_chef:"bg-orange-500",cook:"bg-blue-500",barista:"bg-green-500"})[F]||"bg-gray-500",w=F=>({admin:"destructive",owner:"default",leader_chef:"secondary",cook:"outline",barista:"outline"})[F]||"outline",_=F=>{if(!F||F.length===0)return{status:"no_documents",badge:s.jsx(pt,{variant:"outline",children:"No Documents"}),color:"text-muted-foreground"};const U=new Date,I=xs(U,30),K=F.some(O=>O.expiration_date&&Od(new Date(O.expiration_date),U)),B=F.some(O=>O.expiration_date&&Ph(new Date(O.expiration_date),U)&&Od(new Date(O.expiration_date),I));return K?{status:"expired",badge:s.jsx(pt,{variant:"destructive",children:" Expired Documents"}),color:"text-red-600"}:B?{status:"expiring",badge:s.jsx(pt,{className:"bg-amber-600",children:" Expiring Soon"}),color:"text-amber-600"}:{status:"compliant",badge:s.jsx(pt,{className:"bg-green-600",children:" Compliant"}),color:"text-green-600"}},S=()=>{v(!0)},E=()=>{n?.organization_id&&e&&o({search:e})},k=()=>{r({title:"Are you sure?",description:"Delete user functionality will be implemented with confirmation.",variant:"destructive"})},C=()=>{r({title:"Coming soon!",description:"Document upload will be implemented."})},D=n?.user_role==="admin"||n?.user_role==="owner"||n?.user_id===e;if(a)return s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(it,{children:s.jsx(ot,{className:"p-12 text-center",children:s.jsx("p",{className:"text-muted-foreground",children:"Loading profile..."})})})});if(!f)return s.jsx("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:s.jsx(it,{children:s.jsxs(ot,{className:"p-12 text-center space-y-4",children:[s.jsx(wn,{className:"w-12 h-12 mx-auto text-muted-foreground"}),s.jsxs("div",{children:[s.jsx("p",{className:"font-medium",children:"User not found"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"The user profile you're looking for doesn't exist or you don't have access."})]}),s.jsxs(ke,{onClick:()=>t("/people"),variant:"outline",children:[s.jsx(I1,{className:"w-4 h-4 mr-2"}),"Back to People"]})]})})});const M=_(f.user_documents);return s.jsxs("div",{className:"container mx-auto p-4 sm:p-6 space-y-6",children:[s.jsxs("div",{className:"flex items-center gap-4",children:[s.jsx(ke,{variant:"ghost",size:"icon",onClick:()=>t("/people"),children:s.jsx(I1,{className:"w-5 h-5"})}),s.jsxs("div",{className:"flex-1",children:[s.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"User Profile"}),s.jsx("p",{className:"text-muted-foreground",children:"View and manage user information"})]}),D&&s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs(ke,{variant:"outline",onClick:S,children:[s.jsx(m0,{className:"w-4 h-4 mr-2"}),"Edit"]}),(n?.user_role==="admin"||n?.user_role==="owner"||n?.user_role==="leader_chef")&&s.jsxs(ke,{variant:"destructive",onClick:k,children:[s.jsx(Uu,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]}),s.jsx(it,{children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"flex flex-col items-center gap-3",children:[s.jsx(Qd,{className:`w-24 h-24 ${j(f.role)} text-white text-2xl`,children:s.jsx(Jd,{className:"bg-transparent",children:m(f.display_name)})}),s.jsx("div",{className:"text-center",children:s.jsx(pt,{variant:w(f.role),children:f.role==="leader_chef"?"Leader Chef":f.role})})]}),s.jsxs("div",{className:"flex-1 space-y-4",children:[s.jsxs("div",{children:[s.jsx("h2",{className:"text-2xl font-bold",children:f.display_name}),f.position&&s.jsx("p",{className:"text-muted-foreground",children:f.position})]}),s.jsx("div",{className:"flex flex-wrap gap-2",children:M.badge}),s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[f.email&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(hk,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("a",{href:`mailto:${f.email}`,className:"hover:underline",children:f.email})]}),f.phone&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(mk,{className:"w-4 h-4 text-muted-foreground"}),s.jsx("a",{href:`tel:${f.phone}`,className:"hover:underline",children:f.phone})]}),f.hire_date&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(Ya,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Hired ",on(new Date(f.hire_date),"MMM d, yyyy")]})]}),f.department_id&&s.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[s.jsx(O1,{className:"w-4 h-4 text-muted-foreground"}),s.jsxs("span",{children:["Dept: ",f.department_id]})]})]})]})]})})}),s.jsxs(ny,{value:l,onValueChange:d,className:"space-y-6",children:[s.jsxs($p,{className:"grid w-full grid-cols-4",children:[s.jsxs(ja,{value:"overview",children:[s.jsx(ef,{className:"w-4 h-4 mr-2"}),"Overview"]}),s.jsxs(ja,{value:"documents",children:[s.jsx(hh,{className:"w-4 h-4 mr-2"}),"Documents"]}),s.jsxs(ja,{value:"activity",children:[s.jsx(h_,{className:"w-4 h-4 mr-2"}),"Activity"]}),s.jsxs(ja,{value:"settings",children:[s.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Settings"]})]}),s.jsxs(Sa,{value:"overview",className:"space-y-6",children:[s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(pr,{children:"Personal Information"}),s.jsx(xa,{children:"Basic user details and contact information"})]}),s.jsx(ot,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Full Name"}),s.jsx("p",{className:"mt-1",children:f.display_name})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Email"}),s.jsx("p",{className:"mt-1",children:f.email||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Phone"}),s.jsx("p",{className:"mt-1",children:f.phone||"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Position"}),s.jsx("p",{className:"mt-1",children:f.position||"Not specified"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Department"}),s.jsx("p",{className:"mt-1",children:f.department_id||"Not assigned"})]})]})})]}),s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(pr,{children:"Employment Information"}),s.jsx(xa,{children:"Work-related details and status"})]}),s.jsx(ot,{className:"space-y-4",children:s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Role"}),s.jsx("p",{className:"mt-1",children:s.jsx(pt,{variant:w(f.role),children:f.role==="leader_chef"?"Leader Chef":f.role})})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Hire Date"}),s.jsx("p",{className:"mt-1",children:f.hire_date?on(new Date(f.hire_date),"MMM d, yyyy"):"Not provided"})]}),s.jsxs("div",{children:[s.jsx("label",{className:"text-sm font-medium text-muted-foreground",children:"Time at Company"}),s.jsx("p",{className:"mt-1",children:f.hire_date?Fv(new Date(f.hire_date),{addSuffix:!1}):"Unknown"})]})]})})]}),s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(pr,{children:"Compliance Status"}),s.jsx(xa,{children:"Document compliance and certifications"})]}),s.jsx(ot,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{className:"flex items-center gap-3",children:[M.status==="compliant"&&s.jsx(cl,{className:"w-8 h-8 text-green-600"}),M.status==="expiring"&&s.jsx(Xn,{className:"w-8 h-8 text-amber-600"}),M.status==="expired"&&s.jsx(wn,{className:"w-8 h-8 text-red-600"}),s.jsxs("div",{children:[s.jsxs("p",{className:`font-medium ${M.color}`,children:[M.status==="compliant"&&"All Documents Valid",M.status==="expiring"&&"Documents Expiring Soon",M.status==="expired"&&"Expired Documents",M.status==="no_documents"&&"No Documents on File"]}),s.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.user_documents?.length||0," document(s) on file"]})]})]}),s.jsx(ke,{variant:"outline",onClick:()=>d("documents"),children:"View Documents"})]})})]})]}),s.jsx(Sa,{value:"documents",className:"space-y-6",children:s.jsxs(it,{children:[s.jsx(sr,{children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx(pr,{children:"Documents & Certifications"}),s.jsx(xa,{children:"Manage user documents, certificates, and compliance files"})]}),D&&s.jsxs(ke,{onClick:C,children:[s.jsx(vk,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]})}),s.jsx(ot,{children:!f.user_documents||f.user_documents.length===0?s.jsxs("div",{className:"text-center py-12",children:[s.jsx(hh,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"font-medium",children:"No documents on file"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload certificates and compliance documents"})]}):s.jsx("div",{className:"space-y-4",children:f.user_documents.map(F=>{const U=F.expiration_date&&Od(new Date(F.expiration_date),new Date),I=F.expiration_date&&!U&&Od(new Date(F.expiration_date),xs(new Date,30));return s.jsx(it,{children:s.jsx(ot,{className:"pt-6",children:s.jsxs("div",{className:"flex items-start justify-between",children:[s.jsxs("div",{className:"flex items-start gap-4",children:[s.jsx("div",{className:"p-3 bg-muted rounded-lg",children:s.jsx(hh,{className:"w-6 h-6"})}),s.jsxs("div",{className:"space-y-1",children:[s.jsx("p",{className:"font-medium",children:F.document_name}),s.jsx("p",{className:"text-xs text-muted-foreground capitalize",children:F.document_type.replace("_"," ")}),F.expiration_date&&s.jsxs("p",{className:"text-sm text-muted-foreground",children:["Expires: ",on(new Date(F.expiration_date),"MMM d, yyyy"),!U&&s.jsxs("span",{className:"ml-2",children:["(",Fv(new Date(F.expiration_date),{addSuffix:!0}),")"]})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[U&&s.jsx(pt,{variant:"destructive",className:"text-xs",children:"Expired"}),I&&s.jsx(pt,{className:"bg-amber-600 text-xs",children:"Expiring Soon"}),!U&&!I&&s.jsx(pt,{className:"bg-green-600 text-xs",children:"Valid"})]})]})]}),s.jsx(ke,{variant:"ghost",size:"sm",children:s.jsx(i2,{className:"w-4 h-4"})})]})})},F.id)})})})]})}),s.jsx(Sa,{value:"activity",className:"space-y-6",children:s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(pr,{children:"Recent Activity"}),s.jsx(xa,{children:"User actions and timeline"})]}),s.jsx(ot,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(h_,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"font-medium",children:"Activity tracking coming soon"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"View task completions, logins, and system actions"})]})})]})}),s.jsx(Sa,{value:"settings",className:"space-y-6",children:s.jsxs(it,{children:[s.jsxs(sr,{children:[s.jsx(pr,{children:"User Settings"}),s.jsx(xa,{children:"Manage permissions and preferences"})]}),s.jsx(ot,{children:s.jsxs("div",{className:"text-center py-12",children:[s.jsx(Sc,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),s.jsx("p",{className:"font-medium",children:"Settings management coming soon"}),s.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure notifications, permissions, and preferences"})]})})]})})]}),f&&s.jsx(jR,{open:p,onOpenChange:v,user:f,onSuccess:E})]})}const EX=new oM,AX=()=>s.jsx(cM,{client:EX,children:s.jsx(s$,{children:s.jsx(l$,{children:s.jsxs(n3,{children:[s.jsx(gD,{}),s.jsx(KD,{}),s.jsx(d7,{children:s.jsxs(s7,{children:[s.jsx(Ws,{path:"/welcome",element:s.jsx(GY,{})}),s.jsx(Ws,{path:"/auth",element:s.jsx(JY,{})}),s.jsxs(Ws,{path:"/",element:s.jsx(u$,{children:s.jsx(o$,{})}),children:[s.jsx(Ws,{index:!0,element:s.jsx(aV,{})}),s.jsx(Ws,{path:"recipes",element:s.jsx(XV,{})}),s.jsx(Ws,{path:"labeling",element:s.jsx(FY,{})}),s.jsx(Ws,{path:"inventory",element:s.jsx($Y,{})}),s.jsx(Ws,{path:"routine-tasks",element:s.jsx(ZZ,{})}),s.jsx(Ws,{path:"training",element:s.jsx(XZ,{})}),s.jsx(Ws,{path:"people",element:s.jsx(dX,{})}),s.jsx(Ws,{path:"people/:userId",element:s.jsx(CX,{})}),s.jsx(Ws,{path:"feed",element:s.jsx(xX,{})}),s.jsx(Ws,{path:"analytics",element:s.jsx(VY,{})}),s.jsx(Ws,{path:"traffic-light",element:s.jsx(NX,{})}),s.jsx(Ws,{path:"drafts",element:s.jsx(kX,{})})]}),s.jsx(Ws,{path:"*",element:s.jsx(ZY,{})})]})}),s.jsx(b$,{}),s.jsx(w$,{})]})})})});m8.createRoot(document.getElementById("root")).render(s.jsx(AX,{}));export{ln as _,PX as c,l0 as g};
